const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/javascript-C4-_p9Ui.js","assets/typescript-D2ap8n5I.js"])))=>i.map(i=>d[i]);
var xwe=Object.defineProperty;var aY=n=>{throw TypeError(n)};var Lwe=(n,e,t)=>e in n?xwe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Nn=(n,e,t)=>Lwe(n,typeof e!="symbol"?e+"":e,t),u5=(n,e,t)=>e.has(n)||aY("Cannot "+t);var te=(n,e,t)=>(u5(n,e,"read from private field"),t?t.call(n):e.get(n)),Ft=(n,e,t)=>e.has(n)?aY("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),st=(n,e,t,i)=>(u5(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),ci=(n,e,t)=>(u5(n,e,"access private method"),t);var dE=(n,e,t,i)=>({set _(s){st(n,e,s,t)},get _(){return te(n,e,i)}});function kwe(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function ioe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var noe={exports:{}},TO={},soe={exports:{}},bi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sI=Symbol.for("react.element"),Nwe=Symbol.for("react.portal"),Iwe=Symbol.for("react.fragment"),Ewe=Symbol.for("react.strict_mode"),Dwe=Symbol.for("react.profiler"),Twe=Symbol.for("react.provider"),Rwe=Symbol.for("react.context"),Mwe=Symbol.for("react.forward_ref"),Pwe=Symbol.for("react.suspense"),Awe=Symbol.for("react.memo"),Owe=Symbol.for("react.lazy"),lY=Symbol.iterator;function Fwe(n){return n===null||typeof n!="object"?null:(n=lY&&n[lY]||n["@@iterator"],typeof n=="function"?n:null)}var ooe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},roe=Object.assign,aoe={};function d1(n,e,t){this.props=n,this.context=e,this.refs=aoe,this.updater=t||ooe}d1.prototype.isReactComponent={};d1.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};d1.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function loe(){}loe.prototype=d1.prototype;function mU(n,e,t){this.props=n,this.context=e,this.refs=aoe,this.updater=t||ooe}var pU=mU.prototype=new loe;pU.constructor=mU;roe(pU,d1.prototype);pU.isPureReactComponent=!0;var cY=Array.isArray,coe=Object.prototype.hasOwnProperty,_U={current:null},doe={key:!0,ref:!0,__self:!0,__source:!0};function uoe(n,e,t){var i,s={},o=null,r=null;if(e!=null)for(i in e.ref!==void 0&&(r=e.ref),e.key!==void 0&&(o=""+e.key),e)coe.call(e,i)&&!doe.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:sI,type:n,key:o,ref:r,props:s,_owner:_U.current}}function Bwe(n,e){return{$$typeof:sI,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function bU(n){return typeof n=="object"&&n!==null&&n.$$typeof===sI}function Wwe(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var dY=/\/+/g;function h5(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Wwe(""+n.key):e.toString(36)}function ZD(n,e,t,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var r=!1;if(n===null)r=!0;else switch(o){case"string":case"number":r=!0;break;case"object":switch(n.$$typeof){case sI:case Nwe:r=!0}}if(r)return r=n,s=s(r),n=i===""?"."+h5(r,0):i,cY(s)?(t="",n!=null&&(t=n.replace(dY,"$&/")+"/"),ZD(s,e,t,"",function(c){return c})):s!=null&&(bU(s)&&(s=Bwe(s,t+(!s.key||r&&r.key===s.key?"":(""+s.key).replace(dY,"$&/")+"/")+n)),e.push(s)),1;if(r=0,i=i===""?".":i+":",cY(n))for(var a=0;a<n.length;a++){o=n[a];var l=i+h5(o,a);r+=ZD(o,e,t,l,s)}else if(l=Fwe(n),typeof l=="function")for(n=l.call(n),a=0;!(o=n.next()).done;)o=o.value,l=i+h5(o,a++),r+=ZD(o,e,t,l,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return r}function uE(n,e,t){if(n==null)return n;var i=[],s=0;return ZD(n,i,"","",function(o){return e.call(t,o,s++)}),i}function Hwe(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var $r={current:null},YD={transition:null},Vwe={ReactCurrentDispatcher:$r,ReactCurrentBatchConfig:YD,ReactCurrentOwner:_U};function hoe(){throw Error("act(...) is not supported in production builds of React.")}bi.Children={map:uE,forEach:function(n,e,t){uE(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return uE(n,function(){e++}),e},toArray:function(n){return uE(n,function(e){return e})||[]},only:function(n){if(!bU(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};bi.Component=d1;bi.Fragment=Iwe;bi.Profiler=Dwe;bi.PureComponent=mU;bi.StrictMode=Ewe;bi.Suspense=Pwe;bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vwe;bi.act=hoe;bi.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=roe({},n.props),s=n.key,o=n.ref,r=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,r=_U.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)coe.call(e,l)&&!doe.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:sI,type:n.type,key:s,ref:o,props:i,_owner:r}};bi.createContext=function(n){return n={$$typeof:Rwe,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Twe,_context:n},n.Consumer=n};bi.createElement=uoe;bi.createFactory=function(n){var e=uoe.bind(null,n);return e.type=n,e};bi.createRef=function(){return{current:null}};bi.forwardRef=function(n){return{$$typeof:Mwe,render:n}};bi.isValidElement=bU;bi.lazy=function(n){return{$$typeof:Owe,_payload:{_status:-1,_result:n},_init:Hwe}};bi.memo=function(n,e){return{$$typeof:Awe,type:n,compare:e===void 0?null:e}};bi.startTransition=function(n){var e=YD.transition;YD.transition={};try{n()}finally{YD.transition=e}};bi.unstable_act=hoe;bi.useCallback=function(n,e){return $r.current.useCallback(n,e)};bi.useContext=function(n){return $r.current.useContext(n)};bi.useDebugValue=function(){};bi.useDeferredValue=function(n){return $r.current.useDeferredValue(n)};bi.useEffect=function(n,e){return $r.current.useEffect(n,e)};bi.useId=function(){return $r.current.useId()};bi.useImperativeHandle=function(n,e,t){return $r.current.useImperativeHandle(n,e,t)};bi.useInsertionEffect=function(n,e){return $r.current.useInsertionEffect(n,e)};bi.useLayoutEffect=function(n,e){return $r.current.useLayoutEffect(n,e)};bi.useMemo=function(n,e){return $r.current.useMemo(n,e)};bi.useReducer=function(n,e,t){return $r.current.useReducer(n,e,t)};bi.useRef=function(n){return $r.current.useRef(n)};bi.useState=function(n){return $r.current.useState(n)};bi.useSyncExternalStore=function(n,e,t){return $r.current.useSyncExternalStore(n,e,t)};bi.useTransition=function(){return $r.current.useTransition()};bi.version="18.3.1";soe.exports=bi;var L=soe.exports;const oh=ioe(L),foe=kwe({__proto__:null,default:oh},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jwe=L,zwe=Symbol.for("react.element"),Uwe=Symbol.for("react.fragment"),$we=Object.prototype.hasOwnProperty,Kwe=jwe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qwe={key:!0,ref:!0,__self:!0,__source:!0};function goe(n,e,t){var i,s={},o=null,r=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(r=e.ref);for(i in e)$we.call(e,i)&&!qwe.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:zwe,type:n,key:o,ref:r,props:s,_owner:Kwe.current}}TO.Fragment=Uwe;TO.jsx=goe;TO.jsxs=goe;noe.exports=TO;var g=noe.exports,moe={exports:{}},bl={},poe={exports:{}},_oe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(q,Z){var V=q.length;q.push(Z);e:for(;0<V;){var le=V-1>>>1,Fe=q[le];if(0<s(Fe,Z))q[le]=Z,q[V]=Fe,V=le;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var Z=q[0],V=q.pop();if(V!==Z){q[0]=V;e:for(var le=0,Fe=q.length,ke=Fe>>>1;le<ke;){var De=2*(le+1)-1,ce=q[De],Re=De+1,Ee=q[Re];if(0>s(ce,V))Re<Fe&&0>s(Ee,ce)?(q[le]=Ee,q[Re]=V,le=Re):(q[le]=ce,q[De]=V,le=De);else if(Re<Fe&&0>s(Ee,V))q[le]=Ee,q[Re]=V,le=Re;else break e}}return Z}function s(q,Z){var V=q.sortIndex-Z.sortIndex;return V!==0?V:q.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var r=Date,a=r.now();n.unstable_now=function(){return r.now()-a}}var l=[],c=[],d=1,u=null,h=3,f=!1,m=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(q){for(var Z=t(c);Z!==null;){if(Z.callback===null)i(c);else if(Z.startTime<=q)i(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=t(c)}}function C(q){if(p=!1,y(q),!m)if(t(l)!==null)m=!0,z(S);else{var Z=t(c);Z!==null&&ee(C,Z.startTime-q)}}function S(q,Z){m=!1,p&&(p=!1,v(N),N=-1),f=!0;var V=h;try{for(y(Z),u=t(l);u!==null&&(!(u.expirationTime>Z)||q&&!A());){var le=u.callback;if(typeof le=="function"){u.callback=null,h=u.priorityLevel;var Fe=le(u.expirationTime<=Z);Z=n.unstable_now(),typeof Fe=="function"?u.callback=Fe:u===t(l)&&i(l),y(Z)}else i(l);u=t(l)}if(u!==null)var ke=!0;else{var De=t(c);De!==null&&ee(C,De.startTime-Z),ke=!1}return ke}finally{u=null,h=V,f=!1}}var x=!1,k=null,N=-1,E=5,B=-1;function A(){return!(n.unstable_now()-B<E)}function O(){if(k!==null){var q=n.unstable_now();B=q;var Z=!0;try{Z=k(!0,q)}finally{Z?W():(x=!1,k=null)}}else x=!1}var W;if(typeof w=="function")W=function(){w(O)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,M=T.port2;T.port1.onmessage=O,W=function(){M.postMessage(null)}}else W=function(){b(O,0)};function z(q){k=q,x||(x=!0,W())}function ee(q,Z){N=b(function(){q(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){m||f||(m=!0,z(S))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(q){switch(h){case 1:case 2:case 3:var Z=3;break;default:Z=h}var V=h;h=Z;try{return q()}finally{h=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var V=h;h=q;try{return Z()}finally{h=V}},n.unstable_scheduleCallback=function(q,Z,V){var le=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?le+V:le):V=le,q){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=V+Fe,q={id:d++,callback:Z,priorityLevel:q,startTime:V,expirationTime:Fe,sortIndex:-1},V>le?(q.sortIndex=V,e(c,q),t(l)===null&&q===t(c)&&(p?(v(N),N=-1):p=!0,ee(C,V-le))):(q.sortIndex=Fe,e(l,q),m||f||(m=!0,z(S))),q},n.unstable_shouldYield=A,n.unstable_wrapCallback=function(q){var Z=h;return function(){var V=h;h=Z;try{return q.apply(this,arguments)}finally{h=V}}}})(_oe);poe.exports=_oe;var Gwe=poe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zwe=L,dl=Gwe;function He(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var boe=new Set,PL={};function Hv(n,e){rC(n,e),rC(n+"Capture",e)}function rC(n,e){for(PL[n]=e,n=0;n<e.length;n++)boe.add(e[n])}var nf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d7=Object.prototype.hasOwnProperty,Ywe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uY={},hY={};function Xwe(n){return d7.call(hY,n)?!0:d7.call(uY,n)?!1:Ywe.test(n)?hY[n]=!0:(uY[n]=!0,!1)}function Qwe(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Jwe(n,e,t,i){if(e===null||typeof e>"u"||Qwe(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kr(n,e,t,i,s,o,r){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=r}var To={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){To[n]=new Kr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];To[e]=new Kr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){To[n]=new Kr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){To[n]=new Kr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){To[n]=new Kr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){To[n]=new Kr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){To[n]=new Kr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){To[n]=new Kr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){To[n]=new Kr(n,5,!1,n.toLowerCase(),null,!1,!1)});var vU=/[\-:]([a-z])/g;function wU(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(vU,wU);To[e]=new Kr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(vU,wU);To[e]=new Kr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(vU,wU);To[e]=new Kr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){To[n]=new Kr(n,1,!1,n.toLowerCase(),null,!1,!1)});To.xlinkHref=new Kr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){To[n]=new Kr(n,1,!1,n.toLowerCase(),null,!0,!0)});function yU(n,e,t,i){var s=To.hasOwnProperty(e)?To[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Jwe(e,t,s,i)&&(t=null),i||s===null?Xwe(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Nf=Zwe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hE=Symbol.for("react.element"),G0=Symbol.for("react.portal"),Z0=Symbol.for("react.fragment"),CU=Symbol.for("react.strict_mode"),u7=Symbol.for("react.profiler"),voe=Symbol.for("react.provider"),woe=Symbol.for("react.context"),SU=Symbol.for("react.forward_ref"),h7=Symbol.for("react.suspense"),f7=Symbol.for("react.suspense_list"),xU=Symbol.for("react.memo"),Jf=Symbol.for("react.lazy"),yoe=Symbol.for("react.offscreen"),fY=Symbol.iterator;function eS(n){return n===null||typeof n!="object"?null:(n=fY&&n[fY]||n["@@iterator"],typeof n=="function"?n:null)}var Jn=Object.assign,f5;function HS(n){if(f5===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);f5=e&&e[1]||""}return`
`+f5+n}var g5=!1;function m5(n,e){if(!n||g5)return"";g5=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=i.stack.split(`
`),r=s.length-1,a=o.length-1;1<=r&&0<=a&&s[r]!==o[a];)a--;for(;1<=r&&0<=a;r--,a--)if(s[r]!==o[a]){if(r!==1||a!==1)do if(r--,a--,0>a||s[r]!==o[a]){var l=`
`+s[r].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=r&&0<=a);break}}}finally{g5=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?HS(n):""}function eye(n){switch(n.tag){case 5:return HS(n.type);case 16:return HS("Lazy");case 13:return HS("Suspense");case 19:return HS("SuspenseList");case 0:case 2:case 15:return n=m5(n.type,!1),n;case 11:return n=m5(n.type.render,!1),n;case 1:return n=m5(n.type,!0),n;default:return""}}function g7(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Z0:return"Fragment";case G0:return"Portal";case u7:return"Profiler";case CU:return"StrictMode";case h7:return"Suspense";case f7:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case woe:return(n.displayName||"Context")+".Consumer";case voe:return(n._context.displayName||"Context")+".Provider";case SU:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case xU:return e=n.displayName||null,e!==null?e:g7(n.type)||"Memo";case Jf:e=n._payload,n=n._init;try{return g7(n(e))}catch{}}return null}function tye(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return g7(e);case 8:return e===CU?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tm(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Coe(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iye(n){var e=Coe(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(r){i=""+r,o.call(this,r)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(r){i=""+r},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function fE(n){n._valueTracker||(n._valueTracker=iye(n))}function Soe(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=Coe(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function sR(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function m7(n,e){var t=e.checked;return Jn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function gY(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Tm(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xoe(n,e){e=e.checked,e!=null&&yU(n,"checked",e,!1)}function p7(n,e){xoe(n,e);var t=Tm(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?_7(n,e.type,t):e.hasOwnProperty("defaultValue")&&_7(n,e.type,Tm(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function mY(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function _7(n,e,t){(e!=="number"||sR(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var VS=Array.isArray;function Gw(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Tm(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function b7(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(He(91));return Jn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function pY(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(He(92));if(VS(t)){if(1<t.length)throw Error(He(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Tm(t)}}function Loe(n,e){var t=Tm(e.value),i=Tm(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function _Y(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function koe(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function v7(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?koe(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var gE,Noe=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(gE=gE||document.createElement("div"),gE.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gE.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function AL(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var bx={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nye=["Webkit","ms","Moz","O"];Object.keys(bx).forEach(function(n){nye.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),bx[e]=bx[n]})});function Ioe(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||bx.hasOwnProperty(n)&&bx[n]?(""+e).trim():e+"px"}function Eoe(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=Ioe(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var sye=Jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function w7(n,e){if(e){if(sye[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(He(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(He(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(He(61))}if(e.style!=null&&typeof e.style!="object")throw Error(He(62))}}function y7(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C7=null;function LU(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var S7=null,Zw=null,Yw=null;function bY(n){if(n=aI(n)){if(typeof S7!="function")throw Error(He(280));var e=n.stateNode;e&&(e=OO(e),S7(n.stateNode,n.type,e))}}function Doe(n){Zw?Yw?Yw.push(n):Yw=[n]:Zw=n}function Toe(){if(Zw){var n=Zw,e=Yw;if(Yw=Zw=null,bY(n),e)for(n=0;n<e.length;n++)bY(e[n])}}function Roe(n,e){return n(e)}function Moe(){}var p5=!1;function Poe(n,e,t){if(p5)return n(e,t);p5=!0;try{return Roe(n,e,t)}finally{p5=!1,(Zw!==null||Yw!==null)&&(Moe(),Toe())}}function OL(n,e){var t=n.stateNode;if(t===null)return null;var i=OO(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(He(231,e,typeof t));return t}var x7=!1;if(nf)try{var tS={};Object.defineProperty(tS,"passive",{get:function(){x7=!0}}),window.addEventListener("test",tS,tS),window.removeEventListener("test",tS,tS)}catch{x7=!1}function oye(n,e,t,i,s,o,r,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var vx=!1,oR=null,rR=!1,L7=null,rye={onError:function(n){vx=!0,oR=n}};function aye(n,e,t,i,s,o,r,a,l){vx=!1,oR=null,oye.apply(rye,arguments)}function lye(n,e,t,i,s,o,r,a,l){if(aye.apply(this,arguments),vx){if(vx){var c=oR;vx=!1,oR=null}else throw Error(He(198));rR||(rR=!0,L7=c)}}function Vv(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Aoe(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function vY(n){if(Vv(n)!==n)throw Error(He(188))}function cye(n){var e=n.alternate;if(!e){if(e=Vv(n),e===null)throw Error(He(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===t)return vY(s),n;if(o===i)return vY(s),e;o=o.sibling}throw Error(He(188))}if(t.return!==i.return)t=s,i=o;else{for(var r=!1,a=s.child;a;){if(a===t){r=!0,t=s,i=o;break}if(a===i){r=!0,i=s,t=o;break}a=a.sibling}if(!r){for(a=o.child;a;){if(a===t){r=!0,t=o,i=s;break}if(a===i){r=!0,i=o,t=s;break}a=a.sibling}if(!r)throw Error(He(189))}}if(t.alternate!==i)throw Error(He(190))}if(t.tag!==3)throw Error(He(188));return t.stateNode.current===t?n:e}function Ooe(n){return n=cye(n),n!==null?Foe(n):null}function Foe(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Foe(n);if(e!==null)return e;n=n.sibling}return null}var Boe=dl.unstable_scheduleCallback,wY=dl.unstable_cancelCallback,dye=dl.unstable_shouldYield,uye=dl.unstable_requestPaint,_s=dl.unstable_now,hye=dl.unstable_getCurrentPriorityLevel,kU=dl.unstable_ImmediatePriority,Woe=dl.unstable_UserBlockingPriority,aR=dl.unstable_NormalPriority,fye=dl.unstable_LowPriority,Hoe=dl.unstable_IdlePriority,RO=null,uu=null;function gye(n){if(uu&&typeof uu.onCommitFiberRoot=="function")try{uu.onCommitFiberRoot(RO,n,void 0,(n.current.flags&128)===128)}catch{}}var Uc=Math.clz32?Math.clz32:_ye,mye=Math.log,pye=Math.LN2;function _ye(n){return n>>>=0,n===0?32:31-(mye(n)/pye|0)|0}var mE=64,pE=4194304;function jS(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function lR(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,r=t&268435455;if(r!==0){var a=r&~s;a!==0?i=jS(a):(o&=r,o!==0&&(i=jS(o)))}else r=t&~s,r!==0?i=jS(r):o!==0&&(i=jS(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Uc(e),s=1<<t,i|=n[t],e&=~s;return i}function bye(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vye(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var r=31-Uc(o),a=1<<r,l=s[r];l===-1?(!(a&t)||a&i)&&(s[r]=bye(a,e)):l<=e&&(n.expiredLanes|=a),o&=~a}}function k7(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Voe(){var n=mE;return mE<<=1,!(mE&4194240)&&(mE=64),n}function _5(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function oI(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Uc(e),n[e]=t}function wye(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Uc(t),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~o}}function NU(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Uc(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var hn=0;function joe(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var zoe,IU,Uoe,$oe,Koe,N7=!1,_E=[],Xg=null,Qg=null,Jg=null,FL=new Map,BL=new Map,cg=[],yye="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yY(n,e){switch(n){case"focusin":case"focusout":Xg=null;break;case"dragenter":case"dragleave":Qg=null;break;case"mouseover":case"mouseout":Jg=null;break;case"pointerover":case"pointerout":FL.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":BL.delete(e.pointerId)}}function iS(n,e,t,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=aI(e),e!==null&&IU(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function Cye(n,e,t,i,s){switch(e){case"focusin":return Xg=iS(Xg,n,e,t,i,s),!0;case"dragenter":return Qg=iS(Qg,n,e,t,i,s),!0;case"mouseover":return Jg=iS(Jg,n,e,t,i,s),!0;case"pointerover":var o=s.pointerId;return FL.set(o,iS(FL.get(o)||null,n,e,t,i,s)),!0;case"gotpointercapture":return o=s.pointerId,BL.set(o,iS(BL.get(o)||null,n,e,t,i,s)),!0}return!1}function qoe(n){var e=v_(n.target);if(e!==null){var t=Vv(e);if(t!==null){if(e=t.tag,e===13){if(e=Aoe(t),e!==null){n.blockedOn=e,Koe(n.priority,function(){Uoe(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function XD(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=I7(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);C7=i,t.target.dispatchEvent(i),C7=null}else return e=aI(t),e!==null&&IU(e),n.blockedOn=t,!1;e.shift()}return!0}function CY(n,e,t){XD(n)&&t.delete(e)}function Sye(){N7=!1,Xg!==null&&XD(Xg)&&(Xg=null),Qg!==null&&XD(Qg)&&(Qg=null),Jg!==null&&XD(Jg)&&(Jg=null),FL.forEach(CY),BL.forEach(CY)}function nS(n,e){n.blockedOn===e&&(n.blockedOn=null,N7||(N7=!0,dl.unstable_scheduleCallback(dl.unstable_NormalPriority,Sye)))}function WL(n){function e(s){return nS(s,n)}if(0<_E.length){nS(_E[0],n);for(var t=1;t<_E.length;t++){var i=_E[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Xg!==null&&nS(Xg,n),Qg!==null&&nS(Qg,n),Jg!==null&&nS(Jg,n),FL.forEach(e),BL.forEach(e),t=0;t<cg.length;t++)i=cg[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<cg.length&&(t=cg[0],t.blockedOn===null);)qoe(t),t.blockedOn===null&&cg.shift()}var Xw=Nf.ReactCurrentBatchConfig,cR=!0;function xye(n,e,t,i){var s=hn,o=Xw.transition;Xw.transition=null;try{hn=1,EU(n,e,t,i)}finally{hn=s,Xw.transition=o}}function Lye(n,e,t,i){var s=hn,o=Xw.transition;Xw.transition=null;try{hn=4,EU(n,e,t,i)}finally{hn=s,Xw.transition=o}}function EU(n,e,t,i){if(cR){var s=I7(n,e,t,i);if(s===null)N5(n,e,i,dR,t),yY(n,i);else if(Cye(s,n,e,t,i))i.stopPropagation();else if(yY(n,i),e&4&&-1<yye.indexOf(n)){for(;s!==null;){var o=aI(s);if(o!==null&&zoe(o),o=I7(n,e,t,i),o===null&&N5(n,e,i,dR,t),o===s)break;s=o}s!==null&&i.stopPropagation()}else N5(n,e,i,null,t)}}var dR=null;function I7(n,e,t,i){if(dR=null,n=LU(i),n=v_(n),n!==null)if(e=Vv(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Aoe(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return dR=n,null}function Goe(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hye()){case kU:return 1;case Woe:return 4;case aR:case fye:return 16;case Hoe:return 536870912;default:return 16}default:return 16}}var Ig=null,DU=null,QD=null;function Zoe(){if(QD)return QD;var n,e=DU,t=e.length,i,s="value"in Ig?Ig.value:Ig.textContent,o=s.length;for(n=0;n<t&&e[n]===s[n];n++);var r=t-n;for(i=1;i<=r&&e[t-i]===s[o-i];i++);return QD=s.slice(n,1<i?1-i:void 0)}function JD(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function bE(){return!0}function SY(){return!1}function vl(n){function e(t,i,s,o,r){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=r,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?bE:SY,this.isPropagationStopped=SY,this}return Jn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=bE)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=bE)},persist:function(){},isPersistent:bE}),e}var u1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},TU=vl(u1),rI=Jn({},u1,{view:0,detail:0}),kye=vl(rI),b5,v5,sS,MO=Jn({},rI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:RU,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==sS&&(sS&&n.type==="mousemove"?(b5=n.screenX-sS.screenX,v5=n.screenY-sS.screenY):v5=b5=0,sS=n),b5)},movementY:function(n){return"movementY"in n?n.movementY:v5}}),xY=vl(MO),Nye=Jn({},MO,{dataTransfer:0}),Iye=vl(Nye),Eye=Jn({},rI,{relatedTarget:0}),w5=vl(Eye),Dye=Jn({},u1,{animationName:0,elapsedTime:0,pseudoElement:0}),Tye=vl(Dye),Rye=Jn({},u1,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Mye=vl(Rye),Pye=Jn({},u1,{data:0}),LY=vl(Pye),Aye={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oye={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fye={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bye(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Fye[n])?!!e[n]:!1}function RU(){return Bye}var Wye=Jn({},rI,{key:function(n){if(n.key){var e=Aye[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=JD(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Oye[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:RU,charCode:function(n){return n.type==="keypress"?JD(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?JD(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Hye=vl(Wye),Vye=Jn({},MO,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kY=vl(Vye),jye=Jn({},rI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:RU}),zye=vl(jye),Uye=Jn({},u1,{propertyName:0,elapsedTime:0,pseudoElement:0}),$ye=vl(Uye),Kye=Jn({},MO,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),qye=vl(Kye),Gye=[9,13,27,32],MU=nf&&"CompositionEvent"in window,wx=null;nf&&"documentMode"in document&&(wx=document.documentMode);var Zye=nf&&"TextEvent"in window&&!wx,Yoe=nf&&(!MU||wx&&8<wx&&11>=wx),NY=" ",IY=!1;function Xoe(n,e){switch(n){case"keyup":return Gye.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qoe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Y0=!1;function Yye(n,e){switch(n){case"compositionend":return Qoe(e);case"keypress":return e.which!==32?null:(IY=!0,NY);case"textInput":return n=e.data,n===NY&&IY?null:n;default:return null}}function Xye(n,e){if(Y0)return n==="compositionend"||!MU&&Xoe(n,e)?(n=Zoe(),QD=DU=Ig=null,Y0=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yoe&&e.locale!=="ko"?null:e.data;default:return null}}var Qye={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EY(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Qye[n.type]:e==="textarea"}function Joe(n,e,t,i){Doe(i),e=uR(e,"onChange"),0<e.length&&(t=new TU("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var yx=null,HL=null;function Jye(n){dre(n,0)}function PO(n){var e=J0(n);if(Soe(e))return n}function eCe(n,e){if(n==="change")return e}var ere=!1;if(nf){var y5;if(nf){var C5="oninput"in document;if(!C5){var DY=document.createElement("div");DY.setAttribute("oninput","return;"),C5=typeof DY.oninput=="function"}y5=C5}else y5=!1;ere=y5&&(!document.documentMode||9<document.documentMode)}function TY(){yx&&(yx.detachEvent("onpropertychange",tre),HL=yx=null)}function tre(n){if(n.propertyName==="value"&&PO(HL)){var e=[];Joe(e,HL,n,LU(n)),Poe(Jye,e)}}function tCe(n,e,t){n==="focusin"?(TY(),yx=e,HL=t,yx.attachEvent("onpropertychange",tre)):n==="focusout"&&TY()}function iCe(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return PO(HL)}function nCe(n,e){if(n==="click")return PO(e)}function sCe(n,e){if(n==="input"||n==="change")return PO(e)}function oCe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var id=typeof Object.is=="function"?Object.is:oCe;function VL(n,e){if(id(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!d7.call(e,s)||!id(n[s],e[s]))return!1}return!0}function RY(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function MY(n,e){var t=RY(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=RY(t)}}function ire(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?ire(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function nre(){for(var n=window,e=sR();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=sR(n.document)}return e}function PU(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function rCe(n){var e=nre(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&ire(t.ownerDocument.documentElement,t)){if(i!==null&&PU(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=MY(t,o);var r=MY(t,i);s&&r&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==r.node||n.focusOffset!==r.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(r.node,r.offset)):(e.setEnd(r.node,r.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var aCe=nf&&"documentMode"in document&&11>=document.documentMode,X0=null,E7=null,Cx=null,D7=!1;function PY(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;D7||X0==null||X0!==sR(i)||(i=X0,"selectionStart"in i&&PU(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Cx&&VL(Cx,i)||(Cx=i,i=uR(E7,"onSelect"),0<i.length&&(e=new TU("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=X0)))}function vE(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Q0={animationend:vE("Animation","AnimationEnd"),animationiteration:vE("Animation","AnimationIteration"),animationstart:vE("Animation","AnimationStart"),transitionend:vE("Transition","TransitionEnd")},S5={},sre={};nf&&(sre=document.createElement("div").style,"AnimationEvent"in window||(delete Q0.animationend.animation,delete Q0.animationiteration.animation,delete Q0.animationstart.animation),"TransitionEvent"in window||delete Q0.transitionend.transition);function AO(n){if(S5[n])return S5[n];if(!Q0[n])return n;var e=Q0[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in sre)return S5[n]=e[t];return n}var ore=AO("animationend"),rre=AO("animationiteration"),are=AO("animationstart"),lre=AO("transitionend"),cre=new Map,AY="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lp(n,e){cre.set(n,e),Hv(e,[n])}for(var x5=0;x5<AY.length;x5++){var L5=AY[x5],lCe=L5.toLowerCase(),cCe=L5[0].toUpperCase()+L5.slice(1);lp(lCe,"on"+cCe)}lp(ore,"onAnimationEnd");lp(rre,"onAnimationIteration");lp(are,"onAnimationStart");lp("dblclick","onDoubleClick");lp("focusin","onFocus");lp("focusout","onBlur");lp(lre,"onTransitionEnd");rC("onMouseEnter",["mouseout","mouseover"]);rC("onMouseLeave",["mouseout","mouseover"]);rC("onPointerEnter",["pointerout","pointerover"]);rC("onPointerLeave",["pointerout","pointerover"]);Hv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hv("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zS="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dCe=new Set("cancel close invalid load scroll toggle".split(" ").concat(zS));function OY(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,lye(i,e,void 0,n),n.currentTarget=null}function dre(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var r=i.length-1;0<=r;r--){var a=i[r],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break e;OY(s,a,c),o=l}else for(r=0;r<i.length;r++){if(a=i[r],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break e;OY(s,a,c),o=l}}}if(rR)throw n=L7,rR=!1,L7=null,n}function An(n,e){var t=e[A7];t===void 0&&(t=e[A7]=new Set);var i=n+"__bubble";t.has(i)||(ure(e,n,2,!1),t.add(i))}function k5(n,e,t){var i=0;e&&(i|=4),ure(t,n,i,e)}var wE="_reactListening"+Math.random().toString(36).slice(2);function jL(n){if(!n[wE]){n[wE]=!0,boe.forEach(function(t){t!=="selectionchange"&&(dCe.has(t)||k5(t,!1,n),k5(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[wE]||(e[wE]=!0,k5("selectionchange",!1,e))}}function ure(n,e,t,i){switch(Goe(e)){case 1:var s=xye;break;case 4:s=Lye;break;default:s=EU}t=s.bind(null,e,t,n),s=void 0,!x7||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function N5(n,e,t,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(r===4)for(r=i.return;r!==null;){var l=r.tag;if((l===3||l===4)&&(l=r.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;r=r.return}for(;a!==null;){if(r=v_(a),r===null)return;if(l=r.tag,l===5||l===6){i=o=r;continue e}a=a.parentNode}}i=i.return}Poe(function(){var c=o,d=LU(t),u=[];e:{var h=cre.get(n);if(h!==void 0){var f=TU,m=n;switch(n){case"keypress":if(JD(t)===0)break e;case"keydown":case"keyup":f=Hye;break;case"focusin":m="focus",f=w5;break;case"focusout":m="blur",f=w5;break;case"beforeblur":case"afterblur":f=w5;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=xY;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Iye;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=zye;break;case ore:case rre:case are:f=Tye;break;case lre:f=$ye;break;case"scroll":f=kye;break;case"wheel":f=qye;break;case"copy":case"cut":case"paste":f=Mye;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=kY}var p=(e&4)!==0,b=!p&&n==="scroll",v=p?h!==null?h+"Capture":null:h;p=[];for(var w=c,y;w!==null;){y=w;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,v!==null&&(C=OL(w,v),C!=null&&p.push(zL(w,C,y)))),b)break;w=w.return}0<p.length&&(h=new f(h,m,null,t,d),u.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",h&&t!==C7&&(m=t.relatedTarget||t.fromElement)&&(v_(m)||m[sf]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=t.relatedTarget||t.toElement,f=c,m=m?v_(m):null,m!==null&&(b=Vv(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(p=xY,C="onMouseLeave",v="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(p=kY,C="onPointerLeave",v="onPointerEnter",w="pointer"),b=f==null?h:J0(f),y=m==null?h:J0(m),h=new p(C,w+"leave",f,t,d),h.target=b,h.relatedTarget=y,C=null,v_(d)===c&&(p=new p(v,w+"enter",m,t,d),p.target=y,p.relatedTarget=b,C=p),b=C,f&&m)t:{for(p=f,v=m,w=0,y=p;y;y=f0(y))w++;for(y=0,C=v;C;C=f0(C))y++;for(;0<w-y;)p=f0(p),w--;for(;0<y-w;)v=f0(v),y--;for(;w--;){if(p===v||v!==null&&p===v.alternate)break t;p=f0(p),v=f0(v)}p=null}else p=null;f!==null&&FY(u,h,f,p,!1),m!==null&&b!==null&&FY(u,b,m,p,!0)}}e:{if(h=c?J0(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=eCe;else if(EY(h))if(ere)S=sCe;else{S=iCe;var x=tCe}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=nCe);if(S&&(S=S(n,c))){Joe(u,S,t,d);break e}x&&x(n,h,c),n==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&_7(h,"number",h.value)}switch(x=c?J0(c):window,n){case"focusin":(EY(x)||x.contentEditable==="true")&&(X0=x,E7=c,Cx=null);break;case"focusout":Cx=E7=X0=null;break;case"mousedown":D7=!0;break;case"contextmenu":case"mouseup":case"dragend":D7=!1,PY(u,t,d);break;case"selectionchange":if(aCe)break;case"keydown":case"keyup":PY(u,t,d)}var k;if(MU)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Y0?Xoe(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(Yoe&&t.locale!=="ko"&&(Y0||N!=="onCompositionStart"?N==="onCompositionEnd"&&Y0&&(k=Zoe()):(Ig=d,DU="value"in Ig?Ig.value:Ig.textContent,Y0=!0)),x=uR(c,N),0<x.length&&(N=new LY(N,n,null,t,d),u.push({event:N,listeners:x}),k?N.data=k:(k=Qoe(t),k!==null&&(N.data=k)))),(k=Zye?Yye(n,t):Xye(n,t))&&(c=uR(c,"onBeforeInput"),0<c.length&&(d=new LY("onBeforeInput","beforeinput",null,t,d),u.push({event:d,listeners:c}),d.data=k))}dre(u,e)})}function zL(n,e,t){return{instance:n,listener:e,currentTarget:t}}function uR(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=OL(n,t),o!=null&&i.unshift(zL(n,o,s)),o=OL(n,e),o!=null&&i.push(zL(n,o,s))),n=n.return}return i}function f0(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function FY(n,e,t,i,s){for(var o=e._reactName,r=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=OL(t,o),l!=null&&r.unshift(zL(t,l,a))):s||(l=OL(t,o),l!=null&&r.push(zL(t,l,a)))),t=t.return}r.length!==0&&n.push({event:e,listeners:r})}var uCe=/\r\n?/g,hCe=/\u0000|\uFFFD/g;function BY(n){return(typeof n=="string"?n:""+n).replace(uCe,`
`).replace(hCe,"")}function yE(n,e,t){if(e=BY(e),BY(n)!==e&&t)throw Error(He(425))}function hR(){}var T7=null,R7=null;function M7(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var P7=typeof setTimeout=="function"?setTimeout:void 0,fCe=typeof clearTimeout=="function"?clearTimeout:void 0,WY=typeof Promise=="function"?Promise:void 0,gCe=typeof queueMicrotask=="function"?queueMicrotask:typeof WY<"u"?function(n){return WY.resolve(null).then(n).catch(mCe)}:P7;function mCe(n){setTimeout(function(){throw n})}function I5(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),WL(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);WL(e)}function em(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function HY(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var h1=Math.random().toString(36).slice(2),tu="__reactFiber$"+h1,UL="__reactProps$"+h1,sf="__reactContainer$"+h1,A7="__reactEvents$"+h1,pCe="__reactListeners$"+h1,_Ce="__reactHandles$"+h1;function v_(n){var e=n[tu];if(e)return e;for(var t=n.parentNode;t;){if(e=t[sf]||t[tu]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=HY(n);n!==null;){if(t=n[tu])return t;n=HY(n)}return e}n=t,t=n.parentNode}return null}function aI(n){return n=n[tu]||n[sf],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function J0(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(He(33))}function OO(n){return n[UL]||null}var O7=[],ew=-1;function cp(n){return{current:n}}function Fn(n){0>ew||(n.current=O7[ew],O7[ew]=null,ew--)}function En(n,e){ew++,O7[ew]=n.current,n.current=e}var Rm={},sr=cp(Rm),xa=cp(!1),Qb=Rm;function aC(n,e){var t=n.type.contextTypes;if(!t)return Rm;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in t)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function La(n){return n=n.childContextTypes,n!=null}function fR(){Fn(xa),Fn(sr)}function VY(n,e,t){if(sr.current!==Rm)throw Error(He(168));En(sr,e),En(xa,t)}function hre(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(He(108,tye(n)||"Unknown",s));return Jn({},t,i)}function gR(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Rm,Qb=sr.current,En(sr,n),En(xa,xa.current),!0}function jY(n,e,t){var i=n.stateNode;if(!i)throw Error(He(169));t?(n=hre(n,e,Qb),i.__reactInternalMemoizedMergedChildContext=n,Fn(xa),Fn(sr),En(sr,n)):Fn(xa),En(xa,t)}var _h=null,FO=!1,E5=!1;function fre(n){_h===null?_h=[n]:_h.push(n)}function bCe(n){FO=!0,fre(n)}function dp(){if(!E5&&_h!==null){E5=!0;var n=0,e=hn;try{var t=_h;for(hn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}_h=null,FO=!1}catch(s){throw _h!==null&&(_h=_h.slice(n+1)),Boe(kU,dp),s}finally{hn=e,E5=!1}}return null}var tw=[],iw=0,mR=null,pR=0,Pl=[],Al=0,Jb=null,Th=1,Rh="";function Wp(n,e){tw[iw++]=pR,tw[iw++]=mR,mR=n,pR=e}function gre(n,e,t){Pl[Al++]=Th,Pl[Al++]=Rh,Pl[Al++]=Jb,Jb=n;var i=Th;n=Rh;var s=32-Uc(i)-1;i&=~(1<<s),t+=1;var o=32-Uc(e)+s;if(30<o){var r=s-s%5;o=(i&(1<<r)-1).toString(32),i>>=r,s-=r,Th=1<<32-Uc(e)+s|t<<s|i,Rh=o+n}else Th=1<<o|t<<s|i,Rh=n}function AU(n){n.return!==null&&(Wp(n,1),gre(n,1,0))}function OU(n){for(;n===mR;)mR=tw[--iw],tw[iw]=null,pR=tw[--iw],tw[iw]=null;for(;n===Jb;)Jb=Pl[--Al],Pl[Al]=null,Rh=Pl[--Al],Pl[Al]=null,Th=Pl[--Al],Pl[Al]=null}var sl=null,tl=null,Wn=!1,Tc=null;function mre(n,e){var t=Hl(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function zY(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,sl=n,tl=em(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,sl=n,tl=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Jb!==null?{id:Th,overflow:Rh}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Hl(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,sl=n,tl=null,!0):!1;default:return!1}}function F7(n){return(n.mode&1)!==0&&(n.flags&128)===0}function B7(n){if(Wn){var e=tl;if(e){var t=e;if(!zY(n,e)){if(F7(n))throw Error(He(418));e=em(t.nextSibling);var i=sl;e&&zY(n,e)?mre(i,t):(n.flags=n.flags&-4097|2,Wn=!1,sl=n)}}else{if(F7(n))throw Error(He(418));n.flags=n.flags&-4097|2,Wn=!1,sl=n}}}function UY(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;sl=n}function CE(n){if(n!==sl)return!1;if(!Wn)return UY(n),Wn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!M7(n.type,n.memoizedProps)),e&&(e=tl)){if(F7(n))throw pre(),Error(He(418));for(;e;)mre(n,e),e=em(e.nextSibling)}if(UY(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(He(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){tl=em(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}tl=null}}else tl=sl?em(n.stateNode.nextSibling):null;return!0}function pre(){for(var n=tl;n;)n=em(n.nextSibling)}function lC(){tl=sl=null,Wn=!1}function FU(n){Tc===null?Tc=[n]:Tc.push(n)}var vCe=Nf.ReactCurrentBatchConfig;function oS(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(He(309));var i=t.stateNode}if(!i)throw Error(He(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(r){var a=s.refs;r===null?delete a[o]:a[o]=r},e._stringRef=o,e)}if(typeof n!="string")throw Error(He(284));if(!t._owner)throw Error(He(290,n))}return n}function SE(n,e){throw n=Object.prototype.toString.call(e),Error(He(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function $Y(n){var e=n._init;return e(n._payload)}function _re(n){function e(v,w){if(n){var y=v.deletions;y===null?(v.deletions=[w],v.flags|=16):y.push(w)}}function t(v,w){if(!n)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function i(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=sm(v,w),v.index=0,v.sibling=null,v}function o(v,w,y){return v.index=y,n?(y=v.alternate,y!==null?(y=y.index,y<w?(v.flags|=2,w):y):(v.flags|=2,w)):(v.flags|=1048576,w)}function r(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,w,y,C){return w===null||w.tag!==6?(w=O5(y,v.mode,C),w.return=v,w):(w=s(w,y),w.return=v,w)}function l(v,w,y,C){var S=y.type;return S===Z0?d(v,w,y.props.children,C,y.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Jf&&$Y(S)===w.type)?(C=s(w,y.props),C.ref=oS(v,w,y),C.return=v,C):(C=rT(y.type,y.key,y.props,null,v.mode,C),C.ref=oS(v,w,y),C.return=v,C)}function c(v,w,y,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==y.containerInfo||w.stateNode.implementation!==y.implementation?(w=F5(y,v.mode,C),w.return=v,w):(w=s(w,y.children||[]),w.return=v,w)}function d(v,w,y,C,S){return w===null||w.tag!==7?(w=B_(y,v.mode,C,S),w.return=v,w):(w=s(w,y),w.return=v,w)}function u(v,w,y){if(typeof w=="string"&&w!==""||typeof w=="number")return w=O5(""+w,v.mode,y),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hE:return y=rT(w.type,w.key,w.props,null,v.mode,y),y.ref=oS(v,null,w),y.return=v,y;case G0:return w=F5(w,v.mode,y),w.return=v,w;case Jf:var C=w._init;return u(v,C(w._payload),y)}if(VS(w)||eS(w))return w=B_(w,v.mode,y,null),w.return=v,w;SE(v,w)}return null}function h(v,w,y,C){var S=w!==null?w.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:a(v,w,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case hE:return y.key===S?l(v,w,y,C):null;case G0:return y.key===S?c(v,w,y,C):null;case Jf:return S=y._init,h(v,w,S(y._payload),C)}if(VS(y)||eS(y))return S!==null?null:d(v,w,y,C,null);SE(v,y)}return null}function f(v,w,y,C,S){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(y)||null,a(w,v,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case hE:return v=v.get(C.key===null?y:C.key)||null,l(w,v,C,S);case G0:return v=v.get(C.key===null?y:C.key)||null,c(w,v,C,S);case Jf:var x=C._init;return f(v,w,y,x(C._payload),S)}if(VS(C)||eS(C))return v=v.get(y)||null,d(w,v,C,S,null);SE(w,C)}return null}function m(v,w,y,C){for(var S=null,x=null,k=w,N=w=0,E=null;k!==null&&N<y.length;N++){k.index>N?(E=k,k=null):E=k.sibling;var B=h(v,k,y[N],C);if(B===null){k===null&&(k=E);break}n&&k&&B.alternate===null&&e(v,k),w=o(B,w,N),x===null?S=B:x.sibling=B,x=B,k=E}if(N===y.length)return t(v,k),Wn&&Wp(v,N),S;if(k===null){for(;N<y.length;N++)k=u(v,y[N],C),k!==null&&(w=o(k,w,N),x===null?S=k:x.sibling=k,x=k);return Wn&&Wp(v,N),S}for(k=i(v,k);N<y.length;N++)E=f(k,v,N,y[N],C),E!==null&&(n&&E.alternate!==null&&k.delete(E.key===null?N:E.key),w=o(E,w,N),x===null?S=E:x.sibling=E,x=E);return n&&k.forEach(function(A){return e(v,A)}),Wn&&Wp(v,N),S}function p(v,w,y,C){var S=eS(y);if(typeof S!="function")throw Error(He(150));if(y=S.call(y),y==null)throw Error(He(151));for(var x=S=null,k=w,N=w=0,E=null,B=y.next();k!==null&&!B.done;N++,B=y.next()){k.index>N?(E=k,k=null):E=k.sibling;var A=h(v,k,B.value,C);if(A===null){k===null&&(k=E);break}n&&k&&A.alternate===null&&e(v,k),w=o(A,w,N),x===null?S=A:x.sibling=A,x=A,k=E}if(B.done)return t(v,k),Wn&&Wp(v,N),S;if(k===null){for(;!B.done;N++,B=y.next())B=u(v,B.value,C),B!==null&&(w=o(B,w,N),x===null?S=B:x.sibling=B,x=B);return Wn&&Wp(v,N),S}for(k=i(v,k);!B.done;N++,B=y.next())B=f(k,v,N,B.value,C),B!==null&&(n&&B.alternate!==null&&k.delete(B.key===null?N:B.key),w=o(B,w,N),x===null?S=B:x.sibling=B,x=B);return n&&k.forEach(function(O){return e(v,O)}),Wn&&Wp(v,N),S}function b(v,w,y,C){if(typeof y=="object"&&y!==null&&y.type===Z0&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case hE:e:{for(var S=y.key,x=w;x!==null;){if(x.key===S){if(S=y.type,S===Z0){if(x.tag===7){t(v,x.sibling),w=s(x,y.props.children),w.return=v,v=w;break e}}else if(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Jf&&$Y(S)===x.type){t(v,x.sibling),w=s(x,y.props),w.ref=oS(v,x,y),w.return=v,v=w;break e}t(v,x);break}else e(v,x);x=x.sibling}y.type===Z0?(w=B_(y.props.children,v.mode,C,y.key),w.return=v,v=w):(C=rT(y.type,y.key,y.props,null,v.mode,C),C.ref=oS(v,w,y),C.return=v,v=C)}return r(v);case G0:e:{for(x=y.key;w!==null;){if(w.key===x)if(w.tag===4&&w.stateNode.containerInfo===y.containerInfo&&w.stateNode.implementation===y.implementation){t(v,w.sibling),w=s(w,y.children||[]),w.return=v,v=w;break e}else{t(v,w);break}else e(v,w);w=w.sibling}w=F5(y,v.mode,C),w.return=v,v=w}return r(v);case Jf:return x=y._init,b(v,w,x(y._payload),C)}if(VS(y))return m(v,w,y,C);if(eS(y))return p(v,w,y,C);SE(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,w!==null&&w.tag===6?(t(v,w.sibling),w=s(w,y),w.return=v,v=w):(t(v,w),w=O5(y,v.mode,C),w.return=v,v=w),r(v)):t(v,w)}return b}var cC=_re(!0),bre=_re(!1),_R=cp(null),bR=null,nw=null,BU=null;function WU(){BU=nw=bR=null}function HU(n){var e=_R.current;Fn(_R),n._currentValue=e}function W7(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Qw(n,e){bR=n,BU=nw=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ba=!0),n.firstContext=null)}function Gl(n){var e=n._currentValue;if(BU!==n)if(n={context:n,memoizedValue:e,next:null},nw===null){if(bR===null)throw Error(He(308));nw=n,bR.dependencies={lanes:0,firstContext:n}}else nw=nw.next=n;return e}var w_=null;function VU(n){w_===null?w_=[n]:w_.push(n)}function vre(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,VU(e)):(t.next=s.next,s.next=t),e.interleaved=t,of(n,i)}function of(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var eg=!1;function jU(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wre(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function qh(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function tm(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Wi&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,of(n,t)}return s=i.interleaved,s===null?(e.next=e,VU(i)):(e.next=s.next,s.next=e),i.interleaved=e,of(n,t)}function eT(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,NU(n,t)}}function KY(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var r={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?s=o=r:o=o.next=r,t=t.next}while(t!==null);o===null?s=o=e:o=o.next=e}else s=o=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function vR(n,e,t,i){var s=n.updateQueue;eg=!1;var o=s.firstBaseUpdate,r=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,r===null?o=c:r.next=c,r=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==r&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(o!==null){var u=s.baseState;r=0,d=c=l=null,a=o;do{var h=a.lane,f=a.eventTime;if((i&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,p=a;switch(h=e,f=t,p.tag){case 1:if(m=p.payload,typeof m=="function"){u=m.call(f,u,h);break e}u=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,h=typeof m=="function"?m.call(f,u,h):m,h==null)break e;u=Jn({},u,h);break e;case 2:eg=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=f,l=u):d=d.next=f,r|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do r|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);tv|=r,n.lanes=r,n.memoizedState=u}}function qY(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(He(191,s));s.call(i)}}}var lI={},hu=cp(lI),$L=cp(lI),KL=cp(lI);function y_(n){if(n===lI)throw Error(He(174));return n}function zU(n,e){switch(En(KL,e),En($L,n),En(hu,lI),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:v7(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=v7(e,n)}Fn(hu),En(hu,e)}function dC(){Fn(hu),Fn($L),Fn(KL)}function yre(n){y_(KL.current);var e=y_(hu.current),t=v7(e,n.type);e!==t&&(En($L,n),En(hu,t))}function UU(n){$L.current===n&&(Fn(hu),Fn($L))}var $n=cp(0);function wR(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var D5=[];function $U(){for(var n=0;n<D5.length;n++)D5[n]._workInProgressVersionPrimary=null;D5.length=0}var tT=Nf.ReactCurrentDispatcher,T5=Nf.ReactCurrentBatchConfig,ev=0,Yn=null,Vs=null,so=null,yR=!1,Sx=!1,qL=0,wCe=0;function zo(){throw Error(He(321))}function KU(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!id(n[t],e[t]))return!1;return!0}function qU(n,e,t,i,s,o){if(ev=o,Yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tT.current=n===null||n.memoizedState===null?xCe:LCe,n=t(i,s),Sx){o=0;do{if(Sx=!1,qL=0,25<=o)throw Error(He(301));o+=1,so=Vs=null,e.updateQueue=null,tT.current=kCe,n=t(i,s)}while(Sx)}if(tT.current=CR,e=Vs!==null&&Vs.next!==null,ev=0,so=Vs=Yn=null,yR=!1,e)throw Error(He(300));return n}function GU(){var n=qL!==0;return qL=0,n}function Ad(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return so===null?Yn.memoizedState=so=n:so=so.next=n,so}function Zl(){if(Vs===null){var n=Yn.alternate;n=n!==null?n.memoizedState:null}else n=Vs.next;var e=so===null?Yn.memoizedState:so.next;if(e!==null)so=e,Vs=n;else{if(n===null)throw Error(He(310));Vs=n,n={memoizedState:Vs.memoizedState,baseState:Vs.baseState,baseQueue:Vs.baseQueue,queue:Vs.queue,next:null},so===null?Yn.memoizedState=so=n:so=so.next=n}return so}function GL(n,e){return typeof e=="function"?e(n):e}function R5(n){var e=Zl(),t=e.queue;if(t===null)throw Error(He(311));t.lastRenderedReducer=n;var i=Vs,s=i.baseQueue,o=t.pending;if(o!==null){if(s!==null){var r=s.next;s.next=o.next,o.next=r}i.baseQueue=s=o,t.pending=null}if(s!==null){o=s.next,i=i.baseState;var a=r=null,l=null,c=o;do{var d=c.lane;if((ev&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,r=i):l=l.next=u,Yn.lanes|=d,tv|=d}c=c.next}while(c!==null&&c!==o);l===null?r=i:l.next=a,id(i,e.memoizedState)||(ba=!0),e.memoizedState=i,e.baseState=r,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do o=s.lane,Yn.lanes|=o,tv|=o,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function M5(n){var e=Zl(),t=e.queue;if(t===null)throw Error(He(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,o=e.memoizedState;if(s!==null){t.pending=null;var r=s=s.next;do o=n(o,r.action),r=r.next;while(r!==s);id(o,e.memoizedState)||(ba=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,i]}function Cre(){}function Sre(n,e){var t=Yn,i=Zl(),s=e(),o=!id(i.memoizedState,s);if(o&&(i.memoizedState=s,ba=!0),i=i.queue,ZU(kre.bind(null,t,i,n),[n]),i.getSnapshot!==e||o||so!==null&&so.memoizedState.tag&1){if(t.flags|=2048,ZL(9,Lre.bind(null,t,i,s,e),void 0,null),uo===null)throw Error(He(349));ev&30||xre(t,e,s)}return s}function xre(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Lre(n,e,t,i){e.value=t,e.getSnapshot=i,Nre(e)&&Ire(n)}function kre(n,e,t){return t(function(){Nre(e)&&Ire(n)})}function Nre(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!id(n,t)}catch{return!0}}function Ire(n){var e=of(n,1);e!==null&&$c(e,n,1,-1)}function GY(n){var e=Ad();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:GL,lastRenderedState:n},e.queue=n,n=n.dispatch=SCe.bind(null,Yn,n),[e.memoizedState,n]}function ZL(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function Ere(){return Zl().memoizedState}function iT(n,e,t,i){var s=Ad();Yn.flags|=n,s.memoizedState=ZL(1|e,t,void 0,i===void 0?null:i)}function BO(n,e,t,i){var s=Zl();i=i===void 0?null:i;var o=void 0;if(Vs!==null){var r=Vs.memoizedState;if(o=r.destroy,i!==null&&KU(i,r.deps)){s.memoizedState=ZL(e,t,o,i);return}}Yn.flags|=n,s.memoizedState=ZL(1|e,t,o,i)}function ZY(n,e){return iT(8390656,8,n,e)}function ZU(n,e){return BO(2048,8,n,e)}function Dre(n,e){return BO(4,2,n,e)}function Tre(n,e){return BO(4,4,n,e)}function Rre(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Mre(n,e,t){return t=t!=null?t.concat([n]):null,BO(4,4,Rre.bind(null,e,n),t)}function YU(){}function Pre(n,e){var t=Zl();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&KU(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function Are(n,e){var t=Zl();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&KU(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function Ore(n,e,t){return ev&21?(id(t,e)||(t=Voe(),Yn.lanes|=t,tv|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ba=!0),n.memoizedState=t)}function yCe(n,e){var t=hn;hn=t!==0&&4>t?t:4,n(!0);var i=T5.transition;T5.transition={};try{n(!1),e()}finally{hn=t,T5.transition=i}}function Fre(){return Zl().memoizedState}function CCe(n,e,t){var i=nm(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},Bre(n))Wre(e,t);else if(t=vre(n,e,t,i),t!==null){var s=Pr();$c(t,n,i,s),Hre(t,e,i)}}function SCe(n,e,t){var i=nm(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(Bre(n))Wre(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var r=e.lastRenderedState,a=o(r,t);if(s.hasEagerState=!0,s.eagerState=a,id(a,r)){var l=e.interleaved;l===null?(s.next=s,VU(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=vre(n,e,s,i),t!==null&&(s=Pr(),$c(t,n,i,s),Hre(t,e,i))}}function Bre(n){var e=n.alternate;return n===Yn||e!==null&&e===Yn}function Wre(n,e){Sx=yR=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Hre(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,NU(n,t)}}var CR={readContext:Gl,useCallback:zo,useContext:zo,useEffect:zo,useImperativeHandle:zo,useInsertionEffect:zo,useLayoutEffect:zo,useMemo:zo,useReducer:zo,useRef:zo,useState:zo,useDebugValue:zo,useDeferredValue:zo,useTransition:zo,useMutableSource:zo,useSyncExternalStore:zo,useId:zo,unstable_isNewReconciler:!1},xCe={readContext:Gl,useCallback:function(n,e){return Ad().memoizedState=[n,e===void 0?null:e],n},useContext:Gl,useEffect:ZY,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,iT(4194308,4,Rre.bind(null,e,n),t)},useLayoutEffect:function(n,e){return iT(4194308,4,n,e)},useInsertionEffect:function(n,e){return iT(4,2,n,e)},useMemo:function(n,e){var t=Ad();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ad();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=CCe.bind(null,Yn,n),[i.memoizedState,n]},useRef:function(n){var e=Ad();return n={current:n},e.memoizedState=n},useState:GY,useDebugValue:YU,useDeferredValue:function(n){return Ad().memoizedState=n},useTransition:function(){var n=GY(!1),e=n[0];return n=yCe.bind(null,n[1]),Ad().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Yn,s=Ad();if(Wn){if(t===void 0)throw Error(He(407));t=t()}else{if(t=e(),uo===null)throw Error(He(349));ev&30||xre(i,e,t)}s.memoizedState=t;var o={value:t,getSnapshot:e};return s.queue=o,ZY(kre.bind(null,i,o,n),[n]),i.flags|=2048,ZL(9,Lre.bind(null,i,o,t,e),void 0,null),t},useId:function(){var n=Ad(),e=uo.identifierPrefix;if(Wn){var t=Rh,i=Th;t=(i&~(1<<32-Uc(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=qL++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=wCe++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},LCe={readContext:Gl,useCallback:Pre,useContext:Gl,useEffect:ZU,useImperativeHandle:Mre,useInsertionEffect:Dre,useLayoutEffect:Tre,useMemo:Are,useReducer:R5,useRef:Ere,useState:function(){return R5(GL)},useDebugValue:YU,useDeferredValue:function(n){var e=Zl();return Ore(e,Vs.memoizedState,n)},useTransition:function(){var n=R5(GL)[0],e=Zl().memoizedState;return[n,e]},useMutableSource:Cre,useSyncExternalStore:Sre,useId:Fre,unstable_isNewReconciler:!1},kCe={readContext:Gl,useCallback:Pre,useContext:Gl,useEffect:ZU,useImperativeHandle:Mre,useInsertionEffect:Dre,useLayoutEffect:Tre,useMemo:Are,useReducer:M5,useRef:Ere,useState:function(){return M5(GL)},useDebugValue:YU,useDeferredValue:function(n){var e=Zl();return Vs===null?e.memoizedState=n:Ore(e,Vs.memoizedState,n)},useTransition:function(){var n=M5(GL)[0],e=Zl().memoizedState;return[n,e]},useMutableSource:Cre,useSyncExternalStore:Sre,useId:Fre,unstable_isNewReconciler:!1};function Sc(n,e){if(n&&n.defaultProps){e=Jn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function H7(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Jn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var WO={isMounted:function(n){return(n=n._reactInternals)?Vv(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Pr(),s=nm(n),o=qh(i,s);o.payload=e,t!=null&&(o.callback=t),e=tm(n,o,s),e!==null&&($c(e,n,s,i),eT(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Pr(),s=nm(n),o=qh(i,s);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=tm(n,o,s),e!==null&&($c(e,n,s,i),eT(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Pr(),i=nm(n),s=qh(t,i);s.tag=2,e!=null&&(s.callback=e),e=tm(n,s,i),e!==null&&($c(e,n,i,t),eT(e,n,i))}};function YY(n,e,t,i,s,o,r){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,r):e.prototype&&e.prototype.isPureReactComponent?!VL(t,i)||!VL(s,o):!0}function Vre(n,e,t){var i=!1,s=Rm,o=e.contextType;return typeof o=="object"&&o!==null?o=Gl(o):(s=La(e)?Qb:sr.current,i=e.contextTypes,o=(i=i!=null)?aC(n,s):Rm),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=WO,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function XY(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&WO.enqueueReplaceState(e,e.state,null)}function V7(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},jU(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Gl(o):(o=La(e)?Qb:sr.current,s.context=aC(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(H7(n,e,o,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&WO.enqueueReplaceState(s,s.state,null),vR(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function uC(n,e){try{var t="",i=e;do t+=eye(i),i=i.return;while(i);var s=t}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function P5(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function j7(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var NCe=typeof WeakMap=="function"?WeakMap:Map;function jre(n,e,t){t=qh(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){xR||(xR=!0,Q7=i),j7(n,e)},t}function zre(n,e,t){t=qh(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){j7(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){j7(n,e),typeof i!="function"&&(im===null?im=new Set([this]):im.add(this));var r=e.stack;this.componentDidCatch(e.value,{componentStack:r!==null?r:""})}),t}function QY(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new NCe;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=VCe.bind(null,n,e,t),e.then(n,n))}function JY(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function eX(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=qh(-1,1),e.tag=2,tm(t,e,1))),t.lanes|=1),n)}var ICe=Nf.ReactCurrentOwner,ba=!1;function Sr(n,e,t,i){e.child=n===null?bre(e,null,t,i):cC(e,n.child,t,i)}function tX(n,e,t,i,s){t=t.render;var o=e.ref;return Qw(e,s),i=qU(n,e,t,i,o,s),t=GU(),n!==null&&!ba?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,rf(n,e,s)):(Wn&&t&&AU(e),e.flags|=1,Sr(n,e,i,s),e.child)}function iX(n,e,t,i,s){if(n===null){var o=t.type;return typeof o=="function"&&!s$(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,Ure(n,e,o,i,s)):(n=rT(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var r=o.memoizedProps;if(t=t.compare,t=t!==null?t:VL,t(r,i)&&n.ref===e.ref)return rf(n,e,s)}return e.flags|=1,n=sm(o,i),n.ref=e.ref,n.return=e,e.child=n}function Ure(n,e,t,i,s){if(n!==null){var o=n.memoizedProps;if(VL(o,i)&&n.ref===e.ref)if(ba=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(ba=!0);else return e.lanes=n.lanes,rf(n,e,s)}return z7(n,e,t,i,s)}function $re(n,e,t){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},En(ow,qa),qa|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,En(ow,qa),qa|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:t,En(ow,qa),qa|=i}else o!==null?(i=o.baseLanes|t,e.memoizedState=null):i=t,En(ow,qa),qa|=i;return Sr(n,e,s,t),e.child}function Kre(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function z7(n,e,t,i,s){var o=La(t)?Qb:sr.current;return o=aC(e,o),Qw(e,s),t=qU(n,e,t,i,o,s),i=GU(),n!==null&&!ba?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,rf(n,e,s)):(Wn&&i&&AU(e),e.flags|=1,Sr(n,e,t,s),e.child)}function nX(n,e,t,i,s){if(La(t)){var o=!0;gR(e)}else o=!1;if(Qw(e,s),e.stateNode===null)nT(n,e),Vre(e,t,i),V7(e,t,i,s),i=!0;else if(n===null){var r=e.stateNode,a=e.memoizedProps;r.props=a;var l=r.context,c=t.contextType;typeof c=="object"&&c!==null?c=Gl(c):(c=La(t)?Qb:sr.current,c=aC(e,c));var d=t.getDerivedStateFromProps,u=typeof d=="function"||typeof r.getSnapshotBeforeUpdate=="function";u||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==i||l!==c)&&XY(e,r,i,c),eg=!1;var h=e.memoizedState;r.state=h,vR(e,i,r,s),l=e.memoizedState,a!==i||h!==l||xa.current||eg?(typeof d=="function"&&(H7(e,t,d,i),l=e.memoizedState),(a=eg||YY(e,t,a,i,h,l,c))?(u||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),r.props=i,r.state=l,r.context=c,i=a):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,wre(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Sc(e.type,a),r.props=c,u=e.pendingProps,h=r.context,l=t.contextType,typeof l=="object"&&l!==null?l=Gl(l):(l=La(t)?Qb:sr.current,l=aC(e,l));var f=t.getDerivedStateFromProps;(d=typeof f=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==u||h!==l)&&XY(e,r,i,l),eg=!1,h=e.memoizedState,r.state=h,vR(e,i,r,s);var m=e.memoizedState;a!==u||h!==m||xa.current||eg?(typeof f=="function"&&(H7(e,t,f,i),m=e.memoizedState),(c=eg||YY(e,t,c,i,h,m,l)||!1)?(d||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,m,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,m,l)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),r.props=i,r.state=m,r.context=l,i=c):(typeof r.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return U7(n,e,t,i,o,s)}function U7(n,e,t,i,s,o){Kre(n,e);var r=(e.flags&128)!==0;if(!i&&!r)return s&&jY(e,t,!1),rf(n,e,o);i=e.stateNode,ICe.current=e;var a=r&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&r?(e.child=cC(e,n.child,null,o),e.child=cC(e,null,a,o)):Sr(n,e,a,o),e.memoizedState=i.state,s&&jY(e,t,!0),e.child}function qre(n){var e=n.stateNode;e.pendingContext?VY(n,e.pendingContext,e.pendingContext!==e.context):e.context&&VY(n,e.context,!1),zU(n,e.containerInfo)}function sX(n,e,t,i,s){return lC(),FU(s),e.flags|=256,Sr(n,e,t,i),e.child}var $7={dehydrated:null,treeContext:null,retryLane:0};function K7(n){return{baseLanes:n,cachePool:null,transitions:null}}function Gre(n,e,t){var i=e.pendingProps,s=$n.current,o=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),En($n,s&1),n===null)return B7(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(r=i.children,n=i.fallback,o?(i=e.mode,o=e.child,r={mode:"hidden",children:r},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=r):o=jO(r,i,0,null),n=B_(n,i,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=K7(t),e.memoizedState=$7,n):XU(e,r));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return ECe(n,e,r,i,a,s,t);if(o){o=i.fallback,r=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(r&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=sm(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=sm(a,o):(o=B_(o,r,t,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,r=n.child.memoizedState,r=r===null?K7(t):{baseLanes:r.baseLanes|t,cachePool:null,transitions:r.transitions},o.memoizedState=r,o.childLanes=n.childLanes&~t,e.memoizedState=$7,i}return o=n.child,n=o.sibling,i=sm(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function XU(n,e){return e=jO({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function xE(n,e,t,i){return i!==null&&FU(i),cC(e,n.child,null,t),n=XU(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function ECe(n,e,t,i,s,o,r){if(t)return e.flags&256?(e.flags&=-257,i=P5(Error(He(422))),xE(n,e,r,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=jO({mode:"visible",children:i.children},s,0,null),o=B_(o,s,r,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&cC(e,n.child,null,r),e.child.memoizedState=K7(r),e.memoizedState=$7,o);if(!(e.mode&1))return xE(n,e,r,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,o=Error(He(419)),i=P5(o,i,void 0),xE(n,e,r,i)}if(a=(r&n.childLanes)!==0,ba||a){if(i=uo,i!==null){switch(r&-r){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|r)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,of(n,s),$c(i,n,s,-1))}return n$(),i=P5(Error(He(421))),xE(n,e,r,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=jCe.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,tl=em(s.nextSibling),sl=e,Wn=!0,Tc=null,n!==null&&(Pl[Al++]=Th,Pl[Al++]=Rh,Pl[Al++]=Jb,Th=n.id,Rh=n.overflow,Jb=e),e=XU(e,i.children),e.flags|=4096,e)}function oX(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),W7(n.return,e,t)}function A5(n,e,t,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=t,o.tailMode=s)}function Zre(n,e,t){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Sr(n,e,i.children,t),i=$n.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&oX(n,t,e);else if(n.tag===19)oX(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(En($n,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&wR(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),A5(e,!1,s,t,o);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&wR(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}A5(e,!0,t,null,o);break;case"together":A5(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nT(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function rf(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),tv|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(He(153));if(e.child!==null){for(n=e.child,t=sm(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=sm(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function DCe(n,e,t){switch(e.tag){case 3:qre(e),lC();break;case 5:yre(e);break;case 1:La(e.type)&&gR(e);break;case 4:zU(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;En(_R,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(En($n,$n.current&1),e.flags|=128,null):t&e.child.childLanes?Gre(n,e,t):(En($n,$n.current&1),n=rf(n,e,t),n!==null?n.sibling:null);En($n,$n.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return Zre(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),En($n,$n.current),i)break;return null;case 22:case 23:return e.lanes=0,$re(n,e,t)}return rf(n,e,t)}var Yre,q7,Xre,Qre;Yre=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};q7=function(){};Xre=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,y_(hu.current);var o=null;switch(t){case"input":s=m7(n,s),i=m7(n,i),o=[];break;case"select":s=Jn({},s,{value:void 0}),i=Jn({},i,{value:void 0}),o=[];break;case"textarea":s=b7(n,s),i=b7(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=hR)}w7(t,i);var r;t=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(r in a)a.hasOwnProperty(r)&&(t||(t={}),t[r]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(PL.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(r in a)!a.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(t||(t={}),t[r]="");for(r in l)l.hasOwnProperty(r)&&a[r]!==l[r]&&(t||(t={}),t[r]=l[r])}else t||(o||(o=[]),o.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(PL.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&An("scroll",n),o||a===l||(o=[])):(o=o||[]).push(c,l))}t&&(o=o||[]).push("style",t);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};Qre=function(n,e,t,i){t!==i&&(e.flags|=4)};function rS(n,e){if(!Wn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Uo(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function TCe(n,e,t){var i=e.pendingProps;switch(OU(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Uo(e),null;case 1:return La(e.type)&&fR(),Uo(e),null;case 3:return i=e.stateNode,dC(),Fn(xa),Fn(sr),$U(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(CE(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tc!==null&&(t9(Tc),Tc=null))),q7(n,e),Uo(e),null;case 5:UU(e);var s=y_(KL.current);if(t=e.type,n!==null&&e.stateNode!=null)Xre(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(He(166));return Uo(e),null}if(n=y_(hu.current),CE(e)){i=e.stateNode,t=e.type;var o=e.memoizedProps;switch(i[tu]=e,i[UL]=o,n=(e.mode&1)!==0,t){case"dialog":An("cancel",i),An("close",i);break;case"iframe":case"object":case"embed":An("load",i);break;case"video":case"audio":for(s=0;s<zS.length;s++)An(zS[s],i);break;case"source":An("error",i);break;case"img":case"image":case"link":An("error",i),An("load",i);break;case"details":An("toggle",i);break;case"input":gY(i,o),An("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},An("invalid",i);break;case"textarea":pY(i,o),An("invalid",i)}w7(t,o),s=null;for(var r in o)if(o.hasOwnProperty(r)){var a=o[r];r==="children"?typeof a=="string"?i.textContent!==a&&(o.suppressHydrationWarning!==!0&&yE(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&yE(i.textContent,a,n),s=["children",""+a]):PL.hasOwnProperty(r)&&a!=null&&r==="onScroll"&&An("scroll",i)}switch(t){case"input":fE(i),mY(i,o,!0);break;case"textarea":fE(i),_Y(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=hR)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{r=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=koe(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=r.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=r.createElement(t,{is:i.is}):(n=r.createElement(t),t==="select"&&(r=n,i.multiple?r.multiple=!0:i.size&&(r.size=i.size))):n=r.createElementNS(n,t),n[tu]=e,n[UL]=i,Yre(n,e,!1,!1),e.stateNode=n;e:{switch(r=y7(t,i),t){case"dialog":An("cancel",n),An("close",n),s=i;break;case"iframe":case"object":case"embed":An("load",n),s=i;break;case"video":case"audio":for(s=0;s<zS.length;s++)An(zS[s],n);s=i;break;case"source":An("error",n),s=i;break;case"img":case"image":case"link":An("error",n),An("load",n),s=i;break;case"details":An("toggle",n),s=i;break;case"input":gY(n,i),s=m7(n,i),An("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Jn({},i,{value:void 0}),An("invalid",n);break;case"textarea":pY(n,i),s=b7(n,i),An("invalid",n);break;default:s=i}w7(t,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?Eoe(n,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Noe(n,l)):o==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&AL(n,l):typeof l=="number"&&AL(n,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(PL.hasOwnProperty(o)?l!=null&&o==="onScroll"&&An("scroll",n):l!=null&&yU(n,o,l,r))}switch(t){case"input":fE(n),mY(n,i,!1);break;case"textarea":fE(n),_Y(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Tm(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?Gw(n,!!i.multiple,o,!1):i.defaultValue!=null&&Gw(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=hR)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Uo(e),null;case 6:if(n&&e.stateNode!=null)Qre(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(He(166));if(t=y_(KL.current),y_(hu.current),CE(e)){if(i=e.stateNode,t=e.memoizedProps,i[tu]=e,(o=i.nodeValue!==t)&&(n=sl,n!==null))switch(n.tag){case 3:yE(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&yE(i.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[tu]=e,e.stateNode=i}return Uo(e),null;case 13:if(Fn($n),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Wn&&tl!==null&&e.mode&1&&!(e.flags&128))pre(),lC(),e.flags|=98560,o=!1;else if(o=CE(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(He(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(He(317));o[tu]=e}else lC(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Uo(e),o=!1}else Tc!==null&&(t9(Tc),Tc=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||$n.current&1?$s===0&&($s=3):n$())),e.updateQueue!==null&&(e.flags|=4),Uo(e),null);case 4:return dC(),q7(n,e),n===null&&jL(e.stateNode.containerInfo),Uo(e),null;case 10:return HU(e.type._context),Uo(e),null;case 17:return La(e.type)&&fR(),Uo(e),null;case 19:if(Fn($n),o=e.memoizedState,o===null)return Uo(e),null;if(i=(e.flags&128)!==0,r=o.rendering,r===null)if(i)rS(o,!1);else{if($s!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(r=wR(n),r!==null){for(e.flags|=128,rS(o,!1),i=r.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)o=t,n=i,o.flags&=14680066,r=o.alternate,r===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,o.type=r.type,n=r.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return En($n,$n.current&1|2),e.child}n=n.sibling}o.tail!==null&&_s()>hC&&(e.flags|=128,i=!0,rS(o,!1),e.lanes=4194304)}else{if(!i)if(n=wR(r),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),rS(o,!0),o.tail===null&&o.tailMode==="hidden"&&!r.alternate&&!Wn)return Uo(e),null}else 2*_s()-o.renderingStartTime>hC&&t!==1073741824&&(e.flags|=128,i=!0,rS(o,!1),e.lanes=4194304);o.isBackwards?(r.sibling=e.child,e.child=r):(t=o.last,t!==null?t.sibling=r:e.child=r,o.last=r)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=_s(),e.sibling=null,t=$n.current,En($n,i?t&1|2:t&1),e):(Uo(e),null);case 22:case 23:return i$(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?qa&1073741824&&(Uo(e),e.subtreeFlags&6&&(e.flags|=8192)):Uo(e),null;case 24:return null;case 25:return null}throw Error(He(156,e.tag))}function RCe(n,e){switch(OU(e),e.tag){case 1:return La(e.type)&&fR(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return dC(),Fn(xa),Fn(sr),$U(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return UU(e),null;case 13:if(Fn($n),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(He(340));lC()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Fn($n),null;case 4:return dC(),null;case 10:return HU(e.type._context),null;case 22:case 23:return i$(),null;case 24:return null;default:return null}}var LE=!1,Xo=!1,MCe=typeof WeakSet=="function"?WeakSet:Set,ct=null;function sw(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){os(n,e,i)}else t.current=null}function G7(n,e,t){try{t()}catch(i){os(n,e,i)}}var rX=!1;function PCe(n,e){if(T7=cR,n=nre(),PU(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var r=0,a=-1,l=-1,c=0,d=0,u=n,h=null;t:for(;;){for(var f;u!==t||s!==0&&u.nodeType!==3||(a=r+s),u!==o||i!==0&&u.nodeType!==3||(l=r+i),u.nodeType===3&&(r+=u.nodeValue.length),(f=u.firstChild)!==null;)h=u,u=f;for(;;){if(u===n)break t;if(h===t&&++c===s&&(a=r),h===o&&++d===i&&(l=r),(f=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(R7={focusedElem:n,selectionRange:t},cR=!1,ct=e;ct!==null;)if(e=ct,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ct=n;else for(;ct!==null;){e=ct;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,b=m.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?p:Sc(e.type,p),b);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(He(163))}}catch(C){os(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,ct=n;break}ct=e.return}return m=rX,rX=!1,m}function xx(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&G7(e,t,o)}s=s.next}while(s!==i)}}function HO(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Z7(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Jre(n){var e=n.alternate;e!==null&&(n.alternate=null,Jre(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[tu],delete e[UL],delete e[A7],delete e[pCe],delete e[_Ce])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function eae(n){return n.tag===5||n.tag===3||n.tag===4}function aX(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||eae(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Y7(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=hR));else if(i!==4&&(n=n.child,n!==null))for(Y7(n,e,t),n=n.sibling;n!==null;)Y7(n,e,t),n=n.sibling}function X7(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(X7(n,e,t),n=n.sibling;n!==null;)X7(n,e,t),n=n.sibling}var _o=null,Nc=!1;function Bf(n,e,t){for(t=t.child;t!==null;)tae(n,e,t),t=t.sibling}function tae(n,e,t){if(uu&&typeof uu.onCommitFiberUnmount=="function")try{uu.onCommitFiberUnmount(RO,t)}catch{}switch(t.tag){case 5:Xo||sw(t,e);case 6:var i=_o,s=Nc;_o=null,Bf(n,e,t),_o=i,Nc=s,_o!==null&&(Nc?(n=_o,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):_o.removeChild(t.stateNode));break;case 18:_o!==null&&(Nc?(n=_o,t=t.stateNode,n.nodeType===8?I5(n.parentNode,t):n.nodeType===1&&I5(n,t),WL(n)):I5(_o,t.stateNode));break;case 4:i=_o,s=Nc,_o=t.stateNode.containerInfo,Nc=!0,Bf(n,e,t),_o=i,Nc=s;break;case 0:case 11:case 14:case 15:if(!Xo&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,r=o.destroy;o=o.tag,r!==void 0&&(o&2||o&4)&&G7(t,e,r),s=s.next}while(s!==i)}Bf(n,e,t);break;case 1:if(!Xo&&(sw(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){os(t,e,a)}Bf(n,e,t);break;case 21:Bf(n,e,t);break;case 22:t.mode&1?(Xo=(i=Xo)||t.memoizedState!==null,Bf(n,e,t),Xo=i):Bf(n,e,t);break;default:Bf(n,e,t)}}function lX(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new MCe),e.forEach(function(i){var s=zCe.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function uc(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var o=n,r=e,a=r;e:for(;a!==null;){switch(a.tag){case 5:_o=a.stateNode,Nc=!1;break e;case 3:_o=a.stateNode.containerInfo,Nc=!0;break e;case 4:_o=a.stateNode.containerInfo,Nc=!0;break e}a=a.return}if(_o===null)throw Error(He(160));tae(o,r,s),_o=null,Nc=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){os(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iae(e,n),e=e.sibling}function iae(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(uc(e,n),Sd(n),i&4){try{xx(3,n,n.return),HO(3,n)}catch(p){os(n,n.return,p)}try{xx(5,n,n.return)}catch(p){os(n,n.return,p)}}break;case 1:uc(e,n),Sd(n),i&512&&t!==null&&sw(t,t.return);break;case 5:if(uc(e,n),Sd(n),i&512&&t!==null&&sw(t,t.return),n.flags&32){var s=n.stateNode;try{AL(s,"")}catch(p){os(n,n.return,p)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,r=t!==null?t.memoizedProps:o,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&xoe(s,o),y7(a,r);var c=y7(a,o);for(r=0;r<l.length;r+=2){var d=l[r],u=l[r+1];d==="style"?Eoe(s,u):d==="dangerouslySetInnerHTML"?Noe(s,u):d==="children"?AL(s,u):yU(s,d,u,c)}switch(a){case"input":p7(s,o);break;case"textarea":Loe(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Gw(s,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Gw(s,!!o.multiple,o.defaultValue,!0):Gw(s,!!o.multiple,o.multiple?[]:"",!1))}s[UL]=o}catch(p){os(n,n.return,p)}}break;case 6:if(uc(e,n),Sd(n),i&4){if(n.stateNode===null)throw Error(He(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(p){os(n,n.return,p)}}break;case 3:if(uc(e,n),Sd(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{WL(e.containerInfo)}catch(p){os(n,n.return,p)}break;case 4:uc(e,n),Sd(n);break;case 13:uc(e,n),Sd(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(e$=_s())),i&4&&lX(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Xo=(c=Xo)||d,uc(e,n),Xo=c):uc(e,n),Sd(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(ct=n,d=n.child;d!==null;){for(u=ct=d;ct!==null;){switch(h=ct,f=h.child,h.tag){case 0:case 11:case 14:case 15:xx(4,h,h.return);break;case 1:sw(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){i=h,t=h.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){os(i,t,p)}}break;case 5:sw(h,h.return);break;case 22:if(h.memoizedState!==null){dX(u);continue}}f!==null?(f.return=h,ct=f):dX(u)}d=d.sibling}e:for(d=null,u=n;;){if(u.tag===5){if(d===null){d=u;try{s=u.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=u.stateNode,l=u.memoizedProps.style,r=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ioe("display",r))}catch(p){os(n,n.return,p)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(p){os(n,n.return,p)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===n)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:uc(e,n),Sd(n),i&4&&lX(n);break;case 21:break;default:uc(e,n),Sd(n)}}function Sd(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(eae(t)){var i=t;break e}t=t.return}throw Error(He(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(AL(s,""),i.flags&=-33);var o=aX(n);X7(n,o,s);break;case 3:case 4:var r=i.stateNode.containerInfo,a=aX(n);Y7(n,a,r);break;default:throw Error(He(161))}}catch(l){os(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function ACe(n,e,t){ct=n,nae(n)}function nae(n,e,t){for(var i=(n.mode&1)!==0;ct!==null;){var s=ct,o=s.child;if(s.tag===22&&i){var r=s.memoizedState!==null||LE;if(!r){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Xo;a=LE;var c=Xo;if(LE=r,(Xo=l)&&!c)for(ct=s;ct!==null;)r=ct,l=r.child,r.tag===22&&r.memoizedState!==null?uX(s):l!==null?(l.return=r,ct=l):uX(s);for(;o!==null;)ct=o,nae(o),o=o.sibling;ct=s,LE=a,Xo=c}cX(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ct=o):cX(n)}}function cX(n){for(;ct!==null;){var e=ct;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xo||HO(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Xo)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Sc(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&qY(e,o,i);break;case 3:var r=e.updateQueue;if(r!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}qY(e,r,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&WL(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(He(163))}Xo||e.flags&512&&Z7(e)}catch(h){os(e,e.return,h)}}if(e===n){ct=null;break}if(t=e.sibling,t!==null){t.return=e.return,ct=t;break}ct=e.return}}function dX(n){for(;ct!==null;){var e=ct;if(e===n){ct=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ct=t;break}ct=e.return}}function uX(n){for(;ct!==null;){var e=ct;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{HO(4,e)}catch(l){os(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){os(e,s,l)}}var o=e.return;try{Z7(e)}catch(l){os(e,o,l)}break;case 5:var r=e.return;try{Z7(e)}catch(l){os(e,r,l)}}}catch(l){os(e,e.return,l)}if(e===n){ct=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ct=a;break}ct=e.return}}var OCe=Math.ceil,SR=Nf.ReactCurrentDispatcher,QU=Nf.ReactCurrentOwner,Ul=Nf.ReactCurrentBatchConfig,Wi=0,uo=null,Ds=null,No=0,qa=0,ow=cp(0),$s=0,YL=null,tv=0,VO=0,JU=0,Lx=null,da=null,e$=0,hC=1/0,rh=null,xR=!1,Q7=null,im=null,kE=!1,Eg=null,LR=0,kx=0,J7=null,sT=-1,oT=0;function Pr(){return Wi&6?_s():sT!==-1?sT:sT=_s()}function nm(n){return n.mode&1?Wi&2&&No!==0?No&-No:vCe.transition!==null?(oT===0&&(oT=Voe()),oT):(n=hn,n!==0||(n=window.event,n=n===void 0?16:Goe(n.type)),n):1}function $c(n,e,t,i){if(50<kx)throw kx=0,J7=null,Error(He(185));oI(n,t,i),(!(Wi&2)||n!==uo)&&(n===uo&&(!(Wi&2)&&(VO|=t),$s===4&&dg(n,No)),ka(n,i),t===1&&Wi===0&&!(e.mode&1)&&(hC=_s()+500,FO&&dp()))}function ka(n,e){var t=n.callbackNode;vye(n,e);var i=lR(n,n===uo?No:0);if(i===0)t!==null&&wY(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&wY(t),e===1)n.tag===0?bCe(hX.bind(null,n)):fre(hX.bind(null,n)),gCe(function(){!(Wi&6)&&dp()}),t=null;else{switch(joe(i)){case 1:t=kU;break;case 4:t=Woe;break;case 16:t=aR;break;case 536870912:t=Hoe;break;default:t=aR}t=uae(t,sae.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function sae(n,e){if(sT=-1,oT=0,Wi&6)throw Error(He(327));var t=n.callbackNode;if(Jw()&&n.callbackNode!==t)return null;var i=lR(n,n===uo?No:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=kR(n,i);else{e=i;var s=Wi;Wi|=2;var o=rae();(uo!==n||No!==e)&&(rh=null,hC=_s()+500,F_(n,e));do try{WCe();break}catch(a){oae(n,a)}while(!0);WU(),SR.current=o,Wi=s,Ds!==null?e=0:(uo=null,No=0,e=$s)}if(e!==0){if(e===2&&(s=k7(n),s!==0&&(i=s,e=e9(n,s))),e===1)throw t=YL,F_(n,0),dg(n,i),ka(n,_s()),t;if(e===6)dg(n,i);else{if(s=n.current.alternate,!(i&30)&&!FCe(s)&&(e=kR(n,i),e===2&&(o=k7(n),o!==0&&(i=o,e=e9(n,o))),e===1))throw t=YL,F_(n,0),dg(n,i),ka(n,_s()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(He(345));case 2:Hp(n,da,rh);break;case 3:if(dg(n,i),(i&130023424)===i&&(e=e$+500-_s(),10<e)){if(lR(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Pr(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=P7(Hp.bind(null,n,da,rh),e);break}Hp(n,da,rh);break;case 4:if(dg(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var r=31-Uc(i);o=1<<r,r=e[r],r>s&&(s=r),i&=~o}if(i=s,i=_s()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*OCe(i/1960))-i,10<i){n.timeoutHandle=P7(Hp.bind(null,n,da,rh),i);break}Hp(n,da,rh);break;case 5:Hp(n,da,rh);break;default:throw Error(He(329))}}}return ka(n,_s()),n.callbackNode===t?sae.bind(null,n):null}function e9(n,e){var t=Lx;return n.current.memoizedState.isDehydrated&&(F_(n,e).flags|=256),n=kR(n,e),n!==2&&(e=da,da=t,e!==null&&t9(e)),n}function t9(n){da===null?da=n:da.push.apply(da,n)}function FCe(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],o=s.getSnapshot;s=s.value;try{if(!id(o(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dg(n,e){for(e&=~JU,e&=~VO,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Uc(e),i=1<<t;n[t]=-1,e&=~i}}function hX(n){if(Wi&6)throw Error(He(327));Jw();var e=lR(n,0);if(!(e&1))return ka(n,_s()),null;var t=kR(n,e);if(n.tag!==0&&t===2){var i=k7(n);i!==0&&(e=i,t=e9(n,i))}if(t===1)throw t=YL,F_(n,0),dg(n,e),ka(n,_s()),t;if(t===6)throw Error(He(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Hp(n,da,rh),ka(n,_s()),null}function t$(n,e){var t=Wi;Wi|=1;try{return n(e)}finally{Wi=t,Wi===0&&(hC=_s()+500,FO&&dp())}}function iv(n){Eg!==null&&Eg.tag===0&&!(Wi&6)&&Jw();var e=Wi;Wi|=1;var t=Ul.transition,i=hn;try{if(Ul.transition=null,hn=1,n)return n()}finally{hn=i,Ul.transition=t,Wi=e,!(Wi&6)&&dp()}}function i$(){qa=ow.current,Fn(ow)}function F_(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,fCe(t)),Ds!==null)for(t=Ds.return;t!==null;){var i=t;switch(OU(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&fR();break;case 3:dC(),Fn(xa),Fn(sr),$U();break;case 5:UU(i);break;case 4:dC();break;case 13:Fn($n);break;case 19:Fn($n);break;case 10:HU(i.type._context);break;case 22:case 23:i$()}t=t.return}if(uo=n,Ds=n=sm(n.current,null),No=qa=e,$s=0,YL=null,JU=VO=tv=0,da=Lx=null,w_!==null){for(e=0;e<w_.length;e++)if(t=w_[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,o=t.pending;if(o!==null){var r=o.next;o.next=s,i.next=r}t.pending=i}w_=null}return n}function oae(n,e){do{var t=Ds;try{if(WU(),tT.current=CR,yR){for(var i=Yn.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}yR=!1}if(ev=0,so=Vs=Yn=null,Sx=!1,qL=0,QU.current=null,t===null||t.return===null){$s=1,YL=e,Ds=null;break}e:{var o=n,r=t.return,a=t,l=e;if(e=No,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=JY(r);if(f!==null){f.flags&=-257,eX(f,r,a,o,e),f.mode&1&&QY(o,c,e),e=f,l=c;var m=e.updateQueue;if(m===null){var p=new Set;p.add(l),e.updateQueue=p}else m.add(l);break e}else{if(!(e&1)){QY(o,c,e),n$();break e}l=Error(He(426))}}else if(Wn&&a.mode&1){var b=JY(r);if(b!==null){!(b.flags&65536)&&(b.flags|=256),eX(b,r,a,o,e),FU(uC(l,a));break e}}o=l=uC(l,a),$s!==4&&($s=2),Lx===null?Lx=[o]:Lx.push(o),o=r;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=jre(o,l,e);KY(o,v);break e;case 1:a=l;var w=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(im===null||!im.has(y)))){o.flags|=65536,e&=-e,o.lanes|=e;var C=zre(o,a,e);KY(o,C);break e}}o=o.return}while(o!==null)}lae(t)}catch(S){e=S,Ds===t&&t!==null&&(Ds=t=t.return);continue}break}while(!0)}function rae(){var n=SR.current;return SR.current=CR,n===null?CR:n}function n$(){($s===0||$s===3||$s===2)&&($s=4),uo===null||!(tv&268435455)&&!(VO&268435455)||dg(uo,No)}function kR(n,e){var t=Wi;Wi|=2;var i=rae();(uo!==n||No!==e)&&(rh=null,F_(n,e));do try{BCe();break}catch(s){oae(n,s)}while(!0);if(WU(),Wi=t,SR.current=i,Ds!==null)throw Error(He(261));return uo=null,No=0,$s}function BCe(){for(;Ds!==null;)aae(Ds)}function WCe(){for(;Ds!==null&&!dye();)aae(Ds)}function aae(n){var e=dae(n.alternate,n,qa);n.memoizedProps=n.pendingProps,e===null?lae(n):Ds=e,QU.current=null}function lae(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=RCe(t,e),t!==null){t.flags&=32767,Ds=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{$s=6,Ds=null;return}}else if(t=TCe(t,e,qa),t!==null){Ds=t;return}if(e=e.sibling,e!==null){Ds=e;return}Ds=e=n}while(e!==null);$s===0&&($s=5)}function Hp(n,e,t){var i=hn,s=Ul.transition;try{Ul.transition=null,hn=1,HCe(n,e,t,i)}finally{Ul.transition=s,hn=i}return null}function HCe(n,e,t,i){do Jw();while(Eg!==null);if(Wi&6)throw Error(He(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(He(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(wye(n,o),n===uo&&(Ds=uo=null,No=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||kE||(kE=!0,uae(aR,function(){return Jw(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=Ul.transition,Ul.transition=null;var r=hn;hn=1;var a=Wi;Wi|=4,QU.current=null,PCe(n,t),iae(t,n),rCe(R7),cR=!!T7,R7=T7=null,n.current=t,ACe(t),uye(),Wi=a,hn=r,Ul.transition=o}else n.current=t;if(kE&&(kE=!1,Eg=n,LR=s),o=n.pendingLanes,o===0&&(im=null),gye(t.stateNode),ka(n,_s()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(xR)throw xR=!1,n=Q7,Q7=null,n;return LR&1&&n.tag!==0&&Jw(),o=n.pendingLanes,o&1?n===J7?kx++:(kx=0,J7=n):kx=0,dp(),null}function Jw(){if(Eg!==null){var n=joe(LR),e=Ul.transition,t=hn;try{if(Ul.transition=null,hn=16>n?16:n,Eg===null)var i=!1;else{if(n=Eg,Eg=null,LR=0,Wi&6)throw Error(He(331));var s=Wi;for(Wi|=4,ct=n.current;ct!==null;){var o=ct,r=o.child;if(ct.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ct=c;ct!==null;){var d=ct;switch(d.tag){case 0:case 11:case 15:xx(8,d,o)}var u=d.child;if(u!==null)u.return=d,ct=u;else for(;ct!==null;){d=ct;var h=d.sibling,f=d.return;if(Jre(d),d===c){ct=null;break}if(h!==null){h.return=f,ct=h;break}ct=f}}}var m=o.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var b=p.sibling;p.sibling=null,p=b}while(p!==null)}}ct=o}}if(o.subtreeFlags&2064&&r!==null)r.return=o,ct=r;else e:for(;ct!==null;){if(o=ct,o.flags&2048)switch(o.tag){case 0:case 11:case 15:xx(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,ct=v;break e}ct=o.return}}var w=n.current;for(ct=w;ct!==null;){r=ct;var y=r.child;if(r.subtreeFlags&2064&&y!==null)y.return=r,ct=y;else e:for(r=w;ct!==null;){if(a=ct,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:HO(9,a)}}catch(S){os(a,a.return,S)}if(a===r){ct=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,ct=C;break e}ct=a.return}}if(Wi=s,dp(),uu&&typeof uu.onPostCommitFiberRoot=="function")try{uu.onPostCommitFiberRoot(RO,n)}catch{}i=!0}return i}finally{hn=t,Ul.transition=e}}return!1}function fX(n,e,t){e=uC(t,e),e=jre(n,e,1),n=tm(n,e,1),e=Pr(),n!==null&&(oI(n,1,e),ka(n,e))}function os(n,e,t){if(n.tag===3)fX(n,n,t);else for(;e!==null;){if(e.tag===3){fX(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(im===null||!im.has(i))){n=uC(t,n),n=zre(e,n,1),e=tm(e,n,1),n=Pr(),e!==null&&(oI(e,1,n),ka(e,n));break}}e=e.return}}function VCe(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Pr(),n.pingedLanes|=n.suspendedLanes&t,uo===n&&(No&t)===t&&($s===4||$s===3&&(No&130023424)===No&&500>_s()-e$?F_(n,0):JU|=t),ka(n,e)}function cae(n,e){e===0&&(n.mode&1?(e=pE,pE<<=1,!(pE&130023424)&&(pE=4194304)):e=1);var t=Pr();n=of(n,e),n!==null&&(oI(n,e,t),ka(n,t))}function jCe(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),cae(n,t)}function zCe(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(He(314))}i!==null&&i.delete(e),cae(n,t)}var dae;dae=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||xa.current)ba=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ba=!1,DCe(n,e,t);ba=!!(n.flags&131072)}else ba=!1,Wn&&e.flags&1048576&&gre(e,pR,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;nT(n,e),n=e.pendingProps;var s=aC(e,sr.current);Qw(e,t),s=qU(null,e,i,n,s,t);var o=GU();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,La(i)?(o=!0,gR(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jU(e),s.updater=WO,e.stateNode=s,s._reactInternals=e,V7(e,i,n,t),e=U7(null,e,i,!0,o,t)):(e.tag=0,Wn&&o&&AU(e),Sr(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(nT(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=$Ce(i),n=Sc(i,n),s){case 0:e=z7(null,e,i,n,t);break e;case 1:e=nX(null,e,i,n,t);break e;case 11:e=tX(null,e,i,n,t);break e;case 14:e=iX(null,e,i,Sc(i.type,n),t);break e}throw Error(He(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Sc(i,s),z7(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Sc(i,s),nX(n,e,i,s,t);case 3:e:{if(qre(e),n===null)throw Error(He(387));i=e.pendingProps,o=e.memoizedState,s=o.element,wre(n,e),vR(e,i,null,t);var r=e.memoizedState;if(i=r.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=uC(Error(He(423)),e),e=sX(n,e,i,t,s);break e}else if(i!==s){s=uC(Error(He(424)),e),e=sX(n,e,i,t,s);break e}else for(tl=em(e.stateNode.containerInfo.firstChild),sl=e,Wn=!0,Tc=null,t=bre(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(lC(),i===s){e=rf(n,e,t);break e}Sr(n,e,i,t)}e=e.child}return e;case 5:return yre(e),n===null&&B7(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,r=s.children,M7(i,s)?r=null:o!==null&&M7(i,o)&&(e.flags|=32),Kre(n,e),Sr(n,e,r,t),e.child;case 6:return n===null&&B7(e),null;case 13:return Gre(n,e,t);case 4:return zU(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=cC(e,null,i,t):Sr(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Sc(i,s),tX(n,e,i,s,t);case 7:return Sr(n,e,e.pendingProps,t),e.child;case 8:return Sr(n,e,e.pendingProps.children,t),e.child;case 12:return Sr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,r=s.value,En(_R,i._currentValue),i._currentValue=r,o!==null)if(id(o.value,r)){if(o.children===s.children&&!xa.current){e=rf(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){r=o.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(o.tag===1){l=qh(-1,t&-t),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),W7(o.return,t,e),a.lanes|=t;break}l=l.next}}else if(o.tag===10)r=o.type===e.type?null:o.child;else if(o.tag===18){if(r=o.return,r===null)throw Error(He(341));r.lanes|=t,a=r.alternate,a!==null&&(a.lanes|=t),W7(r,t,e),r=o.sibling}else r=o.child;if(r!==null)r.return=o;else for(r=o;r!==null;){if(r===e){r=null;break}if(o=r.sibling,o!==null){o.return=r.return,r=o;break}r=r.return}o=r}Sr(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Qw(e,t),s=Gl(s),i=i(s),e.flags|=1,Sr(n,e,i,t),e.child;case 14:return i=e.type,s=Sc(i,e.pendingProps),s=Sc(i.type,s),iX(n,e,i,s,t);case 15:return Ure(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Sc(i,s),nT(n,e),e.tag=1,La(i)?(n=!0,gR(e)):n=!1,Qw(e,t),Vre(e,i,s),V7(e,i,s,t),U7(null,e,i,!0,n,t);case 19:return Zre(n,e,t);case 22:return $re(n,e,t)}throw Error(He(156,e.tag))};function uae(n,e){return Boe(n,e)}function UCe(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hl(n,e,t,i){return new UCe(n,e,t,i)}function s$(n){return n=n.prototype,!(!n||!n.isReactComponent)}function $Ce(n){if(typeof n=="function")return s$(n)?1:0;if(n!=null){if(n=n.$$typeof,n===SU)return 11;if(n===xU)return 14}return 2}function sm(n,e){var t=n.alternate;return t===null?(t=Hl(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function rT(n,e,t,i,s,o){var r=2;if(i=n,typeof n=="function")s$(n)&&(r=1);else if(typeof n=="string")r=5;else e:switch(n){case Z0:return B_(t.children,s,o,e);case CU:r=8,s|=8;break;case u7:return n=Hl(12,t,e,s|2),n.elementType=u7,n.lanes=o,n;case h7:return n=Hl(13,t,e,s),n.elementType=h7,n.lanes=o,n;case f7:return n=Hl(19,t,e,s),n.elementType=f7,n.lanes=o,n;case yoe:return jO(t,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case voe:r=10;break e;case woe:r=9;break e;case SU:r=11;break e;case xU:r=14;break e;case Jf:r=16,i=null;break e}throw Error(He(130,n==null?n:typeof n,""))}return e=Hl(r,t,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function B_(n,e,t,i){return n=Hl(7,n,i,e),n.lanes=t,n}function jO(n,e,t,i){return n=Hl(22,n,i,e),n.elementType=yoe,n.lanes=t,n.stateNode={isHidden:!1},n}function O5(n,e,t){return n=Hl(6,n,null,e),n.lanes=t,n}function F5(n,e,t){return e=Hl(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function KCe(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_5(0),this.expirationTimes=_5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_5(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function o$(n,e,t,i,s,o,r,a,l){return n=new KCe(n,e,t,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Hl(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},jU(o),n}function qCe(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G0,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function hae(n){if(!n)return Rm;n=n._reactInternals;e:{if(Vv(n)!==n||n.tag!==1)throw Error(He(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(La(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(He(171))}if(n.tag===1){var t=n.type;if(La(t))return hre(n,t,e)}return e}function fae(n,e,t,i,s,o,r,a,l){return n=o$(t,i,!0,n,s,o,r,a,l),n.context=hae(null),t=n.current,i=Pr(),s=nm(t),o=qh(i,s),o.callback=e??null,tm(t,o,s),n.current.lanes=s,oI(n,s,i),ka(n,i),n}function zO(n,e,t,i){var s=e.current,o=Pr(),r=nm(s);return t=hae(t),e.context===null?e.context=t:e.pendingContext=t,e=qh(o,r),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=tm(s,e,r),n!==null&&($c(n,s,r,o),eT(n,s,r)),r}function NR(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function gX(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function r$(n,e){gX(n,e),(n=n.alternate)&&gX(n,e)}function GCe(){return null}var gae=typeof reportError=="function"?reportError:function(n){console.error(n)};function a$(n){this._internalRoot=n}UO.prototype.render=a$.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(He(409));zO(n,e,null,null)};UO.prototype.unmount=a$.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;iv(function(){zO(null,n,null,null)}),e[sf]=null}};function UO(n){this._internalRoot=n}UO.prototype.unstable_scheduleHydration=function(n){if(n){var e=$oe();n={blockedOn:null,target:n,priority:e};for(var t=0;t<cg.length&&e!==0&&e<cg[t].priority;t++);cg.splice(t,0,n),t===0&&qoe(n)}};function l$(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function $O(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function mX(){}function ZCe(n,e,t,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var c=NR(r);o.call(c)}}var r=fae(e,i,n,0,null,!1,!1,"",mX);return n._reactRootContainer=r,n[sf]=r.current,jL(n.nodeType===8?n.parentNode:n),iv(),r}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=NR(l);a.call(c)}}var l=o$(n,0,!1,null,null,!1,!1,"",mX);return n._reactRootContainer=l,n[sf]=l.current,jL(n.nodeType===8?n.parentNode:n),iv(function(){zO(e,l,t,i)}),l}function KO(n,e,t,i,s){var o=t._reactRootContainer;if(o){var r=o;if(typeof s=="function"){var a=s;s=function(){var l=NR(r);a.call(l)}}zO(e,r,n,s)}else r=ZCe(t,e,n,s,i);return NR(r)}zoe=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=jS(e.pendingLanes);t!==0&&(NU(e,t|1),ka(e,_s()),!(Wi&6)&&(hC=_s()+500,dp()))}break;case 13:iv(function(){var i=of(n,1);if(i!==null){var s=Pr();$c(i,n,1,s)}}),r$(n,1)}};IU=function(n){if(n.tag===13){var e=of(n,134217728);if(e!==null){var t=Pr();$c(e,n,134217728,t)}r$(n,134217728)}};Uoe=function(n){if(n.tag===13){var e=nm(n),t=of(n,e);if(t!==null){var i=Pr();$c(t,n,e,i)}r$(n,e)}};$oe=function(){return hn};Koe=function(n,e){var t=hn;try{return hn=n,e()}finally{hn=t}};S7=function(n,e,t){switch(e){case"input":if(p7(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=OO(i);if(!s)throw Error(He(90));Soe(i),p7(i,s)}}}break;case"textarea":Loe(n,t);break;case"select":e=t.value,e!=null&&Gw(n,!!t.multiple,e,!1)}};Roe=t$;Moe=iv;var YCe={usingClientEntryPoint:!1,Events:[aI,J0,OO,Doe,Toe,t$]},aS={findFiberByHostInstance:v_,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XCe={bundleType:aS.bundleType,version:aS.version,rendererPackageName:aS.rendererPackageName,rendererConfig:aS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nf.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ooe(n),n===null?null:n.stateNode},findFiberByHostInstance:aS.findFiberByHostInstance||GCe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var NE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!NE.isDisabled&&NE.supportsFiber)try{RO=NE.inject(XCe),uu=NE}catch{}}bl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YCe;bl.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l$(e))throw Error(He(200));return qCe(n,e,null,t)};bl.createRoot=function(n,e){if(!l$(n))throw Error(He(299));var t=!1,i="",s=gae;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=o$(n,1,!1,null,null,t,!1,i,s),n[sf]=e.current,jL(n.nodeType===8?n.parentNode:n),new a$(e)};bl.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(He(188)):(n=Object.keys(n).join(","),Error(He(268,n)));return n=Ooe(e),n=n===null?null:n.stateNode,n};bl.flushSync=function(n){return iv(n)};bl.hydrate=function(n,e,t){if(!$O(e))throw Error(He(200));return KO(null,n,e,!0,t)};bl.hydrateRoot=function(n,e,t){if(!l$(n))throw Error(He(405));var i=t!=null&&t.hydratedSources||null,s=!1,o="",r=gae;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),e=fae(e,null,n,1,t??null,s,!1,o,r),n[sf]=e.current,jL(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new UO(e)};bl.render=function(n,e,t){if(!$O(e))throw Error(He(200));return KO(null,n,e,!1,t)};bl.unmountComponentAtNode=function(n){if(!$O(n))throw Error(He(40));return n._reactRootContainer?(iv(function(){KO(null,null,n,!1,function(){n._reactRootContainer=null,n[sf]=null})}),!0):!1};bl.unstable_batchedUpdates=t$;bl.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!$O(t))throw Error(He(200));if(n==null||n._reactInternals===void 0)throw Error(He(38));return KO(n,e,t,!1,i)};bl.version="18.3.1-next-f1338f8080-20240426";function mae(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mae)}catch(n){console.error(n)}}mae(),moe.exports=bl;var jv=moe.exports;const QCe=ioe(jv);var pae,pX=jv;pae=pX.createRoot,pX.hydrateRoot;const JCe=1,e1e=1e6;let B5=0;function t1e(){return B5=(B5+1)%Number.MAX_SAFE_INTEGER,B5.toString()}const W5=new Map,_X=n=>{if(W5.has(n))return;const e=setTimeout(()=>{W5.delete(n),Nx({type:"REMOVE_TOAST",toastId:n})},e1e);W5.set(n,e)},i1e=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,JCe)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?_X(t):n.toasts.forEach(i=>{_X(i.id)}),{...n,toasts:n.toasts.map(i=>i.id===t||t===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},aT=[];let lT={toasts:[]};function Nx(n){lT=i1e(lT,n),aT.forEach(e=>{e(lT)})}function n1e({...n}){const e=t1e(),t=s=>Nx({type:"UPDATE_TOAST",toast:{...s,id:e}}),i=()=>Nx({type:"DISMISS_TOAST",toastId:e});return Nx({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||i()}}}),{id:e,dismiss:i,update:t}}function Aa(){const[n,e]=L.useState(lT);return L.useEffect(()=>(aT.push(e),()=>{const t=aT.indexOf(e);t>-1&&aT.splice(t,1)}),[n]),{...n,toast:n1e,dismiss:t=>Nx({type:"DISMISS_TOAST",toastId:t})}}function $e(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function bX(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function qO(...n){return e=>{let t=!1;const i=n.map(s=>{const o=bX(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<i.length;s++){const o=i[s];typeof o=="function"?o():bX(n[s],null)}}}}function oi(...n){return L.useCallback(qO(...n),n)}function s1e(n,e){const t=L.createContext(e),i=o=>{const{children:r,...a}=o,l=L.useMemo(()=>a,Object.values(a));return g.jsx(t.Provider,{value:l,children:r})};i.displayName=n+"Provider";function s(o){const r=L.useContext(t);if(r)return r;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[i,s]}function sc(n,e=[]){let t=[];function i(o,r){const a=L.createContext(r),l=t.length;t=[...t,r];const c=u=>{var v;const{scope:h,children:f,...m}=u,p=((v=h==null?void 0:h[n])==null?void 0:v[l])||a,b=L.useMemo(()=>m,Object.values(m));return g.jsx(p.Provider,{value:b,children:f})};c.displayName=o+"Provider";function d(u,h){var p;const f=((p=h==null?void 0:h[n])==null?void 0:p[l])||a,m=L.useContext(f);if(m)return m;if(r!==void 0)return r;throw new Error(`\`${u}\` must be used within \`${o}\``)}return[c,d]}const s=()=>{const o=t.map(r=>L.createContext(r));return function(a){const l=(a==null?void 0:a[n])||o;return L.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[i,o1e(s,...e)]}function o1e(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const r=i.reduce((a,{useScope:l,scopeName:c})=>{const u=l(o)[`__scope${c}`];return{...a,...u}},{});return L.useMemo(()=>({[`__scope${e.scopeName}`]:r}),[r])}};return t.scopeName=e.scopeName,t}function nv(n){const e=a1e(n),t=L.forwardRef((i,s)=>{const{children:o,...r}=i,a=L.Children.toArray(o),l=a.find(c1e);if(l){const c=l.props.children,d=a.map(u=>u===l?L.Children.count(c)>1?L.Children.only(null):L.isValidElement(c)?c.props.children:null:u);return g.jsx(e,{...r,ref:s,children:L.isValidElement(c)?L.cloneElement(c,void 0,d):null})}return g.jsx(e,{...r,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}var r1e=nv("Slot");function a1e(n){const e=L.forwardRef((t,i)=>{const{children:s,...o}=t;if(L.isValidElement(s)){const r=u1e(s),a=d1e(o,s.props);return s.type!==L.Fragment&&(a.ref=i?qO(i,r):r),L.cloneElement(s,a)}return L.Children.count(s)>1?L.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var _ae=Symbol("radix.slottable");function l1e(n){const e=({children:t})=>g.jsx(g.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=_ae,e}function c1e(n){return L.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===_ae}function d1e(n,e){const t={...e};for(const i in e){const s=n[i],o=e[i];/^on[A-Z]/.test(i)?s&&o?t[i]=(...a)=>{o(...a),s(...a)}:s&&(t[i]=s):i==="style"?t[i]={...s,...o}:i==="className"&&(t[i]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function u1e(n){var i,s;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function cI(n){const e=n+"CollectionProvider",[t,i]=sc(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),r=p=>{const{scope:b,children:v}=p,w=oh.useRef(null),y=oh.useRef(new Map).current;return g.jsx(s,{scope:b,itemMap:y,collectionRef:w,children:v})};r.displayName=e;const a=n+"CollectionSlot",l=nv(a),c=oh.forwardRef((p,b)=>{const{scope:v,children:w}=p,y=o(a,v),C=oi(b,y.collectionRef);return g.jsx(l,{ref:C,children:w})});c.displayName=a;const d=n+"CollectionItemSlot",u="data-radix-collection-item",h=nv(d),f=oh.forwardRef((p,b)=>{const{scope:v,children:w,...y}=p,C=oh.useRef(null),S=oi(b,C),x=o(d,v);return oh.useEffect(()=>(x.itemMap.set(C,{ref:C,...y}),()=>void x.itemMap.delete(C))),g.jsx(h,{[u]:"",ref:S,children:w})});f.displayName=d;function m(p){const b=o(n+"CollectionConsumer",p);return oh.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const y=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(b.itemMap.values()).sort((x,k)=>y.indexOf(x.ref.current)-y.indexOf(k.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:r,Slot:c,ItemSlot:f},m,i]}var h1e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Et=h1e.reduce((n,e)=>{const t=nv(`Primitive.${e}`),i=L.forwardRef((s,o)=>{const{asChild:r,...a}=s,l=r?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(l,{...a,ref:o})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function c$(n,e){n&&jv.flushSync(()=>n.dispatchEvent(e))}function Gn(n){const e=L.useRef(n);return L.useEffect(()=>{e.current=n}),L.useMemo(()=>(...t)=>{var i;return(i=e.current)==null?void 0:i.call(e,...t)},[])}function f1e(n,e=globalThis==null?void 0:globalThis.document){const t=Gn(n);L.useEffect(()=>{const i=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var g1e="DismissableLayer",i9="dismissableLayer.update",m1e="dismissableLayer.pointerDownOutside",p1e="dismissableLayer.focusOutside",vX,bae=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),f1=L.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:r,onDismiss:a,...l}=n,c=L.useContext(bae),[d,u]=L.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=L.useState({}),m=oi(e,k=>u(k)),p=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=p.indexOf(b),w=d?p.indexOf(d):-1,y=c.layersWithOutsidePointerEventsDisabled.size>0,C=w>=v,S=b1e(k=>{const N=k.target,E=[...c.branches].some(B=>B.contains(N));!C||E||(s==null||s(k),r==null||r(k),k.defaultPrevented||a==null||a())},h),x=v1e(k=>{const N=k.target;[...c.branches].some(B=>B.contains(N))||(o==null||o(k),r==null||r(k),k.defaultPrevented||a==null||a())},h);return f1e(k=>{w===c.layers.size-1&&(i==null||i(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),L.useEffect(()=>{if(d)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(vX=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),wX(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=vX)}},[d,h,t,c]),L.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),wX())},[d,c]),L.useEffect(()=>{const k=()=>f({});return document.addEventListener(i9,k),()=>document.removeEventListener(i9,k)},[]),g.jsx(Et.div,{...l,ref:m,style:{pointerEvents:y?C?"auto":"none":void 0,...n.style},onFocusCapture:$e(n.onFocusCapture,x.onFocusCapture),onBlurCapture:$e(n.onBlurCapture,x.onBlurCapture),onPointerDownCapture:$e(n.onPointerDownCapture,S.onPointerDownCapture)})});f1.displayName=g1e;var _1e="DismissableLayerBranch",vae=L.forwardRef((n,e)=>{const t=L.useContext(bae),i=L.useRef(null),s=oi(e,i);return L.useEffect(()=>{const o=i.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),g.jsx(Et.div,{...n,ref:s})});vae.displayName=_1e;function b1e(n,e=globalThis==null?void 0:globalThis.document){const t=Gn(n),i=L.useRef(!1),s=L.useRef(()=>{});return L.useEffect(()=>{const o=a=>{if(a.target&&!i.current){let l=function(){wae(m1e,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);i.current=!1},r=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(r),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function v1e(n,e=globalThis==null?void 0:globalThis.document){const t=Gn(n),i=L.useRef(!1);return L.useEffect(()=>{const s=o=>{o.target&&!i.current&&wae(p1e,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function wX(){const n=new CustomEvent(i9);document.dispatchEvent(n)}function wae(n,e,t,{discrete:i}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),i?c$(s,o):s.dispatchEvent(o)}var w1e=f1,y1e=vae,Ro=globalThis!=null&&globalThis.document?L.useLayoutEffect:()=>{},C1e="Portal",dI=L.forwardRef((n,e)=>{var a;const{container:t,...i}=n,[s,o]=L.useState(!1);Ro(()=>o(!0),[]);const r=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return r?QCe.createPortal(g.jsx(Et.div,{...i,ref:e}),r):null});dI.displayName=C1e;function S1e(n,e){return L.useReducer((t,i)=>e[t][i]??t,n)}var qr=n=>{const{present:e,children:t}=n,i=x1e(e),s=typeof t=="function"?t({present:i.isPresent}):L.Children.only(t),o=oi(i.ref,L1e(s));return typeof t=="function"||i.isPresent?L.cloneElement(s,{ref:o}):null};qr.displayName="Presence";function x1e(n){const[e,t]=L.useState(),i=L.useRef({}),s=L.useRef(n),o=L.useRef("none"),r=n?"mounted":"unmounted",[a,l]=S1e(r,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const c=IE(i.current);o.current=a==="mounted"?c:"none"},[a]),Ro(()=>{const c=i.current,d=s.current;if(d!==n){const h=o.current,f=IE(c);n?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&h!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),Ro(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,u=f=>{const p=IE(i.current).includes(f.animationName);if(f.target===e&&p&&(l("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},h=f=>{f.target===e&&(o.current=IE(i.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:L.useCallback(c=>{c&&(i.current=getComputedStyle(c)),t(c)},[])}}function IE(n){return(n==null?void 0:n.animationName)||"none"}function L1e(n){var i,s;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function af({prop:n,defaultProp:e,onChange:t=()=>{}}){const[i,s]=k1e({defaultProp:e,onChange:t}),o=n!==void 0,r=o?n:i,a=Gn(t),l=L.useCallback(c=>{if(o){const u=typeof c=="function"?c(n):c;u!==n&&a(u)}else s(c)},[o,n,s,a]);return[r,l]}function k1e({defaultProp:n,onChange:e}){const t=L.useState(n),[i]=t,s=L.useRef(i),o=Gn(e);return L.useEffect(()=>{s.current!==i&&(o(i),s.current=i)},[i,s,o]),t}var N1e="VisuallyHidden",uI=L.forwardRef((n,e)=>g.jsx(Et.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));uI.displayName=N1e;var I1e=uI,d$="ToastProvider",[u$,E1e,D1e]=cI("Toast"),[yae,Irt]=sc("Toast",[D1e]),[T1e,GO]=yae(d$),Cae=n=>{const{__scopeToast:e,label:t="Notification",duration:i=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:r}=n,[a,l]=L.useState(null),[c,d]=L.useState(0),u=L.useRef(!1),h=L.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${d$}\`. Expected non-empty \`string\`.`),g.jsx(u$.Provider,{scope:e,children:g.jsx(T1e,{scope:e,label:t,duration:i,swipeDirection:s,swipeThreshold:o,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:L.useCallback(()=>d(f=>f+1),[]),onToastRemove:L.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h,children:r})})};Cae.displayName=d$;var Sae="ToastViewport",R1e=["F8"],n9="toast.viewportPause",s9="toast.viewportResume",xae=L.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:i=R1e,label:s="Notifications ({hotkey})",...o}=n,r=GO(Sae,t),a=E1e(t),l=L.useRef(null),c=L.useRef(null),d=L.useRef(null),u=L.useRef(null),h=oi(e,u,r.onViewportChange),f=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=r.toastCount>0;L.useEffect(()=>{const b=v=>{var y;i.length!==0&&i.every(C=>v[C]||v.code===C)&&((y=u.current)==null||y.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[i]),L.useEffect(()=>{const b=l.current,v=u.current;if(m&&b&&v){const w=()=>{if(!r.isClosePausedRef.current){const x=new CustomEvent(n9);v.dispatchEvent(x),r.isClosePausedRef.current=!0}},y=()=>{if(r.isClosePausedRef.current){const x=new CustomEvent(s9);v.dispatchEvent(x),r.isClosePausedRef.current=!1}},C=x=>{!b.contains(x.relatedTarget)&&y()},S=()=>{b.contains(document.activeElement)||y()};return b.addEventListener("focusin",w),b.addEventListener("focusout",C),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",S),window.addEventListener("blur",w),window.addEventListener("focus",y),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",C),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",S),window.removeEventListener("blur",w),window.removeEventListener("focus",y)}}},[m,r.isClosePausedRef]);const p=L.useCallback(({tabbingDirection:b})=>{const w=a().map(y=>{const C=y.ref.current,S=[C,...$1e(C)];return b==="forwards"?S:S.reverse()});return(b==="forwards"?w.reverse():w).flat()},[a]);return L.useEffect(()=>{const b=u.current;if(b){const v=w=>{var S,x,k;const y=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!y){const N=document.activeElement,E=w.shiftKey;if(w.target===b&&E){(S=c.current)==null||S.focus();return}const O=p({tabbingDirection:E?"backwards":"forwards"}),W=O.findIndex(T=>T===N);H5(O.slice(W+1))?w.preventDefault():E?(x=c.current)==null||x.focus():(k=d.current)==null||k.focus()}};return b.addEventListener("keydown",v),()=>b.removeEventListener("keydown",v)}},[a,p]),g.jsxs(y1e,{ref:l,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&g.jsx(o9,{ref:c,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"forwards"});H5(b)}}),g.jsx(u$.Slot,{scope:t,children:g.jsx(Et.ol,{tabIndex:-1,...o,ref:h})}),m&&g.jsx(o9,{ref:d,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"backwards"});H5(b)}})]})});xae.displayName=Sae;var Lae="ToastFocusProxy",o9=L.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:i,...s}=n,o=GO(Lae,t);return g.jsx(uI,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:r=>{var c;const a=r.relatedTarget;!((c=o.viewport)!=null&&c.contains(a))&&i()}})});o9.displayName=Lae;var ZO="Toast",M1e="toast.swipeStart",P1e="toast.swipeMove",A1e="toast.swipeCancel",O1e="toast.swipeEnd",kae=L.forwardRef((n,e)=>{const{forceMount:t,open:i,defaultOpen:s,onOpenChange:o,...r}=n,[a=!0,l]=af({prop:i,defaultProp:s,onChange:o});return g.jsx(qr,{present:t||a,children:g.jsx(W1e,{open:a,...r,ref:e,onClose:()=>l(!1),onPause:Gn(n.onPause),onResume:Gn(n.onResume),onSwipeStart:$e(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$e(n.onSwipeMove,c=>{const{x:d,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:$e(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$e(n.onSwipeEnd,c=>{const{x:d,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),l(!1)})})})});kae.displayName=ZO;var[F1e,B1e]=yae(ZO,{onClose(){}}),W1e=L.forwardRef((n,e)=>{const{__scopeToast:t,type:i="foreground",duration:s,open:o,onClose:r,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:h,onSwipeEnd:f,...m}=n,p=GO(ZO,t),[b,v]=L.useState(null),w=oi(e,T=>v(T)),y=L.useRef(null),C=L.useRef(null),S=s||p.duration,x=L.useRef(0),k=L.useRef(S),N=L.useRef(0),{onToastAdd:E,onToastRemove:B}=p,A=Gn(()=>{var M;(b==null?void 0:b.contains(document.activeElement))&&((M=p.viewport)==null||M.focus()),r()}),O=L.useCallback(T=>{!T||T===1/0||(window.clearTimeout(N.current),x.current=new Date().getTime(),N.current=window.setTimeout(A,T))},[A]);L.useEffect(()=>{const T=p.viewport;if(T){const M=()=>{O(k.current),c==null||c()},z=()=>{const ee=new Date().getTime()-x.current;k.current=k.current-ee,window.clearTimeout(N.current),l==null||l()};return T.addEventListener(n9,z),T.addEventListener(s9,M),()=>{T.removeEventListener(n9,z),T.removeEventListener(s9,M)}}},[p.viewport,S,l,c,O]),L.useEffect(()=>{o&&!p.isClosePausedRef.current&&O(S)},[o,S,p.isClosePausedRef,O]),L.useEffect(()=>(E(),()=>B()),[E,B]);const W=L.useMemo(()=>b?Mae(b):null,[b]);return p.viewport?g.jsxs(g.Fragment,{children:[W&&g.jsx(H1e,{__scopeToast:t,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:W}),g.jsx(F1e,{scope:t,onClose:A,children:jv.createPortal(g.jsx(u$.ItemSlot,{scope:t,children:g.jsx(w1e,{asChild:!0,onEscapeKeyDown:$e(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||A(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:g.jsx(Et.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":p.swipeDirection,...m,ref:w,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:$e(n.onKeyDown,T=>{T.key==="Escape"&&(a==null||a(T.nativeEvent),T.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:$e(n.onPointerDown,T=>{T.button===0&&(y.current={x:T.clientX,y:T.clientY})}),onPointerMove:$e(n.onPointerMove,T=>{if(!y.current)return;const M=T.clientX-y.current.x,z=T.clientY-y.current.y,ee=!!C.current,q=["left","right"].includes(p.swipeDirection),Z=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,V=q?Z(0,M):0,le=q?0:Z(0,z),Fe=T.pointerType==="touch"?10:2,ke={x:V,y:le},De={originalEvent:T,delta:ke};ee?(C.current=ke,EE(P1e,u,De,{discrete:!1})):yX(ke,p.swipeDirection,Fe)?(C.current=ke,EE(M1e,d,De,{discrete:!1}),T.target.setPointerCapture(T.pointerId)):(Math.abs(M)>Fe||Math.abs(z)>Fe)&&(y.current=null)}),onPointerUp:$e(n.onPointerUp,T=>{const M=C.current,z=T.target;if(z.hasPointerCapture(T.pointerId)&&z.releasePointerCapture(T.pointerId),C.current=null,y.current=null,M){const ee=T.currentTarget,q={originalEvent:T,delta:M};yX(M,p.swipeDirection,p.swipeThreshold)?EE(O1e,f,q,{discrete:!0}):EE(A1e,h,q,{discrete:!0}),ee.addEventListener("click",Z=>Z.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),H1e=n=>{const{__scopeToast:e,children:t,...i}=n,s=GO(ZO,e),[o,r]=L.useState(!1),[a,l]=L.useState(!1);return z1e(()=>r(!0)),L.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:g.jsx(dI,{asChild:!0,children:g.jsx(uI,{...i,children:o&&g.jsxs(g.Fragment,{children:[s.label," ",t]})})})},V1e="ToastTitle",Nae=L.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n;return g.jsx(Et.div,{...i,ref:e})});Nae.displayName=V1e;var j1e="ToastDescription",Iae=L.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n;return g.jsx(Et.div,{...i,ref:e})});Iae.displayName=j1e;var Eae="ToastAction",Dae=L.forwardRef((n,e)=>{const{altText:t,...i}=n;return t.trim()?g.jsx(Rae,{altText:t,asChild:!0,children:g.jsx(h$,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Eae}\`. Expected non-empty \`string\`.`),null)});Dae.displayName=Eae;var Tae="ToastClose",h$=L.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n,s=B1e(Tae,t);return g.jsx(Rae,{asChild:!0,children:g.jsx(Et.button,{type:"button",...i,ref:e,onClick:$e(n.onClick,s.onClose)})})});h$.displayName=Tae;var Rae=L.forwardRef((n,e)=>{const{__scopeToast:t,altText:i,...s}=n;return g.jsx(Et.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...s,ref:e})});function Mae(n){const e=[];return Array.from(n.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),U1e(i)){const s=i.ariaHidden||i.hidden||i.style.display==="none",o=i.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const r=i.dataset.radixToastAnnounceAlt;r&&e.push(r)}else e.push(...Mae(i))}}),e}function EE(n,e,t,{discrete:i}){const s=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),i?c$(s,o):s.dispatchEvent(o)}var yX=(n,e,t=0)=>{const i=Math.abs(n.x),s=Math.abs(n.y),o=i>s;return e==="left"||e==="right"?o&&i>t:!o&&s>t};function z1e(n=()=>{}){const e=Gn(n);Ro(()=>{let t=0,i=0;return t=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(i)}},[e])}function U1e(n){return n.nodeType===n.ELEMENT_NODE}function $1e(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function H5(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var K1e=Cae,Pae=xae,Aae=kae,Oae=Nae,Fae=Iae,Bae=Dae,Wae=h$;function Hae(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=Hae(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Vae(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=Hae(n))&&(i&&(i+=" "),i+=e);return i}const CX=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,SX=Vae,YO=(n,e)=>t=>{var i;if((e==null?void 0:e.variants)==null)return SX(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:o}=e,r=Object.keys(s).map(c=>{const d=t==null?void 0:t[c],u=o==null?void 0:o[c];if(d===null)return null;const h=CX(d)||CX(u);return s[c][h]}),a=t&&Object.entries(t).reduce((c,d)=>{let[u,h]=d;return h===void 0||(c[u]=h),c},{}),l=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((c,d)=>{let{class:u,className:h,...f}=d;return Object.entries(f).every(m=>{let[p,b]=m;return Array.isArray(b)?b.includes({...o,...a}[p]):{...o,...a}[p]===b})?[...c,u,h]:c},[]);return SX(n,r,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1e=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jae=(...n)=>n.filter((e,t,i)=>!!e&&i.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var G1e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1e=L.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:r,...a},l)=>L.createElement("svg",{ref:l,...G1e,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:jae("lucide",s),...a},[...r.map(([c,d])=>L.createElement(c,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(n,e)=>{const t=L.forwardRef(({className:i,...s},o)=>L.createElement(Z1e,{ref:o,iconNode:e,className:jae(`lucide-${q1e(n)}`,i),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1e=dt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=dt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1e=dt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1e=dt("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1e=dt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eSe=dt("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tSe=dt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iSe=dt("ChartArea",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nSe=dt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sSe=dt("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=dt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=dt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zae=dt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uae=dt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=dt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ae=dt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=dt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oSe=dt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rSe=dt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aSe=dt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lSe=dt("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=dt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=dt("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=dt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cSe=dt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dSe=dt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uSe=dt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=dt("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=dt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=dt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=dt("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hSe=dt("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=dt("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fSe=dt("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=dt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=dt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=dt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=dt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gSe=dt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=dt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mSe=dt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pSe=dt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Se=dt("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bSe=dt("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=dt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=dt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=dt("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=dt("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=dt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vSe=dt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=dt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wSe=dt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=dt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ySe=dt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CSe=dt("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=dt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qae=dt("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gae=dt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=dt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SSe=dt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=dt("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=dt("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=dt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=dt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xSe=dt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LSe=dt("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),_$="-",kSe=n=>{const e=ISe(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:r=>{const a=r.split(_$);return a[0]===""&&a.length!==1&&a.shift(),Zae(a,e)||NSe(r)},getConflictingClassGroupIds:(r,a)=>{const l=t[r]||[];return a&&i[r]?[...l,...i[r]]:l}}},Zae=(n,e)=>{var r;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),s=i?Zae(n.slice(1),i):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(_$);return(r=e.validators.find(({validator:a})=>a(o)))==null?void 0:r.classGroupId},IX=/^\[(.+)\]$/,NSe=n=>{if(IX.test(n)){const e=IX.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},ISe=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return DSe(Object.entries(n.classGroups),t).forEach(([o,r])=>{l9(r,i,o,e)}),i},l9=(n,e,t,i)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:EX(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(ESe(s)){l9(s(i),e,t,i);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,r])=>{l9(r,EX(e,o),t,i)})})},EX=(n,e)=>{let t=n;return e.split(_$).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},ESe=n=>n.isThemeGetter,DSe=(n,e)=>e?n.map(([t,i])=>{const s=i.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([r,a])=>[e+r,a])):o);return[t,s]}):n,TSe=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const s=(o,r)=>{t.set(o,r),e++,e>n&&(e=0,i=t,t=new Map)};return{get(o){let r=t.get(o);if(r!==void 0)return r;if((r=i.get(o))!==void 0)return s(o,r),r},set(o,r){t.has(o)?t.set(o,r):s(o,r)}}},Yae="!",RSe=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,s=e[0],o=e.length,r=a=>{const l=[];let c=0,d=0,u;for(let b=0;b<a.length;b++){let v=a[b];if(c===0){if(v===s&&(i||a.slice(b,b+o)===e)){l.push(a.slice(d,b)),d=b+o;continue}if(v==="/"){u=b;continue}}v==="["?c++:v==="]"&&c--}const h=l.length===0?a:a.substring(d),f=h.startsWith(Yae),m=f?h.substring(1):h,p=u&&u>d?u-d:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}};return t?a=>t({className:a,parseClassName:r}):r},MSe=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},PSe=n=>({cache:TSe(n.cacheSize),parseClassName:RSe(n),...kSe(n)}),ASe=/\s+/,OSe=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:s}=e,o=[],r=n.trim().split(ASe);let a="";for(let l=r.length-1;l>=0;l-=1){const c=r[l],{modifiers:d,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:f}=t(c);let m=!!f,p=i(m?h.substring(0,f):h);if(!p){if(!m){a=c+(a.length>0?" "+a:a);continue}if(p=i(h),!p){a=c+(a.length>0?" "+a:a);continue}m=!1}const b=MSe(d).join(":"),v=u?b+Yae:b,w=v+p;if(o.includes(w))continue;o.push(w);const y=s(p,m);for(let C=0;C<y.length;++C){const S=y[C];o.push(v+S)}a=c+(a.length>0?" "+a:a)}return a};function FSe(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Xae(e))&&(i&&(i+=" "),i+=t);return i}const Xae=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=Xae(n[i]))&&(t&&(t+=" "),t+=e);return t};function BSe(n,...e){let t,i,s,o=r;function r(l){const c=e.reduce((d,u)=>u(d),n());return t=PSe(c),i=t.cache.get,s=t.cache.set,o=a,a(l)}function a(l){const c=i(l);if(c)return c;const d=OSe(l,t);return s(l,d),d}return function(){return o(FSe.apply(null,arguments))}}const Pn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},Qae=/^\[(?:([a-z-]+):)?(.+)\]$/i,WSe=/^\d+\/\d+$/,HSe=new Set(["px","full","screen"]),VSe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jSe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zSe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,USe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$Se=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zu=n=>iy(n)||HSe.has(n)||WSe.test(n),Wf=n=>m1(n,"length",JSe),iy=n=>!!n&&!Number.isNaN(Number(n)),j5=n=>m1(n,"number",iy),lS=n=>!!n&&Number.isInteger(Number(n)),KSe=n=>n.endsWith("%")&&iy(n.slice(0,-1)),ri=n=>Qae.test(n),Hf=n=>VSe.test(n),qSe=new Set(["length","size","percentage"]),GSe=n=>m1(n,qSe,Jae),ZSe=n=>m1(n,"position",Jae),YSe=new Set(["image","url"]),XSe=n=>m1(n,YSe,txe),QSe=n=>m1(n,"",exe),cS=()=>!0,m1=(n,e,t)=>{const i=Qae.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},JSe=n=>jSe.test(n)&&!zSe.test(n),Jae=()=>!1,exe=n=>USe.test(n),txe=n=>$Se.test(n),ixe=()=>{const n=Pn("colors"),e=Pn("spacing"),t=Pn("blur"),i=Pn("brightness"),s=Pn("borderColor"),o=Pn("borderRadius"),r=Pn("borderSpacing"),a=Pn("borderWidth"),l=Pn("contrast"),c=Pn("grayscale"),d=Pn("hueRotate"),u=Pn("invert"),h=Pn("gap"),f=Pn("gradientColorStops"),m=Pn("gradientColorStopPositions"),p=Pn("inset"),b=Pn("margin"),v=Pn("opacity"),w=Pn("padding"),y=Pn("saturate"),C=Pn("scale"),S=Pn("sepia"),x=Pn("skew"),k=Pn("space"),N=Pn("translate"),E=()=>["auto","contain","none"],B=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",ri,e],O=()=>[ri,e],W=()=>["",Zu,Wf],T=()=>["auto",iy,ri],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",ri],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>[iy,ri];return{cacheSize:500,separator:":",theme:{colors:[cS],spacing:[Zu,Wf],blur:["none","",Hf,ri],brightness:le(),borderColor:[n],borderRadius:["none","","full",Hf,ri],borderSpacing:O(),borderWidth:W(),contrast:le(),grayscale:Z(),hueRotate:le(),invert:Z(),gap:O(),gradientColorStops:[n],gradientColorStopPositions:[KSe,Wf],inset:A(),margin:A(),opacity:le(),padding:O(),saturate:le(),scale:le(),sepia:Z(),skew:le(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",ri]}],container:["container"],columns:[{columns:[Hf]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),ri]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",lS,ri]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ri]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",lS,ri]}],"grid-cols":[{"grid-cols":[cS]}],"col-start-end":[{col:["auto",{span:["full",lS,ri]},ri]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[cS]}],"row-start-end":[{row:["auto",{span:[lS,ri]},ri]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ri]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ri]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ri,e]}],"min-w":[{"min-w":[ri,e,"min","max","fit"]}],"max-w":[{"max-w":[ri,e,"none","full","min","max","fit","prose",{screen:[Hf]},Hf]}],h:[{h:[ri,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ri,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ri,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ri,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Hf,Wf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",j5]}],"font-family":[{font:[cS]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ri]}],"line-clamp":[{"line-clamp":["none",iy,j5]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zu,ri]}],"list-image":[{"list-image":["none",ri]}],"list-style-type":[{list:["none","disc","decimal",ri]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zu,Wf]}],"underline-offset":[{"underline-offset":["auto",Zu,ri]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ri]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ri]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),ZSe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",GSe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},XSe]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[Zu,ri]}],"outline-w":[{outline:[Zu,Wf]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Zu,Wf]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Hf,QSe]}],"shadow-color":[{shadow:[cS]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ee()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Hf,ri]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[r]}],"border-spacing-x":[{"border-spacing-x":[r]}],"border-spacing-y":[{"border-spacing-y":[r]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ri]}],duration:[{duration:le()}],ease:[{ease:["linear","in","out","in-out",ri]}],delay:[{delay:le()}],animate:[{animate:["none","spin","ping","pulse","bounce",ri]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[lS,ri]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ri]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ri]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ri]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Zu,Wf,j5]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},nxe=BSe(ixe);function Yt(...n){return nxe(Vae(n))}const sxe=K1e,ele=L.forwardRef(({className:n,...e},t)=>g.jsx(Pae,{ref:t,className:Yt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));ele.displayName=Pae.displayName;const oxe=YO("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),tle=L.forwardRef(({className:n,variant:e,...t},i)=>g.jsx(Aae,{ref:i,className:Yt(oxe({variant:e}),n),...t}));tle.displayName=Aae.displayName;const rxe=L.forwardRef(({className:n,...e},t)=>g.jsx(Bae,{ref:t,className:Yt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));rxe.displayName=Bae.displayName;const ile=L.forwardRef(({className:n,...e},t)=>g.jsx(Wae,{ref:t,className:Yt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:g.jsx(g1,{className:"h-4 w-4"})}));ile.displayName=Wae.displayName;const nle=L.forwardRef(({className:n,...e},t)=>g.jsx(Oae,{ref:t,className:Yt("text-sm font-semibold",n),...e}));nle.displayName=Oae.displayName;const sle=L.forwardRef(({className:n,...e},t)=>g.jsx(Fae,{ref:t,className:Yt("text-sm opacity-90",n),...e}));sle.displayName=Fae.displayName;function axe(){const{toasts:n}=Aa();return g.jsxs(sxe,{children:[n.map(function({id:e,title:t,description:i,action:s,...o}){return g.jsxs(tle,{...o,children:[g.jsxs("div",{className:"grid gap-1",children:[t&&g.jsx(nle,{children:t}),i&&g.jsx(sle,{children:i})]}),s,g.jsx(ile,{})]},e)}),g.jsx(ele,{})]})}function lxe(){const[n,e]=L.useState("dark");return L.useEffect(()=>{const i=localStorage.getItem("theme");if(i==="light"||i==="dark")e(i);else{const s=window.matchMedia("(prefers-color-scheme: dark)").matches;e(s?"dark":"light")}},[]),{theme:n,toggleTheme:()=>{const i=n==="dark"?"light":"dark";e(i),localStorage.setItem("theme",i)}}}function cxe(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,i,s,o,r=[],a="",l=n.split("/");for(l[0]||l.shift();s=l.shift();)t=s[0],t==="*"?(r.push(t),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(i=s.indexOf("?",1),o=s.indexOf(".",1),r.push(s.substring(1,~i?i:~o?o:s.length)),a+=~i&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(a+=(~i?"?":"")+"\\"+s.substring(o))):a+="/"+s;return{keys:r,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var ole={exports:{}},rle={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gC=L;function dxe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var uxe=typeof Object.is=="function"?Object.is:dxe,hxe=gC.useState,fxe=gC.useEffect,gxe=gC.useLayoutEffect,mxe=gC.useDebugValue;function pxe(n,e){var t=e(),i=hxe({inst:{value:t,getSnapshot:e}}),s=i[0].inst,o=i[1];return gxe(function(){s.value=t,s.getSnapshot=e,z5(s)&&o({inst:s})},[n,t,e]),fxe(function(){return z5(s)&&o({inst:s}),n(function(){z5(s)&&o({inst:s})})},[n]),mxe(t),t}function z5(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!uxe(n,t)}catch{return!0}}function _xe(n,e){return e()}var bxe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_xe:pxe;rle.useSyncExternalStore=gC.useSyncExternalStore!==void 0?gC.useSyncExternalStore:bxe;ole.exports=rle;var vxe=ole.exports;const wxe=foe.useInsertionEffect,yxe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ale=yxe?L.useLayoutEffect:L.useEffect,Cxe=wxe||ale,b$=n=>{const e=L.useRef([n,(...t)=>e[0](...t)]).current;return Cxe(()=>{e[0]=n}),e[1]},Sxe="popstate",v$="pushState",w$="replaceState",xxe="hashchange",DX=[Sxe,v$,w$,xxe],Lxe=n=>{for(const e of DX)addEventListener(e,n);return()=>{for(const e of DX)removeEventListener(e,n)}},lle=(n,e)=>vxe.useSyncExternalStore(Lxe,n,e),kxe=()=>location.search,Nxe=({ssrSearch:n=""}={})=>lle(kxe,()=>n),TX=()=>location.pathname,Ixe=({ssrPath:n}={})=>lle(TX,n?()=>n:TX),Exe=(n,{replace:e=!1,state:t=null}={})=>history[e?w$:v$](t,"",n),Dxe=(n={})=>[Ixe(n),Exe],RX=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[RX]>"u"){for(const n of[v$,w$]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),i=new Event(n);return i.arguments=arguments,dispatchEvent(i),t}}Object.defineProperty(window,RX,{value:!0})}const Txe=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",cle=(n="")=>n==="/"?"":n,Rxe=(n,e)=>n[0]==="~"?n.slice(1):cle(e)+n,Mxe=(n="",e)=>Txe(MX(cle(n)),MX(e)),MX=n=>{try{return decodeURI(n)}catch{return n}},dle={hook:Dxe,searchHook:Nxe,parser:cxe,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:n=>n},ule=L.createContext(dle),hI=()=>L.useContext(ule),hle={},fle=L.createContext(hle),gle=()=>L.useContext(fle),QO=n=>{const[e,t]=n.hook(n);return[Mxe(n.base,e),b$((i,s)=>t(Rxe(i,n.base),s))]},JO=()=>QO(hI()),mle=(n,e,t,i)=>{const{pattern:s,keys:o}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",i),r=s.exec(t)||[],[a,...l]=r;return a!==void 0?[!0,(()=>{const c=o!==!1?Object.fromEntries(o.map((u,h)=>[u,l[h]])):r.groups;let d={...l};return c&&Object.assign(d,c),d})(),...i?[a]:[]]:[!1,null]},Pxe=({children:n,...e})=>{var d,u;const t=hI(),i=e.hook?dle:t;let s=i;const[o,r]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];r&&(e.ssrSearch=r,e.ssrPath=o),e.hrefs=e.hrefs??((u=e.hook)==null?void 0:u.hrefs);let a=L.useRef({}),l=a.current,c=l;for(let h in i){const f=h==="base"?i[h]+(e[h]||""):e[h]||i[h];l===c&&f!==c[h]&&(a.current=c={...c}),c[h]=f,f!==i[h]&&(s=c)}return L.createElement(ule.Provider,{value:s,children:n})},PX=({children:n,component:e},t)=>e?L.createElement(e,{params:t}):typeof n=="function"?n(t):n,Axe=n=>{let e=L.useRef(hle),t=e.current;for(const i in n)n[i]!==t[i]&&(t=n);return Object.keys(n).length===0&&(t=n),e.current=t},c9=({path:n,nest:e,match:t,...i})=>{const s=hI(),[o]=QO(s),[r,a,l]=t??mle(s.parser,n,o,e),c=Axe({...gle(),...a});if(!r)return null;const d=l?L.createElement(Pxe,{base:l},PX(i,c)):PX(i,c);return L.createElement(fle.Provider,{value:c,children:d})},Oxe=L.forwardRef((n,e)=>{const t=hI(),[i,s]=QO(t),{to:o="",href:r=o,onClick:a,asChild:l,children:c,className:d,replace:u,state:h,...f}=n,m=b$(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(a==null||a(b),b.defaultPrevented||(b.preventDefault(),s(r,n)))}),p=t.hrefs(r[0]==="~"?r.slice(1):t.base+r,t);return l&&L.isValidElement(c)?L.cloneElement(c,{onClick:m,href:p}):L.createElement("a",{...f,onClick:m,href:p,className:d!=null&&d.call?d(i===r):d,children:c,ref:e})}),ple=n=>Array.isArray(n)?n.flatMap(e=>ple(e&&e.type===L.Fragment?e.props.children:e)):[n],Fxe=({children:n,location:e})=>{const t=hI(),[i]=QO(t);for(const s of ple(n)){let o=0;if(L.isValidElement(s)&&(o=mle(t.parser,s.props.path,e||i,s.props.nest))[0])return L.cloneElement(s,{match:o})}return null},_le=n=>{const{to:e,href:t=e}=n,[,i]=JO(),s=b$(()=>i(e||t,n));return ale(()=>{s()},[]),null};var p1=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sv=typeof window>"u"||"Deno"in globalThis;function Rl(){}function Bxe(n,e){return typeof n=="function"?n(e):n}function d9(n){return typeof n=="number"&&n>=0&&n!==1/0}function ble(n,e){return Math.max(n+(e||0)-Date.now(),0)}function ny(n,e){return typeof n=="function"?n(e):n}function Rc(n,e){return typeof n=="function"?n(e):n}function AX(n,e){const{type:t="all",exact:i,fetchStatus:s,predicate:o,queryKey:r,stale:a}=n;if(r){if(i){if(e.queryHash!==y$(r,e.options))return!1}else if(!JL(e.queryKey,r))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||o&&!o(e))}function OX(n,e){const{exact:t,status:i,predicate:s,mutationKey:o}=n;if(o){if(!e.options.mutationKey)return!1;if(t){if(ov(e.options.mutationKey)!==ov(o))return!1}else if(!JL(e.options.mutationKey,o))return!1}return!(i&&e.state.status!==i||s&&!s(e))}function y$(n,e){return((e==null?void 0:e.queryKeyHashFn)||ov)(n)}function ov(n){return JSON.stringify(n,(e,t)=>u9(t)?Object.keys(t).sort().reduce((i,s)=>(i[s]=t[s],i),{}):t)}function JL(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!JL(n[t],e[t])):!1}function vle(n,e){if(n===e)return n;const t=FX(n)&&FX(e);if(t||u9(n)&&u9(e)){const i=t?n:Object.keys(n),s=i.length,o=t?e:Object.keys(e),r=o.length,a=t?[]:{};let l=0;for(let c=0;c<r;c++){const d=t?c:o[c];(!t&&i.includes(d)||t)&&n[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=vle(n[d],e[d]),a[d]===n[d]&&n[d]!==void 0&&l++)}return s===r&&l===s?n:a}return e}function ER(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function FX(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function u9(n){if(!BX(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!BX(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function BX(n){return Object.prototype.toString.call(n)==="[object Object]"}function Wxe(n){return new Promise(e=>{setTimeout(e,n)})}function h9(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?vle(n,e):e}function Hxe(n,e,t=0){const i=[...n,e];return t&&i.length>t?i.slice(1):i}function Vxe(n,e,t=0){const i=[e,...n];return t&&i.length>t?i.slice(0,-1):i}var C$=Symbol();function wle(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===C$?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var D_,vg,Ay,jse,jxe=(jse=class extends p1{constructor(){super();Ft(this,D_);Ft(this,vg);Ft(this,Ay);st(this,Ay,e=>{if(!sv&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){te(this,vg)||this.setEventListener(te(this,Ay))}onUnsubscribe(){var e;this.hasListeners()||((e=te(this,vg))==null||e.call(this),st(this,vg,void 0))}setEventListener(e){var t;st(this,Ay,e),(t=te(this,vg))==null||t.call(this),st(this,vg,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){te(this,D_)!==e&&(st(this,D_,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof te(this,D_)=="boolean"?te(this,D_):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},D_=new WeakMap,vg=new WeakMap,Ay=new WeakMap,jse),S$=new jxe,Oy,wg,Fy,zse,zxe=(zse=class extends p1{constructor(){super();Ft(this,Oy,!0);Ft(this,wg);Ft(this,Fy);st(this,Fy,e=>{if(!sv&&window.addEventListener){const t=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",i)}}})}onSubscribe(){te(this,wg)||this.setEventListener(te(this,Fy))}onUnsubscribe(){var e;this.hasListeners()||((e=te(this,wg))==null||e.call(this),st(this,wg,void 0))}setEventListener(e){var t;st(this,Fy,e),(t=te(this,wg))==null||t.call(this),st(this,wg,e(this.setOnline.bind(this)))}setOnline(e){te(this,Oy)!==e&&(st(this,Oy,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return te(this,Oy)}},Oy=new WeakMap,wg=new WeakMap,Fy=new WeakMap,zse),DR=new zxe;function f9(){let n,e;const t=new Promise((s,o)=>{n=s,e=o});t.status="pending",t.catch(()=>{});function i(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{i({status:"fulfilled",value:s}),n(s)},t.reject=s=>{i({status:"rejected",reason:s}),e(s)},t}function Uxe(n){return Math.min(1e3*2**n,3e4)}function yle(n){return(n??"online")==="online"?DR.isOnline():!0}var Cle=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function U5(n){return n instanceof Cle}function Sle(n){let e=!1,t=0,i=!1,s;const o=f9(),r=p=>{var b;i||(h(new Cle(p)),(b=n.abort)==null||b.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>S$.isFocused()&&(n.networkMode==="always"||DR.isOnline())&&n.canRun(),d=()=>yle(n.networkMode)&&n.canRun(),u=p=>{var b;i||(i=!0,(b=n.onSuccess)==null||b.call(n,p),s==null||s(),o.resolve(p))},h=p=>{var b;i||(i=!0,(b=n.onError)==null||b.call(n,p),s==null||s(),o.reject(p))},f=()=>new Promise(p=>{var b;s=v=>{(i||c())&&p(v)},(b=n.onPause)==null||b.call(n)}).then(()=>{var p;s=void 0,i||(p=n.onContinue)==null||p.call(n)}),m=()=>{if(i)return;let p;const b=t===0?n.initialPromise:void 0;try{p=b??n.fn()}catch(v){p=Promise.reject(v)}Promise.resolve(p).then(u).catch(v=>{var x;if(i)return;const w=n.retry??(sv?0:3),y=n.retryDelay??Uxe,C=typeof y=="function"?y(t,v):y,S=w===!0||typeof w=="number"&&t<w||typeof w=="function"&&w(t,v);if(e||!S){h(v);return}t++,(x=n.onFail)==null||x.call(n,t,v),Wxe(C).then(()=>c()?void 0:f()).then(()=>{e?h(v):m()})})};return{promise:o,cancel:r,continue:()=>(s==null||s(),o),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():f().then(m),o)}}function $xe(){let n=[],e=0,t=a=>{a()},i=a=>{a()},s=a=>setTimeout(a,0);const o=a=>{e?n.push(a):s(()=>{t(a)})},r=()=>{const a=n;n=[],a.length&&s(()=>{i(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||r()}return l},batchCalls:a=>(...l)=>{o(()=>{a(...l)})},schedule:o,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{i=a},setScheduler:a=>{s=a}}}var js=$xe(),T_,Use,xle=(Use=class{constructor(){Ft(this,T_)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),d9(this.gcTime)&&st(this,T_,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(sv?1/0:5*60*1e3))}clearGcTimeout(){te(this,T_)&&(clearTimeout(te(this,T_)),st(this,T_,void 0))}},T_=new WeakMap,Use),By,Wy,Tl,Ko,eI,R_,kc,th,$se,Kxe=($se=class extends xle{constructor(e){super();Ft(this,kc);Ft(this,By);Ft(this,Wy);Ft(this,Tl);Ft(this,Ko);Ft(this,eI);Ft(this,R_);st(this,R_,!1),st(this,eI,e.defaultOptions),this.setOptions(e.options),this.observers=[],st(this,Tl,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,st(this,By,qxe(this.options)),this.state=e.state??te(this,By),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=te(this,Ko))==null?void 0:e.promise}setOptions(e){this.options={...te(this,eI),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&te(this,Tl).remove(this)}setData(e,t){const i=h9(this.state.data,e,this.options);return ci(this,kc,th).call(this,{data:i,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),i}setState(e,t){ci(this,kc,th).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var i,s;const t=(i=te(this,Ko))==null?void 0:i.promise;return(s=te(this,Ko))==null||s.cancel(e),t?t.then(Rl).catch(Rl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(te(this,By))}isActive(){return this.observers.some(e=>Rc(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===C$||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!ble(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=te(this,Ko))==null||t.continue()}onOnline(){var t;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=te(this,Ko))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),te(this,Tl).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(te(this,Ko)&&(te(this,R_)?te(this,Ko).cancel({revert:!0}):te(this,Ko).cancelRetry()),this.scheduleGc()),te(this,Tl).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ci(this,kc,th).call(this,{type:"invalidate"})}fetch(e,t){var l,c,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(te(this,Ko))return te(this,Ko).continueRetry(),te(this,Ko).promise}if(e&&this.setOptions(e),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const i=new AbortController,s=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(st(this,R_,!0),i.signal)})},o=()=>{const u=wle(this.options,t),h={queryKey:this.queryKey,meta:this.meta};return s(h),st(this,R_,!1),this.options.persister?this.options.persister(u,h,this):u(h)},r={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};s(r),(l=this.options.behavior)==null||l.onFetch(r,this),st(this,Wy,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=r.fetchOptions)==null?void 0:c.meta))&&ci(this,kc,th).call(this,{type:"fetch",meta:(d=r.fetchOptions)==null?void 0:d.meta});const a=u=>{var h,f,m,p;U5(u)&&u.silent||ci(this,kc,th).call(this,{type:"error",error:u}),U5(u)||((f=(h=te(this,Tl).config).onError)==null||f.call(h,u,this),(p=(m=te(this,Tl).config).onSettled)==null||p.call(m,this.state.data,u,this)),this.scheduleGc()};return st(this,Ko,Sle({initialPromise:t==null?void 0:t.initialPromise,fn:r.fetchFn,abort:i.abort.bind(i),onSuccess:u=>{var h,f,m,p;if(u===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(b){a(b);return}(f=(h=te(this,Tl).config).onSuccess)==null||f.call(h,u,this),(p=(m=te(this,Tl).config).onSettled)==null||p.call(m,u,this.state.error,this),this.scheduleGc()},onError:a,onFail:(u,h)=>{ci(this,kc,th).call(this,{type:"failed",failureCount:u,error:h})},onPause:()=>{ci(this,kc,th).call(this,{type:"pause"})},onContinue:()=>{ci(this,kc,th).call(this,{type:"continue"})},retry:r.options.retry,retryDelay:r.options.retryDelay,networkMode:r.options.networkMode,canRun:()=>!0})),te(this,Ko).start()}},By=new WeakMap,Wy=new WeakMap,Tl=new WeakMap,Ko=new WeakMap,eI=new WeakMap,R_=new WeakMap,kc=new WeakSet,th=function(e){const t=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Lle(i.data,this.options),fetchMeta:e.meta??null};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return U5(s)&&s.revert&&te(this,Wy)?{...te(this,Wy),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=t(this.state),js.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),te(this,Tl).notify({query:this,type:"updated",action:e})})},$se);function Lle(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:yle(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function qxe(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,i=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Kd,Kse,Gxe=(Kse=class extends p1{constructor(e={}){super();Ft(this,Kd);this.config=e,st(this,Kd,new Map)}build(e,t,i){const s=t.queryKey,o=t.queryHash??y$(s,t);let r=this.get(o);return r||(r=new Kxe({cache:this,queryKey:s,queryHash:o,options:e.defaultQueryOptions(t),state:i,defaultOptions:e.getQueryDefaults(s)}),this.add(r)),r}add(e){te(this,Kd).has(e.queryHash)||(te(this,Kd).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=te(this,Kd).get(e.queryHash);t&&(e.destroy(),t===e&&te(this,Kd).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){js.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return te(this,Kd).get(e)}getAll(){return[...te(this,Kd).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(i=>AX(t,i))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(i=>AX(e,i)):t}notify(e){js.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){js.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){js.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Kd=new WeakMap,Kse),qd,wr,M_,Gd,qf,qse,Zxe=(qse=class extends xle{constructor(e){super();Ft(this,Gd);Ft(this,qd);Ft(this,wr);Ft(this,M_);this.mutationId=e.mutationId,st(this,wr,e.mutationCache),st(this,qd,[]),this.state=e.state||kle(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){te(this,qd).includes(e)||(te(this,qd).push(e),this.clearGcTimeout(),te(this,wr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){st(this,qd,te(this,qd).filter(t=>t!==e)),this.scheduleGc(),te(this,wr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){te(this,qd).length||(this.state.status==="pending"?this.scheduleGc():te(this,wr).remove(this))}continue(){var e;return((e=te(this,M_))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,r,a,l,c,d,u,h,f,m,p,b,v,w,y,C,S,x,k;st(this,M_,Sle({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,E)=>{ci(this,Gd,qf).call(this,{type:"failed",failureCount:N,error:E})},onPause:()=>{ci(this,Gd,qf).call(this,{type:"pause"})},onContinue:()=>{ci(this,Gd,qf).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>te(this,wr).canRun(this)}));const t=this.state.status==="pending",i=!te(this,M_).canStart();try{if(!t){ci(this,Gd,qf).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(s=te(this,wr).config).onMutate)==null?void 0:o.call(s,e,this));const E=await((a=(r=this.options).onMutate)==null?void 0:a.call(r,e));E!==this.state.context&&ci(this,Gd,qf).call(this,{type:"pending",context:E,variables:e,isPaused:i})}const N=await te(this,M_).start();return await((c=(l=te(this,wr).config).onSuccess)==null?void 0:c.call(l,N,e,this.state.context,this)),await((u=(d=this.options).onSuccess)==null?void 0:u.call(d,N,e,this.state.context)),await((f=(h=te(this,wr).config).onSettled)==null?void 0:f.call(h,N,null,this.state.variables,this.state.context,this)),await((p=(m=this.options).onSettled)==null?void 0:p.call(m,N,null,e,this.state.context)),ci(this,Gd,qf).call(this,{type:"success",data:N}),N}catch(N){try{throw await((v=(b=te(this,wr).config).onError)==null?void 0:v.call(b,N,e,this.state.context,this)),await((y=(w=this.options).onError)==null?void 0:y.call(w,N,e,this.state.context)),await((S=(C=te(this,wr).config).onSettled)==null?void 0:S.call(C,void 0,N,this.state.variables,this.state.context,this)),await((k=(x=this.options).onSettled)==null?void 0:k.call(x,void 0,N,e,this.state.context)),N}finally{ci(this,Gd,qf).call(this,{type:"error",error:N})}}finally{te(this,wr).runNext(this)}}},qd=new WeakMap,wr=new WeakMap,M_=new WeakMap,Gd=new WeakSet,qf=function(e){const t=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),js.batch(()=>{te(this,qd).forEach(i=>{i.onMutationUpdate(e)}),te(this,wr).notify({mutation:this,type:"updated",action:e})})},qse);function kle(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ka,tI,Gse,Yxe=(Gse=class extends p1{constructor(e={}){super();Ft(this,Ka);Ft(this,tI);this.config=e,st(this,Ka,new Map),st(this,tI,Date.now())}build(e,t,i){const s=new Zxe({mutationCache:this,mutationId:++dE(this,tI)._,options:e.defaultMutationOptions(t),state:i});return this.add(s),s}add(e){const t=DE(e),i=te(this,Ka).get(t)??[];i.push(e),te(this,Ka).set(t,i),this.notify({type:"added",mutation:e})}remove(e){var i;const t=DE(e);if(te(this,Ka).has(t)){const s=(i=te(this,Ka).get(t))==null?void 0:i.filter(o=>o!==e);s&&(s.length===0?te(this,Ka).delete(t):te(this,Ka).set(t,s))}this.notify({type:"removed",mutation:e})}canRun(e){var i;const t=(i=te(this,Ka).get(DE(e)))==null?void 0:i.find(s=>s.state.status==="pending");return!t||t===e}runNext(e){var i;const t=(i=te(this,Ka).get(DE(e)))==null?void 0:i.find(s=>s!==e&&s.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){js.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...te(this,Ka).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(i=>OX(t,i))}findAll(e={}){return this.getAll().filter(t=>OX(e,t))}notify(e){js.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return js.batch(()=>Promise.all(e.map(t=>t.continue().catch(Rl))))}},Ka=new WeakMap,tI=new WeakMap,Gse);function DE(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function WX(n){return{onFetch:(e,t)=>{var d,u,h,f,m;const i=e.options,s=(h=(u=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:u.fetchMore)==null?void 0:h.direction,o=((f=e.state.data)==null?void 0:f.pages)||[],r=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let p=!1;const b=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},v=wle(e.options,e.fetchOptions),w=async(y,C,S)=>{if(p)return Promise.reject();if(C==null&&y.pages.length)return Promise.resolve(y);const x={queryKey:e.queryKey,pageParam:C,direction:S?"backward":"forward",meta:e.options.meta};b(x);const k=await v(x),{maxPages:N}=e.options,E=S?Vxe:Hxe;return{pages:E(y.pages,k,N),pageParams:E(y.pageParams,C,N)}};if(s&&o.length){const y=s==="backward",C=y?Xxe:HX,S={pages:o,pageParams:r},x=C(i,S);a=await w(S,x,y)}else{const y=n??o.length;do{const C=l===0?r[0]??i.initialPageParam:HX(i,a);if(l>0&&C==null)break;a=await w(a,C),l++}while(l<y)}return a};e.options.persister?e.fetchFn=()=>{var p,b;return(b=(p=e.options).persister)==null?void 0:b.call(p,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function HX(n,{pages:e,pageParams:t}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,t[i],t):void 0}function Xxe(n,{pages:e,pageParams:t}){var i;return e.length>0?(i=n.getPreviousPageParam)==null?void 0:i.call(n,e[0],e,t[0],t):void 0}var ts,yg,Cg,Hy,Vy,Sg,jy,zy,Zse,Qxe=(Zse=class{constructor(n={}){Ft(this,ts);Ft(this,yg);Ft(this,Cg);Ft(this,Hy);Ft(this,Vy);Ft(this,Sg);Ft(this,jy);Ft(this,zy);st(this,ts,n.queryCache||new Gxe),st(this,yg,n.mutationCache||new Yxe),st(this,Cg,n.defaultOptions||{}),st(this,Hy,new Map),st(this,Vy,new Map),st(this,Sg,0)}mount(){dE(this,Sg)._++,te(this,Sg)===1&&(st(this,jy,S$.subscribe(async n=>{n&&(await this.resumePausedMutations(),te(this,ts).onFocus())})),st(this,zy,DR.subscribe(async n=>{n&&(await this.resumePausedMutations(),te(this,ts).onOnline())})))}unmount(){var n,e;dE(this,Sg)._--,te(this,Sg)===0&&((n=te(this,jy))==null||n.call(this),st(this,jy,void 0),(e=te(this,zy))==null||e.call(this),st(this,zy,void 0))}isFetching(n){return te(this,ts).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return te(this,yg).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=te(this,ts).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),i=te(this,ts).build(this,t);return n.revalidateIfStale&&i.isStaleByTime(ny(t.staleTime,i))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return te(this,ts).findAll(n).map(({queryKey:e,state:t})=>{const i=t.data;return[e,i]})}setQueryData(n,e,t){const i=this.defaultQueryOptions({queryKey:n}),s=te(this,ts).get(i.queryHash),o=s==null?void 0:s.state.data,r=Bxe(e,o);if(r!==void 0)return te(this,ts).build(this,i).setData(r,{...t,manual:!0})}setQueriesData(n,e,t){return js.batch(()=>te(this,ts).findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=te(this,ts).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=te(this,ts);js.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=te(this,ts),i={type:"active",...n};return js.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries(i,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},i=js.batch(()=>te(this,ts).findAll(n).map(s=>s.cancel(t)));return Promise.all(i).then(Rl).catch(Rl)}invalidateQueries(n={},e={}){return js.batch(()=>{if(te(this,ts).findAll(n).forEach(i=>{i.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},i=js.batch(()=>te(this,ts).findAll(n).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,t);return t.throwOnError||(o=o.catch(Rl)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(i).then(Rl)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=te(this,ts).build(this,e);return t.isStaleByTime(ny(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Rl).catch(Rl)}fetchInfiniteQuery(n){return n.behavior=WX(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Rl).catch(Rl)}ensureInfiniteQueryData(n){return n.behavior=WX(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return DR.isOnline()?te(this,yg).resumePausedMutations():Promise.resolve()}getQueryCache(){return te(this,ts)}getMutationCache(){return te(this,yg)}getDefaultOptions(){return te(this,Cg)}setDefaultOptions(n){st(this,Cg,n)}setQueryDefaults(n,e){te(this,Hy).set(ov(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...te(this,Hy).values()];let t={};return e.forEach(i=>{JL(n,i.queryKey)&&(t={...t,...i.defaultOptions})}),t}setMutationDefaults(n,e){te(this,Vy).set(ov(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...te(this,Vy).values()];let t={};return e.forEach(i=>{JL(n,i.mutationKey)&&(t={...t,...i.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...te(this,Cg).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=y$(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===C$&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...te(this,Cg).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){te(this,ts).clear(),te(this,yg).clear()}},ts=new WeakMap,yg=new WeakMap,Cg=new WeakMap,Hy=new WeakMap,Vy=new WeakMap,Sg=new WeakMap,jy=new WeakMap,zy=new WeakMap,Zse),ra,Si,iI,yr,P_,Uy,xg,Zd,nI,$y,Ky,A_,O_,Lg,qy,an,US,g9,m9,p9,_9,b9,v9,w9,Nle,Yse,Jxe=(Yse=class extends p1{constructor(e,t){super();Ft(this,an);Ft(this,ra);Ft(this,Si);Ft(this,iI);Ft(this,yr);Ft(this,P_);Ft(this,Uy);Ft(this,xg);Ft(this,Zd);Ft(this,nI);Ft(this,$y);Ft(this,Ky);Ft(this,A_);Ft(this,O_);Ft(this,Lg);Ft(this,qy,new Set);this.options=t,st(this,ra,e),st(this,Zd,null),st(this,xg,f9()),this.options.experimental_prefetchInRender||te(this,xg).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(te(this,Si).addObserver(this),VX(te(this,Si),this.options)?ci(this,an,US).call(this):this.updateResult(),ci(this,an,_9).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return y9(te(this,Si),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return y9(te(this,Si),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ci(this,an,b9).call(this),ci(this,an,v9).call(this),te(this,Si).removeObserver(this)}setOptions(e,t){const i=this.options,s=te(this,Si);if(this.options=te(this,ra).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Rc(this.options.enabled,te(this,Si))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ci(this,an,w9).call(this),te(this,Si).setOptions(this.options),i._defaulted&&!ER(this.options,i)&&te(this,ra).getQueryCache().notify({type:"observerOptionsUpdated",query:te(this,Si),observer:this});const o=this.hasListeners();o&&jX(te(this,Si),s,this.options,i)&&ci(this,an,US).call(this),this.updateResult(t),o&&(te(this,Si)!==s||Rc(this.options.enabled,te(this,Si))!==Rc(i.enabled,te(this,Si))||ny(this.options.staleTime,te(this,Si))!==ny(i.staleTime,te(this,Si)))&&ci(this,an,g9).call(this);const r=ci(this,an,m9).call(this);o&&(te(this,Si)!==s||Rc(this.options.enabled,te(this,Si))!==Rc(i.enabled,te(this,Si))||r!==te(this,Lg))&&ci(this,an,p9).call(this,r)}getOptimisticResult(e){const t=te(this,ra).getQueryCache().build(te(this,ra),e),i=this.createResult(t,e);return tLe(this,i)&&(st(this,yr,i),st(this,Uy,this.options),st(this,P_,te(this,Si).state)),i}getCurrentResult(){return te(this,yr)}trackResult(e,t){const i={};return Object.keys(e).forEach(s=>{Object.defineProperty(i,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),t==null||t(s),e[s])})}),i}trackProp(e){te(this,qy).add(e)}getCurrentQuery(){return te(this,Si)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=te(this,ra).defaultQueryOptions(e),i=te(this,ra).getQueryCache().build(te(this,ra),t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){return ci(this,an,US).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),te(this,yr)))}createResult(e,t){var N;const i=te(this,Si),s=this.options,o=te(this,yr),r=te(this,P_),a=te(this,Uy),c=e!==i?e.state:te(this,iI),{state:d}=e;let u={...d},h=!1,f;if(t._optimisticResults){const E=this.hasListeners(),B=!E&&VX(e,t),A=E&&jX(e,i,t,s);(B||A)&&(u={...u,...Lle(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:p,status:b}=u;if(t.select&&u.data!==void 0)if(o&&u.data===(r==null?void 0:r.data)&&t.select===te(this,nI))f=te(this,$y);else try{st(this,nI,t.select),f=t.select(u.data),f=h9(o==null?void 0:o.data,f,t),st(this,$y,f),st(this,Zd,null)}catch(E){st(this,Zd,E)}else f=u.data;if(t.placeholderData!==void 0&&f===void 0&&b==="pending"){let E;if(o!=null&&o.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData))E=o.data;else if(E=typeof t.placeholderData=="function"?t.placeholderData((N=te(this,Ky))==null?void 0:N.state.data,te(this,Ky)):t.placeholderData,t.select&&E!==void 0)try{E=t.select(E),st(this,Zd,null)}catch(B){st(this,Zd,B)}E!==void 0&&(b="success",f=h9(o==null?void 0:o.data,E,t),h=!0)}te(this,Zd)&&(m=te(this,Zd),f=te(this,$y),p=Date.now(),b="error");const v=u.fetchStatus==="fetching",w=b==="pending",y=b==="error",C=w&&v,S=f!==void 0,k={status:b,fetchStatus:u.fetchStatus,isPending:w,isSuccess:b==="success",isError:y,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!w,isLoadingError:y&&!S,isPaused:u.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:y&&S,isStale:x$(e,t),refetch:this.refetch,promise:te(this,xg)};if(this.options.experimental_prefetchInRender){const E=O=>{k.status==="error"?O.reject(k.error):k.data!==void 0&&O.resolve(k.data)},B=()=>{const O=st(this,xg,k.promise=f9());E(O)},A=te(this,xg);switch(A.status){case"pending":e.queryHash===i.queryHash&&E(A);break;case"fulfilled":(k.status==="error"||k.data!==A.value)&&B();break;case"rejected":(k.status!=="error"||k.error!==A.reason)&&B();break}}return k}updateResult(e){const t=te(this,yr),i=this.createResult(te(this,Si),this.options);if(st(this,P_,te(this,Si).state),st(this,Uy,this.options),te(this,P_).data!==void 0&&st(this,Ky,te(this,Si)),ER(i,t))return;st(this,yr,i);const s={},o=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,a=typeof r=="function"?r():r;if(a==="all"||!a&&!te(this,qy).size)return!0;const l=new Set(a??te(this,qy));return this.options.throwOnError&&l.add("error"),Object.keys(te(this,yr)).some(c=>{const d=c;return te(this,yr)[d]!==t[d]&&l.has(d)})};(e==null?void 0:e.listeners)!==!1&&o()&&(s.listeners=!0),ci(this,an,Nle).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ci(this,an,_9).call(this)}},ra=new WeakMap,Si=new WeakMap,iI=new WeakMap,yr=new WeakMap,P_=new WeakMap,Uy=new WeakMap,xg=new WeakMap,Zd=new WeakMap,nI=new WeakMap,$y=new WeakMap,Ky=new WeakMap,A_=new WeakMap,O_=new WeakMap,Lg=new WeakMap,qy=new WeakMap,an=new WeakSet,US=function(e){ci(this,an,w9).call(this);let t=te(this,Si).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Rl)),t},g9=function(){ci(this,an,b9).call(this);const e=ny(this.options.staleTime,te(this,Si));if(sv||te(this,yr).isStale||!d9(e))return;const i=ble(te(this,yr).dataUpdatedAt,e)+1;st(this,A_,setTimeout(()=>{te(this,yr).isStale||this.updateResult()},i))},m9=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(te(this,Si)):this.options.refetchInterval)??!1},p9=function(e){ci(this,an,v9).call(this),st(this,Lg,e),!(sv||Rc(this.options.enabled,te(this,Si))===!1||!d9(te(this,Lg))||te(this,Lg)===0)&&st(this,O_,setInterval(()=>{(this.options.refetchIntervalInBackground||S$.isFocused())&&ci(this,an,US).call(this)},te(this,Lg)))},_9=function(){ci(this,an,g9).call(this),ci(this,an,p9).call(this,ci(this,an,m9).call(this))},b9=function(){te(this,A_)&&(clearTimeout(te(this,A_)),st(this,A_,void 0))},v9=function(){te(this,O_)&&(clearInterval(te(this,O_)),st(this,O_,void 0))},w9=function(){const e=te(this,ra).getQueryCache().build(te(this,ra),this.options);if(e===te(this,Si))return;const t=te(this,Si);st(this,Si,e),st(this,iI,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Nle=function(e){js.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(te(this,yr))}),te(this,ra).getQueryCache().notify({query:te(this,Si),type:"observerResultsUpdated"})})},Yse);function eLe(n,e){return Rc(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function VX(n,e){return eLe(n,e)||n.state.data!==void 0&&y9(n,e,e.refetchOnMount)}function y9(n,e,t){if(Rc(e.enabled,n)!==!1){const i=typeof t=="function"?t(n):t;return i==="always"||i!==!1&&x$(n,e)}return!1}function jX(n,e,t,i){return(n!==e||Rc(i.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&x$(n,t)}function x$(n,e){return Rc(e.enabled,n)!==!1&&n.isStaleByTime(ny(e.staleTime,n))}function tLe(n,e){return!ER(n.getCurrentResult(),e)}var kg,Ng,aa,xh,tf,uT,C9,Xse,iLe=(Xse=class extends p1{constructor(t,i){super();Ft(this,tf);Ft(this,kg);Ft(this,Ng);Ft(this,aa);Ft(this,xh);st(this,kg,t),this.setOptions(i),this.bindMethods(),ci(this,tf,uT).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const i=this.options;this.options=te(this,kg).defaultMutationOptions(t),ER(this.options,i)||te(this,kg).getMutationCache().notify({type:"observerOptionsUpdated",mutation:te(this,aa),observer:this}),i!=null&&i.mutationKey&&this.options.mutationKey&&ov(i.mutationKey)!==ov(this.options.mutationKey)?this.reset():((s=te(this,aa))==null?void 0:s.state.status)==="pending"&&te(this,aa).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=te(this,aa))==null||t.removeObserver(this)}onMutationUpdate(t){ci(this,tf,uT).call(this),ci(this,tf,C9).call(this,t)}getCurrentResult(){return te(this,Ng)}reset(){var t;(t=te(this,aa))==null||t.removeObserver(this),st(this,aa,void 0),ci(this,tf,uT).call(this),ci(this,tf,C9).call(this)}mutate(t,i){var s;return st(this,xh,i),(s=te(this,aa))==null||s.removeObserver(this),st(this,aa,te(this,kg).getMutationCache().build(te(this,kg),this.options)),te(this,aa).addObserver(this),te(this,aa).execute(t)}},kg=new WeakMap,Ng=new WeakMap,aa=new WeakMap,xh=new WeakMap,tf=new WeakSet,uT=function(){var i;const t=((i=te(this,aa))==null?void 0:i.state)??kle();st(this,Ng,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},C9=function(t){js.batch(()=>{var i,s,o,r,a,l,c,d;if(te(this,xh)&&this.hasListeners()){const u=te(this,Ng).variables,h=te(this,Ng).context;(t==null?void 0:t.type)==="success"?((s=(i=te(this,xh)).onSuccess)==null||s.call(i,t.data,u,h),(r=(o=te(this,xh)).onSettled)==null||r.call(o,t.data,null,u,h)):(t==null?void 0:t.type)==="error"&&((l=(a=te(this,xh)).onError)==null||l.call(a,t.error,u,h),(d=(c=te(this,xh)).onSettled)==null||d.call(c,void 0,t.error,u,h))}this.listeners.forEach(u=>{u(te(this,Ng))})})},Xse),Ile=L.createContext(void 0),L$=n=>{const e=L.useContext(Ile);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Ele=({client:n,children:e})=>(L.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),g.jsx(Ile.Provider,{value:n,children:e})),Dle=L.createContext(!1),nLe=()=>L.useContext(Dle);Dle.Provider;function sLe(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var oLe=L.createContext(sLe()),rLe=()=>L.useContext(oLe);function Tle(n,e){return typeof n=="function"?n(...e):!!n}function S9(){}var aLe=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},lLe=n=>{L.useEffect(()=>{n.clearReset()},[n])},cLe=({result:n,errorResetBoundary:e,throwOnError:t,query:i})=>n.isError&&!e.isReset()&&!n.isFetching&&i&&Tle(t,[n.error,i]),dLe=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},uLe=(n,e)=>n.isLoading&&n.isFetching&&!e,hLe=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,zX=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function fLe(n,e,t){var d,u,h,f,m;const i=L$(),s=nLe(),o=rLe(),r=i.defaultQueryOptions(n);(u=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||u.call(d,r),r._optimisticResults=s?"isRestoring":"optimistic",dLe(r),aLe(r,o),lLe(o);const a=!i.getQueryCache().get(r.queryHash),[l]=L.useState(()=>new e(i,r)),c=l.getOptimisticResult(r);if(L.useSyncExternalStore(L.useCallback(p=>{const b=s?S9:l.subscribe(js.batchCalls(p));return l.updateResult(),b},[l,s]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),L.useEffect(()=>{l.setOptions(r,{listeners:!1})},[r,l]),hLe(r,c))throw zX(r,l,o);if(cLe({result:c,errorResetBoundary:o,throwOnError:r.throwOnError,query:i.getQueryCache().get(r.queryHash)}))throw c.error;if((f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||f.call(h,r,c),r.experimental_prefetchInRender&&!sv&&uLe(c,s)){const p=a?zX(r,l,o):(m=i.getQueryCache().get(r.queryHash))==null?void 0:m.promise;p==null||p.catch(S9).finally(()=>{l.updateResult()})}return r.notifyOnChangeProps?c:l.trackResult(c)}function TR(n,e){return fLe(n,Jxe)}function Dx(n,e){const t=L$(),[i]=L.useState(()=>new iLe(t,n));L.useEffect(()=>{i.setOptions(n)},[i,n]);const s=L.useSyncExternalStore(L.useCallback(r=>i.subscribe(js.batchCalls(r)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),o=L.useCallback((r,a)=>{i.mutate(r,a).catch(S9)},[i]);if(s.error&&Tle(i.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}async function Rle(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}async function sy(n,e,t){const i=await fetch(e,{method:n,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});return await Rle(i),i}const ek=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e[0],{credentials:"include"});return n==="returnNull"&&t.status===401?null:(await Rle(t),await t.json())},oy=new Qxe({defaultOptions:{queries:{queryFn:ek({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),Mle=L.createContext(null);function gLe({children:n}){const{toast:e}=Aa(),{data:t,error:i,isLoading:s}=TR({queryKey:["/api/user"],queryFn:ek({on401:"returnNull"})}),o=Dx({mutationFn:async l=>await(await sy("POST","/api/login",l)).json(),onSuccess:l=>{oy.setQueryData(["/api/user"],l),e({title:"Login successful",description:`Welcome back, ${l.username}!`})},onError:l=>{e({title:"Login failed",description:l.message,variant:"destructive"})}}),r=Dx({mutationFn:async l=>await(await sy("POST","/api/register",l)).json(),onSuccess:l=>{oy.setQueryData(["/api/user"],l),e({title:"Registration successful",description:`Welcome to the Minecraft Modding Platform, ${l.username}!`})},onError:l=>{e({title:"Registration failed",description:l.message,variant:"destructive"})}}),a=Dx({mutationFn:async()=>{await sy("POST","/api/logout")},onSuccess:()=>{oy.setQueryData(["/api/user"],null),e({title:"Logged out",description:"You have been logged out successfully"})},onError:l=>{e({title:"Logout failed",description:l.message,variant:"destructive"})}});return g.jsx(Mle.Provider,{value:{user:t||null,isLoading:s,error:i,loginMutation:o,logoutMutation:a,registerMutation:r},children:n})}function e4(){const n=L.useContext(Mle);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}function UX({path:n,component:e}){const{user:t,isLoading:i}=e4();return g.jsx(c9,{path:n,children:i?g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsx(Qi,{className:"h-8 w-8 animate-spin text-primary"})}):t?g.jsx(e,{}):g.jsx(_le,{to:"/auth"})})}const mC=[{id:"plains",name:"Plains",description:"Grassy plains with gentle hills and scattered oak trees",colors:{primary:"#7fb238",secondary:"#55813b",accent:"#f9d354",text:"#ffffff",background:"#8ab971",backgroundGradient:"linear-gradient(to bottom, #7ab317 0%, #8ab971 100%)"}},{id:"forest",name:"Forest",description:"Dense forest with oak and birch trees",colors:{primary:"#2d5d34",secondary:"#1a331e",accent:"#a0522d",text:"#ffffff",background:"#2d4a12",backgroundGradient:"linear-gradient(to bottom, #1e3b0a 0%, #2d5d34 100%)"}},{id:"desert",name:"Desert",description:"Vast sand dunes with occasional cacti and dead bushes",colors:{primary:"#e9d9a8",secondary:"#d6b75e",accent:"#a67c52",text:"#1e1e1e",background:"#f9d49c",backgroundGradient:"linear-gradient(to bottom, #f9d49c 0%, #e9be7c 100%)"}},{id:"mountains",name:"Mountains",description:"Towering mountain peaks with snow caps and rugged terrain",colors:{primary:"#686e70",secondary:"#3b4042",accent:"#e3e3e3",text:"#ffffff",background:"#525a5b",backgroundGradient:"linear-gradient(to bottom, #3b4042, #686e70 60%, #a9c7d9 95%, #e3e3e3)"}},{id:"nether",name:"Nether",description:"Hellish dimension with lava, netherrack, and dangerous terrain",colors:{primary:"#7d2b20",secondary:"#4c150f",accent:"#e38e0d",text:"#ffffff",background:"#341d18",backgroundGradient:"linear-gradient(to bottom, #341d18 0%, #7d2b20 70%, #c64122 100%)"}},{id:"end",name:"The End",description:"Mysterious void dimension with end stone and chorus plants",colors:{primary:"#e0d7a8",secondary:"#2c1e54",accent:"#bd7bc7",text:"#ffffff",background:"#1a1424",backgroundGradient:"linear-gradient(to bottom, #0d0a14 0%, #1a1424 50%, #2c1e54 100%)"}},{id:"ocean",name:"Ocean",description:"Deep underwater world with diverse marine life",colors:{primary:"#276387",secondary:"#1a3d5c",accent:"#43b5e5",text:"#ffffff",background:"#0a4a7a",backgroundGradient:"linear-gradient(to bottom, #0a4a7a 0%, #276387 100%)"}},{id:"jungle",name:"Jungle",description:"Dense, lush rainforest with exotic plants and animals",colors:{primary:"#2b8031",secondary:"#145725",accent:"#ffc83d",text:"#ffffff",background:"#175f27",backgroundGradient:"linear-gradient(to bottom, #0e3b18 0%, #175f27 60%, #2b8031 100%)"}}];function $X(){const n=Math.floor(Math.random()*mC.length);return mC[n]}function $5(n){return mC.find(e=>e.id===n)}const Ple=mC[0],Ale=L.createContext({currentTheme:Ple,setTheme:()=>{},randomizeTheme:()=>{},availableThemes:mC}),KX="minecraft_modding_theme";function mLe({children:n,initialThemeId:e}){const t=()=>{try{const a=localStorage.getItem(KX);if(a){const l=$5(a);if(l)return l}if(e){const l=$5(e);if(l)return l}}catch(a){console.warn("Error accessing localStorage:",a)}return $X()},[i,s]=L.useState(t());L.useEffect(()=>{try{localStorage.setItem(KX,i.id)}catch(a){console.warn("Error writing to localStorage:",a)}document.body.style.background=i.colors.backgroundGradient,document.body.style.color=i.colors.text,document.documentElement.style.setProperty("--theme-primary",i.colors.primary),document.documentElement.style.setProperty("--theme-secondary",i.colors.secondary),document.documentElement.style.setProperty("--theme-accent",i.colors.accent),document.documentElement.style.setProperty("--theme-background",i.colors.background),document.body.className=`theme-${i.id}`},[i]);const o=a=>{if(typeof a=="string"){const l=$5(a);l?s(l):(console.warn(`Theme with ID "${a}" not found, using default`),s(Ple))}else s(a)},r=()=>{let a;do a=$X();while(a.id===i.id);s(a)};return g.jsx(Ale.Provider,{value:{currentTheme:i,setTheme:o,randomizeTheme:r,availableThemes:mC},children:n})}function fI(){const n=L.useContext(Ale);if(n===void 0)throw new Error("useBiomeTheme must be used within a BiomeThemeProvider");return n}function Wc({opacity:n=.05,className:e="",isFixed:t=!0}){return fI(),g.jsx("div",{className:`texture-overlay pointer-events-none ${t?"fixed inset-0":"absolute inset-0"} z-0 ${e}`,style:{opacity:n,backgroundRepeat:"repeat",mixBlendMode:"overlay"},"aria-hidden":"true"})}const pLe=YO("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Se=L.forwardRef(({className:n,variant:e,size:t,asChild:i=!1,...s},o)=>{const r=i?r1e:"button";return g.jsx(r,{className:Yt(pLe({variant:e,size:t,className:n})),ref:o,...s})});Se.displayName="Button";const Bt=L.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Yt("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Bt.displayName="Card";const Mg=L.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Yt("flex flex-col space-y-1.5 p-6",n),...e}));Mg.displayName="CardHeader";const Pg=L.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Yt("text-2xl font-semibold leading-none tracking-tight",n),...e}));Pg.displayName="CardTitle";const Ag=L.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Yt("text-sm text-muted-foreground",n),...e}));Ag.displayName="CardDescription";const Og=L.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Yt("p-6 pt-0",n),...e}));Og.displayName="CardContent";const C_=L.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Yt("flex items-center p-6 pt-0",n),...e}));C_.displayName="CardFooter";var Pi;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const o={};for(const r of s)o[r]=r;return o},n.getValidEnumValues=s=>{const o=n.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),r={};for(const a of o)r[a]=s[a];return n.objectValues(r)},n.objectValues=s=>n.objectKeys(s).map(function(o){return s[o]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&o.push(r);return o},n.find=(s,o)=>{for(const r of s)if(o(r))return r},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function i(s,o=" | "){return s.map(r=>typeof r=="string"?`'${r}'`:r).join(o)}n.joinValues=i,n.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(Pi||(Pi={}));var x9;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(x9||(x9={}));const ot=Pi.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),bh=n=>{switch(typeof n){case"undefined":return ot.undefined;case"string":return ot.string;case"number":return isNaN(n)?ot.nan:ot.number;case"boolean":return ot.boolean;case"function":return ot.function;case"bigint":return ot.bigint;case"symbol":return ot.symbol;case"object":return Array.isArray(n)?ot.array:n===null?ot.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ot.promise:typeof Map<"u"&&n instanceof Map?ot.map:typeof Set<"u"&&n instanceof Set?ot.set:typeof Date<"u"&&n instanceof Date?ot.date:ot.object;default:return ot.unknown}},Oe=Pi.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),_Le=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class ol extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(o){return o.message},i={_errors:[]},s=o=>{for(const r of o.issues)if(r.code==="invalid_union")r.unionErrors.map(s);else if(r.code==="invalid_return_type")s(r.returnTypeError);else if(r.code==="invalid_arguments")s(r.argumentsError);else if(r.path.length===0)i._errors.push(t(r));else{let a=i,l=0;for(;l<r.path.length;){const c=r.path[l];l===r.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(r))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),i}static assert(e){if(!(e instanceof ol))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Pi.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},i=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):i.push(e(s));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}ol.create=n=>new ol(n);const pC=(n,e)=>{let t;switch(n.code){case Oe.invalid_type:n.received===ot.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case Oe.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Pi.jsonStringifyReplacer)}`;break;case Oe.unrecognized_keys:t=`Unrecognized key(s) in object: ${Pi.joinValues(n.keys,", ")}`;break;case Oe.invalid_union:t="Invalid input";break;case Oe.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Pi.joinValues(n.options)}`;break;case Oe.invalid_enum_value:t=`Invalid enum value. Expected ${Pi.joinValues(n.options)}, received '${n.received}'`;break;case Oe.invalid_arguments:t="Invalid function arguments";break;case Oe.invalid_return_type:t="Invalid function return type";break;case Oe.invalid_date:t="Invalid date";break;case Oe.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Pi.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case Oe.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case Oe.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case Oe.custom:t="Invalid input";break;case Oe.invalid_intersection_types:t="Intersection results could not be merged";break;case Oe.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case Oe.not_finite:t="Number must be finite";break;default:t=e.defaultError,Pi.assertNever(n)}return{message:t}};let Ole=pC;function bLe(n){Ole=n}function RR(){return Ole}const MR=n=>{const{data:e,path:t,errorMaps:i,issueData:s}=n,o=[...t,...s.path||[]],r={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(r,{data:e,defaultError:a}).message;return{...s,path:o,message:a}},vLe=[];function Qe(n,e){const t=RR(),i=MR({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===pC?void 0:pC].filter(s=>!!s)});n.common.issues.push(i)}class or{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const s of t){if(s.status==="aborted")return qt;s.status==="dirty"&&e.dirty(),i.push(s.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const s of t){const o=await s.key,r=await s.value;i.push({key:o,value:r})}return or.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const s of t){const{key:o,value:r}=s;if(o.status==="aborted"||r.status==="aborted")return qt;o.status==="dirty"&&e.dirty(),r.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof r.value<"u"||s.alwaysSet)&&(i[o.value]=r.value)}return{status:e.value,value:i}}}const qt=Object.freeze({status:"aborted"}),rw=n=>({status:"dirty",value:n}),Vr=n=>({status:"valid",value:n}),L9=n=>n.status==="aborted",k9=n=>n.status==="dirty",rv=n=>n.status==="valid",tk=n=>typeof Promise<"u"&&n instanceof Promise;function PR(n,e,t,i){if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function Fle(n,e,t,i,s){if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var bt;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(bt||(bt={}));var $S,KS;class vu{constructor(e,t,i,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const qX=(n,e)=>{if(rv(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ol(n.common.issues);return this._error=t,this._error}}};function si(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:i,description:s}=n;if(e&&(t||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(r,a)=>{var l,c;const{message:d}=n;return r.code==="invalid_enum_value"?{message:d??a.defaultError}:typeof a.data>"u"?{message:(l=d??i)!==null&&l!==void 0?l:a.defaultError}:r.code!=="invalid_type"?{message:a.defaultError}:{message:(c=d??t)!==null&&c!==void 0?c:a.defaultError}},description:s}}class di{get description(){return this._def.description}_getType(e){return bh(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:bh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new or,ctx:{common:e.parent.common,data:e.data,parsedType:bh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(tk(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){var i;const s={common:{issues:[],async:(i=t==null?void 0:t.async)!==null&&i!==void 0?i:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bh(e)},o=this._parseSync({data:e,path:s.path,parent:s});return qX(s,o)}"~validate"(e){var t,i;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bh(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:s});return rv(o)?{value:o.value}:{issues:s.common.issues}}catch(o){!((i=(t=o==null?void 0:o.message)===null||t===void 0?void 0:t.toLowerCase())===null||i===void 0)&&i.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(o=>rv(o)?{value:o.value}:{issues:s.common.issues})}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bh(e)},s=this._parse({data:e,path:i.path,parent:i}),o=await(tk(s)?s:Promise.resolve(s));return qX(i,o)}refine(e,t){const i=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,o)=>{const r=e(s),a=()=>o.addIssue({code:Oe.custom,...i(s)});return typeof Promise<"u"&&r instanceof Promise?r.then(l=>l?!0:(a(),!1)):r?!0:(a(),!1)})}refinement(e,t){return this._refinement((i,s)=>e(i)?!0:(s.addIssue(typeof t=="function"?t(i,s):t),!1))}_refinement(e){return new nd({schema:this,typeName:Kt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return fu.create(this,this._def)}nullable(){return Om.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Kc.create(this)}promise(){return bC.create(this,this._def)}or(e){return ok.create([this,e],this._def)}and(e){return rk.create(this,e,this._def)}transform(e){return new nd({...si(this._def),schema:this,typeName:Kt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new uk({...si(this._def),innerType:this,defaultValue:t,typeName:Kt.ZodDefault})}brand(){return new k$({typeName:Kt.ZodBranded,type:this,...si(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new hk({...si(this._def),innerType:this,catchValue:t,typeName:Kt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return gI.create(this,e)}readonly(){return fk.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const wLe=/^c[^\s-]{8,}$/i,yLe=/^[0-9a-z]+$/,CLe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,SLe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,xLe=/^[a-z0-9_-]{21}$/i,LLe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,kLe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,NLe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ILe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let K5;const ELe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,DLe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,TLe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,RLe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,MLe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,PLe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ble="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ALe=new RegExp(`^${Ble}$`);function Wle(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function OLe(n){return new RegExp(`^${Wle(n)}$`)}function Hle(n){let e=`${Ble}T${Wle(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function FLe(n,e){return!!((e==="v4"||!e)&&ELe.test(n)||(e==="v6"||!e)&&TLe.test(n))}function BLe(n,e){if(!LLe.test(n))return!1;try{const[t]=n.split("."),i=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(i));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function WLe(n,e){return!!((e==="v4"||!e)&&DLe.test(n)||(e==="v6"||!e)&&RLe.test(n))}class Hc extends di{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ot.string){const o=this._getOrReturnCtx(e);return Qe(o,{code:Oe.invalid_type,expected:ot.string,received:o.parsedType}),qt}const i=new or;let s;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),Qe(s,{code:Oe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),i.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),Qe(s,{code:Oe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),i.dirty());else if(o.kind==="length"){const r=e.data.length>o.value,a=e.data.length<o.value;(r||a)&&(s=this._getOrReturnCtx(e,s),r?Qe(s,{code:Oe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&Qe(s,{code:Oe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),i.dirty())}else if(o.kind==="email")NLe.test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"email",code:Oe.invalid_string,message:o.message}),i.dirty());else if(o.kind==="emoji")K5||(K5=new RegExp(ILe,"u")),K5.test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"emoji",code:Oe.invalid_string,message:o.message}),i.dirty());else if(o.kind==="uuid")SLe.test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"uuid",code:Oe.invalid_string,message:o.message}),i.dirty());else if(o.kind==="nanoid")xLe.test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"nanoid",code:Oe.invalid_string,message:o.message}),i.dirty());else if(o.kind==="cuid")wLe.test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"cuid",code:Oe.invalid_string,message:o.message}),i.dirty());else if(o.kind==="cuid2")yLe.test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"cuid2",code:Oe.invalid_string,message:o.message}),i.dirty());else if(o.kind==="ulid")CLe.test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"ulid",code:Oe.invalid_string,message:o.message}),i.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Qe(s,{validation:"url",code:Oe.invalid_string,message:o.message}),i.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"regex",code:Oe.invalid_string,message:o.message}),i.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),Qe(s,{code:Oe.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),i.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),Qe(s,{code:Oe.invalid_string,validation:{startsWith:o.value},message:o.message}),i.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),Qe(s,{code:Oe.invalid_string,validation:{endsWith:o.value},message:o.message}),i.dirty()):o.kind==="datetime"?Hle(o).test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{code:Oe.invalid_string,validation:"datetime",message:o.message}),i.dirty()):o.kind==="date"?ALe.test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{code:Oe.invalid_string,validation:"date",message:o.message}),i.dirty()):o.kind==="time"?OLe(o).test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{code:Oe.invalid_string,validation:"time",message:o.message}),i.dirty()):o.kind==="duration"?kLe.test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"duration",code:Oe.invalid_string,message:o.message}),i.dirty()):o.kind==="ip"?FLe(e.data,o.version)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"ip",code:Oe.invalid_string,message:o.message}),i.dirty()):o.kind==="jwt"?BLe(e.data,o.alg)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"jwt",code:Oe.invalid_string,message:o.message}),i.dirty()):o.kind==="cidr"?WLe(e.data,o.version)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"cidr",code:Oe.invalid_string,message:o.message}),i.dirty()):o.kind==="base64"?MLe.test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"base64",code:Oe.invalid_string,message:o.message}),i.dirty()):o.kind==="base64url"?PLe.test(e.data)||(s=this._getOrReturnCtx(e,s),Qe(s,{validation:"base64url",code:Oe.invalid_string,message:o.message}),i.dirty()):Pi.assertNever(o);return{status:i.value,value:e.data}}_regex(e,t,i){return this.refinement(s=>e.test(s),{validation:t,code:Oe.invalid_string,...bt.errToObj(i)})}_addCheck(e){return new Hc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...bt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...bt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...bt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...bt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...bt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...bt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...bt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...bt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...bt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...bt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...bt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...bt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...bt.errToObj(e)})}datetime(e){var t,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(i=e==null?void 0:e.local)!==null&&i!==void 0?i:!1,...bt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...bt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...bt.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...bt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...bt.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...bt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...bt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...bt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...bt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...bt.errToObj(t)})}nonempty(e){return this.min(1,bt.errToObj(e))}trim(){return new Hc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Hc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Hc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Hc.create=n=>{var e;return new Hc({checks:[],typeName:Kt.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...si(n)})};function HLe(n,e){const t=(n.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,s=t>i?t:i,o=parseInt(n.toFixed(s).replace(".","")),r=parseInt(e.toFixed(s).replace(".",""));return o%r/Math.pow(10,s)}class Mm extends di{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ot.number){const o=this._getOrReturnCtx(e);return Qe(o,{code:Oe.invalid_type,expected:ot.number,received:o.parsedType}),qt}let i;const s=new or;for(const o of this._def.checks)o.kind==="int"?Pi.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{code:Oe.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(i=this._getOrReturnCtx(e,i),Qe(i,{code:Oe.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(i=this._getOrReturnCtx(e,i),Qe(i,{code:Oe.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?HLe(e.data,o.value)!==0&&(i=this._getOrReturnCtx(e,i),Qe(i,{code:Oe.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),Qe(i,{code:Oe.not_finite,message:o.message}),s.dirty()):Pi.assertNever(o);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,bt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,bt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,bt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,bt.toString(t))}setLimit(e,t,i,s){return new Mm({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:bt.toString(s)}]})}_addCheck(e){return new Mm({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:bt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:bt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:bt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:bt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:bt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:bt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:bt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:bt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:bt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Pi.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(t===null||i.value>t)&&(t=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Mm.create=n=>new Mm({checks:[],typeName:Kt.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...si(n)});class Pm extends di{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ot.bigint)return this._getInvalidInput(e);let i;const s=new or;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(i=this._getOrReturnCtx(e,i),Qe(i,{code:Oe.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(i=this._getOrReturnCtx(e,i),Qe(i,{code:Oe.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),Qe(i,{code:Oe.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):Pi.assertNever(o);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Qe(t,{code:Oe.invalid_type,expected:ot.bigint,received:t.parsedType}),qt}gte(e,t){return this.setLimit("min",e,!0,bt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,bt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,bt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,bt.toString(t))}setLimit(e,t,i,s){return new Pm({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:bt.toString(s)}]})}_addCheck(e){return new Pm({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:bt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:bt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:bt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:bt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:bt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Pm.create=n=>{var e;return new Pm({checks:[],typeName:Kt.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...si(n)})};class ik extends di{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ot.boolean){const i=this._getOrReturnCtx(e);return Qe(i,{code:Oe.invalid_type,expected:ot.boolean,received:i.parsedType}),qt}return Vr(e.data)}}ik.create=n=>new ik({typeName:Kt.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...si(n)});class av extends di{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ot.date){const o=this._getOrReturnCtx(e);return Qe(o,{code:Oe.invalid_type,expected:ot.date,received:o.parsedType}),qt}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return Qe(o,{code:Oe.invalid_date}),qt}const i=new or;let s;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),Qe(s,{code:Oe.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),i.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),Qe(s,{code:Oe.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),i.dirty()):Pi.assertNever(o);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new av({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:bt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:bt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}av.create=n=>new av({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:Kt.ZodDate,...si(n)});class AR extends di{_parse(e){if(this._getType(e)!==ot.symbol){const i=this._getOrReturnCtx(e);return Qe(i,{code:Oe.invalid_type,expected:ot.symbol,received:i.parsedType}),qt}return Vr(e.data)}}AR.create=n=>new AR({typeName:Kt.ZodSymbol,...si(n)});class nk extends di{_parse(e){if(this._getType(e)!==ot.undefined){const i=this._getOrReturnCtx(e);return Qe(i,{code:Oe.invalid_type,expected:ot.undefined,received:i.parsedType}),qt}return Vr(e.data)}}nk.create=n=>new nk({typeName:Kt.ZodUndefined,...si(n)});class sk extends di{_parse(e){if(this._getType(e)!==ot.null){const i=this._getOrReturnCtx(e);return Qe(i,{code:Oe.invalid_type,expected:ot.null,received:i.parsedType}),qt}return Vr(e.data)}}sk.create=n=>new sk({typeName:Kt.ZodNull,...si(n)});class _C extends di{constructor(){super(...arguments),this._any=!0}_parse(e){return Vr(e.data)}}_C.create=n=>new _C({typeName:Kt.ZodAny,...si(n)});class H_ extends di{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Vr(e.data)}}H_.create=n=>new H_({typeName:Kt.ZodUnknown,...si(n)});class lf extends di{_parse(e){const t=this._getOrReturnCtx(e);return Qe(t,{code:Oe.invalid_type,expected:ot.never,received:t.parsedType}),qt}}lf.create=n=>new lf({typeName:Kt.ZodNever,...si(n)});class OR extends di{_parse(e){if(this._getType(e)!==ot.undefined){const i=this._getOrReturnCtx(e);return Qe(i,{code:Oe.invalid_type,expected:ot.void,received:i.parsedType}),qt}return Vr(e.data)}}OR.create=n=>new OR({typeName:Kt.ZodVoid,...si(n)});class Kc extends di{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),s=this._def;if(t.parsedType!==ot.array)return Qe(t,{code:Oe.invalid_type,expected:ot.array,received:t.parsedType}),qt;if(s.exactLength!==null){const r=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(r||a)&&(Qe(t,{code:r?Oe.too_big:Oe.too_small,minimum:a?s.exactLength.value:void 0,maximum:r?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),i.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(Qe(t,{code:Oe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),i.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(Qe(t,{code:Oe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map((r,a)=>s.type._parseAsync(new vu(t,r,t.path,a)))).then(r=>or.mergeArray(i,r));const o=[...t.data].map((r,a)=>s.type._parseSync(new vu(t,r,t.path,a)));return or.mergeArray(i,o)}get element(){return this._def.type}min(e,t){return new Kc({...this._def,minLength:{value:e,message:bt.toString(t)}})}max(e,t){return new Kc({...this._def,maxLength:{value:e,message:bt.toString(t)}})}length(e,t){return new Kc({...this._def,exactLength:{value:e,message:bt.toString(t)}})}nonempty(e){return this.min(1,e)}}Kc.create=(n,e)=>new Kc({type:n,minLength:null,maxLength:null,exactLength:null,typeName:Kt.ZodArray,...si(e)});function H0(n){if(n instanceof Un){const e={};for(const t in n.shape){const i=n.shape[t];e[t]=fu.create(H0(i))}return new Un({...n._def,shape:()=>e})}else return n instanceof Kc?new Kc({...n._def,type:H0(n.element)}):n instanceof fu?fu.create(H0(n.unwrap())):n instanceof Om?Om.create(H0(n.unwrap())):n instanceof wu?wu.create(n.items.map(e=>H0(e))):n}class Un extends di{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Pi.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==ot.object){const c=this._getOrReturnCtx(e);return Qe(c,{code:Oe.invalid_type,expected:ot.object,received:c.parsedType}),qt}const{status:i,ctx:s}=this._processInputParams(e),{shape:o,keys:r}=this._getCached(),a=[];if(!(this._def.catchall instanceof lf&&this._def.unknownKeys==="strip"))for(const c in s.data)r.includes(c)||a.push(c);const l=[];for(const c of r){const d=o[c],u=s.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new vu(s,u,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof lf){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of a)l.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(c==="strict")a.length>0&&(Qe(s,{code:Oe.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of a){const u=s.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new vu(s,u,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of l){const u=await d.key,h=await d.value;c.push({key:u,value:h,alwaysSet:d.alwaysSet})}return c}).then(c=>or.mergeObjectSync(i,c)):or.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return bt.errToObj,new Un({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,i)=>{var s,o,r,a;const l=(r=(o=(s=this._def).errorMap)===null||o===void 0?void 0:o.call(s,t,i).message)!==null&&r!==void 0?r:i.defaultError;return t.code==="unrecognized_keys"?{message:(a=bt.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Un({...this._def,unknownKeys:"strip"})}passthrough(){return new Un({...this._def,unknownKeys:"passthrough"})}extend(e){return new Un({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Un({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Kt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Un({...this._def,catchall:e})}pick(e){const t={};return Pi.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(t[i]=this.shape[i])}),new Un({...this._def,shape:()=>t})}omit(e){const t={};return Pi.objectKeys(this.shape).forEach(i=>{e[i]||(t[i]=this.shape[i])}),new Un({...this._def,shape:()=>t})}deepPartial(){return H0(this)}partial(e){const t={};return Pi.objectKeys(this.shape).forEach(i=>{const s=this.shape[i];e&&!e[i]?t[i]=s:t[i]=s.optional()}),new Un({...this._def,shape:()=>t})}required(e){const t={};return Pi.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])t[i]=this.shape[i];else{let o=this.shape[i];for(;o instanceof fu;)o=o._def.innerType;t[i]=o}}),new Un({...this._def,shape:()=>t})}keyof(){return Vle(Pi.objectKeys(this.shape))}}Un.create=(n,e)=>new Un({shape:()=>n,unknownKeys:"strip",catchall:lf.create(),typeName:Kt.ZodObject,...si(e)});Un.strictCreate=(n,e)=>new Un({shape:()=>n,unknownKeys:"strict",catchall:lf.create(),typeName:Kt.ZodObject,...si(e)});Un.lazycreate=(n,e)=>new Un({shape:n,unknownKeys:"strip",catchall:lf.create(),typeName:Kt.ZodObject,...si(e)});class ok extends di{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;function s(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const r=o.map(a=>new ol(a.ctx.common.issues));return Qe(t,{code:Oe.invalid_union,unionErrors:r}),qt}if(t.common.async)return Promise.all(i.map(async o=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await o._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(s);{let o;const r=[];for(const l of i){const c={...t,common:{...t.common,issues:[]},parent:null},d=l._parseSync({data:t.data,path:t.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:c}),c.common.issues.length&&r.push(c.common.issues)}if(o)return t.common.issues.push(...o.ctx.common.issues),o.result;const a=r.map(l=>new ol(l));return Qe(t,{code:Oe.invalid_union,unionErrors:a}),qt}}get options(){return this._def.options}}ok.create=(n,e)=>new ok({options:n,typeName:Kt.ZodUnion,...si(e)});const ih=n=>n instanceof lk?ih(n.schema):n instanceof nd?ih(n.innerType()):n instanceof ck?[n.value]:n instanceof Am?n.options:n instanceof dk?Pi.objectValues(n.enum):n instanceof uk?ih(n._def.innerType):n instanceof nk?[void 0]:n instanceof sk?[null]:n instanceof fu?[void 0,...ih(n.unwrap())]:n instanceof Om?[null,...ih(n.unwrap())]:n instanceof k$||n instanceof fk?ih(n.unwrap()):n instanceof hk?ih(n._def.innerType):[];class t4 extends di{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ot.object)return Qe(t,{code:Oe.invalid_type,expected:ot.object,received:t.parsedType}),qt;const i=this.discriminator,s=t.data[i],o=this.optionsMap.get(s);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(Qe(t,{code:Oe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),qt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,i){const s=new Map;for(const o of t){const r=ih(o.shape[e]);if(!r.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of r){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,o)}}return new t4({typeName:Kt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...si(i)})}}function N9(n,e){const t=bh(n),i=bh(e);if(n===e)return{valid:!0,data:n};if(t===ot.object&&i===ot.object){const s=Pi.objectKeys(e),o=Pi.objectKeys(n).filter(a=>s.indexOf(a)!==-1),r={...n,...e};for(const a of o){const l=N9(n[a],e[a]);if(!l.valid)return{valid:!1};r[a]=l.data}return{valid:!0,data:r}}else if(t===ot.array&&i===ot.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let o=0;o<n.length;o++){const r=n[o],a=e[o],l=N9(r,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return t===ot.date&&i===ot.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class rk extends di{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),s=(o,r)=>{if(L9(o)||L9(r))return qt;const a=N9(o.value,r.value);return a.valid?((k9(o)||k9(r))&&t.dirty(),{status:t.value,value:a.data}):(Qe(i,{code:Oe.invalid_intersection_types}),qt)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([o,r])=>s(o,r)):s(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}rk.create=(n,e,t)=>new rk({left:n,right:e,typeName:Kt.ZodIntersection,...si(t)});class wu extends di{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==ot.array)return Qe(i,{code:Oe.invalid_type,expected:ot.array,received:i.parsedType}),qt;if(i.data.length<this._def.items.length)return Qe(i,{code:Oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),qt;!this._def.rest&&i.data.length>this._def.items.length&&(Qe(i,{code:Oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const o=[...i.data].map((r,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new vu(i,r,i.path,a)):null}).filter(r=>!!r);return i.common.async?Promise.all(o).then(r=>or.mergeArray(t,r)):or.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new wu({...this._def,rest:e})}}wu.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new wu({items:n,typeName:Kt.ZodTuple,rest:null,...si(e)})};class ak extends di{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==ot.object)return Qe(i,{code:Oe.invalid_type,expected:ot.object,received:i.parsedType}),qt;const s=[],o=this._def.keyType,r=this._def.valueType;for(const a in i.data)s.push({key:o._parse(new vu(i,a,i.path,a)),value:r._parse(new vu(i,i.data[a],i.path,a)),alwaysSet:a in i.data});return i.common.async?or.mergeObjectAsync(t,s):or.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,i){return t instanceof di?new ak({keyType:e,valueType:t,typeName:Kt.ZodRecord,...si(i)}):new ak({keyType:Hc.create(),valueType:e,typeName:Kt.ZodRecord,...si(t)})}}class FR extends di{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==ot.map)return Qe(i,{code:Oe.invalid_type,expected:ot.map,received:i.parsedType}),qt;const s=this._def.keyType,o=this._def.valueType,r=[...i.data.entries()].map(([a,l],c)=>({key:s._parse(new vu(i,a,i.path,[c,"key"])),value:o._parse(new vu(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of r){const c=await l.key,d=await l.value;if(c.status==="aborted"||d.status==="aborted")return qt;(c.status==="dirty"||d.status==="dirty")&&t.dirty(),a.set(c.value,d.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of r){const c=l.key,d=l.value;if(c.status==="aborted"||d.status==="aborted")return qt;(c.status==="dirty"||d.status==="dirty")&&t.dirty(),a.set(c.value,d.value)}return{status:t.value,value:a}}}}FR.create=(n,e,t)=>new FR({valueType:e,keyType:n,typeName:Kt.ZodMap,...si(t)});class lv extends di{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==ot.set)return Qe(i,{code:Oe.invalid_type,expected:ot.set,received:i.parsedType}),qt;const s=this._def;s.minSize!==null&&i.data.size<s.minSize.value&&(Qe(i,{code:Oe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&i.data.size>s.maxSize.value&&(Qe(i,{code:Oe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const o=this._def.valueType;function r(l){const c=new Set;for(const d of l){if(d.status==="aborted")return qt;d.status==="dirty"&&t.dirty(),c.add(d.value)}return{status:t.value,value:c}}const a=[...i.data.values()].map((l,c)=>o._parse(new vu(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>r(l)):r(a)}min(e,t){return new lv({...this._def,minSize:{value:e,message:bt.toString(t)}})}max(e,t){return new lv({...this._def,maxSize:{value:e,message:bt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}lv.create=(n,e)=>new lv({valueType:n,minSize:null,maxSize:null,typeName:Kt.ZodSet,...si(e)});class ry extends di{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ot.function)return Qe(t,{code:Oe.invalid_type,expected:ot.function,received:t.parsedType}),qt;function i(a,l){return MR({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,RR(),pC].filter(c=>!!c),issueData:{code:Oe.invalid_arguments,argumentsError:l}})}function s(a,l){return MR({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,RR(),pC].filter(c=>!!c),issueData:{code:Oe.invalid_return_type,returnTypeError:l}})}const o={errorMap:t.common.contextualErrorMap},r=t.data;if(this._def.returns instanceof bC){const a=this;return Vr(async function(...l){const c=new ol([]),d=await a._def.args.parseAsync(l,o).catch(f=>{throw c.addIssue(i(l,f)),c}),u=await Reflect.apply(r,this,d);return await a._def.returns._def.type.parseAsync(u,o).catch(f=>{throw c.addIssue(s(u,f)),c})})}else{const a=this;return Vr(function(...l){const c=a._def.args.safeParse(l,o);if(!c.success)throw new ol([i(l,c.error)]);const d=Reflect.apply(r,this,c.data),u=a._def.returns.safeParse(d,o);if(!u.success)throw new ol([s(d,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ry({...this._def,args:wu.create(e).rest(H_.create())})}returns(e){return new ry({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,i){return new ry({args:e||wu.create([]).rest(H_.create()),returns:t||H_.create(),typeName:Kt.ZodFunction,...si(i)})}}class lk extends di{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}lk.create=(n,e)=>new lk({getter:n,typeName:Kt.ZodLazy,...si(e)});class ck extends di{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Qe(t,{received:t.data,code:Oe.invalid_literal,expected:this._def.value}),qt}return{status:"valid",value:e.data}}get value(){return this._def.value}}ck.create=(n,e)=>new ck({value:n,typeName:Kt.ZodLiteral,...si(e)});function Vle(n,e){return new Am({values:n,typeName:Kt.ZodEnum,...si(e)})}class Am extends di{constructor(){super(...arguments),$S.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),i=this._def.values;return Qe(t,{expected:Pi.joinValues(i),received:t.parsedType,code:Oe.invalid_type}),qt}if(PR(this,$S)||Fle(this,$S,new Set(this._def.values)),!PR(this,$S).has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return Qe(t,{received:t.data,code:Oe.invalid_enum_value,options:i}),qt}return Vr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Am.create(e,{...this._def,...t})}exclude(e,t=this._def){return Am.create(this.options.filter(i=>!e.includes(i)),{...this._def,...t})}}$S=new WeakMap;Am.create=Vle;class dk extends di{constructor(){super(...arguments),KS.set(this,void 0)}_parse(e){const t=Pi.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==ot.string&&i.parsedType!==ot.number){const s=Pi.objectValues(t);return Qe(i,{expected:Pi.joinValues(s),received:i.parsedType,code:Oe.invalid_type}),qt}if(PR(this,KS)||Fle(this,KS,new Set(Pi.getValidEnumValues(this._def.values))),!PR(this,KS).has(e.data)){const s=Pi.objectValues(t);return Qe(i,{received:i.data,code:Oe.invalid_enum_value,options:s}),qt}return Vr(e.data)}get enum(){return this._def.values}}KS=new WeakMap;dk.create=(n,e)=>new dk({values:n,typeName:Kt.ZodNativeEnum,...si(e)});class bC extends di{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ot.promise&&t.common.async===!1)return Qe(t,{code:Oe.invalid_type,expected:ot.promise,received:t.parsedType}),qt;const i=t.parsedType===ot.promise?t.data:Promise.resolve(t.data);return Vr(i.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}bC.create=(n,e)=>new bC({type:n,typeName:Kt.ZodPromise,...si(e)});class nd extends di{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Kt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:r=>{Qe(i,r),r.fatal?t.abort():t.dirty()},get path(){return i.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const r=s.transform(i.data,o);if(i.common.async)return Promise.resolve(r).then(async a=>{if(t.value==="aborted")return qt;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?qt:l.status==="dirty"||t.value==="dirty"?rw(l.value):l});{if(t.value==="aborted")return qt;const a=this._def.schema._parseSync({data:r,path:i.path,parent:i});return a.status==="aborted"?qt:a.status==="dirty"||t.value==="dirty"?rw(a.value):a}}if(s.type==="refinement"){const r=a=>{const l=s.refinement(a,o);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?qt:(a.status==="dirty"&&t.dirty(),r(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?qt:(a.status==="dirty"&&t.dirty(),r(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(i.common.async===!1){const r=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!rv(r))return r;const a=s.transform(r.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(r=>rv(r)?Promise.resolve(s.transform(r.value,o)).then(a=>({status:t.value,value:a})):r);Pi.assertNever(s)}}nd.create=(n,e,t)=>new nd({schema:n,typeName:Kt.ZodEffects,effect:e,...si(t)});nd.createWithPreprocess=(n,e,t)=>new nd({schema:e,effect:{type:"preprocess",transform:n},typeName:Kt.ZodEffects,...si(t)});class fu extends di{_parse(e){return this._getType(e)===ot.undefined?Vr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fu.create=(n,e)=>new fu({innerType:n,typeName:Kt.ZodOptional,...si(e)});class Om extends di{_parse(e){return this._getType(e)===ot.null?Vr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Om.create=(n,e)=>new Om({innerType:n,typeName:Kt.ZodNullable,...si(e)});class uk extends di{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===ot.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}uk.create=(n,e)=>new uk({innerType:n,typeName:Kt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...si(e)});class hk extends di{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return tk(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ol(i.common.issues)},input:i.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ol(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}hk.create=(n,e)=>new hk({innerType:n,typeName:Kt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...si(e)});class BR extends di{_parse(e){if(this._getType(e)!==ot.nan){const i=this._getOrReturnCtx(e);return Qe(i,{code:Oe.invalid_type,expected:ot.nan,received:i.parsedType}),qt}return{status:"valid",value:e.data}}}BR.create=n=>new BR({typeName:Kt.ZodNaN,...si(n)});const VLe=Symbol("zod_brand");class k$ extends di{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class gI extends di{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?qt:o.status==="dirty"?(t.dirty(),rw(o.value)):this._def.out._parseAsync({data:o.value,path:i.path,parent:i})})();{const s=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?qt:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:i.path,parent:i})}}static create(e,t){return new gI({in:e,out:t,typeName:Kt.ZodPipeline})}}class fk extends di{_parse(e){const t=this._def.innerType._parse(e),i=s=>(rv(s)&&(s.value=Object.freeze(s.value)),s);return tk(t)?t.then(s=>i(s)):i(t)}unwrap(){return this._def.innerType}}fk.create=(n,e)=>new fk({innerType:n,typeName:Kt.ZodReadonly,...si(e)});function GX(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function jle(n,e={},t){return n?_C.create().superRefine((i,s)=>{var o,r;const a=n(i);if(a instanceof Promise)return a.then(l=>{var c,d;if(!l){const u=GX(e,i),h=(d=(c=u.fatal)!==null&&c!==void 0?c:t)!==null&&d!==void 0?d:!0;s.addIssue({code:"custom",...u,fatal:h})}});if(!a){const l=GX(e,i),c=(r=(o=l.fatal)!==null&&o!==void 0?o:t)!==null&&r!==void 0?r:!0;s.addIssue({code:"custom",...l,fatal:c})}}):_C.create()}const jLe={object:Un.lazycreate};var Kt;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Kt||(Kt={}));const zLe=(n,e={message:`Input not instance of ${n.name}`})=>jle(t=>t instanceof n,e),zle=Hc.create,Ule=Mm.create,ULe=BR.create,$Le=Pm.create,$le=ik.create,KLe=av.create,qLe=AR.create,GLe=nk.create,ZLe=sk.create,YLe=_C.create,XLe=H_.create,QLe=lf.create,JLe=OR.create,eke=Kc.create,tke=Un.create,ike=Un.strictCreate,nke=ok.create,ske=t4.create,oke=rk.create,rke=wu.create,ake=ak.create,lke=FR.create,cke=lv.create,dke=ry.create,uke=lk.create,hke=ck.create,fke=Am.create,gke=dk.create,mke=bC.create,ZX=nd.create,pke=fu.create,_ke=Om.create,bke=nd.createWithPreprocess,vke=gI.create,wke=()=>zle().optional(),yke=()=>Ule().optional(),Cke=()=>$le().optional(),Ske={string:n=>Hc.create({...n,coerce:!0}),number:n=>Mm.create({...n,coerce:!0}),boolean:n=>ik.create({...n,coerce:!0}),bigint:n=>Pm.create({...n,coerce:!0}),date:n=>av.create({...n,coerce:!0})},xke=qt;var ro=Object.freeze({__proto__:null,defaultErrorMap:pC,setErrorMap:bLe,getErrorMap:RR,makeIssue:MR,EMPTY_PATH:vLe,addIssueToContext:Qe,ParseStatus:or,INVALID:qt,DIRTY:rw,OK:Vr,isAborted:L9,isDirty:k9,isValid:rv,isAsync:tk,get util(){return Pi},get objectUtil(){return x9},ZodParsedType:ot,getParsedType:bh,ZodType:di,datetimeRegex:Hle,ZodString:Hc,ZodNumber:Mm,ZodBigInt:Pm,ZodBoolean:ik,ZodDate:av,ZodSymbol:AR,ZodUndefined:nk,ZodNull:sk,ZodAny:_C,ZodUnknown:H_,ZodNever:lf,ZodVoid:OR,ZodArray:Kc,ZodObject:Un,ZodUnion:ok,ZodDiscriminatedUnion:t4,ZodIntersection:rk,ZodTuple:wu,ZodRecord:ak,ZodMap:FR,ZodSet:lv,ZodFunction:ry,ZodLazy:lk,ZodLiteral:ck,ZodEnum:Am,ZodNativeEnum:dk,ZodPromise:bC,ZodEffects:nd,ZodTransformer:nd,ZodOptional:fu,ZodNullable:Om,ZodDefault:uk,ZodCatch:hk,ZodNaN:BR,BRAND:VLe,ZodBranded:k$,ZodPipeline:gI,ZodReadonly:fk,custom:jle,Schema:di,ZodSchema:di,late:jLe,get ZodFirstPartyTypeKind(){return Kt},coerce:Ske,any:YLe,array:eke,bigint:$Le,boolean:$le,date:KLe,discriminatedUnion:ske,effect:ZX,enum:fke,function:dke,instanceof:zLe,intersection:oke,lazy:uke,literal:hke,map:lke,nan:ULe,nativeEnum:gke,never:QLe,null:ZLe,nullable:_ke,number:Ule,object:tke,oboolean:Cke,onumber:yke,optional:pke,ostring:wke,pipeline:vke,preprocess:bke,promise:mke,record:ake,set:cke,strictObject:ike,string:zle,symbol:qLe,transformer:ZX,tuple:rke,undefined:GLe,union:nke,unknown:XLe,void:JLe,NEVER:xke,ZodIssueCode:Oe,quotelessJson:_Le,ZodError:ol}),Lke=foe[" useId ".trim().toString()]||(()=>{}),kke=0;function qc(n){const[e,t]=L.useState(Lke());return Ro(()=>{n||t(i=>i??String(kke++))},[n]),n||(e?`radix-${e}`:"")}var q5="focusScope.autoFocusOnMount",G5="focusScope.autoFocusOnUnmount",YX={bubbles:!1,cancelable:!0},Nke="FocusScope",i4=L.forwardRef((n,e)=>{const{loop:t=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...r}=n,[a,l]=L.useState(null),c=Gn(s),d=Gn(o),u=L.useRef(null),h=oi(e,p=>l(p)),f=L.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;L.useEffect(()=>{if(i){let p=function(y){if(f.paused||!a)return;const C=y.target;a.contains(C)?u.current=C:Gf(u.current,{select:!0})},b=function(y){if(f.paused||!a)return;const C=y.relatedTarget;C!==null&&(a.contains(C)||Gf(u.current,{select:!0}))},v=function(y){if(document.activeElement===document.body)for(const S of y)S.removedNodes.length>0&&Gf(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",b);const w=new MutationObserver(v);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",b),w.disconnect()}}},[i,a,f.paused]),L.useEffect(()=>{if(a){QX.add(f);const p=document.activeElement;if(!a.contains(p)){const v=new CustomEvent(q5,YX);a.addEventListener(q5,c),a.dispatchEvent(v),v.defaultPrevented||(Ike(Mke(Kle(a)),{select:!0}),document.activeElement===p&&Gf(a))}return()=>{a.removeEventListener(q5,c),setTimeout(()=>{const v=new CustomEvent(G5,YX);a.addEventListener(G5,d),a.dispatchEvent(v),v.defaultPrevented||Gf(p??document.body,{select:!0}),a.removeEventListener(G5,d),QX.remove(f)},0)}}},[a,c,d,f]);const m=L.useCallback(p=>{if(!t&&!i||f.paused)return;const b=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,v=document.activeElement;if(b&&v){const w=p.currentTarget,[y,C]=Eke(w);y&&C?!p.shiftKey&&v===C?(p.preventDefault(),t&&Gf(y,{select:!0})):p.shiftKey&&v===y&&(p.preventDefault(),t&&Gf(C,{select:!0})):v===w&&p.preventDefault()}},[t,i,f.paused]);return g.jsx(Et.div,{tabIndex:-1,...r,ref:h,onKeyDown:m})});i4.displayName=Nke;function Ike(n,{select:e=!1}={}){const t=document.activeElement;for(const i of n)if(Gf(i,{select:e}),document.activeElement!==t)return}function Eke(n){const e=Kle(n),t=XX(e,n),i=XX(e.reverse(),n);return[t,i]}function Kle(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function XX(n,e){for(const t of n)if(!Dke(t,{upTo:e}))return t}function Dke(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Tke(n){return n instanceof HTMLInputElement&&"select"in n}function Gf(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Tke(n)&&e&&n.select()}}var QX=Rke();function Rke(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=JX(n,e),n.unshift(e)},remove(e){var t;n=JX(n,e),(t=n[0])==null||t.resume()}}}function JX(n,e){const t=[...n],i=t.indexOf(e);return i!==-1&&t.splice(i,1),t}function Mke(n){return n.filter(e=>e.tagName!=="A")}var Z5=0;function N$(){L.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??eQ()),document.body.insertAdjacentElement("beforeend",n[1]??eQ()),Z5++,()=>{Z5===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Z5--}},[])}function eQ(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var iu=function(){return iu=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},iu.apply(this,arguments)};function qle(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function Pke(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))}var hT="right-scroll-bar-position",fT="width-before-scroll-bar",Ake="with-scroll-bars-hidden",Oke="--removed-body-scroll-bar-size";function Y5(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function Fke(n,e){var t=L.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(i){var s=t.value;s!==i&&(t.value=i,t.callback(i,s))}}}})[0];return t.callback=e,t.facade}var Bke=typeof window<"u"?L.useLayoutEffect:L.useEffect,tQ=new WeakMap;function Wke(n,e){var t=Fke(null,function(i){return n.forEach(function(s){return Y5(s,i)})});return Bke(function(){var i=tQ.get(t);if(i){var s=new Set(i),o=new Set(n),r=t.current;s.forEach(function(a){o.has(a)||Y5(a,null)}),o.forEach(function(a){s.has(a)||Y5(a,r)})}tQ.set(t,n)},[n]),t}function Hke(n){return n}function Vke(n,e){e===void 0&&(e=Hke);var t=[],i=!1,s={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var r=e(o,i);return t.push(r),function(){t=t.filter(function(a){return a!==r})}},assignSyncMedium:function(o){for(i=!0;t.length;){var r=t;t=[],r.forEach(o)}t={push:function(a){return o(a)},filter:function(){return t}}},assignMedium:function(o){i=!0;var r=[];if(t.length){var a=t;t=[],a.forEach(o),r=t}var l=function(){var d=r;r=[],d.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(d){r.push(d),c()},filter:function(d){return r=r.filter(d),t}}}};return s}function jke(n){n===void 0&&(n={});var e=Vke(null);return e.options=iu({async:!0,ssr:!1},n),e}var Gle=function(n){var e=n.sideCar,t=qle(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return L.createElement(i,iu({},t))};Gle.isSideCarExport=!0;function zke(n,e){return n.useMedium(e),Gle}var Zle=jke(),X5=function(){},n4=L.forwardRef(function(n,e){var t=L.useRef(null),i=L.useState({onScrollCapture:X5,onWheelCapture:X5,onTouchMoveCapture:X5}),s=i[0],o=i[1],r=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,d=n.enabled,u=n.shards,h=n.sideCar,f=n.noIsolation,m=n.inert,p=n.allowPinchZoom,b=n.as,v=b===void 0?"div":b,w=n.gapMode,y=qle(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=h,S=Wke([t,e]),x=iu(iu({},y),s);return L.createElement(L.Fragment,null,d&&L.createElement(C,{sideCar:Zle,removeScrollBar:c,shards:u,noIsolation:f,inert:m,setCallbacks:o,allowPinchZoom:!!p,lockRef:t,gapMode:w}),r?L.cloneElement(L.Children.only(a),iu(iu({},x),{ref:S})):L.createElement(v,iu({},x,{className:l,ref:S}),a))});n4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};n4.classNames={fullWidth:fT,zeroRight:hT};var Uke=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $ke(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=Uke();return e&&n.setAttribute("nonce",e),n}function Kke(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function qke(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var Gke=function(){var n=0,e=null;return{add:function(t){n==0&&(e=$ke())&&(Kke(e,t),qke(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Zke=function(){var n=Gke();return function(e,t){L.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},Yle=function(){var n=Zke(),e=function(t){var i=t.styles,s=t.dynamic;return n(i,s),null};return e},Yke={left:0,top:0,right:0,gap:0},Q5=function(n){return parseInt(n||"",10)||0},Xke=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],i=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Q5(t),Q5(i),Q5(s)]},Qke=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Yke;var e=Xke(n),t=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-t+e[2]-e[0])}},Jke=Yle(),ay="data-scroll-locked",eNe=function(n,e,t,i){var s=n.left,o=n.top,r=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(Ake,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(ay,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(r,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hT,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(fT,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(hT," .").concat(hT,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(fT," .").concat(fT,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(ay,`] {
    `).concat(Oke,": ").concat(a,`px;
  }
`)},iQ=function(){var n=parseInt(document.body.getAttribute(ay)||"0",10);return isFinite(n)?n:0},tNe=function(){L.useEffect(function(){return document.body.setAttribute(ay,(iQ()+1).toString()),function(){var n=iQ()-1;n<=0?document.body.removeAttribute(ay):document.body.setAttribute(ay,n.toString())}},[])},iNe=function(n){var e=n.noRelative,t=n.noImportant,i=n.gapMode,s=i===void 0?"margin":i;tNe();var o=L.useMemo(function(){return Qke(s)},[s]);return L.createElement(Jke,{styles:eNe(o,!e,s,t?"":"!important")})},I9=!1;if(typeof window<"u")try{var TE=Object.defineProperty({},"passive",{get:function(){return I9=!0,!0}});window.addEventListener("test",TE,TE),window.removeEventListener("test",TE,TE)}catch{I9=!1}var g0=I9?{passive:!1}:!1,nNe=function(n){return n.tagName==="TEXTAREA"},Xle=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!nNe(n)&&t[e]==="visible")},sNe=function(n){return Xle(n,"overflowY")},oNe=function(n){return Xle(n,"overflowX")},nQ=function(n,e){var t=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var s=Qle(n,i);if(s){var o=Jle(n,i),r=o[1],a=o[2];if(r>a)return!0}i=i.parentNode}while(i&&i!==t.body);return!1},rNe=function(n){var e=n.scrollTop,t=n.scrollHeight,i=n.clientHeight;return[e,t,i]},aNe=function(n){var e=n.scrollLeft,t=n.scrollWidth,i=n.clientWidth;return[e,t,i]},Qle=function(n,e){return n==="v"?sNe(e):oNe(e)},Jle=function(n,e){return n==="v"?rNe(e):aNe(e)},lNe=function(n,e){return n==="h"&&e==="rtl"?-1:1},cNe=function(n,e,t,i,s){var o=lNe(n,window.getComputedStyle(e).direction),r=o*i,a=t.target,l=e.contains(a),c=!1,d=r>0,u=0,h=0;do{var f=Jle(n,a),m=f[0],p=f[1],b=f[2],v=p-b-o*m;(m||v)&&Qle(n,a)&&(u+=v,h+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(u)<1||!s)||!d&&(Math.abs(h)<1||!s))&&(c=!0),c},RE=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},sQ=function(n){return[n.deltaX,n.deltaY]},oQ=function(n){return n&&"current"in n?n.current:n},dNe=function(n,e){return n[0]===e[0]&&n[1]===e[1]},uNe=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},hNe=0,m0=[];function fNe(n){var e=L.useRef([]),t=L.useRef([0,0]),i=L.useRef(),s=L.useState(hNe++)[0],o=L.useState(Yle)[0],r=L.useRef(n);L.useEffect(function(){r.current=n},[n]),L.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var p=Pke([n.lockRef.current],(n.shards||[]).map(oQ),!0).filter(Boolean);return p.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=L.useCallback(function(p,b){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!r.current.allowPinchZoom;var v=RE(p),w=t.current,y="deltaX"in p?p.deltaX:w[0]-v[0],C="deltaY"in p?p.deltaY:w[1]-v[1],S,x=p.target,k=Math.abs(y)>Math.abs(C)?"h":"v";if("touches"in p&&k==="h"&&x.type==="range")return!1;var N=nQ(k,x);if(!N)return!0;if(N?S=k:(S=k==="v"?"h":"v",N=nQ(k,x)),!N)return!1;if(!i.current&&"changedTouches"in p&&(y||C)&&(i.current=S),!S)return!0;var E=i.current||S;return cNe(E,b,p,E==="h"?y:C,!0)},[]),l=L.useCallback(function(p){var b=p;if(!(!m0.length||m0[m0.length-1]!==o)){var v="deltaY"in b?sQ(b):RE(b),w=e.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&dNe(S.delta,v)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var y=(r.current.shards||[]).map(oQ).filter(Boolean).filter(function(S){return S.contains(b.target)}),C=y.length>0?a(b,y[0]):!r.current.noIsolation;C&&b.cancelable&&b.preventDefault()}}},[]),c=L.useCallback(function(p,b,v,w){var y={name:p,delta:b,target:v,should:w,shadowParent:gNe(v)};e.current.push(y),setTimeout(function(){e.current=e.current.filter(function(C){return C!==y})},1)},[]),d=L.useCallback(function(p){t.current=RE(p),i.current=void 0},[]),u=L.useCallback(function(p){c(p.type,sQ(p),p.target,a(p,n.lockRef.current))},[]),h=L.useCallback(function(p){c(p.type,RE(p),p.target,a(p,n.lockRef.current))},[]);L.useEffect(function(){return m0.push(o),n.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,g0),document.addEventListener("touchmove",l,g0),document.addEventListener("touchstart",d,g0),function(){m0=m0.filter(function(p){return p!==o}),document.removeEventListener("wheel",l,g0),document.removeEventListener("touchmove",l,g0),document.removeEventListener("touchstart",d,g0)}},[]);var f=n.removeScrollBar,m=n.inert;return L.createElement(L.Fragment,null,m?L.createElement(o,{styles:uNe(s)}):null,f?L.createElement(iNe,{gapMode:n.gapMode}):null)}function gNe(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const mNe=zke(Zle,fNe);var s4=L.forwardRef(function(n,e){return L.createElement(n4,iu({},n,{ref:e,sideCar:mNe}))});s4.classNames=n4.classNames;var pNe=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},p0=new WeakMap,ME=new WeakMap,PE={},J5=0,ece=function(n){return n&&(n.host||ece(n.parentNode))},_Ne=function(n,e){return e.map(function(t){if(n.contains(t))return t;var i=ece(t);return i&&n.contains(i)?i:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},bNe=function(n,e,t,i){var s=_Ne(e,Array.isArray(n)?n:[n]);PE[t]||(PE[t]=new WeakMap);var o=PE[t],r=[],a=new Set,l=new Set(s),c=function(u){!u||a.has(u)||(a.add(u),c(u.parentNode))};s.forEach(c);var d=function(u){!u||l.has(u)||Array.prototype.forEach.call(u.children,function(h){if(a.has(h))d(h);else try{var f=h.getAttribute(i),m=f!==null&&f!=="false",p=(p0.get(h)||0)+1,b=(o.get(h)||0)+1;p0.set(h,p),o.set(h,b),r.push(h),p===1&&m&&ME.set(h,!0),b===1&&h.setAttribute(t,"true"),m||h.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return d(e),a.clear(),J5++,function(){r.forEach(function(u){var h=p0.get(u)-1,f=o.get(u)-1;p0.set(u,h),o.set(u,f),h||(ME.has(u)||u.removeAttribute(i),ME.delete(u)),f||u.removeAttribute(t)}),J5--,J5||(p0=new WeakMap,p0=new WeakMap,ME=new WeakMap,PE={})}},I$=function(n,e,t){t===void 0&&(t="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),s=pNe(n);return s?(i.push.apply(i,Array.from(s.querySelectorAll("[aria-live]"))),bNe(i,s,t,"aria-hidden")):function(){return null}},E$="Dialog",[tce,Drt]=sc(E$),[vNe,gd]=tce(E$),ice=n=>{const{__scopeDialog:e,children:t,open:i,defaultOpen:s,onOpenChange:o,modal:r=!0}=n,a=L.useRef(null),l=L.useRef(null),[c=!1,d]=af({prop:i,defaultProp:s,onChange:o});return g.jsx(vNe,{scope:e,triggerRef:a,contentRef:l,contentId:qc(),titleId:qc(),descriptionId:qc(),open:c,onOpenChange:d,onOpenToggle:L.useCallback(()=>d(u=>!u),[d]),modal:r,children:t})};ice.displayName=E$;var nce="DialogTrigger",wNe=L.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=gd(nce,t),o=oi(e,s.triggerRef);return g.jsx(Et.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":R$(s.open),...i,ref:o,onClick:$e(n.onClick,s.onOpenToggle)})});wNe.displayName=nce;var D$="DialogPortal",[yNe,sce]=tce(D$,{forceMount:void 0}),oce=n=>{const{__scopeDialog:e,forceMount:t,children:i,container:s}=n,o=gd(D$,e);return g.jsx(yNe,{scope:e,forceMount:t,children:L.Children.map(i,r=>g.jsx(qr,{present:t||o.open,children:g.jsx(dI,{asChild:!0,container:s,children:r})}))})};oce.displayName=D$;var WR="DialogOverlay",rce=L.forwardRef((n,e)=>{const t=sce(WR,n.__scopeDialog),{forceMount:i=t.forceMount,...s}=n,o=gd(WR,n.__scopeDialog);return o.modal?g.jsx(qr,{present:i||o.open,children:g.jsx(SNe,{...s,ref:e})}):null});rce.displayName=WR;var CNe=nv("DialogOverlay.RemoveScroll"),SNe=L.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=gd(WR,t);return g.jsx(s4,{as:CNe,allowPinchZoom:!0,shards:[s.contentRef],children:g.jsx(Et.div,{"data-state":R$(s.open),...i,ref:e,style:{pointerEvents:"auto",...i.style}})})}),cv="DialogContent",ace=L.forwardRef((n,e)=>{const t=sce(cv,n.__scopeDialog),{forceMount:i=t.forceMount,...s}=n,o=gd(cv,n.__scopeDialog);return g.jsx(qr,{present:i||o.open,children:o.modal?g.jsx(xNe,{...s,ref:e}):g.jsx(LNe,{...s,ref:e})})});ace.displayName=cv;var xNe=L.forwardRef((n,e)=>{const t=gd(cv,n.__scopeDialog),i=L.useRef(null),s=oi(e,t.contentRef,i);return L.useEffect(()=>{const o=i.current;if(o)return I$(o)},[]),g.jsx(lce,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(n.onCloseAutoFocus,o=>{var r;o.preventDefault(),(r=t.triggerRef.current)==null||r.focus()}),onPointerDownOutside:$e(n.onPointerDownOutside,o=>{const r=o.detail.originalEvent,a=r.button===0&&r.ctrlKey===!0;(r.button===2||a)&&o.preventDefault()}),onFocusOutside:$e(n.onFocusOutside,o=>o.preventDefault())})}),LNe=L.forwardRef((n,e)=>{const t=gd(cv,n.__scopeDialog),i=L.useRef(!1),s=L.useRef(!1);return g.jsx(lce,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var r,a;(r=n.onCloseAutoFocus)==null||r.call(n,o),o.defaultPrevented||(i.current||(a=t.triggerRef.current)==null||a.focus(),o.preventDefault()),i.current=!1,s.current=!1},onInteractOutside:o=>{var l,c;(l=n.onInteractOutside)==null||l.call(n,o),o.defaultPrevented||(i.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const r=o.target;((c=t.triggerRef.current)==null?void 0:c.contains(r))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),lce=L.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,...r}=n,a=gd(cv,t),l=L.useRef(null),c=oi(e,l);return N$(),g.jsxs(g.Fragment,{children:[g.jsx(i4,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:o,children:g.jsx(f1,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":R$(a.open),...r,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(kNe,{titleId:a.titleId}),g.jsx(INe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),T$="DialogTitle",cce=L.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=gd(T$,t);return g.jsx(Et.h2,{id:s.titleId,...i,ref:e})});cce.displayName=T$;var dce="DialogDescription",uce=L.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=gd(dce,t);return g.jsx(Et.p,{id:s.descriptionId,...i,ref:e})});uce.displayName=dce;var hce="DialogClose",fce=L.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=gd(hce,t);return g.jsx(Et.button,{type:"button",...i,ref:e,onClick:$e(n.onClick,()=>s.onOpenChange(!1))})});fce.displayName=hce;function R$(n){return n?"open":"closed"}var gce="DialogTitleWarning",[Trt,mce]=s1e(gce,{contentName:cv,titleName:T$,docsSlug:"dialog"}),kNe=({titleId:n})=>{const e=mce(gce),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return L.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},NNe="DialogDescriptionWarning",INe=({contentRef:n,descriptionId:e})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${mce(NNe).contentName}}.`;return L.useEffect(()=>{var o;const s=(o=n.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(i))},[i,n,e]),null},ENe=ice,pce=oce,_ce=rce,bce=ace,vce=cce,wce=uce,DNe=fce;const cf=ENe,yce=({...n})=>g.jsx(pce,{...n});yce.displayName=pce.displayName;const Cce=L.forwardRef(({className:n,...e},t)=>g.jsx(_ce,{ref:t,className:Yt("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));Cce.displayName=_ce.displayName;const yu=L.forwardRef(({className:n,children:e,...t},i)=>g.jsxs(yce,{children:[g.jsx(Cce,{}),g.jsxs(bce,{ref:i,className:Yt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",n),...t,children:[e,g.jsxs(DNe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[g.jsx(g1,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yu.displayName=bce.displayName;const Cu=({className:n,...e})=>g.jsx("div",{className:Yt("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});Cu.displayName="DialogHeader";const Sce=({className:n,...e})=>g.jsx("div",{className:Yt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});Sce.displayName="DialogFooter";const Su=L.forwardRef(({className:n,...e},t)=>g.jsx(vce,{ref:t,className:Yt("text-lg font-semibold leading-none tracking-tight",n),...e}));Su.displayName=vce.displayName;const xu=L.forwardRef(({className:n,...e},t)=>g.jsx(wce,{ref:t,className:Yt("text-sm text-muted-foreground",n),...e}));xu.displayName=wce.displayName;const va=L.forwardRef(({className:n,type:e,...t},i)=>g.jsx("input",{type:e,className:Yt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:i,...t}));va.displayName="Input";var TNe="Label",xce=L.forwardRef((n,e)=>g.jsx(Et.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));xce.displayName=TNe;var Lce=xce;const RNe=YO("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Xi=L.forwardRef(({className:n,...e},t)=>g.jsx(Lce,{ref:t,className:Yt(RNe(),n),...e}));Xi.displayName=Lce.displayName;const zv=L.forwardRef(({className:n,...e},t)=>g.jsx("textarea",{className:Yt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));zv.displayName="Textarea";const MNe=YO("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function kce({className:n,variant:e,...t}){return g.jsx("div",{className:Yt(MNe({variant:e}),n),...t})}const PNe=[{id:"empty",name:"Empty Project",description:"Start with a clean slate",features:["Basic mod structure","Empty mod class","gradle build files"]},{id:"basic-item",name:"Basic Item Mod",description:"Start with simple item implementation",features:["Complete item registration","Textures","JSON models","Language files"]},{id:"basic-block",name:"Basic Block Mod",description:"Start with simple block implementation",features:["Complete block registration","Textures","JSON models","Language files"]},{id:"complete",name:"Complete Example",description:"Full-featured mod example",features:["Items","Blocks","Creative Tab","Recipes","World Generation"]}],AE=ro.object({name:ro.string().min(3,"Project name must be at least 3 characters"),description:ro.string().min(10,"Description must be at least 10 characters"),modVersion:ro.string().min(1,"Mod version is required"),minecraftVersion:ro.string().default("1.21.5"),neoForgeVersion:ro.string().default("1.21.5-"),template:ro.string().default("empty")});function ANe({open:n,onOpenChange:e}){const{toast:t}=Aa(),i=L$(),[s,o]=L.useState("info"),[r,a]=L.useState({name:"",description:"",modVersion:"1.0.0",minecraftVersion:"1.21.5",neoForgeVersion:"1.21.5-21.5.0.0",template:"empty"}),[l,c]=L.useState({}),d=Dx({mutationFn:async b=>{const w=await(await sy("POST","/api/projects",b)).json();return b.template!=="empty"&&console.log(`Creating template files for ${b.template} template`),w},onSuccess:()=>{i.invalidateQueries({queryKey:["/api/projects"]}),t({title:"Project created",description:`Project "${r.name}" has been created successfully.`}),e(!1),u()},onError:b=>{t({title:"Failed to create project",description:b.message,variant:"destructive"})}}),u=()=>{a({name:"",description:"",modVersion:"1.0.0",minecraftVersion:"1.21.5",neoForgeVersion:"1.21.5-21.5.0.0",template:"empty"}),c({}),o("info")},h=b=>{const{name:v,value:w}=b.target;a(y=>({...y,[v]:w})),l[v]&&c(y=>({...y,[v]:void 0}))},f=b=>{a(v=>({...v,template:b}))},m=b=>{if(b.preventDefault(),s==="info"){try{const{name:v,description:w,modVersion:y}=r;ro.object({name:AE.shape.name,description:AE.shape.description,modVersion:AE.shape.modVersion}).parse({name:v,description:w,modVersion:y}),c({}),o("template")}catch(v){if(v instanceof ro.ZodError){const w={};v.errors.forEach(y=>{const C=y.path[0];w[C]=y.message}),c(w)}}return}try{AE.parse(r),c({}),d.mutate(r)}catch(v){if(v instanceof ro.ZodError){const w={};v.errors.forEach(y=>{const C=y.path[0];w[C]=y.message}),c(w)}}},p=()=>{o("info")};return g.jsx(cf,{open:n,onOpenChange:e,children:g.jsx(yu,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:g.jsxs("form",{onSubmit:m,children:[g.jsxs(Cu,{children:[g.jsx(Su,{children:"Create New Mod Project"}),g.jsx(xu,{children:s==="info"?"Configure your NeoForge mod project settings":"Choose a template for your mod"})]}),s==="info"&&g.jsxs("div",{className:"grid gap-4 py-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"name",children:"Project Name"}),g.jsx(va,{id:"name",name:"name",placeholder:"My Awesome Mod",value:r.name,onChange:h,className:l.name?"border-red-500":""}),l.name&&g.jsx("p",{className:"text-red-500 text-sm",children:l.name})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"description",children:"Description"}),g.jsx(zv,{id:"description",name:"description",placeholder:"Describe what your mod does...",value:r.description,onChange:h,className:l.description?"border-red-500":""}),l.description&&g.jsx("p",{className:"text-red-500 text-sm",children:l.description})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"modVersion",children:"Mod Version"}),g.jsx(va,{id:"modVersion",name:"modVersion",placeholder:"1.0.0",value:r.modVersion,onChange:h,className:l.modVersion?"border-red-500":""}),l.modVersion&&g.jsx("p",{className:"text-red-500 text-sm",children:l.modVersion})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"minecraftVersion",children:"Minecraft Version"}),g.jsx(va,{id:"minecraftVersion",name:"minecraftVersion",value:r.minecraftVersion,onChange:h,disabled:!0})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"neoForgeVersion",children:"NeoForge Version"}),g.jsx(va,{id:"neoForgeVersion",name:"neoForgeVersion",value:r.neoForgeVersion,onChange:h,disabled:!0})]})]}),s==="template"&&g.jsxs("div",{className:"py-4 space-y-4 max-h-[50vh] overflow-y-auto",children:[g.jsx("div",{className:"grid grid-cols-1 gap-4",children:PNe.map(b=>g.jsxs(Bt,{className:`cursor-pointer transition-all ${r.template===b.id?"border-blue-600 shadow-md":"hover:border-gray-400"}`,onClick:()=>f(b.id),children:[g.jsxs(Mg,{className:"pb-2",children:[g.jsxs(Pg,{className:"text-lg flex items-center justify-between",children:[b.name,r.template===b.id&&g.jsx(kce,{className:"ml-2 bg-blue-600",children:"Selected"})]}),g.jsx(Ag,{children:b.description})]}),g.jsx(Og,{className:"pt-0",children:g.jsx("ul",{className:"text-xs text-gray-500 space-y-1",children:b.features.map((v,w)=>g.jsxs("li",{className:"flex items-center",children:[g.jsx("div",{className:"mr-2 h-1.5 w-1.5 rounded-full bg-blue-500"}),v]},w))})})]},b.id))}),g.jsxs("div",{className:"flex items-center space-x-2 text-sm text-amber-600 bg-amber-50 p-2 rounded border border-amber-200 mt-4",children:[g.jsx(Dg,{className:"h-4 w-4"}),g.jsx("p",{children:"All templates are optimized for NeoForge 1.21.5 using the new Data Component system"})]})]}),g.jsx(Sce,{className:"sticky bottom-0 pt-2 bg-background border-t mt-4",children:s==="template"?g.jsxs(g.Fragment,{children:[g.jsx(Se,{type:"button",variant:"outline",onClick:p,children:"Back"}),g.jsxs(Se,{type:"submit",disabled:d.isPending,children:[d.isPending?g.jsx(Qi,{className:"h-4 w-4 animate-spin mr-2"}):null,"Create Project"]})]}):g.jsxs(g.Fragment,{children:[g.jsx(Se,{type:"button",variant:"outline",onClick:()=>e(!1),children:"Cancel"}),g.jsx(Se,{type:"submit",children:"Next"})]})})]})})})}function ONe({showDescription:n=!0,className:e=""}){const{currentTheme:t}=fI();return g.jsx("div",{className:`w-full overflow-hidden relative ${e}`,children:g.jsxs(Bt,{className:"p-4 border-none relative overflow-hidden",style:{background:t.colors.backgroundGradient,color:t.colors.text,minHeight:"120px"},children:[g.jsx(Wc,{opacity:.15,isFixed:!1}),g.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx(Lh,{className:"h-5 w-5 mr-2",style:{color:t.colors.accent}}),g.jsxs("h3",{className:"font-minecraft text-lg md:text-xl tracking-wide",children:[t.name," Biome"]})]}),n&&g.jsx("p",{className:"mt-2 text-sm opacity-80",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:t.description}),g.jsxs("div",{className:"mt-auto pt-2 flex flex-wrap gap-2",children:[g.jsx("div",{className:"w-6 h-6 rounded-sm",title:"Primary Color",style:{backgroundColor:t.colors.primary}}),g.jsx("div",{className:"w-6 h-6 rounded-sm",title:"Secondary Color",style:{backgroundColor:t.colors.secondary}}),g.jsx("div",{className:"w-6 h-6 rounded-sm",title:"Accent Color",style:{backgroundColor:t.colors.accent}})]})]})]})})}var FNe=L.createContext(void 0);function _1(n){const e=L.useContext(FNe);return n||e||"ltr"}const BNe=["top","right","bottom","left"],Fm=Math.min,Ya=Math.max,HR=Math.round,OE=Math.floor,gu=n=>({x:n,y:n}),WNe={left:"right",right:"left",bottom:"top",top:"bottom"},HNe={start:"end",end:"start"};function E9(n,e,t){return Ya(n,Fm(e,t))}function df(n,e){return typeof n=="function"?n(e):n}function uf(n){return n.split("-")[0]}function b1(n){return n.split("-")[1]}function M$(n){return n==="x"?"y":"x"}function P$(n){return n==="y"?"height":"width"}function Bm(n){return["top","bottom"].includes(uf(n))?"y":"x"}function A$(n){return M$(Bm(n))}function VNe(n,e,t){t===void 0&&(t=!1);const i=b1(n),s=A$(n),o=P$(s);let r=s==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(r=VR(r)),[r,VR(r)]}function jNe(n){const e=VR(n);return[D9(n),e,D9(e)]}function D9(n){return n.replace(/start|end/g,e=>HNe[e])}function zNe(n,e,t){const i=["left","right"],s=["right","left"],o=["top","bottom"],r=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:i:e?i:s;case"left":case"right":return e?o:r;default:return[]}}function UNe(n,e,t,i){const s=b1(n);let o=zNe(uf(n),t==="start",i);return s&&(o=o.map(r=>r+"-"+s),e&&(o=o.concat(o.map(D9)))),o}function VR(n){return n.replace(/left|right|bottom|top/g,e=>WNe[e])}function $Ne(n){return{top:0,right:0,bottom:0,left:0,...n}}function Nce(n){return typeof n!="number"?$Ne(n):{top:n,right:n,bottom:n,left:n}}function jR(n){const{x:e,y:t,width:i,height:s}=n;return{width:i,height:s,top:t,left:e,right:e+i,bottom:t+s,x:e,y:t}}function rQ(n,e,t){let{reference:i,floating:s}=n;const o=Bm(e),r=A$(e),a=P$(r),l=uf(e),c=o==="y",d=i.x+i.width/2-s.width/2,u=i.y+i.height/2-s.height/2,h=i[a]/2-s[a]/2;let f;switch(l){case"top":f={x:d,y:i.y-s.height};break;case"bottom":f={x:d,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:u};break;case"left":f={x:i.x-s.width,y:u};break;default:f={x:i.x,y:i.y}}switch(b1(e)){case"start":f[r]-=h*(t&&c?-1:1);break;case"end":f[r]+=h*(t&&c?-1:1);break}return f}const KNe=async(n,e,t)=>{const{placement:i="bottom",strategy:s="absolute",middleware:o=[],platform:r}=t,a=o.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(e));let c=await r.getElementRects({reference:n,floating:e,strategy:s}),{x:d,y:u}=rQ(c,i,l),h=i,f={},m=0;for(let p=0;p<a.length;p++){const{name:b,fn:v}=a[p],{x:w,y,data:C,reset:S}=await v({x:d,y:u,initialPlacement:i,placement:h,strategy:s,middlewareData:f,rects:c,platform:r,elements:{reference:n,floating:e}});d=w??d,u=y??u,f={...f,[b]:{...f[b],...C}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(c=S.rects===!0?await r.getElementRects({reference:n,floating:e,strategy:s}):S.rects),{x:d,y:u}=rQ(c,h,l)),p=-1)}return{x:d,y:u,placement:h,strategy:s,middlewareData:f}};async function gk(n,e){var t;e===void 0&&(e={});const{x:i,y:s,platform:o,rects:r,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:f=0}=df(e,n),m=Nce(f),b=a[h?u==="floating"?"reference":"floating":u],v=jR(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(b)))==null||t?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),w=u==="floating"?{x:i,y:s,width:r.floating.width,height:r.floating.height}:r.reference,y=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),C=await(o.isElement==null?void 0:o.isElement(y))?await(o.getScale==null?void 0:o.getScale(y))||{x:1,y:1}:{x:1,y:1},S=jR(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:y,strategy:l}):w);return{top:(v.top-S.top+m.top)/C.y,bottom:(S.bottom-v.bottom+m.bottom)/C.y,left:(v.left-S.left+m.left)/C.x,right:(S.right-v.right+m.right)/C.x}}const qNe=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:s,rects:o,platform:r,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=df(n,e)||{};if(c==null)return{};const u=Nce(d),h={x:t,y:i},f=A$(s),m=P$(f),p=await r.getDimensions(c),b=f==="y",v=b?"top":"left",w=b?"bottom":"right",y=b?"clientHeight":"clientWidth",C=o.reference[m]+o.reference[f]-h[f]-o.floating[m],S=h[f]-o.reference[f],x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c));let k=x?x[y]:0;(!k||!await(r.isElement==null?void 0:r.isElement(x)))&&(k=a.floating[y]||o.floating[m]);const N=C/2-S/2,E=k/2-p[m]/2-1,B=Fm(u[v],E),A=Fm(u[w],E),O=B,W=k-p[m]-A,T=k/2-p[m]/2+N,M=E9(O,T,W),z=!l.arrow&&b1(s)!=null&&T!==M&&o.reference[m]/2-(T<O?B:A)-p[m]/2<0,ee=z?T<O?T-O:T-W:0;return{[f]:h[f]+ee,data:{[f]:M,centerOffset:T-M-ee,...z&&{alignmentOffset:ee}},reset:z}}}),GNe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:s,middlewareData:o,rects:r,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...b}=df(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const v=uf(s),w=Bm(a),y=uf(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=h||(y||!p?[VR(a)]:jNe(a)),x=m!=="none";!h&&x&&S.push(...UNe(a,p,m,C));const k=[a,...S],N=await gk(e,b),E=[];let B=((i=o.flip)==null?void 0:i.overflows)||[];if(d&&E.push(N[v]),u){const T=VNe(s,r,C);E.push(N[T[0]],N[T[1]])}if(B=[...B,{placement:s,overflows:E}],!E.every(T=>T<=0)){var A,O;const T=(((A=o.flip)==null?void 0:A.index)||0)+1,M=k[T];if(M)return{data:{index:T,overflows:B},reset:{placement:M}};let z=(O=B.filter(ee=>ee.overflows[0]<=0).sort((ee,q)=>ee.overflows[1]-q.overflows[1])[0])==null?void 0:O.placement;if(!z)switch(f){case"bestFit":{var W;const ee=(W=B.filter(q=>{if(x){const Z=Bm(q.placement);return Z===w||Z==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(Z=>Z>0).reduce((Z,V)=>Z+V,0)]).sort((q,Z)=>q[1]-Z[1])[0])==null?void 0:W[0];ee&&(z=ee);break}case"initialPlacement":z=a;break}if(s!==z)return{reset:{placement:z}}}return{}}}};function aQ(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function lQ(n){return BNe.some(e=>n[e]>=0)}const ZNe=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...s}=df(n,e);switch(i){case"referenceHidden":{const o=await gk(e,{...s,elementContext:"reference"}),r=aQ(o,t.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:lQ(r)}}}case"escaped":{const o=await gk(e,{...s,altBoundary:!0}),r=aQ(o,t.floating);return{data:{escapedOffsets:r,escaped:lQ(r)}}}default:return{}}}}};async function YNe(n,e){const{placement:t,platform:i,elements:s}=n,o=await(i.isRTL==null?void 0:i.isRTL(s.floating)),r=uf(t),a=b1(t),l=Bm(t)==="y",c=["left","top"].includes(r)?-1:1,d=o&&l?-1:1,u=df(e,n);let{mainAxis:h,crossAxis:f,alignmentAxis:m}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return a&&typeof m=="number"&&(f=a==="end"?m*-1:m),l?{x:f*d,y:h*c}:{x:h*c,y:f*d}}const XNe=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:s,y:o,placement:r,middlewareData:a}=e,l=await YNe(e,n);return r===((t=a.offset)==null?void 0:t.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:r}}}}},QNe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:s}=e,{mainAxis:o=!0,crossAxis:r=!1,limiter:a={fn:b=>{let{x:v,y:w}=b;return{x:v,y:w}}},...l}=df(n,e),c={x:t,y:i},d=await gk(e,l),u=Bm(uf(s)),h=M$(u);let f=c[h],m=c[u];if(o){const b=h==="y"?"top":"left",v=h==="y"?"bottom":"right",w=f+d[b],y=f-d[v];f=E9(w,f,y)}if(r){const b=u==="y"?"top":"left",v=u==="y"?"bottom":"right",w=m+d[b],y=m-d[v];m=E9(w,m,y)}const p=a.fn({...e,[h]:f,[u]:m});return{...p,data:{x:p.x-t,y:p.y-i,enabled:{[h]:o,[u]:r}}}}}},JNe=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:s,rects:o,middlewareData:r}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=df(n,e),d={x:t,y:i},u=Bm(s),h=M$(u);let f=d[h],m=d[u];const p=df(a,e),b=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const y=h==="y"?"height":"width",C=o.reference[h]-o.floating[y]+b.mainAxis,S=o.reference[h]+o.reference[y]-b.mainAxis;f<C?f=C:f>S&&(f=S)}if(c){var v,w;const y=h==="y"?"width":"height",C=["top","left"].includes(uf(s)),S=o.reference[u]-o.floating[y]+(C&&((v=r.offset)==null?void 0:v[u])||0)+(C?0:b.crossAxis),x=o.reference[u]+o.reference[y]+(C?0:((w=r.offset)==null?void 0:w[u])||0)-(C?b.crossAxis:0);m<S?m=S:m>x&&(m=x)}return{[h]:f,[u]:m}}}},eIe=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:s,rects:o,platform:r,elements:a}=e,{apply:l=()=>{},...c}=df(n,e),d=await gk(e,c),u=uf(s),h=b1(s),f=Bm(s)==="y",{width:m,height:p}=o.floating;let b,v;u==="top"||u==="bottom"?(b=u,v=h===(await(r.isRTL==null?void 0:r.isRTL(a.floating))?"start":"end")?"left":"right"):(v=u,b=h==="end"?"top":"bottom");const w=p-d.top-d.bottom,y=m-d.left-d.right,C=Fm(p-d[b],w),S=Fm(m-d[v],y),x=!e.middlewareData.shift;let k=C,N=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(N=y),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(k=w),x&&!h){const B=Ya(d.left,0),A=Ya(d.right,0),O=Ya(d.top,0),W=Ya(d.bottom,0);f?N=m-2*(B!==0||A!==0?B+A:Ya(d.left,d.right)):k=p-2*(O!==0||W!==0?O+W:Ya(d.top,d.bottom))}await l({...e,availableWidth:N,availableHeight:k});const E=await r.getDimensions(a.floating);return m!==E.width||p!==E.height?{reset:{rects:!0}}:{}}}};function o4(){return typeof window<"u"}function v1(n){return Ice(n)?(n.nodeName||"").toLowerCase():"#document"}function rl(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Fu(n){var e;return(e=(Ice(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Ice(n){return o4()?n instanceof Node||n instanceof rl(n).Node:!1}function sd(n){return o4()?n instanceof Element||n instanceof rl(n).Element:!1}function Lu(n){return o4()?n instanceof HTMLElement||n instanceof rl(n).HTMLElement:!1}function cQ(n){return!o4()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof rl(n).ShadowRoot}function mI(n){const{overflow:e,overflowX:t,overflowY:i,display:s}=od(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(s)}function tIe(n){return["table","td","th"].includes(v1(n))}function r4(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function O$(n){const e=F$(),t=sd(n)?od(n):n;return["transform","translate","scale","rotate","perspective"].some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function iIe(n){let e=Wm(n);for(;Lu(e)&&!vC(e);){if(O$(e))return e;if(r4(e))return null;e=Wm(e)}return null}function F$(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function vC(n){return["html","body","#document"].includes(v1(n))}function od(n){return rl(n).getComputedStyle(n)}function a4(n){return sd(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Wm(n){if(v1(n)==="html")return n;const e=n.assignedSlot||n.parentNode||cQ(n)&&n.host||Fu(n);return cQ(e)?e.host:e}function Ece(n){const e=Wm(n);return vC(e)?n.ownerDocument?n.ownerDocument.body:n.body:Lu(e)&&mI(e)?e:Ece(e)}function mk(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=Ece(n),o=s===((i=n.ownerDocument)==null?void 0:i.body),r=rl(s);if(o){const a=T9(r);return e.concat(r,r.visualViewport||[],mI(s)?s:[],a&&t?mk(a):[])}return e.concat(s,mk(s,[],t))}function T9(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Dce(n){const e=od(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const s=Lu(n),o=s?n.offsetWidth:t,r=s?n.offsetHeight:i,a=HR(t)!==o||HR(i)!==r;return a&&(t=o,i=r),{width:t,height:i,$:a}}function B$(n){return sd(n)?n:n.contextElement}function ly(n){const e=B$(n);if(!Lu(e))return gu(1);const t=e.getBoundingClientRect(),{width:i,height:s,$:o}=Dce(e);let r=(o?HR(t.width):t.width)/i,a=(o?HR(t.height):t.height)/s;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}const nIe=gu(0);function Tce(n){const e=rl(n);return!F$()||!e.visualViewport?nIe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sIe(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==rl(n)?!1:e}function dv(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=B$(n);let r=gu(1);e&&(i?sd(i)&&(r=ly(i)):r=ly(n));const a=sIe(o,t,i)?Tce(o):gu(0);let l=(s.left+a.x)/r.x,c=(s.top+a.y)/r.y,d=s.width/r.x,u=s.height/r.y;if(o){const h=rl(o),f=i&&sd(i)?rl(i):i;let m=h,p=T9(m);for(;p&&i&&f!==m;){const b=ly(p),v=p.getBoundingClientRect(),w=od(p),y=v.left+(p.clientLeft+parseFloat(w.paddingLeft))*b.x,C=v.top+(p.clientTop+parseFloat(w.paddingTop))*b.y;l*=b.x,c*=b.y,d*=b.x,u*=b.y,l+=y,c+=C,m=rl(p),p=T9(m)}}return jR({width:d,height:u,x:l,y:c})}function W$(n,e){const t=a4(n).scrollLeft;return e?e.left+t:dv(Fu(n)).left+t}function Rce(n,e,t){t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=i.left+e.scrollLeft-(t?0:W$(n,i)),o=i.top+e.scrollTop;return{x:s,y:o}}function oIe(n){let{elements:e,rect:t,offsetParent:i,strategy:s}=n;const o=s==="fixed",r=Fu(i),a=e?r4(e.floating):!1;if(i===r||a&&o)return t;let l={scrollLeft:0,scrollTop:0},c=gu(1);const d=gu(0),u=Lu(i);if((u||!u&&!o)&&((v1(i)!=="body"||mI(r))&&(l=a4(i)),Lu(i))){const f=dv(i);c=ly(i),d.x=f.x+i.clientLeft,d.y=f.y+i.clientTop}const h=r&&!u&&!o?Rce(r,l,!0):gu(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:t.y*c.y-l.scrollTop*c.y+d.y+h.y}}function rIe(n){return Array.from(n.getClientRects())}function aIe(n){const e=Fu(n),t=a4(n),i=n.ownerDocument.body,s=Ya(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),o=Ya(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let r=-t.scrollLeft+W$(n);const a=-t.scrollTop;return od(i).direction==="rtl"&&(r+=Ya(e.clientWidth,i.clientWidth)-s),{width:s,height:o,x:r,y:a}}function lIe(n,e){const t=rl(n),i=Fu(n),s=t.visualViewport;let o=i.clientWidth,r=i.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;const c=F$();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:r,x:a,y:l}}function cIe(n,e){const t=dv(n,!0,e==="fixed"),i=t.top+n.clientTop,s=t.left+n.clientLeft,o=Lu(n)?ly(n):gu(1),r=n.clientWidth*o.x,a=n.clientHeight*o.y,l=s*o.x,c=i*o.y;return{width:r,height:a,x:l,y:c}}function dQ(n,e,t){let i;if(e==="viewport")i=lIe(n,t);else if(e==="document")i=aIe(Fu(n));else if(sd(e))i=cIe(e,t);else{const s=Tce(n);i={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return jR(i)}function Mce(n,e){const t=Wm(n);return t===e||!sd(t)||vC(t)?!1:od(t).position==="fixed"||Mce(t,e)}function dIe(n,e){const t=e.get(n);if(t)return t;let i=mk(n,[],!1).filter(a=>sd(a)&&v1(a)!=="body"),s=null;const o=od(n).position==="fixed";let r=o?Wm(n):n;for(;sd(r)&&!vC(r);){const a=od(r),l=O$(r);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||mI(r)&&!l&&Mce(n,r))?i=i.filter(d=>d!==r):s=a,r=Wm(r)}return e.set(n,i),i}function uIe(n){let{element:e,boundary:t,rootBoundary:i,strategy:s}=n;const r=[...t==="clippingAncestors"?r4(e)?[]:dIe(e,this._c):[].concat(t),i],a=r[0],l=r.reduce((c,d)=>{const u=dQ(e,d,s);return c.top=Ya(u.top,c.top),c.right=Fm(u.right,c.right),c.bottom=Fm(u.bottom,c.bottom),c.left=Ya(u.left,c.left),c},dQ(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function hIe(n){const{width:e,height:t}=Dce(n);return{width:e,height:t}}function fIe(n,e,t){const i=Lu(e),s=Fu(e),o=t==="fixed",r=dv(n,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=gu(0);if(i||!i&&!o)if((v1(e)!=="body"||mI(s))&&(a=a4(e)),i){const h=dv(e,!0,o,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else s&&(l.x=W$(s));const c=s&&!i&&!o?Rce(s,a):gu(0),d=r.left+a.scrollLeft-l.x-c.x,u=r.top+a.scrollTop-l.y-c.y;return{x:d,y:u,width:r.width,height:r.height}}function e3(n){return od(n).position==="static"}function uQ(n,e){if(!Lu(n)||od(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Fu(n)===t&&(t=t.ownerDocument.body),t}function Pce(n,e){const t=rl(n);if(r4(n))return t;if(!Lu(n)){let s=Wm(n);for(;s&&!vC(s);){if(sd(s)&&!e3(s))return s;s=Wm(s)}return t}let i=uQ(n,e);for(;i&&tIe(i)&&e3(i);)i=uQ(i,e);return i&&vC(i)&&e3(i)&&!O$(i)?t:i||iIe(n)||t}const gIe=async function(n){const e=this.getOffsetParent||Pce,t=this.getDimensions,i=await t(n.floating);return{reference:fIe(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function mIe(n){return od(n).direction==="rtl"}const pIe={convertOffsetParentRelativeRectToViewportRelativeRect:oIe,getDocumentElement:Fu,getClippingRect:uIe,getOffsetParent:Pce,getElementRects:gIe,getClientRects:rIe,getDimensions:hIe,getScale:ly,isElement:sd,isRTL:mIe};function Ace(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function _Ie(n,e){let t=null,i;const s=Fu(n);function o(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function r(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const c=n.getBoundingClientRect(),{left:d,top:u,width:h,height:f}=c;if(a||e(),!h||!f)return;const m=OE(u),p=OE(s.clientWidth-(d+h)),b=OE(s.clientHeight-(u+f)),v=OE(d),y={rootMargin:-m+"px "+-p+"px "+-b+"px "+-v+"px",threshold:Ya(0,Fm(1,l))||1};let C=!0;function S(x){const k=x[0].intersectionRatio;if(k!==l){if(!C)return r();k?r(!1,k):i=setTimeout(()=>{r(!1,1e-7)},1e3)}k===1&&!Ace(c,n.getBoundingClientRect())&&r(),C=!1}try{t=new IntersectionObserver(S,{...y,root:s.ownerDocument})}catch{t=new IntersectionObserver(S,y)}t.observe(n)}return r(!0),o}function bIe(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=B$(n),d=s||o?[...c?mk(c):[],...mk(e)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",t,{passive:!0}),o&&v.addEventListener("resize",t)});const u=c&&a?_Ie(c,t):null;let h=-1,f=null;r&&(f=new ResizeObserver(v=>{let[w]=v;w&&w.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=f)==null||y.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let m,p=l?dv(n):null;l&&b();function b(){const v=dv(n);p&&!Ace(p,v)&&t(),p=v,m=requestAnimationFrame(b)}return t(),()=>{var v;d.forEach(w=>{s&&w.removeEventListener("scroll",t),o&&w.removeEventListener("resize",t)}),u==null||u(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(m)}}const vIe=XNe,wIe=QNe,yIe=GNe,CIe=eIe,SIe=ZNe,hQ=qNe,xIe=JNe,LIe=(n,e,t)=>{const i=new Map,s={platform:pIe,...t},o={...s.platform,_c:i};return KNe(n,e,{...s,platform:o})};var gT=typeof document<"u"?L.useLayoutEffect:L.useEffect;function zR(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!zR(n[i],e[i]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,s[i]))return!1;for(i=t;i--!==0;){const o=s[i];if(!(o==="_owner"&&n.$$typeof)&&!zR(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function Oce(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function fQ(n,e){const t=Oce(n);return Math.round(e*t)/t}function t3(n){const e=L.useRef(n);return gT(()=>{e.current=n}),e}function kIe(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:s,elements:{reference:o,floating:r}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[d,u]=L.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=L.useState(i);zR(h,i)||f(i);const[m,p]=L.useState(null),[b,v]=L.useState(null),w=L.useCallback(q=>{q!==x.current&&(x.current=q,p(q))},[]),y=L.useCallback(q=>{q!==k.current&&(k.current=q,v(q))},[]),C=o||m,S=r||b,x=L.useRef(null),k=L.useRef(null),N=L.useRef(d),E=l!=null,B=t3(l),A=t3(s),O=t3(c),W=L.useCallback(()=>{if(!x.current||!k.current)return;const q={placement:e,strategy:t,middleware:h};A.current&&(q.platform=A.current),LIe(x.current,k.current,q).then(Z=>{const V={...Z,isPositioned:O.current!==!1};T.current&&!zR(N.current,V)&&(N.current=V,jv.flushSync(()=>{u(V)}))})},[h,e,t,A,O]);gT(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,u(q=>({...q,isPositioned:!1})))},[c]);const T=L.useRef(!1);gT(()=>(T.current=!0,()=>{T.current=!1}),[]),gT(()=>{if(C&&(x.current=C),S&&(k.current=S),C&&S){if(B.current)return B.current(C,S,W);W()}},[C,S,W,B,E]);const M=L.useMemo(()=>({reference:x,floating:k,setReference:w,setFloating:y}),[w,y]),z=L.useMemo(()=>({reference:C,floating:S}),[C,S]),ee=L.useMemo(()=>{const q={position:t,left:0,top:0};if(!z.floating)return q;const Z=fQ(z.floating,d.x),V=fQ(z.floating,d.y);return a?{...q,transform:"translate("+Z+"px, "+V+"px)",...Oce(z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Z,top:V}},[t,a,z.floating,d.x,d.y]);return L.useMemo(()=>({...d,update:W,refs:M,elements:z,floatingStyles:ee}),[d,W,M,z,ee])}const NIe=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:s}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?hQ({element:i.current,padding:s}).fn(t):{}:i?hQ({element:i,padding:s}).fn(t):{}}}},IIe=(n,e)=>({...vIe(n),options:[n,e]}),EIe=(n,e)=>({...wIe(n),options:[n,e]}),DIe=(n,e)=>({...xIe(n),options:[n,e]}),TIe=(n,e)=>({...yIe(n),options:[n,e]}),RIe=(n,e)=>({...CIe(n),options:[n,e]}),MIe=(n,e)=>({...SIe(n),options:[n,e]}),PIe=(n,e)=>({...NIe(n),options:[n,e]});var AIe="Arrow",Fce=L.forwardRef((n,e)=>{const{children:t,width:i=10,height:s=5,...o}=n;return g.jsx(Et.svg,{...o,ref:e,width:i,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});Fce.displayName=AIe;var OIe=Fce;function Bce(n){const[e,t]=L.useState(void 0);return Ro(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let r,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;r=c.inlineSize,a=c.blockSize}else r=n.offsetWidth,a=n.offsetHeight;t({width:r,height:a})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}var H$="Popper",[Wce,w1]=sc(H$),[FIe,Hce]=Wce(H$),Vce=n=>{const{__scopePopper:e,children:t}=n,[i,s]=L.useState(null);return g.jsx(FIe,{scope:e,anchor:i,onAnchorChange:s,children:t})};Vce.displayName=H$;var jce="PopperAnchor",zce=L.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...s}=n,o=Hce(jce,t),r=L.useRef(null),a=oi(e,r);return L.useEffect(()=>{o.onAnchorChange((i==null?void 0:i.current)||r.current)}),i?null:g.jsx(Et.div,{...s,ref:a})});zce.displayName=jce;var V$="PopperContent",[BIe,WIe]=Wce(V$),Uce=L.forwardRef((n,e)=>{var Ee,it,Ge,J,Le,ve;const{__scopePopper:t,side:i="bottom",sideOffset:s=0,align:o="center",alignOffset:r=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:u="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:m,...p}=n,b=Hce(V$,t),[v,w]=L.useState(null),y=oi(e,nt=>w(nt)),[C,S]=L.useState(null),x=Bce(C),k=(x==null?void 0:x.width)??0,N=(x==null?void 0:x.height)??0,E=i+(o!=="center"?"-"+o:""),B=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},A=Array.isArray(c)?c:[c],O=A.length>0,W={padding:B,boundary:A.filter(VIe),altBoundary:O},{refs:T,floatingStyles:M,placement:z,isPositioned:ee,middlewareData:q}=kIe({strategy:"fixed",placement:E,whileElementsMounted:(...nt)=>bIe(...nt,{animationFrame:f==="always"}),elements:{reference:b.anchor},middleware:[IIe({mainAxis:s+N,alignmentAxis:r}),l&&EIe({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?DIe():void 0,...W}),l&&TIe({...W}),RIe({...W,apply:({elements:nt,rects:St,availableWidth:zi,availableHeight:hs})=>{const{width:Bs,height:Af}=St.reference,cc=nt.floating.style;cc.setProperty("--radix-popper-available-width",`${zi}px`),cc.setProperty("--radix-popper-available-height",`${hs}px`),cc.setProperty("--radix-popper-anchor-width",`${Bs}px`),cc.setProperty("--radix-popper-anchor-height",`${Af}px`)}}),C&&PIe({element:C,padding:a}),jIe({arrowWidth:k,arrowHeight:N}),h&&MIe({strategy:"referenceHidden",...W})]}),[Z,V]=qce(z),le=Gn(m);Ro(()=>{ee&&(le==null||le())},[ee,le]);const Fe=(Ee=q.arrow)==null?void 0:Ee.x,ke=(it=q.arrow)==null?void 0:it.y,De=((Ge=q.arrow)==null?void 0:Ge.centerOffset)!==0,[ce,Re]=L.useState();return Ro(()=>{v&&Re(window.getComputedStyle(v).zIndex)},[v]),g.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:ee?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(J=q.transformOrigin)==null?void 0:J.x,(Le=q.transformOrigin)==null?void 0:Le.y].join(" "),...((ve=q.hide)==null?void 0:ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:g.jsx(BIe,{scope:t,placedSide:Z,onArrowChange:S,arrowX:Fe,arrowY:ke,shouldHideArrow:De,children:g.jsx(Et.div,{"data-side":Z,"data-align":V,...p,ref:y,style:{...p.style,animation:ee?void 0:"none"}})})})});Uce.displayName=V$;var $ce="PopperArrow",HIe={top:"bottom",right:"left",bottom:"top",left:"right"},Kce=L.forwardRef(function(e,t){const{__scopePopper:i,...s}=e,o=WIe($ce,i),r=HIe[o.placedSide];return g.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[r]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:g.jsx(OIe,{...s,ref:t,style:{...s.style,display:"block"}})})});Kce.displayName=$ce;function VIe(n){return n!==null}var jIe=n=>({name:"transformOrigin",options:n,fn(e){var b,v,w;const{placement:t,rects:i,middlewareData:s}=e,r=((b=s.arrow)==null?void 0:b.centerOffset)!==0,a=r?0:n.arrowWidth,l=r?0:n.arrowHeight,[c,d]=qce(t),u={start:"0%",center:"50%",end:"100%"}[d],h=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,f=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let m="",p="";return c==="bottom"?(m=r?u:`${h}px`,p=`${-l}px`):c==="top"?(m=r?u:`${h}px`,p=`${i.floating.height+l}px`):c==="right"?(m=`${-l}px`,p=r?u:`${f}px`):c==="left"&&(m=`${i.floating.width+l}px`,p=r?u:`${f}px`),{data:{x:m,y:p}}}});function qce(n){const[e,t="center"]=n.split("-");return[e,t]}var j$=Vce,z$=zce,U$=Uce,$$=Kce,i3="rovingFocusGroup.onEntryFocus",zIe={bubbles:!1,cancelable:!0},l4="RovingFocusGroup",[R9,Gce,UIe]=cI(l4),[$Ie,c4]=sc(l4,[UIe]),[KIe,qIe]=$Ie(l4),Zce=L.forwardRef((n,e)=>g.jsx(R9.Provider,{scope:n.__scopeRovingFocusGroup,children:g.jsx(R9.Slot,{scope:n.__scopeRovingFocusGroup,children:g.jsx(GIe,{...n,ref:e})})}));Zce.displayName=l4;var GIe=L.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:i,loop:s=!1,dir:o,currentTabStopId:r,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...u}=n,h=L.useRef(null),f=oi(e,h),m=_1(o),[p=null,b]=af({prop:r,defaultProp:a,onChange:l}),[v,w]=L.useState(!1),y=Gn(c),C=Gce(t),S=L.useRef(!1),[x,k]=L.useState(0);return L.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(i3,y),()=>N.removeEventListener(i3,y)},[y]),g.jsx(KIe,{scope:t,orientation:i,dir:m,loop:s,currentTabStopId:p,onItemFocus:L.useCallback(N=>b(N),[b]),onItemShiftTab:L.useCallback(()=>w(!0),[]),onFocusableItemAdd:L.useCallback(()=>k(N=>N+1),[]),onFocusableItemRemove:L.useCallback(()=>k(N=>N-1),[]),children:g.jsx(Et.div,{tabIndex:v||x===0?-1:0,"data-orientation":i,...u,ref:f,style:{outline:"none",...n.style},onMouseDown:$e(n.onMouseDown,()=>{S.current=!0}),onFocus:$e(n.onFocus,N=>{const E=!S.current;if(N.target===N.currentTarget&&E&&!v){const B=new CustomEvent(i3,zIe);if(N.currentTarget.dispatchEvent(B),!B.defaultPrevented){const A=C().filter(z=>z.focusable),O=A.find(z=>z.active),W=A.find(z=>z.id===p),M=[O,W,...A].filter(Boolean).map(z=>z.ref.current);Qce(M,d)}}S.current=!1}),onBlur:$e(n.onBlur,()=>w(!1))})})}),Yce="RovingFocusGroupItem",Xce=L.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:i=!0,active:s=!1,tabStopId:o,...r}=n,a=qc(),l=o||a,c=qIe(Yce,t),d=c.currentTabStopId===l,u=Gce(t),{onFocusableItemAdd:h,onFocusableItemRemove:f}=c;return L.useEffect(()=>{if(i)return h(),()=>f()},[i,h,f]),g.jsx(R9.ItemSlot,{scope:t,id:l,focusable:i,active:s,children:g.jsx(Et.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...r,ref:e,onMouseDown:$e(n.onMouseDown,m=>{i?c.onItemFocus(l):m.preventDefault()}),onFocus:$e(n.onFocus,()=>c.onItemFocus(l)),onKeyDown:$e(n.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const p=XIe(m,c.orientation,c.dir);if(p!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let v=u().filter(w=>w.focusable).map(w=>w.ref.current);if(p==="last")v.reverse();else if(p==="prev"||p==="next"){p==="prev"&&v.reverse();const w=v.indexOf(m.currentTarget);v=c.loop?QIe(v,w+1):v.slice(w+1)}setTimeout(()=>Qce(v))}})})})});Xce.displayName=Yce;var ZIe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function YIe(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function XIe(n,e,t){const i=YIe(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return ZIe[i]}function Qce(n,e=!1){const t=document.activeElement;for(const i of n)if(i===t||(i.focus({preventScroll:e}),document.activeElement!==t))return}function QIe(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var Jce=Zce,ede=Xce,M9=["Enter"," "],JIe=["ArrowDown","PageUp","Home"],tde=["ArrowUp","PageDown","End"],eEe=[...JIe,...tde],tEe={ltr:[...M9,"ArrowRight"],rtl:[...M9,"ArrowLeft"]},iEe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pI="Menu",[pk,nEe,sEe]=cI(pI),[Uv,ide]=sc(pI,[sEe,w1,c4]),d4=w1(),nde=c4(),[oEe,$v]=Uv(pI),[rEe,_I]=Uv(pI),sde=n=>{const{__scopeMenu:e,open:t=!1,children:i,dir:s,onOpenChange:o,modal:r=!0}=n,a=d4(e),[l,c]=L.useState(null),d=L.useRef(!1),u=Gn(o),h=_1(s);return L.useEffect(()=>{const f=()=>{d.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>d.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),g.jsx(j$,{...a,children:g.jsx(oEe,{scope:e,open:t,onOpenChange:u,content:l,onContentChange:c,children:g.jsx(rEe,{scope:e,onClose:L.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:d,dir:h,modal:r,children:i})})})};sde.displayName=pI;var aEe="MenuAnchor",K$=L.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n,s=d4(t);return g.jsx(z$,{...s,...i,ref:e})});K$.displayName=aEe;var q$="MenuPortal",[lEe,ode]=Uv(q$,{forceMount:void 0}),rde=n=>{const{__scopeMenu:e,forceMount:t,children:i,container:s}=n,o=$v(q$,e);return g.jsx(lEe,{scope:e,forceMount:t,children:g.jsx(qr,{present:t||o.open,children:g.jsx(dI,{asChild:!0,container:s,children:i})})})};rde.displayName=q$;var $l="MenuContent",[cEe,G$]=Uv($l),ade=L.forwardRef((n,e)=>{const t=ode($l,n.__scopeMenu),{forceMount:i=t.forceMount,...s}=n,o=$v($l,n.__scopeMenu),r=_I($l,n.__scopeMenu);return g.jsx(pk.Provider,{scope:n.__scopeMenu,children:g.jsx(qr,{present:i||o.open,children:g.jsx(pk.Slot,{scope:n.__scopeMenu,children:r.modal?g.jsx(dEe,{...s,ref:e}):g.jsx(uEe,{...s,ref:e})})})})}),dEe=L.forwardRef((n,e)=>{const t=$v($l,n.__scopeMenu),i=L.useRef(null),s=oi(e,i);return L.useEffect(()=>{const o=i.current;if(o)return I$(o)},[]),g.jsx(Z$,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:$e(n.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),uEe=L.forwardRef((n,e)=>{const t=$v($l,n.__scopeMenu);return g.jsx(Z$,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),hEe=nv("MenuContent.ScrollLock"),Z$=L.forwardRef((n,e)=>{const{__scopeMenu:t,loop:i=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:r,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:f,disableOutsideScroll:m,...p}=n,b=$v($l,t),v=_I($l,t),w=d4(t),y=nde(t),C=nEe(t),[S,x]=L.useState(null),k=L.useRef(null),N=oi(e,k,b.onContentChange),E=L.useRef(0),B=L.useRef(""),A=L.useRef(0),O=L.useRef(null),W=L.useRef("right"),T=L.useRef(0),M=m?s4:L.Fragment,z=m?{as:hEe,allowPinchZoom:!0}:void 0,ee=Z=>{var Ee,it;const V=B.current+Z,le=C().filter(Ge=>!Ge.disabled),Fe=document.activeElement,ke=(Ee=le.find(Ge=>Ge.ref.current===Fe))==null?void 0:Ee.textValue,De=le.map(Ge=>Ge.textValue),ce=xEe(De,V,ke),Re=(it=le.find(Ge=>Ge.textValue===ce))==null?void 0:it.ref.current;(function Ge(J){B.current=J,window.clearTimeout(E.current),J!==""&&(E.current=window.setTimeout(()=>Ge(""),1e3))})(V),Re&&setTimeout(()=>Re.focus())};L.useEffect(()=>()=>window.clearTimeout(E.current),[]),N$();const q=L.useCallback(Z=>{var le,Fe;return W.current===((le=O.current)==null?void 0:le.side)&&kEe(Z,(Fe=O.current)==null?void 0:Fe.area)},[]);return g.jsx(cEe,{scope:t,searchRef:B,onItemEnter:L.useCallback(Z=>{q(Z)&&Z.preventDefault()},[q]),onItemLeave:L.useCallback(Z=>{var V;q(Z)||((V=k.current)==null||V.focus(),x(null))},[q]),onTriggerLeave:L.useCallback(Z=>{q(Z)&&Z.preventDefault()},[q]),pointerGraceTimerRef:A,onPointerGraceIntentChange:L.useCallback(Z=>{O.current=Z},[]),children:g.jsx(M,{...z,children:g.jsx(i4,{asChild:!0,trapped:s,onMountAutoFocus:$e(o,Z=>{var V;Z.preventDefault(),(V=k.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:r,children:g.jsx(f1,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:f,children:g.jsx(Jce,{asChild:!0,...y,dir:v.dir,orientation:"vertical",loop:i,currentTabStopId:S,onCurrentTabStopIdChange:x,onEntryFocus:$e(l,Z=>{v.isUsingKeyboardRef.current||Z.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(U$,{role:"menu","aria-orientation":"vertical","data-state":Sde(b.open),"data-radix-menu-content":"",dir:v.dir,...w,...p,ref:N,style:{outline:"none",...p.style},onKeyDown:$e(p.onKeyDown,Z=>{const le=Z.target.closest("[data-radix-menu-content]")===Z.currentTarget,Fe=Z.ctrlKey||Z.altKey||Z.metaKey,ke=Z.key.length===1;le&&(Z.key==="Tab"&&Z.preventDefault(),!Fe&&ke&&ee(Z.key));const De=k.current;if(Z.target!==De||!eEe.includes(Z.key))return;Z.preventDefault();const Re=C().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);tde.includes(Z.key)&&Re.reverse(),CEe(Re)}),onBlur:$e(n.onBlur,Z=>{Z.currentTarget.contains(Z.target)||(window.clearTimeout(E.current),B.current="")}),onPointerMove:$e(n.onPointerMove,_k(Z=>{const V=Z.target,le=T.current!==Z.clientX;if(Z.currentTarget.contains(V)&&le){const Fe=Z.clientX>T.current?"right":"left";W.current=Fe,T.current=Z.clientX}}))})})})})})})});ade.displayName=$l;var fEe="MenuGroup",Y$=L.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return g.jsx(Et.div,{role:"group",...i,ref:e})});Y$.displayName=fEe;var gEe="MenuLabel",lde=L.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return g.jsx(Et.div,{...i,ref:e})});lde.displayName=gEe;var UR="MenuItem",gQ="menu.itemSelect",u4=L.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:i,...s}=n,o=L.useRef(null),r=_I(UR,n.__scopeMenu),a=G$(UR,n.__scopeMenu),l=oi(e,o),c=L.useRef(!1),d=()=>{const u=o.current;if(!t&&u){const h=new CustomEvent(gQ,{bubbles:!0,cancelable:!0});u.addEventListener(gQ,f=>i==null?void 0:i(f),{once:!0}),c$(u,h),h.defaultPrevented?c.current=!1:r.onClose()}};return g.jsx(cde,{...s,ref:l,disabled:t,onClick:$e(n.onClick,d),onPointerDown:u=>{var h;(h=n.onPointerDown)==null||h.call(n,u),c.current=!0},onPointerUp:$e(n.onPointerUp,u=>{var h;c.current||(h=u.currentTarget)==null||h.click()}),onKeyDown:$e(n.onKeyDown,u=>{const h=a.searchRef.current!=="";t||h&&u.key===" "||M9.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});u4.displayName=UR;var cde=L.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:i=!1,textValue:s,...o}=n,r=G$(UR,t),a=nde(t),l=L.useRef(null),c=oi(e,l),[d,u]=L.useState(!1),[h,f]=L.useState("");return L.useEffect(()=>{const m=l.current;m&&f((m.textContent??"").trim())},[o.children]),g.jsx(pk.ItemSlot,{scope:t,disabled:i,textValue:s??h,children:g.jsx(ede,{asChild:!0,...a,focusable:!i,children:g.jsx(Et.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...o,ref:c,onPointerMove:$e(n.onPointerMove,_k(m=>{i?r.onItemLeave(m):(r.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:$e(n.onPointerLeave,_k(m=>r.onItemLeave(m))),onFocus:$e(n.onFocus,()=>u(!0)),onBlur:$e(n.onBlur,()=>u(!1))})})})}),mEe="MenuCheckboxItem",dde=L.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:i,...s}=n;return g.jsx(mde,{scope:n.__scopeMenu,checked:t,children:g.jsx(u4,{role:"menuitemcheckbox","aria-checked":$R(t)?"mixed":t,...s,ref:e,"data-state":Q$(t),onSelect:$e(s.onSelect,()=>i==null?void 0:i($R(t)?!0:!t),{checkForDefaultPrevented:!1})})})});dde.displayName=mEe;var ude="MenuRadioGroup",[pEe,_Ee]=Uv(ude,{value:void 0,onValueChange:()=>{}}),hde=L.forwardRef((n,e)=>{const{value:t,onValueChange:i,...s}=n,o=Gn(i);return g.jsx(pEe,{scope:n.__scopeMenu,value:t,onValueChange:o,children:g.jsx(Y$,{...s,ref:e})})});hde.displayName=ude;var fde="MenuRadioItem",gde=L.forwardRef((n,e)=>{const{value:t,...i}=n,s=_Ee(fde,n.__scopeMenu),o=t===s.value;return g.jsx(mde,{scope:n.__scopeMenu,checked:o,children:g.jsx(u4,{role:"menuitemradio","aria-checked":o,...i,ref:e,"data-state":Q$(o),onSelect:$e(i.onSelect,()=>{var r;return(r=s.onValueChange)==null?void 0:r.call(s,t)},{checkForDefaultPrevented:!1})})})});gde.displayName=fde;var X$="MenuItemIndicator",[mde,bEe]=Uv(X$,{checked:!1}),pde=L.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:i,...s}=n,o=bEe(X$,t);return g.jsx(qr,{present:i||$R(o.checked)||o.checked===!0,children:g.jsx(Et.span,{...s,ref:e,"data-state":Q$(o.checked)})})});pde.displayName=X$;var vEe="MenuSeparator",_de=L.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return g.jsx(Et.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});_de.displayName=vEe;var wEe="MenuArrow",bde=L.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n,s=d4(t);return g.jsx($$,{...s,...i,ref:e})});bde.displayName=wEe;var yEe="MenuSub",[Rrt,vde]=Uv(yEe),qS="MenuSubTrigger",wde=L.forwardRef((n,e)=>{const t=$v(qS,n.__scopeMenu),i=_I(qS,n.__scopeMenu),s=vde(qS,n.__scopeMenu),o=G$(qS,n.__scopeMenu),r=L.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=o,c={__scopeMenu:n.__scopeMenu},d=L.useCallback(()=>{r.current&&window.clearTimeout(r.current),r.current=null},[]);return L.useEffect(()=>d,[d]),L.useEffect(()=>{const u=a.current;return()=>{window.clearTimeout(u),l(null)}},[a,l]),g.jsx(K$,{asChild:!0,...c,children:g.jsx(cde,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":Sde(t.open),...n,ref:qO(e,s.onTriggerChange),onClick:u=>{var h;(h=n.onClick)==null||h.call(n,u),!(n.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:$e(n.onPointerMove,_k(u=>{o.onItemEnter(u),!u.defaultPrevented&&!n.disabled&&!t.open&&!r.current&&(o.onPointerGraceIntentChange(null),r.current=window.setTimeout(()=>{t.onOpenChange(!0),d()},100))})),onPointerLeave:$e(n.onPointerLeave,_k(u=>{var f,m;d();const h=(f=t.content)==null?void 0:f.getBoundingClientRect();if(h){const p=(m=t.content)==null?void 0:m.dataset.side,b=p==="right",v=b?-5:5,w=h[b?"left":"right"],y=h[b?"right":"left"];o.onPointerGraceIntentChange({area:[{x:u.clientX+v,y:u.clientY},{x:w,y:h.top},{x:y,y:h.top},{x:y,y:h.bottom},{x:w,y:h.bottom}],side:p}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(u),u.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:$e(n.onKeyDown,u=>{var f;const h=o.searchRef.current!=="";n.disabled||h&&u.key===" "||tEe[i.dir].includes(u.key)&&(t.onOpenChange(!0),(f=t.content)==null||f.focus(),u.preventDefault())})})})});wde.displayName=qS;var yde="MenuSubContent",Cde=L.forwardRef((n,e)=>{const t=ode($l,n.__scopeMenu),{forceMount:i=t.forceMount,...s}=n,o=$v($l,n.__scopeMenu),r=_I($l,n.__scopeMenu),a=vde(yde,n.__scopeMenu),l=L.useRef(null),c=oi(e,l);return g.jsx(pk.Provider,{scope:n.__scopeMenu,children:g.jsx(qr,{present:i||o.open,children:g.jsx(pk.Slot,{scope:n.__scopeMenu,children:g.jsx(Z$,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:r.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var u;r.isUsingKeyboardRef.current&&((u=l.current)==null||u.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:$e(n.onFocusOutside,d=>{d.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:$e(n.onEscapeKeyDown,d=>{r.onClose(),d.preventDefault()}),onKeyDown:$e(n.onKeyDown,d=>{var f;const u=d.currentTarget.contains(d.target),h=iEe[r.dir].includes(d.key);u&&h&&(o.onOpenChange(!1),(f=a.trigger)==null||f.focus(),d.preventDefault())})})})})})});Cde.displayName=yde;function Sde(n){return n?"open":"closed"}function $R(n){return n==="indeterminate"}function Q$(n){return $R(n)?"indeterminate":n?"checked":"unchecked"}function CEe(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function SEe(n,e){return n.map((t,i)=>n[(e+i)%n.length])}function xEe(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let r=SEe(n,Math.max(o,0));s.length===1&&(r=r.filter(c=>c!==t));const l=r.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function LEe(n,e){const{x:t,y:i}=n;let s=!1;for(let o=0,r=e.length-1;o<e.length;r=o++){const a=e[o].x,l=e[o].y,c=e[r].x,d=e[r].y;l>i!=d>i&&t<(c-a)*(i-l)/(d-l)+a&&(s=!s)}return s}function kEe(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return LEe(t,e)}function _k(n){return e=>e.pointerType==="mouse"?n(e):void 0}var NEe=sde,IEe=K$,EEe=rde,DEe=ade,TEe=Y$,REe=lde,MEe=u4,PEe=dde,AEe=hde,OEe=gde,FEe=pde,BEe=_de,WEe=bde,HEe=wde,VEe=Cde,J$="DropdownMenu",[jEe,Mrt]=sc(J$,[ide]),Gr=ide(),[zEe,xde]=jEe(J$),Lde=n=>{const{__scopeDropdownMenu:e,children:t,dir:i,open:s,defaultOpen:o,onOpenChange:r,modal:a=!0}=n,l=Gr(e),c=L.useRef(null),[d=!1,u]=af({prop:s,defaultProp:o,onChange:r});return g.jsx(zEe,{scope:e,triggerId:qc(),triggerRef:c,contentId:qc(),open:d,onOpenChange:u,onOpenToggle:L.useCallback(()=>u(h=>!h),[u]),modal:a,children:g.jsx(NEe,{...l,open:d,onOpenChange:u,dir:i,modal:a,children:t})})};Lde.displayName=J$;var kde="DropdownMenuTrigger",Nde=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:i=!1,...s}=n,o=xde(kde,t),r=Gr(t);return g.jsx(IEe,{asChild:!0,...r,children:g.jsx(Et.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...s,ref:qO(e,o.triggerRef),onPointerDown:$e(n.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:$e(n.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Nde.displayName=kde;var UEe="DropdownMenuPortal",Ide=n=>{const{__scopeDropdownMenu:e,...t}=n,i=Gr(e);return g.jsx(EEe,{...i,...t})};Ide.displayName=UEe;var Ede="DropdownMenuContent",Dde=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=xde(Ede,t),o=Gr(t),r=L.useRef(!1);return g.jsx(DEe,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...i,ref:e,onCloseAutoFocus:$e(n.onCloseAutoFocus,a=>{var l;r.current||(l=s.triggerRef.current)==null||l.focus(),r.current=!1,a.preventDefault()}),onInteractOutside:$e(n.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;(!s.modal||d)&&(r.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Dde.displayName=Ede;var $Ee="DropdownMenuGroup",KEe=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Gr(t);return g.jsx(TEe,{...s,...i,ref:e})});KEe.displayName=$Ee;var qEe="DropdownMenuLabel",Tde=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Gr(t);return g.jsx(REe,{...s,...i,ref:e})});Tde.displayName=qEe;var GEe="DropdownMenuItem",Rde=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Gr(t);return g.jsx(MEe,{...s,...i,ref:e})});Rde.displayName=GEe;var ZEe="DropdownMenuCheckboxItem",Mde=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Gr(t);return g.jsx(PEe,{...s,...i,ref:e})});Mde.displayName=ZEe;var YEe="DropdownMenuRadioGroup",XEe=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Gr(t);return g.jsx(AEe,{...s,...i,ref:e})});XEe.displayName=YEe;var QEe="DropdownMenuRadioItem",Pde=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Gr(t);return g.jsx(OEe,{...s,...i,ref:e})});Pde.displayName=QEe;var JEe="DropdownMenuItemIndicator",Ade=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Gr(t);return g.jsx(FEe,{...s,...i,ref:e})});Ade.displayName=JEe;var eDe="DropdownMenuSeparator",Ode=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Gr(t);return g.jsx(BEe,{...s,...i,ref:e})});Ode.displayName=eDe;var tDe="DropdownMenuArrow",iDe=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Gr(t);return g.jsx(WEe,{...s,...i,ref:e})});iDe.displayName=tDe;var nDe="DropdownMenuSubTrigger",Fde=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Gr(t);return g.jsx(HEe,{...s,...i,ref:e})});Fde.displayName=nDe;var sDe="DropdownMenuSubContent",Bde=L.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Gr(t);return g.jsx(VEe,{...s,...i,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Bde.displayName=sDe;var oDe=Lde,rDe=Nde,aDe=Ide,Wde=Dde,Hde=Tde,Vde=Rde,jde=Mde,zde=Pde,Ude=Ade,$de=Ode,Kde=Fde,qde=Bde;const lDe=oDe,cDe=rDe,dDe=L.forwardRef(({className:n,inset:e,children:t,...i},s)=>g.jsxs(Kde,{ref:s,className:Yt("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...i,children:[t,g.jsx(zae,{className:"ml-auto"})]}));dDe.displayName=Kde.displayName;const uDe=L.forwardRef(({className:n,...e},t)=>g.jsx(qde,{ref:t,className:Yt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",n),...e}));uDe.displayName=qde.displayName;const Gde=L.forwardRef(({className:n,sideOffset:e=4,...t},i)=>g.jsx(aDe,{children:g.jsx(Wde,{ref:i,sideOffset:e,className:Yt("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",n),...t})}));Gde.displayName=Wde.displayName;const Zde=L.forwardRef(({className:n,inset:e,...t},i)=>g.jsx(Vde,{ref:i,className:Yt("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...t}));Zde.displayName=Vde.displayName;const hDe=L.forwardRef(({className:n,children:e,checked:t,...i},s)=>g.jsxs(jde,{ref:s,className:Yt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...i,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(Ude,{children:g.jsx(zn,{className:"h-4 w-4"})})}),e]}));hDe.displayName=jde.displayName;const fDe=L.forwardRef(({className:n,children:e,...t},i)=>g.jsxs(zde,{ref:i,className:Yt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(Ude,{children:g.jsx(aSe,{className:"h-2 w-2 fill-current"})})}),e]}));fDe.displayName=zde.displayName;const gDe=L.forwardRef(({className:n,inset:e,...t},i)=>g.jsx(Hde,{ref:i,className:Yt("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));gDe.displayName=Hde.displayName;const mDe=L.forwardRef(({className:n,...e},t)=>g.jsx($de,{ref:t,className:Yt("-mx-1 my-1 h-px bg-muted",n),...e}));mDe.displayName=$de.displayName;function Yde({variant:n="iconAndLabel",showRandomize:e=!0}){const{currentTheme:t,setTheme:i,randomizeTheme:s,availableThemes:o}=fI(),r=({theme:a})=>g.jsx("div",{className:"w-5 h-5 rounded-full border border-gray-700 mr-2",style:{background:a.colors.primary,boxShadow:`0 0 0 1px ${a.colors.secondary}`}});return g.jsxs("div",{className:"flex items-center",children:[g.jsxs(lDe,{children:[g.jsx(cDe,{asChild:!0,children:g.jsxs(Se,{variant:"outline",size:"sm",className:`flex items-center gap-2 border-${t.id==="desert"?"gray-400":"gray-700"}`,style:{borderColor:t.colors.secondary,backgroundColor:`${t.colors.primary}22`},children:[g.jsx(r,{theme:t}),n!=="iconOnly"&&g.jsx("span",{className:"text-sm",children:n==="full"?`${t.name} Biome`:"Theme"}),g.jsx(_Se,{className:"h-3.5 w-3.5 ml-1"})]})}),g.jsx(Gde,{align:"end",className:"w-56 biome-themed-card",children:o.map(a=>g.jsxs(Zde,{onClick:()=>i(a.id),className:`flex items-center cursor-pointer ${t.id===a.id?"bg-primary/20":""}`,children:[g.jsx(r,{theme:a}),g.jsx("span",{children:a.name}),n==="full"&&g.jsx("span",{className:"text-[10px] text-gray-400 block w-full overflow-hidden text-ellipsis ml-1",children:a.description})]},a.id))})]}),e&&g.jsx(Se,{variant:"ghost",size:"sm",onClick:s,className:"ml-1 p-2 h-8 w-8",title:"Randomize theme",children:g.jsx(CSe,{className:"h-4 w-4"})})]})}function pDe(){const{user:n,logoutMutation:e}=e4(),[,t]=JO(),[i,s]=L.useState(!1),{data:o=[],isLoading:r,error:a}=TR({queryKey:["/api/projects"],queryFn:ek({on401:"throw"}),enabled:!!n}),l=()=>{e.mutate()},c=()=>{s(!0)};if(!n)return g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsx(Qi,{className:"h-8 w-8 animate-spin text-primary"})});const{randomizeTheme:d}=fI();return g.jsxs("div",{className:"min-h-screen",children:[g.jsx("header",{className:"bg-gray-800/80 border-b border-gray-700",children:g.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(XL,{className:"h-6 w-6 text-emerald-500"}),g.jsx("h1",{className:"text-xl font-bold text-white",children:"CodeMate"})]}),g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsxs("span",{className:"text-gray-300",children:["Welcome, ",n.username,"!"]}),g.jsx(Yde,{variant:"full"}),g.jsxs(Se,{variant:"outline",onClick:l,disabled:e.isPending,children:[e.isPending?g.jsx(Qi,{className:"h-4 w-4 animate-spin mr-2"}):null,"Logout"]})]})]})}),g.jsxs("main",{className:"container mx-auto px-4 py-8",children:[g.jsxs("div",{className:"mb-8",children:[g.jsx(ONe,{className:"mb-6"}),g.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-white mb-2 font-minecraft",children:"Minecraft Mod Development"}),g.jsx("p",{className:"text-gray-300",children:"Build professional NeoForge 1.21.5 mods with Claude AI assistance"})]}),g.jsx(Se,{onClick:d,className:"mt-4 md:mt-0 biome-themed-button",children:"Change Biome Theme"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[g.jsxs(Bt,{className:"biome-themed-card overflow-hidden relative",children:[g.jsx("div",{className:"absolute inset-0 opacity-10",children:g.jsx(Wc,{isFixed:!1,opacity:.2})}),g.jsxs(Mg,{className:"relative z-10",children:[g.jsxs(Pg,{className:"flex items-center font-minecraft",children:[g.jsx(Ex,{className:"h-5 w-5 mr-2",style:{color:"var(--theme-accent)"}}),"New Project"]}),g.jsx(Ag,{className:"text-gray-200",children:"Create a new mod project from scratch"})]}),g.jsx(Og,{className:"relative z-10",children:g.jsx("p",{className:"text-sm text-gray-300",children:"Start with a clean NeoForge 1.21.5 MDK setup with all the necessary boilerplate code pre-configured."})}),g.jsx(C_,{className:"relative z-10",children:g.jsx(Se,{className:"w-full biome-themed-button",onClick:c,children:"Create Project"})})]}),g.jsxs(Bt,{className:"biome-themed-card overflow-hidden relative",children:[g.jsx("div",{className:"absolute inset-0 opacity-10",children:g.jsx(Wc,{isFixed:!1,opacity:.2})}),g.jsxs(Mg,{className:"relative z-10",children:[g.jsxs(Pg,{className:"flex items-center font-minecraft",children:[g.jsx(qae,{className:"h-5 w-5 mr-2",style:{color:"var(--theme-accent)"}}),"Import Existing"]}),g.jsx(Ag,{className:"text-gray-200",children:"Import an existing mod for upgrading"})]}),g.jsx(Og,{className:"relative z-10",children:g.jsx("p",{className:"text-sm text-gray-300",children:"Import existing mods to upgrade to NeoForge 1.21.5 with AI-assisted migration."})}),g.jsx(C_,{className:"relative z-10",children:g.jsx(Se,{variant:"outline",className:"w-full border-gray-600 hover:bg-gray-700/50",onClick:c,children:"Import Project"})})]}),g.jsxs(Bt,{className:"biome-themed-card overflow-hidden relative",children:[g.jsx("div",{className:"absolute inset-0 opacity-10",children:g.jsx(Wc,{isFixed:!1,opacity:.2})}),g.jsxs(Mg,{className:"relative z-10",children:[g.jsxs(Pg,{className:"flex items-center font-minecraft",children:[g.jsx(eSe,{className:"h-5 w-5 mr-2",style:{color:"var(--theme-accent)"}}),"Guides"]}),g.jsx(Ag,{className:"text-gray-200",children:"Explore tutorials and documentation"})]}),g.jsx(Og,{className:"relative z-10",children:g.jsx("p",{className:"text-sm text-gray-300",children:"Browse tutorials, migration guides, and documentation for NeoForge 1.21.5."})}),g.jsx(C_,{className:"relative z-10",children:g.jsx(Se,{variant:"outline",className:"w-full border-gray-600 hover:bg-gray-700/50",children:"View Guides"})})]})]}),g.jsxs("div",{className:"mt-12",children:[g.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Your Projects"}),r?g.jsx("div",{className:"flex justify-center p-12",children:g.jsx(Qi,{className:"h-8 w-8 animate-spin text-primary"})}):a?g.jsxs("div",{className:"bg-red-900/20 border border-red-700 p-6 rounded-lg text-center",children:[g.jsx("h3",{className:"text-lg font-medium text-red-300 mb-2",children:"Error loading projects"}),g.jsx("p",{className:"text-gray-400 mb-4",children:"There was a problem loading your projects."}),g.jsx(Se,{variant:"outline",children:"Retry"})]}):o&&o.length>0?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(u=>g.jsxs(Bt,{className:"biome-themed-card overflow-hidden relative",children:[g.jsx("div",{className:"absolute inset-0 opacity-10",children:g.jsx(Wc,{isFixed:!1,opacity:.2})}),g.jsxs(Mg,{className:"relative z-10",children:[g.jsx(Pg,{className:"font-minecraft",children:u.name}),g.jsxs(Ag,{className:"text-gray-200",children:[u.minecraftVersion," • ",u.modVersion]})]}),g.jsx(Og,{className:"relative z-10",children:g.jsx("p",{className:"text-sm text-gray-300 line-clamp-3",children:u.description})}),g.jsx(C_,{className:"relative z-10",children:g.jsx(Se,{className:"w-full biome-themed-button",onClick:()=>t(`/projects/${u.id}`),children:"Open Project"})})]},u.id))}):g.jsxs("div",{className:"biome-themed-card p-8 rounded-lg flex flex-col items-center justify-center relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 opacity-10",children:g.jsx(Wc,{isFixed:!1,opacity:.2})}),g.jsx(p$,{className:"h-10 w-10 mb-4 relative z-10",style:{color:"var(--theme-accent)"}}),g.jsx("h3",{className:"text-xl font-medium text-gray-100 mb-2 font-minecraft relative z-10",children:"No Projects Yet"}),g.jsx("p",{className:"text-gray-300 text-center max-w-md mb-6 relative z-10",children:"Create your first mod project to get started with NeoForge 1.21.5 development."}),g.jsx(Se,{onClick:c,className:"relative z-10 biome-themed-button",children:"Create Your First Project"})]})]})]}),g.jsx(ANe,{open:i,onOpenChange:s})]})}var eK="Tabs",[_De,Prt]=sc(eK,[c4]),Xde=c4(),[bDe,tK]=_De(eK),Qde=L.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,onValueChange:s,defaultValue:o,orientation:r="horizontal",dir:a,activationMode:l="automatic",...c}=n,d=_1(a),[u,h]=af({prop:i,onChange:s,defaultProp:o});return g.jsx(bDe,{scope:t,baseId:qc(),value:u,onValueChange:h,orientation:r,dir:d,activationMode:l,children:g.jsx(Et.div,{dir:d,"data-orientation":r,...c,ref:e})})});Qde.displayName=eK;var Jde="TabsList",eue=L.forwardRef((n,e)=>{const{__scopeTabs:t,loop:i=!0,...s}=n,o=tK(Jde,t),r=Xde(t);return g.jsx(Jce,{asChild:!0,...r,orientation:o.orientation,dir:o.dir,loop:i,children:g.jsx(Et.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});eue.displayName=Jde;var tue="TabsTrigger",iue=L.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,disabled:s=!1,...o}=n,r=tK(tue,t),a=Xde(t),l=oue(r.baseId,i),c=rue(r.baseId,i),d=i===r.value;return g.jsx(ede,{asChild:!0,...a,focusable:!s,active:d,children:g.jsx(Et.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...o,ref:e,onMouseDown:$e(n.onMouseDown,u=>{!s&&u.button===0&&u.ctrlKey===!1?r.onValueChange(i):u.preventDefault()}),onKeyDown:$e(n.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&r.onValueChange(i)}),onFocus:$e(n.onFocus,()=>{const u=r.activationMode!=="manual";!d&&!s&&u&&r.onValueChange(i)})})})});iue.displayName=tue;var nue="TabsContent",sue=L.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,forceMount:s,children:o,...r}=n,a=tK(nue,t),l=oue(a.baseId,i),c=rue(a.baseId,i),d=i===a.value,u=L.useRef(d);return L.useEffect(()=>{const h=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(h)},[]),g.jsx(qr,{present:s||d,children:({present:h})=>g.jsx(Et.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...r,ref:e,style:{...n.style,animationDuration:u.current?"0s":void 0},children:h&&o})})});sue.displayName=nue;function oue(n,e){return`${n}-trigger-${e}`}function rue(n,e){return`${n}-content-${e}`}var vDe=Qde,aue=eue,lue=iue,cue=sue;const hf=vDe,ku=L.forwardRef(({className:n,...e},t)=>g.jsx(aue,{ref:t,className:Yt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));ku.displayName=aue.displayName;const Tn=L.forwardRef(({className:n,...e},t)=>g.jsx(lue,{ref:t,className:Yt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));Tn.displayName=lue.displayName;const Rn=L.forwardRef(({className:n,...e},t)=>g.jsx(cue,{ref:t,className:Yt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));Rn.displayName=cue.displayName;const wDe=ro.object({username:ro.string().min(3,"Username must be at least 3 characters"),password:ro.string().min(6,"Password must be at least 6 characters")}),yDe=ro.object({username:ro.string().min(3,"Username must be at least 3 characters"),password:ro.string().min(6,"Password must be at least 6 characters")});function CDe(){const{user:n,loginMutation:e,registerMutation:t}=e4(),[i,s]=L.useState("login"),[o,r]=L.useState({username:"",password:""}),[a,l]=L.useState({username:"",password:""}),[c,d]=L.useState({}),[u,h]=L.useState({}),f=p=>{p.preventDefault();try{wDe.parse(o),d({}),e.mutate(o)}catch(b){if(b instanceof ro.ZodError){const v={};b.errors.forEach(w=>{const y=w.path[0];v[y]=w.message}),d(v)}}},m=p=>{p.preventDefault();try{yDe.parse(a),h({}),t.mutate(a)}catch(b){if(b instanceof ro.ZodError){const v={};b.errors.forEach(w=>{const y=w.path[0];v[y]=w.message}),h(v)}}};return n?g.jsx(_le,{to:"/"}):(fI(),g.jsxs("div",{className:"flex min-h-screen relative",children:[g.jsx(Wc,{isFixed:!0,opacity:.1}),g.jsx("div",{className:"flex items-center justify-center w-full lg:w-1/2 p-8 relative z-10",children:g.jsxs("div",{className:"w-full max-w-md",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h1",{className:"text-3xl font-bold text-white font-minecraft",children:"CodeMate"}),g.jsx("p",{className:"text-gray-300 mt-2",children:"AI-Powered Minecraft Modding Platform"}),g.jsx("div",{className:"mt-4 flex justify-center",children:g.jsx(Yde,{variant:"iconAndLabel",showRandomize:!0})})]}),g.jsxs(hf,{defaultValue:"login",value:i,onValueChange:s,className:"w-full",children:[g.jsxs(ku,{className:"grid w-full grid-cols-2 mb-8",children:[g.jsx(Tn,{value:"login",children:"Login"}),g.jsx(Tn,{value:"register",children:"Register"})]}),g.jsx(Rn,{value:"login",children:g.jsxs(Bt,{className:"biome-themed-card overflow-hidden relative",children:[g.jsx("div",{className:"absolute inset-0 opacity-10",children:g.jsx(Wc,{isFixed:!1,opacity:.2})}),g.jsxs(Mg,{className:"relative z-10",children:[g.jsx(Pg,{className:"font-minecraft",children:"Login"}),g.jsx(Ag,{className:"text-gray-200",children:"Enter your credentials to access your account"})]}),g.jsxs("form",{onSubmit:f,children:[g.jsxs(Og,{className:"space-y-4 relative z-10",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"login-username",className:"text-gray-200",children:"Username"}),g.jsx(va,{id:"login-username",type:"text",placeholder:"Enter your username",value:o.username,onChange:p=>r({...o,username:p.target.value}),className:`bg-gray-800/50 border-gray-700 text-white ${c.username?"border-red-500":""}`}),c.username&&g.jsx("p",{className:"text-red-500 text-sm",children:c.username})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"login-password",className:"text-gray-200",children:"Password"}),g.jsx(va,{id:"login-password",type:"password",placeholder:"Enter your password",value:o.password,onChange:p=>r({...o,password:p.target.value}),className:`bg-gray-800/50 border-gray-700 text-white ${c.password?"border-red-500":""}`}),c.password&&g.jsx("p",{className:"text-red-500 text-sm",children:c.password})]})]}),g.jsx(C_,{className:"relative z-10",children:g.jsxs(Se,{type:"submit",className:"w-full biome-themed-button",disabled:e.isPending,children:[e.isPending?g.jsx(Qi,{className:"h-4 w-4 animate-spin mr-2"}):g.jsx(Lh,{className:"h-4 w-4 mr-2"}),"Login"]})})]})]})}),g.jsx(Rn,{value:"register",children:g.jsxs(Bt,{className:"biome-themed-card overflow-hidden relative",children:[g.jsx("div",{className:"absolute inset-0 opacity-10",children:g.jsx(Wc,{isFixed:!1,opacity:.2})}),g.jsxs(Mg,{className:"relative z-10",children:[g.jsx(Pg,{className:"font-minecraft",children:"Create an account"}),g.jsx(Ag,{className:"text-gray-200",children:"Register to start building Minecraft mods"})]}),g.jsxs("form",{onSubmit:m,children:[g.jsxs(Og,{className:"space-y-4 relative z-10",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"register-username",className:"text-gray-200",children:"Username"}),g.jsx(va,{id:"register-username",type:"text",placeholder:"Choose a username",value:a.username,onChange:p=>l({...a,username:p.target.value}),className:`bg-gray-800/50 border-gray-700 text-white ${u.username?"border-red-500":""}`}),u.username&&g.jsx("p",{className:"text-red-500 text-sm",children:u.username})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"register-password",className:"text-gray-200",children:"Password"}),g.jsx(va,{id:"register-password",type:"password",placeholder:"Choose a password",value:a.password,onChange:p=>l({...a,password:p.target.value}),className:`bg-gray-800/50 border-gray-700 text-white ${u.password?"border-red-500":""}`}),u.password&&g.jsx("p",{className:"text-red-500 text-sm",children:u.password})]})]}),g.jsx(C_,{className:"relative z-10",children:g.jsxs(Se,{type:"submit",className:"w-full biome-themed-button",disabled:t.isPending,children:[t.isPending?g.jsx(Qi,{className:"h-4 w-4 animate-spin mr-2"}):g.jsx(Q1e,{className:"h-4 w-4 mr-2"}),"Create Account"]})})]})]})})]})]})}),g.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-cover bg-center relative overflow-hidden",style:{backgroundColor:"#1e293b"},children:[g.jsx(Wc,{isFixed:!0,opacity:.25}),g.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center h-full w-full p-12",children:g.jsxs("div",{className:"max-w-lg text-center",children:[g.jsx("h2",{className:"text-4xl font-bold text-white mb-4 font-minecraft",children:"Minecraft Modding Platform"}),g.jsx("p",{className:"text-xl text-gray-200 mb-8",children:"Build and deploy professional Minecraft mods with AI assistance, code suggestions, and debugging support."}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-start space-x-3",children:[g.jsx("div",{className:"mt-1 bg-emerald-500 p-1 rounded-full",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium text-white",children:"AI-Powered Development"}),g.jsx("p",{className:"text-gray-400",children:"Leverage Claude Code to generate mod features, fix errors, and get detailed explanations."})]})]}),g.jsxs("div",{className:"flex items-start space-x-3",children:[g.jsx("div",{className:"mt-1 bg-emerald-500 p-1 rounded-full",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium text-white",children:"NeoForge 1.21.5 Compatible"}),g.jsx("p",{className:"text-gray-400",children:"Modern modding practices with the latest NeoForge APIs and data component system."})]})]}),g.jsxs("div",{className:"flex items-start space-x-3",children:[g.jsx("div",{className:"mt-1 bg-emerald-500 p-1 rounded-full",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium text-white",children:"Collaborative Environment"}),g.jsx("p",{className:"text-gray-400",children:"Manage multiple projects, share code, and work together on mod development."})]})]})]})]})})]})]}))}function SDe(){const[n]=JO();return g.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-900 text-white",children:[g.jsx("div",{className:"text-9xl font-bold text-amber-500 mb-4",children:"404"}),g.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Page Not Found"}),g.jsxs("p",{className:"text-gray-400 mb-6 text-center",children:["We couldn't find the page you were looking for: ",g.jsx("span",{className:"text-amber-400",children:n})]}),g.jsx(Se,{asChild:!0,className:"bg-amber-600 hover:bg-amber-700",children:g.jsx(Oxe,{href:"/",children:"Return to Home"})})]})}function za(n,e=0){return n[n.length-(1+e)]}function xDe(n){if(n.length===0)throw new Error("Invalid tail call");return[n.slice(0,n.length-1),n[n.length-1]]}function Vi(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e||n.length!==e.length)return!1;for(let i=0,s=n.length;i<s;i++)if(!t(n[i],e[i]))return!1;return!0}function LDe(n,e){const t=n.length-1;e<t&&(n[e]=n[t]),n.pop()}function bk(n,e,t){return kDe(n.length,i=>t(n[i],e))}function kDe(n,e){let t=0,i=n-1;for(;t<=i;){const s=(t+i)/2|0,o=e(s);if(o<0)t=s+1;else if(o>0)i=s-1;else return s}return-(t+1)}function P9(n,e,t){if(n=n|0,n>=e.length)throw new TypeError("invalid index");const i=e[Math.floor(e.length*Math.random())],s=[],o=[],r=[];for(const a of e){const l=t(a,i);l<0?s.push(a):l>0?o.push(a):r.push(a)}return n<s.length?P9(n,s,t):n<s.length+r.length?r[0]:P9(n-(s.length+r.length),o,t)}function mQ(n,e){const t=[];let i;for(const s of n.slice(0).sort(e))!i||e(i[0],s)!==0?(i=[s],t.push(i)):i.push(s);return t}function*iK(n,e){let t,i;for(const s of n)i!==void 0&&e(i,s)?t.push(s):(t&&(yield t),t=[s]),i=s;t&&(yield t)}function due(n,e){for(let t=0;t<=n.length;t++)e(t===0?void 0:n[t-1],t===n.length?void 0:n[t])}function NDe(n,e){for(let t=0;t<n.length;t++)e(t===0?void 0:n[t-1],n[t],t+1===n.length?void 0:n[t+1])}function Yl(n){return n.filter(e=>!!e)}function pQ(n){let e=0;for(let t=0;t<n.length;t++)n[t]&&(n[e]=n[t],e+=1);n.length=e}function uue(n){return!Array.isArray(n)||n.length===0}function ho(n){return Array.isArray(n)&&n.length>0}function ff(n,e=t=>t){const t=new Set;return n.filter(i=>{const s=e(i);return t.has(s)?!1:(t.add(s),!0)})}function nK(n,e){return n.length>0?n[0]:e}function qo(n,e){let t=typeof e=="number"?n:0;typeof e=="number"?t=n:(t=0,e=n);const i=[];if(t<=e)for(let s=t;s<e;s++)i.push(s);else for(let s=t;s>e;s--)i.push(s);return i}function h4(n,e,t){const i=n.slice(0,e),s=n.slice(e);return i.concat(t,s)}function n3(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.unshift(e))}function FE(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.push(e))}function A9(n,e){for(const t of e)n.push(t)}function sK(n){return Array.isArray(n)?n:[n]}function IDe(n,e,t){const i=hue(n,e),s=n.length,o=t.length;n.length=s+o;for(let r=s-1;r>=i;r--)n[r+o]=n[r];for(let r=0;r<o;r++)n[r+i]=t[r]}function _Q(n,e,t,i){const s=hue(n,e);let o=n.splice(s,t);return o===void 0&&(o=[]),IDe(n,s,i),o}function hue(n,e){return e<0?Math.max(e+n.length,0):Math.min(e,n.length)}var vk;(function(n){function e(o){return o<0}n.isLessThan=e;function t(o){return o<=0}n.isLessThanOrEqual=t;function i(o){return o>0}n.isGreaterThan=i;function s(o){return o===0}n.isNeitherLessOrGreaterThan=s,n.greaterThan=1,n.lessThan=-1,n.neitherLessOrGreaterThan=0})(vk||(vk={}));function Io(n,e){return(t,i)=>e(n(t),n(i))}function EDe(...n){return(e,t)=>{for(const i of n){const s=i(e,t);if(!vk.isNeitherLessOrGreaterThan(s))return s}return vk.neitherLessOrGreaterThan}}const Kl=(n,e)=>n-e,DDe=(n,e)=>Kl(n?1:0,e?1:0);function fue(n){return(e,t)=>-n(e,t)}class gf{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}const Rw=class Rw{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new Rw(t=>this.iterate(i=>e(i)?t(i):!0))}map(e){return new Rw(t=>this.iterate(i=>t(e(i))))}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(s=>((i||vk.isGreaterThan(e(s,t)))&&(i=!1,t=s),!0)),t}};Rw.empty=new Rw(e=>{});let V_=Rw;class KR{constructor(e){this._indexMap=e}static createSortPermutation(e,t){const i=Array.from(e.keys()).sort((s,o)=>t(e[s],e[o]));return new KR(i)}apply(e){return e.map((t,i)=>e[this._indexMap[i]])}inverse(){const e=this._indexMap.slice();for(let t=0;t<this._indexMap.length;t++)e[this._indexMap[t]]=t;return new KR(e)}}function ir(n){return typeof n=="string"}function as(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof Date)}function TDe(n){const e=Object.getPrototypeOf(Uint8Array);return typeof n=="object"&&n instanceof e}function Hm(n){return typeof n=="number"&&!isNaN(n)}function bQ(n){return!!n&&typeof n[Symbol.iterator]=="function"}function gue(n){return n===!0||n===!1}function co(n){return typeof n>"u"}function mu(n){return!ga(n)}function ga(n){return co(n)||n===null}function zt(n,e){if(!n)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function Fg(n){if(ga(n))throw new Error("Assertion Failed: argument is undefined or null");return n}function wk(n){return typeof n=="function"}function RDe(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)MDe(n[i],e[i])}function MDe(n,e){if(ir(e)){if(typeof n!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(wk(e)){try{if(n instanceof e)return}catch{}if(!ga(n)&&n.constructor===e||e.length===1&&e.call(void 0,n)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function vh(n){if(!n||typeof n!="object"||n instanceof RegExp)return n;const e=Array.isArray(n)?[]:{};return Object.entries(n).forEach(([t,i])=>{e[t]=i&&typeof i=="object"?vh(i):i}),e}function PDe(n){if(!n||typeof n!="object")return n;const e=[n];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(mue.call(t,i)){const s=t[i];typeof s=="object"&&!Object.isFrozen(s)&&!TDe(s)&&e.push(s)}}return n}const mue=Object.prototype.hasOwnProperty;function pue(n,e){return O9(n,e,new Set)}function O9(n,e,t){if(ga(n))return n;const i=e(n);if(typeof i<"u")return i;if(Array.isArray(n)){const s=[];for(const o of n)s.push(O9(o,e,t));return s}if(as(n)){if(t.has(n))throw new Error("Cannot clone recursive data-structure");t.add(n);const s={};for(const o in n)mue.call(n,o)&&(s[o]=O9(n[o],e,t));return t.delete(n),s}return n}function f4(n,e,t=!0){return as(n)?(as(e)&&Object.keys(e).forEach(i=>{i in n?t&&(as(n[i])&&as(e[i])?f4(n[i],e[i],t):n[i]=e[i]):n[i]=e[i]}),n):e}function Ar(n,e){if(n===e)return!0;if(n==null||e===null||e===void 0||typeof n!=typeof e||typeof n!="object"||Array.isArray(n)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(n)){if(n.length!==e.length)return!1;for(t=0;t<n.length;t++)if(!Ar(n[t],e[t]))return!1}else{const s=[];for(i in n)s.push(i);s.sort();const o=[];for(i in e)o.push(i);if(o.sort(),!Ar(s,o))return!1;for(t=0;t<s.length;t++)if(!Ar(n[s[t]],e[s[t]]))return!1}return!0}function ADe(n){let e=[];for(;Object.prototype!==n;)e=e.concat(Object.getOwnPropertyNames(n)),n=Object.getPrototypeOf(n);return e}function F9(n){const e=[];for(const t of ADe(n))typeof n[t]=="function"&&e.push(t);return e}function ODe(n,e){const t=s=>function(){const o=Array.prototype.slice.call(arguments,0);return e(s,o)},i={};for(const s of n)i[s]=t(s);return i}function _ue(){return globalThis._VSCODE_NLS_MESSAGES}function oK(){return globalThis._VSCODE_NLS_LANGUAGE}const FDe=oK()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function qR(n,e){let t;return e.length===0?t=n:t=n.replace(/\{(\d+)\}/g,(i,s)=>{const o=s[0],r=e[o];let a=i;return typeof r=="string"?a=r:(typeof r=="number"||typeof r=="boolean"||r===void 0||r===null)&&(a=String(r)),a}),FDe&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}function _(n,e,...t){return qR(typeof n=="number"?bue(n,e):e,t)}function bue(n,e){var i;const t=(i=_ue())==null?void 0:i[n];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${n} !!!`)}return t}function Ze(n,e,...t){let i;typeof n=="number"?i=bue(n,e):i=e;const s=qR(i,t);return{value:s,original:e===i?s:qR(e,t)}}const aw="en";let GR=!1,ZR=!1,mT=!1,vue=!1,rK=!1,aK=!1,wue=!1,BE,pT=aw,vQ=aw,BDe,fc;const Gh=globalThis;let bo;var Qse;typeof Gh.vscode<"u"&&typeof Gh.vscode.process<"u"?bo=Gh.vscode.process:typeof process<"u"&&typeof((Qse=process==null?void 0:process.versions)==null?void 0:Qse.node)=="string"&&(bo=process);var Jse;const WDe=typeof((Jse=bo==null?void 0:bo.versions)==null?void 0:Jse.electron)=="string",HDe=WDe&&(bo==null?void 0:bo.type)==="renderer";var eoe;if(typeof bo=="object"){GR=bo.platform==="win32",ZR=bo.platform==="darwin",mT=bo.platform==="linux",mT&&bo.env.SNAP&&bo.env.SNAP_REVISION,bo.env.CI||bo.env.BUILD_ARTIFACTSTAGINGDIRECTORY,BE=aw,pT=aw;const n=bo.env.VSCODE_NLS_CONFIG;if(n)try{const e=JSON.parse(n);BE=e.userLocale,vQ=e.osLocale,pT=e.resolvedLanguage||aw,BDe=(eoe=e.languagePack)==null?void 0:eoe.translationsConfigFile}catch{}vue=!0}else typeof navigator=="object"&&!HDe?(fc=navigator.userAgent,GR=fc.indexOf("Windows")>=0,ZR=fc.indexOf("Macintosh")>=0,aK=(fc.indexOf("Macintosh")>=0||fc.indexOf("iPad")>=0||fc.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,mT=fc.indexOf("Linux")>=0,wue=(fc==null?void 0:fc.indexOf("Mobi"))>=0,rK=!0,pT=oK()||aw,BE=navigator.language.toLowerCase(),vQ=BE):console.error("Unable to resolve platform.");const As=GR,Lt=ZR,Mo=mT,Gc=vue,Kv=rK,VDe=rK&&typeof Gh.importScripts=="function",jDe=VDe?Gh.origin:void 0,rd=aK,yue=wue,Nu=fc,zDe=pT,UDe=typeof Gh.postMessage=="function"&&!Gh.importScripts,Cue=(()=>{if(UDe){const n=[];Gh.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,s=n.length;i<s;i++){const o=n[i];if(o.id===t.data.vscodeScheduleAsyncWork){n.splice(i,1),o.callback();return}}});let e=0;return t=>{const i=++e;n.push({id:i,callback:t}),Gh.postMessage({vscodeScheduleAsyncWork:i},"*")}}return n=>setTimeout(n)})(),Mr=ZR||aK?2:GR?1:3;let wQ=!0,yQ=!1;function Sue(){if(!yQ){yQ=!0;const n=new Uint8Array(2);n[0]=1,n[1]=2,wQ=new Uint16Array(n.buffer)[0]===513}return wQ}const xue=!!(Nu&&Nu.indexOf("Chrome")>=0),$De=!!(Nu&&Nu.indexOf("Firefox")>=0),KDe=!!(!xue&&Nu&&Nu.indexOf("Safari")>=0),qDe=!!(Nu&&Nu.indexOf("Edg/")>=0),GDe=!!(Nu&&Nu.indexOf("Android")>=0),zs={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var Rt;(function(n){function e(C){return C&&typeof C=="object"&&typeof C[Symbol.iterator]=="function"}n.is=e;const t=Object.freeze([]);function i(){return t}n.empty=i;function*s(C){yield C}n.single=s;function o(C){return e(C)?C:s(C)}n.wrap=o;function r(C){return C||t}n.from=r;function*a(C){for(let S=C.length-1;S>=0;S--)yield C[S]}n.reverse=a;function l(C){return!C||C[Symbol.iterator]().next().done===!0}n.isEmpty=l;function c(C){return C[Symbol.iterator]().next().value}n.first=c;function d(C,S){let x=0;for(const k of C)if(S(k,x++))return!0;return!1}n.some=d;function u(C,S){for(const x of C)if(S(x))return x}n.find=u;function*h(C,S){for(const x of C)S(x)&&(yield x)}n.filter=h;function*f(C,S){let x=0;for(const k of C)yield S(k,x++)}n.map=f;function*m(C,S){let x=0;for(const k of C)yield*S(k,x++)}n.flatMap=m;function*p(...C){for(const S of C)yield*S}n.concat=p;function b(C,S,x){let k=x;for(const N of C)k=S(k,N);return k}n.reduce=b;function*v(C,S,x=C.length){for(S<0&&(S+=C.length),x<0?x+=C.length:x>C.length&&(x=C.length);S<x;S++)yield C[S]}n.slice=v;function w(C,S=Number.POSITIVE_INFINITY){const x=[];if(S===0)return[x,C];const k=C[Symbol.iterator]();for(let N=0;N<S;N++){const E=k.next();if(E.done)return[x,n.empty()];x.push(E.value)}return[x,{[Symbol.iterator](){return k}}]}n.consume=w;async function y(C){const S=[];for await(const x of C)S.push(x);return Promise.resolve(S)}n.asyncToArray=y})(Rt||(Rt={}));var Vh;let jn=(Vh=class{constructor(e){this.element=e,this.next=Vh.Undefined,this.prev=Vh.Undefined}},Vh.Undefined=new Vh(void 0),Vh);class So{constructor(){this._first=jn.Undefined,this._last=jn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===jn.Undefined}clear(){let e=this._first;for(;e!==jn.Undefined;){const t=e.next;e.prev=jn.Undefined,e.next=jn.Undefined,e=t}this._first=jn.Undefined,this._last=jn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new jn(e);if(this._first===jn.Undefined)this._first=i,this._last=i;else if(t){const o=this._last;this._last=i,i.prev=o,o.next=i}else{const o=this._first;this._first=i,i.next=o,o.prev=i}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(i))}}shift(){if(this._first!==jn.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==jn.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==jn.Undefined&&e.next!==jn.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===jn.Undefined&&e.next===jn.Undefined?(this._first=jn.Undefined,this._last=jn.Undefined):e.next===jn.Undefined?(this._last=this._last.prev,this._last.next=jn.Undefined):e.prev===jn.Undefined&&(this._first=this._first.next,this._first.prev=jn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==jn.Undefined;)yield e.element,e=e.next}}const YR="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function ZDe(n=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of YR)n.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const lK=ZDe();function cK(n){let e=lK;if(n&&n instanceof RegExp)if(n.global)e=n;else{let t="g";n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.unicode&&(t+="u"),e=new RegExp(n.source,t)}return e.lastIndex=0,e}const Lue=new So;Lue.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function yk(n,e,t,i,s){if(e=cK(e),s||(s=Rt.first(Lue)),t.length>s.maxLen){let c=n-s.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,n+s.maxLen/2),yk(n,e,t,i,s)}const o=Date.now(),r=n-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-o>=s.timeBudget);c++){const d=r-s.windowSize*c;e.lastIndex=Math.max(0,d);const u=YDe(e,t,r,a);if(!u&&l||(l=u,d<=0))break;a=d}if(l){const c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function YDe(n,e,t,i){let s;for(;s=n.exec(e);){const o=s.index||0;if(o<=t&&n.lastIndex>=t)return s;if(i>0&&o>i)return null}return null}const Td=8;class kue{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Nue{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Fi{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}applyUpdate(e,t){return g4(e,t)}compute(e,t,i){return i}}class Tx{constructor(e,t){this.newValue=e,this.didChange=t}}function g4(n,e){if(typeof n!="object"||typeof e!="object"||!n||!e)return new Tx(e,n!==e);if(Array.isArray(n)||Array.isArray(e)){const i=Array.isArray(n)&&Array.isArray(e)&&Vi(n,e);return new Tx(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const s=g4(n[i],e[i]);s.didChange&&(n[i]=s.newValue,t=!0)}return new Tx(n,t)}class bI{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return g4(e,t)}validate(e){return this.defaultValue}}class y1{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}applyUpdate(e,t){return g4(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function Me(n,e){return typeof n>"u"?e:n==="false"?!1:!!n}class Vt extends y1{constructor(e,t,i,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=i),super(e,t,i,s)}validate(e){return Me(e,this.defaultValue)}}function Vp(n,e,t,i){if(typeof n>"u")return e;let s=parseInt(n,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(i,s),s|0)}class pi extends y1{static clampedInt(e,t,i,s){return Vp(e,t,i,s)}constructor(e,t,i,s,o,r=void 0){typeof r<"u"&&(r.type="integer",r.default=i,r.minimum=s,r.maximum=o),super(e,t,i,r),this.minimum=s,this.maximum=o}validate(e){return pi.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function XDe(n,e,t,i){if(typeof n>"u")return e;const s=wa.float(n,e);return wa.clamp(s,t,i)}class wa extends y1{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,s,o){typeof o<"u"&&(o.type="number",o.default=i),super(e,t,i,o),this.validationFn=s}validate(e){return this.validationFn(wa.float(e,this.defaultValue))}}class ao extends y1{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,s=void 0){typeof s<"u"&&(s.type="string",s.default=i),super(e,t,i,s)}validate(e){return ao.string(e,this.defaultValue)}}function tn(n,e,t,i){return typeof n!="string"?e:i&&n in i?i[n]:t.indexOf(n)===-1?e:n}class en extends y1{constructor(e,t,i,s,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=i),super(e,t,i,o),this._allowedValues=s}validate(e){return tn(e,this.defaultValue,this._allowedValues)}}class WE extends Fi{constructor(e,t,i,s,o,r,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=s),super(e,t,i,a),this._allowedValues=o,this._convert=r}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function QDe(n){switch(n){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class JDe extends Fi{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[_("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),_("accessibilitySupport.on","Optimize for usage with a Screen Reader."),_("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:_("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class eTe extends Fi{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:_("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:_("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Me(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Me(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function tTe(n){switch(n){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var bs;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(bs||(bs={}));function iTe(n){switch(n){case"line":return bs.Line;case"block":return bs.Block;case"underline":return bs.Underline;case"line-thin":return bs.LineThin;case"block-outline":return bs.BlockOutline;case"underline-thin":return bs.UnderlineThin}}class nTe extends bI{constructor(){super(143)}compute(e,t,i){const s=["monaco-editor"];return t.get(39)&&s.push(t.get(39)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(74)==="default"?s.push("mouse-default"):t.get(74)==="copy"&&s.push("mouse-copy"),t.get(112)&&s.push("showUnused"),t.get(141)&&s.push("showDeprecated"),s.join(" ")}}class sTe extends Vt{constructor(){super(37,"emptySelectionClipboard",!0,{description:_("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class oTe extends Fi{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:_("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[_("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),_("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),_("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:_("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[_("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),_("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),_("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:_("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:_("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Lt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:_("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:_("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Me(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":tn(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":tn(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Me(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Me(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Me(t.loop,this.defaultValue.loop)}}}const hh=class hh extends Fi{constructor(){super(51,"fontLigatures",hh.OFF,{anyOf:[{type:"boolean",description:_("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:_("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:_("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?hh.OFF:e==="true"?hh.ON:e:e?hh.ON:hh.OFF}};hh.OFF='"liga" off, "calt" off',hh.ON='"liga" on, "calt" on';let Vm=hh;const fh=class fh extends Fi{constructor(){super(54,"fontVariations",fh.OFF,{anyOf:[{type:"boolean",description:_("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:_("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:_("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?fh.OFF:e==="true"?fh.TRANSLATE:e:e?fh.TRANSLATE:fh.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}};fh.OFF="normal",fh.TRANSLATE="translate";let Ck=fh;class rTe extends bI{constructor(){super(50)}compute(e,t,i){return e.fontInfo}}class aTe extends y1{constructor(){super(52,"fontSize",Eo.fontSize,{type:"number",minimum:6,maximum:100,default:Eo.fontSize,description:_("fontSize","Controls the font size in pixels.")})}validate(e){const t=wa.float(e,this.defaultValue);return t===0?Eo.fontSize:wa.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}const Fd=class Fd extends Fi{constructor(){super(53,"fontWeight",Eo.fontWeight,{anyOf:[{type:"number",minimum:Fd.MINIMUM_VALUE,maximum:Fd.MAXIMUM_VALUE,errorMessage:_("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Fd.SUGGESTION_VALUES}],default:Eo.fontWeight,description:_("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(pi.clampedInt(e,Eo.fontWeight,Fd.MINIMUM_VALUE,Fd.MAXIMUM_VALUE))}};Fd.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],Fd.MINIMUM_VALUE=1,Fd.MAXIMUM_VALUE=1e3;let B9=Fd;class lTe extends Fi{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[_("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),_("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),_("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:_("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:_("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:_("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:_("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:_("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:_("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:_("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:_("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:_("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:_("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:_("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:tn(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??tn(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??tn(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??tn(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??tn(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??tn(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??tn(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:ao.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:ao.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:ao.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:ao.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:ao.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:ao.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class cTe extends Fi{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:_("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:_("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:_("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:_("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:_("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),delay:pi.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Me(t.sticky,this.defaultValue.sticky),hidingDelay:pi.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Me(t.above,this.defaultValue.above)}}}class cy extends bI{constructor(){super(146)}compute(e,t,i){return cy.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let s=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(s=Math.max(s,t-1));const o=(i+e.viewLineCount+s)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/o);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:s,desiredRatio:o,minimapLineCount:r}}static _computeMinimapLayout(e,t){const i=e.outerWidth,s=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const r=t.stableMinimapLayoutInput,a=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.paddingTop===r.paddingTop&&e.paddingBottom===r.paddingBottom&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let h=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,m=e.minimap.size,p=e.minimap.side,b=e.verticalScrollbarWidth,v=e.viewLineCount,w=e.remainingWidth,y=e.isViewportWrapping,C=u?2:3;let S=Math.floor(o*s);const x=S/o;let k=!1,N=!1,E=C*h,B=h/o,A=1;if(m==="fill"||m==="fit"){const{typicalViewportLineCount:q,extraLinesBeforeFirstLine:Z,extraLinesBeyondLastLine:V,desiredRatio:le,minimapLineCount:Fe}=cy.computeContainedMinimapLineCount({viewLineCount:v,scrollBeyondLastLine:d,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:s,lineHeight:l,pixelRatio:o});if(v/Fe>1)k=!0,N=!0,h=1,E=1,B=h/o;else{let De=!1,ce=h+1;if(m==="fit"){const Re=Math.ceil((Z+v+V)*E);y&&a&&w<=t.stableFitRemainingWidth?(De=!0,ce=t.stableFitMaxMinimapScale):De=Re>S}if(m==="fill"||De){k=!0;const Re=h;E=Math.min(l*o,Math.max(1,Math.floor(1/le))),y&&a&&w<=t.stableFitRemainingWidth&&(ce=t.stableFitMaxMinimapScale),h=Math.min(ce,Math.max(1,Math.floor(E/C))),h>Re&&(A=Math.min(2,h/Re)),B=h/o/A,S=Math.ceil(Math.max(q,Z+v+V)*E),y?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=w,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const O=Math.floor(f*B),W=Math.min(O,Math.max(0,Math.floor((w-b-2)*B/(c+B)))+Td);let T=Math.floor(o*W);const M=T/o;T=Math.floor(T*A);const z=u?1:2,ee=p==="left"?0:i-W-b;return{renderMinimap:z,minimapLeft:ee,minimapWidth:W,minimapHeightIsEditorHeight:k,minimapIsSampling:N,minimapScale:h,minimapLineHeight:E,minimapCanvasInnerWidth:T,minimapCanvasInnerHeight:S,minimapCanvasOuterWidth:M,minimapCanvasOuterHeight:x}}static computeLayout(e,t){const i=t.outerWidth|0,s=t.outerHeight|0,o=t.lineHeight|0,r=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,u=e.get(138),h=u==="inherit"?e.get(137):u,f=h==="inherit"?e.get(133):h,m=e.get(136),p=t.isDominatedByLongLines,b=e.get(57),v=e.get(68).renderType!==0,w=e.get(69),y=e.get(106),C=e.get(84),S=e.get(73),x=e.get(104),k=x.verticalScrollbarSize,N=x.verticalHasArrows,E=x.arrowSize,B=x.horizontalScrollbarSize,A=e.get(43),O=e.get(111)!=="never";let W=e.get(66);A&&O&&(W+=16);let T=0;if(v){const it=Math.max(r,w);T=Math.round(it*l)}let M=0;b&&(M=o*t.glyphMarginDecorationLaneCount);let z=0,ee=z+M,q=ee+T,Z=q+W;const V=i-M-T-W;let le=!1,Fe=!1,ke=-1;h==="inherit"&&p?(le=!0,Fe=!0):f==="on"||f==="bounded"?Fe=!0:f==="wordWrapColumn"&&(ke=m);const De=cy._computeMinimapLayout({outerWidth:i,outerHeight:s,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:y,paddingTop:C.top,paddingBottom:C.bottom,minimap:S,verticalScrollbarWidth:k,viewLineCount:d,remainingWidth:V,isViewportWrapping:Fe},t.memory||new Nue);De.renderMinimap!==0&&De.minimapLeft===0&&(z+=De.minimapWidth,ee+=De.minimapWidth,q+=De.minimapWidth,Z+=De.minimapWidth);const ce=V-De.minimapWidth,Re=Math.max(1,Math.floor((ce-k-2)/a)),Ee=N?E:0;return Fe&&(ke=Math.max(1,Re),f==="bounded"&&(ke=Math.min(ke,m))),{width:i,height:s,glyphMarginLeft:z,glyphMarginWidth:M,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:ee,lineNumbersWidth:T,decorationsLeft:q,decorationsWidth:W,contentLeft:Z,contentWidth:ce,minimap:De,viewportColumn:Re,isWordWrapMinified:le,isViewportWrapping:Fe,wrappingColumn:ke,verticalScrollbarWidth:k,horizontalScrollbarHeight:B,overviewRuler:{top:Ee,width:k,height:s-2*Ee,right:0}}}}class dTe extends Fi{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[_("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),_("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:_("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return tn(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}}var Ml;(function(n){n.Off="off",n.OnCode="onCode",n.On="on"})(Ml||(Ml={}));class uTe extends Fi{constructor(){const e={enabled:Ml.OnCode};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[Ml.Off,Ml.OnCode,Ml.On],default:e.enabled,enumDescriptions:[_("editor.lightbulb.enabled.off","Disable the code action menu."),_("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),_("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:_("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:tn(e.enabled,this.defaultValue.enabled,[Ml.Off,Ml.OnCode,Ml.On])}}}class hTe extends Fi{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:_("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:_("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:_("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:_("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),maxLineCount:pi.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:tn(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Me(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class fTe extends Fi{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:_("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[_("editor.inlayHints.on","Inlay hints are enabled"),_("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Lt?"Ctrl+Option":"Ctrl+Alt"),_("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Lt?"Ctrl+Option":"Ctrl+Alt"),_("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:_("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:_("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:_("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:tn(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:pi.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:ao.string(t.fontFamily,this.defaultValue.fontFamily),padding:Me(t.padding,this.defaultValue.padding)}}}class gTe extends Fi{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):pi.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?pi.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}class mTe extends wa{constructor(){super(67,"lineHeight",Eo.lineHeight,e=>wa.clamp(e,0,150),{markdownDescription:_("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class pTe extends Fi{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:_("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:_("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[_("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),_("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),_("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:_("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:_("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:_("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:_("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:_("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:_("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:_("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:_("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:_("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:_("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),autohide:Me(t.autohide,this.defaultValue.autohide),size:tn(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:tn(t.side,this.defaultValue.side,["right","left"]),showSlider:tn(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Me(t.renderCharacters,this.defaultValue.renderCharacters),scale:pi.clampedInt(t.scale,1,1,3),maxColumn:pi.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Me(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Me(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:wa.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:wa.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function _Te(n){return n==="ctrlCmd"?Lt?"metaKey":"ctrlKey":"altKey"}class bTe extends Fi{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:_("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:_("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:pi.clampedInt(t.top,0,0,1e3),bottom:pi.clampedInt(t.bottom,0,0,1e3)}}}class vTe extends Fi{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:_("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:_("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),cycle:Me(t.cycle,this.defaultValue.cycle)}}}class wTe extends bI{constructor(){super(144)}compute(e,t,i){return e.pixelRatio}}class yTe extends Fi{constructor(){super(88,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class CTe extends Fi{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[_("on","Quick suggestions show inside the suggest widget"),_("inline","Quick suggestions show as ghost text"),_("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:_("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:_("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:_("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:_("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:s}=e,o=["on","inline","off"];let r,a,l;return typeof t=="boolean"?r=t?"on":"off":r=tn(t,this.defaultValue.other,o),typeof i=="boolean"?a=i?"on":"off":a=tn(i,this.defaultValue.comments,o),typeof s=="boolean"?l=s?"on":"off":l=tn(s,this.defaultValue.strings,o),{other:r,comments:a,strings:l}}}class STe extends Fi{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[_("lineNumbers.off","Line numbers are not rendered."),_("lineNumbers.on","Line numbers are rendered as absolute number."),_("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),_("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:_("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function XR(n){const e=n.get(99);return e==="editable"?n.get(92):e!=="on"}class xTe extends Fi{constructor(){const e=[],t={type:"number",description:_("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:_("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:_("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:pi.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const s=i;t.push({column:pi.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((i,s)=>i.column-s.column),t}return this.defaultValue}}class LTe extends Fi{constructor(){super(93,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function CQ(n,e){if(typeof n!="string")return e;switch(n){case"hidden":return 2;case"visible":return 3;default:return 1}}let kTe=class extends Fi{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[_("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),_("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),_("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:_("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[_("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),_("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),_("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:_("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:_("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:_("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:_("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:_("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=pi.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=pi.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:pi.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:CQ(t.vertical,this.defaultValue.vertical),horizontal:CQ(t.horizontal,this.defaultValue.horizontal),useShadows:Me(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Me(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Me(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Me(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Me(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:pi.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:s,verticalSliderSize:pi.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:Me(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Me(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const sa="inUntrustedWorkspace",Yo={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class NTe extends Fi{constructor(){const e={nonBasicASCII:sa,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:sa,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",e,{[Yo.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,sa],default:e.nonBasicASCII,description:_("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Yo.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:_("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Yo.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:_("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Yo.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,sa],default:e.includeComments,description:_("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[Yo.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,sa],default:e.includeStrings,description:_("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[Yo.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:_("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Yo.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:_("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(Ar(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(Ar(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const s=super.applyUpdate(e,t);return i?new Tx(s.newValue,!0):s}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:dy(t.nonBasicASCII,sa,[!0,!1,sa]),invisibleCharacters:Me(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Me(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:dy(t.includeComments,sa,[!0,!1,sa]),includeStrings:dy(t.includeStrings,sa,[!0,!1,sa]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[s,o]of Object.entries(e))o===!0&&(i[s]=!0);return i}}class ITe extends Fi{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:_("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[_("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),_("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),_("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:_("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:_("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:_("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),mode:tn(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:tn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Me(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Me(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:ao.string(t.fontFamily,this.defaultValue.fontFamily)}}}class ETe extends Fi{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:_("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[_("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),_("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),_("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:_("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:_("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),showToolbar:tn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:ao.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:Me(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class DTe extends Fi{constructor(){const e={enabled:zs.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:zs.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:_("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:_("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Me(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class TTe extends Fi{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[_("editor.guides.bracketPairs.true","Enables bracket pair guides."),_("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),_("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:_("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[_("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),_("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),_("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:_("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:_("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:_("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[_("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),_("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),_("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:_("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:dy(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:dy(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Me(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Me(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:dy(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function dy(n,e,t){const i=t.indexOf(n);return i===-1?e:t[i]}class RTe extends Fi{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[_("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),_("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:_("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:_("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:_("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:_("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[_("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),_("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),_("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),_("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:_("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:_("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:_("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:_("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:_("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:_("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:_("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:_("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:tn(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Me(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Me(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Me(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Me(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:tn(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Me(t.showIcons,this.defaultValue.showIcons),showStatusBar:Me(t.showStatusBar,this.defaultValue.showStatusBar),preview:Me(t.preview,this.defaultValue.preview),previewMode:tn(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Me(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Me(t.showMethods,this.defaultValue.showMethods),showFunctions:Me(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Me(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Me(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Me(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Me(t.showFields,this.defaultValue.showFields),showVariables:Me(t.showVariables,this.defaultValue.showVariables),showClasses:Me(t.showClasses,this.defaultValue.showClasses),showStructs:Me(t.showStructs,this.defaultValue.showStructs),showInterfaces:Me(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Me(t.showModules,this.defaultValue.showModules),showProperties:Me(t.showProperties,this.defaultValue.showProperties),showEvents:Me(t.showEvents,this.defaultValue.showEvents),showOperators:Me(t.showOperators,this.defaultValue.showOperators),showUnits:Me(t.showUnits,this.defaultValue.showUnits),showValues:Me(t.showValues,this.defaultValue.showValues),showConstants:Me(t.showConstants,this.defaultValue.showConstants),showEnums:Me(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Me(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Me(t.showKeywords,this.defaultValue.showKeywords),showWords:Me(t.showWords,this.defaultValue.showWords),showColors:Me(t.showColors,this.defaultValue.showColors),showFiles:Me(t.showFiles,this.defaultValue.showFiles),showReferences:Me(t.showReferences,this.defaultValue.showReferences),showFolders:Me(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Me(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Me(t.showSnippets,this.defaultValue.showSnippets),showUsers:Me(t.showUsers,this.defaultValue.showUsers),showIssues:Me(t.showIssues,this.defaultValue.showIssues)}}}class MTe extends Fi{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:_("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:_("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Me(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Me(e.selectSubwords,this.defaultValue.selectSubwords)}}}class PTe extends Fi{constructor(){const e=[];super(131,"wordSegmenterLocales",e,{anyOf:[{description:_("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:_("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}class ATe extends Fi{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[_("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),_("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),_("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),_("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:_("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}}class OTe extends bI{constructor(){super(147)}compute(e,t,i){const s=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}class FTe extends Fi{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:_("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:_("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[_("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),_("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),showDropSelector:tn(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class BTe extends Fi{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:_("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:_("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[_("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),_("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),showPasteSelector:tn(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const WTe="Consolas, 'Courier New', monospace",HTe="Menlo, Monaco, 'Courier New', monospace",VTe="'Droid Sans Mono', 'monospace', monospace",Eo={fontFamily:Lt?HTe:Mo?VTe:WTe,fontWeight:"normal",fontSize:Lt?12:14,lineHeight:0,letterSpacing:0},lw=[];function me(n){return lw[n.id]=n,n}const md={acceptSuggestionOnCommitCharacter:me(new Vt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:_("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:me(new en(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",_("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:_("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:me(new JDe),accessibilityPageSize:me(new pi(3,"accessibilityPageSize",10,1,1073741824,{description:_("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:me(new ao(4,"ariaLabel",_("editorViewAccessibleLabel","Editor content"))),ariaRequired:me(new Vt(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:me(new Vt(8,"screenReaderAnnounceInlineSuggestion",!0,{description:_("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:me(new en(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",_("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),_("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:_("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:me(new en(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",_("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),_("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:_("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:me(new en(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",_("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:_("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:me(new en(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",_("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:_("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:me(new en(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",_("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),_("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:_("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:me(new WE(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],QDe,{enumDescriptions:[_("editor.autoIndent.none","The editor will not insert indentation automatically."),_("editor.autoIndent.keep","The editor will keep the current line's indentation."),_("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),_("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),_("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:_("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:me(new Vt(13,"automaticLayout",!1)),autoSurround:me(new en(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[_("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),_("editor.autoSurround.quotes","Surround with quotes but not brackets."),_("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:_("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:me(new DTe),bracketPairGuides:me(new TTe),stickyTabStops:me(new Vt(117,"stickyTabStops",!1,{description:_("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:me(new Vt(17,"codeLens",!0,{description:_("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:me(new ao(18,"codeLensFontFamily","",{description:_("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:me(new pi(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:_("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:me(new Vt(20,"colorDecorators",!0,{description:_("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:me(new en(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[_("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),_("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),_("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:_("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:me(new pi(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:_("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:me(new Vt(22,"columnSelection",!1,{description:_("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:me(new eTe),contextmenu:me(new Vt(24,"contextmenu",!0)),copyWithSyntaxHighlighting:me(new Vt(25,"copyWithSyntaxHighlighting",!0,{description:_("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:me(new WE(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],tTe,{description:_("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:me(new en(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[_("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),_("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),_("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:_("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:me(new WE(28,"cursorStyle",bs.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],iTe,{description:_("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:me(new pi(29,"cursorSurroundingLines",0,0,1073741824,{description:_("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:me(new en(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[_("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),_("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:_("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:me(new pi(31,"cursorWidth",0,0,1073741824,{markdownDescription:_("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:me(new Vt(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:me(new Vt(33,"disableMonospaceOptimizations",!1)),domReadOnly:me(new Vt(34,"domReadOnly",!1)),dragAndDrop:me(new Vt(35,"dragAndDrop",!0,{description:_("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:me(new sTe),dropIntoEditor:me(new FTe),stickyScroll:me(new hTe),experimentalWhitespaceRendering:me(new en(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[_("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),_("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),_("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:_("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:me(new ao(39,"extraEditorClassName","")),fastScrollSensitivity:me(new wa(40,"fastScrollSensitivity",5,n=>n<=0?5:n,{markdownDescription:_("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:me(new oTe),fixedOverflowWidgets:me(new Vt(42,"fixedOverflowWidgets",!1)),folding:me(new Vt(43,"folding",!0,{description:_("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:me(new en(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[_("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),_("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:_("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:me(new Vt(45,"foldingHighlight",!0,{description:_("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:me(new Vt(46,"foldingImportsByDefault",!1,{description:_("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:me(new pi(47,"foldingMaximumRegions",5e3,10,65e3,{description:_("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:me(new Vt(48,"unfoldOnClickAfterEndOfLine",!1,{description:_("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:me(new ao(49,"fontFamily",Eo.fontFamily,{description:_("fontFamily","Controls the font family.")})),fontInfo:me(new rTe),fontLigatures2:me(new Vm),fontSize:me(new aTe),fontWeight:me(new B9),fontVariations:me(new Ck),formatOnPaste:me(new Vt(55,"formatOnPaste",!1,{description:_("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:me(new Vt(56,"formatOnType",!1,{description:_("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:me(new Vt(57,"glyphMargin",!0,{description:_("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:me(new lTe),hideCursorInOverviewRuler:me(new Vt(59,"hideCursorInOverviewRuler",!1,{description:_("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:me(new cTe),inDiffEditor:me(new Vt(61,"inDiffEditor",!1)),letterSpacing:me(new wa(64,"letterSpacing",Eo.letterSpacing,n=>wa.clamp(n,-5,20),{description:_("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:me(new uTe),lineDecorationsWidth:me(new gTe),lineHeight:me(new mTe),lineNumbers:me(new STe),lineNumbersMinChars:me(new pi(69,"lineNumbersMinChars",5,1,300)),linkedEditing:me(new Vt(70,"linkedEditing",!1,{description:_("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:me(new Vt(71,"links",!0,{description:_("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:me(new en(72,"matchBrackets","always",["always","near","never"],{description:_("matchBrackets","Highlight matching brackets.")})),minimap:me(new pTe),mouseStyle:me(new en(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:me(new wa(75,"mouseWheelScrollSensitivity",1,n=>n===0?1:n,{markdownDescription:_("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:me(new Vt(76,"mouseWheelZoom",!1,{markdownDescription:Lt?_("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):_("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:me(new Vt(77,"multiCursorMergeOverlapping",!0,{description:_("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:me(new WE(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],_Te,{markdownEnumDescriptions:[_("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),_("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:_({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:me(new en(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[_("multiCursorPaste.spread","Each cursor pastes a single line of the text."),_("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:_("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:me(new pi(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:_("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:me(new en(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[_("occurrencesHighlight.off","Does not highlight occurrences."),_("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),_("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:_("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:me(new Vt(82,"overviewRulerBorder",!0,{description:_("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:me(new pi(83,"overviewRulerLanes",3,0,3)),padding:me(new bTe),pasteAs:me(new BTe),parameterHints:me(new vTe),peekWidgetDefaultFocus:me(new en(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[_("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),_("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:_("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:me(new yTe),definitionLinkOpensInPeek:me(new Vt(89,"definitionLinkOpensInPeek",!1,{description:_("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:me(new CTe),quickSuggestionsDelay:me(new pi(91,"quickSuggestionsDelay",10,0,1073741824,{description:_("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:me(new Vt(92,"readOnly",!1)),readOnlyMessage:me(new LTe),renameOnType:me(new Vt(94,"renameOnType",!1,{description:_("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:_("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:me(new Vt(95,"renderControlCharacters",!0,{description:_("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:me(new en(96,"renderFinalNewline",Mo?"dimmed":"on",["off","on","dimmed"],{description:_("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:me(new en(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",_("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:_("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:me(new Vt(98,"renderLineHighlightOnlyWhenFocus",!1,{description:_("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:me(new en(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:me(new en(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",_("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),_("renderWhitespace.selection","Render whitespace characters only on selected text."),_("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:_("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:me(new pi(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:me(new Vt(102,"roundedSelection",!0,{description:_("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:me(new xTe),scrollbar:me(new kTe),scrollBeyondLastColumn:me(new pi(105,"scrollBeyondLastColumn",4,0,1073741824,{description:_("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:me(new Vt(106,"scrollBeyondLastLine",!0,{description:_("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:me(new Vt(107,"scrollPredominantAxis",!0,{description:_("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:me(new Vt(108,"selectionClipboard",!0,{description:_("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Mo})),selectionHighlight:me(new Vt(109,"selectionHighlight",!0,{description:_("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:me(new Vt(110,"selectOnLineNumbers",!0)),showFoldingControls:me(new en(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[_("showFoldingControls.always","Always show the folding controls."),_("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),_("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:_("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:me(new Vt(112,"showUnused",!0,{description:_("showUnused","Controls fading out of unused code.")})),showDeprecated:me(new Vt(141,"showDeprecated",!0,{description:_("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:me(new fTe),snippetSuggestions:me(new en(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[_("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),_("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),_("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),_("snippetSuggestions.none","Do not show snippet suggestions.")],description:_("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:me(new MTe),smoothScrolling:me(new Vt(115,"smoothScrolling",!1,{description:_("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:me(new pi(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:me(new RTe),inlineSuggest:me(new ITe),inlineEdit:me(new ETe),inlineCompletionsAccessibilityVerbose:me(new Vt(150,"inlineCompletionsAccessibilityVerbose",!1,{description:_("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:me(new pi(120,"suggestFontSize",0,0,1e3,{markdownDescription:_("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:me(new pi(121,"suggestLineHeight",0,0,1e3,{markdownDescription:_("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:me(new Vt(122,"suggestOnTriggerCharacters",!0,{description:_("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:me(new en(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[_("suggestSelection.first","Always select the first suggestion."),_("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),_("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:_("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:me(new en(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[_("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),_("tabCompletion.off","Disable tab completions."),_("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:_("tabCompletion","Enables tab completions.")})),tabIndex:me(new pi(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:me(new NTe),unusualLineTerminators:me(new en(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[_("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),_("unusualLineTerminators.off","Unusual line terminators are ignored."),_("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:_("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:me(new Vt(128,"useShadowDOM",!0)),useTabStops:me(new Vt(129,"useTabStops",!0,{description:_("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:me(new en(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[_("wordBreak.normal","Use the default line break rule."),_("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:_("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:me(new PTe),wordSeparators:me(new ao(132,"wordSeparators",YR,{description:_("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:me(new en(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[_("wordWrap.off","Lines will never wrap."),_("wordWrap.on","Lines will wrap at the viewport width."),_({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),_({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:_({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:me(new ao(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:me(new ao(135,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:me(new pi(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:_({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:me(new en(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:me(new en(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:me(new nTe),defaultColorDecorators:me(new Vt(148,"defaultColorDecorators",!1,{markdownDescription:_("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:me(new wTe),tabFocusMode:me(new Vt(145,"tabFocusMode",!1,{markdownDescription:_("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:me(new cy),wrappingInfo:me(new OTe),wrappingIndent:me(new ATe),wrappingStrategy:me(new dTe)};class jTe{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?wC.isErrorNoTelemetry(e)?new wC(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Iue=new jTe;function et(n){wl(n)||Iue.onUnexpectedError(n)}function fn(n){wl(n)||Iue.onUnexpectedExternalError(n)}function SQ(n){if(n instanceof Error){const{name:e,message:t}=n,i=n.stacktrace||n.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:wC.isErrorNoTelemetry(n)}}return n}const QR="Canceled";function wl(n){return n instanceof Xl?!0:n instanceof Error&&n.name===QR&&n.message===QR}class Xl extends Error{constructor(){super(QR),this.name=this.message}}function zTe(){const n=new Error(QR);return n.name=n.message,n}function al(n){return n?new Error(`Illegal argument: ${n}`):new Error("Illegal argument")}function dK(n){return n?new Error(`Illegal state: ${n}`):new Error("Illegal state")}class UTe extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class wC extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof wC)return e;const t=new wC;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class Zt extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Zt.prototype)}}function jm(n,e){const t=this;let i=!1,s;return function(){return i||(i=!0,s=n.apply(t,arguments)),s}}function m4(n){return typeof n=="object"&&n!==null&&typeof n.dispose=="function"&&n.dispose.length===0}function gi(n){if(Rt.is(n)){const e=[];for(const t of n)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(n)?[]:n}else if(n)return n.dispose(),n}function ql(...n){return Pe(()=>gi(n))}function Pe(n){return{dispose:jm(()=>{n()})}}const YP=class YP{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{gi(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?YP.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}};YP.DISABLE_DISPOSED_WARNING=!1;let ne=YP;const YZ=class YZ{constructor(){this._store=new ne,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};YZ.None=Object.freeze({dispose(){}});let G=YZ;class es{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}}class $Te{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}class KTe{constructor(e){this.object=e}dispose(){}}class uK{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{gi(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,i=!1){var s;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||(s=this._store.get(e))==null||s.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))==null||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const qTe=globalThis.performance&&typeof globalThis.performance.now=="function";class ds{static create(e){return new ds(e)}constructor(e){this._now=qTe&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var pe;(function(n){n.None=()=>G.None;function e(W,T){return h(W,()=>{},0,void 0,!0,void 0,T)}n.defer=e;function t(W){return(T,M=null,z)=>{let ee=!1,q;return q=W(Z=>{if(!ee)return q?q.dispose():ee=!0,T.call(M,Z)},null,z),ee&&q.dispose(),q}}n.once=t;function i(W,T){return n.once(n.filter(W,T))}n.onceIf=i;function s(W,T,M){return d((z,ee=null,q)=>W(Z=>z.call(ee,T(Z)),null,q),M)}n.map=s;function o(W,T,M){return d((z,ee=null,q)=>W(Z=>{T(Z),z.call(ee,Z)},null,q),M)}n.forEach=o;function r(W,T,M){return d((z,ee=null,q)=>W(Z=>T(Z)&&z.call(ee,Z),null,q),M)}n.filter=r;function a(W){return W}n.signal=a;function l(...W){return(T,M=null,z)=>{const ee=ql(...W.map(q=>q(Z=>T.call(M,Z))));return u(ee,z)}}n.any=l;function c(W,T,M,z){let ee=M;return s(W,q=>(ee=T(ee,q),ee),z)}n.reduce=c;function d(W,T){let M;const z={onWillAddFirstListener(){M=W(ee.fire,ee)},onDidRemoveLastListener(){M==null||M.dispose()}},ee=new $(z);return T==null||T.add(ee),ee.event}function u(W,T){return T instanceof Array?T.push(W):T&&T.add(W),W}function h(W,T,M=100,z=!1,ee=!1,q,Z){let V,le,Fe,ke=0,De;const ce={leakWarningThreshold:q,onWillAddFirstListener(){V=W(Ee=>{ke++,le=T(le,Ee),z&&!Fe&&(Re.fire(le),le=void 0),De=()=>{const it=le;le=void 0,Fe=void 0,(!z||ke>1)&&Re.fire(it),ke=0},typeof M=="number"?(clearTimeout(Fe),Fe=setTimeout(De,M)):Fe===void 0&&(Fe=0,queueMicrotask(De))})},onWillRemoveListener(){ee&&ke>0&&(De==null||De())},onDidRemoveLastListener(){De=void 0,V.dispose()}},Re=new $(ce);return Z==null||Z.add(Re),Re.event}n.debounce=h;function f(W,T=0,M){return n.debounce(W,(z,ee)=>z?(z.push(ee),z):[ee],T,void 0,!0,void 0,M)}n.accumulate=f;function m(W,T=(z,ee)=>z===ee,M){let z=!0,ee;return r(W,q=>{const Z=z||!T(q,ee);return z=!1,ee=q,Z},M)}n.latch=m;function p(W,T,M){return[n.filter(W,T,M),n.filter(W,z=>!T(z),M)]}n.split=p;function b(W,T=!1,M=[],z){let ee=M.slice(),q=W(le=>{ee?ee.push(le):V.fire(le)});z&&z.add(q);const Z=()=>{ee==null||ee.forEach(le=>V.fire(le)),ee=null},V=new $({onWillAddFirstListener(){q||(q=W(le=>V.fire(le)),z&&z.add(q))},onDidAddFirstListener(){ee&&(T?setTimeout(Z):Z())},onDidRemoveLastListener(){q&&q.dispose(),q=null}});return z&&z.add(V),V.event}n.buffer=b;function v(W,T){return(z,ee,q)=>{const Z=T(new y);return W(function(V){const le=Z.evaluate(V);le!==w&&z.call(ee,le)},void 0,q)}}n.chain=v;const w=Symbol("HaltChainable");class y{constructor(){this.steps=[]}map(T){return this.steps.push(T),this}forEach(T){return this.steps.push(M=>(T(M),M)),this}filter(T){return this.steps.push(M=>T(M)?M:w),this}reduce(T,M){let z=M;return this.steps.push(ee=>(z=T(z,ee),z)),this}latch(T=(M,z)=>M===z){let M=!0,z;return this.steps.push(ee=>{const q=M||!T(ee,z);return M=!1,z=ee,q?ee:w}),this}evaluate(T){for(const M of this.steps)if(T=M(T),T===w)break;return T}}function C(W,T,M=z=>z){const z=(...V)=>Z.fire(M(...V)),ee=()=>W.on(T,z),q=()=>W.removeListener(T,z),Z=new $({onWillAddFirstListener:ee,onDidRemoveLastListener:q});return Z.event}n.fromNodeEventEmitter=C;function S(W,T,M=z=>z){const z=(...V)=>Z.fire(M(...V)),ee=()=>W.addEventListener(T,z),q=()=>W.removeEventListener(T,z),Z=new $({onWillAddFirstListener:ee,onDidRemoveLastListener:q});return Z.event}n.fromDOMEventEmitter=S;function x(W){return new Promise(T=>t(W)(T))}n.toPromise=x;function k(W){const T=new $;return W.then(M=>{T.fire(M)},()=>{T.fire(void 0)}).finally(()=>{T.dispose()}),T.event}n.fromPromise=k;function N(W,T){return W(M=>T.fire(M))}n.forward=N;function E(W,T,M){return T(M),W(z=>T(z))}n.runAndSubscribe=E;class B{constructor(T,M){this._observable=T,this._counter=0,this._hasChanged=!1;const z={onWillAddFirstListener:()=>{T.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{T.removeObserver(this)}};this.emitter=new $(z),M&&M.add(this.emitter)}beginUpdate(T){this._counter++}handlePossibleChange(T){}handleChange(T,M){this._hasChanged=!0}endUpdate(T){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function A(W,T){return new B(W,T).emitter.event}n.fromObservable=A;function O(W){return(T,M,z)=>{let ee=0,q=!1;const Z={beginUpdate(){ee++},endUpdate(){ee--,ee===0&&(W.reportChanges(),q&&(q=!1,T.call(M)))},handlePossibleChange(){},handleChange(){q=!0}};W.addObserver(Z),W.reportChanges();const V={dispose(){W.removeObserver(Z)}};return z instanceof ne?z.add(V):Array.isArray(z)&&z.push(V),V}}n.fromObservableLight=O})(pe||(pe={}));const Mw=class Mw{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${Mw._idPool++}`,Mw.all.add(this)}start(e){this._stopWatch=new ds,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};Mw.all=new Set,Mw._idPool=0;let W9=Mw,GTe=-1;const XP=class XP{constructor(e,t,i=(XP._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=i,this._warnCountdown=0}dispose(){var e;(e=this._stacks)==null||e.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const s=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,s+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;const[o,r]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${r}):`;console.warn(a),console.warn(o);const l=new ZTe(a,o);this._errorHandler(l)}return()=>{const o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[i,s]of this._stacks)(!e||t<s)&&(e=[i,s],t=s);return e}};XP._idPool=1;let H9=XP;class hK{static create(){const e=new Error;return new hK(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class ZTe extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class YTe extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class s3{constructor(e){this.value=e}}const XTe=2;let $=class{constructor(e){var t,i,s,o;this._size=0,this._options=e,this._leakageMon=(t=this._options)!=null&&t.leakWarningThreshold?new H9((e==null?void 0:e.onListenerError)??et,((i=this._options)==null?void 0:i.leakWarningThreshold)??GTe):void 0,this._perfMon=(s=this._options)!=null&&s._profName?new W9(this._options._profName):void 0,this._deliveryQueue=(o=this._options)==null?void 0:o.deliveryQueue}dispose(){var e,t,i,s;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(i=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||i.call(t),(s=this._leakageMon)==null||s.dispose())}get event(){return this._event??(this._event=(e,t,i)=>{var a,l,c,d,u;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const h=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(h);const f=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],m=new YTe(`${h}. HINT: Stack shows most frequent listener (${f[1]}-times)`,f[0]);return(((a=this._options)==null?void 0:a.onListenerError)||et)(m),G.None}if(this._disposed)return G.None;t&&(e=e.bind(t));const s=new s3(e);let o;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(s.stack=hK.create(),o=this._leakageMon.check(s.stack,this._size+1)),this._listeners?this._listeners instanceof s3?(this._deliveryQueue??(this._deliveryQueue=new Eue),this._listeners=[this._listeners,s]):this._listeners.push(s):((c=(l=this._options)==null?void 0:l.onWillAddFirstListener)==null||c.call(l,this),this._listeners=s,(u=(d=this._options)==null?void 0:d.onDidAddFirstListener)==null||u.call(d,this)),this._size++;const r=Pe(()=>{o==null||o(),this._removeListener(s)});return i instanceof ne?i.add(r):Array.isArray(i)&&i.push(r),r}),this._event}_removeListener(e){var o,r,a,l;if((r=(o=this._options)==null?void 0:o.onWillRemoveListener)==null||r.call(o,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(l=(a=this._options)==null?void 0:a.onDidRemoveLastListener)==null||l.call(a,this),this._size=0;return}const t=this._listeners,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[i]=void 0;const s=this._deliveryQueue.current===this;if(this._size*XTe<=t.length){let c=0;for(let d=0;d<t.length;d++)t[d]?t[c++]=t[d]:s&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=c}}_deliver(e,t){var s;if(!e)return;const i=((s=this._options)==null?void 0:s.onListenerError)||et;if(!i){e.value(t);return}try{e.value(t)}catch(o){i(o)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,s,o;if((t=this._deliveryQueue)!=null&&t.current&&(this._deliverQueue(this._deliveryQueue),(i=this._perfMon)==null||i.stop()),(s=this._perfMon)==null||s.start(this._size),this._listeners)if(this._listeners instanceof s3)this._deliver(this._listeners,e);else{const r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}(o=this._perfMon)==null||o.stop()}hasListeners(){return this._size>0}};const QTe=()=>new Eue;class Eue{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class uv extends ${constructor(e){super(e),this._isPaused=0,this._eventQueue=new So,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Due extends uv{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class JTe extends ${constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e==null?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class eRe{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new $({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),Pe(jm(()=>{this.hasListeners&&this.unhook(t);const s=this.events.indexOf(t);this.events.splice(s,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){var t;(t=e.listener)==null||t.dispose(),e.listener=null}dispose(){var e;this.emitter.dispose();for(const t of this.events)(e=t.listener)==null||e.dispose();this.events=[]}}class vI{constructor(){this.data=[]}wrapEvent(e,t,i){return(s,o,r)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>s.call(o,a)):s.call(o,a);return}const c=l;if(!c){s.call(o,t(i,a));return}c.items??(c.items=[]),c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??(c.reducedResult=i?c.items.reduce(t,i):c.items.reduce(t)),s.call(o,c.reducedResult)})},void 0,r)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const i=e();return this.data.pop(),t.buffers.forEach(s=>s()),i}}class xQ{constructor(){this.listening=!1,this.inputEvent=pe.None,this.inputEventListener=G.None,this.emitter=new $({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const Tue=Object.freeze(function(n,e){const t=setTimeout(n.bind(e),0);return{dispose(){clearTimeout(t)}}});var ht;(function(n){function e(t){return t===n.None||t===n.Cancelled||t instanceof _T?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}n.isCancellationToken=e,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:pe.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Tue})})(ht||(ht={}));class _T{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Tue:(this._emitter||(this._emitter=new $),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let Gi=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new _T),this._token}cancel(){this._token?this._token instanceof _T&&this._token.cancel():this._token=ht.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)==null||t.dispose(),this._token?this._token instanceof _T&&this._token.dispose():this._token=ht.None}};function V9(n){const e=new Gi;return n.add({dispose(){e.cancel()}}),e.token}class fK{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const bT=new fK,j9=new fK,z9=new fK,Rue=new Array(230),tRe=Object.create(null),iRe=Object.create(null),gK=[];for(let n=0;n<=193;n++)gK[n]=-1;(function(){const n="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",n,n],[1,1,"Hyper",0,n,0,n,n,n],[1,2,"Super",0,n,0,n,n,n],[1,3,"Fn",0,n,0,n,n,n],[1,4,"FnLock",0,n,0,n,n,n],[1,5,"Suspend",0,n,0,n,n,n],[1,6,"Resume",0,n,0,n,n,n],[1,7,"Turbo",0,n,0,n,n,n],[1,8,"Sleep",0,n,0,"VK_SLEEP",n,n],[1,9,"WakeUp",0,n,0,n,n,n],[0,10,"KeyA",31,"A",65,"VK_A",n,n],[0,11,"KeyB",32,"B",66,"VK_B",n,n],[0,12,"KeyC",33,"C",67,"VK_C",n,n],[0,13,"KeyD",34,"D",68,"VK_D",n,n],[0,14,"KeyE",35,"E",69,"VK_E",n,n],[0,15,"KeyF",36,"F",70,"VK_F",n,n],[0,16,"KeyG",37,"G",71,"VK_G",n,n],[0,17,"KeyH",38,"H",72,"VK_H",n,n],[0,18,"KeyI",39,"I",73,"VK_I",n,n],[0,19,"KeyJ",40,"J",74,"VK_J",n,n],[0,20,"KeyK",41,"K",75,"VK_K",n,n],[0,21,"KeyL",42,"L",76,"VK_L",n,n],[0,22,"KeyM",43,"M",77,"VK_M",n,n],[0,23,"KeyN",44,"N",78,"VK_N",n,n],[0,24,"KeyO",45,"O",79,"VK_O",n,n],[0,25,"KeyP",46,"P",80,"VK_P",n,n],[0,26,"KeyQ",47,"Q",81,"VK_Q",n,n],[0,27,"KeyR",48,"R",82,"VK_R",n,n],[0,28,"KeyS",49,"S",83,"VK_S",n,n],[0,29,"KeyT",50,"T",84,"VK_T",n,n],[0,30,"KeyU",51,"U",85,"VK_U",n,n],[0,31,"KeyV",52,"V",86,"VK_V",n,n],[0,32,"KeyW",53,"W",87,"VK_W",n,n],[0,33,"KeyX",54,"X",88,"VK_X",n,n],[0,34,"KeyY",55,"Y",89,"VK_Y",n,n],[0,35,"KeyZ",56,"Z",90,"VK_Z",n,n],[0,36,"Digit1",22,"1",49,"VK_1",n,n],[0,37,"Digit2",23,"2",50,"VK_2",n,n],[0,38,"Digit3",24,"3",51,"VK_3",n,n],[0,39,"Digit4",25,"4",52,"VK_4",n,n],[0,40,"Digit5",26,"5",53,"VK_5",n,n],[0,41,"Digit6",27,"6",54,"VK_6",n,n],[0,42,"Digit7",28,"7",55,"VK_7",n,n],[0,43,"Digit8",29,"8",56,"VK_8",n,n],[0,44,"Digit9",30,"9",57,"VK_9",n,n],[0,45,"Digit0",21,"0",48,"VK_0",n,n],[1,46,"Enter",3,"Enter",13,"VK_RETURN",n,n],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",n,n],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",n,n],[1,49,"Tab",2,"Tab",9,"VK_TAB",n,n],[1,50,"Space",10,"Space",32,"VK_SPACE",n,n],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,n,0,n,n,n],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",n,n],[1,64,"F1",59,"F1",112,"VK_F1",n,n],[1,65,"F2",60,"F2",113,"VK_F2",n,n],[1,66,"F3",61,"F3",114,"VK_F3",n,n],[1,67,"F4",62,"F4",115,"VK_F4",n,n],[1,68,"F5",63,"F5",116,"VK_F5",n,n],[1,69,"F6",64,"F6",117,"VK_F6",n,n],[1,70,"F7",65,"F7",118,"VK_F7",n,n],[1,71,"F8",66,"F8",119,"VK_F8",n,n],[1,72,"F9",67,"F9",120,"VK_F9",n,n],[1,73,"F10",68,"F10",121,"VK_F10",n,n],[1,74,"F11",69,"F11",122,"VK_F11",n,n],[1,75,"F12",70,"F12",123,"VK_F12",n,n],[1,76,"PrintScreen",0,n,0,n,n,n],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",n,n],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",n,n],[1,79,"Insert",19,"Insert",45,"VK_INSERT",n,n],[1,80,"Home",14,"Home",36,"VK_HOME",n,n],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",n,n],[1,82,"Delete",20,"Delete",46,"VK_DELETE",n,n],[1,83,"End",13,"End",35,"VK_END",n,n],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",n,n],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",n],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",n],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",n],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",n],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",n,n],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",n,n],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",n,n],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",n,n],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",n,n],[1,94,"NumpadEnter",3,n,0,n,n,n],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",n,n],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",n,n],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",n,n],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",n,n],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",n,n],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",n,n],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",n,n],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",n,n],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",n,n],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",n,n],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",n,n],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",n,n],[1,107,"ContextMenu",58,"ContextMenu",93,n,n,n],[1,108,"Power",0,n,0,n,n,n],[1,109,"NumpadEqual",0,n,0,n,n,n],[1,110,"F13",71,"F13",124,"VK_F13",n,n],[1,111,"F14",72,"F14",125,"VK_F14",n,n],[1,112,"F15",73,"F15",126,"VK_F15",n,n],[1,113,"F16",74,"F16",127,"VK_F16",n,n],[1,114,"F17",75,"F17",128,"VK_F17",n,n],[1,115,"F18",76,"F18",129,"VK_F18",n,n],[1,116,"F19",77,"F19",130,"VK_F19",n,n],[1,117,"F20",78,"F20",131,"VK_F20",n,n],[1,118,"F21",79,"F21",132,"VK_F21",n,n],[1,119,"F22",80,"F22",133,"VK_F22",n,n],[1,120,"F23",81,"F23",134,"VK_F23",n,n],[1,121,"F24",82,"F24",135,"VK_F24",n,n],[1,122,"Open",0,n,0,n,n,n],[1,123,"Help",0,n,0,n,n,n],[1,124,"Select",0,n,0,n,n,n],[1,125,"Again",0,n,0,n,n,n],[1,126,"Undo",0,n,0,n,n,n],[1,127,"Cut",0,n,0,n,n,n],[1,128,"Copy",0,n,0,n,n,n],[1,129,"Paste",0,n,0,n,n,n],[1,130,"Find",0,n,0,n,n,n],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",n,n],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",n,n],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",n,n],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",n,n],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",n,n],[1,136,"KanaMode",0,n,0,n,n,n],[0,137,"IntlYen",0,n,0,n,n,n],[1,138,"Convert",0,n,0,n,n,n],[1,139,"NonConvert",0,n,0,n,n,n],[1,140,"Lang1",0,n,0,n,n,n],[1,141,"Lang2",0,n,0,n,n,n],[1,142,"Lang3",0,n,0,n,n,n],[1,143,"Lang4",0,n,0,n,n,n],[1,144,"Lang5",0,n,0,n,n,n],[1,145,"Abort",0,n,0,n,n,n],[1,146,"Props",0,n,0,n,n,n],[1,147,"NumpadParenLeft",0,n,0,n,n,n],[1,148,"NumpadParenRight",0,n,0,n,n,n],[1,149,"NumpadBackspace",0,n,0,n,n,n],[1,150,"NumpadMemoryStore",0,n,0,n,n,n],[1,151,"NumpadMemoryRecall",0,n,0,n,n,n],[1,152,"NumpadMemoryClear",0,n,0,n,n,n],[1,153,"NumpadMemoryAdd",0,n,0,n,n,n],[1,154,"NumpadMemorySubtract",0,n,0,n,n,n],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",n,n],[1,156,"NumpadClearEntry",0,n,0,n,n,n],[1,0,n,5,"Ctrl",17,"VK_CONTROL",n,n],[1,0,n,4,"Shift",16,"VK_SHIFT",n,n],[1,0,n,6,"Alt",18,"VK_MENU",n,n],[1,0,n,57,"Meta",91,"VK_COMMAND",n,n],[1,157,"ControlLeft",5,n,0,"VK_LCONTROL",n,n],[1,158,"ShiftLeft",4,n,0,"VK_LSHIFT",n,n],[1,159,"AltLeft",6,n,0,"VK_LMENU",n,n],[1,160,"MetaLeft",57,n,0,"VK_LWIN",n,n],[1,161,"ControlRight",5,n,0,"VK_RCONTROL",n,n],[1,162,"ShiftRight",4,n,0,"VK_RSHIFT",n,n],[1,163,"AltRight",6,n,0,"VK_RMENU",n,n],[1,164,"MetaRight",57,n,0,"VK_RWIN",n,n],[1,165,"BrightnessUp",0,n,0,n,n,n],[1,166,"BrightnessDown",0,n,0,n,n,n],[1,167,"MediaPlay",0,n,0,n,n,n],[1,168,"MediaRecord",0,n,0,n,n,n],[1,169,"MediaFastForward",0,n,0,n,n,n],[1,170,"MediaRewind",0,n,0,n,n,n],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",n,n],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",n,n],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",n,n],[1,174,"Eject",0,n,0,n,n,n],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",n,n],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",n,n],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",n,n],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",n,n],[1,179,"LaunchApp1",0,n,0,"VK_MEDIA_LAUNCH_APP1",n,n],[1,180,"SelectTask",0,n,0,n,n,n],[1,181,"LaunchScreenSaver",0,n,0,n,n,n],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",n,n],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",n,n],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",n,n],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",n,n],[1,186,"BrowserStop",0,n,0,"VK_BROWSER_STOP",n,n],[1,187,"BrowserRefresh",0,n,0,"VK_BROWSER_REFRESH",n,n],[1,188,"BrowserFavorites",0,n,0,"VK_BROWSER_FAVORITES",n,n],[1,189,"ZoomToggle",0,n,0,n,n,n],[1,190,"MailReply",0,n,0,n,n,n],[1,191,"MailForward",0,n,0,n,n,n],[1,192,"MailSend",0,n,0,n,n,n],[1,0,n,114,"KeyInComposition",229,n,n,n],[1,0,n,116,"ABNT_C2",194,"VK_ABNT_C2",n,n],[1,0,n,96,"OEM_8",223,"VK_OEM_8",n,n],[1,0,n,0,n,0,"VK_KANA",n,n],[1,0,n,0,n,0,"VK_HANGUL",n,n],[1,0,n,0,n,0,"VK_JUNJA",n,n],[1,0,n,0,n,0,"VK_FINAL",n,n],[1,0,n,0,n,0,"VK_HANJA",n,n],[1,0,n,0,n,0,"VK_KANJI",n,n],[1,0,n,0,n,0,"VK_CONVERT",n,n],[1,0,n,0,n,0,"VK_NONCONVERT",n,n],[1,0,n,0,n,0,"VK_ACCEPT",n,n],[1,0,n,0,n,0,"VK_MODECHANGE",n,n],[1,0,n,0,n,0,"VK_SELECT",n,n],[1,0,n,0,n,0,"VK_PRINT",n,n],[1,0,n,0,n,0,"VK_EXECUTE",n,n],[1,0,n,0,n,0,"VK_SNAPSHOT",n,n],[1,0,n,0,n,0,"VK_HELP",n,n],[1,0,n,0,n,0,"VK_APPS",n,n],[1,0,n,0,n,0,"VK_PROCESSKEY",n,n],[1,0,n,0,n,0,"VK_PACKET",n,n],[1,0,n,0,n,0,"VK_DBE_SBCSCHAR",n,n],[1,0,n,0,n,0,"VK_DBE_DBCSCHAR",n,n],[1,0,n,0,n,0,"VK_ATTN",n,n],[1,0,n,0,n,0,"VK_CRSEL",n,n],[1,0,n,0,n,0,"VK_EXSEL",n,n],[1,0,n,0,n,0,"VK_EREOF",n,n],[1,0,n,0,n,0,"VK_PLAY",n,n],[1,0,n,0,n,0,"VK_ZOOM",n,n],[1,0,n,0,n,0,"VK_NONAME",n,n],[1,0,n,0,n,0,"VK_PA1",n,n],[1,0,n,0,n,0,"VK_OEM_CLEAR",n,n]],t=[],i=[];for(const s of e){const[o,r,a,l,c,d,u,h,f]=s;if(i[r]||(i[r]=!0,tRe[a]=r,iRe[a.toLowerCase()]=r,o&&(gK[r]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);bT.define(l,c),j9.define(l,h||c),z9.define(l,f||h||c)}d&&(Rue[d]=l)}})();var kh;(function(n){function e(a){return bT.keyCodeToStr(a)}n.toString=e;function t(a){return bT.strToKeyCode(a)}n.fromString=t;function i(a){return j9.keyCodeToStr(a)}n.toUserSettingsUS=i;function s(a){return z9.keyCodeToStr(a)}n.toUserSettingsGeneral=s;function o(a){return j9.strToKeyCode(a)||z9.strToKeyCode(a)}n.fromUserSettings=o;function r(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return bT.keyCodeToStr(a)}n.toElectronAccelerator=r})(kh||(kh={}));function Mn(n,e){const t=(e&65535)<<16>>>0;return(n|t)>>>0}var LQ={};let uy;const o3=globalThis.vscode;var toe;if(typeof o3<"u"&&typeof o3.process<"u"){const n=o3.process;uy={get platform(){return n.platform},get arch(){return n.arch},get env(){return n.env},cwd(){return n.cwd()}}}else typeof process<"u"&&typeof((toe=process==null?void 0:process.versions)==null?void 0:toe.node)=="string"?uy={get platform(){return process.platform},get arch(){return process.arch},get env(){return LQ},cwd(){return LQ.VSCODE_CWD||process.cwd()}}:uy={get platform(){return As?"win32":Lt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const JR=uy.cwd,U9=uy.env,nRe=uy.platform,sRe=65,oRe=97,rRe=90,aRe=122,om=46,eo=47,ia=92,Vf=58,lRe=63;class Mue extends Error{constructor(e,t,i){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const o=e.indexOf(".")!==-1?"property":"argument";let r=`The "${e}" ${o} ${s} of type ${t}`;r+=`. Received type ${typeof i}`,super(r),this.code="ERR_INVALID_ARG_TYPE"}}function cRe(n,e){if(n===null||typeof n!="object")throw new Mue(e,"Object",n)}function ss(n,e){if(typeof n!="string")throw new Mue(e,"string",n)}const If=nRe==="win32";function ai(n){return n===eo||n===ia}function $9(n){return n===eo}function jf(n){return n>=sRe&&n<=rRe||n>=oRe&&n<=aRe}function e2(n,e,t,i){let s="",o=0,r=-1,a=0,l=0;for(let c=0;c<=n.length;++c){if(c<n.length)l=n.charCodeAt(c);else{if(i(l))break;l=eo}if(i(l)){if(!(r===c-1||a===1))if(a===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==om||s.charCodeAt(s.length-2)!==om){if(s.length>2){const d=s.lastIndexOf(t);d===-1?(s="",o=0):(s=s.slice(0,d),o=s.length-1-s.lastIndexOf(t)),r=c,a=0;continue}else if(s.length!==0){s="",o=0,r=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",o=2)}else s.length>0?s+=`${t}${n.slice(r+1,c)}`:s=n.slice(r+1,c),o=c-r-1;r=c,a=0}else l===om&&a!==-1?++a:a=-1}return s}function dRe(n){return n?`${n[0]==="."?"":"."}${n}`:""}function Pue(n,e){cRe(e,"pathObject");const t=e.dir||e.root,i=e.base||`${e.name||""}${dRe(e.ext)}`;return t?t===e.root?`${t}${i}`:`${t}${n}${i}`:i}const tr={resolve(...n){let e="",t="",i=!1;for(let s=n.length-1;s>=-1;s--){let o;if(s>=0){if(o=n[s],ss(o,`paths[${s}]`),o.length===0)continue}else e.length===0?o=JR():(o=U9[`=${e}`]||JR(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===ia)&&(o=`${e}\\`));const r=o.length;let a=0,l="",c=!1;const d=o.charCodeAt(0);if(r===1)ai(d)&&(a=1,c=!0);else if(ai(d))if(c=!0,ai(o.charCodeAt(1))){let u=2,h=u;for(;u<r&&!ai(o.charCodeAt(u));)u++;if(u<r&&u!==h){const f=o.slice(h,u);for(h=u;u<r&&ai(o.charCodeAt(u));)u++;if(u<r&&u!==h){for(h=u;u<r&&!ai(o.charCodeAt(u));)u++;(u===r||u!==h)&&(l=`\\\\${f}\\${o.slice(h,u)}`,a=u)}}}else a=1;else jf(d)&&o.charCodeAt(1)===Vf&&(l=o.slice(0,2),a=2,r>2&&ai(o.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=e2(t,!i,"\\",ai),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(n){ss(n,"path");const e=n.length;if(e===0)return".";let t=0,i,s=!1;const o=n.charCodeAt(0);if(e===1)return $9(o)?"\\":n;if(ai(o))if(s=!0,ai(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!ai(n.charCodeAt(a));)a++;if(a<e&&a!==l){const c=n.slice(l,a);for(l=a;a<e&&ai(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!ai(n.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${n.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${n.slice(l,a)}`,t=a)}}}else t=1;else jf(o)&&n.charCodeAt(1)===Vf&&(i=n.slice(0,2),t=2,e>2&&ai(n.charCodeAt(2))&&(s=!0,t=3));let r=t<e?e2(n.slice(t),!s,"\\",ai):"";return r.length===0&&!s&&(r="."),r.length>0&&ai(n.charCodeAt(e-1))&&(r+="\\"),i===void 0?s?`\\${r}`:r:s?`${i}\\${r}`:`${i}${r}`},isAbsolute(n){ss(n,"path");const e=n.length;if(e===0)return!1;const t=n.charCodeAt(0);return ai(t)||e>2&&jf(t)&&n.charCodeAt(1)===Vf&&ai(n.charCodeAt(2))},join(...n){if(n.length===0)return".";let e,t;for(let o=0;o<n.length;++o){const r=n[o];ss(r,"path"),r.length>0&&(e===void 0?e=t=r:e+=`\\${r}`)}if(e===void 0)return".";let i=!0,s=0;if(typeof t=="string"&&ai(t.charCodeAt(0))){++s;const o=t.length;o>1&&ai(t.charCodeAt(1))&&(++s,o>2&&(ai(t.charCodeAt(2))?++s:i=!1))}if(i){for(;s<e.length&&ai(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return tr.normalize(e)},relative(n,e){if(ss(n,"from"),ss(e,"to"),n===e)return"";const t=tr.resolve(n),i=tr.resolve(e);if(t===i||(n=t.toLowerCase(),e=i.toLowerCase(),n===e))return"";let s=0;for(;s<n.length&&n.charCodeAt(s)===ia;)s++;let o=n.length;for(;o-1>s&&n.charCodeAt(o-1)===ia;)o--;const r=o-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===ia;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===ia;)l--;const c=l-a,d=r<c?r:c;let u=-1,h=0;for(;h<d;h++){const m=n.charCodeAt(s+h);if(m!==e.charCodeAt(a+h))break;m===ia&&(u=h)}if(h!==d){if(u===-1)return i}else{if(c>d){if(e.charCodeAt(a+h)===ia)return i.slice(a+h+1);if(h===2)return i.slice(a+h)}r>d&&(n.charCodeAt(s+h)===ia?u=h:h===2&&(u=3)),u===-1&&(u=0)}let f="";for(h=s+u+1;h<=o;++h)(h===o||n.charCodeAt(h)===ia)&&(f+=f.length===0?"..":"\\..");return a+=u,f.length>0?`${f}${i.slice(a,l)}`:(i.charCodeAt(a)===ia&&++a,i.slice(a,l))},toNamespacedPath(n){if(typeof n!="string"||n.length===0)return n;const e=tr.resolve(n);if(e.length<=2)return n;if(e.charCodeAt(0)===ia){if(e.charCodeAt(1)===ia){const t=e.charCodeAt(2);if(t!==lRe&&t!==om)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(jf(e.charCodeAt(0))&&e.charCodeAt(1)===Vf&&e.charCodeAt(2)===ia)return`\\\\?\\${e}`;return n},dirname(n){ss(n,"path");const e=n.length;if(e===0)return".";let t=-1,i=0;const s=n.charCodeAt(0);if(e===1)return ai(s)?n:".";if(ai(s)){if(t=i=1,ai(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!ai(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&ai(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!ai(n.charCodeAt(a));)a++;if(a===e)return n;a!==l&&(t=i=a+1)}}}}else jf(s)&&n.charCodeAt(1)===Vf&&(t=e>2&&ai(n.charCodeAt(2))?3:2,i=t);let o=-1,r=!0;for(let a=e-1;a>=i;--a)if(ai(n.charCodeAt(a))){if(!r){o=a;break}}else r=!1;if(o===-1){if(t===-1)return".";o=t}return n.slice(0,o)},basename(n,e){e!==void 0&&ss(e,"suffix"),ss(n,"path");let t=0,i=-1,s=!0,o;if(n.length>=2&&jf(n.charCodeAt(0))&&n.charCodeAt(1)===Vf&&(t=2),e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let r=e.length-1,a=-1;for(o=n.length-1;o>=t;--o){const l=n.charCodeAt(o);if(ai(l)){if(!s){t=o+1;break}}else a===-1&&(s=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(i=o):(r=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(o=n.length-1;o>=t;--o)if(ai(n.charCodeAt(o))){if(!s){t=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":n.slice(t,i)},extname(n){ss(n,"path");let e=0,t=-1,i=0,s=-1,o=!0,r=0;n.length>=2&&n.charCodeAt(1)===Vf&&jf(n.charCodeAt(0))&&(e=i=2);for(let a=n.length-1;a>=e;--a){const l=n.charCodeAt(a);if(ai(l)){if(!o){i=a+1;break}continue}s===-1&&(o=!1,s=a+1),l===om?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||s===-1||r===0||r===1&&t===s-1&&t===i+1?"":n.slice(t,s)},format:Pue.bind(null,"\\"),parse(n){ss(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.length;let i=0,s=n.charCodeAt(0);if(t===1)return ai(s)?(e.root=e.dir=n,e):(e.base=e.name=n,e);if(ai(s)){if(i=1,ai(n.charCodeAt(1))){let u=2,h=u;for(;u<t&&!ai(n.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&ai(n.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&!ai(n.charCodeAt(u));)u++;u===t?i=u:u!==h&&(i=u+1)}}}}else if(jf(s)&&n.charCodeAt(1)===Vf){if(t<=2)return e.root=e.dir=n,e;if(i=2,ai(n.charCodeAt(2))){if(t===3)return e.root=e.dir=n,e;i=3}}i>0&&(e.root=n.slice(0,i));let o=-1,r=i,a=-1,l=!0,c=n.length-1,d=0;for(;c>=i;--c){if(s=n.charCodeAt(c),ai(s)){if(!l){r=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===om?o===-1?o=c:d!==1&&(d=1):o!==-1&&(d=-1)}return a!==-1&&(o===-1||d===0||d===1&&o===a-1&&o===r+1?e.base=e.name=n.slice(r,a):(e.name=n.slice(r,o),e.base=n.slice(r,a),e.ext=n.slice(o,a))),r>0&&r!==i?e.dir=n.slice(0,r-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},uRe=(()=>{if(If){const n=/\\/g;return()=>{const e=JR().replace(n,"/");return e.slice(e.indexOf("/"))}}return()=>JR()})(),xn={resolve(...n){let e="",t=!1;for(let i=n.length-1;i>=-1&&!t;i--){const s=i>=0?n[i]:uRe();ss(s,`paths[${i}]`),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===eo)}return e=e2(e,!t,"/",$9),t?`/${e}`:e.length>0?e:"."},normalize(n){if(ss(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===eo,t=n.charCodeAt(n.length-1)===eo;return n=e2(n,!e,"/",$9),n.length===0?e?"/":t?"./":".":(t&&(n+="/"),e?`/${n}`:n)},isAbsolute(n){return ss(n,"path"),n.length>0&&n.charCodeAt(0)===eo},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const i=n[t];ss(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":xn.normalize(e)},relative(n,e){if(ss(n,"from"),ss(e,"to"),n===e||(n=xn.resolve(n),e=xn.resolve(e),n===e))return"";const t=1,i=n.length,s=i-t,o=1,r=e.length-o,a=s<r?s:r;let l=-1,c=0;for(;c<a;c++){const u=n.charCodeAt(t+c);if(u!==e.charCodeAt(o+c))break;u===eo&&(l=c)}if(c===a)if(r>a){if(e.charCodeAt(o+c)===eo)return e.slice(o+c+1);if(c===0)return e.slice(o+c)}else s>a&&(n.charCodeAt(t+c)===eo?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=i;++c)(c===i||n.charCodeAt(c)===eo)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+l)}`},toNamespacedPath(n){return n},dirname(n){if(ss(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===eo;let t=-1,i=!0;for(let s=n.length-1;s>=1;--s)if(n.charCodeAt(s)===eo){if(!i){t=s;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":n.slice(0,t)},basename(n,e){e!==void 0&&ss(e,"ext"),ss(n,"path");let t=0,i=-1,s=!0,o;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let r=e.length-1,a=-1;for(o=n.length-1;o>=0;--o){const l=n.charCodeAt(o);if(l===eo){if(!s){t=o+1;break}}else a===-1&&(s=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(i=o):(r=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===eo){if(!s){t=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":n.slice(t,i)},extname(n){ss(n,"path");let e=-1,t=0,i=-1,s=!0,o=0;for(let r=n.length-1;r>=0;--r){const a=n.charCodeAt(r);if(a===eo){if(!s){t=r+1;break}continue}i===-1&&(s=!1,i=r+1),a===om?e===-1?e=r:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||i===-1||o===0||o===1&&e===i-1&&e===t+1?"":n.slice(e,i)},format:Pue.bind(null,"/"),parse(n){ss(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.charCodeAt(0)===eo;let i;t?(e.root="/",i=1):i=0;let s=-1,o=0,r=-1,a=!0,l=n.length-1,c=0;for(;l>=i;--l){const d=n.charCodeAt(l);if(d===eo){if(!a){o=l+1;break}continue}r===-1&&(a=!1,r=l+1),d===om?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(r!==-1){const d=o===0&&t?1:o;s===-1||c===0||c===1&&s===r-1&&s===o+1?e.base=e.name=n.slice(d,r):(e.name=n.slice(d,s),e.base=n.slice(d,r),e.ext=n.slice(s,r))}return o>0?e.dir=n.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};xn.win32=tr.win32=tr;xn.posix=tr.posix=xn;const Aue=If?tr.normalize:xn.normalize,hRe=If?tr.join:xn.join,fRe=If?tr.resolve:xn.resolve,gRe=If?tr.relative:xn.relative,Oue=If?tr.dirname:xn.dirname,rm=If?tr.basename:xn.basename,mRe=If?tr.extname:xn.extname,Zc=If?tr.sep:xn.sep,pRe=/^\w[\w\d+.-]*$/,_Re=/^\//,bRe=/^\/\//;function vRe(n,e){if(!n.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${n.authority}", path: "${n.path}", query: "${n.query}", fragment: "${n.fragment}"}`);if(n.scheme&&!pRe.test(n.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(n.path){if(n.authority){if(!_Re.test(n.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(bRe.test(n.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function wRe(n,e){return!n&&!e?"file":n}function yRe(n,e){switch(n){case"https":case"http":case"file":e?e[0]!==Mc&&(e=Mc+e):e=Mc;break}return e}const Cn="",Mc="/",CRe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Be{static isUri(e){return e instanceof Be?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,i,s,o,r=!1){typeof e=="object"?(this.scheme=e.scheme||Cn,this.authority=e.authority||Cn,this.path=e.path||Cn,this.query=e.query||Cn,this.fragment=e.fragment||Cn):(this.scheme=wRe(e,r),this.authority=t||Cn,this.path=yRe(this.scheme,i||Cn),this.query=s||Cn,this.fragment=o||Cn,vRe(this,r))}get fsPath(){return t2(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:s,query:o,fragment:r}=e;return t===void 0?t=this.scheme:t===null&&(t=Cn),i===void 0?i=this.authority:i===null&&(i=Cn),s===void 0?s=this.path:s===null&&(s=Cn),o===void 0?o=this.query:o===null&&(o=Cn),r===void 0?r=this.fragment:r===null&&(r=Cn),t===this.scheme&&i===this.authority&&s===this.path&&o===this.query&&r===this.fragment?this:new _0(t,i,s,o,r)}static parse(e,t=!1){const i=CRe.exec(e);return i?new _0(i[2]||Cn,HE(i[4]||Cn),HE(i[5]||Cn),HE(i[7]||Cn),HE(i[9]||Cn),t):new _0(Cn,Cn,Cn,Cn,Cn)}static file(e){let t=Cn;if(As&&(e=e.replace(/\\/g,Mc)),e[0]===Mc&&e[1]===Mc){const i=e.indexOf(Mc,2);i===-1?(t=e.substring(2),e=Mc):(t=e.substring(2,i),e=e.substring(i)||Mc)}return new _0("file",t,e,Cn,Cn)}static from(e,t){return new _0(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return As&&e.scheme==="file"?i=Be.file(tr.join(t2(e,!0),...t)).path:i=xn.join(e.path,...t),e.with({path:i})}toString(e=!1){return K9(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Be)return e;{const t=new _0(e);return t._formatted=e.external??null,t._fsPath=e._sep===Fue?e.fsPath??null:null,t}}else return e}}const Fue=As?1:void 0;let _0=class extends Be{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=t2(this,!1)),this._fsPath}toString(e=!1){return e?K9(this,!0):(this._formatted||(this._formatted=K9(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Fue),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const Bue={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function kQ(n,e,t){let i,s=-1;for(let o=0;o<n.length;o++){const r=n.charCodeAt(o);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47||t&&r===91||t&&r===93||t&&r===58)s!==-1&&(i+=encodeURIComponent(n.substring(s,o)),s=-1),i!==void 0&&(i+=n.charAt(o));else{i===void 0&&(i=n.substr(0,o));const a=Bue[r];a!==void 0?(s!==-1&&(i+=encodeURIComponent(n.substring(s,o)),s=-1),i+=a):s===-1&&(s=o)}}return s!==-1&&(i+=encodeURIComponent(n.substring(s))),i!==void 0?i:n}function SRe(n){let e;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i===35||i===63?(e===void 0&&(e=n.substr(0,t)),e+=Bue[i]):e!==void 0&&(e+=n[t])}return e!==void 0?e:n}function t2(n,e){let t;return n.authority&&n.path.length>1&&n.scheme==="file"?t=`//${n.authority}${n.path}`:n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?e?t=n.path.substr(1):t=n.path[1].toLowerCase()+n.path.substr(2):t=n.path,As&&(t=t.replace(/\//g,"\\")),t}function K9(n,e){const t=e?SRe:kQ;let i="",{scheme:s,authority:o,path:r,query:a,fragment:l}=n;if(s&&(i+=s,i+=":"),(o||s==="file")&&(i+=Mc,i+=Mc),o){let c=o.indexOf("@");if(c!==-1){const d=o.substr(0,c);o=o.substr(c+1),c=d.lastIndexOf(":"),c===-1?i+=t(d,!1,!1):(i+=t(d.substr(0,c),!1,!1),i+=":",i+=t(d.substr(c+1),!1,!0)),i+="@"}o=o.toLowerCase(),c=o.lastIndexOf(":"),c===-1?i+=t(o,!1,!0):(i+=t(o.substr(0,c),!1,!0),i+=o.substr(c))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const c=r.charCodeAt(1);c>=65&&c<=90&&(r=`/${String.fromCharCode(c+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const c=r.charCodeAt(0);c>=65&&c<=90&&(r=`${String.fromCharCode(c+32)}:${r.substr(2)}`)}i+=t(r,!0,!1)}return a&&(i+="?",i+=t(a,!1,!1)),l&&(i+="#",i+=e?l:kQ(l,!1,!1)),i}function Wue(n){try{return decodeURIComponent(n)}catch{return n.length>3?n.substr(0,3)+Wue(n.substr(3)):n}}const NQ=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function HE(n){return n.match(NQ)?n.replace(NQ,e=>Wue(e)):n}let U=class jp{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new jp(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return jp.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return jp.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return jp.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,s=t.lineNumber|0;if(i===s){const o=e.column|0,r=t.column|0;return o-r}return i-s}clone(){return new jp(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new jp(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},D=class gs{constructor(e,t,i,s){e>i||e===i&&t>s?(this.startLineNumber=i,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=s)}isEmpty(){return gs.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return gs.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return gs.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return gs.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return gs.plusRange(this,e)}static plusRange(e,t){let i,s,o,r;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,r=e.endColumn),new gs(i,s,o,r)}intersectRanges(e){return gs.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,s=e.startColumn,o=e.endLineNumber,r=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return i<a?(i=a,s=l):i===a&&(s=Math.max(s,l)),o>c?(o=c,r=d):o===c&&(r=Math.min(r,d)),i>o||i===o&&s>r?null:new gs(i,s,o,r)}equalsRange(e){return gs.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return gs.getEndPosition(this)}static getEndPosition(e){return new U(e.endLineNumber,e.endColumn)}getStartPosition(){return gs.getStartPosition(this)}static getStartPosition(e){return new U(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new gs(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new gs(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return gs.collapseToStart(this)}static collapseToStart(e){return new gs(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return gs.collapseToEnd(this)}static collapseToEnd(e){return new gs(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new gs(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new gs(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new gs(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const o=e.startLineNumber|0,r=t.startLineNumber|0;if(o===r){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){const u=e.endColumn|0,h=t.endColumn|0;return u-h}return c-d}return a-l}return o-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},Ie=class Ll extends D{constructor(e,t,i,s){super(e,t,i,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Ll.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Ll(this.startLineNumber,this.startColumn,e,t):new Ll(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new U(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new U(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Ll(e,t,this.endLineNumber,this.endColumn):new Ll(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Ll(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Ll(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Ll(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Ll(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,s,o){return o===0?new Ll(e,t,i,s):new Ll(i,s,e,t)}};const q9=Object.create(null);function I(n,e){if(ir(e)){const t=q9[e];if(t===void 0)throw new Error(`${n} references an unknown codicon: ${e}`);e=t}return q9[n]=e,{id:n}}function Hue(){return q9}const xRe={add:I("add",6e4),plus:I("plus",6e4),gistNew:I("gist-new",6e4),repoCreate:I("repo-create",6e4),lightbulb:I("lightbulb",60001),lightBulb:I("light-bulb",60001),repo:I("repo",60002),repoDelete:I("repo-delete",60002),gistFork:I("gist-fork",60003),repoForked:I("repo-forked",60003),gitPullRequest:I("git-pull-request",60004),gitPullRequestAbandoned:I("git-pull-request-abandoned",60004),recordKeys:I("record-keys",60005),keyboard:I("keyboard",60005),tag:I("tag",60006),gitPullRequestLabel:I("git-pull-request-label",60006),tagAdd:I("tag-add",60006),tagRemove:I("tag-remove",60006),person:I("person",60007),personFollow:I("person-follow",60007),personOutline:I("person-outline",60007),personFilled:I("person-filled",60007),gitBranch:I("git-branch",60008),gitBranchCreate:I("git-branch-create",60008),gitBranchDelete:I("git-branch-delete",60008),sourceControl:I("source-control",60008),mirror:I("mirror",60009),mirrorPublic:I("mirror-public",60009),star:I("star",60010),starAdd:I("star-add",60010),starDelete:I("star-delete",60010),starEmpty:I("star-empty",60010),comment:I("comment",60011),commentAdd:I("comment-add",60011),alert:I("alert",60012),warning:I("warning",60012),search:I("search",60013),searchSave:I("search-save",60013),logOut:I("log-out",60014),signOut:I("sign-out",60014),logIn:I("log-in",60015),signIn:I("sign-in",60015),eye:I("eye",60016),eyeUnwatch:I("eye-unwatch",60016),eyeWatch:I("eye-watch",60016),circleFilled:I("circle-filled",60017),primitiveDot:I("primitive-dot",60017),closeDirty:I("close-dirty",60017),debugBreakpoint:I("debug-breakpoint",60017),debugBreakpointDisabled:I("debug-breakpoint-disabled",60017),debugHint:I("debug-hint",60017),terminalDecorationSuccess:I("terminal-decoration-success",60017),primitiveSquare:I("primitive-square",60018),edit:I("edit",60019),pencil:I("pencil",60019),info:I("info",60020),issueOpened:I("issue-opened",60020),gistPrivate:I("gist-private",60021),gitForkPrivate:I("git-fork-private",60021),lock:I("lock",60021),mirrorPrivate:I("mirror-private",60021),close:I("close",60022),removeClose:I("remove-close",60022),x:I("x",60022),repoSync:I("repo-sync",60023),sync:I("sync",60023),clone:I("clone",60024),desktopDownload:I("desktop-download",60024),beaker:I("beaker",60025),microscope:I("microscope",60025),vm:I("vm",60026),deviceDesktop:I("device-desktop",60026),file:I("file",60027),fileText:I("file-text",60027),more:I("more",60028),ellipsis:I("ellipsis",60028),kebabHorizontal:I("kebab-horizontal",60028),mailReply:I("mail-reply",60029),reply:I("reply",60029),organization:I("organization",60030),organizationFilled:I("organization-filled",60030),organizationOutline:I("organization-outline",60030),newFile:I("new-file",60031),fileAdd:I("file-add",60031),newFolder:I("new-folder",60032),fileDirectoryCreate:I("file-directory-create",60032),trash:I("trash",60033),trashcan:I("trashcan",60033),history:I("history",60034),clock:I("clock",60034),folder:I("folder",60035),fileDirectory:I("file-directory",60035),symbolFolder:I("symbol-folder",60035),logoGithub:I("logo-github",60036),markGithub:I("mark-github",60036),github:I("github",60036),terminal:I("terminal",60037),console:I("console",60037),repl:I("repl",60037),zap:I("zap",60038),symbolEvent:I("symbol-event",60038),error:I("error",60039),stop:I("stop",60039),variable:I("variable",60040),symbolVariable:I("symbol-variable",60040),array:I("array",60042),symbolArray:I("symbol-array",60042),symbolModule:I("symbol-module",60043),symbolPackage:I("symbol-package",60043),symbolNamespace:I("symbol-namespace",60043),symbolObject:I("symbol-object",60043),symbolMethod:I("symbol-method",60044),symbolFunction:I("symbol-function",60044),symbolConstructor:I("symbol-constructor",60044),symbolBoolean:I("symbol-boolean",60047),symbolNull:I("symbol-null",60047),symbolNumeric:I("symbol-numeric",60048),symbolNumber:I("symbol-number",60048),symbolStructure:I("symbol-structure",60049),symbolStruct:I("symbol-struct",60049),symbolParameter:I("symbol-parameter",60050),symbolTypeParameter:I("symbol-type-parameter",60050),symbolKey:I("symbol-key",60051),symbolText:I("symbol-text",60051),symbolReference:I("symbol-reference",60052),goToFile:I("go-to-file",60052),symbolEnum:I("symbol-enum",60053),symbolValue:I("symbol-value",60053),symbolRuler:I("symbol-ruler",60054),symbolUnit:I("symbol-unit",60054),activateBreakpoints:I("activate-breakpoints",60055),archive:I("archive",60056),arrowBoth:I("arrow-both",60057),arrowDown:I("arrow-down",60058),arrowLeft:I("arrow-left",60059),arrowRight:I("arrow-right",60060),arrowSmallDown:I("arrow-small-down",60061),arrowSmallLeft:I("arrow-small-left",60062),arrowSmallRight:I("arrow-small-right",60063),arrowSmallUp:I("arrow-small-up",60064),arrowUp:I("arrow-up",60065),bell:I("bell",60066),bold:I("bold",60067),book:I("book",60068),bookmark:I("bookmark",60069),debugBreakpointConditionalUnverified:I("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:I("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:I("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:I("debug-breakpoint-data-unverified",60072),debugBreakpointData:I("debug-breakpoint-data",60073),debugBreakpointDataDisabled:I("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:I("debug-breakpoint-log-unverified",60074),debugBreakpointLog:I("debug-breakpoint-log",60075),debugBreakpointLogDisabled:I("debug-breakpoint-log-disabled",60075),briefcase:I("briefcase",60076),broadcast:I("broadcast",60077),browser:I("browser",60078),bug:I("bug",60079),calendar:I("calendar",60080),caseSensitive:I("case-sensitive",60081),check:I("check",60082),checklist:I("checklist",60083),chevronDown:I("chevron-down",60084),chevronLeft:I("chevron-left",60085),chevronRight:I("chevron-right",60086),chevronUp:I("chevron-up",60087),chromeClose:I("chrome-close",60088),chromeMaximize:I("chrome-maximize",60089),chromeMinimize:I("chrome-minimize",60090),chromeRestore:I("chrome-restore",60091),circleOutline:I("circle-outline",60092),circle:I("circle",60092),debugBreakpointUnverified:I("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:I("terminal-decoration-incomplete",60092),circleSlash:I("circle-slash",60093),circuitBoard:I("circuit-board",60094),clearAll:I("clear-all",60095),clippy:I("clippy",60096),closeAll:I("close-all",60097),cloudDownload:I("cloud-download",60098),cloudUpload:I("cloud-upload",60099),code:I("code",60100),collapseAll:I("collapse-all",60101),colorMode:I("color-mode",60102),commentDiscussion:I("comment-discussion",60103),creditCard:I("credit-card",60105),dash:I("dash",60108),dashboard:I("dashboard",60109),database:I("database",60110),debugContinue:I("debug-continue",60111),debugDisconnect:I("debug-disconnect",60112),debugPause:I("debug-pause",60113),debugRestart:I("debug-restart",60114),debugStart:I("debug-start",60115),debugStepInto:I("debug-step-into",60116),debugStepOut:I("debug-step-out",60117),debugStepOver:I("debug-step-over",60118),debugStop:I("debug-stop",60119),debug:I("debug",60120),deviceCameraVideo:I("device-camera-video",60121),deviceCamera:I("device-camera",60122),deviceMobile:I("device-mobile",60123),diffAdded:I("diff-added",60124),diffIgnored:I("diff-ignored",60125),diffModified:I("diff-modified",60126),diffRemoved:I("diff-removed",60127),diffRenamed:I("diff-renamed",60128),diff:I("diff",60129),diffSidebyside:I("diff-sidebyside",60129),discard:I("discard",60130),editorLayout:I("editor-layout",60131),emptyWindow:I("empty-window",60132),exclude:I("exclude",60133),extensions:I("extensions",60134),eyeClosed:I("eye-closed",60135),fileBinary:I("file-binary",60136),fileCode:I("file-code",60137),fileMedia:I("file-media",60138),filePdf:I("file-pdf",60139),fileSubmodule:I("file-submodule",60140),fileSymlinkDirectory:I("file-symlink-directory",60141),fileSymlinkFile:I("file-symlink-file",60142),fileZip:I("file-zip",60143),files:I("files",60144),filter:I("filter",60145),flame:I("flame",60146),foldDown:I("fold-down",60147),foldUp:I("fold-up",60148),fold:I("fold",60149),folderActive:I("folder-active",60150),folderOpened:I("folder-opened",60151),gear:I("gear",60152),gift:I("gift",60153),gistSecret:I("gist-secret",60154),gist:I("gist",60155),gitCommit:I("git-commit",60156),gitCompare:I("git-compare",60157),compareChanges:I("compare-changes",60157),gitMerge:I("git-merge",60158),githubAction:I("github-action",60159),githubAlt:I("github-alt",60160),globe:I("globe",60161),grabber:I("grabber",60162),graph:I("graph",60163),gripper:I("gripper",60164),heart:I("heart",60165),home:I("home",60166),horizontalRule:I("horizontal-rule",60167),hubot:I("hubot",60168),inbox:I("inbox",60169),issueReopened:I("issue-reopened",60171),issues:I("issues",60172),italic:I("italic",60173),jersey:I("jersey",60174),json:I("json",60175),kebabVertical:I("kebab-vertical",60176),key:I("key",60177),law:I("law",60178),lightbulbAutofix:I("lightbulb-autofix",60179),linkExternal:I("link-external",60180),link:I("link",60181),listOrdered:I("list-ordered",60182),listUnordered:I("list-unordered",60183),liveShare:I("live-share",60184),loading:I("loading",60185),location:I("location",60186),mailRead:I("mail-read",60187),mail:I("mail",60188),markdown:I("markdown",60189),megaphone:I("megaphone",60190),mention:I("mention",60191),milestone:I("milestone",60192),gitPullRequestMilestone:I("git-pull-request-milestone",60192),mortarBoard:I("mortar-board",60193),move:I("move",60194),multipleWindows:I("multiple-windows",60195),mute:I("mute",60196),noNewline:I("no-newline",60197),note:I("note",60198),octoface:I("octoface",60199),openPreview:I("open-preview",60200),package:I("package",60201),paintcan:I("paintcan",60202),pin:I("pin",60203),play:I("play",60204),run:I("run",60204),plug:I("plug",60205),preserveCase:I("preserve-case",60206),preview:I("preview",60207),project:I("project",60208),pulse:I("pulse",60209),question:I("question",60210),quote:I("quote",60211),radioTower:I("radio-tower",60212),reactions:I("reactions",60213),references:I("references",60214),refresh:I("refresh",60215),regex:I("regex",60216),remoteExplorer:I("remote-explorer",60217),remote:I("remote",60218),remove:I("remove",60219),replaceAll:I("replace-all",60220),replace:I("replace",60221),repoClone:I("repo-clone",60222),repoForcePush:I("repo-force-push",60223),repoPull:I("repo-pull",60224),repoPush:I("repo-push",60225),report:I("report",60226),requestChanges:I("request-changes",60227),rocket:I("rocket",60228),rootFolderOpened:I("root-folder-opened",60229),rootFolder:I("root-folder",60230),rss:I("rss",60231),ruby:I("ruby",60232),saveAll:I("save-all",60233),saveAs:I("save-as",60234),save:I("save",60235),screenFull:I("screen-full",60236),screenNormal:I("screen-normal",60237),searchStop:I("search-stop",60238),server:I("server",60240),settingsGear:I("settings-gear",60241),settings:I("settings",60242),shield:I("shield",60243),smiley:I("smiley",60244),sortPrecedence:I("sort-precedence",60245),splitHorizontal:I("split-horizontal",60246),splitVertical:I("split-vertical",60247),squirrel:I("squirrel",60248),starFull:I("star-full",60249),starHalf:I("star-half",60250),symbolClass:I("symbol-class",60251),symbolColor:I("symbol-color",60252),symbolConstant:I("symbol-constant",60253),symbolEnumMember:I("symbol-enum-member",60254),symbolField:I("symbol-field",60255),symbolFile:I("symbol-file",60256),symbolInterface:I("symbol-interface",60257),symbolKeyword:I("symbol-keyword",60258),symbolMisc:I("symbol-misc",60259),symbolOperator:I("symbol-operator",60260),symbolProperty:I("symbol-property",60261),wrench:I("wrench",60261),wrenchSubaction:I("wrench-subaction",60261),symbolSnippet:I("symbol-snippet",60262),tasklist:I("tasklist",60263),telescope:I("telescope",60264),textSize:I("text-size",60265),threeBars:I("three-bars",60266),thumbsdown:I("thumbsdown",60267),thumbsup:I("thumbsup",60268),tools:I("tools",60269),triangleDown:I("triangle-down",60270),triangleLeft:I("triangle-left",60271),triangleRight:I("triangle-right",60272),triangleUp:I("triangle-up",60273),twitter:I("twitter",60274),unfold:I("unfold",60275),unlock:I("unlock",60276),unmute:I("unmute",60277),unverified:I("unverified",60278),verified:I("verified",60279),versions:I("versions",60280),vmActive:I("vm-active",60281),vmOutline:I("vm-outline",60282),vmRunning:I("vm-running",60283),watch:I("watch",60284),whitespace:I("whitespace",60285),wholeWord:I("whole-word",60286),window:I("window",60287),wordWrap:I("word-wrap",60288),zoomIn:I("zoom-in",60289),zoomOut:I("zoom-out",60290),listFilter:I("list-filter",60291),listFlat:I("list-flat",60292),listSelection:I("list-selection",60293),selection:I("selection",60293),listTree:I("list-tree",60294),debugBreakpointFunctionUnverified:I("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:I("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:I("debug-breakpoint-function-disabled",60296),debugStackframeActive:I("debug-stackframe-active",60297),circleSmallFilled:I("circle-small-filled",60298),debugStackframeDot:I("debug-stackframe-dot",60298),terminalDecorationMark:I("terminal-decoration-mark",60298),debugStackframe:I("debug-stackframe",60299),debugStackframeFocused:I("debug-stackframe-focused",60299),debugBreakpointUnsupported:I("debug-breakpoint-unsupported",60300),symbolString:I("symbol-string",60301),debugReverseContinue:I("debug-reverse-continue",60302),debugStepBack:I("debug-step-back",60303),debugRestartFrame:I("debug-restart-frame",60304),debugAlt:I("debug-alt",60305),callIncoming:I("call-incoming",60306),callOutgoing:I("call-outgoing",60307),menu:I("menu",60308),expandAll:I("expand-all",60309),feedback:I("feedback",60310),gitPullRequestReviewer:I("git-pull-request-reviewer",60310),groupByRefType:I("group-by-ref-type",60311),ungroupByRefType:I("ungroup-by-ref-type",60312),account:I("account",60313),gitPullRequestAssignee:I("git-pull-request-assignee",60313),bellDot:I("bell-dot",60314),debugConsole:I("debug-console",60315),library:I("library",60316),output:I("output",60317),runAll:I("run-all",60318),syncIgnored:I("sync-ignored",60319),pinned:I("pinned",60320),githubInverted:I("github-inverted",60321),serverProcess:I("server-process",60322),serverEnvironment:I("server-environment",60323),pass:I("pass",60324),issueClosed:I("issue-closed",60324),stopCircle:I("stop-circle",60325),playCircle:I("play-circle",60326),record:I("record",60327),debugAltSmall:I("debug-alt-small",60328),vmConnect:I("vm-connect",60329),cloud:I("cloud",60330),merge:I("merge",60331),export:I("export",60332),graphLeft:I("graph-left",60333),magnet:I("magnet",60334),notebook:I("notebook",60335),redo:I("redo",60336),checkAll:I("check-all",60337),pinnedDirty:I("pinned-dirty",60338),passFilled:I("pass-filled",60339),circleLargeFilled:I("circle-large-filled",60340),circleLarge:I("circle-large",60341),circleLargeOutline:I("circle-large-outline",60341),combine:I("combine",60342),gather:I("gather",60342),table:I("table",60343),variableGroup:I("variable-group",60344),typeHierarchy:I("type-hierarchy",60345),typeHierarchySub:I("type-hierarchy-sub",60346),typeHierarchySuper:I("type-hierarchy-super",60347),gitPullRequestCreate:I("git-pull-request-create",60348),runAbove:I("run-above",60349),runBelow:I("run-below",60350),notebookTemplate:I("notebook-template",60351),debugRerun:I("debug-rerun",60352),workspaceTrusted:I("workspace-trusted",60353),workspaceUntrusted:I("workspace-untrusted",60354),workspaceUnknown:I("workspace-unknown",60355),terminalCmd:I("terminal-cmd",60356),terminalDebian:I("terminal-debian",60357),terminalLinux:I("terminal-linux",60358),terminalPowershell:I("terminal-powershell",60359),terminalTmux:I("terminal-tmux",60360),terminalUbuntu:I("terminal-ubuntu",60361),terminalBash:I("terminal-bash",60362),arrowSwap:I("arrow-swap",60363),copy:I("copy",60364),personAdd:I("person-add",60365),filterFilled:I("filter-filled",60366),wand:I("wand",60367),debugLineByLine:I("debug-line-by-line",60368),inspect:I("inspect",60369),layers:I("layers",60370),layersDot:I("layers-dot",60371),layersActive:I("layers-active",60372),compass:I("compass",60373),compassDot:I("compass-dot",60374),compassActive:I("compass-active",60375),azure:I("azure",60376),issueDraft:I("issue-draft",60377),gitPullRequestClosed:I("git-pull-request-closed",60378),gitPullRequestDraft:I("git-pull-request-draft",60379),debugAll:I("debug-all",60380),debugCoverage:I("debug-coverage",60381),runErrors:I("run-errors",60382),folderLibrary:I("folder-library",60383),debugContinueSmall:I("debug-continue-small",60384),beakerStop:I("beaker-stop",60385),graphLine:I("graph-line",60386),graphScatter:I("graph-scatter",60387),pieChart:I("pie-chart",60388),bracket:I("bracket",60175),bracketDot:I("bracket-dot",60389),bracketError:I("bracket-error",60390),lockSmall:I("lock-small",60391),azureDevops:I("azure-devops",60392),verifiedFilled:I("verified-filled",60393),newline:I("newline",60394),layout:I("layout",60395),layoutActivitybarLeft:I("layout-activitybar-left",60396),layoutActivitybarRight:I("layout-activitybar-right",60397),layoutPanelLeft:I("layout-panel-left",60398),layoutPanelCenter:I("layout-panel-center",60399),layoutPanelJustify:I("layout-panel-justify",60400),layoutPanelRight:I("layout-panel-right",60401),layoutPanel:I("layout-panel",60402),layoutSidebarLeft:I("layout-sidebar-left",60403),layoutSidebarRight:I("layout-sidebar-right",60404),layoutStatusbar:I("layout-statusbar",60405),layoutMenubar:I("layout-menubar",60406),layoutCentered:I("layout-centered",60407),target:I("target",60408),indent:I("indent",60409),recordSmall:I("record-small",60410),errorSmall:I("error-small",60411),terminalDecorationError:I("terminal-decoration-error",60411),arrowCircleDown:I("arrow-circle-down",60412),arrowCircleLeft:I("arrow-circle-left",60413),arrowCircleRight:I("arrow-circle-right",60414),arrowCircleUp:I("arrow-circle-up",60415),layoutSidebarRightOff:I("layout-sidebar-right-off",60416),layoutPanelOff:I("layout-panel-off",60417),layoutSidebarLeftOff:I("layout-sidebar-left-off",60418),blank:I("blank",60419),heartFilled:I("heart-filled",60420),map:I("map",60421),mapHorizontal:I("map-horizontal",60421),foldHorizontal:I("fold-horizontal",60421),mapFilled:I("map-filled",60422),mapHorizontalFilled:I("map-horizontal-filled",60422),foldHorizontalFilled:I("fold-horizontal-filled",60422),circleSmall:I("circle-small",60423),bellSlash:I("bell-slash",60424),bellSlashDot:I("bell-slash-dot",60425),commentUnresolved:I("comment-unresolved",60426),gitPullRequestGoToChanges:I("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:I("git-pull-request-new-changes",60428),searchFuzzy:I("search-fuzzy",60429),commentDraft:I("comment-draft",60430),send:I("send",60431),sparkle:I("sparkle",60432),insert:I("insert",60433),mic:I("mic",60434),thumbsdownFilled:I("thumbsdown-filled",60435),thumbsupFilled:I("thumbsup-filled",60436),coffee:I("coffee",60437),snake:I("snake",60438),game:I("game",60439),vr:I("vr",60440),chip:I("chip",60441),piano:I("piano",60442),music:I("music",60443),micFilled:I("mic-filled",60444),repoFetch:I("repo-fetch",60445),copilot:I("copilot",60446),lightbulbSparkle:I("lightbulb-sparkle",60447),robot:I("robot",60448),sparkleFilled:I("sparkle-filled",60449),diffSingle:I("diff-single",60450),diffMultiple:I("diff-multiple",60451),surroundWith:I("surround-with",60452),share:I("share",60453),gitStash:I("git-stash",60454),gitStashApply:I("git-stash-apply",60455),gitStashPop:I("git-stash-pop",60456),vscode:I("vscode",60457),vscodeInsiders:I("vscode-insiders",60458),codeOss:I("code-oss",60459),runCoverage:I("run-coverage",60460),runAllCoverage:I("run-all-coverage",60461),coverage:I("coverage",60462),githubProject:I("github-project",60463),mapVertical:I("map-vertical",60464),foldVertical:I("fold-vertical",60464),mapVerticalFilled:I("map-vertical-filled",60465),foldVerticalFilled:I("fold-vertical-filled",60465),goToSearch:I("go-to-search",60466),percentage:I("percentage",60467),sortPercentage:I("sort-percentage",60467),attach:I("attach",60468)},LRe={dialogError:I("dialog-error","error"),dialogWarning:I("dialog-warning","warning"),dialogInfo:I("dialog-info","info"),dialogClose:I("dialog-close","close"),treeItemExpanded:I("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:I("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:I("tree-filter-on-type-off","list-selection"),treeFilterClear:I("tree-filter-clear","close"),treeItemLoading:I("tree-item-loading","loading"),menuSelection:I("menu-selection","check"),menuSubmenu:I("menu-submenu","chevron-right"),menuBarMore:I("menubar-more","more"),scrollbarButtonLeft:I("scrollbar-button-left","triangle-left"),scrollbarButtonRight:I("scrollbar-button-right","triangle-right"),scrollbarButtonUp:I("scrollbar-button-up","triangle-up"),scrollbarButtonDown:I("scrollbar-button-down","triangle-down"),toolBarMore:I("toolbar-more","more"),quickInputBack:I("quick-input-back","arrow-left"),dropDownButton:I("drop-down-button",60084),symbolCustomColor:I("symbol-customcolor",60252),exportIcon:I("export",60332),workspaceUnspecified:I("workspace-unspecified",60355),newLine:I("newline",60394),thumbsDownFilled:I("thumbsdown-filled",60435),thumbsUpFilled:I("thumbsup-filled",60436),gitFetch:I("git-fetch",60445),lightbulbSparkleAutofix:I("lightbulb-sparkle-autofix",60447),debugBreakpointPending:I("debug-breakpoint-pending",60377)},he={...xRe,...LRe};let Vue=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new $,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),Pe(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var s;(s=this._factories.get(e))==null||s.dispose();const i=new kRe(this,e,t);return this._factories.set(e,i),Pe(()=>{const o=this._factories.get(e);!o||o!==i||(this._factories.delete(e),o.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class kRe extends G{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let Sk=class{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class mK{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class p4{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var Er;(function(n){n[n.Increase=0]="Increase",n[n.Decrease=1]="Decrease"})(Er||(Er={}));var xk;(function(n){const e=new Map;e.set(0,he.symbolMethod),e.set(1,he.symbolFunction),e.set(2,he.symbolConstructor),e.set(3,he.symbolField),e.set(4,he.symbolVariable),e.set(5,he.symbolClass),e.set(6,he.symbolStruct),e.set(7,he.symbolInterface),e.set(8,he.symbolModule),e.set(9,he.symbolProperty),e.set(10,he.symbolEvent),e.set(11,he.symbolOperator),e.set(12,he.symbolUnit),e.set(13,he.symbolValue),e.set(15,he.symbolEnum),e.set(14,he.symbolConstant),e.set(15,he.symbolEnum),e.set(16,he.symbolEnumMember),e.set(17,he.symbolKeyword),e.set(27,he.symbolSnippet),e.set(18,he.symbolText),e.set(19,he.symbolColor),e.set(20,he.symbolFile),e.set(21,he.symbolReference),e.set(22,he.symbolCustomColor),e.set(23,he.symbolFolder),e.set(24,he.symbolTypeParameter),e.set(25,he.account),e.set(26,he.issues);function t(o){let r=e.get(o);return r||(console.info("No codicon found for CompletionItemKind "+o),r=he.symbolProperty),r}n.toIcon=t;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function s(o,r){let a=i.get(o);return typeof a>"u"&&!r&&(a=9),a}n.fromString=s})(xk||(xk={}));var Yc;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(Yc||(Yc={}));class jue{constructor(e,t,i,s){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=s}equals(e){return D.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var Lk;(function(n){n[n.Automatic=0]="Automatic",n[n.PasteAs=1]="PasteAs"})(Lk||(Lk={}));var pu;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(pu||(pu={}));var yC;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(yC||(yC={}));function NRe(n){return n&&Be.isUri(n.uri)&&D.isIRange(n.range)&&(D.isIRange(n.originSelectionRange)||D.isIRange(n.targetSelectionRange))}const IRe={17:_("Array","array"),16:_("Boolean","boolean"),4:_("Class","class"),13:_("Constant","constant"),8:_("Constructor","constructor"),9:_("Enum","enumeration"),21:_("EnumMember","enumeration member"),23:_("Event","event"),7:_("Field","field"),0:_("File","file"),11:_("Function","function"),10:_("Interface","interface"),19:_("Key","key"),5:_("Method","method"),1:_("Module","module"),2:_("Namespace","namespace"),20:_("Null","null"),15:_("Number","number"),18:_("Object","object"),24:_("Operator","operator"),3:_("Package","package"),6:_("Property","property"),14:_("String","string"),22:_("Struct","struct"),25:_("TypeParameter","type parameter"),12:_("Variable","variable")};function ERe(n,e){return _("symbolAriaLabel","{0} ({1})",n,IRe[e])}var i2;(function(n){const e=new Map;e.set(0,he.symbolFile),e.set(1,he.symbolModule),e.set(2,he.symbolNamespace),e.set(3,he.symbolPackage),e.set(4,he.symbolClass),e.set(5,he.symbolMethod),e.set(6,he.symbolProperty),e.set(7,he.symbolField),e.set(8,he.symbolConstructor),e.set(9,he.symbolEnum),e.set(10,he.symbolInterface),e.set(11,he.symbolFunction),e.set(12,he.symbolVariable),e.set(13,he.symbolConstant),e.set(14,he.symbolString),e.set(15,he.symbolNumber),e.set(16,he.symbolBoolean),e.set(17,he.symbolArray),e.set(18,he.symbolObject),e.set(19,he.symbolKey),e.set(20,he.symbolNull),e.set(21,he.symbolEnumMember),e.set(22,he.symbolStruct),e.set(23,he.symbolEvent),e.set(24,he.symbolOperator),e.set(25,he.symbolTypeParameter);function t(i){let s=e.get(i);return s||(console.info("No codicon found for SymbolKind "+i),s=he.symbolProperty),s}n.toIcon=t})(i2||(i2={}));const Nl=class Nl{static fromValue(e){switch(e){case"comment":return Nl.Comment;case"imports":return Nl.Imports;case"region":return Nl.Region}return new Nl(e)}constructor(e){this.value=e}};Nl.Comment=new Nl("comment"),Nl.Imports=new Nl("imports"),Nl.Region=new Nl("region");let zm=Nl;var G9;(function(n){n[n.AIGenerated=1]="AIGenerated"})(G9||(G9={}));var kk;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(kk||(kk={}));var Z9;(function(n){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}n.is=e})(Z9||(Z9={}));var n2;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(n2||(n2={}));class DRe{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const nn=new Vue,Y9=new Vue;var s2;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(s2||(s2={}));var X9;(function(n){n[n.Unknown=0]="Unknown",n[n.Disabled=1]="Disabled",n[n.Enabled=2]="Enabled"})(X9||(X9={}));var Q9;(function(n){n[n.Invoke=1]="Invoke",n[n.Auto=2]="Auto"})(Q9||(Q9={}));var J9;(function(n){n[n.None=0]="None",n[n.KeepWhitespace=1]="KeepWhitespace",n[n.InsertAsSnippet=4]="InsertAsSnippet"})(J9||(J9={}));var e8;(function(n){n[n.Method=0]="Method",n[n.Function=1]="Function",n[n.Constructor=2]="Constructor",n[n.Field=3]="Field",n[n.Variable=4]="Variable",n[n.Class=5]="Class",n[n.Struct=6]="Struct",n[n.Interface=7]="Interface",n[n.Module=8]="Module",n[n.Property=9]="Property",n[n.Event=10]="Event",n[n.Operator=11]="Operator",n[n.Unit=12]="Unit",n[n.Value=13]="Value",n[n.Constant=14]="Constant",n[n.Enum=15]="Enum",n[n.EnumMember=16]="EnumMember",n[n.Keyword=17]="Keyword",n[n.Text=18]="Text",n[n.Color=19]="Color",n[n.File=20]="File",n[n.Reference=21]="Reference",n[n.Customcolor=22]="Customcolor",n[n.Folder=23]="Folder",n[n.TypeParameter=24]="TypeParameter",n[n.User=25]="User",n[n.Issue=26]="Issue",n[n.Snippet=27]="Snippet"})(e8||(e8={}));var t8;(function(n){n[n.Deprecated=1]="Deprecated"})(t8||(t8={}));var i8;(function(n){n[n.Invoke=0]="Invoke",n[n.TriggerCharacter=1]="TriggerCharacter",n[n.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(i8||(i8={}));var n8;(function(n){n[n.EXACT=0]="EXACT",n[n.ABOVE=1]="ABOVE",n[n.BELOW=2]="BELOW"})(n8||(n8={}));var s8;(function(n){n[n.NotSet=0]="NotSet",n[n.ContentFlush=1]="ContentFlush",n[n.RecoverFromMarkers=2]="RecoverFromMarkers",n[n.Explicit=3]="Explicit",n[n.Paste=4]="Paste",n[n.Undo=5]="Undo",n[n.Redo=6]="Redo"})(s8||(s8={}));var o8;(function(n){n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(o8||(o8={}));var r8;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(r8||(r8={}));var a8;(function(n){n[n.None=0]="None",n[n.Keep=1]="Keep",n[n.Brackets=2]="Brackets",n[n.Advanced=3]="Advanced",n[n.Full=4]="Full"})(a8||(a8={}));var l8;(function(n){n[n.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",n[n.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",n[n.accessibilitySupport=2]="accessibilitySupport",n[n.accessibilityPageSize=3]="accessibilityPageSize",n[n.ariaLabel=4]="ariaLabel",n[n.ariaRequired=5]="ariaRequired",n[n.autoClosingBrackets=6]="autoClosingBrackets",n[n.autoClosingComments=7]="autoClosingComments",n[n.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",n[n.autoClosingDelete=9]="autoClosingDelete",n[n.autoClosingOvertype=10]="autoClosingOvertype",n[n.autoClosingQuotes=11]="autoClosingQuotes",n[n.autoIndent=12]="autoIndent",n[n.automaticLayout=13]="automaticLayout",n[n.autoSurround=14]="autoSurround",n[n.bracketPairColorization=15]="bracketPairColorization",n[n.guides=16]="guides",n[n.codeLens=17]="codeLens",n[n.codeLensFontFamily=18]="codeLensFontFamily",n[n.codeLensFontSize=19]="codeLensFontSize",n[n.colorDecorators=20]="colorDecorators",n[n.colorDecoratorsLimit=21]="colorDecoratorsLimit",n[n.columnSelection=22]="columnSelection",n[n.comments=23]="comments",n[n.contextmenu=24]="contextmenu",n[n.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",n[n.cursorBlinking=26]="cursorBlinking",n[n.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",n[n.cursorStyle=28]="cursorStyle",n[n.cursorSurroundingLines=29]="cursorSurroundingLines",n[n.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",n[n.cursorWidth=31]="cursorWidth",n[n.disableLayerHinting=32]="disableLayerHinting",n[n.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",n[n.domReadOnly=34]="domReadOnly",n[n.dragAndDrop=35]="dragAndDrop",n[n.dropIntoEditor=36]="dropIntoEditor",n[n.emptySelectionClipboard=37]="emptySelectionClipboard",n[n.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",n[n.extraEditorClassName=39]="extraEditorClassName",n[n.fastScrollSensitivity=40]="fastScrollSensitivity",n[n.find=41]="find",n[n.fixedOverflowWidgets=42]="fixedOverflowWidgets",n[n.folding=43]="folding",n[n.foldingStrategy=44]="foldingStrategy",n[n.foldingHighlight=45]="foldingHighlight",n[n.foldingImportsByDefault=46]="foldingImportsByDefault",n[n.foldingMaximumRegions=47]="foldingMaximumRegions",n[n.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",n[n.fontFamily=49]="fontFamily",n[n.fontInfo=50]="fontInfo",n[n.fontLigatures=51]="fontLigatures",n[n.fontSize=52]="fontSize",n[n.fontWeight=53]="fontWeight",n[n.fontVariations=54]="fontVariations",n[n.formatOnPaste=55]="formatOnPaste",n[n.formatOnType=56]="formatOnType",n[n.glyphMargin=57]="glyphMargin",n[n.gotoLocation=58]="gotoLocation",n[n.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",n[n.hover=60]="hover",n[n.inDiffEditor=61]="inDiffEditor",n[n.inlineSuggest=62]="inlineSuggest",n[n.inlineEdit=63]="inlineEdit",n[n.letterSpacing=64]="letterSpacing",n[n.lightbulb=65]="lightbulb",n[n.lineDecorationsWidth=66]="lineDecorationsWidth",n[n.lineHeight=67]="lineHeight",n[n.lineNumbers=68]="lineNumbers",n[n.lineNumbersMinChars=69]="lineNumbersMinChars",n[n.linkedEditing=70]="linkedEditing",n[n.links=71]="links",n[n.matchBrackets=72]="matchBrackets",n[n.minimap=73]="minimap",n[n.mouseStyle=74]="mouseStyle",n[n.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",n[n.mouseWheelZoom=76]="mouseWheelZoom",n[n.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",n[n.multiCursorModifier=78]="multiCursorModifier",n[n.multiCursorPaste=79]="multiCursorPaste",n[n.multiCursorLimit=80]="multiCursorLimit",n[n.occurrencesHighlight=81]="occurrencesHighlight",n[n.overviewRulerBorder=82]="overviewRulerBorder",n[n.overviewRulerLanes=83]="overviewRulerLanes",n[n.padding=84]="padding",n[n.pasteAs=85]="pasteAs",n[n.parameterHints=86]="parameterHints",n[n.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",n[n.placeholder=88]="placeholder",n[n.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",n[n.quickSuggestions=90]="quickSuggestions",n[n.quickSuggestionsDelay=91]="quickSuggestionsDelay",n[n.readOnly=92]="readOnly",n[n.readOnlyMessage=93]="readOnlyMessage",n[n.renameOnType=94]="renameOnType",n[n.renderControlCharacters=95]="renderControlCharacters",n[n.renderFinalNewline=96]="renderFinalNewline",n[n.renderLineHighlight=97]="renderLineHighlight",n[n.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",n[n.renderValidationDecorations=99]="renderValidationDecorations",n[n.renderWhitespace=100]="renderWhitespace",n[n.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",n[n.roundedSelection=102]="roundedSelection",n[n.rulers=103]="rulers",n[n.scrollbar=104]="scrollbar",n[n.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",n[n.scrollBeyondLastLine=106]="scrollBeyondLastLine",n[n.scrollPredominantAxis=107]="scrollPredominantAxis",n[n.selectionClipboard=108]="selectionClipboard",n[n.selectionHighlight=109]="selectionHighlight",n[n.selectOnLineNumbers=110]="selectOnLineNumbers",n[n.showFoldingControls=111]="showFoldingControls",n[n.showUnused=112]="showUnused",n[n.snippetSuggestions=113]="snippetSuggestions",n[n.smartSelect=114]="smartSelect",n[n.smoothScrolling=115]="smoothScrolling",n[n.stickyScroll=116]="stickyScroll",n[n.stickyTabStops=117]="stickyTabStops",n[n.stopRenderingLineAfter=118]="stopRenderingLineAfter",n[n.suggest=119]="suggest",n[n.suggestFontSize=120]="suggestFontSize",n[n.suggestLineHeight=121]="suggestLineHeight",n[n.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",n[n.suggestSelection=123]="suggestSelection",n[n.tabCompletion=124]="tabCompletion",n[n.tabIndex=125]="tabIndex",n[n.unicodeHighlighting=126]="unicodeHighlighting",n[n.unusualLineTerminators=127]="unusualLineTerminators",n[n.useShadowDOM=128]="useShadowDOM",n[n.useTabStops=129]="useTabStops",n[n.wordBreak=130]="wordBreak",n[n.wordSegmenterLocales=131]="wordSegmenterLocales",n[n.wordSeparators=132]="wordSeparators",n[n.wordWrap=133]="wordWrap",n[n.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",n[n.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",n[n.wordWrapColumn=136]="wordWrapColumn",n[n.wordWrapOverride1=137]="wordWrapOverride1",n[n.wordWrapOverride2=138]="wordWrapOverride2",n[n.wrappingIndent=139]="wrappingIndent",n[n.wrappingStrategy=140]="wrappingStrategy",n[n.showDeprecated=141]="showDeprecated",n[n.inlayHints=142]="inlayHints",n[n.editorClassName=143]="editorClassName",n[n.pixelRatio=144]="pixelRatio",n[n.tabFocusMode=145]="tabFocusMode",n[n.layoutInfo=146]="layoutInfo",n[n.wrappingInfo=147]="wrappingInfo",n[n.defaultColorDecorators=148]="defaultColorDecorators",n[n.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",n[n.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(l8||(l8={}));var c8;(function(n){n[n.TextDefined=0]="TextDefined",n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(c8||(c8={}));var d8;(function(n){n[n.LF=0]="LF",n[n.CRLF=1]="CRLF"})(d8||(d8={}));var u8;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(u8||(u8={}));var h8;(function(n){n[n.Increase=0]="Increase",n[n.Decrease=1]="Decrease"})(h8||(h8={}));var f8;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(f8||(f8={}));var g8;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(g8||(g8={}));var m8;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(m8||(m8={}));var p8;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(p8||(p8={}));var _8;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(_8||(_8={}));var b8;(function(n){n[n.DependsOnKbLayout=-1]="DependsOnKbLayout",n[n.Unknown=0]="Unknown",n[n.Backspace=1]="Backspace",n[n.Tab=2]="Tab",n[n.Enter=3]="Enter",n[n.Shift=4]="Shift",n[n.Ctrl=5]="Ctrl",n[n.Alt=6]="Alt",n[n.PauseBreak=7]="PauseBreak",n[n.CapsLock=8]="CapsLock",n[n.Escape=9]="Escape",n[n.Space=10]="Space",n[n.PageUp=11]="PageUp",n[n.PageDown=12]="PageDown",n[n.End=13]="End",n[n.Home=14]="Home",n[n.LeftArrow=15]="LeftArrow",n[n.UpArrow=16]="UpArrow",n[n.RightArrow=17]="RightArrow",n[n.DownArrow=18]="DownArrow",n[n.Insert=19]="Insert",n[n.Delete=20]="Delete",n[n.Digit0=21]="Digit0",n[n.Digit1=22]="Digit1",n[n.Digit2=23]="Digit2",n[n.Digit3=24]="Digit3",n[n.Digit4=25]="Digit4",n[n.Digit5=26]="Digit5",n[n.Digit6=27]="Digit6",n[n.Digit7=28]="Digit7",n[n.Digit8=29]="Digit8",n[n.Digit9=30]="Digit9",n[n.KeyA=31]="KeyA",n[n.KeyB=32]="KeyB",n[n.KeyC=33]="KeyC",n[n.KeyD=34]="KeyD",n[n.KeyE=35]="KeyE",n[n.KeyF=36]="KeyF",n[n.KeyG=37]="KeyG",n[n.KeyH=38]="KeyH",n[n.KeyI=39]="KeyI",n[n.KeyJ=40]="KeyJ",n[n.KeyK=41]="KeyK",n[n.KeyL=42]="KeyL",n[n.KeyM=43]="KeyM",n[n.KeyN=44]="KeyN",n[n.KeyO=45]="KeyO",n[n.KeyP=46]="KeyP",n[n.KeyQ=47]="KeyQ",n[n.KeyR=48]="KeyR",n[n.KeyS=49]="KeyS",n[n.KeyT=50]="KeyT",n[n.KeyU=51]="KeyU",n[n.KeyV=52]="KeyV",n[n.KeyW=53]="KeyW",n[n.KeyX=54]="KeyX",n[n.KeyY=55]="KeyY",n[n.KeyZ=56]="KeyZ",n[n.Meta=57]="Meta",n[n.ContextMenu=58]="ContextMenu",n[n.F1=59]="F1",n[n.F2=60]="F2",n[n.F3=61]="F3",n[n.F4=62]="F4",n[n.F5=63]="F5",n[n.F6=64]="F6",n[n.F7=65]="F7",n[n.F8=66]="F8",n[n.F9=67]="F9",n[n.F10=68]="F10",n[n.F11=69]="F11",n[n.F12=70]="F12",n[n.F13=71]="F13",n[n.F14=72]="F14",n[n.F15=73]="F15",n[n.F16=74]="F16",n[n.F17=75]="F17",n[n.F18=76]="F18",n[n.F19=77]="F19",n[n.F20=78]="F20",n[n.F21=79]="F21",n[n.F22=80]="F22",n[n.F23=81]="F23",n[n.F24=82]="F24",n[n.NumLock=83]="NumLock",n[n.ScrollLock=84]="ScrollLock",n[n.Semicolon=85]="Semicolon",n[n.Equal=86]="Equal",n[n.Comma=87]="Comma",n[n.Minus=88]="Minus",n[n.Period=89]="Period",n[n.Slash=90]="Slash",n[n.Backquote=91]="Backquote",n[n.BracketLeft=92]="BracketLeft",n[n.Backslash=93]="Backslash",n[n.BracketRight=94]="BracketRight",n[n.Quote=95]="Quote",n[n.OEM_8=96]="OEM_8",n[n.IntlBackslash=97]="IntlBackslash",n[n.Numpad0=98]="Numpad0",n[n.Numpad1=99]="Numpad1",n[n.Numpad2=100]="Numpad2",n[n.Numpad3=101]="Numpad3",n[n.Numpad4=102]="Numpad4",n[n.Numpad5=103]="Numpad5",n[n.Numpad6=104]="Numpad6",n[n.Numpad7=105]="Numpad7",n[n.Numpad8=106]="Numpad8",n[n.Numpad9=107]="Numpad9",n[n.NumpadMultiply=108]="NumpadMultiply",n[n.NumpadAdd=109]="NumpadAdd",n[n.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",n[n.NumpadSubtract=111]="NumpadSubtract",n[n.NumpadDecimal=112]="NumpadDecimal",n[n.NumpadDivide=113]="NumpadDivide",n[n.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",n[n.ABNT_C1=115]="ABNT_C1",n[n.ABNT_C2=116]="ABNT_C2",n[n.AudioVolumeMute=117]="AudioVolumeMute",n[n.AudioVolumeUp=118]="AudioVolumeUp",n[n.AudioVolumeDown=119]="AudioVolumeDown",n[n.BrowserSearch=120]="BrowserSearch",n[n.BrowserHome=121]="BrowserHome",n[n.BrowserBack=122]="BrowserBack",n[n.BrowserForward=123]="BrowserForward",n[n.MediaTrackNext=124]="MediaTrackNext",n[n.MediaTrackPrevious=125]="MediaTrackPrevious",n[n.MediaStop=126]="MediaStop",n[n.MediaPlayPause=127]="MediaPlayPause",n[n.LaunchMediaPlayer=128]="LaunchMediaPlayer",n[n.LaunchMail=129]="LaunchMail",n[n.LaunchApp2=130]="LaunchApp2",n[n.Clear=131]="Clear",n[n.MAX_VALUE=132]="MAX_VALUE"})(b8||(b8={}));var v8;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(v8||(v8={}));var w8;(function(n){n[n.Unnecessary=1]="Unnecessary",n[n.Deprecated=2]="Deprecated"})(w8||(w8={}));var y8;(function(n){n[n.Inline=1]="Inline",n[n.Gutter=2]="Gutter"})(y8||(y8={}));var C8;(function(n){n[n.Normal=1]="Normal",n[n.Underlined=2]="Underlined"})(C8||(C8={}));var S8;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.TEXTAREA=1]="TEXTAREA",n[n.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",n[n.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",n[n.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",n[n.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",n[n.CONTENT_TEXT=6]="CONTENT_TEXT",n[n.CONTENT_EMPTY=7]="CONTENT_EMPTY",n[n.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",n[n.CONTENT_WIDGET=9]="CONTENT_WIDGET",n[n.OVERVIEW_RULER=10]="OVERVIEW_RULER",n[n.SCROLLBAR=11]="SCROLLBAR",n[n.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",n[n.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(S8||(S8={}));var x8;(function(n){n[n.AIGenerated=1]="AIGenerated"})(x8||(x8={}));var L8;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(L8||(L8={}));var k8;(function(n){n[n.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",n[n.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",n[n.TOP_CENTER=2]="TOP_CENTER"})(k8||(k8={}));var N8;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(N8||(N8={}));var I8;(function(n){n[n.Word=0]="Word",n[n.Line=1]="Line",n[n.Suggest=2]="Suggest"})(I8||(I8={}));var E8;(function(n){n[n.Left=0]="Left",n[n.Right=1]="Right",n[n.None=2]="None",n[n.LeftOfInjectedText=3]="LeftOfInjectedText",n[n.RightOfInjectedText=4]="RightOfInjectedText"})(E8||(E8={}));var D8;(function(n){n[n.Off=0]="Off",n[n.On=1]="On",n[n.Relative=2]="Relative",n[n.Interval=3]="Interval",n[n.Custom=4]="Custom"})(D8||(D8={}));var T8;(function(n){n[n.None=0]="None",n[n.Text=1]="Text",n[n.Blocks=2]="Blocks"})(T8||(T8={}));var R8;(function(n){n[n.Smooth=0]="Smooth",n[n.Immediate=1]="Immediate"})(R8||(R8={}));var M8;(function(n){n[n.Auto=1]="Auto",n[n.Hidden=2]="Hidden",n[n.Visible=3]="Visible"})(M8||(M8={}));var P8;(function(n){n[n.LTR=0]="LTR",n[n.RTL=1]="RTL"})(P8||(P8={}));var A8;(function(n){n.Off="off",n.OnCode="onCode",n.On="on"})(A8||(A8={}));var O8;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(O8||(O8={}));var F8;(function(n){n[n.File=0]="File",n[n.Module=1]="Module",n[n.Namespace=2]="Namespace",n[n.Package=3]="Package",n[n.Class=4]="Class",n[n.Method=5]="Method",n[n.Property=6]="Property",n[n.Field=7]="Field",n[n.Constructor=8]="Constructor",n[n.Enum=9]="Enum",n[n.Interface=10]="Interface",n[n.Function=11]="Function",n[n.Variable=12]="Variable",n[n.Constant=13]="Constant",n[n.String=14]="String",n[n.Number=15]="Number",n[n.Boolean=16]="Boolean",n[n.Array=17]="Array",n[n.Object=18]="Object",n[n.Key=19]="Key",n[n.Null=20]="Null",n[n.EnumMember=21]="EnumMember",n[n.Struct=22]="Struct",n[n.Event=23]="Event",n[n.Operator=24]="Operator",n[n.TypeParameter=25]="TypeParameter"})(F8||(F8={}));var B8;(function(n){n[n.Deprecated=1]="Deprecated"})(B8||(B8={}));var W8;(function(n){n[n.Hidden=0]="Hidden",n[n.Blink=1]="Blink",n[n.Smooth=2]="Smooth",n[n.Phase=3]="Phase",n[n.Expand=4]="Expand",n[n.Solid=5]="Solid"})(W8||(W8={}));var H8;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(H8||(H8={}));var V8;(function(n){n[n.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",n[n.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",n[n.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",n[n.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(V8||(V8={}));var j8;(function(n){n[n.None=0]="None",n[n.Same=1]="Same",n[n.Indent=2]="Indent",n[n.DeepIndent=3]="DeepIndent"})(j8||(j8={}));var jh;let TRe=(jh=class{static chord(e,t){return Mn(e,t)}},jh.CtrlCmd=2048,jh.Shift=1024,jh.Alt=512,jh.WinCtrl=256,jh);function zue(){return{editor:void 0,languages:void 0,CancellationTokenSource:Gi,Emitter:$,KeyCode:b8,KeyMod:TRe,Position:U,Range:D,Selection:Ie,SelectionDirection:P8,MarkerSeverity:v8,MarkerTag:w8,Uri:Be,Token:Sk}}function RRe(n,e){const t=n;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const ui=window;function Uue(n){return n}class MRe{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=Uue):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class IQ{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=Uue):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const i=this._fn(e);return this._map.set(e,i),this._map2.set(t,i),i}}class ad{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}function $ue(n){return!n||typeof n!="string"?!0:n.trim().length===0}const PRe=/{(\d+)}/g;function hv(n,...e){return e.length===0?n:n.replace(PRe,function(t,i){const s=parseInt(i,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}function ARe(n){return n.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function Rx(n){return n.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Da(n){return n.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function ORe(n,e=" "){const t=wI(n,e);return Kue(t,e)}function wI(n,e){if(!n||!e)return n;const t=e.length;if(t===0||n.length===0)return n;let i=0;for(;n.indexOf(e,i)===i;)i=i+t;return n.substring(i)}function Kue(n,e){if(!n||!e)return n;const t=e.length,i=n.length;if(t===0||i===0)return n;let s=i,o=-1;for(;o=n.lastIndexOf(e,s-1),!(o===-1||o+t!==s);){if(o===0)return"";s=o}return n.substring(0,s)}function FRe(n){return n.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function BRe(n){return n.replace(/\*/g,"")}function que(n,e,t={}){if(!n)throw new Error("Cannot create regex from empty string");e||(n=Da(n)),t.wholeWord&&(/\B/.test(n.charAt(0))||(n="\\b"+n),/\B/.test(n.charAt(n.length-1))||(n=n+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(n,i)}function WRe(n){return n.source==="^"||n.source==="^$"||n.source==="$"||n.source==="^\\s*$"?!1:!!(n.exec("")&&n.lastIndex===0)}function Bu(n){return n.split(/\r\n|\r|\n/)}function HRe(n){const e=[],t=n.split(/(\r\n|\r|\n)/);for(let i=0;i<Math.ceil(t.length/2);i++)e.push(t[2*i]+(t[2*i+1]??""));return e}function fo(n){for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function fi(n,e=0,t=n.length){for(let i=e;i<t;i++){const s=n.charCodeAt(i);if(s!==32&&s!==9)return n.substring(e,i)}return n.substring(e,t)}function Xc(n,e=n.length-1){for(let t=e;t>=0;t--){const i=n.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function Nk(n,e){return n<e?-1:n>e?1:0}function pK(n,e,t=0,i=n.length,s=0,o=e.length){for(;t<i&&s<o;t++,s++){const l=n.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const r=i-t,a=o-s;return r<a?-1:r>a?1:0}function z8(n,e){return yI(n,e,0,n.length,0,e.length)}function yI(n,e,t=0,i=n.length,s=0,o=e.length){for(;t<i&&s<o;t++,s++){let l=n.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;if(l>=128||c>=128)return pK(n.toLowerCase(),e.toLowerCase(),t,i,s,o);Bg(l)&&(l-=32),Bg(c)&&(c-=32);const d=l-c;if(d!==0)return d}const r=i-t,a=o-s;return r<a?-1:r>a?1:0}function VE(n){return n>=48&&n<=57}function Bg(n){return n>=97&&n<=122}function Yd(n){return n>=65&&n<=90}function cw(n,e){return n.length===e.length&&yI(n,e)===0}function _K(n,e){const t=e.length;return e.length>n.length?!1:yI(n,e,0,t)===0}function Um(n,e){const t=Math.min(n.length,e.length);let i;for(i=0;i<t;i++)if(n.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function o2(n,e){const t=Math.min(n.length,e.length);let i;const s=n.length-1,o=e.length-1;for(i=0;i<t;i++)if(n.charCodeAt(s-i)!==e.charCodeAt(o-i))return i;return t}function qn(n){return 55296<=n&&n<=56319}function fv(n){return 56320<=n&&n<=57343}function bK(n,e){return(n-55296<<10)+(e-56320)+65536}function r2(n,e,t){const i=n.charCodeAt(t);if(qn(i)&&t+1<e){const s=n.charCodeAt(t+1);if(fv(s))return bK(i,s)}return i}function VRe(n,e){const t=n.charCodeAt(e-1);if(fv(t)&&e>1){const i=n.charCodeAt(e-2);if(qn(i))return bK(i,t)}return t}class vK{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=VRe(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=r2(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class a2{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new vK(e,t)}nextGraphemeLength(){const e=l2.getInstance(),t=this._iterator,i=t.offset;let s=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const o=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());if(EQ(s,r)){t.setOffset(o);break}s=r}return t.offset-i}prevGraphemeLength(){const e=l2.getInstance(),t=this._iterator,i=t.offset;let s=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const o=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());if(EQ(r,s)){t.setOffset(o);break}s=r}return i-t.offset}eol(){return this._iterator.eol()}}function wK(n,e){return new a2(n,e).nextGraphemeLength()}function Gue(n,e){return new a2(n,e).prevGraphemeLength()}function jRe(n,e){e>0&&fv(n.charCodeAt(e))&&e--;const t=e+wK(n,e);return[t-Gue(n,t),t]}let r3;function zRe(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function CC(n){return r3||(r3=zRe()),r3.test(n)}const URe=/^[\t\n\r\x20-\x7E]*$/;function CI(n){return URe.test(n)}const Zue=/[\u2028\u2029]/;function Yue(n){return Zue.test(n)}function $m(n){return n>=11904&&n<=55215||n>=63744&&n<=64255||n>=65281&&n<=65374}function yK(n){return n>=127462&&n<=127487||n===8986||n===8987||n===9200||n===9203||n>=9728&&n<=10175||n===11088||n===11093||n>=127744&&n<=128591||n>=128640&&n<=128764||n>=128992&&n<=129008||n>=129280&&n<=129535||n>=129648&&n<=129782}const $Re="\uFEFF";function CK(n){return!!(n&&n.length>0&&n.charCodeAt(0)===65279)}function KRe(n,e=!1){return n?(e&&(n=n.replace(/\\./g,"")),n.toLowerCase()!==n):!1}function Xue(n){return n=n%(2*26),n<26?String.fromCharCode(97+n):String.fromCharCode(65+n-26)}function EQ(n,e){return n===0?e!==5&&e!==7:n===2&&e===3?!1:n===4||n===2||n===3||e===4||e===2||e===3?!0:!(n===8&&(e===8||e===9||e===11||e===12)||(n===11||n===9)&&(e===9||e===10)||(n===12||n===10)&&e===10||e===5||e===13||e===7||n===1||n===13&&e===14||n===6&&e===6)}const h_=class h_{static getInstance(){return h_._INSTANCE||(h_._INSTANCE=new h_),h_._INSTANCE}constructor(){this._data=qRe()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let s=1;for(;s<=i;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return 0}};h_._INSTANCE=null;let l2=h_;function qRe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function GRe(n,e){if(n===0)return 0;const t=ZRe(n,e);if(t!==void 0)return t;const i=new vK(e,n);return i.prevCodePoint(),i.offset}function ZRe(n,e){const t=new vK(e,n);let i=t.prevCodePoint();for(;YRe(i)||i===65039||i===8419;){if(t.offset===0)return;i=t.prevCodePoint()}if(!yK(i))return;let s=t.offset;return s>0&&t.prevCodePoint()===8205&&(s=t.offset),s}function YRe(n){return 127995<=n&&n<=127999}const Que=" ",Bd=class Bd{static getInstance(e){return Bd.cache.get(Array.from(e))}static getLocales(){return Bd._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};Bd.ambiguousCharacterData=new ad(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),Bd.cache=new MRe({getCacheKey:JSON.stringify},e=>{function t(d){const u=new Map;for(let h=0;h<d.length;h+=2)u.set(d[h],d[h+1]);return u}function i(d,u){const h=new Map(d);for(const[f,m]of u)h.set(f,m);return h}function s(d,u){if(!d)return u;const h=new Map;for(const[f,m]of d)u.has(f)&&h.set(f,m);return h}const o=Bd.ambiguousCharacterData.value;let r=e.filter(d=>!d.startsWith("_")&&d in o);r.length===0&&(r=["_default"]);let a;for(const d of r){const u=t(o[d]);a=s(a,u)}const l=t(o._common),c=i(l,a);return new Bd(c)}),Bd._locales=new ad(()=>Object.keys(Bd.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let Ik=Bd;const Pw=class Pw{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Pw.getRawData())),this._data}static isInvisibleCharacter(e){return Pw.getData().has(e)}static get codePoints(){return Pw.getData()}};Pw._data=void 0;let j_=Pw;const QP=class QP{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}getWindowId(e){return e.vscodeWindowId}};QP.INSTANCE=new QP;let U8=QP;function Jue(n,e,t){typeof e=="string"&&(e=n.matchMedia(e)),e.addEventListener("change",t)}function XRe(n){return U8.INSTANCE.getZoomFactor(n)}const C1=navigator.userAgent,ul=C1.indexOf("Firefox")>=0,z_=C1.indexOf("AppleWebKit")>=0,SI=C1.indexOf("Chrome")>=0,mf=!SI&&C1.indexOf("Safari")>=0,ehe=!SI&&!mf&&z_;C1.indexOf("Electron/")>=0;const DQ=C1.indexOf("Android")>=0;let vT=!1;if(typeof ui.matchMedia=="function"){const n=ui.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=ui.matchMedia("(display-mode: fullscreen)");vT=n.matches,Jue(ui,n,({matches:t})=>{vT&&e.matches||(vT=t)})}function QRe(){return vT}const SK={clipboard:{writeText:Gc||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Gc||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:Gc||QRe()?0:navigator.keyboard||mf?1:2,touch:"ontouchstart"in ui||navigator.maxTouchPoints>0,pointerEvents:ui.PointerEvent&&("ontouchstart"in ui||navigator.maxTouchPoints>0)};function $8(n,e){if(typeof n=="number"){if(n===0)return null;const t=(n&65535)>>>0,i=(n&4294901760)>>>16;return i!==0?new a3([jE(t,e),jE(i,e)]):new a3([jE(t,e)])}else{const t=[];for(let i=0;i<n.length;i++)t.push(jE(n[i],e));return new a3(t)}}function jE(n,e){const t=!!(n&2048),i=!!(n&256),s=e===2?i:t,o=!!(n&1024),r=!!(n&512),a=e===2?t:i,l=n&255;return new pf(s,o,r,a,l)}class pf{constructor(e,t,i,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyCode=o}equals(e){return e instanceof pf&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class a3{constructor(e){if(e.length===0)throw al("chords");this.chords=e}}class JRe{constructor(e,t,i,s,o,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyLabel=o,this.keyAriaLabel=r}}class e2e{}function t2e(n){if(n.charCode){const t=String.fromCharCode(n.charCode).toUpperCase();return kh.fromString(t)}const e=n.keyCode;if(e===3)return 7;if(ul)switch(e){case 59:return 85;case 60:if(Mo)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Lt)return 57;break}else if(z_){if(Lt&&e===93)return 57;if(!Lt&&e===92)return 57}return Rue[e]||0}const i2e=Lt?256:2048,n2e=512,s2e=1024,o2e=Lt?2048:256;class _i{constructor(e){var i;this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=(i=t.getModifierState)==null?void 0:i.call(t,"AltGraph"),this.keyCode=t2e(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=i2e),this.altKey&&(t|=n2e),this.shiftKey&&(t|=s2e),this.metaKey&&(t|=o2e),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new pf(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const TQ=new WeakMap;function r2e(n){if(!n.parent||n.parent===n)return null;try{const e=n.location,t=n.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return n.parent}class a2e{static getSameOriginWindowChain(e){let t=TQ.get(e);if(!t){t=[],TQ.set(e,t);let i=e,s;do s=r2e(i),s?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=s;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,s=0;const o=this.getSameOriginWindowChain(e);for(const r of o){const a=r.window.deref();if(i+=(a==null?void 0:a.scrollY)??0,s+=(a==null?void 0:a.scrollX)??0,a===t||!r.iframeElement)break;const l=r.iframeElement.getBoundingClientRect();i+=l.top,s+=l.left}return{top:i,left:s}}}class Vl{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const i=a2e.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class gv{constructor(e,t=0,i=0){var o;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let s=!1;if(SI){const r=navigator.userAgent.match(/Chrome\/(\d+)/);s=(r?parseInt(r[1]):123)<=122}if(e){const r=e,a=e,l=((o=e.view)==null?void 0:o.devicePixelRatio)||1;if(typeof r.wheelDeltaY<"u")s?this.deltaY=r.wheelDeltaY/(120*l):this.deltaY=r.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?ul&&!Lt?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")mf&&As?this.deltaX=-(r.wheelDeltaX/120):s?this.deltaX=r.wheelDeltaX/(120*l):this.deltaX=r.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?ul&&!Lt?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(s?this.deltaY=e.wheelDelta/(120*l):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}}const the=Symbol("MicrotaskDelay");function K8(n){return!!n&&typeof n.then=="function"}function Xn(n){const e=new Gi,t=n(e.token),i=new Promise((s,o)=>{const r=e.token.onCancellationRequested(()=>{r.dispose(),o(new Xl)});Promise.resolve(t).then(a=>{r.dispose(),e.dispose(),s(a)},a=>{r.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(s,o){return i.then(s,o)}catch(s){return this.then(void 0,s)}finally(s){return i.finally(s)}}}function xI(n,e,t){return new Promise((i,s)=>{const o=e.onCancellationRequested(()=>{o.dispose(),i(t)});n.then(i,s).finally(()=>o.dispose())})}class l2e{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,i(s)})})}dispose(){this.isDisposed=!0}}const c2e=(n,e)=>{let t=!0;const i=setTimeout(()=>{t=!1,e()},n);return{isTriggered:()=>t,dispose:()=>{clearTimeout(i),t=!1}}},d2e=n=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,n())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class hl{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((s,o)=>{this.doResolve=s,this.doReject=o}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const s=this.task;return this.task=null,s()}}));const i=()=>{var s;this.deferred=null,(s=this.doResolve)==null||s.call(this,null)};return this.deferred=t===the?d2e(i):c2e(t,i),this.completionPromise}isTriggered(){var e;return!!((e=this.deferred)!=null&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)==null||e.call(this,new Xl),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)==null||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class ihe{constructor(e){this.delayer=new hl(e),this.throttler=new l2e}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function _f(n,e){return e?new Promise((t,i)=>{const s=setTimeout(()=>{o.dispose(),t()},n),o=e.onCancellationRequested(()=>{clearTimeout(s),o.dispose(),i(new Xl)})}):Xn(t=>_f(n,t))}function Km(n,e=0,t){const i=setTimeout(()=>{n(),t&&s.dispose()},e),s=Pe(()=>{clearTimeout(i),t==null||t.deleteAndLeak(s)});return t==null||t.add(s),s}function xK(n,e=i=>!!i,t=null){let i=0;const s=n.length,o=()=>{if(i>=s)return Promise.resolve(t);const r=n[i++];return Promise.resolve(r()).then(l=>e(l)?Promise.resolve(l):o())};return o()}class oc{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Zt("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Zt("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class LK{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new Zt("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const s=i.setInterval(()=>{e()},t);this.disposable=Pe(()=>{i.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class li{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)==null||e.call(this)}}let nhe,Mx;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Mx=(n,e)=>{Cue(()=>{if(t)return;const i=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:Mx=(n,e,t)=>{const i=n.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let s=!1;return{dispose(){s||(s=!0,n.cancelIdleCallback(i))}}},nhe=n=>Mx(globalThis,n)})();class she{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=Mx(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class u2e extends she{constructor(e){super(globalThis,e)}}class S1{get isRejected(){var e;return((e=this.outcome)==null?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new Xl)}}var q8;(function(n){async function e(i){let s;const o=await Promise.all(i.map(r=>r.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return o}n.settled=e;function t(i){return new Promise(async(s,o)=>{try{await i(s,o)}catch(r){o(r)}})}n.withAsyncBody=t})(q8||(q8={}));const vr=class vr{static fromArray(e){return new vr(t=>{t.emitMany(e)})}static fromPromise(e){return new vr(async t=>{t.emitMany(await e)})}static fromPromises(e){return new vr(async t=>{await Promise.all(e.map(async i=>t.emitOne(await i)))})}static merge(e){return new vr(async t=>{await Promise.all(e.map(async i=>{for await(const s of i)t.emitOne(s)}))})}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new $,queueMicrotask(async()=>{const i={emitOne:s=>this.emitOne(s),emitMany:s=>this.emitMany(s),reject:s=>this.reject(s)};try{await Promise.resolve(e(i)),this.resolve()}catch(s){this.reject(s)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await pe.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var t;return(t=this._onReturn)==null||t.call(this),{done:!0,value:void 0}}}}static map(e,t){return new vr(async i=>{for await(const s of e)i.emitOne(t(s))})}map(e){return vr.map(this,e)}static filter(e,t){return new vr(async i=>{for await(const s of e)t(s)&&i.emitOne(s)})}filter(e){return vr.filter(this,e)}static coalesce(e){return vr.filter(e,t=>!!t)}coalesce(){return vr.coalesce(this)}static async toPromise(e){const t=[];for await(const i of e)t.push(i);return t}toPromise(){return vr.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};vr.EMPTY=vr.fromArray([]);let ya=vr;class h2e extends ya{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function f2e(n){const e=new Gi,t=n(e.token);return new h2e(e,async i=>{const s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),i.reject(new Xl)});try{for await(const o of t){if(e.token.isCancellationRequested)return;i.emitOne(o)}s.dispose(),e.dispose()}catch(o){s.dispose(),e.dispose(),i.reject(o)}})}/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:ohe,setPrototypeOf:RQ,isFrozen:g2e,getPrototypeOf:m2e,getOwnPropertyDescriptor:p2e}=Object;let{freeze:jr,seal:Ql,create:rhe}=Object,{apply:G8,construct:Z8}=typeof Reflect<"u"&&Reflect;jr||(jr=function(e){return e});Ql||(Ql=function(e){return e});G8||(G8=function(e,t,i){return e.apply(t,i)});Z8||(Z8=function(e,t){return new e(...t)});const zE=fl(Array.prototype.forEach),MQ=fl(Array.prototype.pop),dS=fl(Array.prototype.push),wT=fl(String.prototype.toLowerCase),l3=fl(String.prototype.toString),PQ=fl(String.prototype.match),uS=fl(String.prototype.replace),_2e=fl(String.prototype.indexOf),b2e=fl(String.prototype.trim),bc=fl(Object.prototype.hasOwnProperty),pr=fl(RegExp.prototype.test),hS=v2e(TypeError);function fl(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return G8(n,e,i)}}function v2e(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Z8(n,t)}}function mi(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wT;RQ&&RQ(n,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const o=t(s);o!==s&&(g2e(e)||(e[i]=o),s=o)}n[s]=!0}return n}function w2e(n){for(let e=0;e<n.length;e++)bc(n,e)||(n[e]=null);return n}function zp(n){const e=rhe(null);for(const[t,i]of ohe(n))bc(n,t)&&(Array.isArray(i)?e[t]=w2e(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=zp(i):e[t]=i);return e}function fS(n,e){for(;n!==null;){const i=p2e(n,e);if(i){if(i.get)return fl(i.get);if(typeof i.value=="function")return fl(i.value)}n=m2e(n)}function t(){return null}return t}const AQ=jr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),c3=jr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),d3=jr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),y2e=jr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),u3=jr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),C2e=jr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),OQ=jr(["#text"]),FQ=jr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),h3=jr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),BQ=jr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),UE=jr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),S2e=Ql(/\{\{[\w\W]*|[\w\W]*\}\}/gm),x2e=Ql(/<%[\w\W]*|[\w\W]*%>/gm),L2e=Ql(/\${[\w\W]*}/gm),k2e=Ql(/^data-[\-\w.\u00B7-\uFFFF]/),N2e=Ql(/^aria-[\-\w]+$/),ahe=Ql(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),I2e=Ql(/^(?:\w+script|data):/i),E2e=Ql(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),lhe=Ql(/^html$/i),D2e=Ql(/^[a-z][.\w]*(-[.\w]+)+$/i);var WQ=Object.freeze({__proto__:null,MUSTACHE_EXPR:S2e,ERB_EXPR:x2e,TMPLIT_EXPR:L2e,DATA_ATTR:k2e,ARIA_ATTR:N2e,IS_ALLOWED_URI:ahe,IS_SCRIPT_OR_DATA:I2e,ATTR_WHITESPACE:E2e,DOCTYPE_NAME:lhe,CUSTOM_ELEMENT:D2e});const gS={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},T2e=function(){return typeof window>"u"?null:window},R2e=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(i=t.getAttribute(s));const o="dompurify"+(i?"#"+i:"");try{return e.createPolicy(o,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function che(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T2e();const e=yt=>che(yt);if(e.version="3.1.7",e.removed=[],!n||!n.document||n.document.nodeType!==gS.document)return e.isSupported=!1,e;let{document:t}=n;const i=t,s=i.currentScript,{DocumentFragment:o,HTMLTemplateElement:r,Node:a,Element:l,NodeFilter:c,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:u,DOMParser:h,trustedTypes:f}=n,m=l.prototype,p=fS(m,"cloneNode"),b=fS(m,"remove"),v=fS(m,"nextSibling"),w=fS(m,"childNodes"),y=fS(m,"parentNode");if(typeof r=="function"){const yt=t.createElement("template");yt.content&&yt.content.ownerDocument&&(t=yt.content.ownerDocument)}let C,S="";const{implementation:x,createNodeIterator:k,createDocumentFragment:N,getElementsByTagName:E}=t,{importNode:B}=i;let A={};e.isSupported=typeof ohe=="function"&&typeof y=="function"&&x&&x.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:O,ERB_EXPR:W,TMPLIT_EXPR:T,DATA_ATTR:M,ARIA_ATTR:z,IS_SCRIPT_OR_DATA:ee,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:Z}=WQ;let{IS_ALLOWED_URI:V}=WQ,le=null;const Fe=mi({},[...AQ,...c3,...d3,...u3,...OQ]);let ke=null;const De=mi({},[...FQ,...h3,...BQ,...UE]);let ce=Object.seal(rhe(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Re=null,Ee=null,it=!0,Ge=!0,J=!1,Le=!0,ve=!1,nt=!0,St=!1,zi=!1,hs=!1,Bs=!1,Af=!1,cc=!1,Sp=!0,rE=!1;const aE="user-content-";let d0=!0,xp=!1,wd={},Of=null;const u0=mi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let lE=null;const Lp=mi({},["audio","video","img","source","image","track"]);let qu=null;const Jr=mi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),yd="http://www.w3.org/1998/Math/MathML",Gu="http://www.w3.org/2000/svg",fs="http://www.w3.org/1999/xhtml";let Va=fs,h0=!1,dc=null;const Ui=mi({},[yd,Gu,fs],l3);let kp=null;const l5=["application/xhtml+xml","text/html"],c5="text/html";let xs=null,Ff=null;const d5=t.createElement("form"),cE=function(re){return re instanceof RegExp||re instanceof Function},X1=function(){let re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ff&&Ff===re)){if((!re||typeof re!="object")&&(re={}),re=zp(re),kp=l5.indexOf(re.PARSER_MEDIA_TYPE)===-1?c5:re.PARSER_MEDIA_TYPE,xs=kp==="application/xhtml+xml"?l3:wT,le=bc(re,"ALLOWED_TAGS")?mi({},re.ALLOWED_TAGS,xs):Fe,ke=bc(re,"ALLOWED_ATTR")?mi({},re.ALLOWED_ATTR,xs):De,dc=bc(re,"ALLOWED_NAMESPACES")?mi({},re.ALLOWED_NAMESPACES,l3):Ui,qu=bc(re,"ADD_URI_SAFE_ATTR")?mi(zp(Jr),re.ADD_URI_SAFE_ATTR,xs):Jr,lE=bc(re,"ADD_DATA_URI_TAGS")?mi(zp(Lp),re.ADD_DATA_URI_TAGS,xs):Lp,Of=bc(re,"FORBID_CONTENTS")?mi({},re.FORBID_CONTENTS,xs):u0,Re=bc(re,"FORBID_TAGS")?mi({},re.FORBID_TAGS,xs):{},Ee=bc(re,"FORBID_ATTR")?mi({},re.FORBID_ATTR,xs):{},wd=bc(re,"USE_PROFILES")?re.USE_PROFILES:!1,it=re.ALLOW_ARIA_ATTR!==!1,Ge=re.ALLOW_DATA_ATTR!==!1,J=re.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=re.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ve=re.SAFE_FOR_TEMPLATES||!1,nt=re.SAFE_FOR_XML!==!1,St=re.WHOLE_DOCUMENT||!1,Bs=re.RETURN_DOM||!1,Af=re.RETURN_DOM_FRAGMENT||!1,cc=re.RETURN_TRUSTED_TYPE||!1,hs=re.FORCE_BODY||!1,Sp=re.SANITIZE_DOM!==!1,rE=re.SANITIZE_NAMED_PROPS||!1,d0=re.KEEP_CONTENT!==!1,xp=re.IN_PLACE||!1,V=re.ALLOWED_URI_REGEXP||ahe,Va=re.NAMESPACE||fs,ce=re.CUSTOM_ELEMENT_HANDLING||{},re.CUSTOM_ELEMENT_HANDLING&&cE(re.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ce.tagNameCheck=re.CUSTOM_ELEMENT_HANDLING.tagNameCheck),re.CUSTOM_ELEMENT_HANDLING&&cE(re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ce.attributeNameCheck=re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),re.CUSTOM_ELEMENT_HANDLING&&typeof re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ce.allowCustomizedBuiltInElements=re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ve&&(Ge=!1),Af&&(Bs=!0),wd&&(le=mi({},OQ),ke=[],wd.html===!0&&(mi(le,AQ),mi(ke,FQ)),wd.svg===!0&&(mi(le,c3),mi(ke,h3),mi(ke,UE)),wd.svgFilters===!0&&(mi(le,d3),mi(ke,h3),mi(ke,UE)),wd.mathMl===!0&&(mi(le,u3),mi(ke,BQ),mi(ke,UE))),re.ADD_TAGS&&(le===Fe&&(le=zp(le)),mi(le,re.ADD_TAGS,xs)),re.ADD_ATTR&&(ke===De&&(ke=zp(ke)),mi(ke,re.ADD_ATTR,xs)),re.ADD_URI_SAFE_ATTR&&mi(qu,re.ADD_URI_SAFE_ATTR,xs),re.FORBID_CONTENTS&&(Of===u0&&(Of=zp(Of)),mi(Of,re.FORBID_CONTENTS,xs)),d0&&(le["#text"]=!0),St&&mi(le,["html","head","body"]),le.table&&(mi(le,["tbody"]),delete Re.tbody),re.TRUSTED_TYPES_POLICY){if(typeof re.TRUSTED_TYPES_POLICY.createHTML!="function")throw hS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof re.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw hS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=re.TRUSTED_TYPES_POLICY,S=C.createHTML("")}else C===void 0&&(C=R2e(f,s)),C!==null&&typeof S=="string"&&(S=C.createHTML(""));jr&&jr(re),Ff=re}},Ht=mi({},["mi","mo","mn","ms","mtext"]),H=mi({},["annotation-xml"]),j=mi({},["title","style","font","a","script"]),K=mi({},[...c3,...d3,...y2e]),Y=mi({},[...u3,...C2e]),ie=function(re){let Ve=y(re);(!Ve||!Ve.tagName)&&(Ve={namespaceURI:Va,tagName:"template"});const ut=wT(re.tagName),kn=wT(Ve.tagName);return dc[re.namespaceURI]?re.namespaceURI===Gu?Ve.namespaceURI===fs?ut==="svg":Ve.namespaceURI===yd?ut==="svg"&&(kn==="annotation-xml"||Ht[kn]):!!K[ut]:re.namespaceURI===yd?Ve.namespaceURI===fs?ut==="math":Ve.namespaceURI===Gu?ut==="math"&&H[kn]:!!Y[ut]:re.namespaceURI===fs?Ve.namespaceURI===Gu&&!H[kn]||Ve.namespaceURI===yd&&!Ht[kn]?!1:!Y[ut]&&(j[ut]||!K[ut]):!!(kp==="application/xhtml+xml"&&dc[re.namespaceURI]):!1},ue=function(re){dS(e.removed,{element:re});try{y(re).removeChild(re)}catch{b(re)}},be=function(re,Ve){try{dS(e.removed,{attribute:Ve.getAttributeNode(re),from:Ve})}catch{dS(e.removed,{attribute:null,from:Ve})}if(Ve.removeAttribute(re),re==="is"&&!ke[re])if(Bs||Af)try{ue(Ve)}catch{}else try{Ve.setAttribute(re,"")}catch{}},Ue=function(re){let Ve=null,ut=null;if(hs)re="<remove></remove>"+re;else{const mo=PQ(re,/^[\r\n\t ]+/);ut=mo&&mo[0]}kp==="application/xhtml+xml"&&Va===fs&&(re='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+re+"</body></html>");const kn=C?C.createHTML(re):re;if(Va===fs)try{Ve=new h().parseFromString(kn,kp)}catch{}if(!Ve||!Ve.documentElement){Ve=x.createDocument(Va,"template",null);try{Ve.documentElement.innerHTML=h0?S:kn}catch{}}const jo=Ve.body||Ve.documentElement;return re&&ut&&jo.insertBefore(t.createTextNode(ut),jo.childNodes[0]||null),Va===fs?E.call(Ve,St?"html":"body")[0]:St?Ve.documentElement:jo},Xe=function(re){return k.call(re.ownerDocument||re,re,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Pt=function(re){return re instanceof u&&(typeof re.nodeName!="string"||typeof re.textContent!="string"||typeof re.removeChild!="function"||!(re.attributes instanceof d)||typeof re.removeAttribute!="function"||typeof re.setAttribute!="function"||typeof re.namespaceURI!="string"||typeof re.insertBefore!="function"||typeof re.hasChildNodes!="function")},hi=function(re){return typeof a=="function"&&re instanceof a},wi=function(re,Ve,ut){A[re]&&zE(A[re],kn=>{kn.call(e,Ve,ut,Ff)})},gn=function(re){let Ve=null;if(wi("beforeSanitizeElements",re,null),Pt(re))return ue(re),!0;const ut=xs(re.nodeName);if(wi("uponSanitizeElement",re,{tagName:ut,allowedTags:le}),re.hasChildNodes()&&!hi(re.firstElementChild)&&pr(/<[/\w]/g,re.innerHTML)&&pr(/<[/\w]/g,re.textContent)||re.nodeType===gS.progressingInstruction||nt&&re.nodeType===gS.comment&&pr(/<[/\w]/g,re.data))return ue(re),!0;if(!le[ut]||Re[ut]){if(!Re[ut]&&gr(ut)&&(ce.tagNameCheck instanceof RegExp&&pr(ce.tagNameCheck,ut)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(ut)))return!1;if(d0&&!Of[ut]){const kn=y(re)||re.parentNode,jo=w(re)||re.childNodes;if(jo&&kn){const mo=jo.length;for(let ea=mo-1;ea>=0;--ea){const Cd=p(jo[ea],!0);Cd.__removalCount=(re.__removalCount||0)+1,kn.insertBefore(Cd,v(re))}}}return ue(re),!0}return re instanceof l&&!ie(re)||(ut==="noscript"||ut==="noembed"||ut==="noframes")&&pr(/<\/no(script|embed|frames)/i,re.innerHTML)?(ue(re),!0):(ve&&re.nodeType===gS.text&&(Ve=re.textContent,zE([O,W,T],kn=>{Ve=uS(Ve,kn," ")}),re.textContent!==Ve&&(dS(e.removed,{element:re.cloneNode()}),re.textContent=Ve)),wi("afterSanitizeElements",re,null),!1)},mn=function(re,Ve,ut){if(Sp&&(Ve==="id"||Ve==="name")&&(ut in t||ut in d5))return!1;if(!(Ge&&!Ee[Ve]&&pr(M,Ve))){if(!(it&&pr(z,Ve))){if(!ke[Ve]||Ee[Ve]){if(!(gr(re)&&(ce.tagNameCheck instanceof RegExp&&pr(ce.tagNameCheck,re)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(re))&&(ce.attributeNameCheck instanceof RegExp&&pr(ce.attributeNameCheck,Ve)||ce.attributeNameCheck instanceof Function&&ce.attributeNameCheck(Ve))||Ve==="is"&&ce.allowCustomizedBuiltInElements&&(ce.tagNameCheck instanceof RegExp&&pr(ce.tagNameCheck,ut)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(ut))))return!1}else if(!qu[Ve]){if(!pr(V,uS(ut,q,""))){if(!((Ve==="src"||Ve==="xlink:href"||Ve==="href")&&re!=="script"&&_2e(ut,"data:")===0&&lE[re])){if(!(J&&!pr(ee,uS(ut,q,"")))){if(ut)return!1}}}}}}return!0},gr=function(re){return re!=="annotation-xml"&&PQ(re,Z)},ja=function(re){wi("beforeSanitizeAttributes",re,null);const{attributes:Ve}=re;if(!Ve)return;const ut={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};let kn=Ve.length;for(;kn--;){const jo=Ve[kn],{name:mo,namespaceURI:ea,value:Cd}=jo,J1=xs(mo);let mr=mo==="value"?Cd:b2e(Cd);if(ut.attrName=J1,ut.attrValue=mr,ut.keepAttr=!0,ut.forceKeepAttr=void 0,wi("uponSanitizeAttribute",re,ut),mr=ut.attrValue,ut.forceKeepAttr||(be(mo,re),!ut.keepAttr))continue;if(!Le&&pr(/\/>/i,mr)){be(mo,re);continue}ve&&zE([O,W,T],rY=>{mr=uS(mr,rY," ")});const oY=xs(re.nodeName);if(mn(oY,J1,mr)){if(rE&&(J1==="id"||J1==="name")&&(be(mo,re),mr=aE+mr),nt&&pr(/((--!?|])>)|<\/(style|title)/i,mr)){be(mo,re);continue}if(C&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!ea)switch(f.getAttributeType(oY,J1)){case"TrustedHTML":{mr=C.createHTML(mr);break}case"TrustedScriptURL":{mr=C.createScriptURL(mr);break}}try{ea?re.setAttributeNS(ea,mo,mr):re.setAttribute(mo,mr),Pt(re)?ue(re):MQ(e.removed)}catch{}}}wi("afterSanitizeAttributes",re,null)},Q1=function yt(re){let Ve=null;const ut=Xe(re);for(wi("beforeSanitizeShadowDOM",re,null);Ve=ut.nextNode();)wi("uponSanitizeShadowNode",Ve,null),!gn(Ve)&&(Ve.content instanceof o&&yt(Ve.content),ja(Ve));wi("afterSanitizeShadowDOM",re,null)};return e.sanitize=function(yt){let re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ve=null,ut=null,kn=null,jo=null;if(h0=!yt,h0&&(yt="<!-->"),typeof yt!="string"&&!hi(yt))if(typeof yt.toString=="function"){if(yt=yt.toString(),typeof yt!="string")throw hS("dirty is not a string, aborting")}else throw hS("toString is not a function");if(!e.isSupported)return yt;if(zi||X1(re),e.removed=[],typeof yt=="string"&&(xp=!1),xp){if(yt.nodeName){const Cd=xs(yt.nodeName);if(!le[Cd]||Re[Cd])throw hS("root node is forbidden and cannot be sanitized in-place")}}else if(yt instanceof a)Ve=Ue("<!---->"),ut=Ve.ownerDocument.importNode(yt,!0),ut.nodeType===gS.element&&ut.nodeName==="BODY"||ut.nodeName==="HTML"?Ve=ut:Ve.appendChild(ut);else{if(!Bs&&!ve&&!St&&yt.indexOf("<")===-1)return C&&cc?C.createHTML(yt):yt;if(Ve=Ue(yt),!Ve)return Bs?null:cc?S:""}Ve&&hs&&ue(Ve.firstChild);const mo=Xe(xp?yt:Ve);for(;kn=mo.nextNode();)gn(kn)||(kn.content instanceof o&&Q1(kn.content),ja(kn));if(xp)return yt;if(Bs){if(Af)for(jo=N.call(Ve.ownerDocument);Ve.firstChild;)jo.appendChild(Ve.firstChild);else jo=Ve;return(ke.shadowroot||ke.shadowrootmode)&&(jo=B.call(i,jo,!0)),jo}let ea=St?Ve.outerHTML:Ve.innerHTML;return St&&le["!doctype"]&&Ve.ownerDocument&&Ve.ownerDocument.doctype&&Ve.ownerDocument.doctype.name&&pr(lhe,Ve.ownerDocument.doctype.name)&&(ea="<!DOCTYPE "+Ve.ownerDocument.doctype.name+`>
`+ea),ve&&zE([O,W,T],Cd=>{ea=uS(ea,Cd," ")}),C&&cc?C.createHTML(ea):ea},e.setConfig=function(){let yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};X1(yt),zi=!0},e.clearConfig=function(){Ff=null,zi=!1},e.isValidAttribute=function(yt,re,Ve){Ff||X1({});const ut=xs(yt),kn=xs(re);return mn(ut,kn,Ve)},e.addHook=function(yt,re){typeof re=="function"&&(A[yt]=A[yt]||[],dS(A[yt],re))},e.removeHook=function(yt){if(A[yt])return MQ(A[yt])},e.removeHooks=function(yt){A[yt]&&(A[yt]=[])},e.removeAllHooks=function(){A={}},e}var Wu=che();Wu.version;Wu.isSupported;const dhe=Wu.sanitize;Wu.setConfig;Wu.clearConfig;Wu.isValidAttribute;const uhe=Wu.addHook,hhe=Wu.removeHook;Wu.removeHooks;Wu.removeAllHooks;var tt;(function(n){n.inMemory="inmemory",n.vscode="vscode",n.internal="private",n.walkThrough="walkThrough",n.walkThroughSnippet="walkThroughSnippet",n.http="http",n.https="https",n.file="file",n.mailto="mailto",n.untitled="untitled",n.data="data",n.command="command",n.vscodeRemote="vscode-remote",n.vscodeRemoteResource="vscode-remote-resource",n.vscodeManagedRemoteResource="vscode-managed-remote-resource",n.vscodeUserData="vscode-userdata",n.vscodeCustomEditor="vscode-custom-editor",n.vscodeNotebookCell="vscode-notebook-cell",n.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",n.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",n.vscodeNotebookCellOutput="vscode-notebook-cell-output",n.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",n.vscodeNotebookMetadata="vscode-notebook-metadata",n.vscodeInteractiveInput="vscode-interactive-input",n.vscodeSettings="vscode-settings",n.vscodeWorkspaceTrust="vscode-workspace-trust",n.vscodeTerminal="vscode-terminal",n.vscodeChatCodeBlock="vscode-chat-code-block",n.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",n.vscodeChatSesssion="vscode-chat-editor",n.webviewPanel="webview-panel",n.vscodeWebview="vscode-webview",n.extension="extension",n.vscodeFileResource="vscode-file",n.tmp="tmp",n.vsls="vsls",n.vscodeSourceControl="vscode-scm",n.commentsInput="comment",n.codeSetting="code-setting",n.outputChannel="output"})(tt||(tt={}));function _4(n,e){return Be.isUri(n)?cw(n.scheme,e):_K(n,e+":")}function Y8(n,...e){return e.some(t=>_4(n,t))}const M2e="tkn";class P2e{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return xn.join(this._serverRootPath,tt.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return et(a),e}const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const s=this._ports[t],o=this._connectionTokens[t];let r=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(r+=`&${M2e}=${encodeURIComponent(o)}`),Be.from({scheme:Kv?this._preferredWebSchema:tt.vscodeRemoteResource,authority:`${i}:${s}`,path:this._remoteResourcesPath,query:r})}}const fhe=new P2e,A2e="vscode-app",_L=class _L{asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===tt.vscodeRemote?fhe.rewrite(e):e.scheme===tt.file&&(Gc||jDe===`${tt.vscodeFileResource}://${_L.FALLBACK_AUTHORITY}`)?e.with({scheme:tt.vscodeFileResource,authority:e.authority||_L.FALLBACK_AUTHORITY,query:null,fragment:null}):e}toUri(e,t){if(Be.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return Be.joinPath(Be.parse(i,!0),e);const s=hRe(i,e);return Be.file(s)}return Be.parse(t.toUrl(e))}};_L.FALLBACK_AUTHORITY=A2e;let X8=_L;const b4=new X8;var Q8;(function(n){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);n.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function i(o){let r;typeof o=="string"?r=new URL(o).searchParams:o instanceof URL?r=o.searchParams:Be.isUri(o)&&(r=new URL(o.toString(!0)).searchParams);const a=r==null?void 0:r.get(t);if(a)return e.get(a)}n.getHeadersFromQuery=i;function s(o,r,a){if(!globalThis.crossOriginIsolated)return;const l=r&&a?"3":a?"2":"1";o instanceof URLSearchParams?o.set(t,l):o[t]=l}n.addSearchParam=s})(Q8||(Q8={}));function v4(n){return w4(n,0)}function w4(n,e){switch(typeof n){case"object":return n===null?Mh(349,e):Array.isArray(n)?F2e(n,e):B2e(n,e);case"string":return kK(n,e);case"boolean":return O2e(n,e);case"number":return Mh(n,e);case"undefined":return Mh(937,e);default:return Mh(617,e)}}function Mh(n,e){return(e<<5)-e+n|0}function O2e(n,e){return Mh(n?433:863,e)}function kK(n,e){e=Mh(149417,e);for(let t=0,i=n.length;t<i;t++)e=Mh(n.charCodeAt(t),e);return e}function F2e(n,e){return e=Mh(104579,e),n.reduce((t,i)=>w4(i,t),e)}function B2e(n,e){return e=Mh(181387,e),Object.keys(n).sort().reduce((t,i)=>(t=kK(i,t),w4(n[i],t)),e)}function f3(n,e,t=32){const i=t-e,s=~((1<<i)-1);return(n<<e|(s&n)>>>i)>>>0}function HQ(n,e=0,t=n.byteLength,i=0){for(let s=0;s<t;s++)n[e+s]=i}function W2e(n,e,t="0"){for(;n.length<e;)n=t+n;return n}function mS(n,e=32){return n instanceof ArrayBuffer?Array.from(new Uint8Array(n)).map(t=>t.toString(16).padStart(2,"0")).join(""):W2e((n>>>0).toString(16),e/4)}const JP=class JP{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let s=this._buffLen,o=this._leftoverHighSurrogate,r,a;for(o!==0?(r=o,a=-1,o=0):(r=e.charCodeAt(0),a=0);;){let l=r;if(qn(r))if(a+1<t){const c=e.charCodeAt(a+1);fv(c)?(a++,l=bK(r,c)):l=65533}else{o=r;break}else fv(r)&&(l=65533);if(s=this._push(i,s,l),a++,a<t)r=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=o}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),mS(this._h0)+mS(this._h1)+mS(this._h2)+mS(this._h3)+mS(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,HQ(this._buff,this._buffLen),this._buffLen>56&&(this._step(),HQ(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=JP._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,f3(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let i=this._h0,s=this._h1,o=this._h2,r=this._h3,a=this._h4,l,c,d;for(let u=0;u<80;u++)u<20?(l=s&o|~s&r,c=1518500249):u<40?(l=s^o^r,c=1859775393):u<60?(l=s&o|s&r|o&r,c=2400959708):(l=s^o^r,c=3395469782),d=f3(i,5)+l+a+c+e.getUint32(u*4,!1)&4294967295,a=r,r=o,o=f3(s,30),s=i,i=d;this._h0=this._h0+i&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+r&4294967295,this._h4=this._h4+a&4294967295}};JP._bigBlock32=new DataView(new ArrayBuffer(320));let J8=JP;const{registerWindow:Vrt,getWindow:je,getDocument:jrt,getWindows:ghe,getWindowsCount:H2e,getWindowId:c2,getWindowById:VQ,hasWindow:zrt,onDidRegisterWindow:y4,onWillUnregisterWindow:V2e,onDidUnregisterWindow:j2e}=function(){const n=new Map;RRe(ui,1);const e={window:ui,disposables:new ne};n.set(ui.vscodeWindowId,e);const t=new $,i=new $,s=new $;function o(r,a){return(typeof r=="number"?n.get(r):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:s.event,onDidUnregisterWindow:i.event,registerWindow(r){if(n.has(r.vscodeWindowId))return G.None;const a=new ne,l={window:r,disposables:a.add(new ne)};return n.set(r.vscodeWindowId,l),a.add(Pe(()=>{n.delete(r.vscodeWindowId),i.fire(r)})),a.add(Q(r,fe.BEFORE_UNLOAD,()=>{s.fire(r)})),t.fire(l),a},getWindows(){return n.values()},getWindowsCount(){return n.size},getWindowId(r){return r.vscodeWindowId},hasWindow(r){return n.has(r)},getWindowById:o,getWindow(r){var c;const a=r;if((c=a==null?void 0:a.ownerDocument)!=null&&c.defaultView)return a.ownerDocument.defaultView.window;const l=r;return l!=null&&l.view?l.view.window:ui},getDocument(r){return je(r).document}}}();function ws(n){for(;n.firstChild;)n.firstChild.remove()}class z2e{constructor(e,t,i,s){this._node=e,this._type=t,this._handler=i,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function Q(n,e,t,i){return new z2e(n,e,t,i)}function mhe(n,e){return function(t){return e(new Vl(n,t))}}function U2e(n){return function(e){return n(new _i(e))}}const Ji=function(e,t,i,s){let o=i;return t==="click"||t==="mousedown"||t==="contextmenu"?o=mhe(je(e),i):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=U2e(i)),Q(e,t,o,s)},$2e=function(e,t,i){const s=mhe(je(e),t);return K2e(e,s,i)};function K2e(n,e,t){return Q(n,rd&&SK.pointerEvents?fe.POINTER_DOWN:fe.MOUSE_DOWN,e,t)}function GS(n,e,t){return Mx(n,e,t)}class g3 extends she{constructor(e,t){super(e,t)}}let d2,zr;class NK extends LK{constructor(e){super(),this.defaultTarget=e&&je(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}}class m3{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){et(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const n=new Map,e=new Map,t=new Map,i=new Map,s=o=>{t.set(o,!1);const r=n.get(o)??[];for(e.set(o,r),n.set(o,[]),i.set(o,!0);r.length>0;)r.sort(m3.sort),r.shift().execute();i.set(o,!1)};zr=(o,r,a=0)=>{const l=c2(o),c=new m3(r,a);let d=n.get(l);return d||(d=[],n.set(l,d)),d.push(c),t.get(l)||(t.set(l,!0),o.requestAnimationFrame(()=>s(l))),c},d2=(o,r,a)=>{const l=c2(o);if(i.get(l)){const c=new m3(r,a);let d=e.get(l);return d||(d=[],e.set(l,d)),d.push(c),c}else return zr(o,r,a)}})();function C4(n){return je(n).getComputedStyle(n,null)}function qm(n,e){const t=je(n),i=t.document;if(n!==i.body)return new ni(n.clientWidth,n.clientHeight);if(rd&&(t!=null&&t.visualViewport))return new ni(t.visualViewport.width,t.visualViewport.height);if(t!=null&&t.innerWidth&&t.innerHeight)return new ni(t.innerWidth,t.innerHeight);if(i.body&&i.body.clientWidth&&i.body.clientHeight)return new ni(i.body.clientWidth,i.body.clientHeight);if(i.documentElement&&i.documentElement.clientWidth&&i.documentElement.clientHeight)return new ni(i.documentElement.clientWidth,i.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class bn{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const s=C4(e),o=s?s.getPropertyValue(t):"0";return bn.convertToPixels(e,o)}static getBorderLeftWidth(e){return bn.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return bn.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return bn.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return bn.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return bn.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return bn.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return bn.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return bn.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return bn.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return bn.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return bn.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return bn.getDimension(e,"margin-bottom","marginBottom")}}const f_=class f_{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new f_(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof f_?e:new f_(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};f_.None=new f_(0,0);let ni=f_;function phe(n){let e=n.offsetParent,t=n.offsetTop,i=n.offsetLeft;for(;(n=n.parentNode)!==null&&n!==n.ownerDocument.body&&n!==n.ownerDocument.documentElement;){t-=n.scrollTop;const s=bhe(n)?null:C4(n);s&&(i-=s.direction!=="rtl"?n.scrollLeft:-n.scrollLeft),n===e&&(i+=bn.getBorderLeftWidth(n),t+=bn.getBorderTopWidth(n),t+=n.offsetTop,i+=n.offsetLeft,e=n.offsetParent)}return{left:i,top:t}}function q2e(n,e,t){typeof e=="number"&&(n.style.width=`${e}px`),typeof t=="number"&&(n.style.height=`${t}px`)}function un(n){const e=n.getBoundingClientRect(),t=je(n);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function _he(n){let e=n,t=1;do{const i=C4(e).zoom;i!=null&&i!=="1"&&(t*=i),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function xr(n){const e=bn.getMarginLeft(n)+bn.getMarginRight(n);return n.offsetWidth+e}function p3(n){const e=bn.getBorderLeftWidth(n)+bn.getBorderRightWidth(n),t=bn.getPaddingLeft(n)+bn.getPaddingRight(n);return n.offsetWidth-e-t}function G2e(n){const e=bn.getBorderTopWidth(n)+bn.getBorderBottomWidth(n),t=bn.getPaddingTop(n)+bn.getPaddingBottom(n);return n.offsetHeight-e-t}function Ph(n){const e=bn.getMarginTop(n)+bn.getMarginBottom(n);return n.offsetHeight+e}function Zn(n,e){return!!(e!=null&&e.contains(n))}function Z2e(n,e,t){for(;n&&n.nodeType===n.ELEMENT_NODE;){if(n.classList.contains(e))return n;if(t){if(typeof t=="string"){if(n.classList.contains(t))return null}else if(n===t)return null}n=n.parentNode}return null}function _3(n,e,t){return!!Z2e(n,e,t)}function bhe(n){return n&&!!n.host&&!!n.mode}function u2(n){return!!mv(n)}function mv(n){var e;for(;n.parentNode;){if(n===((e=n.ownerDocument)==null?void 0:e.body))return null;n=n.parentNode}return bhe(n)?n:null}function Ms(){let n=x1().activeElement;for(;n!=null&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}function S4(n){return Ms()===n}function vhe(n){return Zn(Ms(),n)}function x1(){return H2e()<=1?ui.document:Array.from(ghe()).map(({window:e})=>e.document).find(e=>e.hasFocus())??ui.document}function ZS(){var e;return((e=x1().defaultView)==null?void 0:e.window)??ui}const IK=new Map;function whe(){return new Y2e}class Y2e{constructor(){this._currentCssStyle="",this._styleSheet=void 0}setStyle(e){e!==this._currentCssStyle&&(this._currentCssStyle=e,this._styleSheet?this._styleSheet.innerText=e:this._styleSheet=Ta(ui.document.head,t=>t.innerText=e))}dispose(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}}function Ta(n=ui.document.head,e,t){const i=document.createElement("style");if(i.type="text/css",i.media="screen",e==null||e(i),n.appendChild(i),t&&t.add(Pe(()=>i.remove())),n===ui.document.head){const s=new Set;IK.set(i,s);for(const{window:o,disposables:r}of ghe()){if(o===ui)continue;const a=r.add(X2e(i,s,o));t==null||t.add(a)}}return i}function X2e(n,e,t){var o,r;const i=new ne,s=n.cloneNode(!0);t.document.head.appendChild(s),i.add(Pe(()=>s.remove()));for(const a of Che(n))(r=s.sheet)==null||r.insertRule(a.cssText,(o=s.sheet)==null?void 0:o.cssRules.length);return i.add(Q2e.observe(n,i,{childList:!0})(()=>{s.textContent=n.textContent})),e.add(s),i.add(Pe(()=>e.delete(s))),i}const Q2e=new class{constructor(){this.mutationObservers=new Map}observe(n,e,t){let i=this.mutationObservers.get(n);i||(i=new Map,this.mutationObservers.set(n,i));const s=v4(t);let o=i.get(s);if(o)o.users+=1;else{const r=new $,a=new MutationObserver(c=>r.fire(c));a.observe(n,t);const l=o={users:1,observer:a,onDidMutate:r.event};e.add(Pe(()=>{l.users-=1,l.users===0&&(r.dispose(),a.disconnect(),i==null||i.delete(s),(i==null?void 0:i.size)===0&&this.mutationObservers.delete(n))})),i.set(s,o)}return o.onDidMutate}};let b3=null;function yhe(){return b3||(b3=Ta()),b3}function Che(n){var e,t;return(e=n==null?void 0:n.sheet)!=null&&e.rules?n.sheet.rules:(t=n==null?void 0:n.sheet)!=null&&t.cssRules?n.sheet.cssRules:[]}function h2(n,e,t=yhe()){var i;if(!(!t||!e)){(i=t.sheet)==null||i.insertRule(`${n} {${e}}`,0);for(const s of IK.get(t)??[])h2(n,e,s)}}function eW(n,e=yhe()){var s;if(!e)return;const t=Che(e),i=[];for(let o=0;o<t.length;o++){const r=t[o];J2e(r)&&r.selectorText.indexOf(n)!==-1&&i.push(o)}for(let o=i.length-1;o>=0;o--)(s=e.sheet)==null||s.deleteRule(i[o]);for(const o of IK.get(e)??[])eW(n,o)}function J2e(n){return typeof n.selectorText=="string"}function Qn(n){return n instanceof HTMLElement||n instanceof je(n).HTMLElement}function jQ(n){return n instanceof HTMLAnchorElement||n instanceof je(n).HTMLAnchorElement}function eMe(n){return n instanceof SVGElement||n instanceof je(n).SVGElement}function EK(n){return n instanceof MouseEvent||n instanceof je(n).MouseEvent}function wh(n){return n instanceof KeyboardEvent||n instanceof je(n).KeyboardEvent}const fe={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:z_?"webkitAnimationStart":"animationstart",ANIMATION_END:z_?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:z_?"webkitAnimationIteration":"animationiteration"};function tMe(n){const e=n;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const Dt={stop:(n,e)=>(n.preventDefault(),e&&n.stopPropagation(),n)};function iMe(n){const e=[];for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)e[t]=n.scrollTop,n=n.parentNode;return e}function nMe(n,e){for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)n.scrollTop!==e[t]&&(n.scrollTop=e[t]),n=n.parentNode}class f2 extends G{static hasFocusWithin(e){if(Qn(e)){const t=mv(e),i=t?t.activeElement:e.ownerDocument.activeElement;return Zn(i,e)}else{const t=e;return Zn(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new $),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new $),this.onDidBlur=this._onDidBlur.event;let t=f2.hasFocusWithin(e),i=!1;const s=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},o=()=>{t&&(i=!0,(Qn(e)?je(e):e).setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{f2.hasFocusWithin(e)!==t&&(t?o():s())},this._register(Q(e,fe.FOCUS,s,!0)),this._register(Q(e,fe.BLUR,o,!0)),Qn(e)&&(this._register(Q(e,fe.FOCUS_IN,()=>this._refreshStateHandler())),this._register(Q(e,fe.FOCUS_OUT,()=>this._refreshStateHandler())))}}function ld(n){return new f2(n)}function sMe(n,e){return n.after(e),e}function ae(n,...e){if(n.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function DK(n,e){return n.insertBefore(e,n.firstChild),e}function ys(n,...e){n.innerText="",ae(n,...e)}const oMe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Ek;(function(n){n.HTML="http://www.w3.org/1999/xhtml",n.SVG="http://www.w3.org/2000/svg"})(Ek||(Ek={}));function She(n,e,t,...i){const s=oMe.exec(e);if(!s)throw new Error("Bad use of emmet");const o=s[1]||"div";let r;return n!==Ek.HTML?r=document.createElementNS(n,o):r=document.createElement(o),s[3]&&(r.id=s[3]),s[4]&&(r.className=s[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?r[a]=l:a==="selected"?l&&r.setAttribute(a,"true"):r.setAttribute(a,l))}),r.append(...i),r}function ge(n,e,...t){return She(Ek.HTML,n,e,...t)}ge.SVG=function(n,e,...t){return She(Ek.SVG,n,e,...t)};function rMe(n,...e){n?Dr(...e):wo(...e)}function Dr(...n){for(const e of n)e.style.display="",e.removeAttribute("aria-hidden")}function wo(...n){for(const e of n)e.style.display="none",e.setAttribute("aria-hidden","true")}function zQ(n,e){const t=n.devicePixelRatio*e;return Math.max(1,Math.floor(t))/n.devicePixelRatio}function xhe(n){ui.open(n,"_blank","noopener")}function aMe(n,e){const t=()=>{e(),i=zr(n,t)};let i=zr(n,t);return Pe(()=>i.dispose())}fhe.setPreferredWebSchema(/^https:/.test(ui.location.href)?"https":"http");function bf(n){return n?`url('${b4.uriToBrowserUri(n).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function v3(n){return`'${n.replace(/'/g,"%27")}'`}function Zh(n,e){if(n!==void 0){const t=n.match(/^\s*var\((.+)\)$/);if(t){const i=t[1].split(",",2);return i.length===2&&(e=Zh(i[1].trim(),e)),`var(${i[0]}, ${e})`}return n}return e}function lMe(n,e=!1){const t=document.createElement("a");return uhe("afterSanitizeAttributes",i=>{for(const s of["href","src"])if(i.hasAttribute(s)){const o=i.getAttribute(s);if(s==="href"&&o.startsWith("#"))continue;if(t.href=o,!n.includes(t.protocol.replace(/:$/,""))){if(e&&s==="src"&&t.href.startsWith("data:"))continue;i.removeAttribute(s)}}}),Pe(()=>{hhe("afterSanitizeAttributes")})}const cMe=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class Ah extends ${constructor(){super(),this._subscriptions=new ne,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(pe.runAndSubscribe(y4,({window:e,disposables:t})=>this.registerListeners(e,t),{window:ui,disposables:this._subscriptions}))}registerListeners(e,t){t.add(Q(e,"keydown",i=>{if(i.defaultPrevented)return;const s=new _i(i);if(!(s.keyCode===6&&i.repeat)){if(i.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(i.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(i.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(i.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(s.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=i,this.fire(this._keyStatus))}},!0)),t.add(Q(e,"keyup",i=>{i.defaultPrevented||(!i.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!i.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!i.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!i.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=i,this.fire(this._keyStatus)))},!0)),t.add(Q(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(Q(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(Q(e.document.body,"mousemove",i=>{i.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(Q(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Ah.instance||(Ah.instance=new Ah),Ah.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class dMe extends G{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(Q(this.element,fe.DRAG_START,e=>{var t,i;(i=(t=this.callbacks).onDragStart)==null||i.call(t,e)})),this.callbacks.onDrag&&this._register(Q(this.element,fe.DRAG,e=>{var t,i;(i=(t=this.callbacks).onDrag)==null||i.call(t,e)})),this._register(Q(this.element,fe.DRAG_ENTER,e=>{var t,i;this.counter++,this.dragStartTime=e.timeStamp,(i=(t=this.callbacks).onDragEnter)==null||i.call(t,e)})),this._register(Q(this.element,fe.DRAG_OVER,e=>{var t,i;e.preventDefault(),(i=(t=this.callbacks).onDragOver)==null||i.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(Q(this.element,fe.DRAG_LEAVE,e=>{var t,i;this.counter--,this.counter===0&&(this.dragStartTime=0,(i=(t=this.callbacks).onDragLeave)==null||i.call(t,e))})),this._register(Q(this.element,fe.DRAG_END,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDragEnd)==null||i.call(t,e)})),this._register(Q(this.element,fe.DROP,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDrop)==null||i.call(t,e)}))}}const Lhe=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Ct(n,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const s=Lhe.exec(n);if(!s||!s.groups)throw new Error("Bad use of h");const o=s.groups.tag||"div",r=document.createElement(o);s.groups.id&&(r.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=r),i)for(const c of i)Qn(c)?r.appendChild(c):typeof c=="string"?r.append(c):"root"in c&&(Object.assign(l,c),r.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[u,h]of Object.entries(d))r.style.setProperty(g2(u),typeof h=="number"?h+"px":""+h);else c==="tabIndex"?r.tabIndex=d:r.setAttribute(g2(c),d.toString());return l.root=r,l}function b0(n,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const s=Lhe.exec(n);if(!s||!s.groups)throw new Error("Bad use of h");const o=s.groups.tag||"div",r=document.createElementNS("http://www.w3.org/2000/svg",o);s.groups.id&&(r.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=r),i)for(const c of i)Qn(c)?r.appendChild(c):typeof c=="string"?r.append(c):"root"in c&&(Object.assign(l,c),r.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[u,h]of Object.entries(d))r.style.setProperty(g2(u),typeof h=="number"?h+"px":""+h);else c==="tabIndex"?r.tabIndex=d:r.setAttribute(g2(c),d.toString());return l.root=r,l}function g2(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class uMe extends G{constructor(e){super(),this._onDidChange=this._register(new $),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){var i;(i=this._mediaQueryList)==null||i.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class hMe extends G{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new $),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new uMe(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),i=e.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/s}}class fMe{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=c2(e);let i=this.mapWindowIdToPixelRatioMonitor.get(t);return i||(i=new hMe(e),this.mapWindowIdToPixelRatioMonitor.set(t,i),pe.once(j2e)(({vscodeWindowId:s})=>{s===t&&(i==null||i.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),i}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const Dk=new fMe;class khe{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=hc(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=hc(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=hc(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=hc(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=hc(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=hc(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=hc(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=hc(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=hc(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=hc(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=hc(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function hc(n){return typeof n=="number"?`${n}px`:n}function Jt(n){return new khe(n)}function Cs(n,e){n instanceof khe?(n.setFontFamily(e.getMassagedFontFamily()),n.setFontWeight(e.fontWeight),n.setFontSize(e.fontSize),n.setFontFeatureSettings(e.fontFeatureSettings),n.setFontVariationSettings(e.fontVariationSettings),n.setLineHeight(e.lineHeight),n.setLetterSpacing(e.letterSpacing)):(n.style.fontFamily=e.getMassagedFontFamily(),n.style.fontWeight=e.fontWeight,n.style.fontSize=e.fontSize+"px",n.style.fontFeatureSettings=e.fontFeatureSettings,n.style.fontVariationSettings=e.fontVariationSettings,n.style.lineHeight=e.lineHeight+"px",n.style.letterSpacing=e.letterSpacing+"px")}class gMe{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class TK{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){var t;this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),(t=this._container)==null||t.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");Cs(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");Cs(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const s=document.createElement("div");Cs(s,this._bareFontInfo),s.style.fontStyle="italic",e.appendChild(s);const o=[];for(const r of this._requests){let a;r.type===0&&(a=t),r.type===2&&(a=i),r.type===1&&(a=s),a.appendChild(document.createElement("br"));const l=document.createElement("span");TK._render(l,r),a.appendChild(l),o.push(l)}this._container=e,this._testElements=o}static _render(e,t){if(t.chr===" "){let i=" ";for(let s=0;s<8;s++)i+=i;e.innerText=i}else{let i=t.chr;for(let s=0;s<8;s++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],s=this._testElements[e];i.fulfill(s.offsetWidth/256)}}}function mMe(n,e,t){new TK(e,t).read(n)}const Qa=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new $,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(n){n=Math.min(Math.max(-5,n),20),this._zoomLevel!==n&&(this._zoomLevel=n,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},pMe=Lt?1.5:1.35,w3=8;class U_{static createFromValidatedSettings(e,t,i){const s=e.get(49),o=e.get(53),r=e.get(52),a=e.get(51),l=e.get(54),c=e.get(67),d=e.get(64);return U_._create(s,o,r,a,l,c,d,t,i)}static _create(e,t,i,s,o,r,a,l,c){r===0?r=pMe*i:r<w3&&(r=r*i),r=Math.round(r),r<w3&&(r=w3);const d=1+(c?0:Qa.getZoomLevel()*.1);return i*=d,r*=d,o===Ck.TRANSLATE&&(t==="normal"||t==="bold"?o=Ck.OFF:(o=`'wght' ${parseInt(t,10)}`,t="normal")),new U_({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:s,fontVariationSettings:o,lineHeight:r,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Eo.fontFamily,t=U_._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const _Me=2;class tW extends U_{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=_Me,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class bMe extends G{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new $),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=c2(e);let i=this._cache.get(t);return i||(i=new vMe,this._cache.set(t,i)),i}_writeToCache(e,t,i){this._ensureCache(e).put(t,i),!i.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),i=t.getValues();let s=!1;for(const o of i)o.isTrusted||(s=!0,t.remove(o));s&&this._onDidChange.fire()}readFontInfo(e,t){const i=this._ensureCache(e);if(!i.has(t)){let s=this._actualReadFontInfo(e,t);(s.typicalHalfwidthCharacterWidth<=2||s.typicalFullwidthCharacterWidth<=2||s.spaceWidth<=2||s.maxDigitWidth<=2)&&(s=new tW({pixelRatio:Dk.getInstance(e).value,fontFamily:s.fontFamily,fontWeight:s.fontWeight,fontSize:s.fontSize,fontFeatureSettings:s.fontFeatureSettings,fontVariationSettings:s.fontVariationSettings,lineHeight:s.lineHeight,letterSpacing:s.letterSpacing,isMonospace:s.isMonospace,typicalHalfwidthCharacterWidth:Math.max(s.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(s.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:s.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(s.spaceWidth,5),middotWidth:Math.max(s.middotWidth,5),wsmiddotWidth:Math.max(s.wsmiddotWidth,5),maxDigitWidth:Math.max(s.maxDigitWidth,5)},!1)),this._writeToCache(e,t,s)}return i.get(t)}_createRequest(e,t,i,s){const o=new gMe(e,t);return i.push(o),s==null||s.push(o),o}_actualReadFontInfo(e,t){const i=[],s=[],o=this._createRequest("n",0,i,s),r=this._createRequest("ｍ",0,i,null),a=this._createRequest(" ",0,i,s),l=this._createRequest("0",0,i,s),c=this._createRequest("1",0,i,s),d=this._createRequest("2",0,i,s),u=this._createRequest("3",0,i,s),h=this._createRequest("4",0,i,s),f=this._createRequest("5",0,i,s),m=this._createRequest("6",0,i,s),p=this._createRequest("7",0,i,s),b=this._createRequest("8",0,i,s),v=this._createRequest("9",0,i,s),w=this._createRequest("→",0,i,s),y=this._createRequest("￫",0,i,null),C=this._createRequest("·",0,i,s),S=this._createRequest("⸱",0,i,null),x="|/-_ilm%";for(let A=0,O=x.length;A<O;A++)this._createRequest(x.charAt(A),0,i,s),this._createRequest(x.charAt(A),1,i,s),this._createRequest(x.charAt(A),2,i,s);mMe(e,t,i);const k=Math.max(l.width,c.width,d.width,u.width,h.width,f.width,m.width,p.width,b.width,v.width);let N=t.fontFeatureSettings===Vm.OFF;const E=s[0].width;for(let A=1,O=s.length;N&&A<O;A++){const W=E-s[A].width;if(W<-.001||W>.001){N=!1;break}}let B=!0;return N&&y.width!==E&&(B=!1),y.width>w.width&&(B=!1),new tW({pixelRatio:Dk.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:N,typicalHalfwidthCharacterWidth:o.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:B,spaceWidth:a.width,middotWidth:C.width,wsmiddotWidth:S.width,maxDigitWidth:k},!0)}}class vMe{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const iW=new bMe;var Vc;(function(n){n.serviceIds=new Map,n.DI_TARGET="$di$target",n.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[n.DI_DEPENDENCIES]||[]}n.getServiceDependencies=e})(Vc||(Vc={}));const Ae=kt("instantiationService");function wMe(n,e,t){e[Vc.DI_TARGET]===e?e[Vc.DI_DEPENDENCIES].push({id:n,index:t}):(e[Vc.DI_DEPENDENCIES]=[{id:n,index:t}],e[Vc.DI_TARGET]=e)}function kt(n){if(Vc.serviceIds.has(n))return Vc.serviceIds.get(n);const e=function(t,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");wMe(e,t,s)};return e.toString=()=>n,Vc.serviceIds.set(n,e),e}const Ut=kt("codeEditorService"),Ei=kt("modelService"),dr=kt("textModelService");class Or extends G{constructor(e,t="",i="",s=!0,o){super(),this._onDidChange=this._register(new $),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=s,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class pv extends G{constructor(){super(...arguments),this._onWillRun=this._register(new $),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new $),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let i;try{await this.runAction(e,t)}catch(s){i=s}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}}var fm;let Ss=(fm=class{constructor(){this.id=fm.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t.length?t=[...t,new fm,...i]:t=i);return t}async run(){}},fm.ID="vs.actions.separator",fm);class SC{get actions(){return this._actions}constructor(e,t,i,s){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=s,this._actions=i}async run(){}}const eA=class eA extends Or{constructor(){super(eA.ID,_("submenu.empty","(empty)"),void 0,!1)}};eA.ID="vs.actions.empty";let nW=eA;function $_(n){return{id:n.id,label:n.label,tooltip:n.tooltip??n.label,class:n.class,enabled:n.enabled??!0,checked:n.checked,run:async(...e)=>n.run(...e)}}var sW;(function(n){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}n.isThemeColor=e})(sW||(sW={}));var Ke;(function(n){n.iconNameSegment="[A-Za-z0-9]+",n.iconNameExpression="[A-Za-z0-9-]+",n.iconModifierExpression="~[A-Za-z]+",n.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${n.iconNameExpression})(${n.iconModifierExpression})?$`);function t(h){const f=e.exec(h.id);if(!f)return t(he.error);const[,m,p]=f,b=["codicon","codicon-"+m];return p&&b.push("codicon-modifier-"+p.substring(1)),b}n.asClassNameArray=t;function i(h){return t(h).join(" ")}n.asClassName=i;function s(h){return"."+t(h).join(".")}n.asCSSSelector=s;function o(h){return h&&typeof h=="object"&&typeof h.id=="string"&&(typeof h.color>"u"||sW.isThemeColor(h.color))}n.isThemeIcon=o;const r=new RegExp(`^\\$\\((${n.iconNameExpression}(?:${n.iconModifierExpression})?)\\)$`);function a(h){const f=r.exec(h);if(!f)return;const[,m]=f;return{id:m}}n.fromString=a;function l(h){return{id:h}}n.fromId=l;function c(h,f){let m=h.id;const p=m.lastIndexOf("~");return p!==-1&&(m=m.substring(0,p)),f&&(m=`${m}~${f}`),{id:m}}n.modify=c;function d(h){const f=h.id.lastIndexOf("~");if(f!==-1)return h.id.substring(f+1)}n.getModifier=d;function u(h,f){var m,p;return h.id===f.id&&((m=h.color)==null?void 0:m.id)===((p=f.color)==null?void 0:p.id)}n.isEqual=u})(Ke||(Ke={}));const Ci=kt("commandService"),Mt=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new $,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(n,e){if(!n)throw new Error("invalid command");if(typeof n=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:n,handler:e})}if(n.metadata&&Array.isArray(n.metadata.args)){const r=[];for(const l of n.metadata.args)r.push(l.constraint);const a=n.handler;n.handler=function(l,...c){return RDe(c,r),a(l,...c)}}const{id:t}=n;let i=this._commands.get(t);i||(i=new So,this._commands.set(t,i));const s=i.unshift(n),o=Pe(()=>{s();const r=this._commands.get(t);r!=null&&r.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(n,e){return Mt.registerCommand(n,(t,...i)=>t.get(Ci).executeCommand(e,...i))}getCommand(n){const e=this._commands.get(n);if(!(!e||e.isEmpty()))return Rt.first(e)}getCommands(){const n=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&n.set(e,t)}return n}};Mt.registerCommand("noop",()=>{});function y3(...n){switch(n.length){case 1:return _("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",n[0]);case 2:return _("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",n[0],n[1]);case 3:return _("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",n[0],n[1],n[2]);default:return}}const yMe=_("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),CMe=_("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");var zh;let pS=(zh=class{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw dK(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(y3("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(y3("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(y3("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),s={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(s)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=zh._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(yMe);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(CMe);return}const o=this._input.charCodeAt(e);if(t)t=!1;else if(o===47&&!i){e++;break}else o===91?i=!0:o===92?t=!0:o===93&&(i=!1);e++}for(;e<this._input.length&&zh._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const s=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:s,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}},zh._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),zh._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]),zh);const Ks=new Map;Ks.set("false",!1);Ks.set("true",!0);Ks.set("isMac",Lt);Ks.set("isLinux",Mo);Ks.set("isWindows",As);Ks.set("isWeb",Kv);Ks.set("isMacNative",Lt&&!Kv);Ks.set("isEdge",qDe);Ks.set("isFirefox",$De);Ks.set("isChrome",xue);Ks.set("isSafari",KDe);const SMe=Object.prototype.hasOwnProperty,xMe={regexParsingWithErrorRecovery:!0},LMe=_("contextkey.parser.error.emptyString","Empty context key expression"),kMe=_("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),NMe=_("contextkey.parser.error.noInAfterNot","'in' after 'not'."),UQ=_("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),IMe=_("contextkey.parser.error.unexpectedToken","Unexpected token"),EMe=_("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),DMe=_("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),TMe=_("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");var ru;let RMe=(ru=class{constructor(e=xMe){this._config=e,this._scanner=new pS,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:LMe,offset:0,lexeme:"",additionalInfo:kMe});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const i=this._peek(),s=i.type===17?EMe:void 0;throw this._parsingErrors.push({message:IMe,offset:i.offset,lexeme:pS.getLexeme(i),additionalInfo:s}),ru._parseError}return t}catch(t){if(t!==ru._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:se.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:se.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Po.INSTANCE;case 12:return this._advance(),rr.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,UQ),t==null?void 0:t.negate()}case 17:return this._advance(),Gv.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),se.true();case 12:return this._advance(),se.false();case 0:{this._advance();const t=this._expr();return this._consume(1,UQ),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const s=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),s.type!==10)throw this._errExpectedButGot("REGEX",s);const o=s.lexeme,r=o.lastIndexOf("/"),a=r===o.length-1?void 0:this._removeFlagsGY(o.substring(r+1));let l;try{l=new RegExp(o.substring(1,r),a)}catch{throw this._errExpectedButGot("REGEX",s)}return Tk.create(t,l)}switch(s.type){case 10:case 19:{const o=[s.lexeme];this._advance();let r=this._peek(),a=0;for(let h=0;h<s.lexeme.length;h++)s.lexeme.charCodeAt(h)===40?a++:s.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&r.type!==15&&r.type!==16;){switch(r.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<r.lexeme.length;h++)r.lexeme.charCodeAt(h)===40?a++:s.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;o.push(pS.getLexeme(r)),this._advance(),r=this._peek()}const l=o.join(""),c=l.lastIndexOf("/"),d=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let u;try{u=new RegExp(l.substring(1,c),d)}catch{throw this._errExpectedButGot("REGEX",s)}return se.regex(t,u)}case 18:{const o=s.lexeme;this._advance();let r=null;if(!$ue(o)){const a=o.indexOf("/"),l=o.lastIndexOf("/");if(a!==l&&a>=0){const c=o.slice(a+1,l),d=o[l+1]==="i"?"i":"";try{r=new RegExp(c,d)}catch{throw this._errExpectedButGot("REGEX",s)}}}if(r===null)throw this._errExpectedButGot("REGEX",s);return Tk.create(t,r)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,NMe);const s=this._value();return se.notIn(t,s)}switch(this._peek().type){case 3:{this._advance();const s=this._value();if(this._previous().type===18)return se.equals(t,s);switch(s){case"true":return se.has(t);case"false":return se.not(t);default:return se.equals(t,s)}}case 4:{this._advance();const s=this._value();if(this._previous().type===18)return se.notEquals(t,s);switch(s){case"true":return se.not(t);case"false":return se.has(t);default:return se.notEquals(t,s)}}case 5:return this._advance(),D4.create(t,this._value());case 6:return this._advance(),T4.create(t,this._value());case 7:return this._advance(),I4.create(t,this._value());case 8:return this._advance(),E4.create(t,this._value());case 13:return this._advance(),se.in(t,this._value());default:return se.has(t)}}case 20:throw this._parsingErrors.push({message:DMe,offset:e.offset,lexeme:"",additionalInfo:TMe}),ru._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const s=_("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,pS.getLexeme(t)),o=t.offset,r=pS.getLexeme(t);return this._parsingErrors.push({message:s,offset:o,lexeme:r,additionalInfo:i}),ru._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},ru._parseError=new Error,ru);const XZ=class XZ{static false(){return Po.INSTANCE}static true(){return rr.INSTANCE}static has(e){return qv.create(e)}static equals(e,t){return L1.create(e,t)}static notEquals(e,t){return k4.create(e,t)}static regex(e,t){return Tk.create(e,t)}static in(e,t){return x4.create(e,t)}static notIn(e,t){return L4.create(e,t)}static not(e){return Gv.create(e)}static and(...e){return S_.create(e,null,!0)}static or(...e){return Nh.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};XZ._parser=new RMe({regexParsingWithErrorRecovery:!1});let se=XZ;function MMe(n,e){const t=n?n.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function Px(n,e){return n.cmp(e)}const tA=class tA{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return rr.INSTANCE}};tA.INSTANCE=new tA;let Po=tA;const iA=class iA{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Po.INSTANCE}};iA.INSTANCE=new iA;let rr=iA;class qv{static create(e,t=null){const i=Ks.get(e);return typeof i=="boolean"?i?rr.INSTANCE:Po.INSTANCE:new qv(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:Ihe(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Ks.get(this.key);return typeof e=="boolean"?e?rr.INSTANCE:Po.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Gv.create(this.key,this)),this.negated}}class L1{static create(e,t,i=null){if(typeof t=="boolean")return t?qv.create(e,i):Gv.create(e,i);const s=Ks.get(e);return typeof s=="boolean"?t===(s?"true":"false")?rr.INSTANCE:Po.INSTANCE:new L1(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:Zv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Ks.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?rr.INSTANCE:Po.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=k4.create(this.key,this.value,this)),this.negated}}class x4{static create(e,t){return new x4(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:Zv(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?SMe.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=L4.create(this.key,this.valueKey)),this.negated}}class L4{static create(e,t){return new L4(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=x4.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class k4{static create(e,t,i=null){if(typeof t=="boolean")return t?Gv.create(e,i):qv.create(e,i);const s=Ks.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Po.INSTANCE:rr.INSTANCE:new k4(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:Zv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Ks.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Po.INSTANCE:rr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=L1.create(this.key,this.value,this)),this.negated}}class Gv{static create(e,t=null){const i=Ks.get(e);return typeof i=="boolean"?i?Po.INSTANCE:rr.INSTANCE:new Gv(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:Ihe(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Ks.get(this.key);return typeof e=="boolean"?e?Po.INSTANCE:rr.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=qv.create(this.key,this)),this.negated}}function N4(n,e){if(typeof n=="string"){const t=parseFloat(n);isNaN(t)||(n=t)}return typeof n=="string"||typeof n=="number"?e(n):Po.INSTANCE}class I4{static create(e,t,i=null){return N4(t,s=>new I4(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:Zv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=T4.create(this.key,this.value,this)),this.negated}}class E4{static create(e,t,i=null){return N4(t,s=>new E4(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:Zv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=D4.create(this.key,this.value,this)),this.negated}}class D4{static create(e,t,i=null){return N4(t,s=>new D4(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:Zv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=E4.create(this.key,this.value,this)),this.negated}}class T4{static create(e,t,i=null){return N4(t,s=>new T4(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:Zv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=I4.create(this.key,this.value,this)),this.negated}}class Tk{static create(e,t){return new Tk(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=RK.create(this)),this.negated}}class RK{static create(e){return new RK(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function Nhe(n){let e=null;for(let t=0,i=n.length;t<i;t++){const s=n[t].substituteConstants();if(n[t]!==s&&e===null){e=[];for(let o=0;o<t;o++)e[o]=n[o]}e!==null&&(e[t]=s)}return e===null?n:e}class S_{static create(e,t,i){return S_._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const s=Px(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Nhe(this.expr);return e===this.expr?this:S_.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const s=[];let o=!1;for(const r of e)if(r){if(r.type===1){o=!0;continue}if(r.type===0)return Po.INSTANCE;if(r.type===6){s.push(...r.expr);continue}s.push(r)}if(s.length===0&&o)return rr.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(Px);for(let r=1;r<s.length;r++)s[r-1].equals(s[r])&&(s.splice(r,1),r--);if(s.length===1)return s[0];for(;s.length>1;){const r=s[s.length-1];if(r.type!==9)break;s.pop();const a=s.pop(),l=s.length===0,c=Nh.create(r.expr.map(d=>S_.create([d,a],null,i)),null,l);c&&(s.push(c),s.sort(Px))}if(s.length===1)return s[0];if(i){for(let r=0;r<s.length;r++)for(let a=r+1;a<s.length;a++)if(s[r].negate().equals(s[a]))return Po.INSTANCE;if(s.length===1)return s[0]}return new S_(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Nh.create(e,this,!0)}return this.negated}}class Nh{static create(e,t,i){return Nh._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const s=Px(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Nhe(this.expr);return e===this.expr?this:Nh.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let s=[],o=!1;if(e){for(let r=0,a=e.length;r<a;r++){const l=e[r];if(l){if(l.type===0){o=!0;continue}if(l.type===1)return rr.INSTANCE;if(l.type===9){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&o)return Po.INSTANCE;s.sort(Px)}if(s.length!==0){if(s.length===1)return s[0];for(let r=1;r<s.length;r++)s[r-1].equals(s[r])&&(s.splice(r,1),r--);if(s.length===1)return s[0];if(i){for(let r=0;r<s.length;r++)for(let a=r+1;a<s.length;a++)if(s[r].negate().equals(s[a]))return rr.INSTANCE;if(s.length===1)return s[0]}return new Nh(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),s=[];for(const o of KQ(t))for(const r of KQ(i))s.push(S_.create([o,r],null,!1));e.unshift(Nh.create(s,null,!1))}this.negated=Nh.create(e,this,!0)}return this.negated}}const Aw=class Aw extends qv{static all(){return Aw._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?Aw._info.push({...i,key:e}):i!==!0&&Aw._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return L1.create(this.key,e)}};Aw._info=[];let we=Aw;const qe=kt("contextKeyService");function Ihe(n,e){return n<e?-1:n>e?1:0}function Zv(n,e,t,i){return n<t?-1:n>t?1:e<i?-1:e>i?1:0}function oW(n,e){if(n.type===0||e.type===1)return!0;if(n.type===9)return e.type===9?$Q(n.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(oW(n,t))return!0;return!1}if(n.type===6){if(e.type===6)return $Q(e.expr,n.expr);for(const t of n.expr)if(oW(t,e))return!0;return!1}return n.equals(e)}function $Q(n,e){let t=0,i=0;for(;t<n.length&&i<e.length;){const s=n[t].cmp(e[i]);if(s<0)return!1;s===0&&t++,i++}return t===n.length}function KQ(n){return n.type===9?n.expr:[n]}function C3(n,e){if(!n)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function R4(n,e="Unreachable"){throw new Error(e)}function qQ(n){n||et(new Zt("Soft Assertion Failed"))}function _v(n){if(!n()){debugger;n(),et(new Zt("Assertion Failed"))}}function MK(n,e){let t=0;for(;t<n.length-1;){const i=n[t],s=n[t+1];if(!e(i,s))return!1;t++}return!0}class PMe{constructor(){this.data=new Map}add(e,t){C3(ir(e)),C3(as(t)),C3(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Zi=new PMe;class PK{constructor(){this._coreKeybindings=new So,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Mr===1){if(e&&e.win)return e.win}else if(Mr===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=PK.bindToCurrentPlatform(e),i=new ne;if(t&&t.primary){const s=$8(t.primary,Mr);s&&i.add(this._registerDefaultKeybinding(s,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let s=0,o=t.secondary.length;s<o;s++){const r=t.secondary[s],a=$8(r,Mr);a&&i.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-s-1,e.when))}return i}registerCommandAndKeybindingRule(e){return ql(this.registerKeybindingRule(e),Mt.registerCommand(e))}_registerDefaultKeybinding(e,t,i,s,o,r){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:r,weight1:s,weight2:o,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,Pe(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(OMe)),this._cachedMergedKeybindings.slice(0)}}const Ao=new PK,AMe={EditorModes:"platform.keybindingsRegistry"};Zi.add(AMe.EditorModes,Ao);function OMe(n,e){if(n.weight1!==e.weight1)return n.weight1-e.weight1;if(n.command&&e.command){if(n.command<e.command)return-1;if(n.command>e.command)return 1}return n.weight2-e.weight2}var FMe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},GQ=function(n,e){return function(t,i){e(t,i,n)}},yT;function hy(n){return n.command!==void 0}function BMe(n){return n.submenu!==void 0}const F=class F{constructor(e){if(F._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);F._instances.set(e,this),this.id=e}};F._instances=new Map,F.CommandPalette=new F("CommandPalette"),F.DebugBreakpointsContext=new F("DebugBreakpointsContext"),F.DebugCallStackContext=new F("DebugCallStackContext"),F.DebugConsoleContext=new F("DebugConsoleContext"),F.DebugVariablesContext=new F("DebugVariablesContext"),F.NotebookVariablesContext=new F("NotebookVariablesContext"),F.DebugHoverContext=new F("DebugHoverContext"),F.DebugWatchContext=new F("DebugWatchContext"),F.DebugToolBar=new F("DebugToolBar"),F.DebugToolBarStop=new F("DebugToolBarStop"),F.DebugCallStackToolbar=new F("DebugCallStackToolbar"),F.DebugCreateConfiguration=new F("DebugCreateConfiguration"),F.EditorContext=new F("EditorContext"),F.SimpleEditorContext=new F("SimpleEditorContext"),F.EditorContent=new F("EditorContent"),F.EditorLineNumberContext=new F("EditorLineNumberContext"),F.EditorContextCopy=new F("EditorContextCopy"),F.EditorContextPeek=new F("EditorContextPeek"),F.EditorContextShare=new F("EditorContextShare"),F.EditorTitle=new F("EditorTitle"),F.EditorTitleRun=new F("EditorTitleRun"),F.EditorTitleContext=new F("EditorTitleContext"),F.EditorTitleContextShare=new F("EditorTitleContextShare"),F.EmptyEditorGroup=new F("EmptyEditorGroup"),F.EmptyEditorGroupContext=new F("EmptyEditorGroupContext"),F.EditorTabsBarContext=new F("EditorTabsBarContext"),F.EditorTabsBarShowTabsSubmenu=new F("EditorTabsBarShowTabsSubmenu"),F.EditorTabsBarShowTabsZenModeSubmenu=new F("EditorTabsBarShowTabsZenModeSubmenu"),F.EditorActionsPositionSubmenu=new F("EditorActionsPositionSubmenu"),F.ExplorerContext=new F("ExplorerContext"),F.ExplorerContextShare=new F("ExplorerContextShare"),F.ExtensionContext=new F("ExtensionContext"),F.GlobalActivity=new F("GlobalActivity"),F.CommandCenter=new F("CommandCenter"),F.CommandCenterCenter=new F("CommandCenterCenter"),F.LayoutControlMenuSubmenu=new F("LayoutControlMenuSubmenu"),F.LayoutControlMenu=new F("LayoutControlMenu"),F.MenubarMainMenu=new F("MenubarMainMenu"),F.MenubarAppearanceMenu=new F("MenubarAppearanceMenu"),F.MenubarDebugMenu=new F("MenubarDebugMenu"),F.MenubarEditMenu=new F("MenubarEditMenu"),F.MenubarCopy=new F("MenubarCopy"),F.MenubarFileMenu=new F("MenubarFileMenu"),F.MenubarGoMenu=new F("MenubarGoMenu"),F.MenubarHelpMenu=new F("MenubarHelpMenu"),F.MenubarLayoutMenu=new F("MenubarLayoutMenu"),F.MenubarNewBreakpointMenu=new F("MenubarNewBreakpointMenu"),F.PanelAlignmentMenu=new F("PanelAlignmentMenu"),F.PanelPositionMenu=new F("PanelPositionMenu"),F.ActivityBarPositionMenu=new F("ActivityBarPositionMenu"),F.MenubarPreferencesMenu=new F("MenubarPreferencesMenu"),F.MenubarRecentMenu=new F("MenubarRecentMenu"),F.MenubarSelectionMenu=new F("MenubarSelectionMenu"),F.MenubarShare=new F("MenubarShare"),F.MenubarSwitchEditorMenu=new F("MenubarSwitchEditorMenu"),F.MenubarSwitchGroupMenu=new F("MenubarSwitchGroupMenu"),F.MenubarTerminalMenu=new F("MenubarTerminalMenu"),F.MenubarViewMenu=new F("MenubarViewMenu"),F.MenubarHomeMenu=new F("MenubarHomeMenu"),F.OpenEditorsContext=new F("OpenEditorsContext"),F.OpenEditorsContextShare=new F("OpenEditorsContextShare"),F.ProblemsPanelContext=new F("ProblemsPanelContext"),F.SCMInputBox=new F("SCMInputBox"),F.SCMChangesSeparator=new F("SCMChangesSeparator"),F.SCMChangesContext=new F("SCMChangesContext"),F.SCMIncomingChanges=new F("SCMIncomingChanges"),F.SCMIncomingChangesContext=new F("SCMIncomingChangesContext"),F.SCMIncomingChangesSetting=new F("SCMIncomingChangesSetting"),F.SCMOutgoingChanges=new F("SCMOutgoingChanges"),F.SCMOutgoingChangesContext=new F("SCMOutgoingChangesContext"),F.SCMOutgoingChangesSetting=new F("SCMOutgoingChangesSetting"),F.SCMIncomingChangesAllChangesContext=new F("SCMIncomingChangesAllChangesContext"),F.SCMIncomingChangesHistoryItemContext=new F("SCMIncomingChangesHistoryItemContext"),F.SCMOutgoingChangesAllChangesContext=new F("SCMOutgoingChangesAllChangesContext"),F.SCMOutgoingChangesHistoryItemContext=new F("SCMOutgoingChangesHistoryItemContext"),F.SCMChangeContext=new F("SCMChangeContext"),F.SCMResourceContext=new F("SCMResourceContext"),F.SCMResourceContextShare=new F("SCMResourceContextShare"),F.SCMResourceFolderContext=new F("SCMResourceFolderContext"),F.SCMResourceGroupContext=new F("SCMResourceGroupContext"),F.SCMSourceControl=new F("SCMSourceControl"),F.SCMSourceControlInline=new F("SCMSourceControlInline"),F.SCMSourceControlTitle=new F("SCMSourceControlTitle"),F.SCMHistoryTitle=new F("SCMHistoryTitle"),F.SCMTitle=new F("SCMTitle"),F.SearchContext=new F("SearchContext"),F.SearchActionMenu=new F("SearchActionContext"),F.StatusBarWindowIndicatorMenu=new F("StatusBarWindowIndicatorMenu"),F.StatusBarRemoteIndicatorMenu=new F("StatusBarRemoteIndicatorMenu"),F.StickyScrollContext=new F("StickyScrollContext"),F.TestItem=new F("TestItem"),F.TestItemGutter=new F("TestItemGutter"),F.TestProfilesContext=new F("TestProfilesContext"),F.TestMessageContext=new F("TestMessageContext"),F.TestMessageContent=new F("TestMessageContent"),F.TestPeekElement=new F("TestPeekElement"),F.TestPeekTitle=new F("TestPeekTitle"),F.TestCallStack=new F("TestCallStack"),F.TouchBarContext=new F("TouchBarContext"),F.TitleBarContext=new F("TitleBarContext"),F.TitleBarTitleContext=new F("TitleBarTitleContext"),F.TunnelContext=new F("TunnelContext"),F.TunnelPrivacy=new F("TunnelPrivacy"),F.TunnelProtocol=new F("TunnelProtocol"),F.TunnelPortInline=new F("TunnelInline"),F.TunnelTitle=new F("TunnelTitle"),F.TunnelLocalAddressInline=new F("TunnelLocalAddressInline"),F.TunnelOriginInline=new F("TunnelOriginInline"),F.ViewItemContext=new F("ViewItemContext"),F.ViewContainerTitle=new F("ViewContainerTitle"),F.ViewContainerTitleContext=new F("ViewContainerTitleContext"),F.ViewTitle=new F("ViewTitle"),F.ViewTitleContext=new F("ViewTitleContext"),F.CommentEditorActions=new F("CommentEditorActions"),F.CommentThreadTitle=new F("CommentThreadTitle"),F.CommentThreadActions=new F("CommentThreadActions"),F.CommentThreadAdditionalActions=new F("CommentThreadAdditionalActions"),F.CommentThreadTitleContext=new F("CommentThreadTitleContext"),F.CommentThreadCommentContext=new F("CommentThreadCommentContext"),F.CommentTitle=new F("CommentTitle"),F.CommentActions=new F("CommentActions"),F.CommentsViewThreadActions=new F("CommentsViewThreadActions"),F.InteractiveToolbar=new F("InteractiveToolbar"),F.InteractiveCellTitle=new F("InteractiveCellTitle"),F.InteractiveCellDelete=new F("InteractiveCellDelete"),F.InteractiveCellExecute=new F("InteractiveCellExecute"),F.InteractiveInputExecute=new F("InteractiveInputExecute"),F.InteractiveInputConfig=new F("InteractiveInputConfig"),F.ReplInputExecute=new F("ReplInputExecute"),F.IssueReporter=new F("IssueReporter"),F.NotebookToolbar=new F("NotebookToolbar"),F.NotebookStickyScrollContext=new F("NotebookStickyScrollContext"),F.NotebookCellTitle=new F("NotebookCellTitle"),F.NotebookCellDelete=new F("NotebookCellDelete"),F.NotebookCellInsert=new F("NotebookCellInsert"),F.NotebookCellBetween=new F("NotebookCellBetween"),F.NotebookCellListTop=new F("NotebookCellTop"),F.NotebookCellExecute=new F("NotebookCellExecute"),F.NotebookCellExecuteGoTo=new F("NotebookCellExecuteGoTo"),F.NotebookCellExecutePrimary=new F("NotebookCellExecutePrimary"),F.NotebookDiffCellInputTitle=new F("NotebookDiffCellInputTitle"),F.NotebookDiffCellMetadataTitle=new F("NotebookDiffCellMetadataTitle"),F.NotebookDiffCellOutputsTitle=new F("NotebookDiffCellOutputsTitle"),F.NotebookOutputToolbar=new F("NotebookOutputToolbar"),F.NotebookOutlineFilter=new F("NotebookOutlineFilter"),F.NotebookOutlineActionMenu=new F("NotebookOutlineActionMenu"),F.NotebookEditorLayoutConfigure=new F("NotebookEditorLayoutConfigure"),F.NotebookKernelSource=new F("NotebookKernelSource"),F.BulkEditTitle=new F("BulkEditTitle"),F.BulkEditContext=new F("BulkEditContext"),F.TimelineItemContext=new F("TimelineItemContext"),F.TimelineTitle=new F("TimelineTitle"),F.TimelineTitleContext=new F("TimelineTitleContext"),F.TimelineFilterSubMenu=new F("TimelineFilterSubMenu"),F.AccountsContext=new F("AccountsContext"),F.SidebarTitle=new F("SidebarTitle"),F.PanelTitle=new F("PanelTitle"),F.AuxiliaryBarTitle=new F("AuxiliaryBarTitle"),F.AuxiliaryBarHeader=new F("AuxiliaryBarHeader"),F.TerminalInstanceContext=new F("TerminalInstanceContext"),F.TerminalEditorInstanceContext=new F("TerminalEditorInstanceContext"),F.TerminalNewDropdownContext=new F("TerminalNewDropdownContext"),F.TerminalTabContext=new F("TerminalTabContext"),F.TerminalTabEmptyAreaContext=new F("TerminalTabEmptyAreaContext"),F.TerminalStickyScrollContext=new F("TerminalStickyScrollContext"),F.WebviewContext=new F("WebviewContext"),F.InlineCompletionsActions=new F("InlineCompletionsActions"),F.InlineEditsActions=new F("InlineEditsActions"),F.InlineEditActions=new F("InlineEditActions"),F.NewFile=new F("NewFile"),F.MergeInput1Toolbar=new F("MergeToolbar1Toolbar"),F.MergeInput2Toolbar=new F("MergeToolbar2Toolbar"),F.MergeBaseToolbar=new F("MergeBaseToolbar"),F.MergeInputResultToolbar=new F("MergeToolbarResultToolbar"),F.InlineSuggestionToolbar=new F("InlineSuggestionToolbar"),F.InlineEditToolbar=new F("InlineEditToolbar"),F.ChatContext=new F("ChatContext"),F.ChatCodeBlock=new F("ChatCodeblock"),F.ChatCompareBlock=new F("ChatCompareBlock"),F.ChatMessageTitle=new F("ChatMessageTitle"),F.ChatExecute=new F("ChatExecute"),F.ChatExecuteSecondary=new F("ChatExecuteSecondary"),F.ChatInputSide=new F("ChatInputSide"),F.AccessibleView=new F("AccessibleView"),F.MultiDiffEditorFileToolbar=new F("MultiDiffEditorFileToolbar"),F.DiffEditorHunkToolbar=new F("DiffEditorHunkToolbar"),F.DiffEditorSelectionToolbar=new F("DiffEditorSelectionToolbar");let Ne=F;const Oa=kt("menuService"),bL=class bL{static for(e){let t=this._all.get(e);return t||(t=new bL(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof bL&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};bL._all=new Map;let Jp=bL;const ls=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new JTe({merge:Jp.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(n){return this._commands.set(n.id,n),this._onDidChangeMenu.fire(Jp.for(Ne.CommandPalette)),Pe(()=>{this._commands.delete(n.id)&&this._onDidChangeMenu.fire(Jp.for(Ne.CommandPalette))})}getCommand(n){return this._commands.get(n)}getCommands(){const n=new Map;return this._commands.forEach((e,t)=>n.set(t,e)),n}appendMenuItem(n,e){let t=this._menuItems.get(n);t||(t=new So,this._menuItems.set(n,t));const i=t.push(e);return this._onDidChangeMenu.fire(Jp.for(n)),Pe(()=>{i(),this._onDidChangeMenu.fire(Jp.for(n))})}appendMenuItems(n){const e=new ne;for(const{id:t,item:i}of n)e.add(this.appendMenuItem(t,i));return e}getMenuItems(n){let e;return this._menuItems.has(n)?e=[...this._menuItems.get(n)]:e=[],n===Ne.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(n){const e=new Set;for(const t of n)hy(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||n.push({command:t})})}};class fy extends SC{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let Fr=yT=class{static label(e,t){return t!=null&&t.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,i,s,o,r,a){var c;this.hideActions=s,this.menuKeybinding=o,this._commandService=a,this.id=e.id,this.label=yT.label(e,i),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:(c=e.tooltip)==null?void 0:c.value)??"",this.enabled=!e.precondition||r.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){const d=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=r.contextMatchesRules(d.condition),this.checked&&d.tooltip&&(this.tooltip=typeof d.tooltip=="string"?d.tooltip:d.tooltip.value),this.checked&&Ke.isThemeIcon(d.icon)&&(l=d.icon),this.checked&&d.title&&(this.label=typeof d.title=="string"?d.title:d.title.value)}l||(l=Ke.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new yT(t,void 0,i,s,void 0,r,a):void 0,this._options=i,this.class=l&&Ke.asClassName(l)}run(...e){var i,s;let t=[];return(i=this._options)!=null&&i.arg&&(t=[...t,this._options.arg]),(s=this._options)!=null&&s.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};Fr=yT=FMe([GQ(5,qe),GQ(6,Ci)],Fr);class Bo{constructor(e){this.desc=e}}function vi(n){const e=[],t=new n,{f1:i,menu:s,keybinding:o,...r}=t.desc;if(Mt.getCommand(r.id))throw new Error(`Cannot register two commands with the same id: ${r.id}`);if(e.push(Mt.registerCommand({id:r.id,handler:(a,...l)=>t.run(a,...l),metadata:r.metadata})),Array.isArray(s))for(const a of s)e.push(ls.appendMenuItem(a.id,{command:{...r,precondition:a.precondition===null?void 0:r.precondition},...a}));else s&&e.push(ls.appendMenuItem(s.id,{command:{...r,precondition:s.precondition===null?void 0:r.precondition},...s}));if(i&&(e.push(ls.appendMenuItem(Ne.CommandPalette,{command:r,when:r.precondition})),e.push(ls.addCommand(r))),Array.isArray(o))for(const a of o)e.push(Ao.registerKeybindingRule({...a,id:r.id,when:r.precondition?se.and(r.precondition,a.when):a.when}));else o&&e.push(Ao.registerKeybindingRule({...o,id:r.id,when:r.precondition?se.and(r.precondition,o.when):o.when}));return{dispose(){gi(e)}}}const Zs=kt("telemetryService"),Os=kt("logService");var Qo;(function(n){n[n.Off=0]="Off",n[n.Trace=1]="Trace",n[n.Debug=2]="Debug",n[n.Info=3]="Info",n[n.Warning=4]="Warning",n[n.Error=5]="Error"})(Qo||(Qo={}));const Ehe=Qo.Info;class Dhe extends G{constructor(){super(...arguments),this.level=Ehe,this._onDidChangeLogLevel=this._register(new $),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==Qo.Off&&this.level<=e}}class WMe extends Dhe{constructor(e=Ehe,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(Qo.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(Qo.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(Qo.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(Qo.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(Qo.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class HMe extends Dhe{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}function VMe(n){switch(n){case Qo.Trace:return"trace";case Qo.Debug:return"debug";case Qo.Info:return"info";case Qo.Warning:return"warn";case Qo.Error:return"error";case Qo.Off:return"off"}}new we("logLevel",VMe(Qo.Info));class M4{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=se.and(i,this.precondition):i=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Ao.registerKeybindingRule(s)}}Mt.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){ls.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class k1 extends M4{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,s){return this._implementations.push({priority:e,name:t,implementation:i,when:s}),this._implementations.sort((o,r)=>r.priority-o.priority),{dispose:()=>{for(let o=0;o<this._implementations.length;o++)if(this._implementations[o].implementation===i){this._implementations.splice(o,1);return}}}}runCommand(e,t){const i=e.get(Os),s=e.get(qe);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const o of this._implementations){if(o.when){const a=s.getContext(Ms());if(!o.when.evaluate(a))continue}const r=o.implementation(e,t);if(r)return i.trace(`Command '${this.id}' was handled by '${o.name}'.`),typeof r=="boolean"?void 0:r}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class The extends M4{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Hn extends M4{static bindToContribution(e){return class extends Hn{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,s,o){const r=e(s);r&&this._callback(r,o)}}}static runEditorCommand(e,t,i,s){const o=e.get(Ut),r=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(r)return r.invokeWithinContext(a=>{if(a.get(qe).contextMatchesRules(i??void 0))return s(a,r,t)})}runCommand(e,t){return Hn.runEditorCommand(e,t,this.precondition,(i,s,o)=>this.runEditorCommand(i,s,o))}}class Ce extends Hn{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function i(s){return s.menuId||(s.menuId=Ne.EditorContext),s.title||(s.title=e.label),s.when=se.and(e.precondition,s.when),s}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(i)):e.contextMenuOpts&&t.push(i(e.contextMenuOpts)),e.menuOpts=t,e}constructor(e){super(Ce.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(Zs).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class Rhe extends Ce{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((i,s)=>s[0]-i[0]),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i][1]===t){this._implementations.splice(i,1);return}}}}run(e,t,i){for(const s of this._implementations){const o=s[1](e,t,i);if(o)return typeof o=="boolean"?void 0:o}}}class pd extends Bo{run(e,...t){const i=e.get(Ut),s=i.getFocusedCodeEditor()||i.getActiveCodeEditor();if(s)return s.invokeWithinContext(o=>{var c;const r=o.get(qe),a=o.get(Os);if(!r.contextMatchesRules(this.desc.precondition??void 0)){a.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,(c=this.desc.precondition)==null?void 0:c.serialize());return}return this.runEditorCommand(o,s,...t)})}}function ur(n,e){Mt.registerCommand(n,function(t,...i){const s=t.get(Ae),[o,r]=i;zt(Be.isUri(o)),zt(U.isIPosition(r));const a=t.get(Ei).getModel(o);if(a){const l=U.lift(r);return s.invokeFunction(e,a,l,...i.slice(2))}return t.get(dr).createModelReference(o).then(l=>new Promise((c,d)=>{try{const u=s.invokeFunction(e,l.object.textEditorModel,U.lift(r),i.slice(2));c(u)}catch(u){d(u)}}).finally(()=>{l.dispose()}))})}function _e(n){return Ja.INSTANCE.registerEditorCommand(n),n}function de(n){const e=new n;return Ja.INSTANCE.registerEditorAction(e),e}function Mhe(n){return Ja.INSTANCE.registerEditorAction(n),n}function jMe(n){Ja.INSTANCE.registerEditorAction(n)}function Ot(n,e,t){Ja.INSTANCE.registerEditorContribution(n,e,t)}var K_;(function(n){function e(r){return Ja.INSTANCE.getEditorCommand(r)}n.getEditorCommand=e;function t(){return Ja.INSTANCE.getEditorActions()}n.getEditorActions=t;function i(){return Ja.INSTANCE.getEditorContributions()}n.getEditorContributions=i;function s(r){return Ja.INSTANCE.getEditorContributions().filter(a=>r.indexOf(a.id)>=0)}n.getSomeEditorContributions=s;function o(){return Ja.INSTANCE.getDiffEditorContributions()}n.getDiffEditorContributions=o})(K_||(K_={}));const zMe={EditorCommonContributions:"editor.contributions"},nA=class nA{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};nA.INSTANCE=new nA;let Ja=nA;Zi.add(zMe.EditorCommonContributions,Ja.INSTANCE);function LI(n){return n.register(),n}const Phe=LI(new k1({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:Ne.MenubarEditMenu,group:"1_do",title:_({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Ne.CommandPalette,group:"",title:_("undo","Undo"),order:1}]}));LI(new The(Phe,{id:"default:undo",precondition:void 0}));const Ahe=LI(new k1({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:Ne.MenubarEditMenu,group:"1_do",title:_({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Ne.CommandPalette,group:"",title:_("redo","Redo"),order:1}]}));LI(new The(Ahe,{id:"default:redo",precondition:void 0}));const UMe=LI(new k1({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:Ne.MenubarSelectionMenu,group:"1_basic",title:_({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Ne.CommandPalette,group:"",title:_("selectAll","Select All"),order:1}]})),$Me="modulepreload",KMe=function(n){return"/"+n},ZQ={},We=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=KMe(l),l in ZQ)return;ZQ[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":$Me,c||(u.as="script"),u.crossOrigin="",u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),c)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return s.then(r=>{for(const a of r||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},YQ="default",qMe="$initialize";let XQ=!1;function rW(n){Kv&&(XQ||(XQ=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(n.message))}class GMe{constructor(e,t,i,s,o){this.vsWorker=e,this.req=t,this.channel=i,this.method=s,this.args=o,this.type=0}}class QQ{constructor(e,t,i,s){this.vsWorker=e,this.seq=t,this.res=i,this.err=s,this.type=1}}class ZMe{constructor(e,t,i,s,o){this.vsWorker=e,this.req=t,this.channel=i,this.eventName=s,this.arg=o,this.type=2}}class YMe{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class XMe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class QMe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,i){const s=String(++this._lastSentReq);return new Promise((o,r)=>{this._pendingReplies[s]={resolve:o,reject:r},this._send(new GMe(this._workerId,s,e,t,i))})}listen(e,t,i){let s=null;const o=new $({onWillAddFirstListener:()=>{s=String(++this._lastSentReq),this._pendingEmitters.set(s,o),this._send(new ZMe(this._workerId,s,e,t,i))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(s),this._send(new XMe(this._workerId,s)),s=null}});return o.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){const i={get:(s,o)=>(typeof o=="string"&&!s[o]&&(Fhe(o)?s[o]=r=>this.listen(e,o,r):Ohe(o)?s[o]=this.listen(e,o,void 0):o.charCodeAt(0)===36&&(s[o]=async(...r)=>(await(t==null?void 0:t()),this.sendMessage(e,o,r)))),s[o])};return new Proxy(Object.create(null),i)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(s=>{this._send(new QQ(this._workerId,t,s,void 0))},s=>{s.detail instanceof Error&&(s.detail=SQ(s.detail)),this._send(new QQ(this._workerId,t,void 0,SQ(s)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.channel,e.eventName,e.arg)(s=>{this._send(new YMe(this._workerId,t,s))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class JMe extends G{constructor(e,t){super(),this._localChannels=new Map,this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},o=>{this._protocol.handleMessage(o)},o=>{et(o)})),this._protocol=new QMe({sendMessage:(o,r)=>{this._worker.postMessage(o,r)},handleMessage:(o,r,a)=>this._handleMessage(o,r,a),handleEvent:(o,r,a)=>this._handleEvent(o,r,a)}),this._protocol.setWorkerId(this._worker.getId());let i=null;const s=globalThis.require;typeof s<"u"&&typeof s.getConfig=="function"?i=s.getConfig():typeof globalThis.requirejs<"u"&&(i=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(YQ,qMe,[this._worker.getId(),JSON.parse(JSON.stringify(i)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(YQ,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(o=>{this._onError("Worker failed to load "+t.amdModuleId,o)})}_handleMessage(e,t,i){const s=this._localChannels.get(e);if(!s)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof s[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(s[t].apply(s,i))}catch(o){return Promise.reject(o)}}_handleEvent(e,t,i){const s=this._localChannels.get(e);if(!s)throw new Error(`Missing channel ${e} on main thread`);if(Fhe(t)){const o=s[t].call(s,i);if(typeof o!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return o}if(Ohe(t)){const o=s[t];if(typeof o!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return o}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}_onError(e,t){console.error(e),console.info(t)}}function Ohe(n){return n[0]==="o"&&n[1]==="n"&&Yd(n.charCodeAt(2))}function Fhe(n){return/^onDynamic/.test(n)&&Yd(n.charCodeAt(9))}function Ef(n,e){var i;const t=globalThis.MonacoEnvironment;if(t!=null&&t.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(n,e)}catch(s){et(s);return}try{return(i=globalThis.trustedTypes)==null?void 0:i.createPolicy(n,e)}catch(s){et(s);return}}let dw;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?dw=globalThis.workerttPolicy:dw=Ef("defaultWorkerFactory",{createScriptURL:n=>n});function ePe(n,e){const t=globalThis.MonacoEnvironment;if(t){if(typeof t.getWorker=="function")return t.getWorker("workerMain.js",e);if(typeof t.getWorkerUrl=="function"){const i=t.getWorkerUrl("workerMain.js",e);return new Worker(dw?dw.createScriptURL(i):i,{name:e,type:"module"})}}if(n){const i=tPe(e,n.toString(!0)),s=new Worker(dw?dw.createScriptURL(i):i,{name:e,type:"module"});return iPe(s)}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function tPe(n,e,t){if(!(/^((http:)|(https:)|(file:)|(vscode-file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){const o=e.lastIndexOf("?"),r=e.lastIndexOf("#",o),a=o>0?new URLSearchParams(e.substring(o+1,~r?r:void 0)):new URLSearchParams;Q8.addSearchParam(a,!0,!0),a.toString()?e=`${e}?${a.toString()}#${n}`:e=`${e}#${n}`}const s=new Blob([Yl([`/*${n}*/`,void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(_ue())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(oK())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`await import(ttPolicy?.createScriptURL('${e}') ?? '${e}');`,"globalThis.postMessage({ type: 'vscode-worker-ready' });",`/*${n}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(s)}function iPe(n){return new Promise((e,t)=>{n.onmessage=function(i){i.data.type==="vscode-worker-ready"&&(n.onmessage=null,e(n))},n.onerror=t})}function nPe(n){return typeof n.then=="function"}class sPe extends G{constructor(e,t,i,s,o,r){super(),this.id=i,this.label=s;const a=ePe(e,s);nPe(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(t,[]),this.worker.then(l=>{l.onmessage=function(c){o(c.data)},l.onmessageerror=r,typeof l.addEventListener=="function"&&l.addEventListener("error",r)}),this._register(Pe(()=>{var l;(l=this.worker)==null||l.then(c=>{c.onmessage=null,c.onmessageerror=null,c.removeEventListener("error",r),c.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){var i;(i=this.worker)==null||i.then(s=>{try{s.postMessage(e,t)}catch(o){et(o),et(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:o}))}})}}class oPe{constructor(e,t){this.amdModuleId=e,this.label=t,this.esmModuleLocation=b4.asBrowserUri(`${e}.esm.js`)}}const sA=class sA{constructor(){this._webWorkerFailedBeforeError=!1}create(e,t,i){const s=++sA.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new sPe(e.esmModuleLocation,e.amdModuleId,s,e.label||"anonymous"+s,t,o=>{rW(o),this._webWorkerFailedBeforeError=o,i(o)})}};sA.LAST_WORKER_ID=0;let aW=sA;function rPe(n,e){const t=typeof n=="string"?new oPe(n,e):n;return new JMe(new aW,t)}var Dn;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(Dn||(Dn={}));class S3{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const i=e.findTokenIndexAtOffset(t-2),s=e.getStandardTokenType(i);return this.isOK(s)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const s=String.fromCharCode(i);if(!this.open.includes(s)&&!this.close.includes(s))return s}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class aPe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)_S(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),_S(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),_S(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),_S(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&_S(this.autoClosingPairsCloseSingleChar,t.close,t)}}function _S(n,e,t){n.has(e)?n.get(e).push(t):n.set(e,[t])}const Ow=class Ow{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new S3(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new S3({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new S3({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Ow.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Ow.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};Ow.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`,Ow.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;let lW=Ow;function x_(n,e){const t=n.getCount(),i=n.findTokenIndexAtOffset(e),s=n.getLanguageId(i);let o=i;for(;o+1<t&&n.getLanguageId(o+1)===s;)o++;let r=i;for(;r>0&&n.getLanguageId(r-1)===s;)r--;return new lPe(n,s,r,o+1,n.getStartOffset(r),n.getEndOffset(o))}class lPe{constructor(e,t,i,s,o,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=s,this.firstCharOffset=o,this._lastCharOffset=r,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function Rd(n){return(n&3)!==0}const JQ=typeof Buffer<"u";let x3;class P4{static wrap(e){return JQ&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new P4(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return JQ?this.buffer.toString():(x3||(x3=new TextDecoder),x3.decode(this.buffer))}}function cPe(n,e){return n[e+0]<<0>>>0|n[e+1]<<8>>>0}function dPe(n,e,t){n[t+0]=e&255,e=e>>>8,n[t+1]=e&255}function xc(n,e){return n[e]*2**24+n[e+1]*2**16+n[e+2]*2**8+n[e+3]}function Lc(n,e,t){n[t+3]=e,e=e>>>8,n[t+2]=e,e=e>>>8,n[t+1]=e,e=e>>>8,n[t]=e}function eJ(n,e){return n[e]}function tJ(n,e,t){n[t]=e}let L3;function Bhe(){return L3||(L3=new TextDecoder("UTF-16LE")),L3}let k3;function uPe(){return k3||(k3=new TextDecoder("UTF-16BE")),k3}let N3;function Whe(){return N3||(N3=Sue()?Bhe():uPe()),N3}function hPe(n,e,t){const i=new Uint16Array(n.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?fPe(n,e,t):Bhe().decode(i)}function fPe(n,e,t){const i=[];let s=0;for(let o=0;o<t;o++){const r=cPe(n,e);e+=2,i[s++]=String.fromCharCode(r)}return i.join("")}class N1{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Whe().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||qn(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class m2{constructor(e,t,i,s,o,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=s,this.forwardRegex=o,this.reversedRegex=r,this._openSet=m2._toSet(this.open),this._closeSet=m2._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function gPe(n){const e=n.length;n=n.map(r=>[r[0].toLowerCase(),r[1].toLowerCase()]);const t=[];for(let r=0;r<e;r++)t[r]=r;const i=(r,a)=>{const[l,c]=r,[d,u]=a;return l===d||l===u||c===d||c===u},s=(r,a)=>{const l=Math.min(r,a),c=Math.max(r,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)};for(let r=0;r<e;r++){const a=n[r];for(let l=r+1;l<e;l++){const c=n[l];i(a,c)&&s(t[r],t[l])}}const o=[];for(let r=0;r<e;r++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===r){const[d,u]=n[c];a.push(d),l.push(u)}a.length>0&&o.push({open:a,close:l})}return o}class mPe{constructor(e,t){this._richEditBracketsBrand=void 0;const i=gPe(t);this.brackets=i.map((s,o)=>new m2(e,o,s.open,s.close,pPe(s.open,s.close,i,o),_Pe(s.open,s.close,i,o))),this.forwardRegex=bPe(this.brackets),this.reversedRegex=vPe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const o of s.open)this.textIsBracket[o]=s,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(const o of s.close)this.textIsBracket[o]=s,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}}function Hhe(n,e,t,i){for(let s=0,o=e.length;s<o;s++){if(s===t)continue;const r=e[s];for(const a of r.open)a.indexOf(n)>=0&&i.push(a);for(const a of r.close)a.indexOf(n)>=0&&i.push(a)}}function Vhe(n,e){return n.length-e.length}function A4(n){if(n.length<=1)return n;const e=[],t=new Set;for(const i of n)t.has(i)||(e.push(i),t.add(i));return e}function pPe(n,e,t,i){let s=[];s=s.concat(n),s=s.concat(e);for(let o=0,r=s.length;o<r;o++)Hhe(s[o],t,i,s);return s=A4(s),s.sort(Vhe),s.reverse(),kI(s)}function _Pe(n,e,t,i){let s=[];s=s.concat(n),s=s.concat(e);for(let o=0,r=s.length;o<r;o++)Hhe(s[o],t,i,s);return s=A4(s),s.sort(Vhe),s.reverse(),kI(s.map(AK))}function bPe(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=A4(e),kI(e)}function vPe(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=A4(e),kI(e.map(AK))}function wPe(n){const e=/^[\w ]+$/.test(n);return n=Da(n),e?`\\b${n}\\b`:n}function kI(n,e){const t=`(${n.map(wPe).join(")|(")})`;return que(t,!0,e)}const AK=function(){function n(i){const s=new Uint16Array(i.length);let o=0;for(let r=i.length-1;r>=0;r--)s[o++]=i.charCodeAt(r);return Whe().decode(s)}let e=null,t=null;return function(s){return e!==s&&(e=s,t=n(e)),t}}();class kl{static _findPrevBracketInText(e,t,i,s){const o=i.match(e);if(!o)return null;const r=i.length-(o.index||0),a=o[0].length,l=s+r;return new D(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,s,o){const a=AK(i).substring(i.length-o,i.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,i,s){const o=i.match(e);if(!o)return null;const r=o.index||0,a=o[0].length;if(a===0)return null;const l=s+r;return new D(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,s,o){const r=i.substring(s,o);return this.findNextBracketInText(e,t,r,s)}}class yPe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const s=i.charAt(i.length-1);e.push(s)}return ff(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=t.findTokenIndexAtOffset(i-1);if(Rd(t.getStandardTokenType(s)))return null;const o=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,i-1)+e,a=kl.findPrevBracketInRange(o,1,r,0,r.length);if(!a)return null;const l=r.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}function $E(n){return n.global&&(n.lastIndex=0),!0}class CPe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&$E(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&$E(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&$E(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&$E(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class uw{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=uw._createOpenBracketRegExp(t[0]),s=uw._createCloseBracketRegExp(t[1]);i&&s&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:s})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,s){if(e>=3)for(let o=0,r=this._regExpRules.length;o<r;o++){const a=this._regExpRules[o];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:s},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&s.length>0)for(let o=0,r=this._brackets.length;o<r;o++){const a=this._brackets[o];if(a.openRegExp.test(i)&&a.closeRegExp.test(s))return{indentAction:Dn.IndentOutdent}}if(e>=2&&i.length>0){for(let o=0,r=this._brackets.length;o<r;o++)if(this._brackets[o].openRegExp.test(i))return{indentAction:Dn.Indent}}return null}static _createOpenBracketRegExp(e){let t=Da(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",uw._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Da(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,uw._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return et(t),null}}}const _t=kt("configurationService");function cW(n,e){const t=Object.create(null);for(const i in n)jhe(t,i,n[i],e);return t}function jhe(n,e,t,i){const s=e.split("."),o=s.pop();let r=n;for(let a=0;a<s.length;a++){const l=s[a];let c=r[l];switch(typeof c){case"undefined":c=r[l]=Object.create(null);break;case"object":if(c===null){i(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}r=c}if(typeof r=="object"&&r!==null)try{r[o]=t}catch{i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(r)}`)}else i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(r)}`)}function SPe(n,e){const t=e.split(".");zhe(n,t)}function zhe(n,e){const t=e.shift();if(e.length===0){delete n[t];return}if(Object.keys(n).indexOf(t)!==-1){const i=n[t];typeof i=="object"&&!Array.isArray(i)&&(zhe(i,e),Object.keys(i).length===0&&delete n[t])}}function iJ(n,e,t){function i(r,a){let l=r;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const s=e.split("."),o=i(n,s);return typeof o>"u"?t:o}function xPe(n){return n.replace(/[\[\]]/g,"")}const ji=kt("languageService");class Xd{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const Uhe=[];function Tt(n,e,t){e instanceof Xd||(e=new Xd(e,[],!!t)),Uhe.push([n,e])}function nJ(){return Uhe}const dn=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),O4={JSONContribution:"base.contributions.json"};function LPe(n){return n.length>0&&n.charAt(n.length-1)==="#"?n.substring(0,n.length-1):n}class kPe{constructor(){this._onDidChangeSchema=new $,this.schemasById={}}registerSchema(e,t){this.schemasById[LPe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const NPe=new kPe;Zi.add(O4.JSONContribution,NPe);const rc={Configuration:"base.contributions.configuration"},bS="vscode://schemas/settings/resourceLanguage",sJ=Zi.as(O4.JSONContribution);class IPe{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new $,this._onDidUpdateConfiguration=new $,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:_("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},sJ.registerSchema(bS,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),sJ.registerSchema(bS,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const i=[];for(const{overrides:s,source:o}of e)for(const r in s){t.add(r);const a=this.configurationDefaultsOverrides.get(r)??this.configurationDefaultsOverrides.set(r,{configurationDefaultOverrides:[]}).get(r),l=s[r];if(a.configurationDefaultOverrides.push({value:l,source:o}),Gm.test(r)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(r,l,o,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(r,c,o),i.push(...p2(r))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(r,l,o,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const d=this.configurationProperties[r];d&&(this.updatePropertyDefaultValue(r,d),this.updateSchema(r,d))}}this.doRegisterOverrideIdentifiers(i)}updateDefaultOverrideProperty(e,t,i){const s={type:"object",default:t.value,description:_("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",xPe(e)),$ref:bS,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.configurationProperties[e]=s,this.defaultLanguageConfigurationOverridesNode.properties[e]=s}mergeDefaultConfigurationsForOverrideIdentifier(e,t,i,s){const o=(s==null?void 0:s.value)||{},r=(s==null?void 0:s.source)??new Map;if(!(r instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(as(l)&&(co(o[a])||as(o[a]))){if(o[a]={...o[a]??{},...l},i)for(const d in l)r.set(`${a}.${d}`,i)}else o[a]=l,i?r.set(a,i):r.delete(a)}return{value:o,source:r}}mergeDefaultConfigurationsForConfigurationProperty(e,t,i,s){const o=this.configurationProperties[e],r=(s==null?void 0:s.value)??(o==null?void 0:o.defaultDefaultValue);let a=i;if(as(t)&&(o!==void 0&&o.type==="object"||o===void 0&&(co(r)||as(r)))){if(a=(s==null?void 0:s.source)??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&a.set(`${e}.${c}`,i);t={...as(r)?r:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(s=>{this.validateAndRegisterProperties(s,t,s.extensionInfo,s.restrictedProperties,void 0,i),this.configurationContributors.push(s),this.registerJSONConfiguration(s)})}validateAndRegisterProperties(e,t=!0,i,s,o=3,r){var c;o=ga(e.scope)?o:e.scope;const a=e.properties;if(a)for(const d in a){const u=a[d];if(t&&TPe(d,u)){delete a[d];continue}if(u.source=i,u.defaultDefaultValue=a[d].default,this.updatePropertyDefaultValue(d,u),Gm.test(d)?u.scope=void 0:(u.scope=ga(u.scope)?o:u.scope,u.restricted=ga(u.restricted)?!!(s!=null&&s.includes(d)):u.restricted),a[d].hasOwnProperty("included")&&!a[d].included){this.excludedConfigurationProperties[d]=a[d],delete a[d];continue}else this.configurationProperties[d]=a[d],(c=a[d].policy)!=null&&c.name&&this.policyConfigurations.set(a[d].policy.name,d);!a[d].deprecationMessage&&a[d].markdownDeprecationMessage&&(a[d].deprecationMessage=a[d].markdownDeprecationMessage),r.add(d)}const l=e.allOf;if(l)for(const d of l)this.validateAndRegisterProperties(d,t,i,s,o,r)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=i=>{const s=i.properties;if(s)for(const r in s)this.updateSchema(r,s[r]);const o=i.allOf;o==null||o.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:_("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:_("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:bS};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){_("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),_("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){var r;const i=(r=this.configurationDefaultsOverrides.get(e))==null?void 0:r.configurationDefaultOverrideValue;let s,o;i&&(!t.disallowConfigurationDefault||!i.source)&&(s=i.value,o=i.source),co(s)&&(s=t.defaultDefaultValue,o=void 0),co(s)&&(s=DPe(t.type)),t.default=s,t.defaultValueSource=o}}const $he="\\[([^\\]]+)\\]",oJ=new RegExp($he,"g"),EPe=`^(${$he})+$`,Gm=new RegExp(EPe);function p2(n){const e=[];if(Gm.test(n)){let t=oJ.exec(n);for(;t!=null&&t.length;){const i=t[1].trim();i&&e.push(i),t=oJ.exec(n)}}return ff(e)}function DPe(n){switch(Array.isArray(n)?n[0]:n){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const CT=new IPe;Zi.add(rc.Configuration,CT);function TPe(n,e){var t,i,s,o;return n.trim()?Gm.test(n)?_("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",n):CT.getConfigurationProperties()[n]!==void 0?_("config.property.duplicate","Cannot register '{0}'. This property is already registered.",n):(t=e.policy)!=null&&t.name&&CT.getPolicyConfigurations().get((i=e.policy)==null?void 0:i.name)!==void 0?_("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",n,(s=e.policy)==null?void 0:s.name,CT.getPolicyConfigurations().get((o=e.policy)==null?void 0:o.name)):null:_("config.property.empty","Cannot register an empty property")}const RPe={ModesRegistry:"editor.modesRegistry"};class MPe{constructor(){this._onDidChangeLanguages=new $,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const xC=new MPe;Zi.add(RPe.ModesRegistry,xC);const Do="plaintext",PPe=".txt";xC.registerLanguage({id:Do,extensions:[PPe],aliases:[_("plainText.alias","Plain Text"),"text"],mimetypes:[dn.text]});Zi.as(rc.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class APe{constructor(e,t){this.languageId=e;const i=t.brackets?rJ(t.brackets):[],s=new IQ(a=>{const l=new Set;return{info:new OPe(this,a,l),closing:l}}),o=new IQ(a=>{const l=new Set,c=new Set;return{info:new FPe(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of i){const c=s.get(a),d=o.get(l);c.closing.add(d.info),d.opening.add(c.info)}const r=t.colorizedBracketPairs?rJ(t.colorizedBracketPairs):i.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of r){const c=s.get(a),d=o.get(l);c.closing.add(d.info),d.openingColorized.add(c.info),d.opening.add(c.info)}this._openingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...o.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return kI(t,e)}}function rJ(n){return n.filter(([e,t])=>e!==""&&t!=="")}class Khe{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class OPe extends Khe{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class FPe extends Khe{constructor(e,t,i,s){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=s,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var BPe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},aJ=function(n,e){return function(t,i){e(t,i,n)}};class I3{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const Yi=kt("languageConfigurationService");let dW=class extends G{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new jPe),this.onDidChangeEmitter=this._register(new $),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(uW));this._register(this.configurationService.onDidChangeConfiguration(s=>{const o=s.change.keys.some(a=>i.has(a)),r=s.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>a);if(o)this.configurations.clear(),this.onDidChangeEmitter.fire(new I3(void 0));else for(const a of r)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new I3(a)))})),this._register(this._registry.onDidChange(s=>{this.configurations.delete(s.languageId),this.onDidChangeEmitter.fire(new I3(s.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=WPe(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};dW=BPe([aJ(0,_t),aJ(1,ji)],dW);function WPe(n,e,t,i){let s=e.getLanguageConfiguration(n);if(!s){if(!i.isRegisteredLanguageId(n))return new gy(n,{});s=new gy(n,{})}const o=HPe(s.languageId,t),r=Ghe([s.underlyingConfig,o]);return new gy(s.languageId,r)}const uW={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function HPe(n,e){const t=e.getValue(uW.brackets,{overrideIdentifier:n}),i=e.getValue(uW.colorizedBracketPairs,{overrideIdentifier:n});return{brackets:lJ(t),colorizedBracketPairs:lJ(i)}}function lJ(n){if(Array.isArray(n))return n.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function qhe(n,e,t){const i=n.getLineContent(e);let s=fi(i);return s.length>t-1&&(s=s.substring(0,t-1)),s}class VPe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new cJ(e,t,++this._order);return this._entries.push(i),this._resolved=null,Pe(()=>{for(let s=0;s<this._entries.length;s++)if(this._entries[s]===i){this._entries.splice(s,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new gy(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(cJ.cmp),Ghe(this._entries.map(e=>e.configuration)))}}function Ghe(n){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of n)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class cJ{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class dJ{constructor(e){this.languageId=e}}class jPe extends G{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new $),this.onDidChange=this._onDidChange.event,this._register(this.register(Do,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let s=this._entries.get(e);s||(s=new VPe(e),this._entries.set(e,s));const o=s.register(t,i);return this._onDidChange.fire(new dJ(e)),Pe(()=>{o.dispose(),this._onDidChange.fire(new dJ(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}}class gy{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new uw(this.underlyingConfig):null,this.comments=gy._handleComments(this.underlyingConfig),this.characterPair=new lW(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||lK,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new CPe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new APe(e,this.underlyingConfig)}getWordDefinition(){return cK(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new mPe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new yPe(this.brackets)),this._electricCharacter}onEnter(e,t,i,s){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,s):null}getAutoClosingPairs(){return new aPe(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[s,o]=t.blockComment;i.blockCommentStartToken=s,i.blockCommentEndToken=o}return i}}Tt(Yi,dW,1);class Zf{constructor(e,t,i,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class uJ{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,s=e.length;i<s;i++)t[i]=e.charCodeAt(i);return t}}function zPe(n,e,t){return new nu(new uJ(n),new uJ(e)).ComputeDiff(t).changes}class v0{static Assert(e,t){if(!e)throw new Error(t)}}class w0{static Copy(e,t,i,s,o){for(let r=0;r<o;r++)i[s+r]=e[t+r]}static Copy2(e,t,i,s,o){for(let r=0;r<o;r++)i[s+r]=e[t+r]}}class hJ{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Zf(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class nu{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[s,o,r]=nu._getElements(e),[a,l,c]=nu._getElements(t);this._hasStrings=r&&c,this._originalStringElements=s,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(nu._isStringArray(t)){const i=new Int32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=kK(t[s],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=nu._getStrictElement(this._originalSequence,e),s=nu._getStrictElement(this._modifiedSequence,t);return i===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,s,o){const r=[!1];let a=this.ComputeDiffRecursive(e,t,i,s,r);return o&&(a=this.PrettifyChanges(a)),{quitEarly:r[0],changes:a}}ComputeDiffRecursive(e,t,i,s,o){for(o[0]=!1;e<=t&&i<=s&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&s>=i&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||i>s){let u;return i<=s?(v0.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new Zf(e,0,i,s-i+1)]):e<=t?(v0.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[new Zf(e,t-e+1,i,0)]):(v0.Assert(e===t+1,"originalStart should only be one more than originalEnd"),v0.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const r=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,s,r,a,o),c=r[0],d=a[0];if(l!==null)return l;if(!o[0]){const u=this.ComputeDiffRecursive(e,c,i,d,o);let h=[];return o[0]?h=[new Zf(c+1,t-(c+1)+1,d+1,s-(d+1)+1)]:h=this.ComputeDiffRecursive(c+1,t,d+1,s,o),this.ConcatenateChanges(u,h)}return[new Zf(e,t-e+1,i,s-i+1)]}WALKTRACE(e,t,i,s,o,r,a,l,c,d,u,h,f,m,p,b,v,w){let y=null,C=null,S=new hJ,x=t,k=i,N=f[0]-b[0]-s,E=-1073741824,B=this.m_forwardHistory.length-1;do{const A=N+e;A===x||A<k&&c[A-1]<c[A+1]?(u=c[A+1],m=u-N-s,u<E&&S.MarkNextChange(),E=u,S.AddModifiedElement(u+1,m),N=A+1-e):(u=c[A-1]+1,m=u-N-s,u<E&&S.MarkNextChange(),E=u-1,S.AddOriginalElement(u,m+1),N=A-1-e),B>=0&&(c=this.m_forwardHistory[B],e=c[0],x=1,k=c.length-1)}while(--B>=-1);if(y=S.getReverseChanges(),w[0]){let A=f[0]+1,O=b[0]+1;if(y!==null&&y.length>0){const W=y[y.length-1];A=Math.max(A,W.getOriginalEnd()),O=Math.max(O,W.getModifiedEnd())}C=[new Zf(A,h-A+1,O,p-O+1)]}else{S=new hJ,x=r,k=a,N=f[0]-b[0]-l,E=1073741824,B=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const A=N+o;A===x||A<k&&d[A-1]>=d[A+1]?(u=d[A+1]-1,m=u-N-l,u>E&&S.MarkNextChange(),E=u+1,S.AddOriginalElement(u+1,m+1),N=A+1-o):(u=d[A-1],m=u-N-l,u>E&&S.MarkNextChange(),E=u,S.AddModifiedElement(u+1,m+1),N=A-1-o),B>=0&&(d=this.m_reverseHistory[B],o=d[0],x=1,k=d.length-1)}while(--B>=-1);C=S.getChanges()}return this.ConcatenateChanges(y,C)}ComputeRecursionPoint(e,t,i,s,o,r,a){let l=0,c=0,d=0,u=0,h=0,f=0;e--,i--,o[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const m=t-e+(s-i),p=m+1,b=new Int32Array(p),v=new Int32Array(p),w=s-i,y=t-e,C=e-i,S=t-s,k=(y-w)%2===0;b[w]=e,v[y]=t,a[0]=!1;for(let N=1;N<=m/2+1;N++){let E=0,B=0;d=this.ClipDiagonalBound(w-N,N,w,p),u=this.ClipDiagonalBound(w+N,N,w,p);for(let O=d;O<=u;O+=2){O===d||O<u&&b[O-1]<b[O+1]?l=b[O+1]:l=b[O-1]+1,c=l-(O-w)-C;const W=l;for(;l<t&&c<s&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(b[O]=l,l+c>E+B&&(E=l,B=c),!k&&Math.abs(O-y)<=N-1&&l>=v[O])return o[0]=l,r[0]=c,W<=v[O]&&N<=1448?this.WALKTRACE(w,d,u,C,y,h,f,S,b,v,l,t,o,c,s,r,k,a):null}const A=(E-e+(B-i)-N)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(E,A))return a[0]=!0,o[0]=E,r[0]=B,A>0&&N<=1448?this.WALKTRACE(w,d,u,C,y,h,f,S,b,v,l,t,o,c,s,r,k,a):(e++,i++,[new Zf(e,t-e+1,i,s-i+1)]);h=this.ClipDiagonalBound(y-N,N,y,p),f=this.ClipDiagonalBound(y+N,N,y,p);for(let O=h;O<=f;O+=2){O===h||O<f&&v[O-1]>=v[O+1]?l=v[O+1]-1:l=v[O-1],c=l-(O-y)-S;const W=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(v[O]=l,k&&Math.abs(O-w)<=N&&l<=b[O])return o[0]=l,r[0]=c,W>=b[O]&&N<=1448?this.WALKTRACE(w,d,u,C,y,h,f,S,b,v,l,t,o,c,s,r,k,a):null}if(N<=1447){let O=new Int32Array(u-d+2);O[0]=w-d+1,w0.Copy2(b,d,O,1,u-d+1),this.m_forwardHistory.push(O),O=new Int32Array(f-h+2),O[0]=y-h+1,w0.Copy2(v,h,O,1,f-h+1),this.m_reverseHistory.push(O)}}return this.WALKTRACE(w,d,u,C,y,h,f,S,b,v,l,t,o,c,s,r,k,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<s&&i.modifiedStart+i.modifiedLength<o&&(!r||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let s=0,o=0;if(t>0){const u=e[t-1];s=u.originalStart+u.originalLength,o=u.modifiedStart+u.modifiedLength}const r=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let u=1;;u++){const h=i.originalStart-u,f=i.modifiedStart-u;if(h<s||f<o||r&&!this.OriginalElementsAreEqual(h,h+i.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+i.modifiedLength))break;const p=(h===s&&f===o?5:0)+this._boundaryScore(h,i.originalLength,f,i.modifiedLength);p>c&&(c=p,l=u)}i.originalStart-=l,i.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const s=e[t-1],o=e[t],r=o.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=o.originalStart+o.originalLength,c=l-a,d=s.modifiedStart,u=o.modifiedStart+o.modifiedLength,h=u-d;if(r<5&&c<20&&h<20){const f=this._findBetterContiguousSequence(a,c,d,h,r);if(f){const[m,p]=f;(m!==s.originalStart+s.originalLength||p!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=m-s.originalStart,s.modifiedLength=p-s.modifiedStart,o.originalStart=m+r,o.modifiedStart=p+r,o.originalLength=l-o.originalStart,o.modifiedLength=u-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,s,o){if(t<o||s<o)return null;const r=e+t-o+1,a=i+s-o+1;let l=0,c=0,d=0;for(let u=e;u<r;u++)for(let h=i;h<a;h++){const f=this._contiguousSequenceScore(u,h,o);f>0&&f>l&&(l=f,c=u,d=h)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,i){let s=0;for(let o=0;o<i;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;s+=this._originalStringElements[e+o].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,s){const o=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(i,s)?1:0;return o+r}ConcatenateChanges(e,t){const i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const s=new Array(e.length+t.length-1);return w0.Copy(e,0,s,0,e.length-1),s[e.length-1]=i[0],w0.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return w0.Copy(e,0,s,0,e.length),w0.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,i){if(v0.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),v0.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let o=e.originalLength;const r=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new Zf(s,o,r,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,s){if(e>=0&&e<s)return e;const o=i,r=s-i-1,a=t%2===0;if(e<0){const l=o%2===0;return a===l?0:1}else{const l=r%2===0;return a===l?s-1:s-2}}}function _2(n){return n<0?0:n>255?255:n|0}function y0(n){return n<0?0:n>4294967295?4294967295:n|0}class I1{constructor(e){const t=_2(e);this._defaultValue=t,this._asciiMap=I1._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=_2(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class b2{constructor(){this._actual=new I1(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}clear(){return this._actual.clear()}}class UPe{constructor(e,t,i){const s=new Uint8Array(e*t);for(let o=0,r=e*t;o<r;o++)s[o]=i;this._data=s,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class $Pe{constructor(e){let t=0,i=0;for(let o=0,r=e.length;o<r;o++){const[a,l,c]=e[o];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;const s=new UPe(i,t,0);for(let o=0,r=e.length;o<r;o++){const[a,l,c]=e[o];s.set(a,l,c)}this._states=s,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let E3=null;function KPe(){return E3===null&&(E3=new $Pe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),E3}let vS=null;function qPe(){if(vS===null){vS=new I1(0);const n=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<n.length;t++)vS.set(n.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)vS.set(e.charCodeAt(t),2)}return vS}class v2{static _createLink(e,t,i,s,o){let r=o-1;do{const a=t.charCodeAt(r);if(e.get(a)!==2)break;r--}while(r>s);if(s>0){const a=t.charCodeAt(s-1),l=t.charCodeAt(r);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&r--}return{range:{startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:r+2},url:t.substring(s,r+1)}}static computeLinks(e,t=KPe()){const i=qPe(),s=[];for(let o=1,r=e.getLineCount();o<=r;o++){const a=e.getLineContent(o),l=a.length;let c=0,d=0,u=0,h=1,f=!1,m=!1,p=!1,b=!1;for(;c<l;){let v=!1;const w=a.charCodeAt(c);if(h===13){let y;switch(w){case 40:f=!0,y=0;break;case 41:y=f?0:1;break;case 91:p=!0,m=!0,y=0;break;case 93:p=!1,y=m?0:1;break;case 123:b=!0,y=0;break;case 125:y=b?0:1;break;case 39:case 34:case 96:u===w?y=1:u===39||u===34||u===96?y=0:y=1;break;case 42:y=u===42?1:0;break;case 124:y=u===124?1:0;break;case 32:y=p?0:1;break;default:y=i.get(w)}y===1&&(s.push(v2._createLink(i,a,o,d,c)),v=!0)}else if(h===12){let y;w===91?(m=!0,y=0):y=i.get(w),y===1?v=!0:h=13}else h=t.nextState(h,w),h===0&&(v=!0);v&&(h=1,f=!1,m=!1,b=!1,d=c+1,u=w),c++}h===13&&s.push(v2._createLink(i,a,o,d,l))}return s}}function GPe(n){return!n||typeof n.getLineCount!="function"||typeof n.getLineContent!="function"?[]:v2.computeLinks(n)}const oA=class oA{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,s,o){if(e&&t){const r=this.doNavigateValueSet(t,o);if(r)return{range:e,value:r}}if(i&&s){const r=this.doNavigateValueSet(s,o);if(r)return{range:i,value:r}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let s=Number(e);const o=parseFloat(e);return!isNaN(s)&&!isNaN(o)&&s===o?s===0&&!t?null:(s=Math.floor(s*i),s+=t?i:-i,String(s/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let s=null;for(let o=0,r=e.length;s===null&&o<r;o++)s=this.valueSetReplace(e[o],t,i);return s}valueSetReplace(e,t,i){let s=e.indexOf(t);return s>=0?(s+=i?1:-1,s<0?s=e.length-1:s%=e.length,e[s]):null}};oA.INSTANCE=new oA;let hW=oA;const vL=class vL{static getChannel(e){return e.getChannel(vL.CHANNEL_NAME)}static setChannel(e,t){e.setChannel(vL.CHANNEL_NAME,t)}};vL.CHANNEL_NAME="editorWorkerHost";let fW=vL;var fJ,gJ;class ZPe{constructor(e,t){this.uri=e,this.value=t}}function YPe(n){return Array.isArray(n)}const g_=class g_{constructor(e,t){if(this[fJ]="ResourceMap",e instanceof g_)this.map=new Map(e.map),this.toKey=t??g_.defaultToKey;else if(YPe(e)){this.map=new Map,this.toKey=t??g_.defaultToKey;for(const[i,s]of e)this.set(i,s)}else this.map=new Map,this.toKey=e??g_.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new ZPe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))==null?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,s]of this.map)e(s.value,s.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(fJ=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};g_.defaultToKey=e=>e.toString();let cs=g_;class XPe{constructor(){this[gJ]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let s=this._map.get(e);if(s)s.value=t,i!==0&&this.touch(s,i);else{switch(s={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const o={value:i.key,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const o={value:i.value,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const o={value:[i.key,i.value],done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return s}[(gJ=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.previous,i--;this._tail=t,this._size=i,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(i.previous=s,s.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,s=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=s,s.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class QPe extends XPe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class Hu extends QPe{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class JPe{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class OK{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class eAe extends I1{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,s=e.length;i<s;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const s of this._getIntlSegmenterWordsOnLine(e)){if(s.index>t)break;i=s}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const mJ=new Hu(10);function gl(n,e){const t=`${n}/${e.join(",")}`;let i=mJ.get(t);return i||(i=new eAe(n,e),mJ.set(t,i)),i}var Na;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(Na||(Na={}));var Jl;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(Jl||(Jl={}));var jl;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(jl||(jl={}));class ST{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Ar(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class Rk{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function tAe(n){return n&&typeof n.read=="function"}class D3{constructor(e,t,i,s,o,r){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=o,this._isTracked=r}}class iAe{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class nAe{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function Zhe(n){return!n.isTooLargeForSyncing()&&!n.isForSimpleWidget}const sAe=999;class Up{constructor(e,t,i,s){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=oAe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=que(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new iAe(t,this.wordSeparators?gl(this.wordSeparators,[]):null,i?this.searchString:null)}}function oAe(n){if(!n||n.length===0)return!1;for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const s=n.charCodeAt(e);if(s===110||s===114||s===87)return!0}}return!1}function e_(n,e,t){if(!t)return new Rk(n,null);const i=[];for(let s=0,o=e.length;s<o;s++)i[s]=e[s];return new Rk(n,i)}class pJ{constructor(e){const t=[];let i=0;for(let s=0,o=e.length;s<o;s++)e.charCodeAt(s)===10&&(t[i++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;i<s;){const o=i+((s-i)/2>>0);t[o]>=e?s=o-1:t[o+1]>=e?(i=o,s=o):i=o+1}return i+1}}class KE{static findMatches(e,t,i,s,o){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,i,new hw(r.wordSeparators,r.regex),s,o):this._doFindMatchesLineByLine(e,i,r,s,o):[]}static _getMultilineMatchRange(e,t,i,s,o,r){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(o),a=t+o+l):a=t+o;let c;if(s){const f=s.findLineFeedCountBeforeOffset(o+r.length)-l;c=a+r.length+f}else c=a+r.length;const d=e.getPositionAt(a),u=e.getPositionAt(c);return new D(d.lineNumber,d.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,i,s,o){const r=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new pJ(a):null,c=[];let d=0,u;for(i.reset(0);u=i.next(a);)if(c[d++]=e_(this._getMultilineMatchRange(e,r,a,l,u.index,u[0]),u,s),d>=o)return c;return c}static _doFindMatchesLineByLine(e,t,i,s,o){const r=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,r,s,o),r}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,r,s,o);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<o;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,r,s,o);if(a<o){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,r,s,o)}return r}static _findMatchesInLine(e,t,i,s,o,r,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,m=t.length;let p=-f;for(;(p=t.indexOf(h,p+f))!==-1;)if((!c||FK(c,t,m,p,f))&&(r[o++]=new Rk(new D(i,p+1+s,i,p+1+f+s),null),o>=l))return o;return o}const d=new hw(e.wordSeparators,e.regex);let u;d.reset(0);do if(u=d.next(t),u&&(r[o++]=e_(new D(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),o>=l))return o;while(u);return o}static findNextMatch(e,t,i,s){const o=t.parseSearchRequest();if(!o)return null;const r=new hw(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,i,r,s):this._doFindNextMatchLineByLine(e,i,r,s)}static _doFindNextMatchMultiline(e,t,i,s){const o=new U(t.lineNumber,1),r=e.getOffsetAt(o),a=e.getLineCount(),l=e.getValueInRange(new D(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new pJ(l):null;i.reset(t.column-1);const d=i.next(l);return d?e_(this._getMultilineMatchRange(e,r,l,c,d.index,d[0]),d,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new U(1,1),i,s):null}static _doFindNextMatchLineByLine(e,t,i,s){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r),l=this._findFirstMatchInLine(i,a,r,t.column,s);if(l)return l;for(let c=1;c<=o;c++){const d=(r+c-1)%o,u=e.getLineContent(d+1),h=this._findFirstMatchInLine(i,u,d+1,1,s);if(h)return h}return null}static _findFirstMatchInLine(e,t,i,s,o){e.reset(s-1);const r=e.next(t);return r?e_(new D(i,r.index+1,i,r.index+1+r[0].length),r,o):null}static findPreviousMatch(e,t,i,s){const o=t.parseSearchRequest();if(!o)return null;const r=new hw(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,i,r,s):this._doFindPreviousMatchLineByLine(e,i,r,s)}static _doFindPreviousMatchMultiline(e,t,i,s){const o=this._doFindMatchesMultiline(e,new D(1,1,t.lineNumber,t.column),i,s,10*sAe);if(o.length>0)return o[o.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new U(r,e.getLineMaxColumn(r)),i,s):null}static _doFindPreviousMatchLineByLine(e,t,i,s){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,r,s);if(l)return l;for(let c=1;c<=o;c++){const d=(o+r-c-1)%o,u=e.getLineContent(d+1),h=this._findLastMatchInLine(i,u,d+1,s);if(h)return h}return null}static _findLastMatchInLine(e,t,i,s){let o=null,r;for(e.reset(0);r=e.next(t);)o=e_(new D(i,r.index+1,i,r.index+1+r[0].length),r,s);return o}}function rAe(n,e,t,i,s){if(i===0)return!0;const o=e.charCodeAt(i-1);if(n.get(o)!==0||o===13||o===10)return!0;if(s>0){const r=e.charCodeAt(i);if(n.get(r)!==0)return!0}return!1}function aAe(n,e,t,i,s){if(i+s===t)return!0;const o=e.charCodeAt(i+s);if(n.get(o)!==0||o===13||o===10)return!0;if(s>0){const r=e.charCodeAt(i+s-1);if(n.get(r)!==0)return!0}return!1}function FK(n,e,t,i,s){return rAe(n,e,t,i,s)&&aAe(n,e,t,i,s)}class hw{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const s=i.index,o=i[0].length;if(s===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){r2(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=o,!this._wordSeparators||FK(this._wordSeparators,e,t,s,o))return i}while(i);return null}}class BK{static computeUnicodeHighlights(e,t,i){const s=i?i.startLineNumber:1,o=i?i.endLineNumber:e.getLineCount(),r=new _J(t),a=r.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${lAe(Array.from(a))}`,"g");const c=new hw(null,l),d=[];let u=!1,h,f=0,m=0,p=0;e:for(let b=s,v=o;b<=v;b++){const w=e.getLineContent(b),y=w.length;c.reset(0);do if(h=c.next(w),h){let C=h.index,S=h.index+h[0].length;if(C>0){const E=w.charCodeAt(C-1);qn(E)&&C--}if(S+1<y){const E=w.charCodeAt(S-1);qn(E)&&S++}const x=w.substring(C,S);let k=yk(C+1,lK,w,0);k&&k.endColumn<=C+1&&(k=null);const N=r.shouldHighlightNonBasicASCII(x,k?k.word:null);if(N!==0){if(N===3?f++:N===2?m++:N===1?p++:R4(),d.length>=1e3){u=!0;break e}d.push(new D(b,C+1,b,S+1))}}while(h)}return{ranges:d,hasMore:u,ambiguousCharacterCount:f,invisibleCharacterCount:m,nonBasicAsciiCharacterCount:p}}static computeUnicodeHighlightReason(e,t){const i=new _J(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const o=e.codePointAt(0),r=i.ambiguousCharacters.getPrimaryConfusable(o),a=Ik.getLocales().filter(l=>!Ik.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(o));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function lAe(n,e){return`[${Da(n.map(i=>String.fromCodePoint(i)).join(""))}]`}class _J{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=Ik.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of j_.codePoints)bJ(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let s=!1,o=!1;if(t)for(const r of t){const a=r.codePointAt(0),l=CI(r);s=s||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!j_.isInvisibleCharacter(a)&&(o=!0)}return!s&&o?0:this.options.invisibleCharacters&&!bJ(e)&&j_.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function bJ(n){return n===" "||n===`
`||n==="	"}class xT{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class Yhe{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class vt{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let s=i;for(;s<t.length&&t[s].start<=e.endExclusive;)s++;if(i===s)t.splice(i,0,e);else{const o=Math.min(e.start,t[i].start),r=Math.max(e.endExclusive,t[s-1].endExclusive);t.splice(i,s-i,new vt(o,r))}}static tryCreate(e,t){if(!(e>t))return new vt(e,t)}static ofLength(e){return new vt(0,e)}static ofStartAndLength(e,t){return new vt(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new Zt(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new vt(this.start+e,this.endExclusive+e)}deltaStart(e){return new vt(this.start+e,this.endExclusive)}deltaEnd(e){return new vt(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new vt(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new vt(t,i)}intersects(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return t<i}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Zt(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Zt(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class WK{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{const s=Math.min(e.start,this._sortedRanges[t].start),o=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new vt(s,o))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new WK;for(const i of this._sortedRanges){const s=i.intersect(e);s&&t.addRange(s)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function Mk(n,e){const t=cAe(n,e);if(t!==-1)return n[t]}function cAe(n,e,t=n.length-1){for(let i=t;i>=0;i--){const s=n[i];if(e(s))return i}return-1}function LC(n,e){const t=Pk(n,e);return t===-1?void 0:n[t]}function Pk(n,e,t=0,i=n.length){let s=t,o=i;for(;s<o;){const r=Math.floor((s+o)/2);e(n[r])?s=r+1:o=r}return s-1}function dAe(n,e){const t=Ak(n,e);return t===n.length?void 0:n[t]}function Ak(n,e,t=0,i=n.length){let s=t,o=i;for(;s<o;){const r=Math.floor((s+o)/2);e(n[r])?o=r:s=r+1}return s}const rA=class rA{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(rA.assertInvariants){if(this._prevFindLastPredicate){for(const i of this._array)if(this._prevFindLastPredicate(i)&&!e(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=Pk(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}};rA.assertInvariants=!1;let w2=rA;function HK(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const s=n[i];e(s,t)>0&&(t=s)}return t}function uAe(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const s=n[i];e(s,t)>=0&&(t=s)}return t}function hAe(n,e){return HK(n,(t,i)=>-e(t,i))}function fAe(n,e){if(n.length===0)return-1;let t=0;for(let i=1;i<n.length;i++){const s=n[i];e(s,n[t])>0&&(t=i)}return t}function gAe(n,e){for(const t of n){const i=e(t);if(i!==void 0)return i}}let at=class nh{static fromRangeInclusive(e){return new nh(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new el(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new el(e[i].slice()));return t.ranges}static join(e){if(e.length===0)throw new Zt("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let s=1;s<e.length;s++)t=Math.min(t,e[s].startLineNumber),i=Math.max(i,e[s].endLineNumberExclusive);return new nh(t,i)}static ofLength(e,t){return new nh(e,e+t)}static deserialize(e){return new nh(e[0],e[1])}constructor(e,t){if(e>t)throw new Zt(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new nh(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new nh(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new nh(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new nh(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new D(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new D(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new vt(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class el{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=Ak(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),i=Pk(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const s=this._normalizedRanges[t];this._normalizedRanges[t]=s.join(e)}else{const s=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,s)}}contains(e){const t=LC(this._normalizedRanges,i=>i.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=LC(this._normalizedRanges,i=>i.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let i=0,s=0,o=null;for(;i<this._normalizedRanges.length||s<e._normalizedRanges.length;){let r=null;if(i<this._normalizedRanges.length&&s<e._normalizedRanges.length){const a=this._normalizedRanges[i],l=e._normalizedRanges[s];a.startLineNumber<l.startLineNumber?(r=a,i++):(r=l,s++)}else i<this._normalizedRanges.length?(r=this._normalizedRanges[i],i++):(r=e._normalizedRanges[s],s++);o===null?o=r:o.endLineNumberExclusive>=r.startLineNumber?o=new at(o.startLineNumber,Math.max(o.endLineNumberExclusive,r.endLineNumberExclusive)):(t.push(o),o=r)}return o!==null&&t.push(o),new el(t)}subtractFrom(e){const t=Ak(this._normalizedRanges,r=>r.endLineNumberExclusive>=e.startLineNumber),i=Pk(this._normalizedRanges,r=>r.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return new el([e]);const s=[];let o=e.startLineNumber;for(let r=t;r<i;r++){const a=this._normalizedRanges[r];a.startLineNumber>o&&s.push(new at(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&s.push(new at(o,e.endLineNumberExclusive)),new el(s)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let i=0,s=0;for(;i<this._normalizedRanges.length&&s<e._normalizedRanges.length;){const o=this._normalizedRanges[i],r=e._normalizedRanges[s],a=o.intersect(r);a&&!a.isEmpty&&t.push(a),o.endLineNumberExclusive<r.endLineNumberExclusive?i++:s++}return new el(t)}getWithDelta(e){return new el(this._normalizedRanges.map(t=>t.delta(e)))}}const ng=class ng{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new ng(0,t.column-e.column):new ng(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return ng.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,i=0;for(const s of e)s===`
`?(t++,i=0):i++;return new ng(t,i)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return this.lineCount===0?new D(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new D(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new U(e.lineNumber,e.column+this.columnCount):new U(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};ng.zero=new ng(0,0);let ec=ng;class mAe{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new vt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new ec(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}class VK{constructor(e){this.edits=e,_v(()=>MK(e,(t,i)=>t.range.getEndPosition().isBeforeOrEqual(i.range.getStartPosition())))}apply(e){let t="",i=new U(1,1);for(const o of this.edits){const r=o.range,a=r.getStartPosition(),l=r.getEndPosition(),c=vJ(i,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=o.text,i=l}const s=vJ(i,e.endPositionExclusive);return s.isEmpty()||(t+=e.getValueOfRange(s)),t}applyToString(e){const t=new pAe(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,i=0,s=0;for(const o of this.edits){const r=ec.ofText(o.text),a=U.lift({lineNumber:o.range.startLineNumber+i,column:o.range.startColumn+(o.range.startLineNumber===t?s:0)}),l=r.createRange(a);e.push(l),i=l.endLineNumber-o.range.endLineNumber,s=l.endColumn-o.range.endColumn,t=o.range.endLineNumber}return e}}class Iu{constructor(e,t){this.range=e,this.text=t}toSingleEditOperation(){return{range:this.range,text:this.text}}}function vJ(n,e){if(n.lineNumber===e.lineNumber&&n.column===Number.MAX_SAFE_INTEGER)return D.fromPositions(e,e);if(!n.isBeforeOrEqual(e))throw new Zt("start must be before end");return new D(n.lineNumber,n.column,e.lineNumber,e.column)}class Xhe{get endPositionExclusive(){return this.length.addToPosition(new U(1,1))}}class pAe extends Xhe{constructor(e){super(),this.value=e,this._t=new mAe(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class lo{static inverse(e,t,i){const s=[];let o=1,r=1;for(const l of e){const c=new lo(new at(o,l.original.startLineNumber),new at(r,l.modified.startLineNumber));c.modified.isEmpty||s.push(c),o=l.original.endLineNumberExclusive,r=l.modified.endLineNumberExclusive}const a=new lo(new at(o,t+1),new at(r,i+1));return a.modified.isEmpty||s.push(a),s}static clip(e,t,i){const s=[];for(const o of e){const r=o.original.intersect(t),a=o.modified.intersect(i);r&&!r.isEmpty&&a&&!a.isEmpty&&s.push(new lo(r,a))}return s}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new lo(this.modified,this.original)}join(e){return new lo(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new ua(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new Zt("not a valid diff");return new ua(new D(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new D(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new ua(new D(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new D(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(wJ(this.original.endLineNumberExclusive,e)&&wJ(this.modified.endLineNumberExclusive,t))return new ua(new D(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new D(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new ua(D.fromPositions(new U(this.original.startLineNumber,1),C0(new U(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),D.fromPositions(new U(this.modified.startLineNumber,1),C0(new U(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new ua(D.fromPositions(C0(new U(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),C0(new U(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),D.fromPositions(C0(new U(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),C0(new U(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new Zt}}function C0(n,e){if(n.lineNumber<1)return new U(1,1);if(n.lineNumber>e.length)return new U(e.length,e[e.length-1].length+1);const t=e[n.lineNumber-1];return n.column>t.length+1?new U(n.lineNumber,t.length+1):n}function wJ(n,e){return n>=1&&n<=e.length}class Ia extends lo{static fromRangeMappings(e){const t=at.join(e.map(s=>at.fromRangeInclusive(s.originalRange))),i=at.join(e.map(s=>at.fromRangeInclusive(s.modifiedRange)));return new Ia(t,i,e)}constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){var e;return new Ia(this.modified,this.original,(e=this.innerChanges)==null?void 0:e.map(t=>t.flip()))}withInnerChangesFromLineRanges(){return new Ia(this.original,this.modified,[this.toRangeMapping()])}}class ua{static assertSorted(e){for(let t=1;t<e.length;t++){const i=e[t-1],s=e[t];if(!(i.originalRange.getEndPosition().isBeforeOrEqual(s.originalRange.getStartPosition())&&i.modifiedRange.getEndPosition().isBeforeOrEqual(s.modifiedRange.getStartPosition())))throw new Zt("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new ua(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new Iu(this.originalRange,t)}}const _Ae=3;class bAe{computeDiff(e,t,i){var l;const o=new yAe(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),r=[];let a=null;for(const c of o.changes){let d;c.originalEndLineNumber===0?d=new at(c.originalStartLineNumber+1,c.originalStartLineNumber+1):d=new at(c.originalStartLineNumber,c.originalEndLineNumber+1);let u;c.modifiedEndLineNumber===0?u=new at(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):u=new at(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let h=new Ia(d,u,(l=c.charChanges)==null?void 0:l.map(f=>new ua(new D(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn),new D(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===h.modified.startLineNumber||a.original.endLineNumberExclusive===h.original.startLineNumber)&&(h=new Ia(a.original.join(h.original),a.modified.join(h.modified),a.innerChanges&&h.innerChanges?a.innerChanges.concat(h.innerChanges):void 0),r.pop()),r.push(h),a=h}return _v(()=>MK(r,(c,d)=>d.original.startLineNumber-c.original.endLineNumberExclusive===d.modified.startLineNumber-c.modified.endLineNumberExclusive&&c.original.endLineNumberExclusive<d.original.startLineNumber&&c.modified.endLineNumberExclusive<d.modified.startLineNumber)),new xT(r,[],o.quitEarly)}}function Qhe(n,e,t,i){return new nu(n,e,t).ComputeDiff(i)}let yJ=class{constructor(e){const t=[],i=[];for(let s=0,o=e.length;s<o;s++)t[s]=gW(e[s],1),i[s]=mW(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const s=[],o=[],r=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],d=e?this._startColumns[l]:1,u=e?this._endColumns[l]:c.length+1;for(let h=d;h<u;h++)s[a]=c.charCodeAt(h-1),o[a]=l+1,r[a]=h,a++;!e&&l<i&&(s[a]=10,o[a]=l+1,r[a]=c.length+1,a++)}return new vAe(s,o,r)}};class vAe{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class my{constructor(e,t,i,s,o,r,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=s,this.modifiedStartLineNumber=o,this.modifiedStartColumn=r,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){const s=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),d=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new my(s,o,r,a,l,c,d,u)}}function wAe(n){if(n.length<=1)return n;const e=[n[0]];let t=e[0];for(let i=1,s=n.length;i<s;i++){const o=n[i],r=o.originalStart-(t.originalStart+t.originalLength),a=o.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(r,a)<_Ae?(t.originalLength=o.originalStart+o.originalLength-t.originalStart,t.modifiedLength=o.modifiedStart+o.modifiedLength-t.modifiedStart):(e.push(o),t=o)}return e}class Ax{constructor(e,t,i,s,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=s,this.charChanges=o}static createFromDiffResult(e,t,i,s,o,r,a){let l,c,d,u,h;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=s.getStartLineNumber(t.modifiedStart)-1,u=0):(d=s.getStartLineNumber(t.modifiedStart),u=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){const f=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),m=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&m.getElements().length>0){let p=Qhe(f,m,o,!0).changes;a&&(p=wAe(p)),h=[];for(let b=0,v=p.length;b<v;b++)h.push(my.createFromDiffChange(p[b],f,m))}}return new Ax(l,c,d,u,h)}}class yAe{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new yJ(e),this.modified=new yJ(t),this.continueLineDiff=CJ(i.maxComputationTime),this.continueCharDiff=CJ(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=Qhe(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(Ax.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const s=[];let o=0,r=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,u=c?c.modifiedStart:this.modifiedLines.length;for(;o<d&&r<u;){const h=this.originalLines[o],f=this.modifiedLines[r];if(h!==f){{let m=gW(h,1),p=gW(f,1);for(;m>1&&p>1;){const b=h.charCodeAt(m-2),v=f.charCodeAt(p-2);if(b!==v)break;m--,p--}(m>1||p>1)&&this._pushTrimWhitespaceCharChange(s,o+1,1,m,r+1,1,p)}{let m=mW(h,1),p=mW(f,1);const b=h.length+1,v=f.length+1;for(;m<b&&p<v;){const w=h.charCodeAt(m-1),y=h.charCodeAt(p-1);if(w!==y)break;m++,p++}(m<b||p<v)&&this._pushTrimWhitespaceCharChange(s,o+1,m,b,r+1,p,v)}}o++,r++}c&&(s.push(Ax.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=c.originalLength,r+=c.modifiedLength)}return{quitEarly:i,changes:s}}_pushTrimWhitespaceCharChange(e,t,i,s,o,r,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,s,o,r,a))return;let l;this.shouldComputeCharChanges&&(l=[new my(t,i,t,s,o,r,o,a)]),e.push(new Ax(t,t,o,o,l))}_mergeTrimWhitespaceCharChange(e,t,i,s,o,r,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===o?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new my(t,i,t,s,o,r,o,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===o?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new my(t,i,t,s,o,r,o,a)),!0):!1}}function gW(n,e){const t=fo(n);return t===-1?e:t+1}function mW(n,e){const t=Xc(n);return t===-1?e:t+2}function CJ(n){if(n===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<n}class Yh{static trivial(e,t){return new Yh([new Kn(vt.ofLength(e.length),vt.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new Yh([new Kn(vt.ofLength(e.length),vt.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class Kn{static invert(e,t){const i=[];return due(e,(s,o)=>{i.push(Kn.fromOffsetPairs(s?s.getEndExclusives():Oh.zero,o?o.getStarts():new Oh(t,(s?s.seq2Range.endExclusive-s.seq1Range.endExclusive:0)+t)))}),i}static fromOffsetPairs(e,t){return new Kn(new vt(e.offset1,t.offset1),new vt(e.offset2,t.offset2))}static assertSorted(e){let t;for(const i of e){if(t&&!(t.seq1Range.endExclusive<=i.seq1Range.start&&t.seq2Range.endExclusive<=i.seq2Range.start))throw new Zt("Sequence diffs must be sorted");t=i}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new Kn(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new Kn(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new Kn(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new Kn(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new Kn(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(!(!t||!i))return new Kn(t,i)}getStarts(){return new Oh(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new Oh(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}const m_=class m_{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new m_(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};m_.zero=new m_(0,0),m_.max=new m_(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);let Oh=m_;const aA=class aA{isValid(){return!0}};aA.instance=new aA;let Ok=aA;class CAe{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new Zt("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class T3{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}function pW(n){return n===32||n===9}const wL=class wL{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let s=0;for(let o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){const r=t[o];for(let l=0;l<r.length;l++){s++;const c=r[l],d=wL.getKey(c);this.histogram[d]=(this.histogram[d]||0)+1}s++;const a=wL.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=s}computeSimilarity(e){let t=0;const i=Math.max(this.histogram.length,e.histogram.length);for(let s=0;s<i;s++)t+=Math.abs((this.histogram[s]??0)-(e.histogram[s]??0));return 1-t/(this.totalCount+e.totalCount)}};wL.chrKeys=new Map;let y2=wL;class SAe{compute(e,t,i=Ok.instance,s){if(e.length===0||t.length===0)return Yh.trivial(e,t);const o=new T3(e.length,t.length),r=new T3(e.length,t.length),a=new T3(e.length,t.length);for(let m=0;m<e.length;m++)for(let p=0;p<t.length;p++){if(!i.isValid())return Yh.trivialTimedOut(e,t);const b=m===0?0:o.get(m-1,p),v=p===0?0:o.get(m,p-1);let w;e.getElement(m)===t.getElement(p)?(m===0||p===0?w=0:w=o.get(m-1,p-1),m>0&&p>0&&r.get(m-1,p-1)===3&&(w+=a.get(m-1,p-1)),w+=s?s(m,p):1):w=-1;const y=Math.max(b,v,w);if(y===w){const C=m>0&&p>0?a.get(m-1,p-1):0;a.set(m,p,C+1),r.set(m,p,3)}else y===b?(a.set(m,p,0),r.set(m,p,1)):y===v&&(a.set(m,p,0),r.set(m,p,2));o.set(m,p,y)}const l=[];let c=e.length,d=t.length;function u(m,p){(m+1!==c||p+1!==d)&&l.push(new Kn(new vt(m+1,c),new vt(p+1,d))),c=m,d=p}let h=e.length-1,f=t.length-1;for(;h>=0&&f>=0;)r.get(h,f)===3?(u(h,f),h--,f--):r.get(h,f)===1?h--:f--;return u(-1,-1),l.reverse(),new Yh(l,!1)}}class Jhe{compute(e,t,i=Ok.instance){if(e.length===0||t.length===0)return Yh.trivial(e,t);const s=e,o=t;function r(p,b){for(;p<s.length&&b<o.length&&s.getElement(p)===o.getElement(b);)p++,b++;return p}let a=0;const l=new xAe;l.set(0,r(0,0));const c=new LAe;c.set(0,l.get(0)===0?null:new SJ(null,0,0,l.get(0)));let d=0;e:for(;;){if(a++,!i.isValid())return Yh.trivialTimedOut(s,o);const p=-Math.min(a,o.length+a%2),b=Math.min(a,s.length+a%2);for(d=p;d<=b;d+=2){const v=d===b?-1:l.get(d+1),w=d===p?-1:l.get(d-1)+1,y=Math.min(Math.max(v,w),s.length),C=y-d;if(y>s.length||C>o.length)continue;const S=r(y,C);l.set(d,S);const x=y===v?c.get(d+1):c.get(d-1);if(c.set(d,S!==y?new SJ(x,y,C,S-y):x),l.get(d)===s.length&&l.get(d)-d===o.length)break e}}let u=c.get(d);const h=[];let f=s.length,m=o.length;for(;;){const p=u?u.x+u.length:0,b=u?u.y+u.length:0;if((p!==f||b!==m)&&h.push(new Kn(new vt(p,f),new vt(b,m))),!u)break;f=u.x,m=u.y,u=u.prev}return h.reverse(),new Yh(h,!1)}}class SJ{constructor(e,t,i,s){this.prev=e,this.x=t,this.y=i,this.length=s}}class xAe{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const i=this.negativeArr;this.negativeArr=new Int32Array(i.length*2),this.negativeArr.set(i)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const i=this.positiveArr;this.positiveArr=new Int32Array(i.length*2),this.positiveArr.set(i)}this.positiveArr[e]=t}}}class LAe{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class C2{constructor(e,t,i){this.lines=e,this.range=t,this.considerWhitespaceChanges=i,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let s=this.range.startLineNumber;s<=this.range.endLineNumber;s++){let o=e[s-1],r=0;s===this.range.startLineNumber&&this.range.startColumn>1&&(r=this.range.startColumn-1,o=o.substring(r)),this.lineStartOffsets.push(r);let a=0;if(!i){const c=o.trimStart();a=o.length-c.length,o=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=s===this.range.endLineNumber?Math.min(this.range.endColumn-1-r-a,o.length):o.length;for(let c=0;c<l;c++)this.elements.push(o.charCodeAt(c));s<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new vt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=LJ(e>0?this.elements[e-1]:-1),i=LJ(e<this.elements.length?this.elements[e]:-1);if(t===7&&i===8)return 0;if(t===8)return 150;let s=0;return t!==i&&(s+=10,t===0&&i===1&&(s+=1)),s+=xJ(t),s+=xJ(i),s}translateOffset(e,t="right"){const i=Pk(this.firstElementOffsetByLineIdx,o=>o<=e),s=e-this.firstElementOffsetByLineIdx[i];return new U(this.range.startLineNumber+i,1+this.lineStartOffsets[i]+s+(s===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[i]))}translateRange(e){const t=this.translateOffset(e.start,"right"),i=this.translateOffset(e.endExclusive,"left");return i.isBefore(t)?D.fromPositions(i,i):D.fromPositions(t,i)}findWordContaining(e){if(e<0||e>=this.elements.length||!R3(this.elements[e]))return;let t=e;for(;t>0&&R3(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&R3(this.elements[i]);)i++;return new vt(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=LC(this.firstElementOffsetByLineIdx,s=>s<=e.start)??0,i=dAe(this.firstElementOffsetByLineIdx,s=>e.endExclusive<=s)??this.elements.length;return new vt(t,i)}}function R3(n){return n>=97&&n<=122||n>=65&&n<=90||n>=48&&n<=57}const kAe={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function xJ(n){return kAe[n]}function LJ(n){return n===10?8:n===13?7:pW(n)?6:n>=97&&n<=122?0:n>=65&&n<=90?1:n>=48&&n<=57?2:n===-1?3:n===44||n===59?5:4}function NAe(n,e,t,i,s,o){let{moves:r,excludedChanges:a}=EAe(n,e,t,o);if(!o.isValid())return[];const l=n.filter(d=>!a.has(d)),c=DAe(l,i,s,e,t,o);return A9(r,c),r=TAe(r),r=r.filter(d=>{const u=d.original.toOffsetRange().slice(e).map(f=>f.trim());return u.join(`
`).length>=15&&IAe(u,f=>f.length>=2)>=2}),r=RAe(n,r),r}function IAe(n,e){let t=0;for(const i of n)e(i)&&t++;return t}function EAe(n,e,t,i){const s=[],o=n.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new y2(l.original,e,l)),r=new Set(n.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new y2(l.modified,t,l))),a=new Set;for(const l of o){let c=-1,d;for(const u of r){const h=l.computeSimilarity(u);h>c&&(c=h,d=u)}if(c>.9&&d&&(r.delete(d),s.push(new lo(l.range,d.range)),a.add(l.source),a.add(d.source)),!i.isValid())return{moves:s,excludedChanges:a}}return{moves:s,excludedChanges:a}}function DAe(n,e,t,i,s,o){const r=[],a=new OK;for(const h of n)for(let f=h.original.startLineNumber;f<h.original.endLineNumberExclusive-2;f++){const m=`${e[f-1]}:${e[f+1-1]}:${e[f+2-1]}`;a.add(m,{range:new at(f,f+3)})}const l=[];n.sort(Io(h=>h.modified.startLineNumber,Kl));for(const h of n){let f=[];for(let m=h.modified.startLineNumber;m<h.modified.endLineNumberExclusive-2;m++){const p=`${t[m-1]}:${t[m+1-1]}:${t[m+2-1]}`,b=new at(m,m+3),v=[];a.forEach(p,({range:w})=>{for(const C of f)if(C.originalLineRange.endLineNumberExclusive+1===w.endLineNumberExclusive&&C.modifiedLineRange.endLineNumberExclusive+1===b.endLineNumberExclusive){C.originalLineRange=new at(C.originalLineRange.startLineNumber,w.endLineNumberExclusive),C.modifiedLineRange=new at(C.modifiedLineRange.startLineNumber,b.endLineNumberExclusive),v.push(C);return}const y={modifiedLineRange:b,originalLineRange:w};l.push(y),v.push(y)}),f=v}if(!o.isValid())return[]}l.sort(fue(Io(h=>h.modifiedLineRange.length,Kl)));const c=new el,d=new el;for(const h of l){const f=h.modifiedLineRange.startLineNumber-h.originalLineRange.startLineNumber,m=c.subtractFrom(h.modifiedLineRange),p=d.subtractFrom(h.originalLineRange).getWithDelta(f),b=m.getIntersection(p);for(const v of b.ranges){if(v.length<3)continue;const w=v,y=v.delta(-f);r.push(new lo(y,w)),c.addRange(w),d.addRange(y)}}r.sort(Io(h=>h.original.startLineNumber,Kl));const u=new w2(n);for(let h=0;h<r.length;h++){const f=r[h],m=u.findLastMonotonous(x=>x.original.startLineNumber<=f.original.startLineNumber),p=LC(n,x=>x.modified.startLineNumber<=f.modified.startLineNumber),b=Math.max(f.original.startLineNumber-m.original.startLineNumber,f.modified.startLineNumber-p.modified.startLineNumber),v=u.findLastMonotonous(x=>x.original.startLineNumber<f.original.endLineNumberExclusive),w=LC(n,x=>x.modified.startLineNumber<f.modified.endLineNumberExclusive),y=Math.max(v.original.endLineNumberExclusive-f.original.endLineNumberExclusive,w.modified.endLineNumberExclusive-f.modified.endLineNumberExclusive);let C;for(C=0;C<b;C++){const x=f.original.startLineNumber-C-1,k=f.modified.startLineNumber-C-1;if(x>i.length||k>s.length||c.contains(k)||d.contains(x)||!kJ(i[x-1],s[k-1],o))break}C>0&&(d.addRange(new at(f.original.startLineNumber-C,f.original.startLineNumber)),c.addRange(new at(f.modified.startLineNumber-C,f.modified.startLineNumber)));let S;for(S=0;S<y;S++){const x=f.original.endLineNumberExclusive+S,k=f.modified.endLineNumberExclusive+S;if(x>i.length||k>s.length||c.contains(k)||d.contains(x)||!kJ(i[x-1],s[k-1],o))break}S>0&&(d.addRange(new at(f.original.endLineNumberExclusive,f.original.endLineNumberExclusive+S)),c.addRange(new at(f.modified.endLineNumberExclusive,f.modified.endLineNumberExclusive+S))),(C>0||S>0)&&(r[h]=new lo(new at(f.original.startLineNumber-C,f.original.endLineNumberExclusive+S),new at(f.modified.startLineNumber-C,f.modified.endLineNumberExclusive+S)))}return r}function kJ(n,e,t){if(n.trim()===e.trim())return!0;if(n.length>300&&e.length>300)return!1;const s=new Jhe().compute(new C2([n],new D(1,1,1,n.length),!1),new C2([e],new D(1,1,1,e.length),!1),t);let o=0;const r=Kn.invert(s.diffs,n.length);for(const d of r)d.seq1Range.forEach(u=>{pW(n.charCodeAt(u))||o++});function a(d){let u=0;for(let h=0;h<n.length;h++)pW(d.charCodeAt(h))||u++;return u}const l=a(n.length>e.length?n:e);return o/l>.6&&l>10}function TAe(n){if(n.length===0)return n;n.sort(Io(t=>t.original.startLineNumber,Kl));const e=[n[0]];for(let t=1;t<n.length;t++){const i=e[e.length-1],s=n[t],o=s.original.startLineNumber-i.original.endLineNumberExclusive,r=s.modified.startLineNumber-i.modified.endLineNumberExclusive;if(o>=0&&r>=0&&o+r<=2){e[e.length-1]=i.join(s);continue}e.push(s)}return e}function RAe(n,e){const t=new w2(n);return e=e.filter(i=>{const s=t.findLastMonotonous(a=>a.original.startLineNumber<i.original.endLineNumberExclusive)||new lo(new at(1,1),new at(1,1)),o=LC(n,a=>a.modified.startLineNumber<i.modified.endLineNumberExclusive);return s!==o}),e}function _W(n,e,t){let i=t;return i=NJ(n,e,i),i=NJ(n,e,i),i=MAe(n,e,i),i}function NJ(n,e,t){if(t.length===0)return t;const i=[];i.push(t[0]);for(let o=1;o<t.length;o++){const r=i[i.length-1];let a=t[o];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-r.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(n.getElement(a.seq1Range.start-c)!==n.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){i[i.length-1]=new Kn(new vt(r.seq1Range.start,a.seq1Range.endExclusive-l),new vt(r.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}i.push(a)}const s=[];for(let o=0;o<i.length-1;o++){const r=i[o+1];let a=i[o];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=r.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!n.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){i[o+1]=new Kn(new vt(a.seq1Range.start+l,r.seq1Range.endExclusive),new vt(a.seq2Range.start+l,r.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}s.push(a)}return i.length>0&&s.push(i[i.length-1]),s}function MAe(n,e,t){if(!n.getBoundaryScore||!e.getBoundaryScore)return t;for(let i=0;i<t.length;i++){const s=i>0?t[i-1]:void 0,o=t[i],r=i+1<t.length?t[i+1]:void 0,a=new vt(s?s.seq1Range.endExclusive+1:0,r?r.seq1Range.start-1:n.length),l=new vt(s?s.seq2Range.endExclusive+1:0,r?r.seq2Range.start-1:e.length);o.seq1Range.isEmpty?t[i]=IJ(o,n,e,a,l):o.seq2Range.isEmpty&&(t[i]=IJ(o.swap(),e,n,l,a).swap())}return t}function IJ(n,e,t,i,s){let r=1;for(;n.seq1Range.start-r>=i.start&&n.seq2Range.start-r>=s.start&&t.isStronglyEqual(n.seq2Range.start-r,n.seq2Range.endExclusive-r)&&r<100;)r++;r--;let a=0;for(;n.seq1Range.start+a<i.endExclusive&&n.seq2Range.endExclusive+a<s.endExclusive&&t.isStronglyEqual(n.seq2Range.start+a,n.seq2Range.endExclusive+a)&&a<100;)a++;if(r===0&&a===0)return n;let l=0,c=-1;for(let d=-r;d<=a;d++){const u=n.seq2Range.start+d,h=n.seq2Range.endExclusive+d,f=n.seq1Range.start+d,m=e.getBoundaryScore(f)+t.getBoundaryScore(u)+t.getBoundaryScore(h);m>c&&(c=m,l=d)}return n.delta(l)}function PAe(n,e,t){const i=[];for(const s of t){const o=i[i.length-1];if(!o){i.push(s);continue}s.seq1Range.start-o.seq1Range.endExclusive<=2||s.seq2Range.start-o.seq2Range.endExclusive<=2?i[i.length-1]=new Kn(o.seq1Range.join(s.seq1Range),o.seq2Range.join(s.seq2Range)):i.push(s)}return i}function AAe(n,e,t){const i=Kn.invert(t,n.length),s=[];let o=new Oh(0,0);function r(l,c){if(l.offset1<o.offset1||l.offset2<o.offset2)return;const d=n.findWordContaining(l.offset1),u=e.findWordContaining(l.offset2);if(!d||!u)return;let h=new Kn(d,u);const f=h.intersect(c);let m=f.seq1Range.length,p=f.seq2Range.length;for(;i.length>0;){const b=i[0];if(!(b.seq1Range.intersects(h.seq1Range)||b.seq2Range.intersects(h.seq2Range)))break;const w=n.findWordContaining(b.seq1Range.start),y=e.findWordContaining(b.seq2Range.start),C=new Kn(w,y),S=C.intersect(b);if(m+=S.seq1Range.length,p+=S.seq2Range.length,h=h.join(C),h.seq1Range.endExclusive>=b.seq1Range.endExclusive)i.shift();else break}m+p<(h.seq1Range.length+h.seq2Range.length)*2/3&&s.push(h),o=h.getEndExclusives()}for(;i.length>0;){const l=i.shift();l.seq1Range.isEmpty||(r(l.getStarts(),l),r(l.getEndExclusives().delta(-1),l))}return OAe(t,s)}function OAe(n,e){const t=[];for(;n.length>0||e.length>0;){const i=n[0],s=e[0];let o;i&&(!s||i.seq1Range.start<s.seq1Range.start)?o=n.shift():o=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=o.seq1Range.start?t[t.length-1]=t[t.length-1].join(o):t.push(o)}return t}function FAe(n,e,t){let i=t;if(i.length===0)return i;let s=0,o;do{o=!1;const r=[i[0]];for(let a=1;a<i.length;a++){let d=function(h,f){const m=new vt(c.seq1Range.endExclusive,l.seq1Range.start);return n.getText(m).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||f.seq1Range.length+f.seq2Range.length>5)};const l=i[a],c=r[r.length-1];d(c,l)?(o=!0,r[r.length-1]=r[r.length-1].join(l)):r.push(l)}i=r}while(s++<10&&o);return i}function BAe(n,e,t){let i=t;if(i.length===0)return i;let s=0,o;do{o=!1;const a=[i[0]];for(let l=1;l<i.length;l++){let u=function(f,m){const p=new vt(d.seq1Range.endExclusive,c.seq1Range.start);if(n.countLinesIn(p)>5||p.length>500)return!1;const v=n.getText(p).trim();if(v.length>20||v.split(/\r\n|\r|\n/).length>1)return!1;const w=n.countLinesIn(f.seq1Range),y=f.seq1Range.length,C=e.countLinesIn(f.seq2Range),S=f.seq2Range.length,x=n.countLinesIn(m.seq1Range),k=m.seq1Range.length,N=e.countLinesIn(m.seq2Range),E=m.seq2Range.length,B=2*40+50;function A(O){return Math.min(O,B)}return Math.pow(Math.pow(A(w*40+y),1.5)+Math.pow(A(C*40+S),1.5),1.5)+Math.pow(Math.pow(A(x*40+k),1.5)+Math.pow(A(N*40+E),1.5),1.5)>(B**1.5)**1.5*1.3};const c=i[l],d=a[a.length-1];u(d,c)?(o=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(s++<10&&o);const r=[];return NDe(i,(a,l,c)=>{let d=l;function u(v){return v.length>0&&v.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}const h=n.extendToFullLines(l.seq1Range),f=n.getText(new vt(h.start,l.seq1Range.start));u(f)&&(d=d.deltaStart(-f.length));const m=n.getText(new vt(l.seq1Range.endExclusive,h.endExclusive));u(m)&&(d=d.deltaEnd(m.length));const p=Kn.fromOffsetPairs(a?a.getEndExclusives():Oh.zero,c?c.getStarts():Oh.max),b=d.intersect(p);r.length>0&&b.getStarts().equals(r[r.length-1].getEndExclusives())?r[r.length-1]=r[r.length-1].join(b):r.push(b)}),r}class EJ{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:DJ(this.lines[e-1]),i=e===this.lines.length?0:DJ(this.lines[e]);return 1e3-(t+i)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function DJ(n){let e=0;for(;e<n.length&&(n.charCodeAt(e)===32||n.charCodeAt(e)===9);)e++;return e}class efe{constructor(){this.dynamicProgrammingDiffing=new SAe,this.myersDiffingAlgorithm=new Jhe}computeDiff(e,t,i){if(e.length<=1&&Vi(e,t,(S,x)=>S===x))return new xT([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new xT([new Ia(new at(1,e.length+1),new at(1,t.length+1),[new ua(new D(1,1,e.length,e[e.length-1].length+1),new D(1,1,t.length,t[t.length-1].length+1))])],[],!1);const s=i.maxComputationTimeMs===0?Ok.instance:new CAe(i.maxComputationTimeMs),o=!i.ignoreTrimWhitespace,r=new Map;function a(S){let x=r.get(S);return x===void 0&&(x=r.size,r.set(S,x)),x}const l=e.map(S=>a(S.trim())),c=t.map(S=>a(S.trim())),d=new EJ(l,e),u=new EJ(c,t),h=d.length+u.length<1700?this.dynamicProgrammingDiffing.compute(d,u,s,(S,x)=>e[S]===t[x]?t[x].length===0?.1:1+Math.log(1+t[x].length):.99):this.myersDiffingAlgorithm.compute(d,u,s);let f=h.diffs,m=h.hitTimeout;f=_W(d,u,f),f=FAe(d,u,f);const p=[],b=S=>{if(o)for(let x=0;x<S;x++){const k=v+x,N=w+x;if(e[k]!==t[N]){const E=this.refineDiff(e,t,new Kn(new vt(k,k+1),new vt(N,N+1)),s,o);for(const B of E.mappings)p.push(B);E.hitTimeout&&(m=!0)}}};let v=0,w=0;for(const S of f){_v(()=>S.seq1Range.start-v===S.seq2Range.start-w);const x=S.seq1Range.start-v;b(x),v=S.seq1Range.endExclusive,w=S.seq2Range.endExclusive;const k=this.refineDiff(e,t,S,s,o);k.hitTimeout&&(m=!0);for(const N of k.mappings)p.push(N)}b(e.length-v);const y=TJ(p,e,t);let C=[];return i.computeMoves&&(C=this.computeMoves(y,e,t,l,c,s,o)),_v(()=>{function S(k,N){if(k.lineNumber<1||k.lineNumber>N.length)return!1;const E=N[k.lineNumber-1];return!(k.column<1||k.column>E.length+1)}function x(k,N){return!(k.startLineNumber<1||k.startLineNumber>N.length+1||k.endLineNumberExclusive<1||k.endLineNumberExclusive>N.length+1)}for(const k of y){if(!k.innerChanges)return!1;for(const N of k.innerChanges)if(!(S(N.modifiedRange.getStartPosition(),t)&&S(N.modifiedRange.getEndPosition(),t)&&S(N.originalRange.getStartPosition(),e)&&S(N.originalRange.getEndPosition(),e)))return!1;if(!x(k.modified,t)||!x(k.original,e))return!1}return!0}),new xT(y,C,m)}computeMoves(e,t,i,s,o,r,a){return NAe(e,t,i,s,o,r).map(d=>{const u=this.refineDiff(t,i,new Kn(d.original.toOffsetRange(),d.modified.toOffsetRange()),r,a),h=TJ(u.mappings,t,i,!0);return new Yhe(d,h)})}refineDiff(e,t,i,s,o){const a=HAe(i).toRangeMapping2(e,t),l=new C2(e,a.originalRange,o),c=new C2(t,a.modifiedRange,o),d=l.length+c.length<500?this.dynamicProgrammingDiffing.compute(l,c,s):this.myersDiffingAlgorithm.compute(l,c,s);let u=d.diffs;return u=_W(l,c,u),u=AAe(l,c,u),u=PAe(l,c,u),u=BAe(l,c,u),{mappings:u.map(f=>new ua(l.translateRange(f.seq1Range),c.translateRange(f.seq2Range))),hitTimeout:d.hitTimeout}}}function TJ(n,e,t,i=!1){const s=[];for(const o of iK(n.map(r=>WAe(r,e,t)),(r,a)=>r.original.overlapOrTouch(a.original)||r.modified.overlapOrTouch(a.modified))){const r=o[0],a=o[o.length-1];s.push(new Ia(r.original.join(a.original),r.modified.join(a.modified),o.map(l=>l.innerChanges[0])))}return _v(()=>!i&&s.length>0&&(s[0].modified.startLineNumber!==s[0].original.startLineNumber||t.length-s[s.length-1].modified.endLineNumberExclusive!==e.length-s[s.length-1].original.endLineNumberExclusive)?!1:MK(s,(o,r)=>r.original.startLineNumber-o.original.endLineNumberExclusive===r.modified.startLineNumber-o.modified.endLineNumberExclusive&&o.original.endLineNumberExclusive<r.original.startLineNumber&&o.modified.endLineNumberExclusive<r.modified.startLineNumber)),s}function WAe(n,e,t){let i=0,s=0;n.modifiedRange.endColumn===1&&n.originalRange.endColumn===1&&n.originalRange.startLineNumber+i<=n.originalRange.endLineNumber&&n.modifiedRange.startLineNumber+i<=n.modifiedRange.endLineNumber&&(s=-1),n.modifiedRange.startColumn-1>=t[n.modifiedRange.startLineNumber-1].length&&n.originalRange.startColumn-1>=e[n.originalRange.startLineNumber-1].length&&n.originalRange.startLineNumber<=n.originalRange.endLineNumber+s&&n.modifiedRange.startLineNumber<=n.modifiedRange.endLineNumber+s&&(i=1);const o=new at(n.originalRange.startLineNumber+i,n.originalRange.endLineNumber+1+s),r=new at(n.modifiedRange.startLineNumber+i,n.modifiedRange.endLineNumber+1+s);return new Ia(o,r,[n])}function HAe(n){return new lo(new at(n.seq1Range.start+1,n.seq1Range.endExclusive+1),new at(n.seq2Range.start+1,n.seq2Range.endExclusive+1))}const RJ={getLegacy:()=>new bAe,getDefault:()=>new efe};function am(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}class Wt{constructor(e,t,i,s=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=am(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Ol{constructor(e,t,i,s){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=am(Math.max(Math.min(1,t),0),3),this.l=am(Math.max(Math.min(1,i),0),3),this.a=am(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,o=e.a,r=Math.max(t,i,s),a=Math.min(t,i,s);let l=0,c=0;const d=(a+r)/2,u=r-a;if(u>0){switch(c=Math.min(d<=.5?u/(2*d):u/(2-2*d),1),r){case t:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-t)/u+2;break;case s:l=(t-i)/u+4;break}l*=60,l=Math.round(l)}return new Ol(l,c,d,o)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:s,a:o}=e;let r,a,l;if(i===0)r=a=l=s;else{const c=s<.5?s*(1+i):s+i-s*i,d=2*s-c;r=Ol._hue2rgb(d,c,t+1/3),a=Ol._hue2rgb(d,c,t),l=Ol._hue2rgb(d,c,t-1/3)}return new Wt(Math.round(r*255),Math.round(a*255),Math.round(l*255),o)}}class cu{constructor(e,t,i,s){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=am(Math.max(Math.min(1,t),0),3),this.v=am(Math.max(Math.min(1,i),0),3),this.a=am(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,o=Math.max(t,i,s),r=Math.min(t,i,s),a=o-r,l=o===0?0:a/o;let c;return a===0?c=0:o===t?c=((i-s)/a%6+6)%6:o===i?c=(s-t)/a+2:c=(t-i)/a+4,new cu(Math.round(c*60),l,o,e.a)}static toRGBA(e){const{h:t,s:i,v:s,a:o}=e,r=s*i,a=r*(1-Math.abs(t/60%2-1)),l=s-r;let[c,d,u]=[0,0,0];return t<60?(c=r,d=a):t<120?(c=a,d=r):t<180?(d=r,u=a):t<240?(d=a,u=r):t<300?(c=a,u=r):t<=360&&(c=r,u=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),u=Math.round((u+l)*255),new Wt(c,d,u,o)}}const cn=class cn{static fromHex(e){return cn.Format.CSS.parseHex(e)||cn.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:Ol.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:cu.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof Wt)this.rgba=e;else if(e instanceof Ol)this._hsla=e,this.rgba=Ol.toRGBA(e);else if(e instanceof cu)this._hsva=e,this.rgba=cu.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&Wt.equals(this.rgba,e.rgba)&&Ol.equals(this.hsla,e.hsla)&&cu.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=cn._relativeLuminanceForComponent(this.rgba.r),t=cn._relativeLuminanceForComponent(this.rgba.g),i=cn._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*i;return am(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new cn(new Ol(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new cn(new Ol(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:s,a:o}=this.rgba;return new cn(new Wt(t,i,s,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new cn(new Wt(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:s,a:o}=this.rgba;return new cn(new Wt(e.rgba.r-o*(e.rgba.r-t),e.rgba.g-o*(e.rgba.g-i),e.rgba.b-o*(e.rgba.b-s),1))}toString(){return this._toString||(this._toString=cn.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),o=t.getRelativeLuminance();return i=i*(o-s)/o,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),o=t.getRelativeLuminance();return i=i*(s-o)/s,e.darken(i)}};cn.white=new cn(new Wt(255,255,255,1)),cn.black=new cn(new Wt(0,0,0,1)),cn.red=new cn(new Wt(255,0,0,1)),cn.blue=new cn(new Wt(0,0,255,1)),cn.green=new cn(new Wt(0,255,0,1)),cn.cyan=new cn(new Wt(0,255,255,1)),cn.lightgrey=new cn(new Wt(211,211,211,1)),cn.transparent=new cn(new Wt(0,0,0,0));let oe=cn;(function(n){(function(e){(function(t){function i(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:n.Format.CSS.formatRGBA(f)}t.formatRGB=i;function s(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=s;function o(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:n.Format.CSS.formatHSLA(f)}t.formatHSL=o;function r(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=r;function a(f){const m=f.toString(16);return m.length!==2?"0"+m:m}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,m=!1){return m&&f.rgba.a===1?n.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function d(f){return f.isOpaque()?n.Format.CSS.formatHex(f):n.Format.CSS.formatRGBA(f)}t.format=d;function u(f){const m=f.length;if(m===0||f.charCodeAt(0)!==35)return null;if(m===7){const p=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),b=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),v=16*h(f.charCodeAt(5))+h(f.charCodeAt(6));return new n(new Wt(p,b,v,1))}if(m===9){const p=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),b=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),v=16*h(f.charCodeAt(5))+h(f.charCodeAt(6)),w=16*h(f.charCodeAt(7))+h(f.charCodeAt(8));return new n(new Wt(p,b,v,w/255))}if(m===4){const p=h(f.charCodeAt(1)),b=h(f.charCodeAt(2)),v=h(f.charCodeAt(3));return new n(new Wt(16*p+p,16*b+b,16*v+v))}if(m===5){const p=h(f.charCodeAt(1)),b=h(f.charCodeAt(2)),v=h(f.charCodeAt(3)),w=h(f.charCodeAt(4));return new n(new Wt(16*p+p,16*b+b,16*v+v,(16*w+w)/255))}return null}t.parseHex=u;function h(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(n.Format||(n.Format={}))})(oe||(oe={}));function tfe(n){const e=[];for(const t of n){const i=Number(t);(i||i===0&&t.replace(/\s/g,"")!=="")&&e.push(i)}return e}function jK(n,e,t,i){return{red:n/255,blue:t/255,green:e/255,alpha:i}}function wS(n,e){const t=e.index,i=e[0].length;if(!t)return;const s=n.positionAt(t);return{startLineNumber:s.lineNumber,startColumn:s.column,endLineNumber:s.lineNumber,endColumn:s.column+i}}function VAe(n,e){if(!n)return;const t=oe.Format.CSS.parseHex(e);if(t)return{range:n,color:jK(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function MJ(n,e,t){if(!n||e.length!==1)return;const s=e[0].values(),o=tfe(s);return{range:n,color:jK(o[0],o[1],o[2],t?o[3]:1)}}function PJ(n,e,t){if(!n||e.length!==1)return;const s=e[0].values(),o=tfe(s),r=new oe(new Ol(o[0],o[1]/100,o[2]/100,t?o[3]:1));return{range:n,color:jK(r.rgba.r,r.rgba.g,r.rgba.b,r.rgba.a)}}function yS(n,e){return typeof n=="string"?[...n.matchAll(e)]:n.findMatches(e)}function jAe(n){const e=[],i=yS(n,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(const s of i){const o=s.filter(c=>c!==void 0),r=o[1],a=o[2];if(!a)continue;let l;if(r==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=MJ(wS(n,s),yS(a,c),!1)}else if(r==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=MJ(wS(n,s),yS(a,c),!0)}else if(r==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=PJ(wS(n,s),yS(a,c),!1)}else if(r==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=PJ(wS(n,s),yS(a,c),!0)}else r==="#"&&(l=VAe(wS(n,s),r+a));l&&e.push(l)}return e}function zAe(n){return!n||typeof n.getValue!="function"||typeof n.positionAt!="function"?[]:jAe(n)}const AJ=new RegExp("\\bMARK:\\s*(.*)$","d"),UAe=/^-+|-+$/g;function $Ae(n,e){var i;let t=[];if(e.findRegionSectionHeaders&&((i=e.foldingRules)!=null&&i.markers)){const s=KAe(n,e);t=t.concat(s)}if(e.findMarkSectionHeaders){const s=qAe(n);t=t.concat(s)}return t}function KAe(n,e){const t=[],i=n.getLineCount();for(let s=1;s<=i;s++){const o=n.getLineContent(s),r=o.match(e.foldingRules.markers.start);if(r){const a={startLineNumber:s,startColumn:r[0].length+1,endLineNumber:s,endColumn:o.length+1};if(a.endColumn>a.startColumn){const l={range:a,...ife(o.substring(r[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function qAe(n){const e=[],t=n.getLineCount();for(let i=1;i<=t;i++){const s=n.getLineContent(i);GAe(s,i,e)}return e}function GAe(n,e,t){AJ.lastIndex=0;const i=AJ.exec(n);if(i){const s=i.indices[1][0]+1,o=i.indices[1][1]+1,r={startLineNumber:e,startColumn:s,endLineNumber:e,endColumn:o};if(r.endColumn>r.startColumn){const a={range:r,...ife(i[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}function ife(n){n=n.trim();const e=n.startsWith("-");return n=n.replace(UAe,""),{text:n,hasSeparatorLine:e}}class ZAe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=y0(e);const i=this.values,s=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(i.length+o),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=y0(e),t=y0(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=y0(e),t=y0(t);const i=this.values,s=this.prefixSum;if(e>=i.length)return!1;const o=i.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=y0(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,s=0,o=0,r=0;for(;t<=i;)if(s=t+(i-t)/2|0,o=this.prefixSum[s],r=o-this.values[s],e<r)i=s-1;else if(e>=o)t=s+1;else break;return new nfe(s,e-r)}}class YAe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new nfe(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=h4(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const i=this._values[e],s=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=s+i;for(let o=0;o<i;o++)this._indexBySum[s+o]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class nfe{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class XAe{constructor(e,t,i,s){this._uri=e,this._lines=t,this._eol=i,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new U(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let s=0;s<t;s++)i[s]=this._lines[s].length+e;this._lineStarts=new ZAe(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=Bu(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const s=new Uint32Array(i.length-1);for(let o=1;o<i.length;o++)this._lines.splice(e.lineNumber+o-1,0,i[o]),s[o-1]=i[o].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}const OJ=60*1e3;class QAe extends G{constructor(e,t,i=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const s=new LK;s.cancelAndSet(()=>this._checkStopModelSync(),Math.round(OJ/2)),this._register(s)}}dispose(){for(const e in this._syncedModels)gi(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t=!1){for(const i of e){const s=i.toString();this._syncedModels[s]||this._beginModelSync(i,t),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>OJ&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;const s=e.toString();this._proxy.$acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const o=new ne;o.add(i.onDidChangeContent(r=>{this._proxy.$acceptModelChanged(s.toString(),r)})),o.add(i.onWillDispose(()=>{this._stopModelSync(s)})),o.add(Pe(()=>{this._proxy.$acceptRemovedModel(s)})),this._syncedModels[s]=o}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],gi(t)}}class JAe{constructor(){this._models=Object.create(null)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}$acceptNewModel(e){this._models[e.url]=new eOe(Be.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class eOe extends XAe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const s=this._lines[i],o=this.offsetAt(new U(i+1,1)),r=s.matchAll(e);for(const a of r)(a.index||a.index===0)&&(a.index=a.index+o),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=yk(e.column,cK(t),this._lines[e.lineNumber-1],0);return i?new D(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let s=0,o="",r=0,a=[];return{*[Symbol.iterator](){for(;;)if(r<a.length){const l=o.substring(a[r].start,a[r].end);r+=1,yield l}else if(s<t.length)o=t[s],a=i(o,e),r=0,s+=1;else break}}}getLineWords(e,t){const i=this._lines[e-1],s=this._wordenize(i,t),o=[];for(const r of s)o.push({word:i.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return o}_wordenize(e,t){const i=[];let s;for(t.lastIndex=0;(s=t.exec(e))&&s[0].length!==0;)i.push({start:s.index,end:s.index+s[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,s=e.endLineNumber-1,o=[];o.push(this._lines[i].substring(e.startColumn-1));for(let r=i+1;r<s;r++)o.push(this._lines[r]);return o.push(this._lines[s].substring(0,e.endColumn-1)),o.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!U.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,s=!1;if(t<1)t=1,i=1,s=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,s=!0;else{const o=this._lines[t-1].length+1;i<1?(i=1,s=!0):i>o&&(i=o,s=!0)}return s?{lineNumber:t,column:i}:e}}const lA=class lA{constructor(){this._workerTextModelSyncServer=new JAe}dispose(){}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}_getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,i){const s=this._getModel(e);return s?BK.computeUnicodeHighlights(s,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const i=this._getModel(e);return i?$Ae(i,t):[]}async $computeDiff(e,t,i,s){const o=this._getModel(e),r=this._getModel(t);return!o||!r?null:LT.computeDiff(o,r,i,s)}static computeDiff(e,t,i,s){const o=s==="advanced"?RJ.getDefault():RJ.getLegacy(),r=e.getLinesContent(),a=t.getLinesContent(),l=o.computeDiff(r,a,i),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function d(u){return u.map(h=>{var f;return[h.original.startLineNumber,h.original.endLineNumberExclusive,h.modified.startLineNumber,h.modified.endLineNumberExclusive,(f=h.innerChanges)==null?void 0:f.map(m=>[m.originalRange.startLineNumber,m.originalRange.startColumn,m.originalRange.endLineNumber,m.originalRange.endColumn,m.modifiedRange.startLineNumber,m.modifiedRange.startColumn,m.modifiedRange.endLineNumber,m.modifiedRange.endColumn])]})}return{identical:c,quitEarly:l.hitTimeout,changes:d(l.changes),moves:l.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,d(u.changes)])}}static _modelsAreIdentical(e,t){const i=e.getLineCount(),s=t.getLineCount();if(i!==s)return!1;for(let o=1;o<=i;o++){const r=e.getLineContent(o),a=t.getLineContent(o);if(r!==a)return!1}return!0}async $computeMoreMinimalEdits(e,t,i){const s=this._getModel(e);if(!s)return t;const o=[];let r;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return D.compareRangesUsingStarts(l.range,c.range);const d=l.range?0:1,u=c.range?0:1;return d-u});let a=0;for(let l=1;l<t.length;l++)D.getEndPosition(t[a].range).equals(D.getStartPosition(t[l].range))?(t[a].range=D.fromPositions(D.getStartPosition(t[a].range),D.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:d}of t){if(typeof d=="number"&&(r=d),D.isEmpty(l)&&!c)continue;const u=s.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,s.eol),u===c)continue;if(Math.max(c.length,u.length)>LT._diffLimit){o.push({range:l,text:c});continue}const h=zPe(u,c,i),f=s.offsetAt(D.lift(l).getStartPosition());for(const m of h){const p=s.positionAt(f+m.originalStart),b=s.positionAt(f+m.originalStart+m.originalLength),v={text:c.substr(m.modifiedStart,m.modifiedLength),range:{startLineNumber:p.lineNumber,startColumn:p.column,endLineNumber:b.lineNumber,endColumn:b.column}};s.getValueInRange(v.range)!==v.text&&o.push(v)}}return typeof r=="number"&&o.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),o}async $computeLinks(e){const t=this._getModel(e);return t?GPe(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?zAe(t):null}async $textualSuggest(e,t,i,s){const o=new ds,r=new RegExp(i,s),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const d of c.words(r))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>LT._suggestionsLimit))break e}}return{words:Array.from(a),duration:o.elapsed()}}async $computeWordRanges(e,t,i,s){const o=this._getModel(e);if(!o)return Object.create(null);const r=new RegExp(i,s),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=o.getLineWords(l,r);for(const d of c){if(!isNaN(Number(d.word)))continue;let u=a[d.word];u||(u=[],a[d.word]=u),u.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a}async $navigateValueSet(e,t,i,s,o){const r=this._getModel(e);if(!r)return null;const a=new RegExp(s,o);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=r.getValueInRange(t),c=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const d=r.getValueInRange(c);return hW.INSTANCE.navigateValueSet(t,l,c,d,i)}};lA._diffLimit=1e5,lA._suggestionsLimit=1e4;let bW=lA;class LT extends bW{constructor(e,t){super(),this._host=e,this._foreignModuleFactory=t,this._foreignModule=null}async $ping(){return"pong"}$loadForeignModule(e,t,i){const r={host:ODe(i,(a,l)=>this._host.$fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(r,t),Promise.resolve(F9(this._foreignModule))):new Promise((a,l)=>{const c=d=>{this._foreignModule=d.create(r,t),a(F9(this._foreignModule))};{const d=b4.asBrowserUri(`${e}.js`).toString(!0);We(()=>import(`${d}`),[]).then(c).catch(l)}})}$fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}typeof importScripts=="function"&&(globalThis.monaco=zue());const F4=kt("textResourceConfigurationService"),sfe=kt("textResourcePropertiesService"),xe=kt("ILanguageFeaturesService");var zK=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},t_=function(n,e){return function(t,i){e(t,i,n)}};const FJ=5*60*1e3;function i_(n,e){const t=n.getModel(e);return!(!t||t.isTooLargeForSyncing())}let vW=class extends G{constructor(e,t,i,s,o,r){super(),this._languageConfigurationService=o,this._modelService=t,this._workerManager=this._register(new wW(e,this._modelService)),this._logService=s,this._register(r.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(a,l)=>{if(!i_(this._modelService,a.uri))return Promise.resolve({links:[]});const d=await(await this._workerWithResources([a.uri])).$computeLinks(a.uri.toString());return d&&{links:d}}})),this._register(r.completionProvider.register("*",new tOe(this._workerManager,i,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return i_(this._modelService,e)}async computedUnicodeHighlights(e,t,i){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,i)}async computeDiff(e,t,i,s){const r=await(await this._workerWithResources([e,t],!0)).$computeDiff(e.toString(),t.toString(),i,s);if(!r)return null;return{identical:r.identical,quitEarly:r.quitEarly,changes:l(r.changes),moves:r.moves.map(c=>new Yhe(new lo(new at(c[0],c[1]),new at(c[2],c[3])),l(c[4])))};function l(c){return c.map(d=>{var u;return new Ia(new at(d[0],d[1]),new at(d[2],d[3]),(u=d[4])==null?void 0:u.map(h=>new ua(new D(h[0],h[1],h[2],h[3]),new D(h[4],h[5],h[6],h[7]))))})}}async computeMoreMinimalEdits(e,t,i=!1){if(ho(t)){if(!i_(this._modelService,e))return Promise.resolve(t);const s=ds.create(),o=this._workerWithResources([e]).then(r=>r.$computeMoreMinimalEdits(e.toString(),t,i));return o.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),s.elapsed())),Promise.race([o,_f(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return i_(this._modelService,e)}async navigateValueSet(e,t,i){const s=this._modelService.getModel(e);if(!s)return null;const o=this._languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),r=o.source,a=o.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,i,r,a)}canComputeWordRanges(e){return i_(this._modelService,e)}async computeWordRanges(e,t){const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const s=this._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),o=s.source,r=s.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,o,r)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(e,t)}};vW=zK([t_(1,Ei),t_(2,F4),t_(3,Os),t_(4,Yi),t_(5,xe)],vW);class tOe{constructor(e,t,i,s){this.languageConfigurationService=s,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if(i.wordBasedSuggestions==="off")return;const s=[];if(i.wordBasedSuggestions==="currentDocument")i_(this._modelService,e.uri)&&s.push(e.uri);else for(const u of this._modelService.getModels())i_(this._modelService,u.uri)&&(u===e?s.unshift(u.uri):(i.wordBasedSuggestions==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&s.push(u.uri));if(s.length===0)return;const o=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),a=r?new D(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):D.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=await(await this._workerManager.withWorker()).textualSuggest(s,r==null?void 0:r.word,o);if(d)return{duration:d.duration,suggestions:d.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}}}let wW=class extends G{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new NK).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(FJ/2),ui),this._register(this._modelService.onModelRemoved(s=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>FJ&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new S2(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};wW=zK([t_(1,Ei)],wW);class iOe{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let S2=class extends G{constructor(e,t,i){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=i,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(rPe(this._workerDescriptor)),fW.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){rW(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return rW(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new iOe(new LT(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new QAe(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject(zTe());const i=await this._getProxy();return this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i}async textualSuggest(e,t,i){const s=await this.workerWithSyncedResources(e),o=i.source,r=i.flags;return s.$textualSuggest(e.map(a=>a.toString()),t,o,r)}dispose(){super.dispose(),this._disposed=!0}};S2=zK([t_(2,Ei)],S2);var il;(function(n){n.DARK="dark",n.LIGHT="light",n.HIGH_CONTRAST_DARK="hcDark",n.HIGH_CONTRAST_LIGHT="hcLight"})(il||(il={}));function Qc(n){return n===il.HIGH_CONTRAST_DARK||n===il.HIGH_CONTRAST_LIGHT}function kC(n){return n===il.DARK||n===il.HIGH_CONTRAST_DARK}const Vn=kt("themeService");function sn(n){return{id:n}}function yW(n){switch(n){case il.DARK:return"vs-dark";case il.HIGH_CONTRAST_DARK:return"hc-black";case il.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const ofe={ThemingContribution:"base.contributions.theming"};class nOe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new $}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Pe(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const rfe=new nOe;Zi.add(ofe.ThemingContribution,rfe);function yl(n){return rfe.onColorThemeChange(n)}class sOe extends G{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var oOe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},rOe=function(n,e){return function(t,i){e(t,i,n)}};let CW=class extends G{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new $),this._onCodeEditorAdd=this._register(new $),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new $),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new $),this._onDiffEditorAdd=this._register(new $),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new $),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new So,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorationsByType(e))))}setModelProperty(e,t,i){const s=e.toString();let o;this._modelProperties.has(s)?o=this._modelProperties.get(s):(o=new Map,this._modelProperties.set(s,o)),o.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}async openCodeEditor(e,t,i){for(const s of this._codeEditorOpenHandlers){const o=await s(e,t,i);if(o!==null)return o}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return Pe(t)}};CW=oOe([rOe(0,Vn)],CW);var aOe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},BJ=function(n,e){return function(t,i){e(t,i,n)}};let x2=class extends CW{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(i,s,o)=>s?this.doOpenEditor(s,i):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const o=t.resource.scheme;if(o===tt.http||o===tt.https)return xhe(t.resource.toString()),e}return null}const s=t.options?t.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")e.setSelection(s),e.revealRangeInCenter(s,1);else{const o={lineNumber:s.startLineNumber,column:s.startColumn};e.setPosition(o),e.revealPositionInCenter(o,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};x2=aOe([BJ(0,qe),BJ(1,Vn)],x2);Tt(Ut,x2,0);const up=kt("layoutService");var afe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},lfe=function(n,e){return function(t,i){e(t,i,n)}};let L2=class{get mainContainer(){var e;return((e=nK(this._codeEditorService.listCodeEditors()))==null?void 0:e.getContainerDomNode())??ui.document.body}get activeContainer(){const e=this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor();return(e==null?void 0:e.getContainerDomNode())??this.mainContainer}get mainContainerDimension(){return qm(this.mainContainer)}get activeContainerDimension(){return qm(this.activeContainer)}get containers(){return Yl(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())==null||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=pe.None,this.onDidLayoutActiveContainer=pe.None,this.onDidLayoutContainer=pe.None,this.onDidChangeActiveContainer=pe.None,this.onDidAddContainer=pe.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};L2=afe([lfe(0,Ut)],L2);let SW=class extends L2{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};SW=afe([lfe(1,Ut)],SW);Tt(up,L2,1);var Fk;(function(n){n[n.Ignore=0]="Ignore",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error"})(Fk||(Fk={}));(function(n){const e="error",t="warning",i="warn",s="info",o="ignore";function r(l){return l?cw(e,l)?n.Error:cw(t,l)||cw(i,l)?n.Warning:cw(s,l)?n.Info:n.Ignore:n.Ignore}n.fromValue=r;function a(l){switch(l){case n.Error:return e;case n.Warning:return t;case n.Info:return s;default:return o}}n.toString=a})(Fk||(Fk={}));const vn=Fk,NI=kt("dialogService");var B4=vn;const wn=kt("notificationService");class lOe{}const UK=kt("undoRedoService");class cfe{constructor(e,t){this.resource=e,this.elements=t}}const Fw=class Fw{constructor(){this.id=Fw._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Fw._ID=0,Fw.None=new Fw;let xW=Fw;const Bw=class Bw{constructor(){this.id=Bw._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Bw._ID=0,Bw.None=new Bw;let n_=Bw;var cOe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},WJ=function(n,e){return function(t,i){e(t,i,n)}};function qE(n){return n.scheme===tt.file?n.fsPath:n.path}let dfe=0;class GE{constructor(e,t,i,s,o,r,a){this.id=++dfe,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=o,this.sourceId=r,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class HJ{constructor(e,t){this.resourceLabel=e,this.reason=t}}class VJ{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,s]of this.elements)(s.reason===0?e:t).push(s.resourceLabel);const i=[];return e.length>0&&i.push(_({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(_({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class dOe{constructor(e,t,i,s,o,r,a){this.id=++dfe,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=s,this.groupOrder=o,this.sourceId=r,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new VJ),this.removedResources.has(t)||this.removedResources.set(t,new HJ(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new VJ),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new HJ(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class ufe{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,s=this._past.length;i<s;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new cfe(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,s=0,o=-1;for(let a=0,l=this._past.length;a<l;a++,s++){const c=this._past[a];i&&(s>=t||c.id!==e.elements[s])&&(i=!1,o=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let a=this._future.length-1;a>=0;a--,s++){const l=this._future[a];i&&(s>=t||l.id!==e.elements[s])&&(i=!1,r=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}o!==-1&&(this._past=this._past.slice(0,o)),r!==-1&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class M3{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const hfe=new ufe("","");hfe.locked=!0;let LW=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=xW.None,i=n_.None){if(e.type===0){const s=qE(e.resource),o=this.getUriComparisonKey(e.resource);this._pushElement(new GE(e,s,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const s=new Set,o=[],r=[];for(const a of e.resources){const l=qE(a),c=this.getUriComparisonKey(a);s.has(c)||(s.add(c),o.push(l),r.push(c))}o.length===1?this._pushElement(new GE(e,o[0],r[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new dOe(e,o,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const s=e.resourceLabels[t],o=e.strResources[t];let r;this._editStacks.has(o)?r=this._editStacks.get(o):(r=new ufe(s,o),this._editStacks.set(o,r)),r.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const s=i.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),s=new Map;for(const o of i){const r=qE(o.resource),a=this.getUriComparisonKey(o.resource),l=new GE(o,r,a,0,0,0,0);s.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitPastWorkspaceElement(e,s)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),s=new Map;for(const o of i){const r=qE(o.resource),a=this.getUriComparisonKey(o.resource),l=new GE(o,r,a,0,0,0,0);s.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitFutureWorkspaceElement(e,s)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const s=this.getUriComparisonKey(e);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new cfe(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[s,o]of this._editStacks){const r=o.getClosestPastElement();r&&r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,i=s)}return[t,i]}canUndo(e){if(e instanceof n_){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){et(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,s,o){const r=this._acquireLocks(i);let a;try{a=t()}catch(l){return r(),s.dispose(),this._onError(l,e)}return a?a.then(()=>(r(),s.dispose(),o()),l=>(r(),s.dispose(),this._onError(l,e))):(r(),s.dispose(),o())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return G.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?G.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(G.None);const i=e.actual.prepareUndoRedo();return i?m4(i)?t(i):i.then(s=>t(s)):t(G.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||hfe);return new M3(t)}_tryToSplitAndUndo(e,t,i,s){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(s),new ZE(this._undo(e,0,!0));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(s),new ZE}_checkWorkspaceUndo(e,t,i,s){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,_({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,_({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndUndo(e,t,null,_({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const r=[];for(const a of i.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,_({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,_({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const s=this._getAffectedEditStacks(t),o=this._checkWorkspaceUndo(e,t,s,!1);return o?o.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,s,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const s=t.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,s){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(d){d[d.All=0]="All",d[d.This=1]="This",d[d.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:vn.Info,message:_("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:_({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",i.editStacks.length),run:()=>a.All},{label:_({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,i,!1);if(c)return c.returnValue;s=!0}let o;try{o=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const r=this._checkWorkspaceUndo(e,t,i,!0);if(r)return o.dispose(),r.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,o,()=>this._continueUndoInGroup(t.groupId,s))}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const s=_({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(s);return}return this._invokeResourcePrepare(t,s=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new M3([e]),s,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[s,o]of this._editStacks){const r=o.getClosestPastElement();r&&r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,i=s)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof n_){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const s=this._editStacks.get(e),o=s.getClosestPastElement();if(!o)return;if(o.groupId){const[a,l]=this._findClosestUndoElementInGroup(o.groupId);if(o!==a&&l)return this._undo(l,t,i)}if((o.sourceId!==t||o.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,o);try{return o.type===1?this._workspaceUndo(e,o,i):this._resourceUndo(s,o,i)}finally{}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:_("confirmDifferentSource","Would you like to undo '{0}'?",i.label),primaryButton:_({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:_("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[s,o]of this._editStacks){const r=o.getClosestFutureElement();r&&r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,i=s)}return[t,i]}canRedo(e){if(e instanceof n_){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,s){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(s),new ZE(this._redo(e));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(s),new ZE}_checkWorkspaceRedo(e,t,i,s){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,_({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,_({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndRedo(e,t,null,_({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const r=[];for(const a of i.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,_({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,_({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceRedo(e,t,i,!1);return s?s.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let s;try{s=await this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const o=this._checkWorkspaceRedo(e,t,i,!0);if(o)return s.dispose(),o.returnValue;for(const r of i.editStacks)r.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,s,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=_({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new M3([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[s,o]of this._editStacks){const r=o.getClosestFutureElement();r&&r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,i=s)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof n_){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[s,o]=this._findClosestRedoElementInGroup(i.groupId);if(i!==s&&o)return this._redo(o)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};LW=cOe([WJ(0,NI),WJ(1,wn)],LW);class ZE{constructor(e){this.returnValue=e}}Tt(UK,LW,1);function vo(n,e,t){return Math.min(Math.max(n,e),t)}class ffe{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class uOe{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const $K=kt("environmentService");var hOe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},jJ=function(n,e){return function(t,i){e(t,i,n)}};const Fa=kt("ILanguageFeatureDebounceService");var k2;(function(n){const e=new WeakMap;let t=0;function i(s){let o=e.get(s);return o===void 0&&(o=++t,e.set(s,o)),o}n.of=i})(k2||(k2={}));class fOe{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class gOe{constructor(e,t,i,s,o,r){this._logService=e,this._name=t,this._registry=i,this._default=s,this._min=o,this._max=r,this._cache=new Hu(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>w4(k2.of(i),t),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?vo(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let s=this._cache.get(i);s||(s=new uOe(6),this._cache.set(i,s));const o=vo(s.update(t),this._min,this._max);return _4(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${o}ms`),o}_overall(){const e=new ffe;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return vo(e,this._min,this._max)}}let kW=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){const s=(i==null?void 0:i.min)??50,o=(i==null?void 0:i.max)??s**2,r=(i==null?void 0:i.key)??void 0,a=`${k2.of(e)},${s}${r?","+r:""}`;let l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new fOe(s*1.5)):l=new gOe(this._logService,t,e,this._overallAverage()|0||s*1.5,s,o),this._data.set(a,l)),l}_overallAverage(){const e=new ffe;for(const t of this._data.values())e.update(t.default());return e.value}};kW=hOe([jJ(0,Os),jJ(1,$K)],kW);Tt(Fa,kW,1);class Jo{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let i="mtk"+this.getForeground(e);const s=this.getFontStyle(e);return s&1&&(i+=" mtki"),s&2&&(i+=" mtkb"),s&4&&(i+=" mtku"),s&8&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),s=this.getFontStyle(e);let o=`color: ${t[i]};`;s&1&&(o+="font-style: italic;"),s&2&&(o+="font-weight: bold;");let r="";return s&4&&(r+=" underline"),s&8&&(r+=" line-through"),r&&(o+=`text-decoration:${r};`),o}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(i&1),bold:!!(i&2),underline:!!(i&4),strikethrough:!!(i&8)}}}function Zm(n){let e=0,t=0,i=0,s=0;for(let o=0,r=n.length;o<r;o++){const a=n.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<r&&n.charCodeAt(o+1)===10?(s|=2,o++):s|=3,i=o+1):a===10&&(s|=1,e===0&&(t=o),e++,i=o+1)}return e===0&&(t=n.length),[e,t,n.length-i,s]}class Ox{static create(e,t){return new Ox(e,new N2(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new D(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,i,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber,[s,o,r]=this._tokens.split(t,e.startColumn-1,i,e.endColumn-1);return[new Ox(this._startLineNumber,s),new Ox(this._startLineNumber+r,o)]}applyEdit(e,t){const[i,s,o]=Zm(t);this.acceptEdit(e,i,s,o,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,i,s,o){this._acceptDeleteRange(e),this._acceptInsertText(new U(e.startLineNumber,e.startColumn),t,i,s,o),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;if(i<0){const o=i-t;this._startLineNumber-=o;return}const s=this._tokens.getMaxDeltaLine();if(!(t>=s+1)){if(t<0&&i>=s+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const o=-t;this._startLineNumber-=o,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,i,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,i,e.endColumn-1)}}_acceptInsertText(e,t,i,s,o){if(t===0&&i===0)return;const r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();r>=a+1||this._tokens.acceptInsertText(r,e.column-1,t,i,s,o)}}class N2{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let i=0;i<this._tokenCount;i++)t.push(`(${this._getDeltaLine(i)+e},${this._getStartCharacter(i)}-${this._getEndCharacter(i)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),s=this._getEndCharacter(e-1);return new D(0,t+1,i,s+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){const s=t+Math.floor((i-t)/2),o=this._getDeltaLine(s);if(o<e)t=s+1;else if(o>e)i=s-1;else{let r=s;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let a=s;for(;a<i&&this._getDeltaLine(a+1)===e;)a++;return new zJ(this._tokens.subarray(4*r,4*a+4))}}return this._getDeltaLine(t)===e?new zJ(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,s){const o=this._tokens,r=this._tokenCount;let a=0,l=!1,c=0;for(let d=0;d<r;d++){const u=4*d,h=o[u],f=o[u+1],m=o[u+2],p=o[u+3];if((h>e||h===e&&m>=t)&&(h<i||h===i&&f<=s))l=!0;else{if(a===0&&(c=h),l){const b=4*a;o[b]=h-c,o[b+1]=f,o[b+2]=m,o[b+3]=p}a++}}return this._tokenCount=a,c}split(e,t,i,s){const o=this._tokens,r=this._tokenCount,a=[],l=[];let c=a,d=0,u=0;for(let h=0;h<r;h++){const f=4*h,m=o[f],p=o[f+1],b=o[f+2],v=o[f+3];if(m>e||m===e&&b>=t){if(m<i||m===i&&p<=s)continue;c!==l&&(c=l,d=0,u=m)}c[d++]=m-u,c[d++]=p,c[d++]=b,c[d++]=v}return[new N2(new Uint32Array(a)),new N2(new Uint32Array(l)),u]}acceptDeleteRange(e,t,i,s,o){const r=this._tokens,a=this._tokenCount,l=s-t;let c=0,d=!1;for(let u=0;u<a;u++){const h=4*u;let f=r[h],m=r[h+1],p=r[h+2];const b=r[h+3];if(f<t||f===t&&p<=i){c++;continue}else if(f===t&&m<i)f===s&&p>o?p-=o-i:p=i;else if(f===t&&m===i)if(f===s&&p>o)p-=o-i;else{d=!0;continue}else if(f<s||f===s&&m<o)if(f===s&&p>o)f=t,m=i,p=m+(p-o);else{d=!0;continue}else if(f>s){if(l===0&&!d){c=a;break}f-=l}else if(f===s&&m>=o)e&&f===0&&(m+=e,p+=e),f-=l,m-=o-i,p-=o-i;else throw new Error("Not possible!");const v=4*c;r[v]=f,r[v+1]=m,r[v+2]=p,r[v+3]=b,c++}this._tokenCount=c}acceptInsertText(e,t,i,s,o,r){const a=i===0&&s===1&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){const u=4*d;let h=l[u],f=l[u+1],m=l[u+2];if(!(h<e||h===e&&m<t)){if(h===e&&m===t)if(a)m+=1;else continue;else if(h===e&&f<t&&t<m)i===0?m+=s:m=t;else{if(h===e&&f===t&&a)continue;if(h===e)if(h+=i,i===0)f+=s,m+=s;else{const p=m-f;f=o+(f-t),m=f+p}else h+=i}l[u]=h,l[u+1]=f,l[u+2]=m}}}}class zJ{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var mOe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},P3=function(n,e){return function(t,i){e(t,i,n)}};let NW=class{constructor(e,t,i,s){this._legend=e,this._themeService=t,this._languageService=i,this._logService=s,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new IW}getMetadata(e,t,i){const s=this._languageService.languageIdCodec.encodeLanguageId(i),o=this._hashTable.get(e,t,s);let r;if(o)r=o.metadata;else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let u=0;c>0&&u<this._legend.tokenModifiers.length;u++)c&1&&l.push(this._legend.tokenModifiers[u]),c=c>>1;const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);if(typeof d>"u")r=2147483647;else{if(r=0,typeof d.italic<"u"){const u=(d.italic?1:0)<<11;r|=u|1}if(typeof d.bold<"u"){const u=(d.bold?2:0)<<11;r|=u|2}if(typeof d.underline<"u"){const u=(d.underline?4:0)<<11;r|=u|4}if(typeof d.strikethrough<"u"){const u=(d.strikethrough?8:0)<<11;r|=u|8}if(d.foreground){const u=d.foreground<<15;r|=u|16}r===0&&(r=2147483647)}}else r=2147483647,a="not-in-legend";this._hashTable.add(e,t,s,r)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,s,o){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${s} is outside the previous data (length ${o}).`))}};NW=mOe([P3(1,Vn),P3(2,ji),P3(3,Os)],NW);function gfe(n,e,t){const i=n.data,s=n.data.length/5|0,o=Math.max(Math.ceil(s/1024),400),r=[];let a=0,l=1,c=0;for(;a<s;){const d=a;let u=Math.min(d+o,s);if(u<s){let w=u;for(;w-1>d&&i[5*w]===0;)w--;if(w-1===d){let y=u;for(;y+1<s&&i[5*y]===0;)y++;u=y}else u=w}let h=new Uint32Array((u-d)*4),f=0,m=0,p=0,b=0;for(;a<u;){const w=5*a,y=i[w],C=i[w+1],S=l+y|0,x=y===0?c+C|0:C,k=i[w+2],N=x+k|0,E=i[w+3],B=i[w+4];if(N<=x)e.warnInvalidLengthSemanticTokens(S,x+1);else if(p===S&&b>x)e.warnOverlappingSemanticTokens(S,x+1);else{const A=e.getMetadata(E,B,t);A!==2147483647&&(m===0&&(m=S),h[f]=S-m,h[f+1]=x,h[f+2]=N,h[f+3]=A,f+=4,p=S,b=N)}l=S,c=x,a++}f!==h.length&&(h=h.subarray(0,f));const v=Ox.create(m,h);r.push(v)}return r}class pOe{constructor(e,t,i,s){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=s,this.next=null}}const gh=class gh{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=gh._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<gh._SIZES.length?2/3*this._currentLength:0),this._elements=[],gh._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const s=this._hashFunc(e,t,i);let o=this._elements[s];for(;o;){if(o.tokenTypeIndex===e&&o.tokenModifierSet===t&&o.languageId===i)return o;o=o.next}return null}add(e,t,i,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const o=this._elements;this._currentLengthIndex++,this._currentLength=gh._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<gh._SIZES.length?2/3*this._currentLength:0),this._elements=[],gh._nullOutEntries(this._elements,this._currentLength);for(const r of o){let a=r;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new pOe(e,t,i,s))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};gh._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];let IW=gh;const W4=kt("semanticTokensStylingService");var _Oe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},A3=function(n,e){return function(t,i){e(t,i,n)}};let EW=class extends G{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new NW(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};EW=_Oe([A3(0,Vn),A3(1,Os),A3(2,ji)],EW);Tt(W4,EW,1);function zf(n){return n===47||n===92}function mfe(n){return n.replace(/[\\/]/g,xn.sep)}function bOe(n){return n.indexOf("/")===-1&&(n=mfe(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),n}function UJ(n,e=xn.sep){if(!n)return"";const t=n.length,i=n.charCodeAt(0);if(zf(i)){if(zf(n.charCodeAt(1))&&!zf(n.charCodeAt(2))){let o=3;const r=o;for(;o<t&&!zf(n.charCodeAt(o));o++);if(r!==o&&!zf(n.charCodeAt(o+1))){for(o+=1;o<t;o++)if(zf(n.charCodeAt(o)))return n.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(pfe(i)&&n.charCodeAt(1)===58)return zf(n.charCodeAt(2))?n.slice(0,2)+e:n.slice(0,2);let s=n.indexOf("://");if(s!==-1){for(s+=3;s<t;s++)if(zf(n.charCodeAt(s)))return n.slice(0,s+1)}return""}function DW(n,e,t,i=Zc){if(n===e)return!0;if(!n||!e||e.length>n.length)return!1;if(t){if(!_K(n,e))return!1;if(e.length===n.length)return!0;let o=e.length;return e.charAt(e.length-1)===i&&o--,n.charAt(o)===i}return e.charAt(e.length-1)!==i&&(e+=i),n.indexOf(e)===0}function pfe(n){return n>=65&&n<=90||n>=97&&n<=122}function vOe(n,e=As){return e?pfe(n.charCodeAt(0))&&n.charCodeAt(1)===58:!1}const YE="**",$J="/",kT="[/\\\\]",NT="[^/\\\\]",wOe=/\//g;function KJ(n,e){switch(n){case 0:return"";case 1:return`${NT}*?`;default:return`(?:${kT}|${NT}+${kT}${e?`|${kT}${NT}+`:""})*?`}}function qJ(n,e){if(!n)return[];const t=[];let i=!1,s=!1,o="";for(const r of n){switch(r){case e:if(!i&&!s){t.push(o),o="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}o+=r}return o&&t.push(o),t}function _fe(n){if(!n)return"";let e="";const t=qJ(n,$J);if(t.every(i=>i===YE))e=".*";else{let i=!1;t.forEach((s,o)=>{if(s===YE){if(i)return;e+=KJ(2,o===t.length-1)}else{let r=!1,a="",l=!1,c="";for(const d of s){if(d!=="}"&&r){a+=d;continue}if(l&&(d!=="]"||!c)){let u;d==="-"?u=d:(d==="^"||d==="!")&&!c?u="^":d===$J?u="":u=Da(d),c+=u;continue}switch(d){case"{":r=!0;continue;case"[":l=!0;continue;case"}":{const h=`(?:${qJ(a,",").map(f=>_fe(f)).join("|")})`;e+=h,r=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=NT;continue;case"*":e+=KJ(1);continue;default:e+=Da(d)}}o<t.length-1&&(t[o+1]!==YE||o+2<t.length)&&(e+=kT)}i=s===YE})}return e}const yOe=/^\*\*\/\*\.[\w\.-]+$/,COe=/^\*\*\/([\w\.-]+)\/?$/,SOe=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,xOe=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,LOe=/^\*\*((\/[\w\.-]+)+)\/?$/,kOe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,GJ=new Hu(1e4),ZJ=function(){return!1},_u=function(){return null};function KK(n,e){if(!n)return _u;let t;typeof n!="string"?t=n.pattern:t=n,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let s=GJ.get(i);if(s)return YJ(s,n);let o;return yOe.test(t)?s=NOe(t.substr(4),t):(o=COe.exec(O3(t,e)))?s=IOe(o[1],t):(e.trimForExclusions?xOe:SOe).test(t)?s=EOe(t,e):(o=LOe.exec(O3(t,e)))?s=XJ(o[1].substr(1),t,!0):(o=kOe.exec(O3(t,e)))?s=XJ(o[1],t,!1):s=DOe(t),GJ.set(i,s),YJ(s,n)}function YJ(n,e){if(typeof e=="string")return n;const t=function(i,s){return DW(i,e.base,!Mo)?n(wI(i.substr(e.base.length),Zc),s):null};return t.allBasenames=n.allBasenames,t.allPaths=n.allPaths,t.basenames=n.basenames,t.patterns=n.patterns,t}function O3(n,e){return e.trimForExclusions&&n.endsWith("/**")?n.substr(0,n.length-2):n}function NOe(n,e){return function(t,i){return typeof t=="string"&&t.endsWith(n)?e:null}}function IOe(n,e){const t=`/${n}`,i=`\\${n}`,s=function(r,a){return typeof r!="string"?null:a?a===n?e:null:r===n||r.endsWith(t)||r.endsWith(i)?e:null},o=[n];return s.basenames=o,s.patterns=[e],s.allBasenames=o,s}function EOe(n,e){const t=vfe(n.slice(1,-1).split(",").map(a=>KK(a,e)).filter(a=>a!==_u),n),i=t.length;if(!i)return _u;if(i===1)return t[0];const s=function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return n;return null},o=t.find(a=>!!a.allBasenames);o&&(s.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(s.allPaths=r),s}function XJ(n,e,t){const i=Zc===xn.sep,s=i?n:n.replace(wOe,Zc),o=Zc+s,r=xn.sep+n;let a;return t?a=function(l,c){return typeof l=="string"&&(l===s||l.endsWith(o)||!i&&(l===n||l.endsWith(r)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===s||!i&&l===n)?e:null},a.allPaths=[(t?"*/":"./")+n],a}function DOe(n){try{const e=new RegExp(`^${_fe(n)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?n:null}}catch{return _u}}function TOe(n,e,t){return!n||typeof e!="string"?!1:bfe(n)(e,void 0,t)}function bfe(n,e={}){if(!n)return ZJ;if(typeof n=="string"||ROe(n)){const t=KK(n,e);if(t===_u)return ZJ;const i=function(s,o){return!!t(s,o)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return MOe(n,e)}function ROe(n){const e=n;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function MOe(n,e){const t=vfe(Object.getOwnPropertyNames(n).map(a=>POe(a,n[a],e)).filter(a=>a!==_u)),i=t.length;if(!i)return _u;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(d,u){let h;for(let f=0,m=t.length;f<m;f++){const p=t[f](d,u);if(typeof p=="string")return p;K8(p)&&(h||(h=[]),h.push(p))}return h?(async()=>{for(const f of h){const m=await f;if(typeof m=="string")return m}return null})():null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((d,u)=>u.allPaths?d.concat(u.allPaths):d,[]);return c.length&&(a.allPaths=c),a}const s=function(a,l,c){let d,u;for(let h=0,f=t.length;h<f;h++){const m=t[h];m.requiresSiblings&&c&&(l||(l=rm(a)),d||(d=l.substr(0,l.length-mRe(a).length)));const p=m(a,l,d,c);if(typeof p=="string")return p;K8(p)&&(u||(u=[]),u.push(p))}return u?(async()=>{for(const h of u){const f=await h;if(typeof f=="string")return f}return null})():null},o=t.find(a=>!!a.allBasenames);o&&(s.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(s.allPaths=r),s}function POe(n,e,t){if(e===!1)return _u;const i=KK(n,t);if(i===_u)return _u;if(typeof e=="boolean")return i;if(e){const s=e.when;if(typeof s=="string"){const o=(r,a,l,c)=>{if(!c||!i(r,a))return null;const d=s.replace("$(basename)",()=>l),u=c(d);return K8(u)?u.then(h=>h?n:null):u?n:null};return o.requiresSiblings=!0,o}}return i}function vfe(n,e){const t=n.filter(a=>!!a.basenames);if(t.length<2)return n;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let s;if(e){s=[];for(let a=0,l=i.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const o=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const u=a.charCodeAt(d-1);if(u===47||u===92)break}l=a.substr(d)}const c=i.indexOf(l);return c!==-1?s[c]:null};o.basenames=i,o.patterns=s,o.allBasenames=i;const r=n.filter(a=>!a.basenames);return r.push(o),r}function qK(n,e,t,i,s,o){if(Array.isArray(n)){let r=0;for(const a of n){const l=qK(a,e,t,i,s,o);if(l===10)return l;l>r&&(r=l)}return r}else{if(typeof n=="string")return i?n==="*"?5:n===t?10:0:0;if(n){const{language:r,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=n;if(!i&&!c)return 0;d&&s&&(e=s);let u=0;if(l)if(l===e.scheme)u=10;else if(l==="*")u=5;else return 0;if(r)if(r===t)u=10;else if(r==="*")u=Math.max(u,5);else return 0;if(d)if(d===o)u=10;else if(d==="*"&&o!==void 0)u=Math.max(u,5);else return 0;if(a){let h;if(typeof a=="string"?h=a:h={...a,base:Aue(a.base)},h===e.fsPath||TOe(h,e.fsPath))u=10;else return 0}return u}else return 0}}function wfe(n){return typeof n=="string"?!1:Array.isArray(n)?n.every(wfe):!!n.exclusive}class QJ{constructor(e,t,i,s,o){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=s,this.recursive=o}equals(e){var t,i;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)==null?void 0:t.toString())===((i=e.notebookUri)==null?void 0:i.toString())&&this.recursive===e.recursive}}class $i{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new $,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Pe(()=>{if(i){const s=this._entries.indexOf(i);s>=0&&(this._entries.splice(s,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e,t=!1){const i=[];return this._orderedForEach(e,t,s=>i.push(s.provider)),i}orderedGroups(e){const t=[];let i,s;return this._orderedForEach(e,!1,o=>{i&&s===o._score?i.push(o.provider):(s=o._score,i=[o.provider],t.push(i))}),t}_orderedForEach(e,t,i){this._updateScores(e,t);for(const s of this._entries)s._score>0&&i(s)}_updateScores(e,t){var o,r;const i=(o=this._notebookInfoResolver)==null?void 0:o.call(this,e.uri),s=i?new QJ(e.uri,e.getLanguageId(),i.uri,i.type,t):new QJ(e.uri,e.getLanguageId(),void 0,void 0,t);if(!((r=this._lastCandidate)!=null&&r.equals(s))){this._lastCandidate=s;for(const a of this._entries)if(a._score=qK(a.selector,s.uri,s.languageId,Zhe(e),s.notebookUri,s.notebookType),wfe(a.selector)&&a._score>0)if(t)a._score=0;else{for(const l of this._entries)l._score=0;a._score=1e3;break}this._entries.sort($i._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:YS(e.selector)&&!YS(t.selector)?1:!YS(e.selector)&&YS(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function YS(n){return typeof n=="string"?!1:Array.isArray(n)?n.some(YS):!!n.isBuiltin}class AOe{constructor(){this.referenceProvider=new $i(this._score.bind(this)),this.renameProvider=new $i(this._score.bind(this)),this.newSymbolNamesProvider=new $i(this._score.bind(this)),this.codeActionProvider=new $i(this._score.bind(this)),this.definitionProvider=new $i(this._score.bind(this)),this.typeDefinitionProvider=new $i(this._score.bind(this)),this.declarationProvider=new $i(this._score.bind(this)),this.implementationProvider=new $i(this._score.bind(this)),this.documentSymbolProvider=new $i(this._score.bind(this)),this.inlayHintsProvider=new $i(this._score.bind(this)),this.colorProvider=new $i(this._score.bind(this)),this.codeLensProvider=new $i(this._score.bind(this)),this.documentFormattingEditProvider=new $i(this._score.bind(this)),this.documentRangeFormattingEditProvider=new $i(this._score.bind(this)),this.onTypeFormattingEditProvider=new $i(this._score.bind(this)),this.signatureHelpProvider=new $i(this._score.bind(this)),this.hoverProvider=new $i(this._score.bind(this)),this.documentHighlightProvider=new $i(this._score.bind(this)),this.multiDocumentHighlightProvider=new $i(this._score.bind(this)),this.selectionRangeProvider=new $i(this._score.bind(this)),this.foldingRangeProvider=new $i(this._score.bind(this)),this.linkProvider=new $i(this._score.bind(this)),this.inlineCompletionsProvider=new $i(this._score.bind(this)),this.inlineEditProvider=new $i(this._score.bind(this)),this.completionProvider=new $i(this._score.bind(this)),this.linkedEditingRangeProvider=new $i(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new $i(this._score.bind(this)),this.documentSemanticTokensProvider=new $i(this._score.bind(this)),this.documentDropEditProvider=new $i(this._score.bind(this)),this.documentPasteEditProvider=new $i(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)==null?void 0:t.call(this,e)}}Tt(xe,AOe,1);function GK(n){return`--vscode-${n.replace(/\./g,"-")}`}function ye(n){return`var(${GK(n)})`}function OOe(n,e){return`var(${GK(n)}, ${e})`}function FOe(n){return n!==null&&typeof n=="object"&&"light"in n&&"dark"in n}const yfe={ColorContribution:"base.contributions.colors"},BOe="default";class WOe{constructor(){this._onDidChangeSchema=new $,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,s=!1,o){const r={id:e,description:i,defaults:t,needsTransparency:s,deprecationMessage:o};this.colorsById[e]=r;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),s&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=_("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:i,oneOf:[a,{type:"string",const:BOe,description:_("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i!=null&&i.defaults){const s=FOe(i.defaults)?i.defaults[t.type]:i.defaults;return gc(s,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,i)=>{const s=t.indexOf(".")===-1?0:1,o=i.indexOf(".")===-1?0:1;return s!==o?s-o:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const H4=new WOe;Zi.add(yfe.ColorContribution,H4);function P(n,e,t,i,s){return H4.registerColor(n,e,t,i,s)}function HOe(n,e){var t,i,s,o;switch(n.op){case 0:return(t=gc(n.value,e))==null?void 0:t.darken(n.factor);case 1:return(i=gc(n.value,e))==null?void 0:i.lighten(n.factor);case 2:return(s=gc(n.value,e))==null?void 0:s.transparent(n.factor);case 3:{const r=gc(n.background,e);return r?(o=gc(n.value,e))==null?void 0:o.makeOpaque(r):gc(n.value,e)}case 4:for(const r of n.values){const a=gc(r,e);if(a)return a}return;case 6:return gc(e.defines(n.if)?n.then:n.else,e);case 5:{const r=gc(n.value,e);if(!r)return;const a=gc(n.background,e);return a?r.isDarkerThan(a)?oe.getLighterColor(r,a,n.factor).transparent(n.transparency):oe.getDarkerColor(r,a,n.factor).transparent(n.transparency):r.transparent(n.factor*n.transparency)}default:throw R4()}}function Yv(n,e){return{op:0,value:n,factor:e}}function Jc(n,e){return{op:1,value:n,factor:e}}function gt(n,e){return{op:2,value:n,factor:e}}function Bk(...n){return{op:4,values:n}}function VOe(n,e,t){return{op:6,if:n,then:e,else:t}}function JJ(n,e,t,i){return{op:5,value:n,background:e,factor:t,transparency:i}}function gc(n,e){if(n!==null){if(typeof n=="string")return n[0]==="#"?oe.fromHex(n):e.getColor(n);if(n instanceof oe)return n;if(typeof n=="object")return HOe(n,e)}}const Cfe="vscode://schemas/workbench-colors",Sfe=Zi.as(O4.JSONContribution);Sfe.registerSchema(Cfe,H4.getColorSchema());const eee=new li(()=>Sfe.notifySchemaChanged(Cfe),200);H4.onDidChangeSchema(()=>{eee.isScheduled()||eee.schedule()});const wt=P("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},_("foreground","Overall foreground color. This color is only used if not overridden by a component."));P("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},_("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));P("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},_("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));P("descriptionForeground",{light:"#717171",dark:gt(wt,.7),hcDark:gt(wt,.7),hcLight:gt(wt,.7)},_("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const I2=P("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},_("iconForeground","The default color for icons in the workbench.")),Eu=P("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},_("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),At=P("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},_("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Ai=P("contrastActiveBorder",{light:null,dark:null,hcDark:Eu,hcLight:Eu},_("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));P("selection.background",null,_("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const jOe=P("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},_("textLinkForeground","Foreground color for links in text."));P("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},_("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));P("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:oe.black,hcLight:"#292929"},_("textSeparatorForeground","Color for text separators."));P("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},_("textPreformatForeground","Foreground color for preformatted text segments."));P("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},_("textPreformatBackground","Background color for preformatted text segments."));P("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},_("textBlockQuoteBackground","Background color for block quotes in text."));P("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:oe.white,hcLight:"#292929"},_("textBlockQuoteBorder","Border color for block quotes in text."));P("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:oe.black,hcLight:"#F2F2F2"},_("textCodeBlockBackground","Background color for code blocks in text."));P("sash.hoverBorder",Eu,_("sashActiveBorder","Border color of active sashes."));const IT=P("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:oe.black,hcLight:"#0F4A85"},_("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),zOe=P("badge.foreground",{dark:oe.white,light:"#333",hcDark:oe.white,hcLight:oe.white},_("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),ZK=P("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},_("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),xfe=P("scrollbarSlider.background",{dark:oe.fromHex("#797979").transparent(.4),light:oe.fromHex("#646464").transparent(.4),hcDark:gt(At,.6),hcLight:gt(At,.4)},_("scrollbarSliderBackground","Scrollbar slider background color.")),Lfe=P("scrollbarSlider.hoverBackground",{dark:oe.fromHex("#646464").transparent(.7),light:oe.fromHex("#646464").transparent(.7),hcDark:gt(At,.8),hcLight:gt(At,.8)},_("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),kfe=P("scrollbarSlider.activeBackground",{dark:oe.fromHex("#BFBFBF").transparent(.4),light:oe.fromHex("#000000").transparent(.6),hcDark:At,hcLight:At},_("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),UOe=P("progressBar.background",{dark:oe.fromHex("#0E70C0"),light:oe.fromHex("#0E70C0"),hcDark:At,hcLight:At},_("progressBarBackground","Background color of the progress bar that can show for long running operations.")),tc=P("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:oe.black,hcLight:oe.white},_("editorBackground","Editor background color.")),Vu=P("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:oe.white,hcLight:wt},_("editorForeground","Editor default foreground color."));P("editorStickyScroll.background",tc,_("editorStickyScrollBackground","Background color of sticky scroll in the editor"));P("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:oe.fromHex("#0F4A85").transparent(.1)},_("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));P("editorStickyScroll.border",{dark:null,light:null,hcDark:At,hcLight:At},_("editorStickyScrollBorder","Border color of sticky scroll in the editor"));P("editorStickyScroll.shadow",ZK,_("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const Ca=P("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:oe.white},_("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),V4=P("editorWidget.foreground",wt,_("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),YK=P("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:At,hcLight:At},_("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));P("editorWidget.resizeBorder",null,_("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));P("editorError.background",null,_("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const j4=P("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},_("editorError.foreground","Foreground color of error squigglies in the editor.")),$Oe=P("editorError.border",{dark:null,light:null,hcDark:oe.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},_("errorBorder","If set, color of double underlines for errors in the editor.")),KOe=P("editorWarning.background",null,_("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),vf=P("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},_("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),Wk=P("editorWarning.border",{dark:null,light:null,hcDark:oe.fromHex("#FFCC00").transparent(.8),hcLight:oe.fromHex("#FFCC00").transparent(.8)},_("warningBorder","If set, color of double underlines for warnings in the editor."));P("editorInfo.background",null,_("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Du=P("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},_("editorInfo.foreground","Foreground color of info squigglies in the editor.")),Hk=P("editorInfo.border",{dark:null,light:null,hcDark:oe.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},_("infoBorder","If set, color of double underlines for infos in the editor.")),qOe=P("editorHint.foreground",{dark:oe.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},_("editorHint.foreground","Foreground color of hint squigglies in the editor."));P("editorHint.border",{dark:null,light:null,hcDark:oe.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},_("hintBorder","If set, color of double underlines for hints in the editor."));const GOe=P("editorLink.activeForeground",{dark:"#4E94CE",light:oe.blue,hcDark:oe.cyan,hcLight:"#292929"},_("activeLinkForeground","Color of active links.")),Wg=P("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},_("editorSelectionBackground","Color of the editor selection.")),ZOe=P("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:oe.white},_("editorSelectionForeground","Color of the selected text for high contrast.")),Nfe=P("editor.inactiveSelectionBackground",{light:gt(Wg,.5),dark:gt(Wg,.5),hcDark:gt(Wg,.7),hcLight:gt(Wg,.5)},_("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),XK=P("editor.selectionHighlightBackground",{light:JJ(Wg,tc,.3,.6),dark:JJ(Wg,tc,.3,.6),hcDark:null,hcLight:null},_("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Ai,hcLight:Ai},_("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));P("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},_("editorFindMatch","Color of the current search match."));const YOe=P("editor.findMatchForeground",null,_("editorFindMatchForeground","Text color of the current search match.")),Fh=P("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},_("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),XOe=P("editor.findMatchHighlightForeground",null,_("findMatchHighlightForeground","Foreground color of the other search matches."),!0);P("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},_("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.findMatchBorder",{light:null,dark:null,hcDark:Ai,hcLight:Ai},_("editorFindMatchBorder","Border color of the current search match."));const Hg=P("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Ai,hcLight:Ai},_("findMatchHighlightBorder","Border color of the other search matches.")),QOe=P("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:gt(Ai,.4),hcLight:gt(Ai,.4)},_("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},_("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const E2=P("editorHoverWidget.background",Ca,_("hoverBackground","Background color of the editor hover."));P("editorHoverWidget.foreground",V4,_("hoverForeground","Foreground color of the editor hover."));const Ife=P("editorHoverWidget.border",YK,_("hoverBorder","Border color of the editor hover."));P("editorHoverWidget.statusBarBackground",{dark:Jc(E2,.2),light:Yv(E2,.05),hcDark:Ca,hcLight:Ca},_("statusBarBackground","Background color of the editor hover status bar."));const QK=P("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:oe.white,hcLight:oe.black},_("editorInlayHintForeground","Foreground color of inline hints")),JK=P("editorInlayHint.background",{dark:gt(IT,.1),light:gt(IT,.1),hcDark:gt(oe.white,.1),hcLight:gt(IT,.1)},_("editorInlayHintBackground","Background color of inline hints")),JOe=P("editorInlayHint.typeForeground",QK,_("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),e4e=P("editorInlayHint.typeBackground",JK,_("editorInlayHintBackgroundTypes","Background color of inline hints for types")),t4e=P("editorInlayHint.parameterForeground",QK,_("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),i4e=P("editorInlayHint.parameterBackground",JK,_("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),n4e=P("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},_("editorLightBulbForeground","The color used for the lightbulb actions icon."));P("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},_("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));P("editorLightBulbAi.foreground",n4e,_("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));P("editor.snippetTabstopHighlightBackground",{dark:new oe(new Wt(124,124,124,.3)),light:new oe(new Wt(10,50,100,.2)),hcDark:new oe(new Wt(124,124,124,.3)),hcLight:new oe(new Wt(10,50,100,.2))},_("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));P("editor.snippetTabstopHighlightBorder",null,_("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));P("editor.snippetFinalTabstopHighlightBackground",null,_("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));P("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new oe(new Wt(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},_("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const TW=new oe(new Wt(155,185,85,.2)),RW=new oe(new Wt(255,0,0,.2)),s4e=P("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},_("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),o4e=P("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},_("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);P("diffEditor.insertedLineBackground",{dark:TW,light:TW,hcDark:null,hcLight:null},_("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);P("diffEditor.removedLineBackground",{dark:RW,light:RW,hcDark:null,hcLight:null},_("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);P("diffEditorGutter.insertedLineBackground",null,_("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));P("diffEditorGutter.removedLineBackground",null,_("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const r4e=P("diffEditorOverview.insertedForeground",null,_("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),a4e=P("diffEditorOverview.removedForeground",null,_("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));P("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},_("diffEditorInsertedOutline","Outline color for the text that got inserted."));P("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},_("diffEditorRemovedOutline","Outline color for text that got removed."));P("diffEditor.border",{dark:null,light:null,hcDark:At,hcLight:At},_("diffEditorBorder","Border color between the two text editors."));P("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},_("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));P("diffEditor.unchangedRegionBackground","sideBar.background",_("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));P("diffEditor.unchangedRegionForeground","foreground",_("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));P("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},_("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const E1=P("widget.shadow",{dark:gt(oe.black,.36),light:gt(oe.black,.16),hcDark:null,hcLight:null},_("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),Efe=P("widget.border",{dark:null,light:null,hcDark:At,hcLight:At},_("widgetBorder","Border color of widgets such as find/replace inside the editor.")),tee=P("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},_("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));P("toolbar.hoverOutline",{dark:null,light:null,hcDark:Ai,hcLight:Ai},_("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));P("toolbar.activeBackground",{dark:Jc(tee,.1),light:Yv(tee,.1),hcDark:null,hcLight:null},_("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const l4e=P("breadcrumb.foreground",gt(wt,.8),_("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),c4e=P("breadcrumb.background",tc,_("breadcrumbsBackground","Background color of breadcrumb items.")),iee=P("breadcrumb.focusForeground",{light:Yv(wt,.2),dark:Jc(wt,.1),hcDark:Jc(wt,.1),hcLight:Jc(wt,.1)},_("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),d4e=P("breadcrumb.activeSelectionForeground",{light:Yv(wt,.2),dark:Jc(wt,.1),hcDark:Jc(wt,.1),hcLight:Jc(wt,.1)},_("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));P("breadcrumbPicker.background",Ca,_("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const Dfe=.5,nee=oe.fromHex("#40C8AE").transparent(Dfe),see=oe.fromHex("#40A6FF").transparent(Dfe),oee=oe.fromHex("#606060").transparent(.4),eq=.4,NC=1,MW=P("merge.currentHeaderBackground",{dark:nee,light:nee,hcDark:null,hcLight:null},_("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);P("merge.currentContentBackground",gt(MW,eq),_("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const PW=P("merge.incomingHeaderBackground",{dark:see,light:see,hcDark:null,hcLight:null},_("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);P("merge.incomingContentBackground",gt(PW,eq),_("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const AW=P("merge.commonHeaderBackground",{dark:oee,light:oee,hcDark:null,hcLight:null},_("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);P("merge.commonContentBackground",gt(AW,eq),_("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const IC=P("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},_("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));P("editorOverviewRuler.currentContentForeground",{dark:gt(MW,NC),light:gt(MW,NC),hcDark:IC,hcLight:IC},_("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));P("editorOverviewRuler.incomingContentForeground",{dark:gt(PW,NC),light:gt(PW,NC),hcDark:IC,hcLight:IC},_("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));P("editorOverviewRuler.commonContentForeground",{dark:gt(AW,NC),light:gt(AW,NC),hcDark:IC,hcLight:IC},_("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const F3=P("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},_("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),Tfe=P("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",_("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),u4e=P("problemsErrorIcon.foreground",j4,_("problemsErrorIconForeground","The color used for the problems error icon.")),h4e=P("problemsWarningIcon.foreground",vf,_("problemsWarningIconForeground","The color used for the problems warning icon.")),f4e=P("problemsInfoIcon.foreground",Du,_("problemsInfoIconForeground","The color used for the problems info icon.")),OW=P("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},_("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),z4=P("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},_("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),ree=P("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},_("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),g4e=P("minimap.infoHighlight",{dark:Du,light:Du,hcDark:Hk,hcLight:Hk},_("minimapInfo","Minimap marker color for infos.")),m4e=P("minimap.warningHighlight",{dark:vf,light:vf,hcDark:Wk,hcLight:Wk},_("overviewRuleWarning","Minimap marker color for warnings.")),p4e=P("minimap.errorHighlight",{dark:new oe(new Wt(255,18,18,.7)),light:new oe(new Wt(255,18,18,.7)),hcDark:new oe(new Wt(255,50,50,1)),hcLight:"#B5200D"},_("minimapError","Minimap marker color for errors.")),_4e=P("minimap.background",null,_("minimapBackground","Minimap background color.")),b4e=P("minimap.foregroundOpacity",oe.fromHex("#000f"),_("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));P("minimapSlider.background",gt(xfe,.5),_("minimapSliderBackground","Minimap slider background color."));P("minimapSlider.hoverBackground",gt(Lfe,.5),_("minimapSliderHoverBackground","Minimap slider background color when hovering."));P("minimapSlider.activeBackground",gt(kfe,.5),_("minimapSliderActiveBackground","Minimap slider background color when clicked on."));P("charts.foreground",wt,_("chartsForeground","The foreground color used in charts."));P("charts.lines",gt(wt,.5),_("chartsLines","The color used for horizontal lines in charts."));P("charts.red",j4,_("chartsRed","The red color used in chart visualizations."));P("charts.blue",Du,_("chartsBlue","The blue color used in chart visualizations."));P("charts.yellow",vf,_("chartsYellow","The yellow color used in chart visualizations."));P("charts.orange",OW,_("chartsOrange","The orange color used in chart visualizations."));P("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},_("chartsGreen","The green color used in chart visualizations."));P("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},_("chartsPurple","The purple color used in chart visualizations."));const FW=P("input.background",{dark:"#3C3C3C",light:oe.white,hcDark:oe.black,hcLight:oe.white},_("inputBoxBackground","Input box background.")),Rfe=P("input.foreground",wt,_("inputBoxForeground","Input box foreground.")),Mfe=P("input.border",{dark:null,light:null,hcDark:At,hcLight:At},_("inputBoxBorder","Input box border.")),U4=P("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:At,hcLight:At},_("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),v4e=P("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},_("inputOption.hoverBackground","Background color of activated options in input fields.")),II=P("inputOption.activeBackground",{dark:gt(Eu,.4),light:gt(Eu,.2),hcDark:oe.transparent,hcLight:oe.transparent},_("inputOption.activeBackground","Background hover color of options in input fields.")),$4=P("inputOption.activeForeground",{dark:oe.white,light:oe.black,hcDark:wt,hcLight:wt},_("inputOption.activeForeground","Foreground color of activated options in input fields."));P("input.placeholderForeground",{light:gt(wt,.5),dark:gt(wt,.5),hcDark:gt(wt,.7),hcLight:gt(wt,.7)},_("inputPlaceholderForeground","Input box foreground color for placeholder text."));const w4e=P("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:oe.black,hcLight:oe.white},_("inputValidationInfoBackground","Input validation background color for information severity.")),y4e=P("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:wt},_("inputValidationInfoForeground","Input validation foreground color for information severity.")),C4e=P("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:At,hcLight:At},_("inputValidationInfoBorder","Input validation border color for information severity.")),S4e=P("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:oe.black,hcLight:oe.white},_("inputValidationWarningBackground","Input validation background color for warning severity.")),x4e=P("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:wt},_("inputValidationWarningForeground","Input validation foreground color for warning severity.")),L4e=P("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:At,hcLight:At},_("inputValidationWarningBorder","Input validation border color for warning severity.")),k4e=P("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:oe.black,hcLight:oe.white},_("inputValidationErrorBackground","Input validation background color for error severity.")),N4e=P("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:wt},_("inputValidationErrorForeground","Input validation foreground color for error severity.")),I4e=P("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:At,hcLight:At},_("inputValidationErrorBorder","Input validation border color for error severity.")),K4=P("dropdown.background",{dark:"#3C3C3C",light:oe.white,hcDark:oe.black,hcLight:oe.white},_("dropdownBackground","Dropdown background.")),E4e=P("dropdown.listBackground",{dark:null,light:null,hcDark:oe.black,hcLight:oe.white},_("dropdownListBackground","Dropdown list background.")),tq=P("dropdown.foreground",{dark:"#F0F0F0",light:wt,hcDark:oe.white,hcLight:wt},_("dropdownForeground","Dropdown foreground.")),iq=P("dropdown.border",{dark:K4,light:"#CECECE",hcDark:At,hcLight:At},_("dropdownBorder","Dropdown border.")),Pfe=P("button.foreground",oe.white,_("buttonForeground","Button foreground color.")),D4e=P("button.separator",gt(Pfe,.4),_("buttonSeparator","Button separator color.")),XS=P("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},_("buttonBackground","Button background color.")),T4e=P("button.hoverBackground",{dark:Jc(XS,.2),light:Yv(XS,.2),hcDark:XS,hcLight:XS},_("buttonHoverBackground","Button background color when hovering.")),R4e=P("button.border",At,_("buttonBorder","Button border color.")),M4e=P("button.secondaryForeground",{dark:oe.white,light:oe.white,hcDark:oe.white,hcLight:wt},_("buttonSecondaryForeground","Secondary button foreground color.")),BW=P("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:oe.white},_("buttonSecondaryBackground","Secondary button background color.")),P4e=P("button.secondaryHoverBackground",{dark:Jc(BW,.2),light:Yv(BW,.2),hcDark:null,hcLight:null},_("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),QS=P("radio.activeForeground",$4,_("radioActiveForeground","Foreground color of active radio option.")),A4e=P("radio.activeBackground",II,_("radioBackground","Background color of active radio option.")),O4e=P("radio.activeBorder",U4,_("radioActiveBorder","Border color of the active radio option.")),F4e=P("radio.inactiveForeground",null,_("radioInactiveForeground","Foreground color of inactive radio option.")),B4e=P("radio.inactiveBackground",null,_("radioInactiveBackground","Background color of inactive radio option.")),W4e=P("radio.inactiveBorder",{light:gt(QS,.2),dark:gt(QS,.2),hcDark:gt(QS,.4),hcLight:gt(QS,.2)},_("radioInactiveBorder","Border color of the inactive radio option.")),H4e=P("radio.inactiveHoverBackground",v4e,_("radioHoverBackground","Background color of inactive active radio option when hovering.")),V4e=P("checkbox.background",K4,_("checkbox.background","Background color of checkbox widget."));P("checkbox.selectBackground",Ca,_("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const j4e=P("checkbox.foreground",tq,_("checkbox.foreground","Foreground color of checkbox widget.")),z4e=P("checkbox.border",iq,_("checkbox.border","Border color of checkbox widget."));P("checkbox.selectBorder",I2,_("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const U4e=P("keybindingLabel.background",{dark:new oe(new Wt(128,128,128,.17)),light:new oe(new Wt(221,221,221,.4)),hcDark:oe.transparent,hcLight:oe.transparent},_("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),$4e=P("keybindingLabel.foreground",{dark:oe.fromHex("#CCCCCC"),light:oe.fromHex("#555555"),hcDark:oe.white,hcLight:wt},_("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),K4e=P("keybindingLabel.border",{dark:new oe(new Wt(51,51,51,.6)),light:new oe(new Wt(204,204,204,.4)),hcDark:new oe(new Wt(111,195,223)),hcLight:At},_("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),q4e=P("keybindingLabel.bottomBorder",{dark:new oe(new Wt(68,68,68,.6)),light:new oe(new Wt(187,187,187,.4)),hcDark:new oe(new Wt(111,195,223)),hcLight:wt},_("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),G4e=P("list.focusBackground",null,_("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Z4e=P("list.focusForeground",null,_("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Y4e=P("list.focusOutline",{dark:Eu,light:Eu,hcDark:Ai,hcLight:Ai},_("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),X4e=P("list.focusAndSelectionOutline",null,_("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),bv=P("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:oe.fromHex("#0F4A85").transparent(.1)},_("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Vk=P("list.activeSelectionForeground",{dark:oe.white,light:oe.white,hcDark:null,hcLight:null},_("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Afe=P("list.activeSelectionIconForeground",null,_("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Q4e=P("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:oe.fromHex("#0F4A85").transparent(.1)},_("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),J4e=P("list.inactiveSelectionForeground",null,_("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),eFe=P("list.inactiveSelectionIconForeground",null,_("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),tFe=P("list.inactiveFocusBackground",null,_("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),iFe=P("list.inactiveFocusOutline",null,_("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Ofe=P("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:oe.white.transparent(.1),hcLight:oe.fromHex("#0F4A85").transparent(.1)},_("listHoverBackground","List/Tree background when hovering over items using the mouse.")),Ffe=P("list.hoverForeground",null,_("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),nFe=P("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},_("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),sFe=P("list.dropBetweenBackground",{dark:I2,light:I2,hcDark:null,hcLight:null},_("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),fw=P("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Eu,hcLight:Eu},_("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),oFe=P("list.focusHighlightForeground",{dark:fw,light:VOe(bv,fw,"#BBE7FF"),hcDark:fw,hcLight:fw},_("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));P("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},_("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));P("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},_("listErrorForeground","Foreground color of list items containing errors."));P("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},_("listWarningForeground","Foreground color of list items containing warnings."));const rFe=P("listFilterWidget.background",{light:Yv(Ca,0),dark:Jc(Ca,0),hcDark:Ca,hcLight:Ca},_("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),aFe=P("listFilterWidget.outline",{dark:oe.transparent,light:oe.transparent,hcDark:"#f38518",hcLight:"#007ACC"},_("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),lFe=P("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:At,hcLight:At},_("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),cFe=P("listFilterWidget.shadow",E1,_("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));P("list.filterMatchBackground",{dark:Fh,light:Fh,hcDark:null,hcLight:null},_("listFilterMatchHighlight","Background color of the filtered match."));P("list.filterMatchBorder",{dark:Hg,light:Hg,hcDark:At,hcLight:Ai},_("listFilterMatchHighlightBorder","Border color of the filtered match."));P("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},_("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const Bfe=P("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},_("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),dFe=P("tree.inactiveIndentGuidesStroke",gt(Bfe,.4),_("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),uFe=P("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},_("tableColumnsBorder","Table border color between columns.")),hFe=P("tree.tableOddRowsBackground",{dark:gt(wt,.04),light:gt(wt,.04),hcDark:null,hcLight:null},_("tableOddRowsBackgroundColor","Background color for odd table rows."));P("editorActionList.background",Ca,_("editorActionListBackground","Action List background color."));P("editorActionList.foreground",V4,_("editorActionListForeground","Action List foreground color."));P("editorActionList.focusForeground",Vk,_("editorActionListFocusForeground","Action List foreground color for the focused item."));P("editorActionList.focusBackground",bv,_("editorActionListFocusBackground","Action List background color for the focused item."));const fFe=P("menu.border",{dark:null,light:null,hcDark:At,hcLight:At},_("menuBorder","Border color of menus.")),gFe=P("menu.foreground",tq,_("menuForeground","Foreground color of menu items.")),mFe=P("menu.background",K4,_("menuBackground","Background color of menu items.")),pFe=P("menu.selectionForeground",Vk,_("menuSelectionForeground","Foreground color of the selected menu item in menus.")),_Fe=P("menu.selectionBackground",bv,_("menuSelectionBackground","Background color of the selected menu item in menus.")),bFe=P("menu.selectionBorder",{dark:null,light:null,hcDark:Ai,hcLight:Ai},_("menuSelectionBorder","Border color of the selected menu item in menus.")),vFe=P("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:At,hcLight:At},_("menuSeparatorBackground","Color of a separator menu item in menus.")),aee=P("quickInput.background",Ca,_("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),wFe=P("quickInput.foreground",V4,_("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),yFe=P("quickInputTitle.background",{dark:new oe(new Wt(255,255,255,.105)),light:new oe(new Wt(0,0,0,.06)),hcDark:"#000000",hcLight:oe.white},_("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Wfe=P("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:oe.white,hcLight:"#0F4A85"},_("pickerGroupForeground","Quick picker color for grouping labels.")),CFe=P("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:oe.white,hcLight:"#0F4A85"},_("pickerGroupBorder","Quick picker color for grouping borders.")),lee=P("quickInput.list.focusBackground",null,"",void 0,_("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),jk=P("quickInputList.focusForeground",Vk,_("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),nq=P("quickInputList.focusIconForeground",Afe,_("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),zk=P("quickInputList.focusBackground",{dark:Bk(lee,bv),light:Bk(lee,bv),hcDark:null,hcLight:null},_("quickInput.listFocusBackground","Quick picker background color for the focused item."));P("search.resultsInfoForeground",{light:wt,dark:gt(wt,.65),hcDark:wt,hcLight:wt},_("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));P("searchEditor.findMatchBackground",{light:gt(Fh,.66),dark:gt(Fh,.66),hcDark:Fh,hcLight:Fh},_("searchEditor.queryMatch","Color of the Search Editor query matches."));P("searchEditor.findMatchBorder",{light:gt(Hg,.66),dark:gt(Hg,.66),hcDark:Hg,hcLight:Hg},_("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var SFe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},cee=function(n,e){return function(t,i){e(t,i,n)}};const ju=kt("hoverService");let EC=class extends G{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,i={},s,o){super(),this.placement=e,this.instantHover=t,this.overrideOptions=i,this.configurationService=s,this.hoverService=o,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new ne),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const i=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const s=Qn(e.target)?[e.target]:e.target.targetElements;for(const r of s)this.hoverDisposables.add(Ji(r,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const o=Qn(e.content)?void 0:e.content.toString();return this.hoverService.showHover({...e,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:o,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};EC=SFe([cee(3,_t),cee(4,ju)],EC);const Df=kt("contextViewService"),Zr=kt("contextMenuService"),ei=kt("keybindingService");class D1{constructor(){this._hooks=new ne,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,s,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=o;let r=e;try{e.setPointerCapture(t),this._hooks.add(Pe(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{r=je(e)}this._hooks.add(Q(r,fe.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(Q(r,fe.POINTER_UP,a=>this.stopMonitoring(!0)))}}function yn(n,e,t){let i=null,s=null;if(typeof t.value=="function"?(i="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",s=t.get),!s)throw new Error("not supported");const o=`$memoize$${e}`;t[i]=function(...r){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,r)}),this[o]}}var xFe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},yi;(function(n){n.Tap="-monaco-gesturetap",n.Change="-monaco-gesturechange",n.Start="-monaco-gesturestart",n.End="-monaco-gesturesend",n.Contextmenu="-monaco-gesturecontextmenu"})(yi||(yi={}));const Is=class Is extends G{constructor(){super(),this.dispatched=!1,this.targets=new So,this.ignoreTargets=new So,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(pe.runAndSubscribe(y4,({window:e,disposables:t})=>{t.add(Q(e.document,"touchstart",i=>this.onTouchStart(i),{passive:!1})),t.add(Q(e.document,"touchend",i=>this.onTouchEnd(e,i))),t.add(Q(e.document,"touchmove",i=>this.onTouchMove(i),{passive:!1}))},{window:ui,disposables:this._store}))}static addTarget(e){if(!Is.isTouchDevice())return G.None;Is.INSTANCE||(Is.INSTANCE=new Is);const t=Is.INSTANCE.targets.push(e);return Pe(t)}static ignoreTarget(e){if(!Is.isTouchDevice())return G.None;Is.INSTANCE||(Is.INSTANCE=new Is);const t=Is.INSTANCE.ignoreTargets.push(e);return Pe(t)}static isTouchDevice(){return"ontouchstart"in ui||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,s=e.targetTouches.length;i<s;i++){const o=e.targetTouches.item(i);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};const r=this.newGestureEvent(yi.Start,o.target);r.pageX=o.pageX,r.pageY=o.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const i=Date.now(),s=Object.keys(this.activeTouches).length;for(let o=0,r=t.changedTouches.length;o<r;o++){const a=t.changedTouches.item(o);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<Is.HOLD_DELAY&&Math.abs(l.initialPageX-za(l.rollingPageX))<30&&Math.abs(l.initialPageY-za(l.rollingPageY))<30){const d=this.newGestureEvent(yi.Tap,l.initialTarget);d.pageX=za(l.rollingPageX),d.pageY=za(l.rollingPageY),this.dispatchEvent(d)}else if(c>=Is.HOLD_DELAY&&Math.abs(l.initialPageX-za(l.rollingPageX))<30&&Math.abs(l.initialPageY-za(l.rollingPageY))<30){const d=this.newGestureEvent(yi.Contextmenu,l.initialTarget);d.pageX=za(l.rollingPageX),d.pageY=za(l.rollingPageY),this.dispatchEvent(d)}else if(s===1){const d=za(l.rollingPageX),u=za(l.rollingPageY),h=za(l.rollingTimestamps)-l.rollingTimestamps[0],f=d-l.rollingPageX[0],m=u-l.rollingPageY[0],p=[...this.targets].filter(b=>l.initialTarget instanceof Node&&b.contains(l.initialTarget));this.inertia(e,p,i,Math.abs(f)/h,f>0?1:-1,d,Math.abs(m)/h,m>0?1:-1,u)}this.dispatchEvent(this.newGestureEvent(yi.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===yi.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>Is.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===yi.Change||e.type===yi.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(e.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(e.initialTarget)){let s=0,o=e.initialTarget;for(;o&&o!==i;)s++,o=o.parentElement;t.push([s,i])}t.sort((i,s)=>i[0]-s[0]);for(const[i,s]of t)s.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,i,s,o,r,a,l,c){this.handle=zr(e,()=>{const d=Date.now(),u=d-i;let h=0,f=0,m=!0;s+=Is.SCROLL_FRICTION*u,a+=Is.SCROLL_FRICTION*u,s>0&&(m=!1,h=o*s*u),a>0&&(m=!1,f=l*a*u);const p=this.newGestureEvent(yi.Change);p.translationX=h,p.translationY=f,t.forEach(b=>b.dispatchEvent(p)),m||this.inertia(e,t,d,s,o,r+h,a,l,c+f)})}onTouchMove(e){const t=Date.now();for(let i=0,s=e.changedTouches.length;i<s;i++){const o=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}const r=this.activeTouches[o.identifier],a=this.newGestureEvent(yi.Change,r.initialTarget);a.translationX=o.pageX-za(r.rollingPageX),a.translationY=o.pageY-za(r.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(o.pageX),r.rollingPageY.push(o.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};Is.SCROLL_FRICTION=-.005,Is.HOLD_DELAY=700,Is.CLEAR_TAP_COUNT_TIME=400;let qs=Is;xFe([yn],qs,"isTouchDevice",null);let Ba=class extends G{onclick(e,t){this._register(Q(e,fe.CLICK,i=>t(new Vl(je(e),i))))}onmousedown(e,t){this._register(Q(e,fe.MOUSE_DOWN,i=>t(new Vl(je(e),i))))}onmouseover(e,t){this._register(Q(e,fe.MOUSE_OVER,i=>t(new Vl(je(e),i))))}onmouseleave(e,t){this._register(Q(e,fe.MOUSE_LEAVE,i=>t(new Vl(je(e),i))))}onkeydown(e,t){this._register(Q(e,fe.KEY_DOWN,i=>t(new _i(i))))}onkeyup(e,t){this._register(Q(e,fe.KEY_UP,i=>t(new _i(i))))}oninput(e,t){this._register(Q(e,fe.INPUT,t))}onblur(e,t){this._register(Q(e,fe.BLUR,t))}onfocus(e,t){this._register(Q(e,fe.FOCUS,t))}ignoreGesture(e){return qs.ignoreTarget(e)}};const DC=11;class LFe extends Ba{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...Ke.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=DC+"px",this.domNode.style.height=DC+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new D1),this._register(Ji(this.bgDomNode,fe.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Ji(this.domNode,fe.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new NK),this._pointerdownScheduleRepeatTimer=this._register(new oc)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,je(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class kFe extends G{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new oc)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const NFe=140;class Hfe extends Ba{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new kFe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new D1),this._shouldRender=!0,this.domNode=Jt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(Q(this.domNode.domNode,fe.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new LFe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,s){this.slider=Jt(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(Q(this.slider.domNode,fe.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);i<=o&&o<=s?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{const o=un(this.domNode.domNode);t=e.pageX-o.left,i=e.pageY-o.top}const s=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{const r=this._sliderOrthogonalPointerPosition(o),a=Math.abs(r-i);if(As&&a>NFe){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const c=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const IFe=20;class TC{constructor(e,t,i,s,o,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=o,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new TC(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,s,o){const r=Math.max(0,i-e),a=Math.max(0,r-2*t),l=s>0&&s>i;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(IFe,Math.floor(i*a/s))),d=(a-c)/(s-i),u=o*d;return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=TC._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class EFe extends Hfe{constructor(e,t,i){const s=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new TC(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const r=(t.arrowSize-DC)/2,a=(t.horizontalScrollbarSize-DC)/2;this._createArrow({className:"scra",icon:he.scrollbarButtonLeft,top:a,left:r,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new gv(null,1,0))}),this._createArrow({className:"scra",icon:he.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:r,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new gv(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class DFe extends Hfe{constructor(e,t,i){const s=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new TC(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const r=(t.arrowSize-DC)/2,a=(t.verticalScrollbarSize-DC)/2;this._createArrow({className:"scra",icon:he.scrollbarButtonUp,top:r,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new gv(null,0,1))}),this._createArrow({className:"scra",icon:he.scrollbarButtonDown,top:void 0,left:a,bottom:r,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new gv(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class D2{constructor(e,t,i,s,o,r,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,i=i|0,s=s|0,o=o|0,r=r|0,a=a|0),this.rawScrollLeft=s,this.rawScrollTop=a,t<0&&(t=0),s+t>i&&(s=i-t),s<0&&(s=0),o<0&&(o=0),a+o>r&&(a=r-o),a<0&&(a=0),this.width=t,this.scrollWidth=i,this.scrollLeft=s,this.height=o,this.scrollHeight=r,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new D2(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new D2(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:s,scrollLeftChanged:o,heightChanged:r,scrollHeightChanged:a,scrollTopChanged:l}}}class T1 extends G{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new $),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new D2(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var s;const i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),(s=this._smoothScrolling)==null||s.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let s;t?s=new Uk(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=Uk.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class dee{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function B3(n,e){const t=e-n;return function(i){return n+t*MFe(i)}}function TFe(n,e,t){return function(i){return i<t?n(i/t):e((i-t)/(1-t))}}class Uk{constructor(e,t,i,s){this.from=e,this.to=t,this.duration=s,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let o,r;return e<t?(o=e+.75*i,r=t-.75*i):(o=e-.75*i,r=t+.75*i),TFe(B3(e,o),B3(r,t),.33)}return B3(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),s=this.scrollTop(t);return new dee(i,s,!1)}return new dee(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return Uk.start(e,t,i)}static start(e,t,i){i=i+10;const s=Date.now()-10;return new Uk(e,t,s,i)}}function RFe(n){return Math.pow(n,3)}function MFe(n){return 1-RFe(1-n)}const PFe=500,uee=50;class AFe{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}const cA=class cA{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,s=this._rear;do{const o=s===this._front?e:Math.pow(2,-i);if(e-=o,t+=this._memory[s].score*o,s===this._front)break;s=(this._capacity+s-1)%this._capacity,i++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(SI){const t=je(e.browserEvent),i=XRe(t);this.accept(Date.now(),e.deltaX*i,e.deltaY*i)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let s=null;const o=new AFe(e,t,i);this._front===-1&&this._rear===-1?(this._memory[0]=o,this._front=0,this._rear=0):(s=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=o),o.score=this._computeScore(o,s)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),t){const s=Math.abs(e.deltaX),o=Math.abs(e.deltaY),r=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(s,r),1),c=Math.max(Math.min(o,a),1),d=Math.max(s,r),u=Math.max(o,a);d%l===0&&u%c===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};cA.INSTANCE=new cA;let T2=cA;class sq extends Ba{get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new $),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new $),e.style.overflow="hidden",this._options=OFe(t),this._scrollable=i,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));const s={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new DFe(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new EFe(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Jt(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Jt(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Jt(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new oc),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=gi(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Lt&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new gv(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=gi(this._mouseWheelToDispose),e)){const i=s=>{this._onMouseWheel(new gv(s))};this._mouseWheelToDispose.push(Q(this._listenOnDomNode,fe.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){var o;if((o=e.browserEvent)!=null&&o.defaultPrevented)return;const t=T2.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+r===0?a=r=0:Math.abs(r)>=Math.abs(a)?a=0:r=0),this._options.flipAxes&&([r,a]=[a,r]);const l=!Lt&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const c=this._scrollable.getFutureScrollPosition();let d={};if(r){const u=uee*r,h=c.scrollTop-(u<0?Math.floor(u):Math.ceil(u));this._verticalScrollbar.writeScrollPosition(d,h)}if(a){const u=uee*a,h=c.scrollLeft-(u<0?Math.floor(u):Math.ceil(u));this._horizontalScrollbar.writeScrollPosition(d,h)}d=this._scrollable.validateScrollPosition(d),(c.scrollLeft!==d.scrollLeft||c.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),i=!0)}let s=i;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,s=i?" left":"",o=t?" top":"",r=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${o}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),PFe)}}class Vfe extends sq{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new T1({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>zr(je(e),s)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class q4 extends sq{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class EI extends sq{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new T1({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>zr(je(e),s)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll(s=>{s.scrollTopChanged&&(this._element.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this._element.scrollLeft=s.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function OFe(n){const e={lazyRender:typeof n.lazyRender<"u"?n.lazyRender:!1,className:typeof n.className<"u"?n.className:"",useShadows:typeof n.useShadows<"u"?n.useShadows:!0,handleMouseWheel:typeof n.handleMouseWheel<"u"?n.handleMouseWheel:!0,flipAxes:typeof n.flipAxes<"u"?n.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof n.consumeMouseWheelIfScrollbarIsNeeded<"u"?n.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof n.alwaysConsumeMouseWheel<"u"?n.alwaysConsumeMouseWheel:!1,scrollYToX:typeof n.scrollYToX<"u"?n.scrollYToX:!1,mouseWheelScrollSensitivity:typeof n.mouseWheelScrollSensitivity<"u"?n.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof n.fastScrollSensitivity<"u"?n.fastScrollSensitivity:5,scrollPredominantAxis:typeof n.scrollPredominantAxis<"u"?n.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof n.mouseWheelSmoothScroll<"u"?n.mouseWheelSmoothScroll:!0,arrowSize:typeof n.arrowSize<"u"?n.arrowSize:11,listenOnDomNode:typeof n.listenOnDomNode<"u"?n.listenOnDomNode:null,horizontal:typeof n.horizontal<"u"?n.horizontal:1,horizontalScrollbarSize:typeof n.horizontalScrollbarSize<"u"?n.horizontalScrollbarSize:10,horizontalSliderSize:typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:0,horizontalHasArrows:typeof n.horizontalHasArrows<"u"?n.horizontalHasArrows:!1,vertical:typeof n.vertical<"u"?n.vertical:1,verticalScrollbarSize:typeof n.verticalScrollbarSize<"u"?n.verticalScrollbarSize:10,verticalHasArrows:typeof n.verticalHasArrows<"u"?n.verticalHasArrows:!1,verticalSliderSize:typeof n.verticalSliderSize<"u"?n.verticalSliderSize:0,scrollByPage:typeof n.scrollByPage<"u"?n.scrollByPage:!1};return e.horizontalSliderSize=typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof n.verticalSliderSize<"u"?n.verticalSliderSize:e.verticalScrollbarSize,Lt&&(e.className+=" mac"),e}const XE=ge;let oq=class extends G{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new EI(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class G4 extends G{static render(e,t,i){return new G4(e,t,i)}constructor(e,t,i){super(),this.actionLabel=t.label,this.actionKeybindingLabel=i,this.actionContainer=ae(e,XE("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=ae(this.actionContainer,XE("a.action")),this.action.setAttribute("role","button"),t.iconClass&&ae(this.action,XE(`span.icon.${t.iconClass}`));const s=ae(this.action,XE("span"));s.textContent=i?`${t.label} (${i})`:t.label,this._store.add(new zfe(this.actionContainer,t.run)),this._store.add(new Ufe(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function jfe(n,e){return n&&e?_("acessibleViewHint","Inspect this in the accessible view with {0}.",e):n?_("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class zfe extends G{constructor(e,t){super(),this._register(Q(e,fe.CLICK,i=>{i.stopPropagation(),i.preventDefault(),t(e)}))}}class Ufe extends G{constructor(e,t,i){super(),this._register(Q(e,fe.KEY_DOWN,s=>{const o=new _i(s);i.some(r=>o.equals(r))&&(s.stopPropagation(),s.preventDefault(),t(e))}))}}const hr=kt("openerService");function FFe(n){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(n.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},n=n.with({fragment:""})),{selection:e,uri:n}}class It{get event(){return this.emitter.event}constructor(e,t,i){const s=o=>this.emitter.fire(o);this.emitter=new $({onWillAddFirstListener:()=>e.addEventListener(t,s,i),onDidRemoveLastListener:()=>e.removeEventListener(t,s,i)})}dispose(){this.emitter.dispose()}}function BFe(n,e={}){const t=rq(e);return t.textContent=n,t}function WFe(n,e={}){const t=rq(e);return $fe(t,VFe(n,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function rq(n){const e=n.inline?"span":"div",t=document.createElement(e);return n.className&&(t.className=n.className),t}class HFe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function $fe(n,e,t,i){let s;if(e.type===2)s=document.createTextNode(e.content||"");else if(e.type===3)s=document.createElement("b");else if(e.type===4)s=document.createElement("i");else if(e.type===7&&i)s=document.createElement("code");else if(e.type===5&&t){const o=document.createElement("a");t.disposables.add(Ji(o,"click",r=>{t.callback(String(e.index),r)})),s=o}else e.type===8?s=document.createElement("br"):e.type===1&&(s=n);s&&n!==s&&n.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(o=>{$fe(s,o,t,i)})}function VFe(n,e){const t={type:1,children:[]};let i=0,s=t;const o=[],r=new HFe(n);for(;!r.eos();){let a=r.next();const l=a==="\\"&&WW(r.peek(),e)!==0;if(l&&(a=r.next()),!l&&jFe(a,e)&&a===r.peek()){r.advance(),s.type===2&&(s=o.pop());const c=WW(a,e);if(s.type===c||s.type===5&&c===6)s=o.pop();else{const d={type:c,children:[]};c===5&&(d.index=i,i++),s.children.push(d),o.push(s),s=d}}else if(a===`
`)s.type===2&&(s=o.pop()),s.children.push({type:8});else if(s.type!==2){const c={type:2,content:a};s.children.push(c),o.push(s),s=c}else s.content+=a}return s.type===2&&(s=o.pop()),t}function jFe(n,e){return WW(n,e)!==0}function WW(n,e){switch(n){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const zFe=new RegExp(`(\\\\)?\\$\\((${Ke.iconNameExpression}(?:${Ke.iconModifierExpression})?)\\)`,"g");function lm(n){const e=new Array;let t,i=0,s=0;for(;(t=zFe.exec(n))!==null;){s=t.index||0,i<s&&e.push(n.substring(i,s)),i=(t.index||0)+t[0].length;const[,o,r]=t;e.push(o?`$(${r})`:vv({id:r}))}return i<n.length&&e.push(n.substring(i)),e}function vv(n){const e=ge("span");return e.classList.add(...Ke.asClassNameArray(n)),e}function UFe(n){const e=$Fe(n);if(e&&e.length>0)return new Uint32Array(e)}let oa=0;const ug=new Uint32Array(10);function $Fe(n){if(oa=0,xd(n,W3,4352),oa>0||(xd(n,H3,4449),oa>0)||(xd(n,V3,4520),oa>0)||(xd(n,Np,12593),oa))return ug.subarray(0,oa);if(n>=44032&&n<=55203){const e=n-44032,t=e%588,i=Math.floor(e/588),s=Math.floor(t/28),o=t%28-1;if(i<W3.length?xd(i,W3,0):4352+i-12593<Np.length&&xd(4352+i,Np,12593),s<H3.length?xd(s,H3,0):4449+s-12593<Np.length&&xd(4449+s-12593,Np,12593),o>=0&&(o<V3.length?xd(o,V3,0):4520+o-12593<Np.length&&xd(4520+o-12593,Np,12593)),oa>0)return ug.subarray(0,oa)}}function xd(n,e,t){n>=t&&n<t+e.length&&KFe(e[n-t])}function KFe(n){n!==0&&(ug[oa++]=n&255,n>>8&&(ug[oa++]=n>>8&255),n>>16&&(ug[oa++]=n>>16&255))}const W3=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),H3=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),V3=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),Np=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function aq(...n){return function(e,t){for(let i=0,s=n.length;i<s;i++){const o=n[i](e,t);if(o)return o}return null}}Kfe.bind(void 0,!1);const $k=Kfe.bind(void 0,!0);function Kfe(n,e,t){if(!t||t.length<e.length)return null;let i;return n?i=_K(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function qfe(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t===-1?null:[{start:t,end:t+n.length}]}function Gfe(n,e){return HW(n.toLowerCase(),e.toLowerCase(),0,0)}function HW(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]===e[i]){let s=null;return(s=HW(n,e,t+1,i+1))?dq({start:i,end:i+1},s):null}return HW(n,e,t,i+1)}function lq(n){return 97<=n&&n<=122}function Z4(n){return 65<=n&&n<=90}function cq(n){return 48<=n&&n<=57}function Zfe(n){return n===32||n===9||n===10||n===13}const Yfe=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(n=>Yfe.add(n.charCodeAt(0)));function R2(n){return Zfe(n)||Yfe.has(n)}function hee(n,e){return n===e||R2(n)&&R2(e)}const j3=new Map;function fee(n){if(j3.has(n))return j3.get(n);let e;const t=UFe(n);return t&&(e=t),j3.set(n,e),e}function Xfe(n){return lq(n)||Z4(n)||cq(n)}function dq(n,e){return e.length===0?e=[n]:n.end===e[0].start?e[0].start=n.start:e.unshift(n),e}function Qfe(n,e){for(let t=e;t<n.length;t++){const i=n.charCodeAt(t);if(Z4(i)||cq(i)||t>0&&!Xfe(n.charCodeAt(t-1)))return t}return n.length}function VW(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]!==e[i].toLowerCase())return null;{let s=null,o=i+1;for(s=VW(n,e,t+1,i+1);!s&&(o=Qfe(e,o))<e.length;)s=VW(n,e,t+1,o),o++;return s===null?null:dq({start:i,end:i+1},s)}}function qFe(n){let e=0,t=0,i=0,s=0,o=0;for(let d=0;d<n.length;d++)o=n.charCodeAt(d),Z4(o)&&e++,lq(o)&&t++,Xfe(o)&&i++,cq(o)&&s++;const r=e/n.length,a=t/n.length,l=i/n.length,c=s/n.length;return{upperPercent:r,lowerPercent:a,alphaPercent:l,numericPercent:c}}function GFe(n){const{upperPercent:e,lowerPercent:t}=n;return t===0&&e>.6}function ZFe(n){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:s}=n;return t>.2&&e<.8&&i>.6&&s<.2}function YFe(n){let e=0,t=0,i=0,s=0;for(let o=0;o<n.length;o++)i=n.charCodeAt(o),Z4(i)&&e++,lq(i)&&t++,Zfe(i)&&s++;return(e===0||t===0)&&s===0?n.length<=30:e<=5}function Jfe(n,e){if(!e||(e=e.trim(),e.length===0)||!YFe(n))return null;e.length>60&&(e=e.substring(0,60));const t=qFe(e);if(!ZFe(t)){if(!GFe(t))return null;e=e.toLowerCase()}let i=null,s=0;for(n=n.toLowerCase();s<e.length&&(i=VW(n,e,0,s))===null;)s=Qfe(e,s+1);return i}function XFe(n,e,t=!1){if(!e||e.length===0)return null;let i=null,s=0;for(n=n.toLowerCase(),e=e.toLowerCase();s<e.length&&(i=jW(n,e,0,s,t),i===null);)s=ege(e,s+1);return i}function jW(n,e,t,i,s){let o=0;if(t===n.length)return[];if(i===e.length)return null;if(!hee(n.charCodeAt(t),e.charCodeAt(i))){const l=fee(n.charCodeAt(t));if(!l)return null;for(let c=0;c<l.length;c++)if(!hee(l[c],e.charCodeAt(i+c)))return null;o+=l.length-1}let r=null,a=i+o+1;if(r=jW(n,e,t+1,a,s),!s)for(;!r&&(a=ege(e,a))<e.length;)r=jW(n,e,t+1,a,s),a++;if(!r)return null;if(n.charCodeAt(t)!==e.charCodeAt(i)){const l=fee(n.charCodeAt(t));if(!l)return r;for(let c=0;c<l.length;c++)if(l[c]!==e.charCodeAt(i+c))return r}return dq({start:i,end:i+o+1},r)}function ege(n,e){for(let t=e;t<n.length;t++)if(R2(n.charCodeAt(t))||t>0&&R2(n.charCodeAt(t-1)))return t;return n.length}const QFe=aq($k,Jfe,qfe),JFe=aq($k,Jfe,Gfe),gee=new Hu(1e4);function mee(n,e,t=!1){if(typeof n!="string"||typeof e!="string")return null;let i=gee.get(n);i||(i=new RegExp(FRe(n),"i"),gee.set(n,i));const s=i.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?JFe(n,e):QFe(n,e)}function e5e(n,e){const t=wv(n,n.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?DI(t):null}function t5e(n,e,t,i,s,o){const r=Math.min(13,n.length);for(;t<r;t++){const a=wv(n,e,t,i,s,o,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(a)return a}return[0,o]}function DI(n){if(typeof n>"u")return[];const e=[],t=n[1];for(let i=n.length-1;i>1;i--){const s=n[i]+t,o=e[e.length-1];o&&o.end===s?o.end=s+1:e.push({start:s,end:s+1})}return e}const Vg=128;function uq(){const n=[],e=[];for(let t=0;t<=Vg;t++)e[t]=0;for(let t=0;t<=Vg;t++)n.push(e.slice(0));return n}function tge(n){const e=[];for(let t=0;t<=n;t++)e[t]=0;return e}const ige=tge(2*Vg),zW=tge(2*Vg),Yu=uq(),Ip=uq(),QE=uq();function JE(n,e){if(e<0||e>=n.length)return!1;const t=n.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!yK(t)}}function pee(n,e){if(e<0||e>=n.length)return!1;switch(n.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function ET(n,e,t){return e[n]!==t[n]}function i5e(n,e,t,i,s,o,r=!1){for(;e<t&&s<o;)n[e]===i[s]&&(r&&(ige[e]=s),e+=1),s+=1;return e===t}var ed;(function(n){n.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}n.isDefault=e})(ed||(ed={}));const QZ=class QZ{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};QZ.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};let Kk=QZ;function wv(n,e,t,i,s,o,r=Kk.default){const a=n.length>Vg?Vg:n.length,l=i.length>Vg?Vg:i.length;if(t>=a||o>=l||a-t>l-o||!i5e(e,t,a,s,o,l,!0))return;n5e(a,l,t,o,e,s);let c=1,d=1,u=t,h=o;const f=[!1];for(c=1,u=t;u<a;c++,u++){const w=ige[u],y=zW[u],C=u+1<a?zW[u+1]:l;for(d=w-o+1,h=w;h<C;d++,h++){let S=Number.MIN_SAFE_INTEGER,x=!1;h<=y&&(S=s5e(n,e,u,t,i,s,h,l,o,Yu[c-1][d-1]===0,f));let k=0;S!==Number.MAX_SAFE_INTEGER&&(x=!0,k=S+Ip[c-1][d-1]);const N=h>w,E=N?Ip[c][d-1]+(Yu[c][d-1]>0?-5:0):0,B=h>w+1&&Yu[c][d-1]>0,A=B?Ip[c][d-2]+(Yu[c][d-2]>0?-5:0):0;if(B&&(!N||A>=E)&&(!x||A>=k))Ip[c][d]=A,QE[c][d]=3,Yu[c][d]=0;else if(N&&(!x||E>=k))Ip[c][d]=E,QE[c][d]=2,Yu[c][d]=0;else if(x)Ip[c][d]=k,QE[c][d]=1,Yu[c][d]=Yu[c-1][d-1]+1;else throw new Error("not possible")}}if(!f[0]&&!r.firstMatchCanBeWeak)return;c--,d--;const m=[Ip[c][d],o];let p=0,b=0;for(;c>=1;){let w=d;do{const y=QE[c][w];if(y===3)w=w-2;else if(y===2)w=w-1;else break}while(w>=1);p>1&&e[t+c-1]===s[o+d-1]&&!ET(w+o-1,i,s)&&p+1>Yu[c][w]&&(w=d),w===d?p++:p=1,b||(b=w),c--,d=w-1,m.push(d)}l-o===a&&r.boostFullMatch&&(m[0]+=2);const v=b-a;return m[0]-=v,m}function n5e(n,e,t,i,s,o){let r=n-1,a=e-1;for(;r>=t&&a>=i;)s[r]===o[a]&&(zW[r]=a,r--),a--}function s5e(n,e,t,i,s,o,r,a,l,c,d){if(e[t]!==o[r])return Number.MIN_SAFE_INTEGER;let u=1,h=!1;return r===t-i?u=n[t]===s[r]?7:5:ET(r,s,o)&&(r===0||!ET(r-1,s,o))?(u=n[t]===s[r]?7:5,h=!0):JE(o,r)&&(r===0||!JE(o,r-1))?u=5:(JE(o,r-1)||pee(o,r-1))&&(u=5,h=!0),u>1&&t===i&&(d[0]=!0),h||(h=ET(r,s,o)||JE(o,r-1)||pee(o,r-1)),t===i?r>l&&(u-=h?3:5):c?u+=h?2:0:u+=h?0:1,r+1===a&&(u-=h?3:5),u}function o5e(n,e,t,i,s,o,r){return r5e(n,e,t,i,s,o,!0,r)}function r5e(n,e,t,i,s,o,r,a){let l=wv(n,e,t,i,s,o,a);if(l&&!r)return l;if(n.length>=3){const c=Math.min(7,n.length-1);for(let d=t+1;d<c;d++){const u=a5e(n,d);if(u){const h=wv(u,u.toLowerCase(),t,i,s,o,a);h&&(h[0]-=3,(!l||h[0]>l[0])&&(l=h))}}}return l}function a5e(n,e){if(e+1>=n.length)return;const t=n[e],i=n[e+1];if(t!==i)return n.slice(0,e)+i+t+n.slice(e+2)}const l5e="$(",hq=new RegExp(`\\$\\(${Ke.iconNameExpression}(?:${Ke.iconModifierExpression})?\\)`,"g"),c5e=new RegExp(`(\\\\)?${hq.source}`,"g");function d5e(n){return n.replace(c5e,(e,t)=>t?e:`\\${e}`)}const u5e=new RegExp(`\\\\${hq.source}`,"g");function h5e(n){return n.replace(u5e,e=>`\\${e}`)}const f5e=new RegExp(`(\\s)?(\\\\)?${hq.source}(\\s)?`,"g");function fq(n){return n.indexOf(l5e)===-1?n:n.replace(f5e,(e,t,i,s)=>i?e:t||s||"")}function g5e(n){return n?n.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const z3=new RegExp(`\\$\\(${Ke.iconNameCharacter}+\\)`,"g");function JS(n){z3.lastIndex=0;let e="";const t=[];let i=0;for(;;){const s=z3.lastIndex,o=z3.exec(n),r=n.substring(s,o==null?void 0:o.index);if(r.length>0){e+=r;for(let a=0;a<r.length;a++)t.push(i)}if(!o)break;i+=o[0].length}return{text:e,iconOffsets:t}}function U3(n,e,t=!1){const{text:i,iconOffsets:s}=e;if(!s||s.length===0)return mee(n,i,t);const o=wI(i," "),r=i.length-o.length,a=mee(n,o,t);if(a)for(const l of a){const c=s[l.start+r]+r;l.start+=c,l.end+=c}return a}function Md(n){return t2(n,!0)}class m5e{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:Nk(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===tt.file)return DW(Md(e),Md(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(bee(e.authority,t.authority))return DW(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Be.joinPath(e,...t)}basenameOrAuthority(e){return ml(e)||e.authority}basename(e){return xn.basename(e.path)}extname(e){return xn.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===tt.file?t=Be.file(Oue(Md(e))).path:(t=xn.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===tt.file?t=Be.file(Aue(Md(e))).path:t=xn.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!bee(e.authority,t.authority))return;if(e.scheme===tt.file){const o=gRe(Md(e),Md(t));return As?mfe(o):o}let i=e.path||"/";const s=t.path||"/";if(this._ignorePathCasing(e)){let o=0;for(const r=Math.min(i.length,s.length);o<r&&!(i.charCodeAt(o)!==s.charCodeAt(o)&&i.charAt(o).toLowerCase()!==s.charAt(o).toLowerCase());o++);i=s.substr(0,o)+i.substr(o)}return xn.relative(i,s)}resolvePath(e,t){if(e.scheme===tt.file){const i=Be.file(fRe(Md(e),t));return e.with({authority:i.authority,path:i.path})}return t=bOe(t),e.with({path:xn.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&cw(e,t)}hasTrailingPathSeparator(e,t=Zc){if(e.scheme===tt.file){const i=Md(e);return i.length>UJ(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Zc){return vee(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Zc){let i=!1;if(e.scheme===tt.file){const s=Md(e);i=s!==void 0&&s.length===UJ(s).length&&s[s.length-1]===t}else{t="/";const s=e.path;i=s.length===1&&s.charCodeAt(s.length-1)===47}return!i&&!vee(e,t)?e.with({path:e.path+"/"}):e}}const Oi=new m5e(()=>!1),qk=Oi.isEqual.bind(Oi);Oi.isEqualOrParent.bind(Oi);Oi.getComparisonKey.bind(Oi);const p5e=Oi.basenameOrAuthority.bind(Oi),ml=Oi.basename.bind(Oi),_5e=Oi.extname.bind(Oi),Y4=Oi.dirname.bind(Oi),b5e=Oi.joinPath.bind(Oi),v5e=Oi.normalizePath.bind(Oi),w5e=Oi.relativePath.bind(Oi),_ee=Oi.resolvePath.bind(Oi);Oi.isAbsolutePath.bind(Oi);const bee=Oi.isEqualAuthority.bind(Oi),vee=Oi.hasTrailingPathSeparator.bind(Oi);Oi.removeTrailingPathSeparator.bind(Oi);Oi.addTrailingPathSeparator.bind(Oi);var Ym;(function(n){n.META_DATA_LABEL="label",n.META_DATA_DESCRIPTION="description",n.META_DATA_SIZE="size",n.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{const[a,l]=r.split(":");a&&l&&i.set(a,l)});const o=t.path.substring(0,t.path.indexOf(";"));return o&&i.set(n.META_DATA_MIME,o),i}n.parseMetaData=e})(Ym||(Ym={}));class Us{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw al("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=C5e(this.supportThemeIcons?d5e(e):e).replace(/([ \t]+)/g,(i,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${S5e(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(Da(t),"g");return e.replace(i,(s,o)=>e.charAt(o-1)!=="\\"?`\\${s}`:s)}}function RC(n){return td(n)?!n.value:Array.isArray(n)?n.every(RC):!0}function td(n){return n instanceof Us?!0:n&&typeof n=="object"?typeof n.value=="string"&&(typeof n.isTrusted=="boolean"||typeof n.isTrusted=="object"||n.isTrusted===void 0)&&(typeof n.supportThemeIcons=="boolean"||n.supportThemeIcons===void 0):!1}function y5e(n,e){return n===e?!0:!n||!e?!1:n.value===e.value&&n.isTrusted===e.isTrusted&&n.supportThemeIcons===e.supportThemeIcons&&n.supportHtml===e.supportHtml&&(n.baseUri===e.baseUri||!!n.baseUri&&!!e.baseUri&&qk(Be.from(n.baseUri),Be.from(e.baseUri)))}function C5e(n){return n.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function S5e(n,e){var s;const t=((s=n.match(/^`+/gm))==null?void 0:s.reduce((o,r)=>o.length>r.length?o:r).length)??0,i=t>=3?t+1:3;return[`${"`".repeat(i)}${e}`,n,`${"`".repeat(i)}`].join(`
`)}function eD(n){return n.replace(/"/g,"&quot;")}function $3(n){return n&&n.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function x5e(n){const e=[],t=n.split("|").map(s=>s.trim());n=t[0];const i=t[1];if(i){const s=/height=(\d+)/.exec(i),o=/width=(\d+)/.exec(i),r=s?s[1]:"",a=o?o[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(r));l&&e.push(`width="${a}"`),c&&e.push(`height="${r}"`)}return{href:n,dimensions:e}}class gq{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const UW=new gq("id#");let Ys={};(function(){function n(e,t){t(Ys)}n.amd=!0,function(e,t){typeof n=="function"&&n.amd?n(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function i(Ht){e.defaults=Ht}const s=/[&<>"']/,o=new RegExp(s.source,"g"),r=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(r.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=Ht=>l[Ht];function d(Ht,H){if(H){if(s.test(Ht))return Ht.replace(o,c)}else if(r.test(Ht))return Ht.replace(a,c);return Ht}const u=/(^|[^\[])\^/g;function h(Ht,H){let j=typeof Ht=="string"?Ht:Ht.source;H=H||"";const K={replace:(Y,ie)=>{let ue=typeof ie=="string"?ie:ie.source;return ue=ue.replace(u,"$1"),j=j.replace(Y,ue),K},getRegex:()=>new RegExp(j,H)};return K}function f(Ht){try{Ht=encodeURI(Ht).replace(/%25/g,"%")}catch{return null}return Ht}const m={exec:()=>null};function p(Ht,H){const j=Ht.replace(/\|/g,(ie,ue,be)=>{let Ue=!1,Xe=ue;for(;--Xe>=0&&be[Xe]==="\\";)Ue=!Ue;return Ue?"|":" |"}),K=j.split(/ \|/);let Y=0;if(K[0].trim()||K.shift(),K.length>0&&!K[K.length-1].trim()&&K.pop(),H)if(K.length>H)K.splice(H);else for(;K.length<H;)K.push("");for(;Y<K.length;Y++)K[Y]=K[Y].trim().replace(/\\\|/g,"|");return K}function b(Ht,H,j){const K=Ht.length;if(K===0)return"";let Y=0;for(;Y<K;){const ie=Ht.charAt(K-Y-1);if(ie===H&&!j)Y++;else if(ie!==H&&j)Y++;else break}return Ht.slice(0,K-Y)}function v(Ht,H){if(Ht.indexOf(H[1])===-1)return-1;let j=0;for(let K=0;K<Ht.length;K++)if(Ht[K]==="\\")K++;else if(Ht[K]===H[0])j++;else if(Ht[K]===H[1]&&(j--,j<0))return K;return-1}function w(Ht,H,j,K){const Y=H.href,ie=H.title?d(H.title):null,ue=Ht[1].replace(/\\([\[\]])/g,"$1");if(Ht[0].charAt(0)!=="!"){K.state.inLink=!0;const be={type:"link",raw:j,href:Y,title:ie,text:ue,tokens:K.inlineTokens(ue)};return K.state.inLink=!1,be}return{type:"image",raw:j,href:Y,title:ie,text:d(ue)}}function y(Ht,H){const j=Ht.match(/^(\s+)(?:```)/);if(j===null)return H;const K=j[1];return H.split(`
`).map(Y=>{const ie=Y.match(/^\s+/);if(ie===null)return Y;const[ue]=ie;return ue.length>=K.length?Y.slice(K.length):Y}).join(`
`)}class C{constructor(H){Nn(this,"options");Nn(this,"rules");Nn(this,"lexer");this.options=H||e.defaults}space(H){const j=this.rules.block.newline.exec(H);if(j&&j[0].length>0)return{type:"space",raw:j[0]}}code(H){const j=this.rules.block.code.exec(H);if(j){const K=j[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:j[0],codeBlockStyle:"indented",text:this.options.pedantic?K:b(K,`
`)}}}fences(H){const j=this.rules.block.fences.exec(H);if(j){const K=j[0],Y=y(K,j[3]||"");return{type:"code",raw:K,lang:j[2]?j[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):j[2],text:Y}}}heading(H){const j=this.rules.block.heading.exec(H);if(j){let K=j[2].trim();if(/#$/.test(K)){const Y=b(K,"#");(this.options.pedantic||!Y||/ $/.test(Y))&&(K=Y.trim())}return{type:"heading",raw:j[0],depth:j[1].length,text:K,tokens:this.lexer.inline(K)}}}hr(H){const j=this.rules.block.hr.exec(H);if(j)return{type:"hr",raw:b(j[0],`
`)}}blockquote(H){const j=this.rules.block.blockquote.exec(H);if(j){let K=b(j[0],`
`).split(`
`),Y="",ie="";const ue=[];for(;K.length>0;){let be=!1;const Ue=[];let Xe;for(Xe=0;Xe<K.length;Xe++)if(/^ {0,3}>/.test(K[Xe]))Ue.push(K[Xe]),be=!0;else if(!be)Ue.push(K[Xe]);else break;K=K.slice(Xe);const Pt=Ue.join(`
`),hi=Pt.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");Y=Y?`${Y}
${Pt}`:Pt,ie=ie?`${ie}
${hi}`:hi;const wi=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(hi,ue,!0),this.lexer.state.top=wi,K.length===0)break;const gn=ue[ue.length-1];if((gn==null?void 0:gn.type)==="code")break;if((gn==null?void 0:gn.type)==="blockquote"){const mn=gn,gr=mn.raw+`
`+K.join(`
`),ja=this.blockquote(gr);ue[ue.length-1]=ja,Y=Y.substring(0,Y.length-mn.raw.length)+ja.raw,ie=ie.substring(0,ie.length-mn.text.length)+ja.text;break}else if((gn==null?void 0:gn.type)==="list"){const mn=gn,gr=mn.raw+`
`+K.join(`
`),ja=this.list(gr);ue[ue.length-1]=ja,Y=Y.substring(0,Y.length-gn.raw.length)+ja.raw,ie=ie.substring(0,ie.length-mn.raw.length)+ja.raw,K=gr.substring(ue[ue.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:Y,tokens:ue,text:ie}}}list(H){let j=this.rules.block.list.exec(H);if(j){let K=j[1].trim();const Y=K.length>1,ie={type:"list",raw:"",ordered:Y,start:Y?+K.slice(0,-1):"",loose:!1,items:[]};K=Y?`\\d{1,9}\\${K.slice(-1)}`:`\\${K}`,this.options.pedantic&&(K=Y?K:"[*+-]");const ue=new RegExp(`^( {0,3}${K})((?:[	 ][^\\n]*)?(?:\\n|$))`);let be=!1;for(;H;){let Ue=!1,Xe="",Pt="";if(!(j=ue.exec(H))||this.rules.block.hr.test(H))break;Xe=j[0],H=H.substring(Xe.length);let hi=j[2].split(`
`,1)[0].replace(/^\t+/,Q1=>" ".repeat(3*Q1.length)),wi=H.split(`
`,1)[0],gn=!hi.trim(),mn=0;if(this.options.pedantic?(mn=2,Pt=hi.trimStart()):gn?mn=j[1].length+1:(mn=j[2].search(/[^ ]/),mn=mn>4?1:mn,Pt=hi.slice(mn),mn+=j[1].length),gn&&/^ *$/.test(wi)&&(Xe+=wi+`
`,H=H.substring(wi.length+1),Ue=!0),!Ue){const Q1=new RegExp(`^ {0,${Math.min(3,mn-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),yt=new RegExp(`^ {0,${Math.min(3,mn-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),re=new RegExp(`^ {0,${Math.min(3,mn-1)}}(?:\`\`\`|~~~)`),Ve=new RegExp(`^ {0,${Math.min(3,mn-1)}}#`);for(;H;){const ut=H.split(`
`,1)[0];if(wi=ut,this.options.pedantic&&(wi=wi.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),re.test(wi)||Ve.test(wi)||Q1.test(wi)||yt.test(H))break;if(wi.search(/[^ ]/)>=mn||!wi.trim())Pt+=`
`+wi.slice(mn);else{if(gn||hi.search(/[^ ]/)>=4||re.test(hi)||Ve.test(hi)||yt.test(hi))break;Pt+=`
`+wi}!gn&&!wi.trim()&&(gn=!0),Xe+=ut+`
`,H=H.substring(ut.length+1),hi=wi.slice(mn)}}ie.loose||(be?ie.loose=!0:/\n *\n *$/.test(Xe)&&(be=!0));let gr=null,ja;this.options.gfm&&(gr=/^\[[ xX]\] /.exec(Pt),gr&&(ja=gr[0]!=="[ ] ",Pt=Pt.replace(/^\[[ xX]\] +/,""))),ie.items.push({type:"list_item",raw:Xe,task:!!gr,checked:ja,loose:!1,text:Pt,tokens:[]}),ie.raw+=Xe}ie.items[ie.items.length-1].raw=ie.items[ie.items.length-1].raw.trimEnd(),ie.items[ie.items.length-1].text=ie.items[ie.items.length-1].text.trimEnd(),ie.raw=ie.raw.trimEnd();for(let Ue=0;Ue<ie.items.length;Ue++)if(this.lexer.state.top=!1,ie.items[Ue].tokens=this.lexer.blockTokens(ie.items[Ue].text,[]),!ie.loose){const Xe=ie.items[Ue].tokens.filter(hi=>hi.type==="space"),Pt=Xe.length>0&&Xe.some(hi=>/\n.*\n/.test(hi.raw));ie.loose=Pt}if(ie.loose)for(let Ue=0;Ue<ie.items.length;Ue++)ie.items[Ue].loose=!0;return ie}}html(H){const j=this.rules.block.html.exec(H);if(j)return{type:"html",block:!0,raw:j[0],pre:j[1]==="pre"||j[1]==="script"||j[1]==="style",text:j[0]}}def(H){const j=this.rules.block.def.exec(H);if(j){const K=j[1].toLowerCase().replace(/\s+/g," "),Y=j[2]?j[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",ie=j[3]?j[3].substring(1,j[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):j[3];return{type:"def",tag:K,raw:j[0],href:Y,title:ie}}}table(H){const j=this.rules.block.table.exec(H);if(!j||!/[:|]/.test(j[2]))return;const K=p(j[1]),Y=j[2].replace(/^\||\| *$/g,"").split("|"),ie=j[3]&&j[3].trim()?j[3].replace(/\n[ \t]*$/,"").split(`
`):[],ue={type:"table",raw:j[0],header:[],align:[],rows:[]};if(K.length===Y.length){for(const be of Y)/^ *-+: *$/.test(be)?ue.align.push("right"):/^ *:-+: *$/.test(be)?ue.align.push("center"):/^ *:-+ *$/.test(be)?ue.align.push("left"):ue.align.push(null);for(let be=0;be<K.length;be++)ue.header.push({text:K[be],tokens:this.lexer.inline(K[be]),header:!0,align:ue.align[be]});for(const be of ie)ue.rows.push(p(be,ue.header.length).map((Ue,Xe)=>({text:Ue,tokens:this.lexer.inline(Ue),header:!1,align:ue.align[Xe]})));return ue}}lheading(H){const j=this.rules.block.lheading.exec(H);if(j)return{type:"heading",raw:j[0],depth:j[2].charAt(0)==="="?1:2,text:j[1],tokens:this.lexer.inline(j[1])}}paragraph(H){const j=this.rules.block.paragraph.exec(H);if(j){const K=j[1].charAt(j[1].length-1)===`
`?j[1].slice(0,-1):j[1];return{type:"paragraph",raw:j[0],text:K,tokens:this.lexer.inline(K)}}}text(H){const j=this.rules.block.text.exec(H);if(j)return{type:"text",raw:j[0],text:j[0],tokens:this.lexer.inline(j[0])}}escape(H){const j=this.rules.inline.escape.exec(H);if(j)return{type:"escape",raw:j[0],text:d(j[1])}}tag(H){const j=this.rules.inline.tag.exec(H);if(j)return!this.lexer.state.inLink&&/^<a /i.test(j[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(j[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(j[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(j[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:j[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:j[0]}}link(H){const j=this.rules.inline.link.exec(H);if(j){const K=j[2].trim();if(!this.options.pedantic&&/^</.test(K)){if(!/>$/.test(K))return;const ue=b(K.slice(0,-1),"\\");if((K.length-ue.length)%2===0)return}else{const ue=v(j[2],"()");if(ue>-1){const Ue=(j[0].indexOf("!")===0?5:4)+j[1].length+ue;j[2]=j[2].substring(0,ue),j[0]=j[0].substring(0,Ue).trim(),j[3]=""}}let Y=j[2],ie="";if(this.options.pedantic){const ue=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Y);ue&&(Y=ue[1],ie=ue[3])}else ie=j[3]?j[3].slice(1,-1):"";return Y=Y.trim(),/^</.test(Y)&&(this.options.pedantic&&!/>$/.test(K)?Y=Y.slice(1):Y=Y.slice(1,-1)),w(j,{href:Y&&Y.replace(this.rules.inline.anyPunctuation,"$1"),title:ie&&ie.replace(this.rules.inline.anyPunctuation,"$1")},j[0],this.lexer)}}reflink(H,j){let K;if((K=this.rules.inline.reflink.exec(H))||(K=this.rules.inline.nolink.exec(H))){const Y=(K[2]||K[1]).replace(/\s+/g," "),ie=j[Y.toLowerCase()];if(!ie){const ue=K[0].charAt(0);return{type:"text",raw:ue,text:ue}}return w(K,ie,K[0],this.lexer)}}emStrong(H,j,K=""){let Y=this.rules.inline.emStrongLDelim.exec(H);if(!Y||Y[3]&&K.match(/[\p{L}\p{N}]/u))return;if(!(Y[1]||Y[2]||"")||!K||this.rules.inline.punctuation.exec(K)){const ue=[...Y[0]].length-1;let be,Ue,Xe=ue,Pt=0;const hi=Y[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(hi.lastIndex=0,j=j.slice(-1*H.length+ue);(Y=hi.exec(j))!=null;){if(be=Y[1]||Y[2]||Y[3]||Y[4]||Y[5]||Y[6],!be)continue;if(Ue=[...be].length,Y[3]||Y[4]){Xe+=Ue;continue}else if((Y[5]||Y[6])&&ue%3&&!((ue+Ue)%3)){Pt+=Ue;continue}if(Xe-=Ue,Xe>0)continue;Ue=Math.min(Ue,Ue+Xe+Pt);const wi=[...Y[0]][0].length,gn=H.slice(0,ue+Y.index+wi+Ue);if(Math.min(ue,Ue)%2){const gr=gn.slice(1,-1);return{type:"em",raw:gn,text:gr,tokens:this.lexer.inlineTokens(gr)}}const mn=gn.slice(2,-2);return{type:"strong",raw:gn,text:mn,tokens:this.lexer.inlineTokens(mn)}}}}codespan(H){const j=this.rules.inline.code.exec(H);if(j){let K=j[2].replace(/\n/g," ");const Y=/[^ ]/.test(K),ie=/^ /.test(K)&&/ $/.test(K);return Y&&ie&&(K=K.substring(1,K.length-1)),K=d(K,!0),{type:"codespan",raw:j[0],text:K}}}br(H){const j=this.rules.inline.br.exec(H);if(j)return{type:"br",raw:j[0]}}del(H){const j=this.rules.inline.del.exec(H);if(j)return{type:"del",raw:j[0],text:j[2],tokens:this.lexer.inlineTokens(j[2])}}autolink(H){const j=this.rules.inline.autolink.exec(H);if(j){let K,Y;return j[2]==="@"?(K=d(j[1]),Y="mailto:"+K):(K=d(j[1]),Y=K),{type:"link",raw:j[0],text:K,href:Y,tokens:[{type:"text",raw:K,text:K}]}}}url(H){var K;let j;if(j=this.rules.inline.url.exec(H)){let Y,ie;if(j[2]==="@")Y=d(j[0]),ie="mailto:"+Y;else{let ue;do ue=j[0],j[0]=((K=this.rules.inline._backpedal.exec(j[0]))==null?void 0:K[0])??"";while(ue!==j[0]);Y=d(j[0]),j[1]==="www."?ie="http://"+j[0]:ie=j[0]}return{type:"link",raw:j[0],text:Y,href:ie,tokens:[{type:"text",raw:Y,text:Y}]}}}inlineText(H){const j=this.rules.inline.text.exec(H);if(j){let K;return this.lexer.state.inRawBlock?K=j[0]:K=d(j[0]),{type:"text",raw:j[0],text:K}}}}const S=/^(?: *(?:\n|$))+/,x=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,k=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,N=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,E=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,B=/(?:[*+-]|\d{1,9}[.)])/,A=h(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,B).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),O=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,W=/^[^\n]+/,T=/(?!\s*\])(?:\\.|[^\[\]\\])+/,M=h(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",T).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),z=h(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,B).getRegex(),ee="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",q=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Z=h("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",q).replace("tag",ee).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),V=h(O).replace("hr",N).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ee).getRegex(),Fe={blockquote:h(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",V).getRegex(),code:x,def:M,fences:k,heading:E,hr:N,html:Z,lheading:A,list:z,newline:S,paragraph:V,table:m,text:W},ke=h("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",N).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ee).getRegex(),De={...Fe,table:ke,paragraph:h(O).replace("hr",N).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ke).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ee).getRegex()},ce={...Fe,html:h(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",q).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:m,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:h(O).replace("hr",N).replace("heading",` *#{1,6} *[^
]`).replace("lheading",A).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Re=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ee=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,it=/^( {2,}|\\)\n(?!\s*$)/,Ge=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,J="\\p{P}\\p{S}",Le=h(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,J).getRegex(),ve=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,nt=h(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,J).getRegex(),St=h("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,J).getRegex(),zi=h("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,J).getRegex(),hs=h(/\\([punct])/,"gu").replace(/punct/g,J).getRegex(),Bs=h(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Af=h(q).replace("(?:-->|$)","-->").getRegex(),cc=h("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Af).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Sp=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,rE=h(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Sp).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),aE=h(/^!?\[(label)\]\[(ref)\]/).replace("label",Sp).replace("ref",T).getRegex(),d0=h(/^!?\[(ref)\](?:\[\])?/).replace("ref",T).getRegex(),xp=h("reflink|nolink(?!\\()","g").replace("reflink",aE).replace("nolink",d0).getRegex(),wd={_backpedal:m,anyPunctuation:hs,autolink:Bs,blockSkip:ve,br:it,code:Ee,del:m,emStrongLDelim:nt,emStrongRDelimAst:St,emStrongRDelimUnd:zi,escape:Re,link:rE,nolink:d0,punctuation:Le,reflink:aE,reflinkSearch:xp,tag:cc,text:Ge,url:m},Of={...wd,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",Sp).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Sp).getRegex()},u0={...wd,escape:h(Re).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},lE={...u0,br:h(it).replace("{2,}","*").getRegex(),text:h(u0.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Lp={normal:Fe,gfm:De,pedantic:ce},qu={normal:wd,gfm:u0,breaks:lE,pedantic:Of};class Jr{constructor(H){Nn(this,"tokens");Nn(this,"options");Nn(this,"state");Nn(this,"tokenizer");Nn(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=H||e.defaults,this.options.tokenizer=this.options.tokenizer||new C,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const j={block:Lp.normal,inline:qu.normal};this.options.pedantic?(j.block=Lp.pedantic,j.inline=qu.pedantic):this.options.gfm&&(j.block=Lp.gfm,this.options.breaks?j.inline=qu.breaks:j.inline=qu.gfm),this.tokenizer.rules=j}static get rules(){return{block:Lp,inline:qu}}static lex(H,j){return new Jr(j).lex(H)}static lexInline(H,j){return new Jr(j).inlineTokens(H)}lex(H){H=H.replace(/\r\n|\r/g,`
`),this.blockTokens(H,this.tokens);for(let j=0;j<this.inlineQueue.length;j++){const K=this.inlineQueue[j];this.inlineTokens(K.src,K.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(H,j=[],K=!1){this.options.pedantic?H=H.replace(/\t/g,"    ").replace(/^ +$/gm,""):H=H.replace(/^( *)(\t+)/gm,(be,Ue,Xe)=>Ue+"    ".repeat(Xe.length));let Y,ie,ue;for(;H;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(be=>(Y=be.call({lexer:this},H,j))?(H=H.substring(Y.raw.length),j.push(Y),!0):!1))){if(Y=this.tokenizer.space(H)){H=H.substring(Y.raw.length),Y.raw.length===1&&j.length>0?j[j.length-1].raw+=`
`:j.push(Y);continue}if(Y=this.tokenizer.code(H)){H=H.substring(Y.raw.length),ie=j[j.length-1],ie&&(ie.type==="paragraph"||ie.type==="text")?(ie.raw+=`
`+Y.raw,ie.text+=`
`+Y.text,this.inlineQueue[this.inlineQueue.length-1].src=ie.text):j.push(Y);continue}if(Y=this.tokenizer.fences(H)){H=H.substring(Y.raw.length),j.push(Y);continue}if(Y=this.tokenizer.heading(H)){H=H.substring(Y.raw.length),j.push(Y);continue}if(Y=this.tokenizer.hr(H)){H=H.substring(Y.raw.length),j.push(Y);continue}if(Y=this.tokenizer.blockquote(H)){H=H.substring(Y.raw.length),j.push(Y);continue}if(Y=this.tokenizer.list(H)){H=H.substring(Y.raw.length),j.push(Y);continue}if(Y=this.tokenizer.html(H)){H=H.substring(Y.raw.length),j.push(Y);continue}if(Y=this.tokenizer.def(H)){H=H.substring(Y.raw.length),ie=j[j.length-1],ie&&(ie.type==="paragraph"||ie.type==="text")?(ie.raw+=`
`+Y.raw,ie.text+=`
`+Y.raw,this.inlineQueue[this.inlineQueue.length-1].src=ie.text):this.tokens.links[Y.tag]||(this.tokens.links[Y.tag]={href:Y.href,title:Y.title});continue}if(Y=this.tokenizer.table(H)){H=H.substring(Y.raw.length),j.push(Y);continue}if(Y=this.tokenizer.lheading(H)){H=H.substring(Y.raw.length),j.push(Y);continue}if(ue=H,this.options.extensions&&this.options.extensions.startBlock){let be=1/0;const Ue=H.slice(1);let Xe;this.options.extensions.startBlock.forEach(Pt=>{Xe=Pt.call({lexer:this},Ue),typeof Xe=="number"&&Xe>=0&&(be=Math.min(be,Xe))}),be<1/0&&be>=0&&(ue=H.substring(0,be+1))}if(this.state.top&&(Y=this.tokenizer.paragraph(ue))){ie=j[j.length-1],K&&(ie==null?void 0:ie.type)==="paragraph"?(ie.raw+=`
`+Y.raw,ie.text+=`
`+Y.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ie.text):j.push(Y),K=ue.length!==H.length,H=H.substring(Y.raw.length);continue}if(Y=this.tokenizer.text(H)){H=H.substring(Y.raw.length),ie=j[j.length-1],ie&&ie.type==="text"?(ie.raw+=`
`+Y.raw,ie.text+=`
`+Y.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ie.text):j.push(Y);continue}if(H){const be="Infinite loop on byte: "+H.charCodeAt(0);if(this.options.silent){console.error(be);break}else throw new Error(be)}}return this.state.top=!0,j}inline(H,j=[]){return this.inlineQueue.push({src:H,tokens:j}),j}inlineTokens(H,j=[]){let K,Y,ie,ue=H,be,Ue,Xe;if(this.tokens.links){const Pt=Object.keys(this.tokens.links);if(Pt.length>0)for(;(be=this.tokenizer.rules.inline.reflinkSearch.exec(ue))!=null;)Pt.includes(be[0].slice(be[0].lastIndexOf("[")+1,-1))&&(ue=ue.slice(0,be.index)+"["+"a".repeat(be[0].length-2)+"]"+ue.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(be=this.tokenizer.rules.inline.blockSkip.exec(ue))!=null;)ue=ue.slice(0,be.index)+"["+"a".repeat(be[0].length-2)+"]"+ue.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(be=this.tokenizer.rules.inline.anyPunctuation.exec(ue))!=null;)ue=ue.slice(0,be.index)+"++"+ue.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;H;)if(Ue||(Xe=""),Ue=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(Pt=>(K=Pt.call({lexer:this},H,j))?(H=H.substring(K.raw.length),j.push(K),!0):!1))){if(K=this.tokenizer.escape(H)){H=H.substring(K.raw.length),j.push(K);continue}if(K=this.tokenizer.tag(H)){H=H.substring(K.raw.length),Y=j[j.length-1],Y&&K.type==="text"&&Y.type==="text"?(Y.raw+=K.raw,Y.text+=K.text):j.push(K);continue}if(K=this.tokenizer.link(H)){H=H.substring(K.raw.length),j.push(K);continue}if(K=this.tokenizer.reflink(H,this.tokens.links)){H=H.substring(K.raw.length),Y=j[j.length-1],Y&&K.type==="text"&&Y.type==="text"?(Y.raw+=K.raw,Y.text+=K.text):j.push(K);continue}if(K=this.tokenizer.emStrong(H,ue,Xe)){H=H.substring(K.raw.length),j.push(K);continue}if(K=this.tokenizer.codespan(H)){H=H.substring(K.raw.length),j.push(K);continue}if(K=this.tokenizer.br(H)){H=H.substring(K.raw.length),j.push(K);continue}if(K=this.tokenizer.del(H)){H=H.substring(K.raw.length),j.push(K);continue}if(K=this.tokenizer.autolink(H)){H=H.substring(K.raw.length),j.push(K);continue}if(!this.state.inLink&&(K=this.tokenizer.url(H))){H=H.substring(K.raw.length),j.push(K);continue}if(ie=H,this.options.extensions&&this.options.extensions.startInline){let Pt=1/0;const hi=H.slice(1);let wi;this.options.extensions.startInline.forEach(gn=>{wi=gn.call({lexer:this},hi),typeof wi=="number"&&wi>=0&&(Pt=Math.min(Pt,wi))}),Pt<1/0&&Pt>=0&&(ie=H.substring(0,Pt+1))}if(K=this.tokenizer.inlineText(ie)){H=H.substring(K.raw.length),K.raw.slice(-1)!=="_"&&(Xe=K.raw.slice(-1)),Ue=!0,Y=j[j.length-1],Y&&Y.type==="text"?(Y.raw+=K.raw,Y.text+=K.text):j.push(K);continue}if(H){const Pt="Infinite loop on byte: "+H.charCodeAt(0);if(this.options.silent){console.error(Pt);break}else throw new Error(Pt)}}return j}}class yd{constructor(H){Nn(this,"options");Nn(this,"parser");this.options=H||e.defaults}space(H){return""}code({text:H,lang:j,escaped:K}){var ue;const Y=(ue=(j||"").match(/^\S*/))==null?void 0:ue[0],ie=H.replace(/\n$/,"")+`
`;return Y?'<pre><code class="language-'+d(Y)+'">'+(K?ie:d(ie,!0))+`</code></pre>
`:"<pre><code>"+(K?ie:d(ie,!0))+`</code></pre>
`}blockquote({tokens:H}){return`<blockquote>
${this.parser.parse(H)}</blockquote>
`}html({text:H}){return H}heading({tokens:H,depth:j}){return`<h${j}>${this.parser.parseInline(H)}</h${j}>
`}hr(H){return`<hr>
`}list(H){const j=H.ordered,K=H.start;let Y="";for(let be=0;be<H.items.length;be++){const Ue=H.items[be];Y+=this.listitem(Ue)}const ie=j?"ol":"ul",ue=j&&K!==1?' start="'+K+'"':"";return"<"+ie+ue+`>
`+Y+"</"+ie+`>
`}listitem(H){let j="";if(H.task){const K=this.checkbox({checked:!!H.checked});H.loose?H.tokens.length>0&&H.tokens[0].type==="paragraph"?(H.tokens[0].text=K+" "+H.tokens[0].text,H.tokens[0].tokens&&H.tokens[0].tokens.length>0&&H.tokens[0].tokens[0].type==="text"&&(H.tokens[0].tokens[0].text=K+" "+H.tokens[0].tokens[0].text)):H.tokens.unshift({type:"text",raw:K+" ",text:K+" "}):j+=K+" "}return j+=this.parser.parse(H.tokens,!!H.loose),`<li>${j}</li>
`}checkbox({checked:H}){return"<input "+(H?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:H}){return`<p>${this.parser.parseInline(H)}</p>
`}table(H){let j="",K="";for(let ie=0;ie<H.header.length;ie++)K+=this.tablecell(H.header[ie]);j+=this.tablerow({text:K});let Y="";for(let ie=0;ie<H.rows.length;ie++){const ue=H.rows[ie];K="";for(let be=0;be<ue.length;be++)K+=this.tablecell(ue[be]);Y+=this.tablerow({text:K})}return Y&&(Y=`<tbody>${Y}</tbody>`),`<table>
<thead>
`+j+`</thead>
`+Y+`</table>
`}tablerow({text:H}){return`<tr>
${H}</tr>
`}tablecell(H){const j=this.parser.parseInline(H.tokens),K=H.header?"th":"td";return(H.align?`<${K} align="${H.align}">`:`<${K}>`)+j+`</${K}>
`}strong({tokens:H}){return`<strong>${this.parser.parseInline(H)}</strong>`}em({tokens:H}){return`<em>${this.parser.parseInline(H)}</em>`}codespan({text:H}){return`<code>${H}</code>`}br(H){return"<br>"}del({tokens:H}){return`<del>${this.parser.parseInline(H)}</del>`}link({href:H,title:j,tokens:K}){const Y=this.parser.parseInline(K),ie=f(H);if(ie===null)return Y;H=ie;let ue='<a href="'+H+'"';return j&&(ue+=' title="'+j+'"'),ue+=">"+Y+"</a>",ue}image({href:H,title:j,text:K}){const Y=f(H);if(Y===null)return K;H=Y;let ie=`<img src="${H}" alt="${K}"`;return j&&(ie+=` title="${j}"`),ie+=">",ie}text(H){return"tokens"in H&&H.tokens?this.parser.parseInline(H.tokens):H.text}}class Gu{strong({text:H}){return H}em({text:H}){return H}codespan({text:H}){return H}del({text:H}){return H}html({text:H}){return H}text({text:H}){return H}link({text:H}){return""+H}image({text:H}){return""+H}br(){return""}}class fs{constructor(H){Nn(this,"options");Nn(this,"renderer");Nn(this,"textRenderer");this.options=H||e.defaults,this.options.renderer=this.options.renderer||new yd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Gu}static parse(H,j){return new fs(j).parse(H)}static parseInline(H,j){return new fs(j).parseInline(H)}parse(H,j=!0){let K="";for(let Y=0;Y<H.length;Y++){const ie=H[Y];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ie.type]){const be=ie,Ue=this.options.extensions.renderers[be.type].call({parser:this},be);if(Ue!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(be.type)){K+=Ue||"";continue}}const ue=ie;switch(ue.type){case"space":{K+=this.renderer.space(ue);continue}case"hr":{K+=this.renderer.hr(ue);continue}case"heading":{K+=this.renderer.heading(ue);continue}case"code":{K+=this.renderer.code(ue);continue}case"table":{K+=this.renderer.table(ue);continue}case"blockquote":{K+=this.renderer.blockquote(ue);continue}case"list":{K+=this.renderer.list(ue);continue}case"html":{K+=this.renderer.html(ue);continue}case"paragraph":{K+=this.renderer.paragraph(ue);continue}case"text":{let be=ue,Ue=this.renderer.text(be);for(;Y+1<H.length&&H[Y+1].type==="text";)be=H[++Y],Ue+=`
`+this.renderer.text(be);j?K+=this.renderer.paragraph({type:"paragraph",raw:Ue,text:Ue,tokens:[{type:"text",raw:Ue,text:Ue}]}):K+=Ue;continue}default:{const be='Token with "'+ue.type+'" type was not found.';if(this.options.silent)return console.error(be),"";throw new Error(be)}}}return K}parseInline(H,j){j=j||this.renderer;let K="";for(let Y=0;Y<H.length;Y++){const ie=H[Y];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ie.type]){const be=this.options.extensions.renderers[ie.type].call({parser:this},ie);if(be!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(ie.type)){K+=be||"";continue}}const ue=ie;switch(ue.type){case"escape":{K+=j.text(ue);break}case"html":{K+=j.html(ue);break}case"link":{K+=j.link(ue);break}case"image":{K+=j.image(ue);break}case"strong":{K+=j.strong(ue);break}case"em":{K+=j.em(ue);break}case"codespan":{K+=j.codespan(ue);break}case"br":{K+=j.br(ue);break}case"del":{K+=j.del(ue);break}case"text":{K+=j.text(ue);break}default:{const be='Token with "'+ue.type+'" type was not found.';if(this.options.silent)return console.error(be),"";throw new Error(be)}}}return K}}class Va{constructor(H){Nn(this,"options");this.options=H||e.defaults}preprocess(H){return H}postprocess(H){return H}processAllTokens(H){return H}}Nn(Va,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class h0{constructor(...H){Nn(this,"defaults",t());Nn(this,"options",this.setOptions);Nn(this,"parse",this.parseMarkdown(Jr.lex,fs.parse));Nn(this,"parseInline",this.parseMarkdown(Jr.lexInline,fs.parseInline));Nn(this,"Parser",fs);Nn(this,"Renderer",yd);Nn(this,"TextRenderer",Gu);Nn(this,"Lexer",Jr);Nn(this,"Tokenizer",C);Nn(this,"Hooks",Va);this.use(...H)}walkTokens(H,j){var Y,ie;let K=[];for(const ue of H)switch(K=K.concat(j.call(this,ue)),ue.type){case"table":{const be=ue;for(const Ue of be.header)K=K.concat(this.walkTokens(Ue.tokens,j));for(const Ue of be.rows)for(const Xe of Ue)K=K.concat(this.walkTokens(Xe.tokens,j));break}case"list":{const be=ue;K=K.concat(this.walkTokens(be.items,j));break}default:{const be=ue;(ie=(Y=this.defaults.extensions)==null?void 0:Y.childTokens)!=null&&ie[be.type]?this.defaults.extensions.childTokens[be.type].forEach(Ue=>{const Xe=be[Ue].flat(1/0);K=K.concat(this.walkTokens(Xe,j))}):be.tokens&&(K=K.concat(this.walkTokens(be.tokens,j)))}}return K}use(...H){const j=this.defaults.extensions||{renderers:{},childTokens:{}};return H.forEach(K=>{const Y={...K};if(Y.async=this.defaults.async||Y.async||!1,K.extensions&&(K.extensions.forEach(ie=>{if(!ie.name)throw new Error("extension name required");if("renderer"in ie){const ue=j.renderers[ie.name];ue?j.renderers[ie.name]=function(...be){let Ue=ie.renderer.apply(this,be);return Ue===!1&&(Ue=ue.apply(this,be)),Ue}:j.renderers[ie.name]=ie.renderer}if("tokenizer"in ie){if(!ie.level||ie.level!=="block"&&ie.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const ue=j[ie.level];ue?ue.unshift(ie.tokenizer):j[ie.level]=[ie.tokenizer],ie.start&&(ie.level==="block"?j.startBlock?j.startBlock.push(ie.start):j.startBlock=[ie.start]:ie.level==="inline"&&(j.startInline?j.startInline.push(ie.start):j.startInline=[ie.start]))}"childTokens"in ie&&ie.childTokens&&(j.childTokens[ie.name]=ie.childTokens)}),Y.extensions=j),K.renderer){const ie=this.defaults.renderer||new yd(this.defaults);for(const ue in K.renderer){if(!(ue in ie))throw new Error(`renderer '${ue}' does not exist`);if(["options","parser"].includes(ue))continue;const be=ue,Ue=K.renderer[be],Xe=ie[be];ie[be]=(...Pt)=>{let hi=Ue.apply(ie,Pt);return hi===!1&&(hi=Xe.apply(ie,Pt)),hi||""}}Y.renderer=ie}if(K.tokenizer){const ie=this.defaults.tokenizer||new C(this.defaults);for(const ue in K.tokenizer){if(!(ue in ie))throw new Error(`tokenizer '${ue}' does not exist`);if(["options","rules","lexer"].includes(ue))continue;const be=ue,Ue=K.tokenizer[be],Xe=ie[be];ie[be]=(...Pt)=>{let hi=Ue.apply(ie,Pt);return hi===!1&&(hi=Xe.apply(ie,Pt)),hi}}Y.tokenizer=ie}if(K.hooks){const ie=this.defaults.hooks||new Va;for(const ue in K.hooks){if(!(ue in ie))throw new Error(`hook '${ue}' does not exist`);if(ue==="options")continue;const be=ue,Ue=K.hooks[be],Xe=ie[be];Va.passThroughHooks.has(ue)?ie[be]=Pt=>{if(this.defaults.async)return Promise.resolve(Ue.call(ie,Pt)).then(wi=>Xe.call(ie,wi));const hi=Ue.call(ie,Pt);return Xe.call(ie,hi)}:ie[be]=(...Pt)=>{let hi=Ue.apply(ie,Pt);return hi===!1&&(hi=Xe.apply(ie,Pt)),hi}}Y.hooks=ie}if(K.walkTokens){const ie=this.defaults.walkTokens,ue=K.walkTokens;Y.walkTokens=function(be){let Ue=[];return Ue.push(ue.call(this,be)),ie&&(Ue=Ue.concat(ie.call(this,be))),Ue}}this.defaults={...this.defaults,...Y}}),this}setOptions(H){return this.defaults={...this.defaults,...H},this}lexer(H,j){return Jr.lex(H,j??this.defaults)}parser(H,j){return fs.parse(H,j??this.defaults)}parseMarkdown(H,j){return(Y,ie)=>{const ue={...ie},be={...this.defaults,...ue},Ue=this.onError(!!be.silent,!!be.async);if(this.defaults.async===!0&&ue.async===!1)return Ue(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof Y>"u"||Y===null)return Ue(new Error("marked(): input parameter is undefined or null"));if(typeof Y!="string")return Ue(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Y)+", string expected"));if(be.hooks&&(be.hooks.options=be),be.async)return Promise.resolve(be.hooks?be.hooks.preprocess(Y):Y).then(Xe=>H(Xe,be)).then(Xe=>be.hooks?be.hooks.processAllTokens(Xe):Xe).then(Xe=>be.walkTokens?Promise.all(this.walkTokens(Xe,be.walkTokens)).then(()=>Xe):Xe).then(Xe=>j(Xe,be)).then(Xe=>be.hooks?be.hooks.postprocess(Xe):Xe).catch(Ue);try{be.hooks&&(Y=be.hooks.preprocess(Y));let Xe=H(Y,be);be.hooks&&(Xe=be.hooks.processAllTokens(Xe)),be.walkTokens&&this.walkTokens(Xe,be.walkTokens);let Pt=j(Xe,be);return be.hooks&&(Pt=be.hooks.postprocess(Pt)),Pt}catch(Xe){return Ue(Xe)}}}onError(H,j){return K=>{if(K.message+=`
Please report this to https://github.com/markedjs/marked.`,H){const Y="<p>An error occurred:</p><pre>"+d(K.message+"",!0)+"</pre>";return j?Promise.resolve(Y):Y}if(j)return Promise.reject(K);throw K}}}const dc=new h0;function Ui(Ht,H){return dc.parse(Ht,H)}Ui.options=Ui.setOptions=function(Ht){return dc.setOptions(Ht),Ui.defaults=dc.defaults,i(Ui.defaults),Ui},Ui.getDefaults=t,Ui.defaults=e.defaults,Ui.use=function(...Ht){return dc.use(...Ht),Ui.defaults=dc.defaults,i(Ui.defaults),Ui},Ui.walkTokens=function(Ht,H){return dc.walkTokens(Ht,H)},Ui.parseInline=dc.parseInline,Ui.Parser=fs,Ui.parser=fs.parse,Ui.Renderer=yd,Ui.TextRenderer=Gu,Ui.Lexer=Jr,Ui.lexer=Jr.lex,Ui.Tokenizer=C,Ui.Hooks=Va,Ui.parse=Ui;const kp=Ui.options,l5=Ui.setOptions,c5=Ui.use,xs=Ui.walkTokens,Ff=Ui.parseInline,d5=Ui,cE=fs.parse,X1=Jr.lex;e.Hooks=Va,e.Lexer=Jr,e.Marked=h0,e.Parser=fs,e.Renderer=yd,e.TextRenderer=Gu,e.Tokenizer=C,e.getDefaults=t,e.lexer=X1,e.marked=Ui,e.options=kp,e.parse=d5,e.parseInline=Ff,e.parser=cE,e.setOptions=l5,e.use=c5,e.walkTokens=xs})})();Ys.Hooks||exports.Hooks;Ys.Lexer||exports.Lexer;Ys.Marked||exports.Marked;Ys.Parser||exports.Parser;var nge=Ys.Renderer||exports.Renderer;Ys.TextRenderer||exports.TextRenderer;Ys.Tokenizer||exports.Tokenizer;var L5e=Ys.defaults||exports.defaults;Ys.getDefaults||exports.getDefaults;var X4=Ys.lexer||exports.lexer;Ys.marked||exports.marked;Ys.options||exports.options;var sge=Ys.parse||exports.parse;Ys.parseInline||exports.parseInline;var k5e=Ys.parser||exports.parser;Ys.setOptions||exports.setOptions;Ys.use||exports.use;Ys.walkTokens||exports.walkTokens;function N5e(n){return JSON.stringify(n,I5e)}function $W(n){let e=JSON.parse(n);return e=KW(e),e}function I5e(n,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function KW(n,e=0){if(!n||e>200)return n;if(typeof n=="object"){switch(n.$mid){case 1:return Be.revive(n);case 2:return new RegExp(n.source,n.flags);case 17:return new Date(n.source)}if(n instanceof P4||n instanceof Uint8Array)return n;if(Array.isArray(n))for(let t=0;t<n.length;++t)n[t]=KW(n[t],e+1);else for(const t in n)Object.hasOwnProperty.call(n,t)&&(n[t]=KW(n[t],e+1))}return n}const K3=Object.freeze({image:({href:n,title:e,text:t})=>{let i=[],s=[];return n&&({href:n,dimensions:i}=x5e(n),s.push(`src="${eD(n)}"`)),t&&s.push(`alt="${eD(t)}"`),e&&s.push(`title="${eD(e)}"`),i.length&&(s=s.concat(i)),"<img "+s.join(" ")+">"},paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>`},link({href:n,title:e,tokens:t}){let i=this.parser.parseInline(t);return typeof n!="string"?"":(n===i&&(i=$3(i)),e=typeof e=="string"?eD($3(e)):"",n=$3(n),n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${n}" title="${e||n}" draggable="false">${i}</a>`)}});function Q4(n,e={},t={}){const i=new ne;let s=!1;const o=rq(e),r=function(p){let b;try{b=$W(decodeURIComponent(p))}catch{}return b?(b=pue(b,v=>{if(n.uris&&n.uris[v])return Be.revive(n.uris[v])}),encodeURIComponent(JSON.stringify(b))):p},a=function(p,b){const v=n.uris&&n.uris[p];let w=Be.revive(v);return b?p.startsWith(tt.data+":")?p:(w||(w=Be.parse(p)),b4.uriToBrowserUri(w).toString(!0)):!w||Be.parse(p).toString()===w.toString()?p:(w.query&&(w=w.with({query:r(w.query)})),w.toString())},l=new nge;l.image=K3.image,l.link=K3.link,l.paragraph=K3.paragraph;const c=[],d=[];if(e.codeBlockRendererSync?l.code=({text:p,lang:b})=>{const v=UW.nextId(),w=e.codeBlockRendererSync(wee(b),p);return d.push([v,w]),`<div class="code" data-code="${v}">${Rx(p)}</div>`}:e.codeBlockRenderer&&(l.code=({text:p,lang:b})=>{const v=UW.nextId(),w=e.codeBlockRenderer(wee(b),p);return c.push(w.then(y=>[v,y])),`<div class="code" data-code="${v}">${Rx(p)}</div>`}),e.actionHandler){const p=function(w){let y=w.target;if(!(y.tagName!=="A"&&(y=y.parentElement,!y||y.tagName!=="A")))try{let C=y.dataset.href;C&&(n.baseUri&&(C=q3(Be.from(n.baseUri),C)),e.actionHandler.callback(C,w))}catch(C){et(C)}finally{w.preventDefault()}},b=e.actionHandler.disposables.add(new It(o,"click")),v=e.actionHandler.disposables.add(new It(o,"auxclick"));e.actionHandler.disposables.add(pe.any(b.event,v.event)(w=>{const y=new Vl(je(o),w);!y.leftButton&&!y.middleButton||p(y)})),e.actionHandler.disposables.add(Q(o,"keydown",w=>{const y=new _i(w);!y.equals(10)&&!y.equals(3)||p(y)}))}n.supportHtml||(l.html=({text:p})=>{var v;return(v=e.sanitizerOptions)!=null&&v.replaceWithPlaintext?Rx(p):(n.isTrusted?p.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?p:""}),t.renderer=l;let u=n.value??"";u.length>1e5&&(u=`${u.substr(0,1e5)}…`),n.supportThemeIcons&&(u=h5e(u));let h;if(e.fillInIncompleteTokens){const p={...L5e,...t},b=X4(u,p),v=V5e(b);h=k5e(v,p)}else h=sge(u,{...t,async:!1});n.supportThemeIcons&&(h=lm(h).map(b=>typeof b=="string"?b:b.outerHTML).join(""));const m=new DOMParser().parseFromString(qW({isTrusted:n.isTrusted,...e.sanitizerOptions},h),"text/html");if(m.body.querySelectorAll("img, audio, video, source").forEach(p=>{const b=p.getAttribute("src");if(b){let v=b;try{n.baseUri&&(v=q3(Be.from(n.baseUri),v))}catch{}if(p.setAttribute("src",a(v,!0)),e.remoteImageIsAllowed){const w=Be.parse(v);w.scheme!==tt.file&&w.scheme!==tt.data&&!e.remoteImageIsAllowed(w)&&p.replaceWith(ge("",void 0,p.outerHTML))}}}),m.body.querySelectorAll("a").forEach(p=>{const b=p.getAttribute("href");if(p.setAttribute("href",""),!b||/^data:|javascript:/i.test(b)||/^command:/i.test(b)&&!n.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(b))p.replaceWith(...p.childNodes);else{let v=a(b,!1);n.baseUri&&(v=q3(Be.from(n.baseUri),b)),p.dataset.href=v}}),o.innerHTML=qW({isTrusted:n.isTrusted,...e.sanitizerOptions},m.body.innerHTML),c.length>0)Promise.all(c).then(p=>{var w;if(s)return;const b=new Map(p),v=o.querySelectorAll("div[data-code]");for(const y of v){const C=b.get(y.dataset.code??"");C&&ys(y,C)}(w=e.asyncRenderCallback)==null||w.call(e)});else if(d.length>0){const p=new Map(d),b=o.querySelectorAll("div[data-code]");for(const v of b){const w=p.get(v.dataset.code??"");w&&ys(v,w)}}if(e.asyncRenderCallback)for(const p of o.getElementsByTagName("img")){const b=i.add(Q(p,"load",()=>{b.dispose(),e.asyncRenderCallback()}))}return{element:o,dispose:()=>{s=!0,i.dispose()}}}function wee(n){if(!n)return"";const e=n.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:n}function q3(n,e){return/^\w[\w\d+.-]*:/.test(e)?e:n.path.endsWith("/")?_ee(n,e).toString():_ee(Y4(n),e).toString()}const E5e=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function qW(n,e){const{config:t,allowedSchemes:i}=T5e(n),s=new ne;s.add(yee("uponSanitizeAttribute",(o,r)=>{var a;if(r.attrName==="style"||r.attrName==="class"){if(o.tagName==="SPAN"){if(r.attrName==="style"){r.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(r.attrValue);return}else if(r.attrName==="class"){r.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(r.attrValue);return}}r.keepAttr=!1;return}else if(o.tagName==="INPUT"&&((a=o.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"){if(r.attrName==="type"&&r.attrValue==="checkbox"||r.attrName==="disabled"||r.attrName==="checked"){r.keepAttr=!0;return}r.keepAttr=!1}})),s.add(yee("uponSanitizeElement",(o,r)=>{var a;if(r.tagName==="input"&&(((a=o.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"?o.setAttribute("disabled",""):n.replaceWithPlaintext||o.remove()),n.replaceWithPlaintext&&!r.allowedTags[r.tagName]&&r.tagName!=="body"&&o.parentElement){let l,c;if(r.tagName==="#comment")l=`<!--${o.textContent}-->`;else{const f=E5e.includes(r.tagName),m=o.attributes.length?" "+Array.from(o.attributes).map(p=>`${p.name}="${p.value}"`).join(" "):"";l=`<${r.tagName}${m}>`,f||(c=`</${r.tagName}>`)}const d=document.createDocumentFragment(),u=o.parentElement.ownerDocument.createTextNode(l);d.appendChild(u);const h=c?o.parentElement.ownerDocument.createTextNode(c):void 0;for(;o.firstChild;)d.appendChild(o.firstChild);h&&d.appendChild(h),o.nodeType===Node.COMMENT_NODE?o.parentElement.insertBefore(d,o):o.parentElement.replaceChild(d,o)}})),s.add(lMe(i));try{return dhe(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{s.dispose()}}const D5e=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function T5e(n){const e=[tt.http,tt.https,tt.mailto,tt.data,tt.file,tt.vscodeFileResource,tt.vscodeRemote,tt.vscodeRemoteResource];return n.isTrusted&&e.push(tt.command),{config:{ALLOWED_TAGS:n.allowedTags??[...cMe],ALLOWED_ATTR:D5e,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function R5e(n){return typeof n=="string"?n:M5e(n)}function M5e(n,e){let t=n.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}…`);const i=sge(t,{async:!1,renderer:O5e.value}).replace(/&(#\d+|[a-zA-Z]+);/g,s=>P5e.get(s)??s);return qW({isTrusted:!1},i).toString()}const P5e=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function A5e(){const n=new nge;return n.code=({text:e})=>e,n.blockquote=({text:e})=>e+`
`,n.html=e=>"",n.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},n.hr=()=>"",n.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},n.listitem=({text:e})=>e+`
`,n.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},n.table=function({header:e,rows:t}){return e.map(i=>this.tablecell(i)).join(" ")+`
`+t.map(i=>i.map(s=>this.tablecell(s)).join(" ")).join(`
`)+`
`},n.tablerow=({text:e})=>e,n.tablecell=function({tokens:e}){return this.parser.parseInline(e)},n.strong=({text:e})=>e,n.em=({text:e})=>e,n.codespan=({text:e})=>e,n.br=e=>`
`,n.del=({text:e})=>e,n.image=e=>"",n.text=({text:e})=>e,n.link=({text:e})=>e,n}const O5e=new ad(n=>A5e());function M2(n){let e="";return n.forEach(t=>{e+=t.raw}),e}function oge(n){var e,t;if(n.tokens)for(let i=n.tokens.length-1;i>=0;i--){const s=n.tokens[i];if(s.type==="text"){const o=s.raw.split(`
`),r=o[o.length-1];if(r.includes("`"))return z5e(n);if(r.includes("**"))return Z5e(n);if(r.match(/\*\w/))return U5e(n);if(r.match(/(^|\s)__\w/))return Y5e(n);if(r.match(/(^|\s)_\w/))return $5e(n);if(F5e(r)||B5e(r)&&n.tokens.slice(0,i).some(a=>a.type==="text"&&a.raw.match(/\[[^\]]*$/))){const a=n.tokens.slice(i+1);return((e=a[0])==null?void 0:e.type)==="link"&&((t=a[1])==null?void 0:t.type)==="text"&&a[1].raw.match(/^ *"[^"]*$/)||r.match(/^[^"]* +"[^"]*$/)?q5e(n):K5e(n)}else if(r.match(/(^|\s)\[\w*/))return G5e(n)}}}function F5e(n){return!!n.match(/(^|\s)\[.*\]\(\w*/)}function B5e(n){return!!n.match(/^[^\[]*\]\([^\)]*$/)}function W5e(n){var l;const e=n.items[n.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0;let i;if((t==null?void 0:t.type)==="text"&&!("inRawBlock"in e)&&(i=oge(t)),!i||i.type!=="paragraph")return;const s=M2(n.items.slice(0,-1)),o=(l=e.raw.match(/^(\s*(-|\d+\.|\*) +)/))==null?void 0:l[0];if(!o)return;const r=o+M2(e.tokens.slice(0,-1))+i.raw,a=X4(s+r)[0];if(a.type==="list")return a}const H5e=3;function V5e(n){for(let e=0;e<H5e;e++){const t=j5e(n);if(t)n=t;else break}return n}function j5e(n){let e,t;for(e=0;e<n.length;e++){const i=n[e];if(i.type==="paragraph"&&i.raw.match(/(\n|^)\|/)){t=X5e(n.slice(e));break}if(e===n.length-1&&i.type==="list"){const s=W5e(i);if(s){t=[s];break}}if(e===n.length-1&&i.type==="paragraph"){const s=oge(i);if(s){t=[s];break}}}if(t){const i=[...n.slice(0,e),...t];return i.links=n.links,i}return null}function z5e(n){return hp(n,"`")}function U5e(n){return hp(n,"*")}function $5e(n){return hp(n,"_")}function K5e(n){return hp(n,")")}function q5e(n){return hp(n,'")')}function G5e(n){return hp(n,"](https://microsoft.com)")}function Z5e(n){return hp(n,"**")}function Y5e(n){return hp(n,"__")}function hp(n,e){const t=M2(Array.isArray(n)?n:[n]);return X4(t+e)[0]}function X5e(n){const e=M2(n),t=e.split(`
`);let i,s=!1;for(let o=0;o<t.length;o++){const r=t[o].trim();if(typeof i>"u"&&r.match(/^\s*\|/)){const a=r.match(/(\|[^\|]+)(?=\||$)/g);a&&(i=a.length)}else if(typeof i=="number")if(r.match(/^\s*\|/)){if(o!==t.length-1)return;s=!0}else return}if(typeof i=="number"&&i>0){const o=s?t.slice(0,-1).join(`
`):e,r=!!o.match(/\|\s*$/),a=o+(r?"":"|")+`
|${" --- |".repeat(i)}`;return X4(a)}}function yee(n,e){return uhe(n,e),Pe(()=>hhe(n))}const mh=class mh{static createEmpty(e,t){const i=mh.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=i,new mh(s,e,t)}static createFromTextAndMetadata(e,t){let i=0,s="";const o=new Array;for(const{text:r,metadata:a}of e)o.push(i+r.length,a),i+=r.length,s+=r;return new mh(new Uint32Array(o),s,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=i}equals(e){return e instanceof mh?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,o=s+(i<<1);for(let r=s;r<o;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=Jo.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Jo.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Jo.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Jo.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return Jo.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return Jo.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return mh.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new mq(this,e,t,i)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let o=0;o<s;o++)e[o<<1]=e[o+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,s=(e.length>>>1)-1;for(;i<s;){const o=i+Math.floor((s-i)/2),r=e[o<<1];if(r===t)return o+1;r<t?i=o+1:r>t&&(s=o)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,s="";const o=new Array;let r=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(r,a);const c=this._tokens[(t<<1)+1];o.push(s.length,c),t++,r=a}else if(l){if(l.offset>r){s+=this._text.substring(r,l.offset);const c=this._tokens[(t<<1)+1];o.push(s.length,c),r=l.offset}s+=l.text,o.push(s.length,l.tokenMetadata),i++}else break}return new mh(new Uint32Array(o),s,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),i=this.getEndOffset(e);return this._text.substring(t,i)}forEach(e){const t=this.getCount();for(let i=0;i<t;i++)e(i)}};mh.defaultTokenMetadata=(32768|2<<24)>>>0;let us=mh;class mq{constructor(e,t,i,s){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let o=this._firstTokenIndex,r=e.getCount();o<r&&!(e.getStartOffset(o)>=i);o++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof mq?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,i=this._source.getStartOffset(t),s=this._source.getEndOffset(t);let o=this._source.getTokenText(t);return i<this._startOffset&&(o=o.substring(this._startOffset-i)),s>this._endOffset&&(o=o.substring(0,o.length-(s-this._endOffset))),o}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}function Q5e(n,e){const t=e.lineNumber;if(!n.tokenization.isCheapToTokenize(t))return;n.tokenization.forceTokenization(t);const i=n.tokenization.getLineTokens(t),s=i.findTokenIndexAtOffset(e.column-1);return i.getStandardTokenType(s)}const MC=new class{clone(){return this}equals(n){return this===n}};function pq(n,e){return new mK([new Sk(0,"",n)],e)}function J4(n,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(n<<0|0|0|32768|2<<24)>>>0,new p4(t,e===null?MC:e)}const Cee={getInitialState:()=>MC,tokenizeEncoded:(n,e,t)=>J4(0,t)};async function J5e(n,e,t){if(!t)return See(e,n.languageIdCodec,Cee);const i=await nn.getOrCreate(t);return See(e,n.languageIdCodec,i||Cee)}function e3e(n,e,t,i,s,o,r){let a="<div>",l=i,c=0,d=!0;for(let u=0,h=e.getCount();u<h;u++){const f=e.getEndOffset(u);if(f<=i)continue;let m="";for(;l<f&&l<s;l++){const p=n.charCodeAt(l);switch(p){case 9:{let b=o-(l+c)%o;for(c+=b-1;b>0;)r&&d?(m+="&#160;",d=!1):(m+=" ",d=!0),b--;break}case 60:m+="&lt;",d=!1;break;case 62:m+="&gt;",d=!1;break;case 38:m+="&amp;",d=!1;break;case 0:m+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:m+="�",d=!1;break;case 13:m+="&#8203",d=!1;break;case 32:r&&d?(m+="&#160;",d=!1):(m+=" ",d=!0);break;default:m+=String.fromCharCode(p),d=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${m}</span>`,f>s||l>=s)break}return a+="</div>",a}function See(n,e,t){let i='<div class="monaco-tokenized-source">';const s=Bu(n);let o=t.getInitialState();for(let r=0,a=s.length;r<a;r++){const l=s[r];r>0&&(i+="<br/>");const c=t.tokenizeEncoded(l,!0,o);us.convertToEndOffset(c.tokens,l.length);const u=new us(c.tokens,l,e).inflate();let h=0;for(let f=0,m=u.getCount();f<m;f++){const p=u.getClassName(f),b=u.getEndOffset(f);i+=`<span class="${p}">${Rx(l.substring(h,b))}</span>`,h=b}o=c.endState}return i+="</div>",i}var t3e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},xee=function(n,e){return function(t,i){e(t,i,n)}},GW,ib;let wf=(ib=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new $,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const s=new ne,o=s.add(Q4(e,{...this._getRenderOptions(e,s),...t},i));return o.element.classList.add("rendered-markdown"),{element:o.element,dispose:()=>s.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(i,s)=>{var l,c;let o;i?o=this._languageService.getLanguageIdByLanguageName(i):this._options.editor&&(o=(l=this._options.editor.getModel())==null?void 0:l.getLanguageId()),o||(o=Do);const r=await J5e(this._languageService,s,o),a=document.createElement("span");if(a.innerHTML=((c=GW._ttpTokenizer)==null?void 0:c.createHTML(r))??r,this._options.editor){const d=this._options.editor.getOption(50);Cs(a,d)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>_q(this._openerService,i,e.isTrusted),disposables:t}}}},GW=ib,ib._ttpTokenizer=Ef("tokenizeToString",{createHTML(e){return e}}),ib);wf=GW=t3e([xee(1,ji),xee(2,hr)],wf);async function _q(n,e,t){try{return await n.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:i3e(t)})}catch(i){return et(i),!1}}function i3e(n){return n===!0?!0:n&&Array.isArray(n.enabledCommands)?n.enabledCommands:!1}const Yr=kt("accessibilityService"),TI=new we("accessibilityModeEnabled",!1),Lee=2e4;let s_,DT,ZW,TT,YW;function n3e(n){s_=document.createElement("div"),s_.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),s_.appendChild(i),i};DT=e(),ZW=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),s_.appendChild(i),i};TT=t(),YW=t(),n.appendChild(s_)}function Oo(n){s_&&(DT.textContent!==n?(ws(ZW),P2(DT,n)):(ws(DT),P2(ZW,n)))}function Tu(n){s_&&(TT.textContent!==n?(ws(YW),P2(TT,n)):(ws(TT),P2(YW,n)))}function P2(n,e){ws(n),e.length>Lee&&(e=e.substr(0,Lee)),n.textContent=e,n.style.visibility="hidden",n.style.visibility="visible"}var s3e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},CS=function(n,e){return function(t,i){e(t,i,n)}};const Ld=ge;let XW=class extends Ba{get _targetWindow(){return je(this._target.targetElements[0])}get _targetDocumentElement(){return je(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,s,o,r){var h,f,m,p,b,v,w;super(),this._keybindingService=t,this._configurationService=i,this._openerService=s,this._instantiationService=o,this._accessibilityService=r,this._messageListeners=new ne,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new $),this._onRequestLayout=this._register(new $),this._linkHandler=e.linkHandler||(y=>_q(this._openerService,y,td(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new o3e(e.target),this._hoverPointer=(h=e.appearance)!=null&&h.showPointer?Ld("div.workbench-hover-pointer"):void 0,this._hover=this._register(new oq),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(f=e.appearance)!=null&&f.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),(m=e.appearance)!=null&&m.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),(p=e.position)!=null&&p.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=((b=e.position)==null?void 0:b.hoverPosition)??3,this.onmousedown(this._hover.containerDomNode,y=>y.stopPropagation()),this.onkeydown(this._hover.containerDomNode,y=>{y.equals(9)&&this.dispose()}),this._register(Q(this._targetWindow,"blur",()=>this.dispose()));const a=Ld("div.hover-row.markdown-hover"),l=Ld("div.hover-contents");if(typeof e.content=="string")l.textContent=e.content,l.style.whiteSpace="pre-wrap";else if(Qn(e.content))l.appendChild(e.content),l.classList.add("html-hover-contents");else{const y=e.content,C=this._instantiationService.createInstance(wf,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||Eo.fontFamily}),{element:S}=C.render(y,{actionHandler:{callback:x=>this._linkHandler(x),disposables:this._messageListeners},asyncRenderCallback:()=>{l.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});l.appendChild(S)}if(a.appendChild(l),this._hover.contentsDomNode.appendChild(a),e.actions&&e.actions.length>0){const y=Ld("div.hover-row.status-bar"),C=Ld("div.actions");e.actions.forEach(S=>{const x=this._keybindingService.lookupKeybinding(S.commandId),k=x?x.getLabel():null;G4.render(C,{label:S.label,commandId:S.commandId,run:N=>{S.run(N),this.dispose()},iconClass:S.iconClass},k)}),y.appendChild(C),this._hover.containerDomNode.appendChild(y)}this._hoverContainer=Ld("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let c;if(e.actions&&e.actions.length>0?c=!1:((v=e.persistence)==null?void 0:v.hideOnHover)===void 0?c=typeof e.content=="string"||td(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):c=e.persistence.hideOnHover,(w=e.appearance)!=null&&w.showHoverHint){const y=Ld("div.hover-row.status-bar"),C=Ld("div.info");C.textContent=_("hoverhint","Hold {0} key to mouse over",Lt?"Option":"Alt"),y.appendChild(C),this._hover.containerDomNode.appendChild(y)}const d=[...this._target.targetElements];c||d.push(this._hoverContainer);const u=this._register(new kee(d));if(this._register(u.onMouseOut(()=>{this._isLocked||this.dispose()})),c){const y=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new kee(y)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=u}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=DK(this._hoverContainer,Ld("div")),s=ae(this._hoverContainer,Ld("div"));i.tabIndex=0,s.tabIndex=0,this._register(Q(s,"focus",o=>{e.focus(),o.preventDefault()})),this._register(Q(i,"focus",o=>{t.focus(),o.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const o=i;if(typeof o.tabIndex=="number"&&o.tabIndex>=0)return o}const s=this.findLastFocusableChild(i);if(s)return s}}render(e){var s;e.appendChild(this._hoverContainer);const i=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&jfe(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(s=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:s.getAriaLabel());i&&Tu(i),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=d=>{const u=_he(d),h=d.getBoundingClientRect();return{top:h.top*u,bottom:h.bottom*u,right:h.right*u,left:h.left*u}},t=this._target.targetElements.map(d=>e(d)),{top:i,right:s,bottom:o,left:r}=t[0],a=s-r,l=o-i,c={top:i,right:s,bottom:o,left:r,width:a,height:l,center:{x:r+a/2,y:i+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-i}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-i}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const i=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-i):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const i=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==i&&(this._hover.contentsDomNode.style.paddingRight=i)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const s=this._x+i;(s<e.left||s>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};XW=s3e([CS(1,ei),CS(2,_t),CS(3,hr),CS(4,Ae),CS(5,Yr)],XW);class kee extends Ba{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new $),this._elements.forEach(t=>this.onmouseover(t,()=>this._onTargetMouseOver(t))),this._elements.forEach(t=>this.onmouseleave(t,()=>this._onTargetMouseLeave(t)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=je(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(je(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class o3e{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var Ws;(function(n){function e(o,r){if(o.start>=r.end||r.start>=o.end)return{start:0,end:0};const a=Math.max(o.start,r.start),l=Math.min(o.end,r.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}n.intersect=e;function t(o){return o.end-o.start<=0}n.isEmpty=t;function i(o,r){return!t(e(o,r))}n.intersects=i;function s(o,r){const a=[],l={start:o.start,end:Math.min(r.start,o.end)},c={start:Math.max(r.end,o.start),end:o.end};return t(l)||a.push(l),t(c)||a.push(c),a}n.relativeComplement=s})(Ws||(Ws={}));function r3e(n){const e=n;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var jg;(function(n){n[n.AVOID=0]="AVOID",n[n.ALIGN=1]="ALIGN"})(jg||(jg={}));function gw(n,e,t){const i=t.mode===jg.ALIGN?t.offset:t.offset+t.size,s=t.mode===jg.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=n-i?i:e<=s?s-e:Math.max(n-e,0):e<=s?s-e:e<=n-i?i:0}const Ww=class Ww extends G{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=G.None,this.toDisposeOnSetContainer=G.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ge(".context-view"),wo(this.view),this.setContainer(e,t),this._register(Pe(()=>this.setContainer(null,1)))}setContainer(e,t){var s;this.useFixedPosition=t!==1;const i=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&i===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,(s=this.shadowRootHostElement)==null||s.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=ge(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=a3e,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ge("slot"))}else this.container.appendChild(this.view);const o=new ne;Ww.BUBBLE_UP_EVENTS.forEach(r=>{o.add(Ji(this.container,r,a=>{this.onDOMEvent(a,!1)}))}),Ww.BUBBLE_DOWN_EVENTS.forEach(r=>{o.add(Ji(this.container,r,a=>{this.onDOMEvent(a,!0)},!0))}),this.toDisposeOnSetContainer=o}}show(e){var t,i;this.isVisible()&&this.hide(),ws(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",Dr(this.view),this.toDisposeOnClean=e.render(this.view)||G.None,this.delegate=e,this.doLayout(),(i=(t=this.delegate).focus)==null||i.call(t)}getViewElement(){return this.view}layout(){var e,t;if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(rd&&SK.pointerEvents)){this.hide();return}(t=(e=this.delegate)==null?void 0:e.layout)==null||t.call(e),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(Qn(e)){const h=un(e),f=_he(e);t={top:h.top*f,left:h.left*f,width:h.width*f,height:h.height*f}}else r3e(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const i=xr(this.view),s=Ph(this.view),o=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const d=ZS();if(a===0){const h={offset:t.top-d.pageYOffset,size:t.height,position:o===0?0:1},f={offset:t.left,size:t.width,position:r===0?0:1,mode:jg.ALIGN};l=gw(d.innerHeight,s,h)+d.pageYOffset,Ws.intersects({start:l,end:l+s},{start:h.offset,end:h.offset+h.size})&&(f.mode=jg.AVOID),c=gw(d.innerWidth,i,f)}else{const h={offset:t.left,size:t.width,position:r===0?0:1},f={offset:t.top,size:t.height,position:o===0?0:1,mode:jg.ALIGN};c=gw(d.innerWidth,i,h),Ws.intersects({start:c,end:c+i},{start:h.offset,end:h.offset+h.size})&&(f.mode=jg.AVOID),l=gw(d.innerHeight,s,f)+d.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(o===0?"bottom":"top"),this.view.classList.add(r===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const u=un(this.container);this.view.style.top=`${l-(this.useFixedPosition?un(this.view).top:u.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?un(this.view).left:u.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),wo(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,je(e).document.activeElement):t&&!Zn(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};Ww.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],Ww.BUBBLE_DOWN_EVENTS=["click"];let QW=Ww;const a3e=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var l3e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},c3e=function(n,e){return function(t,i){e(t,i,n)}};let A2=class extends G{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new QW(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,i){let s;t?t===this.layoutService.getContainer(je(t))?s=1:i?s=3:s=2:s=1,this.contextView.setContainer(t??this.layoutService.activeContainer,s),this.contextView.show(e);const o={close:()=>{this.openContextView===o&&this.hideContextView()}};return this.openContextView=o,o}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};A2=l3e([c3e(0,up)],A2);class d3e extends A2{getContextViewElement(){return this.contextView.getViewElement()}}class u3e{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||ir(e)||Qn(e))s=e;else if(!wk(e.markdown))s=e.markdown??e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(_("iconLabel.loading","Loading..."),t,i),this._cancellationTokenSource=new Gi;const o=this._cancellationTokenSource.token;if(s=await e.markdown(o),s===void 0&&(s=e.markdownNotSupportedFallback),this.isDisposed||o.isCancellationRequested)return}this.show(s,t,i)}show(e,t,i){var o;const s=this._hoverWidget;if(this.hasContent(e)){const r={content:e,target:this.target,actions:i==null?void 0:i.actions,linkHandler:i==null?void 0:i.linkHandler,trapFocus:i==null?void 0:i.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!s,showHoverHint:(o=i==null?void 0:i.appearance)==null?void 0:o.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(r,t)}s==null||s.dispose()}hasContent(e){return e?td(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)==null?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)==null||e.dispose(),(t=this._cancellationTokenSource)==null||t.dispose(!0),this._cancellationTokenSource=void 0}}var h3e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},SS=function(n,e){return function(t,i){e(t,i,n)}};let JW=class extends G{constructor(e,t,i,s,o){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=s,this._accessibilityService=o,this._managedHovers=new Map,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new A2(this._layoutService))}showHover(e,t,i){var l,c,d,u;if(Nee(this._currentHoverOptions)===Nee(e)||this._currentHover&&((c=(l=this._currentHoverOptions)==null?void 0:l.persistence)!=null&&c.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const s=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),o=Ms();i||(s&&o?o.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=o):this._lastFocusedElementBeforeOpen=void 0);const r=new ne,a=this._instantiationService.createInstance(XW,e);if((d=e.persistence)!=null&&d.sticky&&(a.isLocked=!0),a.onDispose(()=>{var f,m;((f=this._currentHover)==null?void 0:f.domNode)&&vhe(this._currentHover.domNode)&&((m=this._lastFocusedElementBeforeOpen)==null||m.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),r.dispose()},void 0,r),!e.container){const h=Qn(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(je(h))}if(this._contextViewHandler.showContextView(new f3e(a,t),e.container),a.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,r),(u=e.persistence)!=null&&u.sticky)r.add(Q(je(e.container).document,fe.MOUSE_DOWN,h=>{Zn(h.target,a.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const f of e.target.targetElements)r.add(Q(f,fe.CLICK,()=>this.hideHover()));else r.add(Q(e.target,fe.CLICK,()=>this.hideHover()));const h=Ms();if(h){const f=je(h).document;r.add(Q(h,fe.KEY_DOWN,m=>{var p;return this._keyDown(m,a,!!((p=e.persistence)!=null&&p.hideOnKeyDown))})),r.add(Q(f,fe.KEY_DOWN,m=>{var p;return this._keyDown(m,a,!!((p=e.persistence)!=null&&p.hideOnKeyDown))})),r.add(Q(h,fe.KEY_UP,m=>this._keyUp(m,a))),r.add(Q(f,fe.KEY_UP,m=>this._keyUp(m,a)))}}if("IntersectionObserver"in ui){const h=new IntersectionObserver(m=>this._intersectionChange(m,a),{threshold:0}),f="targetElements"in e.target?e.target.targetElements[0]:e.target;h.observe(f),r.add(Pe(()=>h.disconnect()))}return this._currentHover=a,a}hideHover(){var e;(e=this._currentHover)!=null&&e.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){var r,a;if(e.key==="Alt"){t.isLocked=!0;return}const s=new _i(e);this._keybindingService.resolveKeyboardEvent(s).getSingleModifierDispatchChords().some(l=>!!l)||this._keybindingService.softDispatch(s,s.target).kind!==0||i&&(!((r=this._currentHoverOptions)!=null&&r.trapFocus)||e.key!=="Tab")&&(this.hideHover(),(a=this._lastFocusedElementBeforeOpen)==null||a.focus())}_keyUp(e,t){var i;e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),(i=this._lastFocusedElementBeforeOpen)==null||i.focus()))}setupManagedHover(e,t,i,s){t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let o,r;const a=(y,C)=>{var x;const S=r!==void 0;y&&(r==null||r.dispose(),r=void 0),C&&(o==null||o.dispose(),o=void 0),S&&((x=e.onDidHideHover)==null||x.call(e),r=void 0)},l=(y,C,S,x)=>new oc(async()=>{(!r||r.isDisposed)&&(r=new u3e(e,S||t,y>0),await r.update(typeof i=="function"?i():i,C,{...s,trapFocus:x}))},y);let c=!1;const d=Q(t,fe.MOUSE_DOWN,()=>{c=!0,a(!0,!0)},!0),u=Q(t,fe.MOUSE_UP,()=>{c=!1},!0),h=Q(t,fe.MOUSE_LEAVE,y=>{c=!1,a(!1,y.fromElement===t)},!0),f=y=>{if(o)return;const C=new ne,S={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const x=k=>{S.x=k.x+10,Qn(k.target)&&Iee(k.target,t)!==t&&a(!0,!0)};C.add(Q(t,fe.MOUSE_MOVE,x,!0))}o=C,!(Qn(y.target)&&Iee(y.target,t)!==t)&&C.add(l(e.delay,!1,S))},m=Q(t,fe.MOUSE_OVER,f,!0),p=()=>{if(c||o)return;const y={targetElements:[t],dispose:()=>{}},C=new ne,S=()=>a(!0,!0);C.add(Q(t,fe.BLUR,S,!0)),C.add(l(e.delay,!1,y)),o=C};let b;const v=t.tagName.toLowerCase();v!=="input"&&v!=="textarea"&&(b=Q(t,fe.FOCUS,p,!0));const w={show:y=>{a(!1,!0),l(0,y,void 0,y)},hide:()=>{a(!0,!0)},update:async(y,C)=>{i=y,await(r==null?void 0:r.update(i,void 0,C))},dispose:()=>{this._managedHovers.delete(t),m.dispose(),h.dispose(),d.dispose(),u.dispose(),b==null||b.dispose(),a(!0,!0)}};return this._managedHovers.set(t,w),w}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};JW=h3e([SS(0,Ae),SS(1,Zr),SS(2,ei),SS(3,up),SS(4,Yr)],JW);function Nee(n){if(n!==void 0)return(n==null?void 0:n.id)??n}class f3e{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function Iee(n,e){for(e=e??je(n).document.body;!n.hasAttribute("custom-hover")&&n!==e;)n=n.parentElement;return n}Tt(ju,JW,1);yl((n,e)=>{const t=n.getColor(Ife);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const RI=kt("IWorkspaceEditService");class bq{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(cm.is(t))return cm.lift(t);if(py.is(t))return py.lift(t);throw new Error("Unsupported edit")})}}class cm extends bq{static is(e){return e instanceof cm?!0:as(e)&&Be.isUri(e.resource)&&as(e.textEdit)}static lift(e){return e instanceof cm?e:new cm(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,s){super(s),this.resource=e,this.textEdit=t,this.versionId=i}}class py extends bq{static is(e){return e instanceof py?!0:as(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof py?e:new py(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},s){super(s),this.oldResource=e,this.newResource=t,this.options=i}}const Ls={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},MI=Object.freeze({id:"editor",order:5,type:"object",title:_("editorConfigurationTitle","Editor"),scope:5}),O2={...MI,properties:{"editor.tabSize":{type:"number",default:zs.tabSize,minimum:1,markdownDescription:_("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:_("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:zs.insertSpaces,markdownDescription:_("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:zs.detectIndentation,markdownDescription:_("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:zs.trimAutoWhitespace,description:_("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:zs.largeFileOptimizations,description:_("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[_("wordBasedSuggestions.off","Turn off Word Based Suggestions."),_("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),_("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),_("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:_("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[_("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),_("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),_("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:_("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:_("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:_("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:_("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:_("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:_("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:_("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:_("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:_("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:_("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:_("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:_("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:_("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:Ls.maxComputationTime,description:_("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:Ls.maxFileSize,description:_("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:Ls.renderSideBySide,description:_("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:Ls.renderSideBySideInlineBreakpoint,description:_("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:Ls.useInlineViewWhenSpaceIsLimited,description:_("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:Ls.renderMarginRevertIcon,description:_("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:Ls.renderGutterMenu,description:_("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:Ls.ignoreTrimWhitespace,description:_("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:Ls.renderIndicators,description:_("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:Ls.diffCodeLens,description:_("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:Ls.diffWordWrap,markdownEnumDescriptions:[_("wordWrap.off","Lines will never wrap."),_("wordWrap.on","Lines will wrap at the viewport width."),_("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:Ls.diffAlgorithm,markdownEnumDescriptions:[_("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),_("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:Ls.hideUnchangedRegions.enabled,markdownDescription:_("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:Ls.hideUnchangedRegions.revealLineCount,markdownDescription:_("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:Ls.hideUnchangedRegions.minimumLineCount,markdownDescription:_("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:Ls.hideUnchangedRegions.contextLineCount,markdownDescription:_("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:Ls.experimental.showMoves,markdownDescription:_("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:Ls.experimental.showEmptyDecorations,description:_("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:Ls.experimental.useTrueInlineView,description:_("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function g3e(n){return typeof n.type<"u"||typeof n.anyOf<"u"}for(const n of lw){const e=n.schema;if(typeof e<"u")if(g3e(e))O2.properties[`editor.${n.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(O2.properties[t]=e[t])}let tD=null;function rge(){return tD===null&&(tD=Object.create(null),Object.keys(O2.properties).forEach(n=>{tD[n]=!0})),tD}function m3e(n){return rge()[`editor.${n}`]||!1}function p3e(n){return rge()[`diffEditor.${n}`]||!1}const _3e=Zi.as(rc.Configuration);_3e.registerConfiguration(O2);class Ki{static insert(e,t){return{range:new D(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function iD(n){return Object.isFrozen(n)?n:PDe(n)}class vs{static createEmptyModel(e){return new vs({},[],[],void 0,e)}constructor(e,t,i,s,o){this._contents=e,this._keys=t,this._overrides=i,this.raw=s,this.logService=o,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if((e=this.raw)!=null&&e.length){const t=this.raw.map(i=>{if(i instanceof vs)return i;const s=new b3e("",this.logService);return s.parseRaw(i),s.configurationModel});this._rawConfiguration=t.reduce((i,s)=>s===i?s:i.merge(s),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?iJ(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return iD(i.rawConfiguration.getValue(e))},get override(){return t?iD(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return iD(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const s=[];for(const{contents:o,identifiers:r,keys:a}of i.rawConfiguration.overrides){const l=new vs(o,a,[],void 0,i.logService).getValue(e);l!==void 0&&s.push({identifiers:r,value:l})}return s.length?iD(s):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?iJ(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var r,a;const t=vh(this.contents),i=vh(this.overrides),s=[...this.keys],o=(r=this.raw)!=null&&r.length?[...this.raw]:[this];for(const l of e)if(o.push(...(a=l.raw)!=null&&a.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(t,l.contents);for(const c of l.overrides){const[d]=i.filter(u=>Vi(u.identifiers,c.identifiers));d?(this.mergeContents(d.contents,c.contents),d.keys.push(...c.keys),d.keys=ff(d.keys)):i.push(vh(c))}for(const c of l.keys)s.indexOf(c)===-1&&s.push(c)}return new vs(t,s,i,o.every(l=>l instanceof vs)?void 0:o,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const s of ff([...Object.keys(this.contents),...Object.keys(t)])){let o=this.contents[s];const r=t[s];r&&(typeof o=="object"&&typeof r=="object"?(o=vh(o),this.mergeContents(o,r)):o=r),i[s]=o}return new vs(i,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&as(e[i])&&as(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=vh(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null;const s=o=>{o&&(i?this.mergeContents(i,o):i=vh(o))};for(const o of this.overrides)o.identifiers.length===1&&o.identifiers[0]===e?t=o.contents:o.identifiers.includes(e)&&s(o.contents);return s(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),SPe(this.contents,e),Gm.test(e)&&this.overrides.splice(this.overrides.findIndex(i=>Vi(i.identifiers,p2(e))),1))}updateValue(e,t,i){if(jhe(this.contents,e,t,s=>this.logService.error(s)),i=i||this.keys.indexOf(e)===-1,i&&this.keys.push(e),Gm.test(e)){const s=p2(e),o={identifiers:s,keys:Object.keys(this.contents[e]),contents:cW(this.contents[e],a=>this.logService.error(a))},r=this.overrides.findIndex(a=>Vi(a.identifiers,s));r!==-1?this.overrides[r]=o:this.overrides.push(o)}}}class b3e{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||vs.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:i,keys:s,overrides:o,restricted:r,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new vs(i,s,o,a?[e]:void 0,this.logService),this._restrictedConfigurations=r||[]}doParseRaw(e,t){const i=Zi.as(rc.Configuration).getConfigurationProperties(),s=this.filter(e,i,!0,t);e=s.raw;const o=cW(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`)),r=Object.keys(e),a=this.toOverrides(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:o,keys:r,overrides:a,restricted:s.restricted,hasExcludedProperties:s.hasExcludedProperties}}filter(e,t,i,s){var l,c,d;let o=!1;if(!(s!=null&&s.scopes)&&!(s!=null&&s.skipRestricted)&&!((l=s==null?void 0:s.exclude)!=null&&l.length))return{raw:e,restricted:[],hasExcludedProperties:o};const r={},a=[];for(const u in e)if(Gm.test(u)&&i){const h=this.filter(e[u],t,!1,s);r[u]=h.raw,o=o||h.hasExcludedProperties,a.push(...h.restricted)}else{const h=t[u],f=h?typeof h.scope<"u"?h.scope:3:void 0;h!=null&&h.restricted&&a.push(u),!((c=s.exclude)!=null&&c.includes(u))&&((d=s.include)!=null&&d.includes(u)||(f===void 0||s.scopes===void 0||s.scopes.includes(f))&&!(s.skipRestricted&&(h!=null&&h.restricted)))?r[u]=e[u]:o=!0}return{raw:r,restricted:a,hasExcludedProperties:o}}toOverrides(e,t){const i=[];for(const s of Object.keys(e))if(Gm.test(s)){const o={};for(const r in e[s])o[r]=e[s][r];i.push({identifiers:p2(s),keys:Object.keys(o),contents:cW(o,t)})}return i}}class v3e{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=s,this.defaultConfiguration=o,this.policyConfiguration=r,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=d,this.workspaceConfiguration=u,this.folderConfigurationModel=h,this.memoryConfigurationModel=f}toInspectValue(e){return(e==null?void 0:e.value)!==void 0||(e==null?void 0:e.override)!==void 0||(e==null?void 0:e.overrides)!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class eF{constructor(e,t,i,s,o,r,a,l,c,d){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=s,this._remoteUserConfiguration=o,this._workspaceConfiguration=r,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=d,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new cs,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let s;i.resource?(s=this._memoryConfigurationByResource.get(i.resource),s||(s=vs.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(i.resource,s))):s=this._memoryConfiguration,t===void 0?s.removeValue(e):s.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const s=this.getConsolidatedConfigurationModel(e,t,i),o=this.getFolderConfigurationModelForResource(t.resource,i),r=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of s.overrides)for(const c of l.identifiers)s.getOverrideValue(e,c)!==void 0&&a.add(c);return new v3e(e,t,s.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,o||void 0,r)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let s=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(s=s.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(s=s.merge(this._policyConfiguration)),s}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const s=t.getFolder(e);s&&(i=this.getFolderConsolidatedConfiguration(s.uri)||i);const o=this._memoryConfigurationByResource.get(e);o&&(i=i.merge(o))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(e);s?(t=i.merge(s),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:s,keys:o}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:s,keys:o}]),e},[])}}static parse(e,t){const i=this.parseConfigurationModel(e.defaults,t),s=this.parseConfigurationModel(e.policy,t),o=this.parseConfigurationModel(e.application,t),r=this.parseConfigurationModel(e.user,t),a=this.parseConfigurationModel(e.workspace,t),l=e.folders.reduce((c,d)=>(c.set(Be.revive(d[0]),this.parseConfigurationModel(d[1],t)),c),new cs);return new eF(i,s,o,r,vs.createEmptyModel(t),a,l,vs.createEmptyModel(t),new cs,t)}static parseConfigurationModel(e,t){return new vs(e.contents,e.keys,e.overrides,void 0,t)}}class w3e{constructor(e,t,i,s,o){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=s,this.logService=o,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const r of e.keys)this.affectedKeys.add(r);for(const[,r]of e.overrides)for(const a of r)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const r of this.affectedKeys)this._affectsConfigStr+=r+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=eF.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){var a;const i=this._marker+e,s=this._affectsConfigStr.indexOf(i);if(s<0)return!1;const o=s+i.length;if(o>=this._affectsConfigStr.length)return!1;const r=this._affectsConfigStr.charCodeAt(o);if(r!==this._markerCode1&&r!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(a=this.previous)==null?void 0:a.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Ar(l,c)}return!0}}class y3e{constructor(){this._onDidChange=new $,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const Fx=new y3e,F2={kind:0},C3e={kind:1};function S3e(n,e,t){return{kind:2,commandId:n,commandArgs:e,isBubble:t}}class Bx{constructor(e,t,i){var s;this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const o of e){const r=o.command;r&&r.charAt(0)!=="-"&&this._defaultBoundCommands.set(r,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Bx.handleRemovals([].concat(e).concat(t));for(let o=0,r=this._keybindings.length;o<r;o++){const a=this._keybindings[o];if(a.chords.length===0)continue;const l=(s=a.when)==null?void 0:s.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,i){if(t){for(let s=0;s<t.length;s++)if(t[s]!==e.chords[s])return!1}return!(i&&i.type!==1&&(!e.when||!MMe(i,e.when)))}static handleRemovals(e){const t=new Map;for(let s=0,o=e.length;s<o;s++){const r=e[s];if(r.command&&r.command.charAt(0)==="-"){const a=r.command.substring(1);t.has(a)?t.get(a).push(r):t.set(a,[r])}}if(t.size===0)return e;const i=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];if(!r.command||r.command.length===0){i.push(r);continue}if(r.command.charAt(0)==="-")continue;const a=t.get(r.command);if(!a||!r.isDefault){i.push(r);continue}let l=!1;for(const c of a){const d=c.when;if(this._isTargetedForRemoval(r,c.chords,d)){l=!0;break}}if(!l){i.push(r);continue}}return i}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.command===t.command)continue;let r=!0;for(let a=1;a<o.chords.length&&a<t.chords.length;a++)if(o.chords[a]!==t.chords[a]){r=!1;break}r&&Bx.whenIsEntirelyIncluded(o.when,t.when)&&this._removeFromLookupMap(o)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,s=t.length;i<s;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:oW(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(typeof i>"u"||i.length===0)return null;if(i.length===1)return i[0];for(let s=i.length-1;s>=0;s--){const o=i[s];if(t.contextMatchesRules(o.when))return o}return i[i.length-1]}resolve(e,t,i){const s=[...t,i];this._log(`| Resolving ${s}`);const o=this._map.get(s[0]);if(o===void 0)return this._log("\\ No keybinding entries."),F2;let r=null;if(s.length<2)r=o;else{r=[];for(let l=0,c=o.length;l<c;l++){const d=o[l];if(s.length>d.chords.length)continue;let u=!0;for(let h=1;h<s.length;h++)if(d.chords[h]!==s[h]){u=!1;break}u&&r.push(d)}}const a=this._findCommand(e,r);return a?s.length<a.chords.length?(this._log(`\\ From ${r.length} keybinding entries, awaiting ${a.chords.length-s.length} more chord(s), when: ${Eee(a.when)}, source: ${Dee(a)}.`),C3e):(this._log(`\\ From ${r.length} keybinding entries, matched ${a.command}, when: ${Eee(a.when)}, source: ${Dee(a)}.`),S3e(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),F2)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const s=t[i];if(Bx._contextMatchesRules(e,s.when))return s}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function Eee(n){return n?`${n.serialize()}`:"no when condition"}function Dee(n){return n.extensionId?n.isBuiltinExtension?`built-in extension ${n.extensionId}`:`user extension ${n.extensionId}`:n.isDefault?"built-in":"user"}const x3e=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class L3e extends G{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:pe.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,s,o){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=s,this._logService=o,this._onDidUpdateKeybindings=this._register(new $),this._currentChords=[],this._currentChordChecker=new LK,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=mw.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new oc,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),F2;const[s]=i.getDispatchChords();if(s===null)return this._log("\\ Keyboard event cannot be dispatched"),F2;const o=this._contextKeyService.getContext(t),r=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(o,r,s)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw dK("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(_("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const i=this._currentChords.map(({label:s})=>s).join(", ");this._currentChordStatusMessage=this._notificationService.status(_("next.chord","({0}) was pressed. Waiting for next key of chord...",i))}}this._scheduleLeaveChordMode(),Fx.enabled&&Fx.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],Fx.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[s]=i.getSingleModifierDispatchChords();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=mw.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=mw.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[o]=i.getChords();return this._ignoreSingleModifiers=new mw(o),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){let s=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let o=null,r=null;if(i){const[d]=e.getSingleModifierDispatchChords();o=d,r=d?[d]:[]}else[o]=e.getDispatchChords(),r=this._currentChords.map(({keypress:d})=>d);if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,r,o);switch(c.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const d=this._currentChords.map(({label:u})=>u).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${d}, ${l}".`),this._notificationService.status(_("missing.chord","The key combination ({0}, {1}) is not a command.",d,l),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}return s}case 1:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),s=!0,this._expectAnotherChord(o,l),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),s;case 2:{if(this._logService.trace("KeybindingService#dispatch",l,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const d=this._currentChords.map(({label:u})=>u).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${d}, ${l}".`),this._notificationService.status(_("missing.chord","The key combination ({0}, {1}) is not a command.",d,l),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(s=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,d=>this._notificationService.warn(d)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,d=>this._notificationService.warn(d))}finally{this._currentlyDispatchingCommandId=null}x3e.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return s}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}const dA=class dA{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};dA.EMPTY=new dA(null);let mw=dA;class Tee{constructor(e,t,i,s,o,r,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?e6(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=e6(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=s,this.isDefault=o,this.extensionId=r,this.isBuiltinExtension=a}}function e6(n){const e=[];for(let t=0,i=n.length;t<i;t++){const s=n[t];if(!s)return[];e.push(s)}return e}class tF{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=i(a);if(l===null)return null;s[o]=E3e(a,l,this.modifierLabels[e])}return s.join(" ")}}const vq=new tF({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:_({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:_({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:_({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:_({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),k3e=new tF({ctrlKey:_({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:_({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:_({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:_({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:_({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:_({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:_({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),N3e=new tF({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),I3e=new tF({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function E3e(n,e,t){if(e===null)return"";const i=[];return n.ctrlKey&&i.push(t.ctrlKey),n.shiftKey&&i.push(t.shiftKey),n.altKey&&i.push(t.altKey),n.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class D3e extends e2e{constructor(e,t){if(super(),t.length===0)throw al("chords");this._os=e,this._chords=t}getLabel(){return vq.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return k3e.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:N3e.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return I3e.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new JRe(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class Gk extends D3e{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return kh.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":kh.toString(e.keyCode)}_getElectronAccelerator(e){return kh.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=kh.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return Gk.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=kh.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=gK[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof pf)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new pf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=e6(e.chords.map(s=>this._toKeyCodeChord(s)));return i.length>0?[new Gk(i,t)]:[]}}const PC=kt("labelService"),age=kt("progressService"),JZ=class JZ{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};JZ.None=Object.freeze({report(){}});let jc=JZ;const fp=kt("editorProgressService");class T3e{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class R3e{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?pK(e,this._value,0,e.length,this._from,this._to):yI(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class M3e{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?pK(e,this._value,0,e.length,this._from,this._to):yI(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class P3e{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new M3e(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return z8(e,this._value.scheme);if(this._states[this._stateIdx]===2)return z8(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Nk(e,this._value.query);if(this._states[this._stateIdx]===5)return Nk(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class nD{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e;return((e=this.left)==null?void 0:e.height)??0}get heightRight(){var e;return((e=this.right)==null?void 0:e.height)??0}}class _y{static forUris(e=()=>!1,t=()=>!1){return new _y(new P3e(e,t))}static forStrings(){return new _y(new T3e)}static forConfigKeys(){return new _y(new R3e)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let s;this._root||(this._root=new nD,this._root.segment=i.value());const o=[];for(s=this._root;;){const a=i.cmp(s.segment);if(a>0)s.left||(s.left=new nD,s.left.segment=i.value()),o.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new nD,s.right.segment=i.value()),o.push([1,s]),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new nD,s.mid.segment=i.value()),o.push([0,s]),s=s.mid;else break}const r=s.value;s.value=t,s.key=e;for(let a=o.length-1;a>=0;a--){const l=o[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const d=o[a][0],u=o[a+1][0];if(d===1&&u===1)o[a][1]=l.rotateLeft();else if(d===-1&&u===-1)o[a][1]=l.rotateRight();else if(d===1&&u===-1)l.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=l.rotateLeft();else if(d===-1&&u===1)l.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return r}get(e){var t;return(t=this._getNode(e))==null?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),s=[];let o=this._root;for(;o;){const r=i.cmp(o.segment);if(r>0)s.push([-1,o]),o=o.left;else if(r<0)s.push([1,o]),o=o.right;else if(i.hasNext())i.next(),s.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const r=this._min(o.right);if(r.key){const{key:a,value:l,segment:c}=r;this._delete(r.key,!1),o.key=a,o.value=l,o.segment=c}}else{const r=o.left??o.right;if(s.length>0){const[a,l]=s[s.length-1];switch(a){case-1:l.left=r;break;case 0:l.mid=r;break;case 1:l.right=r;break}}else this._root=r}for(let r=s.length-1;r>=0;r--){const a=s[r][1];a.updateHeight();const l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[r][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[r][1]=a.rotateRight()),r>0)switch(s[r-1][0]){case-1:s[r-1][1].left=s[r][1];break;case 1:s[r-1][1].right=s[r][1];break;case 0:s[r-1][1].mid=s[r][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,s;for(;i;){const o=t.cmp(i.segment);if(o>0)i=i.left;else if(o<0)i=i.right;else if(t.hasNext())t.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let s=this._root;for(;s;){const o=i.cmp(s.segment);if(o>0)s=s.left;else if(o<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else return s.mid?this._entries(s.mid):t?s.value:void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const yv=kt("contextService");function t6(n){const e=n;return typeof(e==null?void 0:e.id)=="string"&&Be.isUri(e.uri)}function A3e(n){const e=n;return typeof(e==null?void 0:e.id)=="string"&&!t6(n)&&!B3e(n)}const O3e={id:"empty-window"};function F3e(n,e){if(typeof n=="string"||typeof n>"u")return typeof n=="string"?{id:rm(n)}:O3e;const t=n;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}function B3e(n){const e=n;return typeof(e==null?void 0:e.id)=="string"&&Be.isUri(e.configPath)}class W3e{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const i6="code-workspace";_("codeWorkspace","Code Workspace");const lge="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function H3e(n){return n.id===lge}var n6;(function(n){n.inspectTokensAction=_("inspectTokens","Developer: Inspect Tokens")})(n6||(n6={}));var B2;(function(n){n.gotoLineActionLabel=_("gotoLineActionLabel","Go to Line/Column...")})(B2||(B2={}));var s6;(function(n){n.helpQuickAccessActionLabel=_("helpQuickAccess","Show all Quick Access Providers")})(s6||(s6={}));var W2;(function(n){n.quickCommandActionLabel=_("quickCommandActionLabel","Command Palette"),n.quickCommandHelp=_("quickCommandActionHelp","Show And Run Commands")})(W2||(W2={}));var Zk;(function(n){n.quickOutlineActionLabel=_("quickOutlineActionLabel","Go to Symbol..."),n.quickOutlineByCategoryActionLabel=_("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(Zk||(Zk={}));var o6;(function(n){n.editorViewAccessibleLabel=_("editorViewAccessibleLabel","Editor content")})(o6||(o6={}));var r6;(function(n){n.toggleHighContrast=_("toggleHighContrast","Toggle High Contrast Theme")})(r6||(r6={}));var a6;(function(n){n.bulkEditServiceSummary=_("bulkEditServiceSummary","Made {0} edits in {1} files")})(a6||(a6={}));const cge=kt("workspaceTrustManagementService");let AC=[],wq=[],dge=[];function sD(n,e=!1){V3e(n,!1,e)}function V3e(n,e,t){const i=j3e(n,e);AC.push(i),i.userConfigured?dge.push(i):wq.push(i),t&&!i.userConfigured&&AC.forEach(s=>{s.mime===i.mime||s.userConfigured||(i.extension&&s.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&s.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&s.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&s.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function j3e(n,e){return{id:n.id,mime:n.mime,filename:n.filename,extension:n.extension,filepattern:n.filepattern,firstline:n.firstline,userConfigured:e,filenameLowercase:n.filename?n.filename.toLowerCase():void 0,extensionLowercase:n.extension?n.extension.toLowerCase():void 0,filepatternLowercase:n.filepattern?bfe(n.filepattern.toLowerCase()):void 0,filepatternOnPath:n.filepattern?n.filepattern.indexOf(xn.sep)>=0:!1}}function z3e(){AC=AC.filter(n=>n.userConfigured),wq=[]}function U3e(n,e){return $3e(n,e).map(t=>t.id)}function $3e(n,e){let t;if(n)switch(n.scheme){case tt.file:t=n.fsPath;break;case tt.data:{t=Ym.parseMetaData(n).get(Ym.META_DATA_LABEL);break}case tt.vscodeNotebookCell:t=void 0;break;default:t=n.path}if(!t)return[{id:"unknown",mime:dn.unknown}];t=t.toLowerCase();const i=rm(t),s=Ree(t,i,dge);if(s)return[s,{id:Do,mime:dn.text}];const o=Ree(t,i,wq);if(o)return[o,{id:Do,mime:dn.text}];if(e){const r=K3e(e);if(r)return[r,{id:Do,mime:dn.text}]}return[{id:"unknown",mime:dn.unknown}]}function Ree(n,e,t){var r;let i,s,o;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){i=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){const c=l.filepatternOnPath?n:e;(r=l.filepatternLowercase)!=null&&r.call(l,c)&&(s=l)}l.extension&&(!o||l.extension.length>o.extension.length)&&e.endsWith(l.extensionLowercase)&&(o=l)}if(i)return i;if(s)return s;if(o)return o}function K3e(n){if(CK(n)&&(n=n.substr(1)),n.length>0)for(let e=AC.length-1;e>=0;e--){const t=AC[e];if(!t.firstline)continue;const i=n.match(t.firstline);if(i&&i.length>0)return t}}const oD=Object.prototype.hasOwnProperty,Mee="vs.editor.nullLanguage";class q3e{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(Mee,0),this._register(Do,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||Mee}}const yL=class yL extends G{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new $),this.onDidChange=this._onDidChange.event,yL.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new q3e,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(xC.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){yL.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},z3e();const e=[].concat(xC.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(s=>{this._lowercaseNameMap[s.toLowerCase()]=i.identifier}),i.mimetypes.forEach(s=>{this._mimeTypesMap[s]=i.identifier})}),Zi.as(rc.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;oD.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let s=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),s=t.mimetypes[0]),s||(s=`text/x-${i}`,e.mimetypes.push(s)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)sD({id:i,mime:s,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)sD({id:i,mime:s,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)sD({id:i,mime:s,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);WRe(l)||sD({id:i,mime:s,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(i);let o=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?o=[null]:o=t.aliases),o!==null)for(const a of o)!a||a.length===0||e.aliases.push(a);const r=o!==null&&o.length>0;if(!(r&&o[0]===null)){const a=(r?o[0]:null)||i;(r||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?oD.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return oD.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&oD.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:U3e(e,t)}};yL.instanceCount=0;let l6=yL;const Ra=(n,e)=>n===e;function H2(n=Ra){return(e,t)=>Vi(e,t,n)}function G3e(){return(n,e)=>n.equals(e)}function c6(n,e,t){if(t!==void 0){const i=n;return i==null||e===void 0||e===null?e===i:t(i,e)}else{const i=n;return(s,o)=>s==null||o===void 0||o===null?o===s:i(s,o)}}function V2(n,e){if(n===e)return!0;if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!V2(n[t],e[t]))return!1;return!0}if(n&&typeof n=="object"&&e&&typeof e=="object"&&Object.getPrototypeOf(n)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const t=n,i=e,s=Object.keys(t),o=Object.keys(i),r=new Set(o);if(s.length!==o.length)return!1;for(const a of s)if(!r.has(a)||!V2(t[a],i[a]))return!1;return!0}return!1}class Gs{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return Z3e(e,this)}}const Pee=new Map,d6=new WeakMap;function Z3e(n,e){const t=d6.get(n);if(t)return t;const i=Y3e(n,e);if(i){let s=Pee.get(i)??0;s++,Pee.set(i,s);const o=s===1?i:`${i}#${s}`;return d6.set(n,o),o}}function Y3e(n,e){const t=d6.get(n);if(t)return t;const i=e.owner?Q3e(e.owner)+".":"";let s;const o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(s=o(),s!==void 0)return i+s}else return i+o;const r=e.referenceFn;if(r!==void 0&&(s=yq(r),s!==void 0))return i+s;if(e.owner!==void 0){const a=X3e(e.owner,n);if(a!==void 0)return i+a}}function X3e(n,e){for(const t in n)if(n[t]===e)return t}const Aee=new Map,Oee=new WeakMap;function Q3e(n){const e=Oee.get(n);if(e)return e;const t=J3e(n);let i=Aee.get(t)??0;i++,Aee.set(t,i);const s=i===1?t:`${t}#${i}`;return Oee.set(n,s),s}function J3e(n){const e=n.constructor;return e?e.name:"Object"}function yq(n){const e=n.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),s=i?i[1]:void 0;return s==null?void 0:s.trim()}let eBe;function uge(){return eBe}let hge;function tBe(n){hge=n}let fge;function iBe(n){fge=n}let u6;function nBe(n){u6=n}class gge{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,s=t===void 0?e:t;return u6({owner:i,debugName:()=>{const o=yq(s);if(o!==void 0)return o;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());if(a)return`${this.debugName}.${a[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:s},o=>s(this.read(o),o))}flatten(){return u6({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(hge(this,t)),this}keepObserved(e){return e.add(fge(this)),this}}class R1 extends gge{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function qi(n,e){const t=new M1(n,e);try{n(t)}finally{t.finish()}}let rD;function ex(n){if(rD)n(rD);else{const e=new M1(n,void 0);rD=e;try{n(e)}finally{e.finish(),rD=void 0}}}async function mge(n,e){const t=new M1(n,e);try{await n(t)}finally{t.finish()}}function Cv(n,e,t){n?e(n):qi(e,t)}class M1{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[]}getDebugName(){return this._getDebugName?this._getDebugName():yq(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:i,observable:s}=e[t];i.endUpdate(s)}this.updatingObservers=null}}function pt(n,e){let t;return typeof n=="string"?t=new Gs(void 0,n,void 0):t=new Gs(n,void 0,void 0),new Cq(t,e,Ra)}class Cq extends R1{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._value=t}get(){return this._value}set(e,t,i){var o;if(i===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new M1(()=>{},()=>`Setting ${this.debugName}`));try{const r=this._value;this._setValue(e),(o=uge())==null||o.handleObservableChanged(this,{oldValue:r,newValue:e,change:i,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,i)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function Yk(n,e){let t;return typeof n=="string"?t=new Gs(void 0,n,void 0):t=new Gs(n,void 0,void 0),new sBe(t,e,Ra)}class sBe extends Cq{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)==null||e.dispose()}}function Te(n,e){return e!==void 0?new Sv(new Gs(n,void 0,e),e,void 0,void 0,void 0,Ra):new Sv(new Gs(void 0,void 0,n),n,void 0,void 0,void 0,Ra)}function PI(n,e,t){return new oBe(new Gs(n,void 0,e),e,void 0,void 0,void 0,Ra,t)}function ma(n,e){return new Sv(new Gs(n.owner,n.debugName,n.debugReferenceFn),e,void 0,void 0,n.onLastObserverRemoved,n.equalsFn??Ra)}nBe(ma);function pge(n,e){return new Sv(new Gs(n.owner,n.debugName,void 0),e,n.createEmptyChangeSummary,n.handleChange,void 0,n.equalityComparer??Ra)}function gp(n,e){let t,i;e===void 0?(t=n,i=void 0):(i=n,t=e);const s=new ne;return new Sv(new Gs(i,void 0,t),o=>(s.clear(),t(o,s)),void 0,void 0,()=>s.dispose(),Ra)}function oo(n,e){let t,i;e===void 0?(t=n,i=void 0):(i=n,t=e);let s;return new Sv(new Gs(i,void 0,t),o=>{s?s.clear():s=new ne;const r=t(o);return r&&s.add(r),r},void 0,void 0,()=>{s&&(s.dispose(),s=void 0)},Ra)}class Sv extends R1{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,s,o=void 0,r){var a;super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=s,this._handleLastObserverRemoved=o,this._equalityComparator=r,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(a=this.createChangeSummary)==null?void 0:a.call(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)==null||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)==null?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var r;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=this.state!==0,i=this.value;this.state=3;const s=this.changeSummary;this.changeSummary=(r=this.createChangeSummary)==null?void 0:r.call(this);try{this.value=this._computeFn(this,s)}finally{for(const a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}if(t&&!this._equalityComparator(i,this.value))for(const a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const i of this.observers)i.handlePossibleChange(this);if(t)for(const i of this.observers)i.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const i of t)i.endUpdate(this)}_v(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const i=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:o=>o===e},this.changeSummary):!0,s=this.state===3;if(i&&(this.state===1||s)&&(this.state=2,s))for(const o of this.observers)o.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class oBe extends Sv{constructor(e,t,i,s,o=void 0,r,a){super(e,t,i,s,o,r),this.set=a}}function Je(n){return new iF(new Gs(void 0,void 0,n),n,void 0,void 0)}function AI(n,e){return new iF(new Gs(n.owner,n.debugName,n.debugReferenceFn??e),e,void 0,void 0)}function OI(n,e){return new iF(new Gs(n.owner,n.debugName,n.debugReferenceFn??e),e,n.createEmptyChangeSummary,n.handleChange)}function rBe(n,e){const t=new ne,i=OI({owner:n.owner,debugName:n.debugName,debugReferenceFn:n.debugReferenceFn??e,createEmptyChangeSummary:n.createEmptyChangeSummary,handleChange:n.handleChange},(s,o)=>{t.clear(),e(s,o,t)});return Pe(()=>{i.dispose(),t.dispose()})}function nr(n){const e=new ne,t=AI({owner:void 0,debugName:void 0,debugReferenceFn:n},i=>{e.clear(),n(i,e)});return Pe(()=>{t.dispose(),e.dispose()})}class iF{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,s){var o;this._debugNameData=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=s,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(o=this.createChangeSummary)==null?void 0:o.call(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var i,s;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){(i=uge())==null||i.handleAutorunTriggered(this);const o=this.changeSummary;this.changeSummary=(s=this.createChangeSummary)==null?void 0:s.call(this),this._runFn(this,o)}}finally{for(const o of this.dependenciesToBeRemoved)o.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,_v(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(n){n.Observer=iF})(Je||(Je={}));function nl(n){return new aBe(n)}class aBe extends gge{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function ii(...n){let e,t,i;return n.length===3?[e,t,i]=n:[t,i]=n,new zg(new Gs(e,void 0,i),t,i,()=>zg.globalTransaction,Ra)}function lBe(n,e,t){return new zg(new Gs(n.owner,n.debugName,n.debugReferenceFn??t),e,t,()=>zg.globalTransaction,n.equalsFn??Ra)}class zg extends R1{constructor(e,t,i,s,o){super(),this._debugNameData=e,this.event=t,this._getValue=i,this._getTransaction=s,this._equalityComparator=o,this.hasValue=!1,this.handleEvent=r=>{const a=this._getValue(r),l=this.value;(!this.hasValue||!this._equalityComparator(l,a))&&(this.value=a,this.hasValue&&Cv(this._getTransaction(),d=>{for(const u of this.observers)d.updateObserver(u,this),u.handleChange(this,void 0)},()=>{const d=this.getDebugName();return"Event fired"+(d?`: ${d}`:"")}),this.hasValue=!0)}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(n){n.Observer=zg;function e(t,i){let s=!1;zg.globalTransaction===void 0&&(zg.globalTransaction=t,s=!0);try{i()}finally{s&&(zg.globalTransaction=void 0)}}n.batchEventsGlobally=e})(ii||(ii={}));function Ts(n,e){return new cBe(n,e)}class cBe extends R1{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{qi(i=>{for(const s of this.observers)i.updateObserver(s,this),s.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function P1(n){return typeof n=="string"?new Fee(n):new Fee(void 0,n)}class Fee extends R1{get debugName(){return new Gs(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){qi(i=>{this.trigger(i,t)},()=>`Trigger signal ${this.debugName}`);return}for(const i of this.observers)e.updateObserver(i,this),i.handleChange(this,t)}get(){}}function dBe(n){const e=new _ge(!1,void 0);return n.addObserver(e),Pe(()=>{n.removeObserver(e)})}iBe(dBe);function A1(n,e){const t=new _ge(!0,e);return n.addObserver(t),e?e(n.get()):n.reportChanges(),Pe(()=>{n.removeObserver(t)})}tBe(A1);class _ge{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function FI(n,e){let t;return ma({owner:n,debugReferenceFn:e},s=>(t=e(s,t),t))}function uBe(n,e,t,i){let s=new Bee(t,i);return ma({debugReferenceFn:t,owner:n,onLastObserverRemoved:()=>{s.dispose(),s=new Bee(t)}},r=>(s.setItems(e.read(r)),s.getItems()))}class Bee{constructor(e,t){this._map=e,this._keySelector=t,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){const t=[],i=new Set(this._cache.keys());for(const s of e){const o=this._keySelector?this._keySelector(s):s;let r=this._cache.get(o);if(r)i.delete(o);else{const a=new ne;r={out:this._map(s,a),store:a},this._cache.set(o,r)}t.push(r.out)}for(const s of i)this._cache.get(s).store.dispose(),this._cache.delete(s);this._items=t}getItems(){return this._items}}function hBe(n,e){return FI(n,(t,i)=>i??e(t))}class nF{static fromFn(e){return new nF(e())}constructor(e){this._value=pt(this,void 0),this.promiseResult=this._value,this.promise=e.then(t=>(qi(i=>{this._value.set(new Wee(t,void 0),i)}),t),t=>{throw qi(i=>{this._value.set(new Wee(void 0,t),i)}),t})}}class Wee{constructor(e,t){this.data=e,this.error=t}}function bge(n,e,t,i){return e||(e=s=>s!=null),new Promise((s,o)=>{let r=!0,a=!1;const l=n.map(d=>({isFinished:e(d),error:t?t(d):!1,state:d})),c=Je(d=>{const{isFinished:u,error:h,state:f}=l.read(d);(u||h)&&(r?a=!0:c.dispose(),h?o(h===!0?f:h):s(f))});if(i){const d=i.onCancellationRequested(()=>{c.dispose(),d.dispose(),o(new Xl)});if(i.isCancellationRequested){c.dispose(),d.dispose(),o(new Xl);return}}r=!1,a&&c.dispose()})}class fBe extends R1{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,i){if(i===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new M1(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),i!==void 0&&this._deltas.push(i),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(o,r)=>{},handlePossibleChange:o=>{}},this),this._updateCounter>1)for(const o of this.observers)o.handlePossibleChange(this)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function h6(n,e){return n.lazy?new fBe(new Gs(n.owner,n.debugName,void 0),e,n.equalsFn??Ra):new Cq(new Gs(n.owner,n.debugName,void 0),e,n.equalsFn??Ra)}const CL=class CL extends G{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new $),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new $),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new $({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,CL.instanceCount++,this._registry=this._register(new l6(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){CL.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return nK(i,null)}createById(e){return new Hee(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new Hee(this.onDidChange,()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=Do),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),nn.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};CL.instanceCount=0;let f6=CL;class Hee{constructor(e,t){this._value=ii(this,e,()=>t()),this.onDidChange=pe.fromObservable(this._value)}get languageId(){return this._value.get()}}const Xk={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:dn.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"},gBe=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let sF=gBe;const mBe=new ad(()=>sF("mouse",!1)),pBe=new ad(()=>sF("element",!1));function _Be(n){sF=n}function Wo(n){return n==="element"?pBe.value:mBe.value}function OC(){return sF("element",!0)}let vge={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function bBe(n){vge=n}function _d(){return vge}class vBe{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(s=>s.splice(e,t,i))}}class Ep extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function Vee(n,e){const t=[];for(const i of e){if(n.start>=i.range.end)continue;if(n.end<i.range.start)break;const s=Ws.intersect(n,i.range);Ws.isEmpty(s)||t.push({range:s,size:i.size})}return t}function g6({start:n,end:e},t){return{start:n+t,end:e+t}}function wBe(n){const e=[];let t=null;for(const i of n){const s=i.range.start,o=i.range.end,r=i.size;if(t&&r===t.size){t.range.end=o;continue}t={range:{start:s,end:o},size:r},e.push(t)}return e}function yBe(...n){return wBe(n.reduce((e,t)=>e.concat(t),[]))}class CBe{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,i=[]){const s=i.length-t,o=Vee({start:0,end:e},this.groups),r=Vee({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:g6(l.range,s),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=yBe(o,a,r),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const s of this.groups){const o=s.range.end-s.range.start,r=i+o*s.size;if(e<r)return t+Math.floor((e-i)/s.size);t+=o,i=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const s of this.groups){const o=s.range.end-s.range.start,r=i+o;if(e<r)return this._paddingTop+t+(e-i)*s.size;t+=o*s.size,i=r}return-1}}class SBe{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const s=ge(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(s);t={domNode:s,templateId:e,templateData:r}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var Tf=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};const Dp={CurrentDragAndDropData:void 0},kd={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(n){return[n]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class BI{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class xBe{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class LBe{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function kBe(n,e){return Array.isArray(n)&&Array.isArray(e)?Vi(n,e):n===e}class NBe{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,s)=>s,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}const uA=class uA{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:p3(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,s=kd){var r,a;if(this.virtualDelegate=t,this.domId=`list_id_${++uA.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new hl(50),this.splicing=!1,this.dragOverAnimationStopDisposable=G.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=G.None,this.onDragLeaveTimeout=G.None,this.disposables=new ne,this._onDidChangeContentHeight=new $,this._onDidChangeContentWidth=new $,this.onDidChangeContentHeight=pe.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(s.paddingTop??0);for(const l of i)this.renderers.set(l.templateId,l);this.cache=this.disposables.add(new SBe(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=s.horizontalScrolling??kd.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof s.paddingBottom>"u"?0:s.paddingBottom,this.accessibilityProvider=new NBe(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(s.transformOptimization??kd.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(qs.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new T1({forceIntegerValues:!0,smoothScrollDuration:s.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:l=>zr(je(this.domNode),l)})),this.scrollableElement=this.disposables.add(new q4(this.rowsContainer,{alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel??kd.alwaysConsumeMouseWheel,horizontal:1,vertical:s.verticalScrollMode??kd.verticalScrollMode,useShadows:s.useShadows??kd.useShadows,mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity,scrollByPage:s.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(Q(this.rowsContainer,yi.Change,l=>this.onTouchChange(l))),this.disposables.add(Q(this.scrollableElement.getDomNode(),"scroll",l=>l.target.scrollTop=0)),this.disposables.add(Q(this.domNode,"dragover",l=>this.onDragOver(this.toDragEvent(l)))),this.disposables.add(Q(this.domNode,"drop",l=>this.onDrop(this.toDragEvent(l)))),this.disposables.add(Q(this.domNode,"dragleave",l=>this.onDragLeave(this.toDragEvent(l)))),this.disposables.add(Q(this.domNode,"dragend",l=>this.onDragEnd(l))),this.setRowLineHeight=s.setRowLineHeight??kd.setRowLineHeight,this.setRowHeight=s.setRowHeight??kd.setRowHeight,this.supportDynamicHeights=s.supportDynamicHeights??kd.supportDynamicHeights,this.dnd=s.dnd??this.disposables.add(kd.dnd),this.layout((r=s.initialSize)==null?void 0:r.height,(a=s.initialSize)==null?void 0:a.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new CBe(e)}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},r=Ws.intersect(s,o),a=new Map;for(let S=r.end-1;S>=r.start;S--){const x=this.items[S];if(x.dragStartDisposable.dispose(),x.checkedDisposable.dispose(),x.row){let k=a.get(x.templateId);k||(k=[],a.set(x.templateId,k));const N=this.renderers.get(x.templateId);N&&N.disposeElement&&N.disposeElement(x.element,S,x.row.templateData,x.size),k.unshift(x.row)}x.row=null,x.stale=!0}const l={start:e+t,end:this.items.length},c=Ws.intersect(l,s),d=Ws.relativeComplement(l,s),u=i.map(S=>({id:String(this.itemId++),element:S,templateId:this.virtualDelegate.getTemplateId(S),size:this.virtualDelegate.getHeight(S),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(S),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:G.None,checkedDisposable:G.None,stale:!1}));let h;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,u),h=this.items,this.items=u):(this.rangeMap.splice(e,t,u),h=this.items.splice(e,t,...u));const f=i.length-t,m=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=g6(c,f),b=Ws.intersect(m,p);for(let S=b.start;S<b.end;S++)this.updateItemInDOM(this.items[S],S);const v=Ws.relativeComplement(p,m);for(const S of v)for(let x=S.start;x<S.end;x++)this.removeItemFromDOM(x);const w=d.map(S=>g6(S,f)),C=[{start:e,end:e+i.length},...w].map(S=>Ws.intersect(m,S)).reverse();for(const S of C)for(let x=S.end-1;x>=S.start;x--){const k=this.items[x],N=a.get(k.templateId),E=N==null?void 0:N.pop();this.insertItemInDOM(x,E)}for(const S of a.values())for(const x of S)this.cache.release(x);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(S=>S.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=zr(je(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:typeof e=="number"?e:G2e(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:p3(this.domNode)})}render(e,t,i,s,o,r=!1){const a=this.getRenderRange(t,i),l=Ws.relativeComplement(a,e).reverse(),c=Ws.relativeComplement(e,a);if(r){const d=Ws.intersect(e,a);for(let u=d.start;u<d.end;u++)this.updateItemInDOM(this.items[u],u)}this.cache.transact(()=>{for(const d of c)for(let u=d.start;u<d.end;u++)this.removeItemFromDOM(u);for(const d of l)for(let u=d.end-1;u>=d.start;u--)this.insertItemInDOM(u)}),s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){var l,c;const i=this.items[e];if(!i.row)if(t)i.row=t,i.stale=!0;else{const d=this.cache.alloc(i.templateId);i.row=d.row,i.stale||(i.stale=d.isReusingConnectedDomNode)}const s=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",s);const o=this.accessibilityProvider.isChecked(i.element);if(typeof o=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!o));else if(o){const d=u=>i.row.domNode.setAttribute("aria-checked",String(!!u));d(o.value),i.checkedDisposable=o.onDidChange(()=>d(o.value))}if(i.stale||!i.row.domNode.parentElement){const d=((c=(l=this.items.at(e+1))==null?void 0:l.row)==null?void 0:c.domNode)??null;(i.row.domNode.parentElement!==this.rowsContainer||i.row.domNode.nextElementSibling!==d)&&this.rowsContainer.insertBefore(i.row.domNode,d),i.stale=!1}this.updateItemInDOM(i,e);const r=this.renderers.get(i.templateId);if(!r)throw new Error(`No renderer found for template id ${i.templateId}`);r==null||r.renderElement(i.element,e,i.row.templateData,i.size);const a=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!a,a&&(i.dragStartDisposable=Q(i.row.domNode,"dragstart",d=>this.onDragStart(i.element,a,d))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=p3(e.row.domNode);const t=je(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return pe.map(this.disposables.add(new It(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return pe.map(this.disposables.add(new It(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return pe.filter(pe.map(this.disposables.add(new It(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return pe.map(this.disposables.add(new It(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return pe.map(this.disposables.add(new It(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return pe.map(this.disposables.add(new It(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return pe.any(pe.map(this.disposables.add(new It(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),pe.map(this.disposables.add(new It(this.domNode,yi.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return pe.map(this.disposables.add(new It(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return pe.map(this.disposables.add(new It(this.rowsContainer,yi.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element,o=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:s,sector:o}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){var o,r;if(!i.dataTransfer)return;const s=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(Xk.TEXT,t),i.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(s,i)),typeof a>"u"&&(a=String(s.length));const l=ge(".monaco-drag-image");l.textContent=a,(u=>{for(;u&&!u.classList.contains("monaco-workbench");)u=u.parentElement;return u||this.domNode.ownerDocument})(this.domNode).appendChild(l),i.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>l.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new BI(s),Dp.CurrentDragAndDropData=new xBe(s),(r=(o=this.dnd).onDragStart)==null||r.call(o,this.currentDragData,i)}onDragOver(e){var o,r;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Dp.CurrentDragAndDropData&&Dp.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Dp.CurrentDragAndDropData)this.currentDragData=Dp.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new LBe}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&((o=t.effect)==null?void 0:o.type)===0?"copy":"move";let i;typeof t!="boolean"&&t.feedback?i=t.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=ff(i).filter(a=>a>=-1&&a<this.length).sort((a,l)=>a-l),i=i[0]===-1?[-1]:i;let s=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(kBe(this.currentDragFeedback,i)&&this.currentDragFeedbackPosition===s)return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=s,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add(s),this.rowsContainer.classList.add(s),this.currentDragFeedbackDisposable=Pe(()=>{this.domNode.classList.remove(s),this.rowsContainer.classList.remove(s)});else{if(i.length>1&&s!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");s==="drop-target-after"&&i[0]<this.length-1&&(i[0]+=1,s="drop-target-before");for(const a of i){const l=this.items[a];l.dropTarget=!0,(r=l.row)==null||r.domNode.classList.add(s)}this.currentDragFeedbackDisposable=Pe(()=>{var a;for(const l of i){const c=this.items[l];c.dropTarget=!1,(a=c.row)==null||a.domNode.classList.remove(s)}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Km(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&((i=(t=this.dnd).onDragLeave)==null||i.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Dp.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,i;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Dp.CurrentDragAndDropData=void 0,(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=G.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=phe(this.domNode).top;this.dragOverAnimationDisposable=aMe(je(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Km(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const i=e.offsetY/this.items[t].size,s=Math.floor(i/.25);return vo(s,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;(Qn(i)||eMe(i))&&i!==this.rowsContainer&&t.contains(i);){const s=i.getAttribute("data-index");if(s){const o=Number(s);if(!isNaN(o))return o}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const s=this.getRenderRange(e,t);let o,r;e===this.elementTop(s.start)?(o=s.start,r=0):s.end-s.start>1&&(o=s.start+1,r=this.elementTop(o)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let d=l.start;d<l.end;d++){const u=this.probeDynamicHeight(d);u!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=u,c=c||u!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const d=Ws.relativeComplement(s,l);for(const h of d)for(let f=h.start;f<h.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const u=Ws.relativeComplement(l,s).reverse();for(const h of u)for(let f=h.end-1;f>=h.start;f--)this.insertItemInDOM(f);for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof o=="number"){const h=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(o)-r+h;this.setScrollTop(f,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var r,a,l;const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(t.element);if(c!==null){const d=t.size;return t.size=c,t.lastDynamicHeightWidth=this.renderWidth,c-d}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const i=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!Zn(t.row.domNode,je(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-i;const{row:s}=this.cache.alloc(t.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);const o=this.renderers.get(t.templateId);if(!o)throw new Zt("Missing renderer for templateId: "+t.templateId);return o.renderElement(t.element,e,s.templateData,void 0),t.size=s.domNode.offsetHeight,(r=o.disposeElement)==null||r.call(o,t.element,e,s.templateData,void 0),(l=(a=this.virtualDelegate).setDynamicHeight)==null||l.call(a,t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,s.domNode.remove(),this.cache.release(s),t.size-i}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e,t,i;for(const s of this.items)if(s.dragStartDisposable.dispose(),s.checkedDisposable.dispose(),s.row){const o=this.renderers.get(s.row.templateId);o&&((e=o.disposeElement)==null||e.call(o,s.element,-1,s.row.templateData,void 0),o.disposeTemplate(s.row.templateData))}this.items=[],(t=this.domNode)==null||t.remove(),(i=this.dragOverAnimationDisposable)==null||i.dispose(),this.disposables.dispose()}};uA.InstanceCount=0;let ic=uA;Tf([yn],ic.prototype,"onMouseClick",null);Tf([yn],ic.prototype,"onMouseDblClick",null);Tf([yn],ic.prototype,"onMouseMiddleClick",null);Tf([yn],ic.prototype,"onMouseDown",null);Tf([yn],ic.prototype,"onMouseOver",null);Tf([yn],ic.prototype,"onMouseOut",null);Tf([yn],ic.prototype,"onContextMenu",null);Tf([yn],ic.prototype,"onTouchStart",null);Tf([yn],ic.prototype,"onTap",null);var mp=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};class IBe{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const s=this.renderedElements.findIndex(o=>o.templateData===i);if(s>=0){const o=this.renderedElements[s];this.trait.unrender(i),o.index=t}else{const o={index:t,templateData:i};this.renderedElements.push(o)}this.trait.renderIndex(t,i)}splice(e,t,i){const s=[];for(const o of this.renderedElements)o.index<e?s.push(o):o.index>=e+t&&s.push({index:o.index+i-t,templateData:o.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}let j2=class{get name(){return this._trait}get renderer(){return new IBe(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new $,this.onChange=this._onChange.event}splice(e,t,i){const s=i.length-t,o=e+t,r=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)r.push(this.sortedIndexes[a++]);for(let l=0;l<i.length;l++)i[l]&&r.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=o;)r.push(this.sortedIndexes[a++]+s);this.renderer.splice(e,t,i.length),this._set(r,r)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(zee),t)}_set(e,t,i){const s=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=m6(o,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:i}),s}get(){return this.indexes}contains(e){return bk(this.sortedIndexes,e,zee)>=0}dispose(){gi(this._onChange)}};mp([yn],j2.prototype,"renderer",null);class EBe extends j2{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class G3{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const s=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(s.length===0)return this.trait.splice(e,t,new Array(i.length).fill(!1));const o=new Set(s),r=i.map(a=>o.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,r)}}function dm(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"}function WI(n,e){return n.classList.contains(e)?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:WI(n.parentElement,e)}function tx(n){return WI(n,"monaco-editor")}function DBe(n){return WI(n,"monaco-custom-toggle")}function TBe(n){return WI(n,"action-item")}function Wx(n){return WI(n,"monaco-tree-sticky-row")}function Qk(n){return n.classList.contains("monaco-tree-sticky-container")}function wge(n){return n.tagName==="A"&&n.classList.contains("monaco-button")||n.tagName==="DIV"&&n.classList.contains("monaco-button-dropdown")?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:wge(n.parentElement)}class yge{get onKeyDown(){return pe.chain(this.disposables.add(new It(this.view.domNode,"keydown")).event,e=>e.filter(t=>!dm(t.target)).map(t=>new _i(t)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new ne,this.multipleSelectionDisposables=new ne,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown(s=>{switch(s.keyCode){case 3:return this.onEnter(s);case 16:return this.onUpArrow(s);case 18:return this.onDownArrow(s);case 11:return this.onPageUpArrow(s);case 12:return this.onPageDownArrow(s);case 9:return this.onEscape(s);case 31:this.multipleSelectionSupport&&(Lt?s.metaKey:s.ctrlKey)&&this.onCtrlA(s)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(qo(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}mp([yn],yge.prototype,"onKeyDown",null);var su;(function(n){n[n.Automatic=0]="Automatic",n[n.Trigger=1]="Trigger"})(su||(su={}));var pw;(function(n){n[n.Idle=0]="Idle",n[n.Typing=1]="Typing"})(pw||(pw={}));const RBe=new class{mightProducePrintableCharacter(n){return n.ctrlKey||n.metaKey||n.altKey?!1:n.keyCode>=31&&n.keyCode<=56||n.keyCode>=21&&n.keyCode<=30||n.keyCode>=98&&n.keyCode<=107||n.keyCode>=85&&n.keyCode<=95}};class MBe{constructor(e,t,i,s,o){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=s,this.delegate=o,this.enabled=!1,this.state=pw.Idle,this.mode=su.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new ne,this.disposables=new ne,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??su.Automatic}enable(){if(this.enabled)return;let e=!1;const t=pe.chain(this.enabledDisposables.add(new It(this.view.domNode,"keydown")).event,o=>o.filter(r=>!dm(r.target)).filter(()=>this.mode===su.Automatic||this.triggered).map(r=>new _i(r)).filter(r=>e||this.keyboardNavigationEventFilter(r)).filter(r=>this.delegate.mightProducePrintableCharacter(r)).forEach(r=>Dt.stop(r,!0)).map(r=>r.browserEvent.key)),i=pe.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);pe.reduce(pe.any(t,i),(o,r)=>r===null?null:(o||"")+r,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var t;const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const i=(t=this.list.options.accessibilityProvider)==null?void 0:t.getAriaLabel(this.list.element(e[0]));typeof i=="string"?Oo(i):i&&Oo(i.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=pw.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,s=this.state===pw.Idle?1:0;this.state=pw.Typing;for(let o=0;o<this.list.length;o++){const r=(i+o+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if($k(e,l)){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}const c=e5e(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}}}else if(typeof l>"u"||$k(e,l)){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class PBe{constructor(e,t){this.list=e,this.view=t,this.disposables=new ne;const i=pe.chain(this.disposables.add(new It(t.domNode,"keydown")).event,o=>o.filter(r=>!dm(r.target)).map(r=>new _i(r)));pe.chain(i,o=>o.filter(r=>r.keyCode===2&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const s=i.querySelector("[tabIndex]");if(!s||!Qn(s)||s.tabIndex===-1)return;const o=je(s).getComputedStyle(s);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function Cge(n){return Lt?n.browserEvent.metaKey:n.browserEvent.ctrlKey}function Sge(n){return n.browserEvent.shiftKey}function ABe(n){return EK(n)&&n.button===2}const jee={isSelectionSingleChangeEvent:Cge,isSelectionRangeChangeEvent:Sge};class xge{constructor(e){this.list=e,this.disposables=new ne,this._onPointer=new $,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||jee),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(qs.addTarget(e.getHTMLElement()))),pe.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||jee))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){tx(e.browserEvent.target)||Ms()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(dm(e.browserEvent.target)||tx(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||dm(e.browserEvent.target)||tx(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),ABe(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(dm(e.browserEvent.target)||tx(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof i>"u"&&(i=this.list.getFocus()[0]??t,this.list.setAnchor(i));const s=Math.min(i,t),o=Math.max(i,t),r=qo(s,o+1),a=this.list.getSelection(),l=BBe(m6(a,[i]),i);if(l.length===0)return;const c=m6(r,WBe(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),o=s.filter(r=>r!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}}class Lge{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const s=Zh(e.listFocusAndSelectionOutline,Zh(e.listSelectionOutline,e.listFocusOutline??""));s&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),e.listFocusOutline&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const o=Zh(e.listSelectionOutline,e.listInactiveFocusOutline??"");o&&i.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${o}; outline-offset: -1px; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&i.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&i.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&i.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=i.join(`
`)}}const OBe={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:oe.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:oe.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:oe.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},FBe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function BBe(n,e){const t=n.indexOf(e);if(t===-1)return[];const i=[];let s=t-1;for(;s>=0&&n[s]===e-(t-s);)i.push(n[s--]);for(i.reverse(),s=t;s<n.length&&n[s]===e+(s-t);)i.push(n[s++]);return i}function m6(n,e){const t=[];let i=0,s=0;for(;i<n.length||s<e.length;)if(i>=n.length)t.push(e[s++]);else if(s>=e.length)t.push(n[i++]);else if(n[i]===e[s]){t.push(n[i]),i++,s++;continue}else n[i]<e[s]?t.push(n[i++]):t.push(e[s++]);return t}function WBe(n,e){const t=[];let i=0,s=0;for(;i<n.length||s<e.length;)if(i>=n.length)t.push(e[s++]);else if(s>=e.length)t.push(n[i++]);else if(n[i]===e[s]){i++,s++;continue}else n[i]<e[s]?t.push(n[i++]):s++;return t}const zee=(n,e)=>n-e;class HBe{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,s){let o=0;for(const r of this.renderers)r.renderElement(e,t,i[o++],s)}disposeElement(e,t,i,s){var r;let o=0;for(const a of this.renderers)(r=a.disposeElement)==null||r.call(a,e,t,i[o],s),o+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class VBe{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new ne}}renderElement(e,t,i){const s=this.accessibilityProvider.getAriaLabel(e),o=s&&typeof s!="string"?s:nl(s);i.disposables.add(Je(a=>{this.setAriaLabel(a.readObservable(o),i.container)}));const r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof r=="number"?i.container.setAttribute("aria-level",`${r}`):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i,s){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class jBe{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)==null||s.call(i,e,t)}onDragOver(e,t,i,s,o){return this.dnd.onDragOver(e,t,i,s,o)}onDragLeave(e,t,i,s){var o,r;(r=(o=this.dnd).onDragLeave)==null||r.call(o,e,t,i,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}drop(e,t,i,s,o){this.dnd.drop(e,t,i,s,o)}dispose(){this.dnd.dispose()}}class Wa{get onDidChangeFocus(){return pe.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return pe.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=pe.chain(this.disposables.add(new It(this.view.domNode,"keydown")).event,o=>o.map(r=>new _i(r)).filter(r=>e=r.keyCode===58||r.shiftKey&&r.keyCode===68).map(r=>Dt.stop(r,!0)).filter(()=>!1)),i=pe.chain(this.disposables.add(new It(this.view.domNode,"keyup")).event,o=>o.forEach(()=>e=!1).map(r=>new _i(r)).filter(r=>r.keyCode===58||r.shiftKey&&r.keyCode===68).map(r=>Dt.stop(r,!0)).map(({browserEvent:r})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,d=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:d,browserEvent:r}})),s=pe.chain(this.view.onContextMenu,o=>o.filter(r=>!e).map(({element:r,index:a,browserEvent:l})=>({element:r,index:a,anchor:new Vl(je(this.view.domNode),l),browserEvent:l})));return pe.any(t,i,s)}get onKeyDown(){return this.disposables.add(new It(this.view.domNode,"keydown")).event}get onDidFocus(){return pe.signal(this.disposables.add(new It(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return pe.signal(this.disposables.add(new It(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,s,o=FBe){var c,d,u;this.user=e,this._options=o,this.focus=new j2("focused"),this.anchor=new j2("anchor"),this.eventBufferer=new vI,this._ariaLabel="",this.disposables=new ne,this._onDidDispose=new $,this.onDidDispose=this._onDidDispose.event;const r=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(c=this._options.accessibilityProvider)==null?void 0:c.getWidgetRole():"list";this.selection=new EBe(r!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(a.push(new VBe(this.accessibilityProvider)),(u=(d=this.accessibilityProvider).onDidChangeActiveDescendant)==null||u.call(d,this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(h=>new HBe(h.templateId,[...a,h]));const l={...o,dnd:o.dnd&&new jBe(this,o.dnd)};if(this.view=this.createListView(t,i,s,l),this.view.domNode.setAttribute("role",r),o.styleController)this.styleController=o.styleController(this.view.domId);else{const h=Ta(this.view.domNode);this.styleController=new Lge(h,this.view.domId)}if(this.spliceable=new vBe([new G3(this.focus,this.view,o.identityProvider),new G3(this.selection,this.view,o.identityProvider),new G3(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new PBe(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new yge(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){const h=o.keyboardNavigationDelegate||RBe;this.typeNavigationController=new MBe(this,this.view,o.keyboardNavigationLabelProvider,o.keyboardNavigationEventFilter??(()=>!0),h),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,s){return new ic(e,t,i,s)}createMouseController(e){return new xge(this)}updateOptions(e={}){var t,i;this._options={...this._options,...e},(t=this.typeNavigationController)==null||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(i=this.keyboardController)==null||i.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new Ep(this.user,`Invalid start index: ${e}`);if(t<0)throw new Ep(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new Ep(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new Ep(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return nK(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new Ep(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,s){if(this.length===0)return;const o=this.focus.get(),r=this.findNextIndex(o.length>0?o[0]+e:0,t,s);r>-1&&this.setFocus([r],i)}focusPrevious(e=1,t=!1,i,s){if(this.length===0)return;const o=this.focus.get(),r=this.findPreviousIndex(o.length>0?o[0]-e:0,t,s);r>-1&&this.setFocus([r],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const s=this.getFocus()[0];if(s!==i&&(s===void 0||i>s)){const o=this.findPreviousIndex(i,!1,t);o>-1&&s!==o?this.setFocus([o],e):this.setFocus([i],e)}else{const o=this.view.getScrollTop();let r=o+this.view.renderHeight;i>s&&(r-=this.view.elementHeight(i)),this.view.setScrollTop(r),this.view.getScrollTop()!==o&&(this.setFocus([]),await _f(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,i=()=>0){let s;const o=i(),r=this.view.getScrollTop()+o;r===0?s=this.view.indexAt(r):s=this.view.indexAfter(r-1);const a=this.getFocus()[0];if(a!==s&&(a===void 0||a>=s)){const l=this.findNextIndex(s,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([s],e)}else{const l=r;this.view.setScrollTop(r-this.view.renderHeight-o),this.view.getScrollTop()+i()!==l&&(this.setFocus([]),await _f(0),await this.focusPreviousPage(e,t,i))}}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const s=this.findNextIndex(e,!1,i);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,i){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,i=0){if(e<0||e>=this.length)throw new Ep(this.user,`Invalid index ${e}`);const s=this.view.getScrollTop(),o=this.view.elementTop(e),r=this.view.elementHeight(e);if(Hm(t)){const a=r-this.view.renderHeight+i;this.view.setScrollTop(a*vo(t,0,1)+o-i)}else{const a=o+r,l=s+this.view.renderHeight;o<s+i&&a>=l||(o<s+i||a>=l&&r>=this.view.renderHeight?this.view.setScrollTop(o-i):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new Ep(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),s=this.view.elementTop(e),o=this.view.elementHeight(e);if(s<i+t||s+o>i+this.view.renderHeight)return null;const r=o-this.view.renderHeight+t;return Math.abs((i+t-s)/r)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var t;const e=this.focus.get();if(e.length>0){let i;(t=this.accessibilityProvider)!=null&&t.getActiveDescendantId&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}mp([yn],Wa.prototype,"onDidChangeFocus",null);mp([yn],Wa.prototype,"onDidChangeSelection",null);mp([yn],Wa.prototype,"onContextMenu",null);mp([yn],Wa.prototype,"onKeyDown",null);mp([yn],Wa.prototype,"onDidFocus",null);mp([yn],Wa.prototype,"onDidBlur",null);const L_=ge,kge="selectOption.entry.template";class zBe{get templateId(){return kge}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=ae(e,L_(".option-text")),t.detail=ae(e,L_(".option-detail")),t.decoratorRight=ae(e,L_(".option-decorator-right")),t}renderElement(e,t,i){const s=i,o=e.text,r=e.detail,a=e.decoratorRight,l=e.isDisabled;s.text.textContent=o,s.detail.textContent=r||"",s.decoratorRight.innerText=a||"",l?s.root.classList.add("option-disabled"):s.root.classList.remove("option-disabled")}disposeTemplate(e){}}const Wd=class Wd extends G{constructor(e,t,i,s,o){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=s,this.selectBoxOptions=o||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=Wd.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new $,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(_d().setupManagedHover(Wo("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return kge}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=ge(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=ae(this.selectDropDownContainer,L_(".select-box-details-pane"));const t=ae(this.selectDropDownContainer,L_(".select-box-dropdown-container-width-control")),i=ae(t,L_(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",ae(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=Ta(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(Q(this.selectDropDownContainer,fe.DRAG_START,s=>{Dt.stop(s,!0)}))}registerListeners(){this._register(Ji(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(Q(this.selectElement,fe.CLICK,t=>{Dt.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(Q(this.selectElement,fe.MOUSE_DOWN,t=>{Dt.stop(t)}));let e;this._register(Q(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(Q(this.selectElement,"touchend",t=>{Dt.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(Q(this.selectElement,fe.KEY_DOWN,t=>{const i=new _i(t);let s=!1;Lt?(i.keyCode===18||i.keyCode===16||i.keyCode===10||i.keyCode===3)&&(s=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(s=!0),s&&(this.showSelectDropDown(),Dt.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){Vi(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((i,s)=>{this.selectElement.add(this.createOption(i.text,s,i.isDisabled)),typeof i.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)==null||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",i=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=i}styleList(){const e=this.styles.selectBackground??"",t=Zh(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const i=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=i,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!i,s}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=je(this.selectElement),i=un(this.selectElement),s=je(this.selectElement).getComputedStyle(this.selectElement),o=parseFloat(s.getPropertyValue("--dropdown-padding-top"))+parseFloat(s.getPropertyValue("--dropdown-padding-bottom")),r=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),a=i.top-Wd.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),d=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=d,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let u=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const h=this._hasDetails?this._cachedMaxDetailsHeight:0,f=u+o+h,m=Math.floor((r-o-h)/this.getHeight()),p=Math.floor((a-o-h)/this.getHeight());if(e)return i.top+i.height>t.innerHeight-22||i.top<Wd.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||m<1&&p<1?!1:(m<Wd.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&p>m&&this.options.length>m?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<Wd.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&m<1||this._dropDownPosition===1&&p<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&m+p<1)return this.hideSelectDropDown(!0),!1;f>r&&(u=m*this.getHeight())}else f>a&&(u=p*this.getHeight());return this.selectList.layout(u),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=u+o+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=u+o+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=d,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let i=0,s=0;this.options.forEach((o,r)=>{const a=o.detail?o.detail.length:0,l=o.decoratorRight?o.decoratorRight.length:0,c=o.text.length+a+l;c>s&&(i=r,s=c)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=xr(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=ae(e,L_(".select-box-dropdown-list-container")),this.listRenderer=new zBe,this.selectList=this._register(new Wa("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:s=>{let o=s.text;return s.detail&&(o+=`. ${s.detail}`),s.decoratorRight&&(o+=`. ${s.decoratorRight}`),s.description&&(o+=`. ${s.description}`),o},getWidgetAriaLabel:()=>_({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>Lt?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new It(this.selectDropDownListContainer,"keydown")),i=pe.chain(t.event,s=>s.filter(()=>this.selectList.length>0).map(o=>new _i(o)));this._register(pe.chain(i,s=>s.filter(o=>o.keyCode===3))(this.onEnter,this)),this._register(pe.chain(i,s=>s.filter(o=>o.keyCode===2))(this.onEnter,this)),this._register(pe.chain(i,s=>s.filter(o=>o.keyCode===9))(this.onEscape,this)),this._register(pe.chain(i,s=>s.filter(o=>o.keyCode===16))(this.onUpArrow,this)),this._register(pe.chain(i,s=>s.filter(o=>o.keyCode===18))(this.onDownArrow,this)),this._register(pe.chain(i,s=>s.filter(o=>o.keyCode===12))(this.onPageDown,this)),this._register(pe.chain(i,s=>s.filter(o=>o.keyCode===11))(this.onPageUp,this)),this._register(pe.chain(i,s=>s.filter(o=>o.keyCode===14))(this.onHome,this)),this._register(pe.chain(i,s=>s.filter(o=>o.keyCode===13))(this.onEnd,this)),this._register(pe.chain(i,s=>s.filter(o=>o.keyCode>=21&&o.keyCode<=56||o.keyCode>=85&&o.keyCode<=113))(this.onCharacter,this)),this._register(Q(this.selectList.getHTMLElement(),fe.POINTER_UP,s=>this.onPointerUp(s))),this._register(this.selectList.onMouseOver(s=>typeof s.index<"u"&&this.selectList.setFocus([s.index]))),this._register(this.selectList.onDidChangeFocus(s=>this.onListFocus(s))),this._register(Q(this.selectDropDownContainer,fe.FOCUS_OUT,s=>{!this._isVisible||Zn(s.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;Dt.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const s=Number(i.getAttribute("data-index")),o=i.classList.contains("option-disabled");s>=0&&s<this.options.length&&!o&&(this.selected=s,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=o=>{for(let r=0;r<o.childNodes.length;r++){const a=o.childNodes.item(r);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():i(a)}},s=Q4({value:e,supportThemeIcons:!0},{actionHandler:t});return s.element.classList.add("select-box-description-markdown"),i(s.element),s.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],i=(t==null?void 0:t.description)??"",s=(t==null?void 0:t.descriptionIsMarkdown)??!1;if(i){if(s){const o=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(i,o))}else this.selectionDetailsPane.innerText=i;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){Dt.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){Dt.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){Dt.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(Dt.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){Dt.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){Dt.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){Dt.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){Dt.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=kh.toString(e.keyCode);let i=-1;for(let s=0;s<this.options.length-1;s++)if(i=(s+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),Dt.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};Wd.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,Wd.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,Wd.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;let p6=Wd;class UBe extends G{constructor(e,t,i,s){super(),this.selected=0,this.selectBoxOptions=s||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new $),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(qs.addTarget(this.selectElement)),[yi.Tap].forEach(e=>{this._register(Q(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(Ji(this.selectElement,"click",e=>{Dt.stop(e,!0)})),this._register(Ji(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(Ji(this.selectElement,"keydown",e=>{let t=!1;Lt?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!Vi(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((i,s)=>{this.selectElement.add(this.createOption(i.text,s,i.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,i){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!i,s}}class $Be extends Ba{constructor(e,t,i,s,o){super(),Lt&&!(o!=null&&o.useCustomDrawn)?this.selectBoxDelegate=new UBe(e,t,s,o):this.selectBoxDelegate=new p6(e,t,i,s,o),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class Pc extends G{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof Or&&this._register(t.onDidChange(s=>{this.element&&this.handleActionChangeEvent(s)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new pv)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(qs.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,ul&&this._register(Q(e,fe.DRAG_START,s=>{var o;return(o=s.dataTransfer)==null?void 0:o.setData(Xk.TEXT,this._action.label)}))),this._register(Q(t,yi.Tap,s=>this.onClick(s,!0))),this._register(Q(t,fe.MOUSE_DOWN,s=>{i||Dt.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),Lt&&this._register(Q(t,fe.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(Q(t,fe.CLICK,s=>{Dt.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(Q(t,fe.DBLCLICK,s=>{Dt.stop(s,!0)})),[fe.MOUSE_UP,fe.MOUSE_OUT].forEach(s=>{this._register(Q(t,s,o=>{Dt.stop(o),t.classList.remove("active")}))})}onClick(e,t=!1){var s;Dt.stop(e,!0);const i=ga(this._context)?(s=this.options)!=null&&s.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var t;if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),(t=this.options.hoverDelegate)!=null&&t.showNativeHover)this.element.title=e;else if(!this.customHover&&e!==""){const i=this.options.hoverDelegate??Wo("element");this.customHover=this._store.add(_d().setupManagedHover(i,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class FC extends Pc{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),zt(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const i=document.createElement("span");i.classList.add("keybinding"),i.textContent=this.options.keybinding,this.element.appendChild(i)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Ss.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=_({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)==null||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)==null||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)==null||t.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class KBe extends Pc{constructor(e,t,i,s,o,r,a){super(e,t),this.selectBox=new $Be(i,s,o,r,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)==null||e.focus()}blur(){var e;(e=this.selectBox)==null||e.blur()}render(e){this.selectBox.render(e)}}class qBe extends pv{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new $),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=ae(e,ge(".monaco-dropdown")),this._label=ae(this._element,ge(".dropdown-label"));let i=t.labelRenderer;i||(i=o=>(o.textContent=t.label||"",null));for(const o of[fe.CLICK,fe.MOUSE_DOWN,yi.Tap])this._register(Q(this.element,o,r=>Dt.stop(r,!0)));for(const o of[fe.MOUSE_DOWN,yi.Tap])this._register(Q(this._label,o,r=>{EK(r)&&(r.detail>1||r.button!==0)||(this.visible?this.hide():this.show())}));this._register(Q(this._label,fe.KEY_UP,o=>{const r=new _i(o);(r.equals(3)||r.equals(10))&&(Dt.stop(o,!0),this.visible?this.hide():this.show())}));const s=i(this._label);s&&this._register(s),this._register(qs.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class GBe extends qBe{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class z2 extends Pc{constructor(e,t,i,s=Object.create(null)){super(null,e,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new $),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=o=>{this.element=ae(o,ge("a.action-label"));let r=[];return typeof this.options.classNames=="string"?r=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(r=this.options.classNames),r.find(a=>a==="icon")||r.push("codicon"),this.element.classList.add(...r),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(_d().setupManagedHover(this.options.hoverDelegate??Wo("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new GBe(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{var r;(r=this.element)==null||r.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const o=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return o.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)==null||e.show()}updateEnabled(){var t,i;const e=!this.action.enabled;(t=this.actionItem)==null||t.classList.toggle("disabled",e),(i=this.element)==null||i.classList.toggle("disabled",e)}}function ZBe(n){return n&&typeof n=="object"&&typeof n.original=="string"&&typeof n.value=="string"}function YBe(n){return n?n.condition!==void 0:!1}var by;(function(n){n[n.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",n[n.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(by||(by={}));var _w;(function(n){n[n.None=0]="None",n[n.Initialized=1]="Initialized",n[n.Closed=2]="Closed"})(_w||(_w={}));const hA=class hA extends G{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new uv),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=_w.None,this.cache=new Map,this.flushDelayer=this._register(new ihe(hA.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,i;this._onDidChangeStorage.pause();try{(t=e.changed)==null||t.forEach((s,o)=>this.acceptExternal(o,s)),(i=e.deleted)==null||i.forEach(s=>this.acceptExternal(s,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===_w.Closed)return;let i=!1;ga(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const i=this.cache.get(e);return ga(i)?t:i}getBoolean(e,t){const i=this.get(e);return ga(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return ga(i)?t:parseInt(i,10)}async set(e,t,i=!1){if(this.state===_w.Closed)return;if(ga(t))return this.delete(e,i);const s=as(t)||Array.isArray(t)?N5e(t):String(t);if(this.cache.get(e)!==s)return this.cache.set(e,s),this.pendingInserts.set(e,s),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()}async delete(e,t=!1){if(!(this.state===_w.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())==null||t()})}async doFlush(e){return this.options.hint===by.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}};hA.DEFAULT_FLUSH_DELAY=100;let Hx=hA;class Z3{constructor(){this.onDidChangeItemsExternal=pe.None,this.items=new Map}async updateItems(e){var t,i;(t=e.insert)==null||t.forEach((s,o)=>this.items.set(o,s)),(i=e.delete)==null||i.forEach(s=>this.items.delete(s))}}const RT="__$__targetStorageMarker",ac=kt("storageService");var Jk;(function(n){n[n.NONE=0]="NONE",n[n.SHUTDOWN=1]="SHUTDOWN"})(Jk||(Jk={}));function XBe(n){const e=n.get(RT);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}const fA=class fA extends G{constructor(e={flushInterval:fA.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new uv),this._onDidChangeTarget=this._register(new uv),this._onWillSaveState=this._register(new $),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return pe.filter(this._onDidChangeValue.event,s=>s.scope===e&&(t===void 0||s.key===t),i)}emitDidChangeValue(e,t){const{key:i,external:s}=t;if(i===RT){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:s})}get(e,t,i){var s;return(s=this.getStorage(t))==null?void 0:s.get(e,i)}getBoolean(e,t,i){var s;return(s=this.getStorage(t))==null?void 0:s.getBoolean(e,i)}getNumber(e,t,i){var s;return(s=this.getStorage(t))==null?void 0:s.getNumber(e,i)}store(e,t,i,s,o=!1){if(ga(t)){this.remove(e,i,o);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,i,s),(r=this.getStorage(i))==null||r.set(e,t,o)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,t,void 0),(s=this.getStorage(t))==null||s.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,s=!1){var r,a;const o=this.getKeyTargets(t);typeof i=="number"?o[e]!==i&&(o[e]=i,(r=this.getStorage(t))==null||r.set(RT,JSON.stringify(o),s)):typeof o[e]=="number"&&(delete o[e],(a=this.getStorage(t))==null||a.set(RT,JSON.stringify(o),s))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?XBe(t):Object.create(null)}};fA.DEFAULT_FLUSH_INTERVAL=60*1e3;let _6=fA;class QBe extends _6{constructor(){super(),this.applicationStorage=this._register(new Hx(new Z3,{hint:by.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new Hx(new Z3,{hint:by.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new Hx(new Z3,{hint:by.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function JBe(n,e){const t={...e};for(const i in n){const s=n[i];t[i]=s!==void 0?ye(s):void 0}return t}const e7e={keybindingLabelBackground:ye(U4e),keybindingLabelForeground:ye($4e),keybindingLabelBorder:ye(K4e),keybindingLabelBottomBorder:ye(q4e),keybindingLabelShadow:ye(E1)},t7e={buttonForeground:ye(Pfe),buttonSeparator:ye(D4e),buttonBackground:ye(XS),buttonHoverBackground:ye(T4e),buttonSecondaryForeground:ye(M4e),buttonSecondaryBackground:ye(BW),buttonSecondaryHoverBackground:ye(P4e),buttonBorder:ye(R4e)},i7e={progressBarBackground:ye(UOe)},U2={inputActiveOptionBorder:ye(U4),inputActiveOptionForeground:ye($4),inputActiveOptionBackground:ye(II)};ye(QS),ye(A4e),ye(O4e),ye(F4e),ye(B4e),ye(W4e),ye(H4e);ye(V4e),ye(z4e),ye(j4e);ye(Ca),ye(V4),ye(E1),ye(At),ye(u4e),ye(h4e),ye(f4e),ye(jOe);const $2={inputBackground:ye(FW),inputForeground:ye(Rfe),inputBorder:ye(Mfe),inputValidationInfoBorder:ye(C4e),inputValidationInfoBackground:ye(w4e),inputValidationInfoForeground:ye(y4e),inputValidationWarningBorder:ye(L4e),inputValidationWarningBackground:ye(S4e),inputValidationWarningForeground:ye(x4e),inputValidationErrorBorder:ye(I4e),inputValidationErrorBackground:ye(k4e),inputValidationErrorForeground:ye(N4e)},n7e={listFilterWidgetBackground:ye(rFe),listFilterWidgetOutline:ye(aFe),listFilterWidgetNoMatchesOutline:ye(lFe),listFilterWidgetShadow:ye(cFe),inputBoxStyles:$2,toggleStyles:U2},Nge={badgeBackground:ye(IT),badgeForeground:ye(zOe),badgeBorder:ye(At)};ye(c4e),ye(l4e),ye(iee),ye(iee),ye(d4e);const Xv={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:ye(G4e),listFocusForeground:ye(Z4e),listFocusOutline:ye(Y4e),listActiveSelectionBackground:ye(bv),listActiveSelectionForeground:ye(Vk),listActiveSelectionIconForeground:ye(Afe),listFocusAndSelectionOutline:ye(X4e),listFocusAndSelectionBackground:ye(bv),listFocusAndSelectionForeground:ye(Vk),listInactiveSelectionBackground:ye(Q4e),listInactiveSelectionIconForeground:ye(eFe),listInactiveSelectionForeground:ye(J4e),listInactiveFocusBackground:ye(tFe),listInactiveFocusOutline:ye(iFe),listHoverBackground:ye(Ofe),listHoverForeground:ye(Ffe),listDropOverBackground:ye(nFe),listDropBetweenBackground:ye(sFe),listSelectionOutline:ye(Ai),listHoverOutline:ye(Ai),treeIndentGuidesStroke:ye(Bfe),treeInactiveIndentGuidesStroke:ye(dFe),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:ye(ZK),tableColumnsBorder:ye(uFe),tableOddRowsBackgroundColor:ye(hFe)};function Qv(n){return JBe(n,Xv)}const s7e={selectBackground:ye(K4),selectListBackground:ye(E4e),selectForeground:ye(tq),decoratorRightForeground:ye(Wfe),selectBorder:ye(iq),focusBorder:ye(Eu),listFocusBackground:ye(zk),listInactiveSelectionIconForeground:ye(nq),listFocusForeground:ye(jk),listFocusOutline:OOe(Ai,oe.transparent.toString()),listHoverBackground:ye(Ofe),listHoverForeground:ye(Ffe),listHoverOutline:ye(Ai),selectListBorder:ye(YK),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},o7e={shadowColor:ye(E1),borderColor:ye(fFe),foregroundColor:ye(gFe),backgroundColor:ye(mFe),selectionForegroundColor:ye(pFe),selectionBackgroundColor:ye(_Fe),selectionBorderColor:ye(bFe),separatorColor:ye(vFe),scrollbarShadow:ye(ZK),scrollbarSliderBackground:ye(xfe),scrollbarSliderHoverBackground:ye(Lfe),scrollbarSliderActiveBackground:ye(kfe)};var oF=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},er=function(n,e){return function(t,i){e(t,i,n)}};function r7e(n,e,t,i){let s,o,r;if(Array.isArray(n))r=n,s=e,o=t;else{const c=e;r=n.getActions(c),s=t,o=i}const a=Ah.getInstance(),l=a.keyStatus.altKey||(As||Mo)&&a.keyStatus.shiftKey;Ige(r,s,l,o?c=>c===o:c=>c==="navigation")}function rF(n,e,t,i,s,o){let r,a,l,c,d;if(Array.isArray(n))d=n,r=e,a=t,l=i,c=s;else{const h=e;d=n.getActions(h),r=t,a=i,l=s,c=o}Ige(d,r,!1,typeof a=="string"?h=>h===a:a,l,c)}function Ige(n,e,t,i=r=>r==="navigation",s=()=>!1,o=!1){let r,a;Array.isArray(e)?(r=e,a=e):(r=e.primary,a=e.secondary);const l=new Set;for(const[c,d]of n){let u;i(c)?(u=r,u.length>0&&o&&u.push(new Ss)):(u=a,u.length>0&&u.push(new Ss));for(let h of d){t&&(h=h instanceof Fr&&h.alt?h.alt:h);const f=u.push(h);h instanceof SC&&l.add({group:c,action:h,index:f-1})}}for(const{group:c,action:d,index:u}of l){const h=i(c)?r:a,f=d.actions;s(d,c,h.length)&&h.splice(u,1,...f)}}let Xm=class extends FC{constructor(e,t,i,s,o,r,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable,keybinding:t==null?void 0:t.keybinding,hoverDelegate:t==null?void 0:t.hoverDelegate}),this._options=t,this._keybindingService=i,this._notificationService=s,this._contextKeyService=o,this._themeService=r,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new es),this._altKey=Ah.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{var o;const s=!!((o=this._menuItemAction.alt)!=null&&o.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);s!==this._wantsAltCommand&&(this._wantsAltCommand=s,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(Q(e,"mouseleave",s=>{t=!1,i()})),this._register(Q(e,"mouseenter",s=>{t=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var o;const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let s=t?_("titleAndKb","{0} ({1})",i,t):i;if(!this._wantsAltCommand&&((o=this._menuItemAction.alt)!=null&&o.enabled)){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?_("titleAndKb","{0} ({1})",r,l):r;s=_("titleAndKbAndAlt",`{0}
[{1}] {2}`,s,vq.modifierLabels[Mr].altKey,c)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const s=this._commandAction.checked&&YBe(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(s)if(Ke.isThemeIcon(s)){const o=Ke.asClassNameArray(s);i.classList.add(...o),this._itemClassDispose.value=Pe(()=>{i.classList.remove(...o)})}else i.style.backgroundImage=kC(this._themeService.getColorTheme().type)?bf(s.dark):bf(s.light),i.classList.add("icon"),this._itemClassDispose.value=ql(Pe(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};Xm=oF([er(2,ei),er(3,wn),er(4,qe),er(5,Vn),er(6,Zr),er(7,Yr)],Xm);class Sq extends Xm{render(e){var t;this.options.label=!0,this.options.icon=!1,super.render(e),e.classList.add("text-only"),e.classList.toggle("use-comma",((t=this._options)==null?void 0:t.useComma)??!1)}updateLabel(){var t;const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const i=Sq._symbolPrintEnter(e);(t=this._options)!=null&&t.conversational?this.label.textContent=_({key:"content2",comment:['A label with keybindg like "ESC to dismiss"']},"{1} to {0}",this._action.label,i):this.label.textContent=_({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,i)}}static _symbolPrintEnter(e){var t;return(t=e.getLabel())==null?void 0:t.replace(/\benter\b/gi,"⏎").replace(/\bEscape\b/gi,"Esc")}}let b6=class extends z2{constructor(e,t,i,s,o){const r={...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!1,classNames:(t==null?void 0:t.classNames)??(Ke.isThemeIcon(e.item.icon)?Ke.asClassName(e.item.icon):void 0),keybindingProvider:(t==null?void 0:t.keybindingProvider)??(a=>i.lookupKeybinding(a.id))};super(e,{getActions:()=>e.actions},s,r),this._keybindingService=i,this._contextMenuService=s,this._themeService=o}render(e){super.render(e),zt(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!Ke.isThemeIcon(i)){this.element.classList.add("icon");const s=()=>{this.element&&(this.element.style.backgroundImage=kC(this._themeService.getColorTheme().type)?bf(i.dark):bf(i.light))};s(),this._register(this._themeService.onDidColorThemeChange(()=>{s()}))}}};b6=oF([er(2,ei),er(3,Zr),er(4,Vn)],b6);let v6=class extends Pc{constructor(e,t,i,s,o,r,a,l){super(null,e),this._keybindingService=i,this._notificationService=s,this._contextMenuService=o,this._menuService=r,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c;const d=t!=null&&t.persistLastActionId?l.get(this._storageKey,1):void 0;d&&(c=e.actions.find(h=>d===h.id)),c||(c=e.actions[0]),this._defaultAction=this._instaService.createInstance(Xm,c,{keybinding:this._getDefaultActionKeybindingLabel(c)});const u={keybindingProvider:h=>this._keybindingService.lookupKeybinding(h.id),...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!0,classNames:(t==null?void 0:t.classNames)??["codicon","codicon-chevron-down"],actionRunner:(t==null?void 0:t.actionRunner)??new pv};this._dropdown=new z2(e,e.actions,this._contextMenuService,u),this._register(this._dropdown.actionRunner.onDidRun(h=>{h.action instanceof Fr&&this.update(h.action)}))}update(e){var t;(t=this._options)!=null&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Xm,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends pv{async runAction(i,s){await i.run(void 0)}},this._container&&this._defaultAction.render(DK(this._container,ge(".action-container")))}_getDefaultActionKeybindingLabel(e){var i;let t;if((i=this._options)!=null&&i.renderKeybindingWithDefaultActionLabel){const s=this._keybindingService.lookupKeybinding(e.id);s&&(t=`(${s.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=ge(".action-container");this._defaultAction.render(ae(this._container,t)),this._register(Q(t,fe.KEY_DOWN,s=>{const o=new _i(s);o.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),o.stopPropagation())}));const i=ge(".dropdown-action-container");this._dropdown.render(ae(this._container,i)),this._register(Q(i,fe.KEY_DOWN,s=>{var r;const o=new _i(s);o.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(r=this._defaultAction.element)==null||r.focus(),o.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};v6=oF([er(2,ei),er(3,wn),er(4,Zr),er(5,Oa),er(6,Ae),er(7,ac)],v6);let w6=class extends KBe{constructor(e,t){super(null,e,e.actions.map(i=>({text:i.id===Ss.ID?"─────────":i.label,isDisabled:!i.enabled})),0,t,s7e,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(i=>i.checked)))}render(e){super.render(e),e.style.borderColor=ye(iq)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};w6=oF([er(1,Df)],w6);function Ege(n,e,t){return e instanceof Fr?n.createInstance(Xm,e,t):e instanceof fy?e.item.isSelection?n.createInstance(w6,e):e.item.rememberDefaultAction?n.createInstance(v6,e,{...t,persistLastActionId:!0}):n.createInstance(b6,e,t):void 0}class Ea extends G{constructor(e,t={}){var o,r;super(),this._actionRunnerDisposables=this._register(new ne),this.viewItemDisposables=this._register(new uK),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new $),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new $({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new $),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new $),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:((o=this.options.triggerKeys)==null?void 0:o.keyDown)??!1,keys:((r=this.options.triggerKeys)==null?void 0:r.keys)??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(OC()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new pv,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(a=>this._onDidRun.fire(a))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(a=>this._onWillRun.fire(a))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let i,s;switch(this._orientation){case 0:i=[15],s=[17];break;case 1:i=[16],s=[18],this.domNode.className+=" vertical";break}this._register(Q(this.domNode,fe.KEY_DOWN,a=>{const l=new _i(a);let c=!0;const d=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;i&&(l.equals(i[0])||l.equals(i[1]))?c=this.focusPrevious():s&&(l.equals(s[0])||l.equals(s[1]))?c=this.focusNext():l.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():l.equals(14)?c=this.focusFirst():l.equals(13)?c=this.focusLast():l.equals(2)&&d instanceof Pc&&d.trapsArrowNavigation?c=this.focusNext(void 0,!0):this.isTriggerKeyEvent(l)?this._triggerKeys.keyDown?this.doTrigger(l):this.triggerKeyDown=!0:c=!1,c&&(l.preventDefault(),l.stopPropagation())})),this._register(Q(this.domNode,fe.KEY_UP,a=>{const l=new _i(a);this.isTriggerKeyEvent(l)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(l)),l.preventDefault(),l.stopPropagation()):(l.equals(2)||l.equals(1026)||l.equals(16)||l.equals(18)||l.equals(15)||l.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(ld(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Ms()===this.domNode||!Zn(Ms(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(i=>i instanceof Pc&&i.isEnabled());t instanceof Pc&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Pc&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){var e,t;for(let i=0;i<this.actionsList.children.length;i++){const s=this.actionsList.children[i];if(Zn(Ms(),s)){this.focusedItem=i,(t=(e=this.viewItems[this.focusedItem])==null?void 0:e.showHover)==null||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])==null?void 0:t.action;if(Qn(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let i=0;i<this.actionsList.childNodes.length;i++)if(this.actionsList.childNodes[i]===e)return this.viewItems[i].action}}push(e,t={}){const i=Array.isArray(e)?e:[e];let s=Hm(t.index)?t.index:null;i.forEach(o=>{const r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o,l)),a||(a=new FC(this.context,o,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,Q(r,fe.CONTEXT_MENU,c=>{Dt.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(r),this.focusable&&a instanceof Pc&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(r),this.viewItems.push(a)):(this.actionsList.insertBefore(r,this.actionsList.children[s]),this.viewItems.splice(s,0,a),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=gi(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),ws(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const s=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let s;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,s=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!s.isEnabled()||s.action.id===Ss.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Ss.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){var o,r;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((o=this.viewItems[this.previouslyFocusedItem])==null||o.blur());const s=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(s){let a=!0;wk(s.focus)||(a=!1),this.options.focusOnlyEnabledItems&&wk(s.isEnabled)&&!s.isEnabled()&&(a=!1),s.action.id===Ss.ID&&(a=!1),a?(i||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),a&&((r=s.showHover)==null||r.call(s))}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Pc){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=gi(this.viewItems),this.getContainer().remove(),super.dispose()}}const y6=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,Y3=/(&amp;)?(&amp;)([^\s&])/g;var K2;(function(n){n[n.Right=0]="Right",n[n.Left=1]="Left"})(K2||(K2={}));var C6;(function(n){n[n.Above=0]="Above",n[n.Below=1]="Below"})(C6||(C6={}));class vy extends Ea{constructor(e,t,i,s){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const o=document.createElement("div");o.classList.add("monaco-menu"),o.setAttribute("role","presentation"),super(o,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,i,r),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Lt||Mo?[10]:[]],keyDown:!0}}),this.menuStyles=s,this.menuElement=o,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,s),this._register(qs.addTarget(o)),this._register(Q(o,fe.KEY_DOWN,c=>{new _i(c).equals(2)&&c.preventDefault()})),i.enableMnemonics&&this._register(Q(o,fe.KEY_DOWN,c=>{const d=c.key.toLocaleLowerCase();if(this.mnemonics.has(d)){Dt.stop(c,!0);const u=this.mnemonics.get(d);if(u.length===1&&(u[0]instanceof Uee&&u[0].container&&this.focusItemByElement(u[0].container),u[0].onClick(c)),u.length>1){const h=u.shift();h&&h.container&&(this.focusItemByElement(h.container),u.push(h)),this.mnemonics.set(d,u)}}})),Mo&&this._register(Q(o,fe.KEY_DOWN,c=>{const d=new _i(c);d.equals(14)||d.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Dt.stop(c,!0)):(d.equals(13)||d.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Dt.stop(c,!0))})),this._register(Q(this.domNode,fe.MOUSE_OUT,c=>{const d=c.relatedTarget;Zn(d,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(Q(this.actionsList,fe.MOUSE_OVER,c=>{let d=c.target;if(!(!d||!Zn(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(d),u!==this.focusedItem&&this.updateFocus()}}})),this._register(qs.addTarget(this.actionsList)),this._register(Q(this.actionsList,yi.Tap,c=>{let d=c.initialTarget;if(!(!d||!Zn(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(d),u!==this.focusedItem&&this.updateFocus()}}}));const r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new EI(o,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,s),this._register(Q(o,yi.Change,c=>{Dt.stop(c,!0);const d=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:d-c.translationY})})),this._register(Q(a,fe.MOUSE_UP,c=>{c.preventDefault()}));const l=je(e);o.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,d)=>{var u;return(u=i.submenuIds)!=null&&u.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof Ss&&(d===t.length-1||d===0||t[d-1]instanceof Ss))}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof $ee)).forEach((c,d,u)=>{c.updatePositionInSet(d+1,u.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(u2(e)?this.styleSheet=Ta(e):(vy.globalStyleSheet||(vy.globalStyleSheet=Ta()),this.styleSheet=vy.globalStyleSheet)),this.styleSheet.textContent=l7e(t,u2(e))}styleScrollElement(e,t){const i=t.foregroundColor??"",s=t.backgroundColor??"",o=t.borderColor?`1px solid ${t.borderColor}`:"",r="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=o,e.style.borderRadius=r,e.style.color=i,e.style.backgroundColor=s,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof Ss)return new $ee(t.context,e,{icon:!0},this.menuStyles);if(e instanceof SC){const s=new Uee(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const o=s.getMnemonic();if(o&&s.isEnabled()){let r=[];this.mnemonics.has(o)&&(r=this.mnemonics.get(o)),r.push(s),this.mnemonics.set(o,r)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const r=t.getKeyBinding(e);if(r){const a=r.getLabel();a&&(s.keybinding=a)}}const o=new Dge(t.context,e,s,this.menuStyles);if(t.enableMnemonics){const r=o.getMnemonic();if(r&&o.isEnabled()){let a=[];this.mnemonics.has(r)&&(a=this.mnemonics.get(r)),a.push(o),this.mnemonics.set(r,a)}}return o}}}class Dge extends Pc{constructor(e,t,i,s){if(i.isMenu=!0,super(t,t,i),this.menuStyle=s,this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){const o=this.action.label;if(o){const r=y6.exec(o);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new li(()=>{this.element&&(this._register(Q(this.element,fe.MOUSE_UP,o=>{if(Dt.stop(o,!0),ul){if(new Vl(je(this.element),o).rightButton)return;this.onClick(o)}else setTimeout(()=>{this.onClick(o)},0)})),this._register(Q(this.element,fe.CONTEXT_MENU,o=>{Dt.stop(o,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=ae(this.element,ge("a.action-menu-item")),this._action.id===Ss.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=ae(this.item,ge("span.menu-item-check"+Ke.asCSSSelector(he.menuSelection))),this.check.setAttribute("role","none"),this.label=ae(this.item,ge("span.action-label")),this.options.label&&this.options.keybinding&&(ae(this.item,ge("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)==null||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){ws(this.label);let t=fq(this.action.label);if(t){const i=a7e(t);this.options.enableMnemonics||(t=i),this.label.setAttribute("aria-label",i.replace(/&&/g,"&"));const s=y6.exec(t);if(s){t=Rx(t),Y3.lastIndex=0;let o=Y3.exec(t);for(;o&&o[1];)o=Y3.exec(t);const r=a=>a.replace(/&amp;&amp;/g,"&amp;");o?this.label.append(wI(r(t.substr(0,o.index))," "),ge("u",{"aria-hidden":"true"},o[3]),Kue(r(t.substr(o.index+o[0].length))," ")):this.label.innerText=r(t).trim(),(e=this.item)==null||e.setAttribute("aria-keyshortcuts",(s[1]?s[1]:s[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",o=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=s,this.item.style.outlineOffset=o),this.check&&(this.check.style.color=t??"")}}class Uee extends Dge{constructor(e,t,i,s,o){super(e,e,s,o),this.submenuActions=t,this.parentData=i,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new ne),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:{horizontal:K2.Right,vertical:C6.Below},this.showScheduler=new li(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new li(()=>{this.element&&!Zn(Ms(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=ae(this.item,ge("span.submenu-indicator"+Ke.asCSSSelector(he.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(Q(this.element,fe.KEY_UP,t=>{const i=new _i(t);(i.equals(17)||i.equals(3))&&(Dt.stop(t,!0),this.createSubmenu(!0))})),this._register(Q(this.element,fe.KEY_DOWN,t=>{const i=new _i(t);Ms()===this.item&&(i.equals(17)||i.equals(3))&&Dt.stop(t,!0)})),this._register(Q(this.element,fe.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(Q(this.element,fe.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(Q(this.element,fe.FOCUS_OUT,t=>{this.element&&!Zn(Ms(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){Dt.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,s){const o={top:0,left:0};return o.left=gw(e.width,t.width,{position:s.horizontal===K2.Right?0:1,offset:i.left,size:i.width}),o.left>=i.left&&o.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(o.left=i.left+10),i.top+=10,i.height=0),o.top=gw(e.height,t.height,{position:0,offset:i.top,size:0}),o.top+t.height===i.top&&o.top+i.height+t.height<=e.height&&(o.top+=i.height),o}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=ae(this.element,ge("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=je(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new vy(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new nW],this.submenuOptions,this.menuStyle);const s=this.element.getBoundingClientRect(),o={top:s.top-i,left:s.left,height:s.height+2*i,width:s.width},r=this.submenuContainer.getBoundingClientRect(),a=je(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new ni(a.innerWidth,a.innerHeight),ni.lift(r),o,this.expandDirection);this.submenuContainer.style.left=`${c-r.left}px`,this.submenuContainer.style.top=`${l-r.top}px`,this.submenuDisposables.add(Q(this.submenuContainer,fe.KEY_UP,d=>{new _i(d).equals(15)&&(Dt.stop(d,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(Q(this.submenuContainer,fe.KEY_DOWN,d=>{new _i(d).equals(15)&&Dt.stop(d,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)==null||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class $ee extends FC{constructor(e,t,i,s){super(e,t,i),this.menuStyles=s}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function a7e(n){const e=y6,t=e.exec(n);if(!t)return n;const i=!t[1];return n.replace(e,i?"$2$3":"").trim()}function Kee(n){const e=Hue()[n.id];return`.codicon-${n.id}:before { content: '\\${e.toString(16)}'; }`}function l7e(n,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${Kee(he.menuSelection)}
${Kee(he.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const i=n.scrollbarShadow;i&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${i} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${i} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${i} 6px 6px 6px -6px inset;
				}
			`);const s=n.scrollbarSliderBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${s};
				}
			`);const o=n.scrollbarSliderHoverBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${o};
				}
			`);const r=n.scrollbarSliderActiveBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return t}class c7e{constructor(e,t,i,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=s,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=Ms();let i;const s=Qn(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:o=>{var d;this.lastContainer=o;const r=e.getMenuClassName?e.getMenuClassName():"";r&&(o.className+=" "+r),this.options.blockMouse&&(this.block=o.appendChild(ge(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(d=this.blockDisposable)==null||d.dispose(),this.blockDisposable=Q(this.block,fe.MOUSE_DOWN,u=>u.stopPropagation()));const a=new ne,l=e.actionRunner||new pv;l.onWillRun(u=>this.onActionRun(u,!e.skipTelemetry),this,a),l.onDidRun(this.onDidActionRun,this,a),i=new vy(o,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:u=>this.keybindingService.lookupKeybinding(u.id)},o7e),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);const c=je(o);return a.add(Q(c,fe.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(Q(c,fe.MOUSE_DOWN,u=>{if(u.defaultPrevented)return;const h=new Vl(c,u);let f=h.target;if(!h.rightButton){for(;f;){if(f===o)return;f=f.parentElement}this.contextViewService.hideContextView(!0)}})),ql(a,i)},focus:()=>{i==null||i.focus(!!e.autoSelectFirstItem)},onHide:o=>{var r,a,l;(r=e.onHide)==null||r.call(e,!!o),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)==null||a.dispose(),this.blockDisposable=null,this.lastContainer&&(Ms()===this.lastContainer||Zn(Ms(),this.lastContainer))&&((l=this.focusToReturn)==null||l.focus()),this.lastContainer=null}},s,!!s)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!wl(e.error)&&this.notificationService.error(e.error)}}var d7e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},S0=function(n,e){return function(t,i){e(t,i,n)}};let S6=class extends G{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new c7e(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,s,o,r){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=s,this.menuService=o,this.contextKeyService=r,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new $),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new $)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=x6.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{var i;(i=e.onHide)==null||i.call(e,t),this._onDidHideContextMenu.fire()}}),Ah.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};S6=d7e([S0(0,Zs),S0(1,wn),S0(2,Df),S0(3,ei),S0(4,Oa),S0(5,qe)],S6);var x6;(function(n){function e(i){return i&&i.menuId instanceof Ne}function t(i,s,o){if(!e(i))return i;const{menuId:r,menuActionOptions:a,contextKeyService:l}=i;return{...i,getActions:()=>{const c=[];if(r){const d=s.getMenuActions(r,l??o,a);r7e(d,c)}return i.getActions?Ss.join(i.getActions(),c):c}}}n.transform=t})(x6||(x6={}));var q2;(function(n){n[n.API=0]="API",n[n.USER=1]="USER"})(q2||(q2={}));var xq=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},G2=function(n,e){return function(t,i){e(t,i,n)}};let L6=class{constructor(e){this._commandService=e}async open(e,t){if(!_4(e,tt.command))return!1;if(!(t!=null&&t.allowCommands)||(typeof e=="string"&&(e=Be.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=$W(decodeURIComponent(e.query))}catch{try{i=$W(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};L6=xq([G2(0,Ci)],L6);let k6=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=Be.parse(e));const{selection:i,uri:s}=FFe(e);return e=s,e.scheme===tt.file&&(e=v5e(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t!=null&&t.fromUserGesture?q2.USER:q2.API,...t==null?void 0:t.editorOptions}},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0}};k6=xq([G2(0,Ut)],k6);let N6=class{constructor(e,t){this._openers=new So,this._validators=new So,this._resolvers=new So,this._resolvedUriTargets=new cs(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new So,this._defaultExternalOpener={openExternal:async i=>(Y8(i,tt.http,tt.https)?xhe(i):ui.location.href=i,!0)},this._openers.push({open:async(i,s)=>s!=null&&s.openExternal||Y8(i,tt.mailto,tt.http,tt.https,tt.vsls)?(await this._doOpenExternal(i,s),!0):!1}),this._openers.push(new L6(t)),this._openers.push(new k6(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){const i=typeof e=="string"?Be.parse(e):e,s=this._resolvedUriTargets.get(i)??e;for(const o of this._validators)if(!await o.shouldOpen(s,t))return!1;for(const o of this._openers)if(await o.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const s=await i.resolveExternalUri(e,t);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,e),s}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i=typeof e=="string"?Be.parse(e):e;let s;try{s=(await this.resolveExternalUri(i,t)).resolved}catch{s=i}let o;if(typeof e=="string"&&i.toString()===s.toString()?o=e:o=encodeURI(s.toString(!0)),t!=null&&t.allowContributedOpeners){const r=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(o,{sourceUri:i,preferredOpenerId:r},ht.None))return!0}return this._defaultExternalOpener.openExternal(o,{sourceUri:i},ht.None)}dispose(){this._validators.clear()}};N6=xq([G2(0,Ut),G2(1,Ci)],N6);const fr=kt("editorWorkerService");var on;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(on||(on={}));(function(n){function e(r,a){return a-r}n.compare=e;const t=Object.create(null);t[n.Error]=_("sev.error","Error"),t[n.Warning]=_("sev.warning","Warning"),t[n.Info]=_("sev.info","Info");function i(r){return t[r]||""}n.toString=i;function s(r){switch(r){case vn.Error:return n.Error;case vn.Warning:return n.Warning;case vn.Info:return n.Info;case vn.Ignore:return n.Hint}}n.fromSeverity=s;function o(r){switch(r){case n.Error:return vn.Error;case n.Warning:return vn.Warning;case n.Info:return vn.Info;case n.Hint:return vn.Ignore}}n.toSeverity=o})(on||(on={}));var Z2;(function(n){const e="";function t(s){return i(s,!0)}n.makeKey=t;function i(s,o){const r=[e];return s.source?r.push(s.source.replace("¦","\\¦")):r.push(e),s.code?typeof s.code=="string"?r.push(s.code.replace("¦","\\¦")):r.push(s.code.value.replace("¦","\\¦")):r.push(e),s.severity!==void 0&&s.severity!==null?r.push(on.toString(s.severity)):r.push(e),s.message&&o?r.push(s.message.replace("¦","\\¦")):r.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?r.push(s.startLineNumber.toString()):r.push(e),s.startColumn!==void 0&&s.startColumn!==null?r.push(s.startColumn.toString()):r.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?r.push(s.endLineNumber.toString()):r.push(e),s.endColumn!==void 0&&s.endColumn!==null?r.push(s.endColumn.toString()):r.push(e),r.push(e),r.join("¦")}n.makeKeyOptionalMessage=i})(Z2||(Z2={}));const zu=kt("markerService"),Tge=P("editor.lineHighlightBackground",null,_("lineHighlight","Background color for the highlight of line at the cursor position.")),qee=P("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:At},_("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));P("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},_("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Ai,hcLight:Ai},_("rangeHighlightBorder","Background color of the border around highlighted ranges."));P("editor.symbolHighlightBackground",{dark:Fh,light:Fh,hcDark:null,hcLight:null},_("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Ai,hcLight:Ai},_("symbolHighlightBorder","Background color of the border around highlighted symbols."));const aF=P("editorCursor.foreground",{dark:"#AEAFAD",light:oe.black,hcDark:oe.white,hcLight:"#0F4A85"},_("caret","Color of the editor cursor.")),Lq=P("editorCursor.background",null,_("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Rge=P("editorMultiCursor.primary.foreground",aF,_("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),u7e=P("editorMultiCursor.primary.background",Lq,_("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Mge=P("editorMultiCursor.secondary.foreground",aF,_("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),h7e=P("editorMultiCursor.secondary.background",Lq,_("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),kq=P("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},_("editorWhitespaces","Color of whitespace characters in the editor.")),f7e=P("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:oe.white,hcLight:"#292929"},_("editorLineNumbers","Color of editor line numbers.")),g7e=P("editorIndentGuide.background",kq,_("editorIndentGuides","Color of the editor indentation guides."),!1,_("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),m7e=P("editorIndentGuide.activeBackground",kq,_("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,_("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),HI=P("editorIndentGuide.background1",g7e,_("editorIndentGuides1","Color of the editor indentation guides (1).")),p7e=P("editorIndentGuide.background2","#00000000",_("editorIndentGuides2","Color of the editor indentation guides (2).")),_7e=P("editorIndentGuide.background3","#00000000",_("editorIndentGuides3","Color of the editor indentation guides (3).")),b7e=P("editorIndentGuide.background4","#00000000",_("editorIndentGuides4","Color of the editor indentation guides (4).")),v7e=P("editorIndentGuide.background5","#00000000",_("editorIndentGuides5","Color of the editor indentation guides (5).")),w7e=P("editorIndentGuide.background6","#00000000",_("editorIndentGuides6","Color of the editor indentation guides (6).")),VI=P("editorIndentGuide.activeBackground1",m7e,_("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),y7e=P("editorIndentGuide.activeBackground2","#00000000",_("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),C7e=P("editorIndentGuide.activeBackground3","#00000000",_("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),S7e=P("editorIndentGuide.activeBackground4","#00000000",_("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),x7e=P("editorIndentGuide.activeBackground5","#00000000",_("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),L7e=P("editorIndentGuide.activeBackground6","#00000000",_("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),k7e=P("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Ai,hcLight:Ai},_("editorActiveLineNumber","Color of editor active line number"),!1,_("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));P("editorLineNumber.activeForeground",k7e,_("editorActiveLineNumber","Color of editor active line number"));const N7e=P("editorLineNumber.dimmedForeground",null,_("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));P("editorRuler.foreground",{dark:"#5A5A5A",light:oe.lightgrey,hcDark:oe.white,hcLight:"#292929"},_("editorRuler","Color of the editor rulers."));P("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},_("editorCodeLensForeground","Foreground color of editor CodeLens"));P("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},_("editorBracketMatchBackground","Background color behind matching brackets"));P("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:At,hcLight:At},_("editorBracketMatchBorder","Color for matching brackets boxes"));const I7e=P("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},_("editorOverviewRulerBorder","Color of the overview ruler border.")),E7e=P("editorOverviewRuler.background",null,_("editorOverviewRulerBackground","Background color of the editor overview ruler."));P("editorGutter.background",tc,_("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));P("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:oe.fromHex("#fff").transparent(.8),hcLight:At},_("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const D7e=P("editorUnnecessaryCode.opacity",{dark:oe.fromHex("#000a"),light:oe.fromHex("#0007"),hcDark:null,hcLight:null},_("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));P("editorGhostText.border",{dark:null,light:null,hcDark:oe.fromHex("#fff").transparent(.8),hcLight:oe.fromHex("#292929").transparent(.8)},_("editorGhostTextBorder","Border color of ghost text in the editor."));const T7e=P("editorGhostText.foreground",{dark:oe.fromHex("#ffffff56"),light:oe.fromHex("#0007"),hcDark:null,hcLight:null},_("editorGhostTextForeground","Foreground color of the ghost text in the editor."));P("editorGhostText.background",null,_("editorGhostTextBackground","Background color of the ghost text in the editor."));const R7e=new oe(new Wt(0,122,204,.6)),Pge=P("editorOverviewRuler.rangeHighlightForeground",R7e,_("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),M7e=P("editorOverviewRuler.errorForeground",{dark:new oe(new Wt(255,18,18,.7)),light:new oe(new Wt(255,18,18,.7)),hcDark:new oe(new Wt(255,50,50,1)),hcLight:"#B5200D"},_("overviewRuleError","Overview ruler marker color for errors.")),P7e=P("editorOverviewRuler.warningForeground",{dark:vf,light:vf,hcDark:Wk,hcLight:Wk},_("overviewRuleWarning","Overview ruler marker color for warnings.")),A7e=P("editorOverviewRuler.infoForeground",{dark:Du,light:Du,hcDark:Hk,hcLight:Hk},_("overviewRuleInfo","Overview ruler marker color for infos.")),Age=P("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},_("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),Oge=P("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},_("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Fge=P("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},_("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),Bge=P("editorBracketHighlight.foreground4","#00000000",_("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),Wge=P("editorBracketHighlight.foreground5","#00000000",_("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),Hge=P("editorBracketHighlight.foreground6","#00000000",_("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),O7e=P("editorBracketHighlight.unexpectedBracket.foreground",{dark:new oe(new Wt(255,18,18,.8)),light:new oe(new Wt(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},_("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),F7e=P("editorBracketPairGuide.background1","#00000000",_("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),B7e=P("editorBracketPairGuide.background2","#00000000",_("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),W7e=P("editorBracketPairGuide.background3","#00000000",_("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),H7e=P("editorBracketPairGuide.background4","#00000000",_("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),V7e=P("editorBracketPairGuide.background5","#00000000",_("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),j7e=P("editorBracketPairGuide.background6","#00000000",_("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),z7e=P("editorBracketPairGuide.activeBackground1","#00000000",_("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),U7e=P("editorBracketPairGuide.activeBackground2","#00000000",_("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),$7e=P("editorBracketPairGuide.activeBackground3","#00000000",_("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),K7e=P("editorBracketPairGuide.activeBackground4","#00000000",_("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),q7e=P("editorBracketPairGuide.activeBackground5","#00000000",_("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),G7e=P("editorBracketPairGuide.activeBackground6","#00000000",_("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));P("editorUnicodeHighlight.border",vf,_("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));P("editorUnicodeHighlight.background",KOe,_("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));yl((n,e)=>{const t=n.getColor(tc),i=n.getColor(Tge),s=i&&!i.isTransparent()?i:t;s&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${s}; }`)});function Z7e(n,e){const t=[],i=[];for(const s of n)e.has(s)||t.push(s);for(const s of e)n.has(s)||i.push(s);return{removed:t,added:i}}function Y7e(n,e){const t=new Set;for(const i of e)n.has(i)&&t.add(i);return t}var X7e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Gee=function(n,e){return function(t,i){e(t,i,n)}};let I6=class extends G{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new $),this._markerDecorations=new cs,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new Q7e(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var i;const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===tt.inMemory||e.uri.scheme===tt.internal||e.uri.scheme===tt.vscode)&&((i=this._markerService)==null||i.read({resource:e.uri}).map(s=>s.owner).forEach(s=>this._markerService.remove(s,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};I6=X7e([Gee(0,Ei),Gee(1,zu)],I6);class Q7e extends G{constructor(e){super(),this.model=e,this._map=new JPe,this._register(Pe(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:i}=Z7e(new Set(this._map.keys()),new Set(e));if(t.length===0&&i.length===0)return!1;const s=i.map(a=>this._map.get(a)),o=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),r=this.model.deltaDecorations(s,o);for(const a of i)this._map.delete(a);for(let a=0;a<r.length;a++)this._map.set(t[a],r[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let i=D.lift(t);if(t.severity===on.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const s=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(s===1||i.endColumn>=s)return i;const o=e.getWordAtPosition(i.getStartPosition());o&&(i=new D(i.startLineNumber,o.startColumn,i.endLineNumber,o.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&i.startLineNumber===i.endLineNumber){const s=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);s<i.endColumn&&(i=new D(i.startLineNumber,s,i.endLineNumber,i.endColumn),t.startColumn=s)}return i}_createDecorationOption(e){let t,i,s,o,r;switch(e.severity){case on.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",s=0;break;case on.Info:t="squiggly-info",i=sn(A7e),s=10,r={color:sn(g4e),position:1};break;case on.Warning:t="squiggly-warning",i=sn(P7e),s=20,r={color:sn(m4e),position:1};break;case on.Error:default:t="squiggly-error",i=sn(M7e),s=30,r={color:sn(p4e),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(o="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(o="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:Na.Right},minimap:r,zIndex:s,inlineClassName:o}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}const Nq=kt("markerDecorationsService");class Bn{static _nextVisibleColumn(e,t,i){return e===9?Bn.nextRenderTabStop(t,i):$m(e)||yK(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const s=Math.min(t-1,e.length),o=e.substring(0,s),r=new a2(o);let a=0;for(;!r.eol();){const l=r2(o,s,r.offset);r.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const s=e.length,o=new a2(e);let r=0,a=1;for(;!o.eol();){const l=r2(e,s,o.offset);o.nextGraphemeLength();const c=this._nextVisibleColumn(l,r,i),d=o.offset+1;if(c>=t){const u=t-r;return c-t<u?d:a}r=c,a=d}return s+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function J7e(n,e,t){let i=0;for(let o=0;o<n.length;o++)n.charAt(o)==="	"?i=Bn.nextIndentTabStop(i,e):i++;let s="";if(!t){const o=Math.floor(i/e);i=i%e;for(let r=0;r<o;r++)s+="	"}for(let o=0;o<i;o++)s+=" ";return s}function Iq(n,e,t){let i=fo(n);return i===-1&&(i=n.length),J7e(n.substring(0,i),e,t)+n.substring(i)}class Zee{constructor(e,t,i,s){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=s}}class e9e{constructor(e,t,i,s,o,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=s,this.nestingLevelOfEqualBracketType=o,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class t9e extends e9e{constructor(e,t,i,s,o,r,a){super(e,t,i,s,o,r),this.minVisibleColumnIndentation=a}}function i9e(n,e,t,i){return n!==t?Sn(t-n,i):Sn(0,i-e)}const xo=0;function Y2(n){return n===0}const Sa=2**26;function Sn(n,e){return n*Sa+e}function ll(n){const e=n,t=Math.floor(e/Sa),i=e-t*Sa;return new ec(t,i)}function n9e(n){return Math.floor(n/Sa)}function rn(n,e){let t=n+e;return e>=Sa&&(t=t-n%Sa),t}function s9e(n,e){return n.reduce((t,i)=>rn(t,e(i)),xo)}function Vge(n,e){return n===e}function eN(n,e){const t=n,i=e;if(i-t<=0)return xo;const o=Math.floor(t/Sa),r=Math.floor(i/Sa),a=i-r*Sa;if(o===r){const l=t-o*Sa;return Sn(0,a-l)}else return Sn(r-o,a)}function wy(n,e){return n<e}function yy(n,e){return n<=e}function ix(n,e){return n>=e}function bw(n){return Sn(n.lineNumber-1,n.column-1)}function q_(n,e){const t=n,i=Math.floor(t/Sa),s=t-i*Sa,o=e,r=Math.floor(o/Sa),a=o-r*Sa;return new D(i+1,s+1,r+1,a+1)}function o9e(n){const e=Bu(n);return Sn(e.length-1,e[e.length-1].length)}class Bh{static fromModelContentChanges(e){return e.map(i=>{const s=D.lift(i.range);return new Bh(bw(s.getStartPosition()),bw(s.getEndPosition()),o9e(i.text))}).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${ll(this.startOffset)}...${ll(this.endOffset)}) -> ${ll(this.newLength)}`}}class r9e{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>Eq.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return i===null?null:eN(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Sn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Sn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=ll(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Sn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Sn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(yy(i,e)){this.nextEditIdx++;const s=ll(i),o=ll(this.translateOldToCur(t.endOffsetBeforeObj)),r=s.lineCount-o.lineCount;this.deltaOldToNewLineCount+=r;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class Eq{static from(e){return new Eq(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=ll(t),this.endOffsetAfterObj=ll(rn(e,i)),this.offsetObj=ll(e)}}const aD=[],Ua=class Ua{static create(e,t){if(e<=128&&t.length===0){let i=Ua.cache[e];return i||(i=new Ua(e,t),Ua.cache[e]=i),i}return new Ua(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let s=i>>5;if(s===0){const r=1<<i|this.items;return r===this.items?this:Ua.create(r,this.additionalItems)}s--;const o=this.additionalItems.slice(0);for(;o.length<s;)o.push(0);return o[s]|=1<<(i&31),Ua.create(this.items,o)}merge(e){const t=this.items|e.items;if(this.additionalItems===aD&&e.additionalItems===aD)return t===this.items?this:t===e.items?e:Ua.create(t,aD);const i=[];for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const o=this.additionalItems[s]||0,r=e.additionalItems[s]||0;i.push(o|r)}return Ua.create(t,i)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}};Ua.cache=new Array(129),Ua.empty=Ua.create(0,aD);let Tr=Ua;const Yee={getKey(n){return n}};class jge{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class Dq{get length(){return this._length}constructor(e){this._length=e}}class tN extends Dq{static create(e,t,i){let s=e.length;return t&&(s=rn(s,t.length)),i&&(s=rn(s,i.length)),new tN(s,e,t,i,t?t.missingOpeningBracketIds:Tr.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,s,o){super(e),this.openingBracket=t,this.child=i,this.closingBracket=s,this.missingOpeningBracketIds=o}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new tN(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(rn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Ru extends Dq{static create23(e,t,i,s=!1){let o=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(o=rn(o,t.length),r=r.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");o=rn(o,i.length),r=r.merge(i.missingOpeningBracketIds)}return s?new a9e(o,e.listHeight+1,e,t,i,r):new iN(o,e.listHeight+1,e,t,i,r)}static getEmpty(){return new l9e(xo,0,[],Tr.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const i=t.childrenLength;if(i===0)throw new Zt;t=t.getChild(i-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const o=this.getChild(s);t=rn(t,o.length),i=i.merge(o.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,s=e;for(let o=0;o<this.childrenLength;o++){const r=this.getChild(o);r&&(i=Math.min(i,r.computeMinIndentation(s,t)),s=rn(s,r.length))}return this.cachedMinIndentation=i,i}}class iN extends Ru{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,s,o,r){super(e,t,r),this._item1=i,this._item2=s,this._item3=o}deepClone(){return new iN(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class a9e extends iN{toMutable(){return new iN(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class X2 extends Ru{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,s){super(e,t,s),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new X2(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class l9e extends X2{toMutable(){return new X2(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const c9e=[];class Tq extends Dq{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return c9e}deepClone(){return this}}class o_ extends Tq{get kind(){return 0}get missingOpeningBracketIds(){return Tr.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=ll(e),s=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,o=n9e(rn(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let a=s;a<=o;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const d=Bn.visibleColumnFromColumn(c,l,t.getOptions().tabSize);r=Math.min(r,d)}return r}}class Q2 extends Tq{static create(e,t,i){return new Q2(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return Tr.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class d9e extends Tq{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let hg=class{constructor(e,t,i,s,o){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=s,this.astNode=o}};class zge{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new u9e(this.textModel,this.bracketTokens),this._offset=xo,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Sn(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=rn(this._offset,e);const t=ll(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=rn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class u9e{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const o=this.lineTokens,r=o.getCount();let a=null;if(this.lineTokenOffset<r){const l=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=Jo.getTokenType(l)===0,d=Jo.containsBalancedBrackets(l),u=o.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<u){const h=o.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,u),m=this.bracketTokens.getSingleLanguageBracketTokens(h),p=m.regExpGlobal;if(p){p.lastIndex=0;const b=p.exec(f);b&&(a=m.getToken(b[0]),a&&(this.lineCharOffset+=b.index))}}if(i+=u-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=u}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const s=i9e(e,t,this.lineIdx,this.lineCharOffset);return new hg(s,0,-1,Tr.getEmpty(),new o_(s))}}class h9e{constructor(e,t){this.text=e,this._offset=xo,this.idx=0;const i=t.getRegExpStr(),s=i?new RegExp(i+`|
`,"gi"):null,o=[];let r,a=0,l=0,c=0,d=0;const u=[];for(let m=0;m<60;m++)u.push(new hg(Sn(0,m),0,-1,Tr.getEmpty(),new o_(Sn(0,m))));const h=[];for(let m=0;m<60;m++)h.push(new hg(Sn(1,m),0,-1,Tr.getEmpty(),new o_(Sn(1,m))));if(s)for(s.lastIndex=0;(r=s.exec(e))!==null;){const m=r.index,p=r[0];if(p===`
`)a++,l=m+1;else{if(c!==m){let b;if(d===a){const v=m-c;if(v<u.length)b=u[v];else{const w=Sn(0,v);b=new hg(w,0,-1,Tr.getEmpty(),new o_(w))}}else{const v=a-d,w=m-l;if(v===1&&w<h.length)b=h[w];else{const y=Sn(v,w);b=new hg(y,0,-1,Tr.getEmpty(),new o_(y))}}o.push(b)}o.push(t.getToken(p)),c=m+p.length,d=a}}const f=e.length;if(c!==f){const m=d===a?Sn(0,f-c):Sn(a-d,f-l);o.push(new hg(m,0,-1,Tr.getEmpty(),new o_(m)))}this.length=Sn(a,f-l),this.tokens=o}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new UTe}}class Rq{static createFromLanguage(e,t){function i(o){return t.getKey(`${o.languageId}:::${o.bracketText}`)}const s=new Map;for(const o of e.bracketsNew.openingBrackets){const r=Sn(0,o.bracketText.length),a=i(o),l=Tr.getEmpty().add(a,Yee);s.set(o.bracketText,new hg(r,1,a,l,Q2.create(r,o,l)))}for(const o of e.bracketsNew.closingBrackets){const r=Sn(0,o.bracketText.length);let a=Tr.getEmpty();const l=o.getOpeningBrackets();for(const c of l)a=a.add(i(c),Yee);s.set(o.bracketText,new hg(r,2,i(l[0]),a,Q2.create(r,o,a)))}return new Rq(s)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>f9e(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(i.kind===2&&i.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function f9e(n){let e=Da(n);return/^[\w ]+/.test(n)&&(e=`\\b${e}`),/[\w ]+$/.test(n)&&(e=`${e}\\b`),e}class Uge{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=Rq.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function g9e(n){if(n.length===0)return null;if(n.length===1)return n[0];let e=0;function t(){if(e>=n.length)return null;const r=e,a=n[r].listHeight;for(e++;e<n.length&&n[e].listHeight===a;)e++;return e-r>=2?$ge(r===0&&e===n.length?n:n.slice(r,e),!1):n[r]}let i=t(),s=t();if(!s)return i;for(let r=t();r;r=t())Xee(i,s)<=Xee(s,r)?(i=X3(i,s),s=r):s=X3(s,r);return X3(i,s)}function $ge(n,e=!1){if(n.length===0)return null;if(n.length===1)return n[0];let t=n.length;for(;t>3;){const i=t>>1;for(let s=0;s<i;s++){const o=s<<1;n[s]=Ru.create23(n[o],n[o+1],o+3===t?n[o+2]:null,e)}t=i}return Ru.create23(n[0],n[1],t>=3?n[2]:null,e)}function Xee(n,e){return Math.abs(n.listHeight-e.listHeight)}function X3(n,e){return n.listHeight===e.listHeight?Ru.create23(n,e,null,!1):n.listHeight>e.listHeight?m9e(n,e):p9e(e,n)}function m9e(n,e){n=n.toMutable();let t=n;const i=[];let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let o=i.length-1;o>=0;o--){const r=i[o];s?r.childrenLength>=3?s=Ru.create23(r.unappendChild(),s,null,!1):(r.appendChildOfSameHeight(s),s=void 0):r.handleChildrenChanged()}return s?Ru.create23(n,s,null,!1):n}function p9e(n,e){n=n.toMutable();let t=n;const i=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let s=e;for(let o=i.length-1;o>=0;o--){const r=i[o];s?r.childrenLength>=3?s=Ru.create23(s,r.unprependChild(),null,!1):(r.prependChildOfSameHeight(s),s=void 0):r.handleChildrenChanged()}return s?Ru.create23(s,n,null,!1):n}class _9e{constructor(e){this.lastOffset=xo,this.nextNodes=[e],this.offsets=[xo],this.idxs=[]}readLongestNodeAt(e,t){if(wy(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=xS(this.nextNodes);if(!i)return;const s=xS(this.offsets);if(wy(e,s))return;if(wy(s,e))if(rn(s,i.length)<=e)this.nextNodeAfterCurrent();else{const o=Q3(i);o!==-1?(this.nextNodes.push(i.getChild(o)),this.offsets.push(s),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const o=Q3(i);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(o)),this.offsets.push(s),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){const e=xS(this.offsets),t=xS(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=xS(this.nextNodes),s=Q3(i,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(i.getChild(s)),this.offsets.push(rn(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function Q3(n,e=-1){for(;;){if(e++,e>=n.childrenLength)return-1;if(n.getChild(e))return e}}function xS(n){return n.length>0?n[n.length-1]:void 0}function E6(n,e,t,i){return new b9e(n,e,t,i).parseDocument()}class b9e{constructor(e,t,i,s){if(this.tokenizer=e,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,i&&s)throw new Error("Not supported");this.oldNodeReader=i?new _9e(i):void 0,this.positionMapper=new r9e(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Tr.getEmpty(),0);return e||(e=Ru.getEmpty()),e}parseList(e,t){const i=[];for(;;){let o=this.tryReadChildFromCache(e);if(!o){const r=this.tokenizer.peek();if(!r||r.kind===2&&r.bracketIds.intersects(e))break;o=this.parseChild(e,t+1)}o.kind===4&&o.childrenLength===0||i.push(o)}return this.oldNodeReader?g9e(i):$ge(i,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!Y2(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>t!==null&&!wy(s.length,t)?!1:s.canBeReused(e));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new d9e(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new o_(i.length);const s=e.merge(i.bracketIds),o=this.parseList(s,t+1),r=this.tokenizer.peek();return r&&r.kind===2&&(r.bracketId===i.bracketId||r.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),tN.create(i.astNode,o,r.astNode)):tN.create(i.astNode,o,null)}default:throw new Error("unexpected")}}}function J2(n,e){if(n.length===0)return e;if(e.length===0)return n;const t=new gf(Qee(n)),i=Qee(e);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=t.dequeue();function o(c){if(c===void 0){const u=t.takeWhile(h=>!0)||[];return s&&u.unshift(s),u}const d=[];for(;s&&!Y2(c);){const[u,h]=s.splitAt(c);d.push(u),c=eN(u.lengthAfter,c),s=h??t.dequeue()}return Y2(c)||d.push(new Ug(!1,c,c)),d}const r=[];function a(c,d,u){if(r.length>0&&Vge(r[r.length-1].endOffset,c)){const h=r[r.length-1];r[r.length-1]=new Bh(h.startOffset,d,rn(h.newLength,u))}else r.push({startOffset:c,endOffset:d,newLength:u})}let l=xo;for(const c of i){const d=o(c.lengthBefore);if(c.modified){const u=s9e(d,f=>f.lengthBefore),h=rn(l,u);a(l,h,c.lengthAfter),l=h}else for(const u of d){const h=l;l=rn(l,u.lengthBefore),u.modified&&a(h,l,u.lengthAfter)}}return r}class Ug{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=eN(e,this.lengthAfter);return Vge(t,xo)?[this,void 0]:this.modified?[new Ug(this.modified,this.lengthBefore,e),new Ug(this.modified,xo,t)]:[new Ug(this.modified,e,e),new Ug(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${ll(this.lengthBefore)} -> ${ll(this.lengthAfter)}`}}function Qee(n){const e=[];let t=xo;for(const i of n){const s=eN(t,i.startOffset);Y2(s)||e.push(new Ug(!1,s,s));const o=eN(i.startOffset,i.endOffset);e.push(new Ug(!0,o,i.newLength)),t=i.endOffset}return e}class v9e extends G{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new $,this.denseKeyProvider=new jge,this.brackets=new Uge(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new h9e(this.textModel.getValue(),i);this.initialAstWithoutTokens=E6(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(i=>new Bh(Sn(i.fromLineNumber-1,0),Sn(i.toLineNumber,0),Sn(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=Bh.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=J2(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=J2(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const s=t,o=new zge(this.textModel,this.brackets);return E6(o,e,s,i)}getBracketsInRange(e,t){this.flushQueue();const i=Sn(e.startLineNumber-1,e.startColumn-1),s=Sn(e.endLineNumber-1,e.endColumn-1);return new V_(o=>{const r=this.initialAstWithoutTokens||this.astWithTokens;D6(r,xo,r.length,i,s,o,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const i=bw(e.getStartPosition()),s=bw(e.getEndPosition());return new V_(o=>{const r=this.initialAstWithoutTokens||this.astWithTokens,a=new w9e(o,t,this.textModel);T6(r,xo,r.length,i,s,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return qge(t,xo,t.length,bw(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return Kge(t,xo,t.length,bw(e))}}function Kge(n,e,t,i){if(n.kind===4||n.kind===2){const s=[];for(const o of n.children)t=rn(e,o.length),s.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let o=s.length-1;o>=0;o--){const{nodeOffsetStart:r,nodeOffsetEnd:a}=s[o];if(wy(r,i)){const l=Kge(n.children[o],r,a,i);if(l)return l}}return null}else{if(n.kind===3)return null;if(n.kind===1){const s=q_(e,t);return{bracketInfo:n.bracketInfo,range:s}}}return null}function qge(n,e,t,i){if(n.kind===4||n.kind===2){for(const s of n.children){if(t=rn(e,s.length),wy(i,t)){const o=qge(s,e,t,i);if(o)return o}e=t}return null}else{if(n.kind===3)return null;if(n.kind===1){const s=q_(e,t);return{bracketInfo:n.bracketInfo,range:s}}}return null}function D6(n,e,t,i,s,o,r,a,l,c,d=!1){if(r>200)return!0;e:for(;;)switch(n.kind){case 4:{const u=n.childrenLength;for(let h=0;h<u;h++){const f=n.getChild(h);if(f){if(t=rn(e,f.length),yy(e,s)&&ix(t,i)){if(ix(t,s)){n=f;continue e}if(!D6(f,e,t,i,s,o,r,0,l,c))return!1}e=t}}return!0}case 2:{const u=!c||!n.closingBracket||n.closingBracket.bracketInfo.closesColorized(n.openingBracket.bracketInfo);let h=0;if(l){let m=l.get(n.openingBracket.text);m===void 0&&(m=0),h=m,u&&(m++,l.set(n.openingBracket.text,m))}const f=n.childrenLength;for(let m=0;m<f;m++){const p=n.getChild(m);if(p){if(t=rn(e,p.length),yy(e,s)&&ix(t,i)){if(ix(t,s)&&p.kind!==1){n=p,u?(r++,a=h+1):a=h;continue e}if((u||p.kind!==1||!n.closingBracket)&&!D6(p,e,t,i,s,o,u?r+1:r,u?h+1:h,l,c,!n.closingBracket))return!1}e=t}}return l==null||l.set(n.openingBracket.text,h),!0}case 3:{const u=q_(e,t);return o(new Zee(u,r-1,0,!0))}case 1:{const u=q_(e,t);return o(new Zee(u,r-1,a-1,d))}case 0:return!0}}class w9e{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function T6(n,e,t,i,s,o,r,a){var c;if(r>200)return!0;let l=!0;if(n.kind===2){let d=0;if(a){let f=a.get(n.openingBracket.text);f===void 0&&(f=0),d=f,f++,a.set(n.openingBracket.text,f)}const u=rn(e,n.openingBracket.length);let h=-1;if(o.includeMinIndentation&&(h=n.computeMinIndentation(e,o.textModel)),l=o.push(new t9e(q_(e,t),q_(e,u),n.closingBracket?q_(rn(u,((c=n.child)==null?void 0:c.length)||xo),t):void 0,r,d,n,h)),e=u,l&&n.child){const f=n.child;if(t=rn(e,f.length),yy(e,s)&&ix(t,i)&&(l=T6(f,e,t,i,s,o,r+1,a),!l))return!1}a==null||a.set(n.openingBracket.text,d)}else{let d=e;for(const u of n.children){const h=d;if(d=rn(d,u.length),yy(h,s)&&yy(i,d)&&(l=T6(u,h,d,i,s,o,r,a),!l))return!1}}return l}class y9e extends G{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new es),this.onDidChangeEmitter=new $,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){var t;(!e.languageId||(t=this.bracketPairsTree.value)!=null&&t.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)==null||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new ne;this.bracketPairsTree.value=C9e(e.add(new v9e(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!1))||V_.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!0))||V_.empty}getBracketsInRange(e,t=!1){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)==null?void 0:i.object.getBracketsInRange(e,t))||V_.empty}findMatchingBracketUp(e,t,i){const s=this.textModel.validatePosition(t),o=this.textModel.getLanguageIdAtPosition(s.lineNumber,s.column);if(this.canBuildAST){const r=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew.getClosingBracketInfo(e);if(!r)return null;const a=this.getBracketPairsInRange(D.fromPositions(t,t)).findLast(l=>r.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const r=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(o).brackets;if(!a)return null;const l=a.textIsBracket[r];return l?lD(this._findMatchingBracketUp(l,s,J3(i))):null}}matchBracket(e,t){if(this.canBuildAST){const i=this.getBracketPairsInRange(D.fromPositions(e,e)).filter(s=>s.closingBracketRange!==void 0&&(s.openingBracketRange.containsPosition(e)||s.closingBracketRange.containsPosition(e))).findLastMaxBy(Io(s=>s.openingBracketRange.containsPosition(e)?s.openingBracketRange:s.closingBracketRange,D.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{const i=J3(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,s){const o=t.getCount(),r=t.getLanguageId(s);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=s-1;c>=0;c--){const d=t.getEndOffset(c);if(d<=a)break;if(Rd(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=s+1;c<o;c++){const d=t.getStartOffset(c);if(d>=l)break;if(Rd(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const i=e.lineNumber,s=this.textModel.tokenization.getLineTokens(i),o=this.textModel.getLineContent(i),r=s.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(r)).brackets;if(a&&!Rd(s.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,s,a,r),d=null;for(;;){const u=kl.findNextBracketInRange(a.forwardRegex,i,o,l,c);if(!u)break;if(u.startColumn<=e.column&&e.column<=u.endColumn){const h=o.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),f=this._matchFoundBracket(u,a.textIsBracket[h],a.textIsOpenBracket[h],t);if(f){if(f instanceof yh)return null;d=f}}l=u.endColumn-1}if(d)return d}if(r>0&&s.getStartOffset(r)===e.column-1){const l=r-1,c=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(l)).brackets;if(c&&!Rd(s.getStandardTokenType(l))){const{searchStartOffset:d,searchEndOffset:u}=this._establishBracketSearchOffsets(e,s,c,l),h=kl.findPrevBracketInRange(c.reversedRegex,i,o,d,u);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const f=o.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),m=this._matchFoundBracket(h,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(m)return m instanceof yh?null:m}}}return null}_matchFoundBracket(e,t,i,s){if(!t)return null;const o=i?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return o?o instanceof yh?o:[e,o]:null}_findMatchingBracketUp(e,t,i){const s=e.languageId,o=e.reversedRegex;let r=-1,a=0;const l=(c,d,u,h)=>{for(;;){if(i&&++a%100===0&&!i())return yh.INSTANCE;const f=kl.findPrevBracketInRange(o,c,d,u,h);if(!f)break;const m=d.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(m)?r++:e.isClose(m)&&r--,r===0)return f;h=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const d=this.textModel.tokenization.getLineTokens(c),u=d.getCount(),h=this.textModel.getLineContent(c);let f=u-1,m=h.length,p=h.length;c===t.lineNumber&&(f=d.findTokenIndexAtOffset(t.column-1),m=t.column-1,p=t.column-1);let b=!0;for(;f>=0;f--){const v=d.getLanguageId(f)===s&&!Rd(d.getStandardTokenType(f));if(v)b?m=d.getStartOffset(f):(m=d.getStartOffset(f),p=d.getEndOffset(f));else if(b&&m!==p){const w=l(c,h,m,p);if(w)return w}b=v}if(b&&m!==p){const v=l(c,h,m,p);if(v)return v}}return null}_findMatchingBracketDown(e,t,i){const s=e.languageId,o=e.forwardRegex;let r=1,a=0;const l=(d,u,h,f)=>{for(;;){if(i&&++a%100===0&&!i())return yh.INSTANCE;const m=kl.findNextBracketInRange(o,d,u,h,f);if(!m)break;const p=u.substring(m.startColumn-1,m.endColumn-1).toLowerCase();if(e.isOpen(p)?r++:e.isClose(p)&&r--,r===0)return m;h=m.endColumn-1}return null},c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){const u=this.textModel.tokenization.getLineTokens(d),h=u.getCount(),f=this.textModel.getLineContent(d);let m=0,p=0,b=0;d===t.lineNumber&&(m=u.findTokenIndexAtOffset(t.column-1),p=t.column-1,b=t.column-1);let v=!0;for(;m<h;m++){const w=u.getLanguageId(m)===s&&!Rd(u.getStandardTokenType(m));if(w)v||(p=u.getStartOffset(m)),b=u.getEndOffset(m);else if(v&&p!==b){const y=l(d,f,p,b);if(y)return y}v=w}if(v&&p!==b){const w=l(d,f,p,b);if(w)return w}}return null}findPrevBracket(e){var r;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((r=this.bracketPairsTree.value)==null?void 0:r.object.getFirstBracketBefore(t))||null;let i=null,s=null,o=null;for(let a=t.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a);let u=c-1,h=d.length,f=d.length;if(a===t.lineNumber){u=l.findTokenIndexAtOffset(t.column-1),h=t.column-1,f=t.column-1;const p=l.getLanguageId(u);i!==p&&(i=p,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,o=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let m=!0;for(;u>=0;u--){const p=l.getLanguageId(u);if(i!==p){if(s&&o&&m&&h!==f){const v=kl.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(v)return this._toFoundBracket(o,v);m=!1}i=p,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,o=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const b=!!s&&!Rd(l.getStandardTokenType(u));if(b)m?h=l.getStartOffset(u):(h=l.getStartOffset(u),f=l.getEndOffset(u));else if(o&&s&&m&&h!==f){const v=kl.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(v)return this._toFoundBracket(o,v)}m=b}if(o&&s&&m&&h!==f){const p=kl.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(p)return this._toFoundBracket(o,p)}}return null}findNextBracket(e){var a;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((a=this.bracketPairsTree.value)==null?void 0:a.object.getFirstBracketAfter(t))||null;const i=this.textModel.getLineCount();let s=null,o=null,r=null;for(let l=t.lineNumber;l<=i;l++){const c=this.textModel.tokenization.getLineTokens(l),d=c.getCount(),u=this.textModel.getLineContent(l);let h=0,f=0,m=0;if(l===t.lineNumber){h=c.findTokenIndexAtOffset(t.column-1),f=t.column-1,m=t.column-1;const b=c.getLanguageId(h);s!==b&&(s=b,o=this.languageConfigurationService.getLanguageConfiguration(s).brackets,r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let p=!0;for(;h<d;h++){const b=c.getLanguageId(h);if(s!==b){if(r&&o&&p&&f!==m){const w=kl.findNextBracketInRange(o.forwardRegex,l,u,f,m);if(w)return this._toFoundBracket(r,w);p=!1}s=b,o=this.languageConfigurationService.getLanguageConfiguration(s).brackets,r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const v=!!o&&!Rd(c.getStandardTokenType(h));if(v)p||(f=c.getStartOffset(h)),m=c.getEndOffset(h);else if(r&&o&&p&&f!==m){const w=kl.findNextBracketInRange(o.forwardRegex,l,u,f,m);if(w)return this._toFoundBracket(r,w)}p=v}if(r&&o&&p&&f!==m){const b=kl.findNextBracketInRange(o.forwardRegex,l,u,f,m);if(b)return this._toFoundBracket(r,b)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const f=D.fromPositions(i),m=this.getBracketPairsInRange(D.fromPositions(i,i)).findLast(p=>p.closingBracketRange!==void 0&&p.range.strictContainsRange(f));return m?[m.openingBracketRange,m.closingBracketRange]:null}const s=J3(t),o=this.textModel.getLineCount(),r=new Map;let a=[];const l=(f,m)=>{if(!r.has(f)){const p=[];for(let b=0,v=m?m.brackets.length:0;b<v;b++)p[b]=0;r.set(f,p)}a=r.get(f)};let c=0;const d=(f,m,p,b,v)=>{for(;;){if(s&&++c%100===0&&!s())return yh.INSTANCE;const w=kl.findNextBracketInRange(f.forwardRegex,m,p,b,v);if(!w)break;const y=p.substring(w.startColumn-1,w.endColumn-1).toLowerCase(),C=f.textIsBracket[y];if(C&&(C.isOpen(y)?a[C.index]++:C.isClose(y)&&a[C.index]--,a[C.index]===-1))return this._matchFoundBracket(w,C,!1,s);b=w.endColumn-1}return null};let u=null,h=null;for(let f=i.lineNumber;f<=o;f++){const m=this.textModel.tokenization.getLineTokens(f),p=m.getCount(),b=this.textModel.getLineContent(f);let v=0,w=0,y=0;if(f===i.lineNumber){v=m.findTokenIndexAtOffset(i.column-1),w=i.column-1,y=i.column-1;const S=m.getLanguageId(v);u!==S&&(u=S,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h))}let C=!0;for(;v<p;v++){const S=m.getLanguageId(v);if(u!==S){if(h&&C&&w!==y){const k=d(h,f,b,w,y);if(k)return lD(k);C=!1}u=S,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h)}const x=!!h&&!Rd(m.getStandardTokenType(v));if(x)C||(w=m.getStartOffset(v)),y=m.getEndOffset(v);else if(h&&C&&w!==y){const k=d(h,f,b,w,y);if(k)return lD(k)}C=x}if(h&&C&&w!==y){const S=d(h,f,b,w,y);if(S)return lD(S)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const s=e.getBracketInfo(i);return s?{range:t,bracketInfo:s}:null}}function C9e(n,e){return{object:n,dispose:()=>e==null?void 0:e.dispose()}}function J3(n){if(typeof n>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=n}}const gA=class gA{constructor(){this._searchCanceledBrand=void 0}};gA.INSTANCE=new gA;let yh=gA;function lD(n){return n instanceof yh?null:n}class S9e extends G{constructor(e){super(),this.textModel=e,this.colorProvider=new Gge,this.onDidChangeEmitter=new $,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,s){return s?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(r=>({id:`bracket${r.range.toString()}-${r.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(r,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:r.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new D(1,1,this.textModel.getLineCount(),1),e,t):[]}}class Gge{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}yl((n,e)=>{const t=[Age,Oge,Fge,Bge,Wge,Hge],i=new Gge;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${n.getColor(O7e)}; }`);const s=t.map(o=>n.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){const r=s[o%s.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(o)} { color: ${r}; }`)}});function cD(n){return n.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Es{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,s){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${cD(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${cD(this.oldText)}")`:`(replace@${this.oldPosition} "${cD(this.oldText)}" with "${cD(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const s=t.length;Lc(e,s,i),i+=4;for(let o=0;o<s;o++)dPe(e,t.charCodeAt(o),i),i+=2;return i}static _readString(e,t){const i=xc(e,t);return t+=4,hPe(e,t,i)}writeSize(){return 8+Es._writeStringSize(this.oldText)+Es._writeStringSize(this.newText)}write(e,t){return Lc(e,this.oldPosition,t),t+=4,Lc(e,this.newPosition,t),t+=4,t=Es._writeString(e,this.oldText,t),t=Es._writeString(e,this.newText,t),t}static read(e,t,i){const s=xc(e,t);t+=4;const o=xc(e,t);t+=4;const r=Es._readString(e,t);t+=Es._writeStringSize(r);const a=Es._readString(e,t);return t+=Es._writeStringSize(a),i.push(new Es(s,r,o,a)),t}}function x9e(n,e){return n===null||n.length===0?e:new Od(n,e).compress()}class Od{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(s.oldEnd<=i.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(i.newEnd<=s.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(s.oldPosition<i.newPosition){const[c,d]=Od._splitCurr(s,i.newPosition-s.oldPosition);this._acceptCurr(c),s=d;continue}if(i.newPosition<s.oldPosition){const[c,d]=Od._splitPrev(i,s.oldPosition-i.newPosition);this._acceptPrev(c),i=d;continue}let a,l;if(s.oldEnd===i.newEnd)a=i,l=s,i=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<i.newEnd){const[c,d]=Od._splitPrev(i,s.oldLength);a=c,l=s,i=d,s=this._getCurr(++t)}else{const[c,d]=Od._splitCurr(s,i.newLength);a=i,l=c,i=this._getPrev(++e),s=d}this._result[this._resultLen++]=new Es(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const o=Od._merge(this._result);return Od._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=Od._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Od._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Es(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Es(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),s=e.newText.substr(t);return[new Es(e.oldPosition,e.oldText,e.newPosition,i),new Es(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new Es(e.oldPosition,i,e.newPosition,e.newText),new Es(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let i=0,s=e[0];for(let o=1;o<e.length;o++){const r=e[o];s.oldEnd===r.oldPosition?s=new Es(s.oldPosition,s.oldText+r.oldText,s.newPosition,s.newText+r.newText):(t[i++]=s,s=r)}return t[i++]=s,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let i=0;for(let s=0;s<e.length;s++){const o=e[s];o.oldText!==o.newText&&(t[i++]=o)}return t}}function x0(n){return n.toString()}class ns{static create(e,t){const i=e.getAlternativeVersionId(),s=R6(e);return new ns(i,i,s,s,t,t,[])}constructor(e,t,i,s,o,r,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=s,this.beforeCursorState=o,this.afterCursorState=r,this.changes=a}append(e,t,i,s,o){t.length>0&&(this.changes=x9e(this.changes,t)),this.afterEOL=i,this.afterVersionId=s,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(Lc(e,t?t.length:0,i),i+=4,t)for(const s of t)Lc(e,s.selectionStartLineNumber,i),i+=4,Lc(e,s.selectionStartColumn,i),i+=4,Lc(e,s.positionLineNumber,i),i+=4,Lc(e,s.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const s=xc(e,t);t+=4;for(let o=0;o<s;o++){const r=xc(e,t);t+=4;const a=xc(e,t);t+=4;const l=xc(e,t);t+=4;const c=xc(e,t);t+=4,i.push(new Ie(r,a,l,c))}return t}serialize(){let e=10+ns._writeSelectionsSize(this.beforeCursorState)+ns._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let i=0;Lc(t,this.beforeVersionId,i),i+=4,Lc(t,this.afterVersionId,i),i+=4,tJ(t,this.beforeEOL,i),i+=1,tJ(t,this.afterEOL,i),i+=1,i=ns._writeSelections(t,this.beforeCursorState,i),i=ns._writeSelections(t,this.afterCursorState,i),Lc(t,this.changes.length,i),i+=4;for(const s of this.changes)i=s.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const s=xc(t,i);i+=4;const o=xc(t,i);i+=4;const r=eJ(t,i);i+=1;const a=eJ(t,i);i+=1;const l=[];i=ns._readSelections(t,i,l);const c=[];i=ns._readSelections(t,i,c);const d=xc(t,i);i+=4;const u=[];for(let h=0;h<d;h++)i=Es.read(t,i,u);return new ns(s,o,r,a,l,c,u)}}class Zge{get type(){return 0}get resource(){return Be.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,s){this.label=e,this.code=t,this.model=i,this._data=ns.create(i,s)}toString(){return(this._data instanceof ns?this._data:ns.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Be.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof ns}append(e,t,i,s,o){this._data instanceof ns&&this._data.append(e,t,i,s,o)}close(){this._data instanceof ns&&(this._data=this._data.serialize())}open(){this._data instanceof ns||(this._data=ns.deserialize(this._data))}undo(){if(Be.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof ns&&(this._data=this._data.serialize());const e=ns.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Be.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof ns&&(this._data=this._data.serialize());const e=ns.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof ns&&(this._data=this._data.serialize()),this._data.byteLength+168}}class L9e{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const s of this._editStackElementsArr){const o=x0(s.resource);this._editStackElementsMap.set(o,s)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=x0(e);return this._editStackElementsMap.has(t)}setModel(e){const t=x0(Be.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=x0(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,s,o){const r=x0(e.uri);this._editStackElementsMap.get(r).append(e,t,i,s,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=x0(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${ml(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function R6(n){return n.getEOL()===`
`?0:1}function Ch(n){return n?n instanceof Zge||n instanceof L9e:!1}class Mq{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Ch(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Ch(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(Ch(i)&&i.canAppend(this._model))return i;const s=new Zge(_("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(s,t),s}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],R6(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,s){const o=this._getOrCreateEditStackElement(e,s),r=this._model.applyEdits(t,!0),a=Mq._computeCursorState(i,r),l=r.map((c,d)=>({index:d,textChange:c.textChange}));return l.sort((c,d)=>c.textChange.oldPosition===d.textChange.oldPosition?c.index-d.index:c.textChange.oldPosition-d.textChange.oldPosition),o.append(this._model,l.map(c=>c.textChange),R6(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return et(i),null}}}class Yge extends G{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function lF(n,e){let t=0,i=0;const s=n.length;for(;i<s;){const o=n.charCodeAt(i);if(o===32)t++;else if(o===9)t=t-t%e+e;else break;i++}return i===s?-1:t}var G_;(function(n){n[n.Disabled=0]="Disabled",n[n.EnabledForActive=1]="EnabledForActive",n[n.Enabled=2]="Enabled"})(G_||(G_={}));class k_{constructor(e,t,i,s,o,r){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=s,this.forWrappedLinesAfterColumn=o,this.forWrappedLinesBeforeOrAtColumn=r,e!==-1==(t!==-1))throw new Error}}class Vx{constructor(e,t){this.top=e,this.endColumn=t}}class k9e extends Yge{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return lF(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const s=this.textModel.getLineCount();if(e<1||e>s)throw new Zt("Illegal value for lineNumber");const o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(o&&o.offSide);let a=-2,l=-1,c=-2,d=-1;const u=k=>{if(a!==-1&&(a===-2||a>k-1)){a=-1,l=-1;for(let N=k-2;N>=0;N--){const E=this._computeIndentLevel(N);if(E>=0){a=N,l=E;break}}}if(c===-2){c=-1,d=-1;for(let N=k;N<s;N++){const E=this._computeIndentLevel(N);if(E>=0){c=N,d=E;break}}}};let h=-2,f=-1,m=-2,p=-1;const b=k=>{if(h===-2){h=-1,f=-1;for(let N=k-2;N>=0;N--){const E=this._computeIndentLevel(N);if(E>=0){h=N,f=E;break}}}if(m!==-1&&(m===-2||m<k-1)){m=-1,p=-1;for(let N=k;N<s;N++){const E=this._computeIndentLevel(N);if(E>=0){m=N,p=E;break}}}};let v=0,w=!0,y=0,C=!0,S=0,x=0;for(let k=0;w||C;k++){const N=e-k,E=e+k;k>1&&(N<1||N<t)&&(w=!1),k>1&&(E>s||E>i)&&(C=!1),k>5e4&&(w=!1,C=!1);let B=-1;if(w&&N>=1){const O=this._computeIndentLevel(N-1);O>=0?(c=N-1,d=O,B=Math.ceil(O/this.textModel.getOptions().indentSize)):(u(N),B=this._getIndentLevelForWhitespaceLine(r,l,d))}let A=-1;if(C&&E<=s){const O=this._computeIndentLevel(E-1);O>=0?(h=E-1,f=O,A=Math.ceil(O/this.textModel.getOptions().indentSize)):(b(E),A=this._getIndentLevelForWhitespaceLine(r,f,p))}if(k===0){x=B;continue}if(k===1){if(E<=s&&A>=0&&x+1===A){w=!1,v=E,y=E,S=A;continue}if(N>=1&&B>=0&&B-1===x){C=!1,v=N,y=N,S=B;continue}if(v=e,y=e,S=x,S===0)return{startLineNumber:v,endLineNumber:y,indent:S}}w&&(B>=S?v=N:w=!1),C&&(A>=S?y=E:C=!1)}return{startLineNumber:v,endLineNumber:y,indent:S}}getLinesBracketGuides(e,t,i,s){var u;const o=[];for(let h=e;h<=t;h++)o.push([]);const r=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new D(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(i&&a.length>0){const h=(e<=i.lineNumber&&i.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(D.fromPositions(i)).toArray()).filter(f=>D.strictContainsPosition(f.range,i));l=(u=Mk(h,f=>r))==null?void 0:u.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,d=new Xge;for(const h of a){if(!h.closingBracketRange)continue;const f=l&&h.range.equalsRange(l);if(!f&&!s.includeInactive)continue;const m=d.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,c)+(s.highlightActive&&f?" "+d.activeClassName:""),p=h.openingBracketRange.getStartPosition(),b=h.closingBracketRange.getStartPosition(),v=s.horizontalGuides===G_.Enabled||s.horizontalGuides===G_.EnabledForActive&&f;if(h.range.startLineNumber===h.range.endLineNumber){v&&o[h.range.startLineNumber-e].push(new k_(-1,h.openingBracketRange.getEndPosition().column,m,new Vx(!1,b.column),-1,-1));continue}const w=this.getVisibleColumnFromPosition(b),y=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),C=Math.min(y,w,h.minVisibleColumnIndentation+1);let S=!1;fo(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(S=!0);const N=Math.max(p.lineNumber,e),E=Math.min(b.lineNumber,t),B=S?1:0;for(let A=N;A<E+B;A++)o[A-e].push(new k_(C,-1,m,null,A===p.lineNumber?p.column:-1,A===b.lineNumber?b.column:-1));v&&(p.lineNumber>=e&&y>C&&o[p.lineNumber-e].push(new k_(C,-1,m,new Vx(!1,p.column),-1,-1)),b.lineNumber<=t&&w>C&&o[b.lineNumber-e].push(new k_(C,-1,m,new Vx(!S,b.column),-1,-1)))}for(const h of o)h.sort((f,m)=>f.visibleColumn-m.visibleColumn);return o}getVisibleColumnFromPosition(e){return Bn.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const s=this.textModel.getOptions(),o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(o&&o.offSide),a=new Array(t-e+1);let l=-2,c=-1,d=-2,u=-1;for(let h=e;h<=t;h++){const f=h-e,m=this._computeIndentLevel(h-1);if(m>=0){l=h-1,c=m,a[f]=Math.ceil(m/s.indentSize);continue}if(l===-2){l=-1,c=-1;for(let p=h-2;p>=0;p--){const b=this._computeIndentLevel(p);if(b>=0){l=p,c=b;break}}}if(d!==-1&&(d===-2||d<h-1)){d=-1,u=-1;for(let p=h;p<i;p++){const b=this._computeIndentLevel(p);if(b>=0){d=p,u=b;break}}}a[f]=this._getIndentLevelForWhitespaceLine(r,c,u)}return a}_getIndentLevelForWhitespaceLine(e,t,i){const s=this.textModel.getOptions();return t===-1||i===-1?0:t<i?1+Math.floor(t/s.indentSize):t===i||e?Math.ceil(i/s.indentSize):1+Math.floor(i/s.indentSize)}}class Xge{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class N9e{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function I9e(n,e,t,i,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<i;o++){const h=n.charCodeAt(o),f=t.charCodeAt(o);if(h!==f)break}let r=0,a=0;for(let h=o;h<e;h++)n.charCodeAt(h)===32?r++:a++;let l=0,c=0;for(let h=o;h<i;h++)t.charCodeAt(h)===32?l++:c++;if(r>0&&a>0||l>0&&c>0)return;const d=Math.abs(a-c),u=Math.abs(r-l);if(d===0){s.spacesDiff=u,u>0&&0<=l-1&&l-1<n.length&&l<t.length&&t.charCodeAt(l)!==32&&n.charCodeAt(l-1)===32&&n.charCodeAt(n.length-1)===44&&(s.looksLikeAlignment=!0);return}if(u%d===0){s.spacesDiff=u/d;return}}function Jee(n,e,t){const i=Math.min(n.getLineCount(),1e4);let s=0,o=0,r="",a=0;const l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],u=new N9e;for(let m=1;m<=i;m++){const p=n.getLineLength(m),b=n.getLineContent(m),v=p<=65536;let w=!1,y=0,C=0,S=0;for(let k=0,N=p;k<N;k++){const E=v?b.charCodeAt(k):n.getLineCharCode(m,k);if(E===9)S++;else if(E===32)C++;else{w=!0,y=k;break}}if(!w||(S>0?s++:C>1&&o++,I9e(r,a,b,y,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;const x=u.spacesDiff;x<=c&&d[x]++,r=b,a=y}let h=t;s!==o&&(h=s<o);let f=e;if(h){let m=h?0:.1*i;l.forEach(p=>{const b=d[p];b>m&&(m=b,f=p)}),f===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(f=2)}return{insertSpaces:h,tabSize:f}}function $o(n){return(n.metadata&1)>>>0}function Ti(n,e){n.metadata=n.metadata&254|e<<0}function Ps(n){return(n.metadata&2)>>>1===1}function Ni(n,e){n.metadata=n.metadata&253|(e?1:0)<<1}function Qge(n){return(n.metadata&4)>>>2===1}function ete(n,e){n.metadata=n.metadata&251|(e?1:0)<<2}function Jge(n){return(n.metadata&64)>>>6===1}function tte(n,e){n.metadata=n.metadata&191|(e?1:0)<<6}function E9e(n){return(n.metadata&24)>>>3}function ite(n,e){n.metadata=n.metadata&231|e<<3}function D9e(n){return(n.metadata&32)>>>5===1}function nte(n,e){n.metadata=n.metadata&223|(e?1:0)<<5}class eme{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,Ti(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,ete(this,!1),tte(this,!1),ite(this,1),nte(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,Ni(this,!1)}reset(e,t,i,s){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=s}setOptions(e){this.options=e;const t=this.options.className;ete(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),tte(this,this.options.glyphMarginClassName!==null),ite(this,this.options.stickiness),nte(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const xt=new eme(null,0,0);xt.parent=xt;xt.left=xt;xt.right=xt;Ti(xt,0);class eB{constructor(){this.root=xt,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,s,o,r){return this.root===xt?[]:B9e(this,e,t,i,s,o,r)}search(e,t,i,s){return this.root===xt?[]:F9e(this,e,t,i,s)}collectNodesFromOwner(e){return A9e(this,e)}collectNodesPostOrder(){return O9e(this)}insert(e){ste(this,e),this._normalizeDeltaIfNecessary()}delete(e){ote(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const o=i.start+s,r=i.end+s;i.setCachedOffsets(o,r,t)}acceptReplace(e,t,i,s){const o=M9e(this,e,e+t);for(let r=0,a=o.length;r<a;r++){const l=o[r];ote(this,l)}this._normalizeDeltaIfNecessary(),P9e(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let r=0,a=o.length;r<a;r++){const l=o[r];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,R9e(l,e,e+t,i,s),l.maxEnd=l.end,ste(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,T9e(this))}}function T9e(n){let e=n.root,t=0;for(;e!==xt;){if(e.left!==xt&&!Ps(e.left)){e=e.left;continue}if(e.right!==xt&&!Ps(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Qm(e),Ni(e,!0),Ni(e.left,!1),Ni(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Ni(n.root,!1)}function L0(n,e,t,i){return n<t?!0:n>t||i===1?!1:i===2?!0:e}function R9e(n,e,t,i,s){const o=E9e(n),r=o===0||o===2,a=o===1||o===2,l=t-e,c=i,d=Math.min(l,c),u=n.start;let h=!1;const f=n.end;let m=!1;e<=u&&f<=t&&D9e(n)&&(n.start=e,h=!0,n.end=e,m=!0);{const b=s?1:l>0?2:0;!h&&L0(u,r,e,b)&&(h=!0),!m&&L0(f,a,e,b)&&(m=!0)}if(d>0&&!s){const b=l>c?2:0;!h&&L0(u,r,e+d,b)&&(h=!0),!m&&L0(f,a,e+d,b)&&(m=!0)}{const b=s?1:0;!h&&L0(u,r,t,b)&&(n.start=e+c,h=!0),!m&&L0(f,a,t,b)&&(n.end=e+c,m=!0)}const p=c-l;h||(n.start=Math.max(0,u+p)),m||(n.end=Math.max(0,f+p)),n.start>n.end&&(n.end=n.start)}function M9e(n,e,t){let i=n.root,s=0,o=0,r=0,a=0;const l=[];let c=0;for(;i!==xt;){if(Ps(i)){Ni(i.left,!1),Ni(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;continue}if(!Ps(i.left)){if(o=s+i.maxEnd,o<e){Ni(i,!0);continue}if(i.left!==xt){i=i.left;continue}}if(r=s+i.start,r>t){Ni(i,!0);continue}if(a=s+i.end,a>=e&&(i.setCachedOffsets(r,a,0),l[c++]=i),Ni(i,!0),i.right!==xt&&!Ps(i.right)){s+=i.delta,i=i.right;continue}}return Ni(n.root,!1),l}function P9e(n,e,t,i){let s=n.root,o=0,r=0,a=0;const l=i-(t-e);for(;s!==xt;){if(Ps(s)){Ni(s.left,!1),Ni(s.right,!1),s===s.parent.right&&(o-=s.parent.delta),Qm(s),s=s.parent;continue}if(!Ps(s.left)){if(r=o+s.maxEnd,r<e){Ni(s,!0);continue}if(s.left!==xt){s=s.left;continue}}if(a=o+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(n.requestNormalizeDelta=!0),Ni(s,!0);continue}if(Ni(s,!0),s.right!==xt&&!Ps(s.right)){o+=s.delta,s=s.right;continue}}Ni(n.root,!1)}function A9e(n,e){let t=n.root;const i=[];let s=0;for(;t!==xt;){if(Ps(t)){Ni(t.left,!1),Ni(t.right,!1),t=t.parent;continue}if(t.left!==xt&&!Ps(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[s++]=t),Ni(t,!0),t.right!==xt&&!Ps(t.right)){t=t.right;continue}}return Ni(n.root,!1),i}function O9e(n){let e=n.root;const t=[];let i=0;for(;e!==xt;){if(Ps(e)){Ni(e.left,!1),Ni(e.right,!1),e=e.parent;continue}if(e.left!==xt&&!Ps(e.left)){e=e.left;continue}if(e.right!==xt&&!Ps(e.right)){e=e.right;continue}t[i++]=e,Ni(e,!0)}return Ni(n.root,!1),t}function F9e(n,e,t,i,s){let o=n.root,r=0,a=0,l=0;const c=[];let d=0;for(;o!==xt;){if(Ps(o)){Ni(o.left,!1),Ni(o.right,!1),o===o.parent.right&&(r-=o.parent.delta),o=o.parent;continue}if(o.left!==xt&&!Ps(o.left)){o=o.left;continue}a=r+o.start,l=r+o.end,o.setCachedOffsets(a,l,i);let u=!0;if(e&&o.ownerId&&o.ownerId!==e&&(u=!1),t&&Qge(o)&&(u=!1),s&&!Jge(o)&&(u=!1),u&&(c[d++]=o),Ni(o,!0),o.right!==xt&&!Ps(o.right)){r+=o.delta,o=o.right;continue}}return Ni(n.root,!1),c}function B9e(n,e,t,i,s,o,r){let a=n.root,l=0,c=0,d=0,u=0;const h=[];let f=0;for(;a!==xt;){if(Ps(a)){Ni(a.left,!1),Ni(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!Ps(a.left)){if(c=l+a.maxEnd,c<e){Ni(a,!0);continue}if(a.left!==xt){a=a.left;continue}}if(d=l+a.start,d>t){Ni(a,!0);continue}if(u=l+a.end,u>=e){a.setCachedOffsets(d,u,o);let m=!0;i&&a.ownerId&&a.ownerId!==i&&(m=!1),s&&Qge(a)&&(m=!1),r&&!Jge(a)&&(m=!1),m&&(h[f++]=a)}if(Ni(a,!0),a.right!==xt&&!Ps(a.right)){l+=a.delta,a=a.right;continue}}return Ni(n.root,!1),h}function ste(n,e){if(n.root===xt)return e.parent=xt,e.left=xt,e.right=xt,Ti(e,0),n.root=e,n.root;W9e(n,e),Yf(e.parent);let t=e;for(;t!==n.root&&$o(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;$o(i)===1?(Ti(t.parent,0),Ti(i,0),Ti(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,jx(n,t)),Ti(t.parent,0),Ti(t.parent.parent,1),zx(n,t.parent.parent))}else{const i=t.parent.parent.left;$o(i)===1?(Ti(t.parent,0),Ti(i,0),Ti(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,zx(n,t)),Ti(t.parent,0),Ti(t.parent.parent,1),jx(n,t.parent.parent))}return Ti(n.root,0),e}function W9e(n,e){let t=0,i=n.root;const s=e.start,o=e.end;for(;;)if(V9e(s,o,i.start+t,i.end+t)<0)if(i.left===xt){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===xt){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=xt,e.right=xt,Ti(e,1)}function ote(n,e){let t,i;if(e.left===xt?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===xt?(t=e.left,i=e):(i=H9e(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(n.requestNormalizeDelta=!0)),i===n.root){n.root=t,Ti(t,0),e.detach(),tB(),Qm(t),n.root.parent=xt;return}const s=$o(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,Ti(i,$o(e)),e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==xt&&(i.left.parent=i),i.right!==xt&&(i.right.parent=i)),e.detach(),s){Yf(t.parent),i!==e&&(Yf(i),Yf(i.parent)),tB();return}Yf(t),Yf(t.parent),i!==e&&(Yf(i),Yf(i.parent));let o;for(;t!==n.root&&$o(t)===0;)t===t.parent.left?(o=t.parent.right,$o(o)===1&&(Ti(o,0),Ti(t.parent,1),jx(n,t.parent),o=t.parent.right),$o(o.left)===0&&$o(o.right)===0?(Ti(o,1),t=t.parent):($o(o.right)===0&&(Ti(o.left,0),Ti(o,1),zx(n,o),o=t.parent.right),Ti(o,$o(t.parent)),Ti(t.parent,0),Ti(o.right,0),jx(n,t.parent),t=n.root)):(o=t.parent.left,$o(o)===1&&(Ti(o,0),Ti(t.parent,1),zx(n,t.parent),o=t.parent.left),$o(o.left)===0&&$o(o.right)===0?(Ti(o,1),t=t.parent):($o(o.left)===0&&(Ti(o.right,0),Ti(o,1),jx(n,o),o=t.parent.left),Ti(o,$o(t.parent)),Ti(t.parent,0),Ti(o.left,0),zx(n,t.parent),t=n.root));Ti(t,0),tB()}function H9e(n){for(;n.left!==xt;)n=n.left;return n}function tB(){xt.parent=xt,xt.delta=0,xt.start=0,xt.end=0}function jx(n,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==xt&&(t.left.parent=e),t.parent=e.parent,e.parent===xt?n.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Qm(e),Qm(t)}function zx(n,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(n.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==xt&&(t.right.parent=e),t.parent=e.parent,e.parent===xt?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Qm(e),Qm(t)}function tme(n){let e=n.end;if(n.left!==xt){const t=n.left.maxEnd;t>e&&(e=t)}if(n.right!==xt){const t=n.right.maxEnd+n.delta;t>e&&(e=t)}return e}function Qm(n){n.maxEnd=tme(n)}function Yf(n){for(;n!==xt;){const e=tme(n);if(n.maxEnd===e)return;n.maxEnd=e,n=n.parent}}function V9e(n,e,t,i){return n===t?e-i:n-t}class M6{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==lt)return Pq(this.right);let e=this;for(;e.parent!==lt&&e.parent.left!==e;)e=e.parent;return e.parent===lt?lt:e.parent}prev(){if(this.left!==lt)return ime(this.left);let e=this;for(;e.parent!==lt&&e.parent.right!==e;)e=e.parent;return e.parent===lt?lt:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const lt=new M6(null,0);lt.parent=lt;lt.left=lt;lt.right=lt;lt.color=0;function Pq(n){for(;n.left!==lt;)n=n.left;return n}function ime(n){for(;n.right!==lt;)n=n.right;return n}function Aq(n){return n===lt?0:n.size_left+n.piece.length+Aq(n.right)}function Oq(n){return n===lt?0:n.lf_left+n.piece.lineFeedCnt+Oq(n.right)}function iB(){lt.parent=lt}function Ux(n,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==lt&&(t.left.parent=e),t.parent=e.parent,e.parent===lt?n.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function $x(n,e){const t=e.left;e.left=t.right,t.right!==lt&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===lt?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function dD(n,e){let t,i;if(e.left===lt?(i=e,t=i.right):e.right===lt?(i=e,t=i.left):(i=Pq(e.right),t=i.right),i===n.root){n.root=t,t.color=0,e.detach(),iB(),n.root.parent=lt;return}const s=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,nx(n,t)):(i.parent===e?t.parent=i:t.parent=i.parent,nx(n,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==lt&&(i.left.parent=i),i.right!==lt&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,nx(n,i)),e.detach(),t.parent.left===t){const r=Aq(t),a=Oq(t);if(r!==t.parent.size_left||a!==t.parent.lf_left){const l=r-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=r,t.parent.lf_left=a,sh(n,t.parent,l,c)}}if(nx(n,t.parent),s){iB();return}let o;for(;t!==n.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,Ux(n,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,$x(n,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,Ux(n,t.parent),t=n.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,$x(n,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,Ux(n,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,$x(n,t.parent),t=n.root));t.color=0,iB()}function rte(n,e){for(nx(n,e);e!==n.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,Ux(n,e)),e.parent.color=0,e.parent.parent.color=1,$x(n,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,$x(n,e)),e.parent.color=0,e.parent.parent.color=1,Ux(n,e.parent.parent))}n.root.color=0}function sh(n,e,t,i){for(;e!==n.root&&e!==lt;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function nx(n,e){let t=0,i=0;if(e!==n.root){for(;e!==n.root&&e===e.parent.right;)e=e.parent;if(e!==n.root)for(e=e.parent,t=Aq(e.left)-e.size_left,i=Oq(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==n.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const Xu=65535;function nme(n){let e;return n[n.length-1]<65536?e=new Uint16Array(n.length):e=new Uint32Array(n.length),e.set(n,0),e}class j9e{constructor(e,t,i,s,o){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=s,this.isBasicASCII=o}}function ah(n,e=!0){const t=[0];let i=1;for(let s=0,o=n.length;s<o;s++){const r=n.charCodeAt(s);r===13?s+1<o&&n.charCodeAt(s+1)===10?(t[i++]=s+2,s++):t[i++]=s+1:r===10&&(t[i++]=s+1)}return e?nme(t):t}function z9e(n,e){n.length=0,n[0]=0;let t=1,i=0,s=0,o=0,r=!0;for(let l=0,c=e.length;l<c;l++){const d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(o++,n[t++]=l+2,l++):(i++,n[t++]=l+1):d===10?(s++,n[t++]=l+1):r&&d!==9&&(d<32||d>126)&&(r=!1)}const a=new j9e(nme(n),i,s,o,r);return n.length=0,a}class _r{constructor(e,t,i,s,o){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=s,this.length=o}}class r_{constructor(e,t){this.buffer=e,this.lineStarts=t}}class U9e{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==lt&&e.iterate(e.root,i=>(i!==lt&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class $9e{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let s=0;s<i.length;s++){const o=i[s];if(o.node.parent===null||o.nodeStartOffset>=e){i[s]=null,t=!0;continue}}if(t){const s=[];for(const o of i)o!==null&&s.push(o);this._cache=s}}}class K9e{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new r_("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=lt,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let s=null;for(let o=0,r=e.length;o<r;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=ah(e[o].buffer));const a=new _r(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),s=this.rbInsertRight(s,a)}this._searchCache=new $9e(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=Xu,i=t-Math.floor(t/3),s=i*2;let o="",r=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),d=c.length;if(r<=i||r+d<s)return o+=c,r+=d,!0;const u=o.replace(/\r\n|\r|\n/g,e);return a.push(new r_(u,ah(u))),o=c,r=d,!0}),r>0){const l=o.replace(/\r\n|\r|\n/g,e);a.push(new r_(l,ah(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new U9e(this,e)}getOffsetAt(e,t){let i=0,s=this.root;for(;s!==lt;)if(s.left!==lt&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){i+=s.size_left;const o=this.getAccumulatedValue(s,e-s.lf_left-2);return i+=o+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,i+=s.size_left+s.piece.length,s=s.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const s=e;for(;t!==lt;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const o=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+o.index,o.index===0){const r=this.getOffsetAt(i+1,1),a=s-r;return new U(i+1,a+1)}return new U(i+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===lt){const o=this.getOffsetAt(i+1,1),r=s-e-o;return new U(i+1,r+1)}else t=t.right;return new U(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(i,s);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node;const s=this._buffers[i.piece.bufferIndex].buffer,o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let r=s.substring(o+e.remainder,o+i.piece.length);for(i=i.next();i!==lt;){const a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){r+=a.substring(l,l+t.remainder);break}else r+=a.substr(l,i.piece.length);i=i.next()}return r}getLinesContent(){const e=[];let t=0,i="",s=!1;return this.iterate(this.root,o=>{if(o===lt)return!0;const r=o.piece;let a=r.length;if(a===0)return!0;const l=this._buffers[r.bufferIndex].buffer,c=this._buffers[r.bufferIndex].lineStarts,d=r.start.line,u=r.end.line;let h=c[d]+r.start.column;if(s&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=i,i="",s=!1,a===0))return!0;if(d===u)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(s=!0,i+=l.substr(h,a-1)):i+=l.substr(h,a),!0;i+=this._EOLNormalized?l.substring(h,Math.max(h,c[d+1]-this._EOLLength)):l.substring(h,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let f=d+1;f<u;f++)i=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[u]+r.end.column-1)===13?(s=!0,r.end.column===0?t--:i=l.substr(c[u],r.end.column-1)):i=l.substr(c[u],r.end.column),!0}),s&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(s)}else{const t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,s,o,r,a,l,c,d,u){const h=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),m=this.offsetInBuffer(e.piece.bufferIndex,o),p=this.offsetInBuffer(e.piece.bufferIndex,r);let b;const v={line:0,column:0};let w,y;t._wordSeparators?(w=h.buffer.substring(m,p),y=C=>C+m,t.reset(0)):(w=h.buffer,y=C=>C,t.reset(m));do if(b=t.next(w),b){if(y(b.index)>=p)return d;this.positionInBuffer(e,y(b.index)-f,v);const C=this.getLineFeedCnt(e.piece.bufferIndex,o,v),S=v.line===o.line?v.column-o.column+s:v.column+1,x=S+b[0].length;if(u[d++]=e_(new D(i+C,S,i+C,x),b,l),y(b.index)+b[0].length>=p||d>=c)return d}while(b);return d}findMatchesLineByLine(e,t,i,s){const o=[];let r=0;const a=new hw(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder);const u=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,u,t,i,s,r,o),o;let h=e.startLineNumber,f=l.node;for(;f!==c.node;){const p=this.getLineFeedCnt(f.piece.bufferIndex,d,f.piece.end);if(p>=1){const v=this._buffers[f.piece.bufferIndex].lineStarts,w=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),y=v[d.line+p],C=h===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(f,a,h,C,d,this.positionInBuffer(f,y-w),t,i,s,r,o),r>=s)return o;h+=p}const b=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const v=this.getLineContent(h).substring(b,e.endColumn-1);return r=this._findMatchesInLine(t,a,v,e.endLineNumber,b,r,o,i,s),o}if(r=this._findMatchesInLine(t,a,this.getLineContent(h).substr(b),h,b,r,o,i,s),r>=s)return o;h++,l=this.nodeAt2(h,1),f=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){const p=h===e.startLineNumber?e.startColumn-1:0,b=this.getLineContent(h).substring(p,e.endColumn-1);return r=this._findMatchesInLine(t,a,b,e.endLineNumber,p,r,o,i,s),o}const m=h===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(c.node,a,h,m,d,u,t,i,s,r,o),o}_findMatchesInLine(e,t,i,s,o,r,a,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const h=e.simpleSearch,f=h.length,m=i.length;let p=-f;for(;(p=i.indexOf(h,p+f))!==-1;)if((!d||FK(d,i,m,p,f))&&(a[r++]=new Rk(new D(s,p+1+o,s,p+1+f+o),null),r>=c))return r;return r}let u;t.reset(0);do if(u=t.next(i),u&&(a[r++]=e_(new D(s,u.index+1+o,s,u.index+1+u[0].length+o),u,l),r>=c))return r;while(u);return r}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==lt){const{node:s,remainder:o,nodeStartOffset:r}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,c=this.positionInBuffer(s,o);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&r+a.length===e&&t.length<Xu){this.appendToNode(s,t),this.computeBufferMetadata();return}if(r===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(r+s.piece.length>e){const d=[];let u=new _r(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,o)===10){const p={line:u.start.line+1,column:0};u=new _r(u.bufferIndex,p,u.end,this.getLineFeedCnt(u.bufferIndex,p,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,o-1)===13){const p=this.positionInBuffer(s,o-1);this.deleteNodeTail(s,p),t="\r"+t,s.piece.length===0&&d.push(s)}else this.deleteNodeTail(s,c);else this.deleteNodeTail(s,c);const h=this.createNewPieces(t);u.length>0&&this.rbInsertRight(s,u);let f=s;for(let m=0;m<h.length;m++)f=this.rbInsertRight(f,h[m]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,s)}else{const s=this.createNewPieces(t);let o=this.rbInsertLeft(null,s[0]);for(let r=1;r<s.length;r++)o=this.rbInsertRight(o,s[r])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===lt)return;const i=this.nodeAt(e),s=this.nodeAt(e+t),o=i.node,r=s.node;if(o===r){const h=this.positionInBuffer(o,i.remainder),f=this.positionInBuffer(o,s.remainder);if(i.nodeStartOffset===e){if(t===o.piece.length){const m=o.next();dD(this,o),this.validateCRLFWithPrevNode(m),this.computeBufferMetadata();return}this.deleteNodeHead(o,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(i.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,h),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,h,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(o,i.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),o.piece.length===0&&a.push(o);const c=this.positionInBuffer(r,s.remainder);this.deleteNodeHead(r,c),r.piece.length===0&&a.push(r);const d=o.next();for(let h=d;h!==lt&&h!==r;h=h.next())a.push(h);const u=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,a={line:r.start.line+1,column:0},l=new _r(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),r.length-1);t.piece=l,e+=`
`,sh(this,t,-1,-1),t.piece.length===0&&i.push(t)}const s=this.createNewPieces(e);let o=this.rbInsertLeft(t,s[s.length-1]);for(let r=s.length-2;r>=0;r--)o=this.rbInsertLeft(o,s[r]);this.validateCRLFWithPrevNode(o),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),s=this.rbInsertRight(t,i[0]);let o=s;for(let r=1;r<i.length;r++)o=this.rbInsertRight(o,i[r]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,i){const s=e.piece,o=e.piece.bufferIndex,r=this._buffers[o].lineStarts,l=r[s.start.line]+s.start.column+t;let c=s.start.line,d=s.end.line,u=0,h=0,f=0;for(;c<=d&&(u=c+(d-c)/2|0,f=r[u],u!==d);)if(h=r[u+1],l<f)d=u-1;else if(l>=h)c=u+1;else break;return i?(i.line=u,i.column=l-f,null):{line:u,column:l-f}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const s=this._buffers[e].lineStarts;if(i.line===s.length-1)return i.line-t.line;const o=s[i.line+1],r=s[i.line]+i.column;if(o>r+1)return i.line-t.line;const a=r-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)dD(this,e[t])}createNewPieces(e){if(e.length>Xu){const d=[];for(;e.length>Xu;){const h=e.charCodeAt(Xu-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,Xu-1),e=e.substring(Xu-1)):(f=e.substring(0,Xu),e=e.substring(Xu));const m=ah(f);d.push(new _r(this._buffers.length,{line:0,column:0},{line:m.length-1,column:f.length-m[m.length-1]},m.length-1,f.length)),this._buffers.push(new r_(f,m))}const u=ah(e);return d.push(new _r(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new r_(e,u)),d}let t=this._buffers[0].buffer.length;const i=ah(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let d=0;d<i.length;d++)i[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<i.length;d++)i[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const o=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[r],l={line:r,column:a},c=new _r(0,s,l,this.getLineFeedCnt(0,s,l),o-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,s="";const o=this._searchCache.get2(e);if(o){i=o.node;const r=this.getAccumulatedValue(i,e-o.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(o.nodeStartLineNumber+i.piece.lineFeedCnt===e)s=a.substring(l+r,l+i.piece.length);else{const c=this.getAccumulatedValue(i,e-o.nodeStartLineNumber);return a.substring(l+r,l+c-t)}}else{let r=0;const a=e;for(;i!==lt;)if(i.left!==lt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),d=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:r,nodeStartLineNumber:a-(e-1-i.lf_left)}),d.substring(u+l,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s=c.substring(d+l,d+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==lt;){const r=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return s+=r.substring(l,l+a-t),s}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s+=r.substr(a,i.piece.length)}i=i.next()}return s}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==lt;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,s=this.positionInBuffer(e,t),o=s.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const r=this.getLineFeedCnt(e.piece.bufferIndex,i.start,s);if(r!==o)return{index:r,remainder:0}}return{index:o,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,s=this._buffers[i.bufferIndex].lineStarts,o=i.start.line+t+1;return o>i.end.line?s[i.end.line]+i.end.column-s[i.start.line]-i.start.column:s[o]-s[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,s=i.lineFeedCnt,o=this.offsetInBuffer(i.bufferIndex,i.end),r=t,a=this.offsetInBuffer(i.bufferIndex,r),l=this.getLineFeedCnt(i.bufferIndex,i.start,r),c=l-s,d=a-o,u=i.length+d;e.piece=new _r(i.bufferIndex,i.start,r,l,u),sh(this,e,d,c)}deleteNodeHead(e,t){const i=e.piece,s=i.lineFeedCnt,o=this.offsetInBuffer(i.bufferIndex,i.start),r=t,a=this.getLineFeedCnt(i.bufferIndex,r,i.end),l=this.offsetInBuffer(i.bufferIndex,r),c=a-s,d=o-l,u=i.length+d;e.piece=new _r(i.bufferIndex,r,i.end,a,u),sh(this,e,d,c)}shrinkNode(e,t,i){const s=e.piece,o=s.start,r=s.end,a=s.length,l=s.lineFeedCnt,c=t,d=this.getLineFeedCnt(s.bufferIndex,s.start,c),u=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,o);e.piece=new _r(s.bufferIndex,s.start,c,d,u),sh(this,e,u-a,d-l);const h=new _r(s.bufferIndex,i,r,this.getLineFeedCnt(s.bufferIndex,i,r),this.offsetInBuffer(s.bufferIndex,r)-this.offsetInBuffer(s.bufferIndex,i)),f=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const o=ah(t,!1);for(let f=0;f<o.length;f++)o[f]+=s;if(i){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));const r=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),h=u-d;e.piece=new _r(e.piece.bufferIndex,e.piece.start,l,u,c),this._lastChangeBufferPos=l,sh(this,e,t.length,h)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let s=0;for(;t!==lt;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;const o={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,s=0;for(;i!==lt;)if(i.left!==lt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const o=this.getAccumulatedValue(i,e-i.lf_left-2),r=this.getAccumulatedValue(i,e-i.lf_left-1);return s+=i.size_left,{node:i,remainder:Math.min(o+t-1,r),nodeStartOffset:s}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const o=this.getAccumulatedValue(i,e-i.lf_left-2);if(o+t-1<=i.piece.length)return{node:i,remainder:o+t-1,nodeStartOffset:s};t-=i.piece.length-o;break}else e-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==lt;){if(i.piece.lineFeedCnt>0){const o=this.getAccumulatedValue(i,0),r=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,o),nodeStartOffset:r}}else if(i.piece.length>=t-1){const o=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:o}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===lt||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,o=i[s]+t.start.column;return s===i.length-1||i[s+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===lt||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],s=this._buffers[e.piece.bufferIndex].lineStarts;let o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new _r(e.piece.bufferIndex,e.piece.start,o,a,r),sh(this,e,-1,-1),e.piece.length===0&&i.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new _r(t.piece.bufferIndex,l,t.piece.end,d,c),sh(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let h=0;h<i.length;h++)dD(this,i[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)dD(this,i);else{const s=i.piece,o={line:s.start.line+1,column:0},r=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,o,s.end);i.piece=new _r(s.bufferIndex,o,s.end,a,r),sh(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===lt)return t(lt);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===lt)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,s=this.offsetInBuffer(i.bufferIndex,i.start),o=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(s,o)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,s)}rbInsertRight(e,t){const i=new M6(t,1);if(i.left=lt,i.right=lt,i.parent=lt,i.size_left=0,i.lf_left=0,this.root===lt)this.root=i,i.color=0;else if(e.right===lt)e.right=i,i.parent=e;else{const o=Pq(e.right);o.left=i,i.parent=o}return rte(this,i),i}rbInsertLeft(e,t){const i=new M6(t,1);if(i.left=lt,i.right=lt,i.parent=lt,i.size_left=0,i.lf_left=0,this.root===lt)this.root=i,i.color=0;else if(e.left===lt)e.left=i,i.parent=e;else{const s=ime(e.left);s.right=i,i.parent=s}return rte(this,i),i}}class Cy extends G{constructor(e,t,i,s,o,r,a){super(),this._onDidChangeContent=this._register(new $),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=o,this._pieceTree=new K9e(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,s=this.getPositionAt(e),o=this.getPositionAt(i);return new D(s.lineNumber,s.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),s=this.getOffsetAt(e.endLineNumber,e.endColumn);let o=0;const r=this._getEndOfLine(t),a=this.getEOL();if(r.length!==a.length){const l=r.length-a.length,c=e.endLineNumber-e.startLineNumber;o=l*c}return s-i+o}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const s=e.startLineNumber,o=e.endLineNumber;for(let r=s;r<=o;r++){const a=this.getLineContent(r),l=r===s?e.startColumn-1:0,c=r===o?e.endColumn-1:a.length;for(let d=l;d<c;d++)qn(a.charCodeAt(d))?(i=i+1,d=d+1):i=i+1}return i+=this._getEndOfLine(t).length*(o-s),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=fo(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Xc(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let s=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let p=0;p<e.length;p++){const b=e[p];a&&b._isTracked&&(a=!1);const v=b.range;if(b.text){let x=!0;r||(x=!CI(b.text),r=x),!s&&x&&(s=CC(b.text)),!o&&x&&(o=Yue(b.text))}let w="",y=0,C=0,S=0;if(b.text){let x;[y,C,S,x]=Zm(b.text);const k=this.getEOL();x===0||x===(k===`\r
`?2:1)?w=b.text:w=b.text.replace(/\r\n|\r|\n/g,k)}l[p]={sortIndex:p,identifier:b.identifier||null,range:v,rangeOffset:this.getOffsetAt(v.startLineNumber,v.startColumn),rangeLength:this.getValueLengthInRange(v),text:w,eolCount:y,firstLineLength:C,lastLineLength:S,forceMoveMarkers:!!b.forceMoveMarkers,isAutoWhitespaceEdit:b.isAutoWhitespaceEdit||!1}}l.sort(Cy._sortOpsAscending);let c=!1;for(let p=0,b=l.length-1;p<b;p++){const v=l[p].range.getEndPosition(),w=l[p+1].range.getStartPosition();if(w.isBeforeOrEqual(v)){if(w.isBefore(v))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const d=i||t?Cy._getInverseEditRanges(l):[],u=[];if(t)for(let p=0;p<l.length;p++){const b=l[p],v=d[p];if(b.isAutoWhitespaceEdit&&b.range.isEmpty())for(let w=v.startLineNumber;w<=v.endLineNumber;w++){let y="";w===v.startLineNumber&&(y=this.getLineContent(b.range.startLineNumber),fo(y)!==-1)||u.push({lineNumber:w,oldContent:y})}}let h=null;if(i){let p=0;h=[];for(let b=0;b<l.length;b++){const v=l[b],w=d[b],y=this.getValueInRange(v.range),C=v.rangeOffset+p;p+=v.text.length-y.length,h[b]={sortIndex:v.sortIndex,identifier:v.identifier,range:w,text:y,textChange:new Es(v.rangeOffset,y,C,v.text)}}c||h.sort((b,v)=>b.sortIndex-v.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=r;const f=this._doApplyEdits(l);let m=null;if(t&&u.length>0){u.sort((p,b)=>b.lineNumber-p.lineNumber),m=[];for(let p=0,b=u.length;p<b;p++){const v=u[p].lineNumber;if(p>0&&u[p-1].lineNumber===v)continue;const w=u[p].oldContent,y=this.getLineContent(v);y.length===0||y===w||fo(y)!==-1||m.push(v)}}return this._onDidChangeContent.fire(),new nAe(h,f,m)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,s=e[e.length-1].range,o=new D(i.startLineNumber,i.startColumn,s.endLineNumber,s.endColumn);let r=i.startLineNumber,a=i.startColumn;const l=[];for(let f=0,m=e.length;f<m;f++){const p=e[f],b=p.range;t=t||p.forceMoveMarkers,l.push(this.getValueInRange(new D(r,a,b.startLineNumber,b.startColumn))),p.text.length>0&&l.push(p.text),r=b.endLineNumber,a=b.endColumn}const c=l.join(""),[d,u,h]=Zm(c);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:c,eolCount:d,firstLineLength:u,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(Cy._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const s=e[i],o=s.range.startLineNumber,r=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(o===a&&r===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new D(o,r,a,l);t.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,s){return this._pieceTree.findMatchesLineByLine(e,t,i,s)}static _getInverseEditRanges(e){const t=[];let i=0,s=0,o=null;for(let r=0,a=e.length;r<a;r++){const l=e[r];let c,d;o?o.range.endLineNumber===l.range.startLineNumber?(c=i,d=s+(l.range.startColumn-o.range.endColumn)):(c=i+(l.range.startLineNumber-o.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let u;if(l.text.length>0){const h=l.eolCount+1;h===1?u=new D(c,d,c,d+l.firstLineLength):u=new D(c,d,c+h-1,l.lastLineLength+1)}else u=new D(c,d,c,d);i=u.endLineNumber,s=u.endColumn,t.push(u),o=l}return t}static _sortOpsAscending(e,t){const i=D.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=D.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class q9e{constructor(e,t,i,s,o,r,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=s,this._crlf=o,this._containsRTL=r,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,r=i.length;o<r;o++){const a=i[o].buffer.replace(/\r\n|\r|\n/g,t),l=ah(a);i[o]=new r_(a,l)}const s=new Cy(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}class sme{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&CK(e)&&(this.BOM=$Re,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=z9e(this._tmpLineStarts,e);this.chunks.push(new r_(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=CC(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Yue(e)))}finish(e=!0){return this._finish(),new q9e(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=ah(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class G9e{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(t===0){this.insert(e,i);return}else if(i===0){this.delete(e,t);return}const s=this._store.slice(0,e),o=this._store.slice(e+t),r=Z9e(i,this._default);this._store=s.concat(r,o)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const i=[];for(let s=0;s<t;s++)i[s]=this._default;this._store=h4(this._store,e,i)}}function Z9e(n,e){const t=[];for(let i=0;i<n;i++)t[i]=e;return t}class Y9e{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class P6{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new Y9e(e,[t]))}finalize(){return this._tokens}}class X9e{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new A6(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class Q9e extends X9e{constructor(e,t,i,s){super(e,t),this._textModel=i,this._languageIdCodec=s}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const s=this.getFirstInvalidLine();if(!s||s.lineNumber>t)break;const o=this._textModel.getLineContent(s.lineNumber),r=LS(this._languageIdCodec,i,this.tokenizationSupport,o,!0,s.startState);e.add(s.lineNumber,r.tokens),this.store.setEndState(s.lineNumber,r.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const s=this._textModel.getLanguageId(),o=this._textModel.getLineContent(e.lineNumber),r=o.substring(0,e.column-1)+t+o.substring(e.column-1),a=LS(this._languageIdCodec,s,this.tokenizationSupport,r,!0,i),l=new us(a.tokens,r,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,i){const s=e.lineNumber,o=e.column,r=this.getStartState(s);if(!r)return null;const a=this._textModel.getLineContent(s),l=a.substring(0,o-1)+i+a.substring(o-1+t),c=this._textModel.getLanguageIdAtPosition(s,0),d=LS(this._languageIdCodec,c,this.tokenizationSupport,l,!0,r);return new us(d.tokens,l,this._languageIdCodec)}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let s=this.guessStartState(t);const o=this._textModel.getLanguageId();for(let r=t;r<=i;r++){const a=this._textModel.getLineContent(r),l=LS(this._languageIdCodec,o,this.tokenizationSupport,a,!0,s);e.add(r,l.tokens),s=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const i=[];let s=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(i.push(this._textModel.getLineContent(a)),t=l,s=this.getStartState(a),s))break}s||(s=this.tokenizationSupport.getInitialState()),i.reverse();const o=this._textModel.getLanguageId();let r=s;for(const a of i)r=LS(this._languageIdCodec,o,this.tokenizationSupport,a,!1,r).endState;return r}}class A6{constructor(e){this.lineCount=e,this._tokenizationStateStore=new J9e,this._invalidEndStatesLineNumbers=new e8e,this._invalidEndStatesLineNumbers.addRange(new vt(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new Zt("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new vt(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new vt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[i]=Zm(t.text);this.acceptChange(new at(t.range.startLineNumber,t.range.endLineNumber+1),i+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new vt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const i=this.getStartState(t,e);if(!i)throw new Zt("Start state must be defined");return{lineNumber:t,startState:i}}}class J9e{constructor(){this._lineEndStates=new G9e(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return i&&i.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}}class e8e{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(i=>i.contains(e));if(t!==-1){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new vt(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new vt(i.start,e):this._ranges.splice(t,1,new vt(i.start,e),new vt(e+1,i.endExclusive))}}addRange(e){vt.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let s=i;for(;!(s>=this._ranges.length||e.endExclusive<this._ranges[s].start);)s++;const o=t-e.length;for(let r=s;r<this._ranges.length;r++)this._ranges[r]=this._ranges[r].delta(o);if(i===s){const r=new vt(e.start,e.start+t);r.isEmpty||this._ranges.splice(i,0,r)}else{const r=Math.min(e.start,this._ranges[i].start),a=Math.max(e.endExclusive,this._ranges[s-1].endExclusive),l=new vt(r,a+o);l.isEmpty?this._ranges.splice(i,s-i):this._ranges.splice(i,s-i,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function LS(n,e,t,i,s,o){let r=null;if(t)try{r=t.tokenizeEncoded(i,s,o.clone())}catch(a){et(a)}return r||(r=J4(n.encodeLanguageId(e),o)),us.convertToEndOffset(r.tokens,i.length),r}class t8e{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,nhe(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?Cue(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new P6,i=ds.create(!1);do if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var i;const t=(i=this._tokenizerWithStateStore)==null?void 0:i.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new at(e,t))}}class i8e{constructor(){this._onDidChangeVisibleRanges=new $,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new n8e(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class n8e{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const i=e.map(s=>new at(s.startLineNumber,s.endLineNumber+1));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}class s8e extends G{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new li(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){Vi(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class ome extends G{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new $),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new $),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}class ate extends ome{constructor(e,t,i,s){super(t,i,s),this._treeSitterService=e,this._tokenizationSupport=null,this._initialize()}_initialize(){const e=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==e)&&(this._lastLanguageId=e,this._tokenizationSupport=Y9.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const i=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(i)return new us(i,t,this._languageIdCodec)}return us.createEmpty(t,this._languageIdCodec)}resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,i){return 0}tokenizeLineWithEdit(e,t,i){return null}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}}const rme=kt("treeSitterParserService"),lh=new Uint32Array(0).buffer;class Ud{static deleteBeginning(e,t){return e===null||e===lh?e:Ud.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===lh)return e;const i=Ih(e),s=i[i.length-2];return Ud.delete(e,t,s)}static delete(e,t,i){if(e===null||e===lh||t===i)return e;const s=Ih(e),o=s.length>>>1;if(t===0&&s[s.length-2]===i)return lh;const r=us.findIndexInTokensArray(s,t),a=r>0?s[r-1<<1]:0,l=s[r<<1];if(i<l){const f=i-t;for(let m=r;m<o;m++)s[m<<1]-=f;return e}let c,d;a!==t?(s[r<<1]=t,c=r+1<<1,d=t):(c=r<<1,d=a);const u=i-t;for(let f=r+1;f<o;f++){const m=s[f<<1]-u;m>d&&(s[c++]=m,s[c++]=s[(f<<1)+1],d=m)}if(c===s.length)return e;const h=new Uint32Array(c);return h.set(s.subarray(0,c),0),h.buffer}static append(e,t){if(t===lh)return e;if(e===lh)return t;if(e===null)return e;if(t===null)return null;const i=Ih(e),s=Ih(t),o=s.length>>>1,r=new Uint32Array(i.length+s.length);r.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<o;c++)r[a++]=s[c<<1]+l,r[a++]=s[(c<<1)+1];return r.buffer}static insert(e,t,i){if(e===null||e===lh)return e;const s=Ih(e),o=s.length>>>1;let r=us.findIndexInTokensArray(s,t);r>0&&s[r-1<<1]===t&&r--;for(let a=r;a<o;a++)s[a<<1]+=i;return e}}function Ih(n){return n instanceof Uint32Array?n:new Uint32Array(n)}class nN{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==lh)return new us(Ih(s),i,this._languageIdCodec);const o=new Uint32Array(2);return o[0]=i.length,o[1]=lte(this._languageIdCodec.encodeLanguageId(e)),new us(o,i,this._languageIdCodec)}static _massageTokens(e,t,i){const s=i?Ih(i):null;if(t===0){let o=!1;if(s&&s.length>1&&(o=Jo.getLanguageId(s[1])!==e),!o)return lh}if(!s||s.length===0){const o=new Uint32Array(2);return o[0]=t,o[1]=lte(e),o.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[];for(let s=0;s<t;s++)i[s]=null;this._lineTokens=h4(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,s,o){const r=nN._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=r,o?!nN._equals(a,r):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=Ih(e),s=Ih(t);if(i.length!==s.length)return!1;for(let o=0,r=i.length;o<r;o++)if(i[o]!==s[o])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new U(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Ud.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Ud.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let s=null;i<this._len&&(s=Ud.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=Ud.append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=Ud.insert(this._lineTokens[s],e.column-1,i);return}this._lineTokens[s]=Ud.deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=Ud.insert(this._lineTokens[s],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const i=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];let a=0,l=0,c=!1;for(let d=r.startLineNumber;d<=r.endLineNumber;d++)c?(this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),r.getLineTokens(d),!1),l=d):this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),r.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&i.push({fromLineNumber:a,toLineNumber:l})}return{changes:i}}}function lte(n){return(n<<0|0|0|32768|2<<24|1024)>>>0}class Fq{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const o=t[0].getRange(),r=t[t.length-1].getRange();if(!o||!r)return e;i=e.plusRange(o).plusRange(r)}let s=null;for(let o=0,r=this._pieces.length;o<r;o++){const a=this._pieces[o];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){s=s||{index:o};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(o,1),o--,r--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){s=s||{index:o};continue}const[l,c]=a.split(i);if(l.isEmpty()){s=s||{index:o};continue}c.isEmpty()||(this._pieces.splice(o,1,l,c),o++,r++,s=s||{index:o})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=h4(this._pieces,s.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const i=this._pieces;if(i.length===0)return t;const s=Fq._findFirstPieceWithLine(i,e),o=i[s].getLineTokens(e);if(!o)return t;const r=t.getCount(),a=o.getCount();let l=0;const c=[];let d=0,u=0;const h=(f,m)=>{f!==u&&(u=f,c[d++]=f,c[d++]=m)};for(let f=0;f<a;f++){const m=o.getStartCharacter(f),p=o.getEndCharacter(f),b=o.getMetadata(f),v=((b&1?2048:0)|(b&2?4096:0)|(b&4?8192:0)|(b&8?16384:0)|(b&16?16744448:0)|(b&32?4278190080:0))>>>0,w=~v>>>0;for(;l<r&&t.getEndOffset(l)<=m;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<m&&h(m,t.getMetadata(l));l<r&&t.getEndOffset(l)<p;)h(t.getEndOffset(l),t.getMetadata(l)&w|b&v),l++;if(l<r)h(p,t.getMetadata(l)&w|b&v),t.getEndOffset(l)===p&&l++;else{const y=Math.min(Math.max(0,l-1),r-1);h(p,t.getMetadata(y)&w|b&v)}}for(;l<r;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new us(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,s=e.length-1;for(;i<s;){let o=i+Math.floor((s-i)/2);if(e[o].endLineNumber<t)i=o+1;else if(e[o].startLineNumber>t)s=o-1;else{for(;o>i&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return i}acceptEdit(e,t,i,s,o){for(const r of this._pieces)r.acceptEdit(e,t,i,s,o)}}var o8e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},nB=function(n,e){return function(t,i){e(t,i,n)}},MT;let O6=MT=class extends Yge{constructor(e,t,i,s,o,r,a){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=i,this._attachedViews=s,this._languageService=o,this._languageConfigurationService=r,this._treeSitterService=a,this._semanticTokens=new Fq(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new $),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new $),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new $),this.onDidChangeTokens=this._onDidChangeTokens.event,this._tokensDisposables=this._register(new ne),this._register(this._languageConfigurationService.onDidChange(l=>{l.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(pe.filter(Y9.onDidChange,l=>l.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}createGrammarTokens(){return this._register(new cte(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new ate(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(e){var i;const t=this._tokens!==void 0;(i=this._tokens)==null||i.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(s=>{this._emitModelTokensChangedEvent(s)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(s=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),t&&this._tokens.resetTokenization()}createPreferredTokenProvider(){Y9.get(this._languageId)?this._tokens instanceof ate||this.createTokens(!0):this._tokens instanceof cte||this.createTokens(!1)}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[i,s,o]=Zm(t.text);this._semanticTokens.acceptEdit(t.range,i,s,o,t.text.length>0?t.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(e)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new Zt("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this._tokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),s=this.getLineTokens(t.lineNumber),o=s.findTokenIndexAtOffset(t.column-1),[r,a]=MT._findLanguageBoundaries(s,o),l=yk(t.column,this.getLanguageConfiguration(s.getLanguageId(o)).getWordDefinition(),i.substring(r,a),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(o>0&&r===t.column-1){const[c,d]=MT._findLanguageBoundaries(s,o-1),u=yk(t.column,this.getLanguageConfiguration(s.getLanguageId(o-1)).getWordDefinition(),i.substring(c,d),c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let s=0;for(let r=t;r>=0&&e.getLanguageId(r)===i;r--)s=e.getStartOffset(r);let o=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===i;r++)o=e.getEndOffset(r);return[s,o]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new U(e,t)),s=this.getLineTokens(i.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};O6=MT=o8e([nB(4,ji),nB(5,Yi),nB(6,rme)],O6);class cte extends ome{constructor(e,t,i,s){super(e,t,i),this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new es),this._tokens=new nN(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new es),this._attachedViewStates=this._register(new uK),this._register(nn.onDidChange(o=>{const r=this.getLanguageId();o.changedLanguages.indexOf(r)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(s.onDidChangeVisibleRanges(({view:o,state:r})=>{if(r){let a=this._attachedViewStates.get(o);a||(a=new s8e(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(o,a)),a.handleStateChange(r)}else this._attachedViewStates.deleteAndDispose(o)}))}resetTokenization(e=!0){var o;this._tokens.flush(),(o=this._debugBackgroundTokens)==null||o.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new A6(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const r=nn.get(this.getLanguageId());if(!r)return[null,null];let a;try{a=r.getInitialState()}catch(l){return et(l),[null,null]}return[r,a]},[i,s]=t();if(i&&s?this._tokenizer=new Q9e(this._textModel.getLineCount(),i,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const r={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var d;if(!this._tokenizer)return;const c=this._tokenizer.store.getFirstInvalidEndStateLineNumber();c!==null&&a>=c&&((d=this._tokenizer)==null||d.store.setEndState(a,l))}};i&&i.createBackgroundTokenizer&&!i.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,r)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new t8e(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),i!=null&&i.backgroundTokenizerShouldOnlyVerifyTokens&&i.createBackgroundTokenizer?(this._debugBackgroundTokens=new nN(this._languageIdCodec),this._debugBackgroundStates=new A6(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)==null||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)==null||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)==null||e.handleChanges()}handleDidChangeContent(e){var t,i,s;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const o of e.changes){const[r,a]=Zm(o.text);this._tokens.acceptEdit(o.range,r,a),(t=this._debugBackgroundTokens)==null||t.acceptEdit(o.range,r,a)}(i=this._debugBackgroundStates)==null||i.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(s=this._defaultBackgroundTokenizer)==null||s.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=at.joinMany([...this._attachedViewStates].map(([t,i])=>i.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var r,a;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const i=new P6,{heuristicTokens:s}=this._tokenizer.tokenizeHeuristically(i,e,t),o=this.setTokens(i.finalize());if(s)for(const l of o.changes)(r=this._backgroundTokenizer.value)==null||r.requestTokens(l.fromLineNumber,l.toLineNumber+1);(a=this._defaultBackgroundTokenizer)==null||a.checkFinished()}forceTokenization(e){var i,s;const t=new P6;(i=this._tokenizer)==null||i.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),(s=this._defaultBackgroundTokenizer)==null||s.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){var s;const t=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const o=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!i.equals(o)&&((s=this._debugBackgroundTokenizer.value)!=null&&s.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const s=this._textModel.validatePosition(new U(e,t));return this.forceTokenization(s.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(s,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;const s=this._textModel.validatePosition(e);return this.forceTokenization(s.lineNumber),this._tokenizer.tokenizeLineWithEdit(s,t,i)}get hasTokens(){return this._tokens.hasTokens}}class r8e{constructor(){this.changeType=1}}class cd{static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",s=0;for(const o of t)i+=e.substring(s,o.column-1),s=o.column-1,i+=o.options.content;return i+=e.substring(s),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new cd(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new cd(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,s)=>i.lineNumber===s.lineNumber?i.column===s.column?i.order-s.order:i.column-s.column:i.lineNumber-s.lineNumber),t}constructor(e,t,i,s,o){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=s,this.order=o}}class dte{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class a8e{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class l8e{constructor(e,t,i,s){this.changeType=4,this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class c8e{constructor(){this.changeType=5}}class Sy{constructor(e,t,i,s){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),s=t.versionId,o=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new Sy(i,s,o,r)}}class ame{constructor(e){this.changes=e}}class Z_{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Sy.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=Z_._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new Z_(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),s=t.eol,o=t.versionId,r=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:i,eol:s,isEolChange:c,versionId:o,isUndoing:r,isRedoing:a,isFlush:l}}}var d8e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},uD=function(n,e){return function(t,i){e(t,i,n)}},$p;function u8e(n){const e=new sme;return e.acceptChunk(n),e.finish()}function h8e(n){const e=new sme;let t;for(;typeof(t=n.read())=="string";)e.acceptChunk(t);return e.finish()}function ute(n,e){let t;return typeof n=="string"?t=u8e(n):tAe(n)?t=h8e(n):t=n,t.create(e)}let hD=0;const f8e=999,g8e=1e4;class m8e{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;do{const s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,i+=s.length),i>=64*1024)return e.join("")}while(!0)}}const kS=()=>{throw new Error("Invalid change accessor")};var Ac;let zc=(Ac=class extends G{static resolveOptions(e,t){if(t.detectIndentation){const i=Jee(e,t.tabSize,t.insertSpaces);return new ST({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new ST(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return ql(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,s=null,o,r,a,l){super(),this._undoRedoService=o,this._languageService=r,this._languageConfigurationService=a,this.instantiationService=l,this._onWillDispose=this._register(new $),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new y8e(m=>this.handleBeforeFireDecorationsChangedEvent(m))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new $),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new $),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new $),this._eventEmitter=this._register(new C8e),this._languageSelectionListener=this._register(new es),this._deltaDecorationCallCnt=0,this._attachedViews=new i8e,hD++,this.id="$model"+hD,this.isForSimpleWidget=i.isForSimpleWidget,typeof s>"u"||s===null?this._associatedResource=Be.parse("inmemory://model/"+hD):this._associatedResource=s,this._attachedEditorCount=0;const{textBuffer:c,disposable:d}=ute(e,i.defaultEOL);this._buffer=c,this._bufferDisposable=d,this._options=$p.resolveOptions(this._buffer,i);const u=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new y9e(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new k9e(this,this._languageConfigurationService)),this._decorationProvider=this._register(new S9e(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(O6,this,this._bracketPairs,u,this._attachedViews);const h=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new D(1,1,h,this._buffer.getLineLength(h)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=f>$p.LARGE_FILE_SIZE_THRESHOLD||h>$p.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=f>$p.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=f>$p._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=Xue(hD),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new hte,this._commandManager=new Mq(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(u),this._register(this._languageConfigurationService.onDidChange(m=>{this._bracketPairs.handleLanguageConfigurationServiceChange(m),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(m)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new Cy([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=G.None}_assertNotDisposed(){if(this._isDisposed)throw new Zt("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new Z_(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw al();const{textBuffer:t,disposable:i}=ute(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,s,o,r,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:s}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:o,isRedoing:r,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueLengthInRange(i),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new hte,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Sy([new r8e],this._versionId,!1,!1),this._createContentChanged2(new D(1,1,o,r),0,s,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),s=this.getValueLengthInRange(i),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Sy([new c8e],this._versionId,!1,!1),this._createContentChanged2(new D(1,1,o,r),0,s,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,s=t.length;i<s;i++){const o=t[i],r=o.range,a=o.cachedAbsoluteStart-o.start,l=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),c=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);o.cachedAbsoluteStart=l,o.cachedAbsoluteEnd=c,o.cachedVersionId=e,o.start=l-a,o.end=c-a,Qm(o)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let s=1;s<=i;s++){const o=this._buffer.getLineLength(s);o>=g8e?t+=o:e+=o}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,i=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,s=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,o=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new ST({tabSize:t,indentSize:i,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:o,bracketPairColorizationOptions:r});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const i=Jee(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),Iq(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(Zue.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Zt("Operation would exceed heap memory limits");const i=this.getFullModelRange(),s=this.getValueInRange(i,e);return t?this._buffer.getBOM()+s:s}createSnapshot(e=!1){return new m8e(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+s:s}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Zt("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Zt("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Zt("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Zt("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Zt("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Zt("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,s=e.startColumn;let o=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),r=Math.floor(typeof s=="number"&&!isNaN(s)?s:1);if(o<1)o=1,r=1;else if(o>t)o=t,r=this.getLineMaxColumn(o);else if(r<=1)r=1;else{const u=this.getLineMaxColumn(o);r>=u&&(r=u)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{const u=this.getLineMaxColumn(c);d>=u&&(d=u)}return i===o&&s===r&&a===c&&l===d&&e instanceof D&&!(e instanceof Ie)?e:new D(o,r,c,d)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const s=this._buffer.getLineCount();if(e>s)return!1;if(t===1)return!0;const o=this.getLineMaxColumn(e);if(t>o)return!1;if(i===1){const r=this._buffer.getLineCharCode(e,t-2);if(qn(r))return!1}return!0}_validatePosition(e,t,i){const s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),r=this._buffer.getLineCount();if(s<1)return new U(1,1);if(s>r)return new U(r,this.getLineMaxColumn(r));if(o<=1)return new U(s,1);const a=this.getLineMaxColumn(s);if(o>=a)return new U(s,a);if(i===1){const l=this._buffer.getLineCharCode(s,o-2);if(qn(l))return new U(s,o-1)}return new U(s,o)}validatePosition(e){return this._assertNotDisposed(),e instanceof U&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,s=e.startColumn,o=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(i,s,0)||!this._isValidPosition(o,r,0))return!1;if(t===1){const a=s>1?this._buffer.getLineCharCode(i,s-2):0,l=r>1&&r<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,r-2):0,c=qn(a),d=qn(l);return!c&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof D&&!(e instanceof Ie)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),s=this._validatePosition(e.endLineNumber,e.endColumn,0),o=i.lineNumber,r=i.column,a=s.lineNumber,l=s.column;{const c=r>1?this._buffer.getLineCharCode(o,r-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=qn(c),h=qn(d);return!u&&!h?new D(o,r,a,l):o===a&&r===l?new D(o,r-1,a,l-1):u&&h?new D(o,r-1,a,l+1):u?new D(o,r-1,a,l):new D(o,r,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new D(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,s){return this._buffer.findMatchesLineByLine(e,t,i,s)}findMatches(e,t,i,s,o,r,a=f8e){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>D.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,h)=>u.startLineNumber-h.startLineNumber||u.startColumn-h.startColumn);const c=[];c.push(l.reduce((u,h)=>D.areIntersecting(u,h)?u.plusRange(h):(c.push(u),h)));let d;if(!i&&e.indexOf(`
`)<0){const h=new Up(e,i,s,o).parseSearchRequest();if(!h)return[];d=f=>this.findMatchesLineByLine(f,h,r,a)}else d=u=>KE.findMatches(this,new Up(e,i,s,o),u,r,a);return c.map(d).reduce((u,h)=>u.concat(h),[])}findNextMatch(e,t,i,s,o,r){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new Up(e,i,s,o).parseSearchRequest();if(!c)return null;const d=this.getLineCount();let u=new D(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),h=this.findMatchesLineByLine(u,c,r,1);return KE.findNextMatch(this,new Up(e,i,s,o),a,r),h.length>0||(u=new D(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),h=this.findMatchesLineByLine(u,c,r,1),h.length>0)?h[0]:null}return KE.findNextMatch(this,new Up(e,i,s,o),a,r)}findPreviousMatch(e,t,i,s,o,r){this._assertNotDisposed();const a=this.validatePosition(t);return KE.findPreviousMatch(this,new Up(e,i,s,o),a,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof D3?e:new D3(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,s=e.length;i<s;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,s){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,s)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,s){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const o=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let r=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let d=!1;for(let u=0,h=o.length;u<h;u++){const f=o[u].range,m=f.startLineNumber>c.endLineNumber,p=c.startLineNumber>f.endLineNumber;if(!m&&!p){d=!0;break}}if(!d){r=!1;break}}if(r)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],d=this.getLineMaxColumn(c);let u=!0;for(let h=0,f=o.length;h<f;h++){const m=o[h].range,p=o[h].text;if(!(c<m.startLineNumber||c>m.endLineNumber)&&!(c===m.startLineNumber&&m.startColumn===d&&m.isEmpty()&&p&&p.length>0&&p.charAt(0)===`
`)&&!(c===m.startLineNumber&&m.startColumn===1&&m.isEmpty()&&p&&p.length>0&&p.charAt(p.length-1)===`
`)){u=!1;break}}if(u){const h=new D(c,1,c,d);t.push(new D3(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,s)}_applyUndo(e,t,i,s){const o=e.map(r=>{const a=this.getPositionAt(r.newPosition),l=this.getPositionAt(r.newEnd);return{range:new D(a.lineNumber,a.column,l.lineNumber,l.column),text:r.oldText}});this._applyUndoRedoEdits(o,t,!0,!1,i,s)}_applyRedo(e,t,i,s){const o=e.map(r=>{const a=this.getPositionAt(r.oldPosition),l=this.getPositionAt(r.oldEnd);return{range:new D(a.lineNumber,a.column,l.lineNumber,l.column),text:r.newText}});this._applyUndoRedoEdits(o,t,!1,!0,i,s)}_applyUndoRedoEdits(e,t,i,s,o,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=s,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(o)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),o=this._buffer.getLineCount(),r=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,r.length!==0){for(let c=0,d=r.length;c<d;c++){const u=r[c];this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=i;for(let c=0,d=r.length;c<d;c++){const u=r[c],[h]=Zm(u.text);this._onDidChangeDecorations.fire();const f=u.range.startLineNumber,m=u.range.endLineNumber,p=m-f,b=h,v=Math.min(p,b),w=b-p,y=o-l-w+f,C=y,S=y+b,x=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new U(C,1)),this.getOffsetAt(new U(S,this.getLineMaxColumn(S))),0),k=cd.fromDecorations(x),N=new gf(k);for(let E=v;E>=0;E--){const B=f+E,A=y+E;N.takeFromEndWhile(W=>W.lineNumber>A);const O=N.takeFromEndWhile(W=>W.lineNumber===A);a.push(new dte(B,this.getLineContent(A),O))}if(v<p){const E=f+v;a.push(new a8e(E+1,m))}if(v<b){const E=new gf(k),B=f+v,A=b-v,O=o-l-A+B+1,W=[],T=[];for(let M=0;M<A;M++){const z=O+M;T[M]=this.getLineContent(z),E.takeWhile(ee=>ee.lineNumber<z),W[M]=E.takeWhile(ee=>ee.lineNumber===z)}a.push(new l8e(B+1,f+b,T,W))}l+=w}this._emitContentChangedEvent(new Sy(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const i=Array.from(e).map(s=>new dte(s,this.getLineContent(s),this._getInjectedTextInLine(s)));this._onDidChangeInjectedText.fire(new ame(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(o,r)=>this._deltaDecorationsImpl(e,[],[{range:o,options:r}])[0],changeDecoration:(o,r)=>{this._changeDecorationImpl(o,r)},changeDecorationOptions:(o,r)=>{this._changeDecorationOptionsImpl(o,gte(r))},removeDecoration:o=>{this._deltaDecorationsImpl(e,[o],[])},deltaDecorations:(o,r)=>o.length===0&&r.length===0?[]:this._deltaDecorationsImpl(e,o,r)};let s=null;try{s=t(i)}catch(o){et(o)}return i.addDecoration=kS,i.changeDecoration=kS,i.changeDecorationOptions=kS,i.removeDecoration=kS,i.deltaDecorations=kS,s}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),et(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const s=e?this._decorations[e]:null;if(!s)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:fte[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const o=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),r,a,o),s.setOptions(fte[i]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,s=t.length;i<s;i++){const o=t[i];this._decorationsTree.delete(o),delete this._decorations[o.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,s=!1,o=!1){const r=this.getLineCount(),a=Math.min(r,Math.max(1,e)),l=Math.min(r,Math.max(1,t)),c=this.getLineMaxColumn(l),d=new D(a,1,l,c),u=this._getDecorationsInRange(d,i,s,o);return A9(u,this._decorationProvider.getDecorationsInRange(d,i,s)),u}getDecorationsInRange(e,t=0,i=!1,s=!1,o=!1){const r=this.validateRange(e),a=this._getDecorationsInRange(r,t,i,o);return A9(a,this._decorationProvider.getDecorationsInRange(r,t,i,s)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return cd.fromDecorations(s).filter(o=>o.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,s){const o=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,o,r,t,i,s)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const s=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),r=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,r,s),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const s=!!(i.options.overviewRuler&&i.options.overviewRuler.color),o=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before||t.before){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}const r=s!==o,a=_8e(t)!==PT(i);r||a?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i,s=!1){const o=this.getVersionId(),r=t.length;let a=0;const l=i.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const d=new Array(l);for(;a<r||c<l;){let u=null;if(a<r){do u=this._decorations[t[a++]];while(!u&&a<r);if(u){if(u.options.after){const h=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(u.options.before){const h=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(u),s||this._onDidChangeDecorations.checkAffectedAndFire(u.options)}}if(c<l){if(!u){const v=++this._lastDecorationId,w=`${this._instanceId};${v}`;u=new eme(w,0,0),this._decorations[w]=u}const h=i[c],f=this._validateRangeRelaxedNoAllocations(h.range),m=gte(h.options),p=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),b=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);u.ownerId=e,u.reset(o,p,b,f),u.setOptions(m),u.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),u.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),s||this._onDidChangeDecorations.checkAffectedAndFire(m),this._decorationsTree.insert(u),d[c]=u.id,c++}else u&&delete this._decorations[u.id]}return d}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return p8e(this.getLineContent(e))+1}},$p=Ac,Ac._MODEL_SYNC_LIMIT=50*1024*1024,Ac.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,Ac.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,Ac.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024,Ac.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:zs.tabSize,indentSize:zs.indentSize,insertSpaces:zs.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:zs.trimAutoWhitespace,largeFileOptimizations:zs.largeFileOptimizations,bracketPairColorizationOptions:zs.bracketPairColorizationOptions},Ac);zc=$p=d8e([uD(4,UK),uD(5,ji),uD(6,Yi),uD(7,Ae)],zc);function p8e(n){let e=0;for(const t of n)if(t===" "||t==="	")e++;else break;return e}function sB(n){return!!(n.options.overviewRuler&&n.options.overviewRuler.color)}function _8e(n){return!!n.after||!!n.before}function PT(n){return!!n.options.after||!!n.options.before}class hte{constructor(){this._decorationsTree0=new eB,this._decorationsTree1=new eB,this._injectedTextDecorationsTree=new eB}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,s,o,r){const a=e.getVersionId(),l=this._intervalSearch(t,i,s,o,a,r);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,i,s,o,r){const a=this._decorationsTree0.intervalSearch(e,t,i,s,o,r),l=this._decorationsTree1.intervalSearch(e,t,i,s,o,r),c=this._injectedTextDecorationsTree.intervalSearch(e,t,i,s,o,r);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,i,s){const o=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,i,s,!1,o,!1);return this._ensureNodesHaveRanges(e,r).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const i=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,s).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,i,s,o){const r=e.getVersionId(),a=this._search(t,i,s,r,o);return this._ensureNodesHaveRanges(e,a)}_search(e,t,i,s,o){if(i)return this._decorationsTree1.search(e,t,s,o);{const r=this._decorationsTree0.search(e,t,s,o),a=this._decorationsTree1.search(e,t,s,o),l=this._injectedTextDecorationsTree.search(e,t,s,o);return r.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){PT(e)?this._injectedTextDecorationsTree.insert(e):sB(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){PT(e)?this._injectedTextDecorationsTree.delete(e):sB(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){PT(e)?this._injectedTextDecorationsTree.resolveNode(e,t):sB(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,s){this._decorationsTree0.acceptReplace(e,t,i,s),this._decorationsTree1.acceptReplace(e,t,i,s),this._injectedTextDecorationsTree.acceptReplace(e,t,i,s)}}function Nd(n){return n.replace(/[^a-z0-9\-_]/gi," ")}class lme{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class b8e extends lme{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Na.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class v8e{constructor(e){this.position=(e==null?void 0:e.position)??Jl.Center,this.persistLane=e==null?void 0:e.persistLane}}class w8e extends lme{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?oe.fromHex(e):t.getColor(e.id)}}class Jm{static from(e){return e instanceof Jm?e:new Jm(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class rt{static register(e){return new rt(e)}static createDynamic(e){return new rt(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?Nd(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?Nd(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new b8e(e.overviewRuler):null,this.minimap=e.minimap?new w8e(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new v8e(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?Nd(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?Nd(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?Nd(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?ARe(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?Nd(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?Nd(e.marginClassName):null,this.inlineClassName=e.inlineClassName?Nd(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?Nd(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?Nd(e.afterContentClassName):null,this.after=e.after?Jm.from(e.after):null,this.before=e.before?Jm.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}rt.EMPTY=rt.register({description:"empty"});const fte=[rt.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),rt.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),rt.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),rt.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function gte(n){return n instanceof rt?n:rt.createDynamic(n)}class y8e extends G{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new $),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)==null||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){var t,i;this._affectsMinimap||(this._affectsMinimap=!!((t=e.minimap)!=null&&t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!((i=e.overviewRuler)!=null&&i.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class C8e extends G{constructor(){super(),this._fastEmitter=this._register(new $),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new $),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var S8e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},fD=function(n,e){return function(t,i){e(t,i,n)}},V0;function Tp(n){return n.toString()}let x8e=class{constructor(e,t,i){this.model=e,this._modelEventListeners=new ne,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(s=>i(e,s)))}dispose(){this._modelEventListeners.dispose()}};const L8e=Mo||Lt?1:2;class k8e{constructor(e,t,i,s,o,r,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=s,this.heapSize=o,this.sha1=r,this.versionId=a,this.alternativeVersionId=l}}var nb;let F6=(nb=class extends G{constructor(e,t,i,s){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._instantiationService=s,this._onModelAdded=this._register(new $),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new $),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new $),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(o=>this._updateModelOptions(o))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var h;let i=zs.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(i=f),i<1&&(i=1)}let s="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(s=Math.max(f,1))}let o=zs.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(o=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let r=L8e;const a=e.eol;a===`\r
`?r=2:a===`
`&&(r=1);let l=zs.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(l=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=zs.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let d=zs.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(d=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let u=zs.bracketPairColorizationOptions;return(h=e.editor)!=null&&h.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(u={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:s,insertSpaces:o,detectIndentation:c,defaultEOL:r,trimAutoWhitespace:l,largeFileOptimizations:d,bracketPairColorizationOptions:u}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:Mr===3||Mr===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){const s=typeof e=="string"?e:e.languageId;let o=this._modelCreationOptionsByLanguageAndResource[s+t];if(!o){const r=this._configurationService.getValue("editor",{overrideIdentifier:s,resource:t}),a=this._getEOL(t,s);o=V0._readModelOptions({editor:r,eol:a},i),this._modelCreationOptionsByLanguageAndResource[s+t]=o}return o}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let s=0,o=i.length;s<o;s++){const r=i[s],a=this._models[r],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const d=t[l+c],u=this.getCreationOptions(l,c,a.model.isForSimpleWidget);V0._setModelOptionsForModel(a.model,u,d)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&Ar(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Tp(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Tp(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Tp(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,s)=>i.time-s.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,s){const o=this.getCreationOptions(t,i,s),r=this._instantiationService.createInstance(zc,e,t,o,i);if(i&&this._disposedModels.has(Tp(i))){const c=this._removeDisposedModel(i),d=this._undoRedoService.getElements(i),u=this._getSHA1Computer(),h=u.canComputeSHA1(r)?u.computeSHA1(r)===c.sha1:!1;if(h||c.sharesUndoRedoStack){for(const f of d.past)Ch(f)&&f.matchesResource(i)&&f.setModel(r);for(const f of d.future)Ch(f)&&f.matchesResource(i)&&f.setModel(r);this._undoRedoService.setElementsValidFlag(i,!0,f=>Ch(f)&&f.matchesResource(i)),h&&(r._overwriteVersionId(c.versionId),r._overwriteAlternativeVersionId(c.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=Tp(r.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new x8e(r,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,i,s=!1){let o;return t?o=this._createModelData(e,t,i,s):o=this._createModelData(e,Do,i,s),this._onModelAdded.fire(o.model),o.model}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,s=t.length;i<s;i++){const o=t[i];e.push(this._models[o].model)}return e}getModel(e){const t=Tp(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===tt.file||e.scheme===tt.vscodeRemote||e.scheme===tt.vscodeUserData||e.scheme===tt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Tp(e.uri),i=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let o=!1,r=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const d of c.past)Ch(d)&&d.matchesResource(e.uri)&&(o=!0,r+=d.heapSize(e.uri),d.setModel(e.uri));for(const d of c.future)Ch(d)&&d.matchesResource(e.uri)&&(o=!0,r+=d.heapSize(e.uri),d.setModel(e.uri))}}const a=V0.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(o)if(!s&&(r>a||!l.canComputeSHA1(e))){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>Ch(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new k8e(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),s,r,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!s){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,s=e.getLanguageId(),o=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);V0._setModelOptionsForModel(e,r,o),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new B6}},V0=nb,nb.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,nb);F6=V0=S8e([fD(0,_t),fD(1,sfe),fD(2,UK),fD(3,Ae)],F6);const mA=class mA{canComputeSHA1(e){return e.getValueLength()<=mA.MAX_MODEL_SIZE}computeSHA1(e){const t=new J8,i=e.createSnapshot();let s;for(;s=i.read();)t.update(s);return t.digest()}};mA.MAX_MODEL_SIZE=10*1024*1024;let B6=mA;var W6;(function(n){n[n.PRESERVE=0]="PRESERVE",n[n.LAST=1]="LAST"})(W6||(W6={}));const Jv={Quickaccess:"workbench.contributions.quickaccess"};class N8e{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),Pe(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Yl([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}Zi.add(Jv.Quickaccess,new N8e);const I8e={ctrlCmd:!1,alt:!1};var BC;(function(n){n[n.Blur=1]="Blur",n[n.Gesture=2]="Gesture",n[n.Other=3]="Other"})(BC||(BC={}));var Ic;(function(n){n[n.NONE=0]="NONE",n[n.FIRST=1]="FIRST",n[n.SECOND=2]="SECOND",n[n.LAST=3]="LAST"})(Ic||(Ic={}));var Li;(function(n){n[n.First=1]="First",n[n.Second=2]="Second",n[n.Last=3]="Last",n[n.Next=4]="Next",n[n.Previous=5]="Previous",n[n.NextPage=6]="NextPage",n[n.PreviousPage=7]="PreviousPage",n[n.NextSeparator=8]="NextSeparator",n[n.PreviousSeparator=9]="PreviousSeparator"})(Li||(Li={}));var eM;(function(n){n[n.Title=1]="Title",n[n.Inline=2]="Inline"})(eM||(eM={}));const Cl=kt("quickInputService");var E8e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},mte=function(n,e){return function(t,i){e(t,i,n)}};let H6=class extends G{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Zi.as(Jv.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var m,p;const[s,o]=this.getOrInstantiateProvider(e,i==null?void 0:i.enabledProviderPrefixes),r=this.visibleQuickAccess,a=r==null?void 0:r.descriptor;if(r&&o&&a===o){e!==o.prefix&&!(i!=null&&i.preserveValue)&&(r.picker.value=e),this.adjustValueSelection(r.picker,o,i);return}if(o&&!(i!=null&&i.preserveValue)){let b;if(r&&a&&a!==o){const v=r.value.substr(a.prefix.length);v&&(b=`${o.prefix}${v}`)}if(!b){const v=s==null?void 0:s.defaultFilterValue;v===W6.LAST?b=this.lastAcceptedPickerValues.get(o):typeof v=="string"&&(b=`${o.prefix}${v}`)}typeof b=="string"&&(e=b)}const l=(m=r==null?void 0:r.picker)==null?void 0:m.valueSelection,c=(p=r==null?void 0:r.picker)==null?void 0:p.value,d=new ne,u=d.add(this.quickInputService.createQuickPick({useSeparators:!0}));u.value=e,this.adjustValueSelection(u,o,i),u.placeholder=(i==null?void 0:i.placeholder)??(o==null?void 0:o.placeholder),u.quickNavigate=i==null?void 0:i.quickNavigateConfiguration,u.hideInput=!!u.quickNavigate&&!r,(typeof(i==null?void 0:i.itemActivation)=="number"||i!=null&&i.quickNavigateConfiguration)&&(u.itemActivation=(i==null?void 0:i.itemActivation)??Ic.SECOND),u.contextKey=o==null?void 0:o.contextKey,u.filterValue=b=>b.substring(o?o.prefix.length:0);let h;t&&(h=new S1,d.add(pe.once(u.onWillAccept)(b=>{b.veto(),u.hide()}))),d.add(this.registerPickerListeners(u,s,o,e,i));const f=d.add(new Gi);if(s&&d.add(s.provide(u,f.token,i==null?void 0:i.providerOptions)),pe.once(u.onDidHide)(()=>{u.selectedItems.length===0&&f.cancel(),d.dispose(),h==null||h.complete(u.selectedItems.slice(0))}),u.show(),l&&c===e&&(u.valueSelection=l),t)return h==null?void 0:h.p}adjustValueSelection(e,t,i){let s;i!=null&&i.preserveValue?s=[e.value.length,e.value.length]:s=[(t==null?void 0:t.prefix.length)??0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,i,s,o){const r=new ne,a=this.visibleQuickAccess={picker:e,descriptor:i,value:s};return r.add(Pe(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,o==null?void 0:o.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:o==null?void 0:o.enabledProviderPrefixes,preserveValue:!0,providerOptions:o==null?void 0:o.providerOptions}):a.value=l})),i&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),r}getOrInstantiateProvider(e,t){const i=this.registry.getQuickAccessProvider(e);if(!i||t&&!(t!=null&&t.includes(i.prefix)))return[void 0,void 0];let s=this.mapProviderToDescriptor.get(i);return s||(s=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,s)),[s,i]}};H6=E8e([mte(0,Cl),mte(1,Ae)],H6);class O1 extends Ba{constructor(e){super(),this._onChange=this._register(new $),this.onChange=this._onChange.event,this._onKeyDown=this._register(new $),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...Ke.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(_d().setupManagedHover(e.hoverDelegate??Wo("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,i=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),i.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,i=>{if(i.keyCode===10||i.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),i.preventDefault(),i.stopPropagation();return}this._onKeyDown.fire(i)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var D8e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};class cme{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}D8e([yn],cme.prototype,"toString",null);const T8e=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function R8e(n){const e=[];let t=0,i;for(;i=T8e.exec(n);){i.index-t>0&&e.push(n.substring(t,i.index));const[,s,o,,r]=i;r?e.push({label:s,href:o,title:r}):e.push({label:s,href:o}),t=i.index+i[0].length}return t<n.length&&e.push(n.substring(t)),new cme(e)}const oB={},M8e=new gq("quick-input-button-icon-");function P8e(n){if(!n)return;let e;const t=n.dark.toString();return oB[t]?e=oB[t]:(e=M8e.nextId(),h2(`.${e}, .hc-light .${e}`,`background-image: ${bf(n.light||n.dark)}`),h2(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${bf(n.dark)}`),oB[t]=e),e}function Kx(n,e,t){let i=n.iconClass||P8e(n.iconPath);return n.alwaysVisible&&(i=i?`${i} always-visible`:"always-visible"),{id:e,label:"",tooltip:n.tooltip||"",class:i,enabled:!0,run:t}}function A8e(n,e,t){ys(e);const i=R8e(n);let s=0;for(const o of i.nodes)if(typeof o=="string")e.append(...lm(o));else{let r=o.title;!r&&o.href.startsWith("command:")?r=_("executeCommand","Click to execute command '{0}'",o.href.substring(8)):r||(r=o.href);const a=ge("a",{href:o.href,title:r,tabIndex:s++},o.label);a.style.textDecoration="underline";const l=f=>{tMe(f)&&Dt.stop(f,!0),t.callback(o.href)},c=t.disposables.add(new It(a,fe.CLICK)).event,d=t.disposables.add(new It(a,fe.KEY_DOWN)).event,u=pe.chain(d,f=>f.filter(m=>{const p=new _i(m);return p.equals(10)||p.equals(3)}));t.disposables.add(qs.addTarget(a));const h=t.disposables.add(new It(a,yi.Tap)).event;pe.any(c,h,u)(l,null,t.disposables),e.appendChild(a)}}var O8e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},pte=function(n,e){return function(t,i){e(t,i,n)}};const dme="inQuickInput",F8e=new we(dme,!1,_("inQuickInput","Whether keyboard focus is inside the quick input control")),B8e=se.has(dme),ume="quickInputType",W8e=new we(ume,void 0,_("quickInputType","The type of the currently visible quick input")),hme="cursorAtEndOfQuickInputBox",H8e=new we(hme,!1,_("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),V8e=se.has(hme),V6={iconClass:Ke.asClassName(he.quickInputBack),tooltip:_("quickInput.back","Back"),handle:-1},pA=class pA extends G{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=pA.noPromptMessage,this._severity=vn.Ignore,this.onDidTriggerButtonEmitter=this._register(new $),this.onDidHideEmitter=this._register(new $),this.onWillHideEmitter=this._register(new $),this.onDisposeEmitter=this._register(new $),this.visibleDisposables=this._register(new ne),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!rd;this._ignoreFocusOut=e&&!rd,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(t=>t===V6),this._rightButtons=e.filter(t=>t!==V6&&t.location!==eM.Inline),this._inlineButtons=e.filter(t=>t.location===eM.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=BC.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=BC.Other){this.onWillHideEmitter.fire({reason:e})}update(){var s;if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?ys(this.ui.widget,this._widget):ys(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new oc,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const o=this._leftButtons.map((l,c)=>Kx(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.leftActionBar.push(o,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const r=this._rightButtons.map((l,c)=>Kx(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.rightActionBar.push(r,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const a=this._inlineButtons.map((l,c)=>Kx(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.inlineActionBar.push(a,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const o=((s=this.toggles)==null?void 0:s.filter(r=>r instanceof O1))??[];this.ui.inputBox.toggles=o}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,ys(this.ui.message),A8e(i,this.ui.message,{callback:o=>{this.ui.linkOpenerDelegate(o)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?_("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==vn.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};pA.noPromptMessage=_("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");let tM=pA;const _A=class _A extends tM{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new $),this.onWillAcceptEmitter=this._register(new $),this.onDidAcceptEmitter=this._register(new $),this.onDidCustomEmitter=this._register(new $),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=Ic.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new $),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new $),this.onDidTriggerItemButtonEmitter=this._register(new $),this.onDidTriggerSeparatorButtonEmitter=this._register(new $),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new vI,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?I8e:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(Li.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Vi(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&Vi(e,this._selectedItems,(i,s)=>i===s)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(EK(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&Vi(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return Q(this.ui.container,fe.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new _i(e),i=t.keyCode;this._quickNavigate.keybindings.some(r=>{const a=r.getChords();return a.length>1?!1:a[0].shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&i===6||a[0].ctrlKey&&i===5||a[0].metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let s=this.ariaLabel;!s&&i.inputBox&&(s=this.placeholder||_A.DEFAULT_ARIA_LABEL,this.title&&(s+=` - ${this.title}`)),this.ui.list.ariaLabel!==s&&(this.ui.list.ariaLabel=s??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case Ic.NONE:this._itemActivation=Ic.FIRST;break;case Ic.SECOND:this.ui.list.focus(Li.Second),this._itemActivation=Ic.FIRST;break;case Ic.LAST:this.ui.list.focus(Li.Last),this._itemActivation=Ic.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Li.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}};_A.DEFAULT_ARIA_LABEL=_("quickInputBox.ariaLabel","Type to narrow down results.");let iM=_A,j8e=class extends tM{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new $),this.onDidAcceptEmitter=this._register(new $),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}},j6=class extends EC{constructor(e,t){super("element",!1,i=>this.getOverrideOptions(i),e,t)}getOverrideOptions(e){const t=(Qn(e.content)?e.content.textContent??"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:t,skipFadeInAnimation:!0}}}};j6=O8e([pte(0,_t),pte(1,ju)],j6);oe.white.toString(),oe.white.toString();class nM extends G{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new $),this._onDidEscape=this._register(new $),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,s=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=s||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(qs.addTarget(this._element)),[fe.CLICK,yi.Tap].forEach(o=>{this._register(Q(this._element,o,r=>{if(!this.enabled){Dt.stop(r);return}this._onDidClick.fire(r)}))}),this._register(Q(this._element,fe.KEY_DOWN,o=>{const r=new _i(o);let a=!1;this.enabled&&(r.equals(3)||r.equals(10))?(this._onDidClick.fire(o),a=!0):r.equals(9)&&(this._onDidEscape.fire(o),this._element.blur(),a=!0),a&&Dt.stop(r,!0)})),this._register(Q(this._element,fe.MOUSE_OVER,o=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(Q(this._element,fe.MOUSE_OUT,o=>{this.updateBackground(!1)})),this.focusTracker=this._register(ld(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of lm(e))if(typeof i=="string"){if(i=i.trim(),i==="")continue;const s=document.createElement("span");s.textContent=i,t.push(s)}else t.push(i);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var s;if(this._label===e||td(this._label)&&td(e)&&y5e(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if(td(e)){const o=Q4(e,{inline:!0});o.dispose();const r=(s=o.element.querySelector("p"))==null?void 0:s.innerHTML;if(r){const a=dhe(r,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=a}else ys(t)}else this.options.supportIcons?ys(t,...this.getContentElements(e)):t.textContent=e;let i="";typeof this.options.title=="string"?i=this.options.title:this.options.title&&(i=R5e(e)),this.setTitle(i),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",i),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...Ke.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(_d().setupManagedHover(this.options.hoverDelegate??Wo("mouse"),this._element,e)):this._hover&&this._hover.update(e)}}class z6{constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=ae(e,ge(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=hv(this.countFormat,this.count),this.element.title=hv(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const _te="done",bte="active",rB="infinite",aB="infinite-long-running",vte="discrete",bA=class bA extends G{constructor(e,t){super(),this.progressSignal=this._register(new es),this.workedVal=0,this.showDelayedScheduler=this._register(new li(()=>Dr(this.element),0)),this.longRunningScheduler=this._register(new li(()=>this.infiniteLongRunning(),bA.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(t==null?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(bte,rB,aB,vte),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(_te),this.element.classList.contains(rB)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(vte,_te,aB),this.element.classList.add(bte,rB),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(aB)}getContainer(){return this.element}};bA.LONG_RUNNING_INFINITE_THRESHOLD=1e4;let U6=bA;const z8e=_("caseDescription","Match Case"),U8e=_("wordsDescription","Match Whole Word"),$8e=_("regexDescription","Use Regular Expression");class fme extends O1{constructor(e){super({icon:he.caseSensitive,title:z8e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Wo("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class gme extends O1{constructor(e){super({icon:he.wholeWord,title:U8e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Wo("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class mme extends O1{constructor(e){super({icon:he.regex,title:$8e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Wo("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class K8e{constructor(e,t=0,i=e.length,s=t-1){this.items=e,this.start=t,this.end=i,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class q8e{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new K8e(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const NS=ge;class G8e extends Ba{constructor(e,t,i){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new $),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new $),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=ae(e,NS(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",o=ae(this.element,NS(".ibwrapper"));if(this.input=ae(o,NS(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=ae(o,NS("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new Vfe(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),ae(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const r=this._register(new It(e.ownerDocument,"selectionchange")),a=pe.filter(r.event,()=>{const l=e.ownerDocument.getSelection();return(l==null?void 0:l.anchorNode)===o});this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Ea(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(_d().setupManagedHover(Wo("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:Ph(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return S4(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if(this.state==="open"&&Ar(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${Zh(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=xr(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:s=>{if(!this.message)return null;e=ae(s,NS(".monaco-inputbox-container")),t();const o={inline:!0,className:"monaco-inputbox-message"},r=this.message.formatContent?WFe(this.message.content,o):BFe(this.message.content,o);r.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return r.style.backgroundColor=a.background??"",r.style.color=a.foreground??"",r.style.border=a.border?`1px solid ${a.border}`:"",ae(e,r),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=_("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=_("alertWarningMessage","Warning: {0}",this.message.content):i=_("alertInfoMessage","Info: {0}",this.message.content),Oo(i),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText=" ",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",i=e.inputForeground??"",s=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=i,this.input.style.backgroundColor="inherit",this.input.style.color=i,this.element.style.border=`1px solid ${Zh(s,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=Ph(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,s=t.selectionEnd,o=t.value;i!==null&&s!==null&&(this.value=o.substr(0,i)+e+o.substr(s),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)==null||e.dispose(),super.dispose()}}class pme extends G8e{constructor(e,t,i){const s=_({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," or {0} for history","⇅"),o=_({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," ({0} for history)","⇅");super(e,t,i),this._onDidFocus=this._register(new $),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new $),this.onDidBlur=this._onDidBlur.event,this.history=new q8e(i.history,100);const r=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?s:o,l=this.placeholder+a;i.showPlaceholderOnFocus&&!S4(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||r()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>r()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return i.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(o)||a(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",Tu(this.value?this.value:_("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,Tu(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const Z8e=_("defaultLabel","input");class _me extends Ba{constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new es),this.additionalToggles=[],this._onDidOptionChange=this._register(new $),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new $),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new $),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new $),this._onKeyUp=this._register(new $),this._onCaseSensitiveKeyDown=this._register(new $),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new $),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||Z8e,this.showCommonFindToggles=!!i.showCommonFindToggles;const s=i.appendCaseSensitiveLabel||"",o=i.appendWholeWordsLabel||"",r=i.appendRegexLabel||"",a=i.history||[],l=!!i.flexibleHeight,c=!!i.flexibleWidth,d=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new pme(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:i.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:d,inputBoxStyles:i.inputBoxStyles}));const u=this._register(OC());if(this.showCommonFindToggles){this.regex=this._register(new mme({appendTitle:r,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.regex.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(f=>{this._onRegexKeyDown.fire(f)})),this.wholeWords=this._register(new gme({appendTitle:o,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.wholeWords.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new fme({appendTitle:s,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.caseSensitive.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(f=>{this._onCaseSensitiveKeyDown.fire(f)}));const h=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,f=>{if(f.equals(15)||f.equals(17)||f.equals(9)){const m=h.indexOf(this.domNode.ownerDocument.activeElement);if(m>=0){let p=-1;f.equals(17)?p=(m+1)%h.length:f.equals(15)&&(m===0?p=h.length-1:p=m-1),f.equals(9)?(h[m].blur(),this.inputBox.focus()):p>=0&&h[p].focus(),Dt.stop(f,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i==null?void 0:i.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e==null||e.appendChild(this.domNode),this._register(Q(this.inputBox.inputElement,"compositionstart",h=>{this.imeSessionInProgress=!0})),this._register(Q(this.inputBox.inputElement,"compositionend",h=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,i;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)==null||e.enable(),(t=this.wholeWords)==null||t.enable(),(i=this.caseSensitive)==null||i.enable();for(const s of this.additionalToggles)s.enable()}disable(){var e,t,i;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)==null||e.disable(),(t=this.wholeWords)==null||t.disable(),(i=this.caseSensitive)==null||i.disable();for(const s of this.additionalToggles)s.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new ne;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(i=>{this._onDidOptionChange.fire(i),!i&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,i,s;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(((t=this.caseSensitive)==null?void 0:t.width())??0)+(((i=this.wholeWords)==null?void 0:i.width())??0)+(((s=this.regex)==null?void 0:s.width())??0)+this.additionalToggles.reduce((o,r)=>o+r.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e;return((e=this.caseSensitive)==null?void 0:e.checked)??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e;return((e=this.wholeWords)==null?void 0:e.checked)??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e;return((e=this.regex)==null?void 0:e.checked)??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)==null||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const Y8e=ge;class X8e extends G{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=o=>Ji(this.findInput.inputBox.inputElement,fe.KEY_DOWN,o),this.onDidChange=o=>this.findInput.onDidChange(o),this.container=ae(this.parent,Y8e(".quick-input-box")),this.findInput=this._register(new _me(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const s=this.findInput.inputBox.inputElement;s.role="combobox",s.ariaHasPopup="menu",s.ariaAutoComplete="list",s.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===vn.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===vn.Info?1:e===vn.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===vn.Info?1:e===vn.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class Q8e{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:G.None}}renderElement(e,t,i,s){var l;if((l=i.disposable)==null||l.dispose(),!i.data)return;const o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,i.data,s);const r=new Gi,a=o.resolve(e,r.token);i.disposable={dispose:()=>r.cancel()},this.renderer.renderPlaceholder(e,i.data),a.then(c=>this.renderer.renderElement(c,e,i.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class J8e{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function eWe(n,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new J8e(n,e.accessibilityProvider)}}class tWe{constructor(e,t,i,s,o={}){const r=()=>this.model,a=s.map(l=>new Q8e(l,r));this.list=new Wa(e,t,i,a,eWe(r,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return pe.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return pe.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return pe.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,qo(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var F1=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};const iWe=!1;var sM;(function(n){n.North="north",n.South="south",n.East="east",n.West="west"})(sM||(sM={}));let nWe=4;const sWe=new $;let oWe=300;const rWe=new $;class Bq{constructor(e){this.el=e,this.disposables=new ne}get onPointerMove(){return this.disposables.add(new It(je(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new It(je(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}F1([yn],Bq.prototype,"onPointerMove",null);F1([yn],Bq.prototype,"onPointerUp",null);class Wq{get onPointerMove(){return this.disposables.add(new It(this.el,yi.Change)).event}get onPointerUp(){return this.disposables.add(new It(this.el,yi.End)).event}constructor(e){this.el=e,this.disposables=new ne}dispose(){this.disposables.dispose()}}F1([yn],Wq.prototype,"onPointerMove",null);F1([yn],Wq.prototype,"onPointerUp",null);class oM{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}F1([yn],oM.prototype,"onPointerMove",null);F1([yn],oM.prototype,"onPointerUp",null);const wte="pointer-events-disabled";class Hs extends G{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=ae(this.el,ge(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Pe(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new It(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Hs.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new It(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Hs.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=ae(this.el,ge(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Pe(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new It(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Hs.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new It(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Hs.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=oWe,this.hoverDelayer=this._register(new hl(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new $),this._onDidStart=this._register(new $),this._onDidChange=this._register(new $),this._onDidReset=this._register(new $),this._onDidEnd=this._register(new $),this.orthogonalStartSashDisposables=this._register(new ne),this.orthogonalStartDragHandleDisposables=this._register(new ne),this.orthogonalEndSashDisposables=this._register(new ne),this.orthogonalEndDragHandleDisposables=this._register(new ne),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=ae(e,ge(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),Lt&&this.el.classList.add("mac");const s=this._register(new It(this.el,"mousedown")).event;this._register(s(u=>this.onPointerStart(u,new Bq(e)),this));const o=this._register(new It(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));const r=this._register(new It(this.el,"mouseenter")).event;this._register(r(()=>Hs.onMouseEnter(this)));const a=this._register(new It(this.el,"mouseleave")).event;this._register(a(()=>Hs.onMouseLeave(this))),this._register(qs.addTarget(this.el));const l=this._register(new It(this.el,yi.Start)).event;this._register(l(u=>this.onPointerStart(u,new Wq(this.el)),this));const c=this._register(new It(this.el,yi.Tap)).event;let d;this._register(c(u=>{if(d){clearTimeout(d),d=void 0,this.onPointerDoublePress(u);return}clearTimeout(d),d=setTimeout(()=>d=void 0,250)},this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=nWe,this._register(sWe.event(u=>{this.size=u,this.layout()}))),this._register(rWe.event(u=>this.hoverDelay=u)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",iWe),this.layout()}onPointerStart(e,t){Dt.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const m=this.getOrthogonalSash(e);m&&(i=!0,e.__orthogonalSashEvent=!0,m.onPointerStart(e,new oM(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new oM(t))),!this.state)return;const s=this.el.ownerDocument.getElementsByTagName("iframe");for(const m of s)m.classList.add(wte);const o=e.pageX,r=e.pageY,a=e.altKey,l={startX:o,currentX:o,startY:r,currentY:r,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=Ta(this.el),d=()=>{let m="";i?m="all-scroll":this.orientation===1?this.state===1?m="s-resize":this.state===2?m="n-resize":m=Lt?"row-resize":"ns-resize":this.state===1?m="e-resize":this.state===2?m="w-resize":m=Lt?"col-resize":"ew-resize",c.textContent=`* { cursor: ${m} !important; }`},u=new ne;d(),i||this.onDidEnablementChange.event(d,null,u);const h=m=>{Dt.stop(m,!1);const p={startX:o,currentX:m.pageX,startY:r,currentY:m.pageY,altKey:a};this._onDidChange.fire(p)},f=m=>{Dt.stop(m,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const p of s)p.classList.remove(wte)};t.onPointerMove(h,null,u),t.onPointerUp(f,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Hs.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Hs.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Hs.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!Qn(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const aWe={separatorBorder:oe.transparent};class bme{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var i,s;if(e!==this.visible){e?(this.size=vo(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{(s=(i=this.view).setVisible)==null||s.call(i,e)}catch(o){console.error("Splitview: Failed to set visible view"),console.error(o)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,s){this.container=e,this.view=t,this.disposable=s,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(i){console.error("Splitview: Failed to layout view"),console.error(i)}}dispose(){this.disposable.dispose()}}class lWe extends bme{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class cWe extends bme{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var ch;(function(n){n[n.Idle=0]="Idle",n[n.Busy=1]="Busy"})(ch||(ch={}));var rM;(function(n){n.Distribute={type:"distribute"};function e(s){return{type:"split",index:s}}n.Split=e;function t(s){return{type:"auto",index:s}}n.Auto=t;function i(s){return{type:"invisible",cachedVisibleSize:s}}n.Invisible=i})(rM||(rM={}));class vme extends G{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=ch.Idle,this._onDidSashChange=this._register(new $),this._onDidSashReset=this._register(new $),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=ae(this.el,ge(".sash-container")),this.viewContainer=ge(".split-view-container"),this.scrollable=this._register(new T1({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:s=>zr(je(this.el),s)})),this.scrollableElement=this._register(new q4(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));const i=this._register(new It(this.viewContainer,"scroll")).event;this._register(i(s=>{const o=this.scrollableElement.getScrollPosition(),r=Math.abs(this.viewContainer.scrollLeft-o.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-o.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(r!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:r,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(s=>{s.scrollTopChanged&&(this.viewContainer.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this.viewContainer.scrollLeft=s.scrollLeft)})),ae(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||aWe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((s,o)=>{const r=co(s.visible)||s.visible?s.size:{type:"invisible",cachedVisibleSize:s.size},a=s.view;this.doAddView(a,r,o,!0)}),this._contentSize=this.viewItems.reduce((s,o)=>s+o.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,s){this.doAddView(e,t,i,s)}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let s=0;for(let o=0;o<this.viewItems.length;o++){const r=this.viewItems[o],a=this.proportions[o];typeof a=="number"?s+=a:e-=r.size}for(let o=0;o<this.viewItems.length;o++){const r=this.viewItems[o],a=this.proportions[o];typeof a=="number"&&s>0&&(r.size=vo(Math.round(a*e/s),r.minimumSize,r.maximumSize))}}else{const s=qo(this.viewItems.length),o=s.filter(a=>this.viewItems[a].priority===1),r=s.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,o,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),o=ql(Q(this.el.ownerDocument.body,"keydown",a=>r(this.sashDragState.current,a.altKey)),Q(this.el.ownerDocument.body,"keyup",()=>r(this.sashDragState.current,!1))),r=(a,l)=>{const c=this.viewItems.map(m=>m.size);let d=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const p=this.viewItems[s];d=(p.minimumSize-p.size)/2,u=(p.maximumSize-p.size)/2}else{const p=this.viewItems[s+1];d=(p.size-p.maximumSize)/2,u=(p.size-p.minimumSize)/2}let h,f;if(!l){const m=qo(s,-1),p=qo(s+1,this.viewItems.length),b=m.reduce((N,E)=>N+(this.viewItems[E].minimumSize-c[E]),0),v=m.reduce((N,E)=>N+(this.viewItems[E].viewMaximumSize-c[E]),0),w=p.length===0?Number.POSITIVE_INFINITY:p.reduce((N,E)=>N+(c[E]-this.viewItems[E].minimumSize),0),y=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((N,E)=>N+(c[E]-this.viewItems[E].viewMaximumSize),0),C=Math.max(b,y),S=Math.min(w,v),x=this.findFirstSnapIndex(m),k=this.findFirstSnapIndex(p);if(typeof x=="number"){const N=this.viewItems[x],E=Math.floor(N.viewMinimumSize/2);h={index:x,limitDelta:N.visible?C-E:C+E,size:N.size}}if(typeof k=="number"){const N=this.viewItems[k],E=Math.floor(N.viewMinimumSize/2);f={index:k,limitDelta:N.visible?S+E:S-E,size:N.size}}}this.sashDragState={start:a,current:a,index:s,sizes:c,minDelta:d,maxDelta:u,alt:l,snapBefore:h,snapAfter:f,disposable:o}};r(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:s,alt:o,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const d=e-i,u=this.resize(t,d,s,void 0,void 0,r,a,l,c);if(o){const h=t===this.sashItems.length-1,f=this.viewItems.map(y=>y.size),m=h?t:t+1,p=this.viewItems[m],b=p.size-p.maximumSize,v=p.size-p.minimumSize,w=h?t-1:t+1;this.resize(w,-u,f,void 0,void 0,b,v)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=vo(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==ch.Idle)throw new Error("Cant modify splitview");this.state=ch.Busy;try{const i=qo(this.viewItems.length).filter(a=>a!==e),s=[...i.filter(a=>this.viewItems[a].priority===1),e],o=i.filter(a=>this.viewItems[a].priority===2),r=this.viewItems[e];t=Math.round(t),t=vo(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(s,o)}finally{this.state=ch.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=vo(i,a.minimumSize,a.maximumSize);const s=qo(this.viewItems.length),o=s.filter(a=>this.viewItems[a].priority===1),r=s.filter(a=>this.viewItems[a].priority===2);this.relayout(o,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,s){if(this.state!==ch.Idle)throw new Error("Cant modify splitview");this.state=ch.Busy;try{const o=ge(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(i));const r=e.onDidChange(h=>this.onViewChange(d,h)),a=Pe(()=>o.remove()),l=ql(r,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const d=this.orientation===0?new lWe(o,e,c,l):new cWe(o,e,c,l);if(this.viewItems.splice(i,0,d),this.viewItems.length>1){const h={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new Hs(this.sashContainer,{getHorizontalSashTop:N=>this.getSashPosition(N),getHorizontalSashWidth:this.getSashOrthogonalSize},{...h,orientation:1}):new Hs(this.sashContainer,{getVerticalSashLeft:N=>this.getSashPosition(N),getVerticalSashHeight:this.getSashOrthogonalSize},{...h,orientation:0}),m=this.orientation===0?N=>({sash:f,start:N.startY,current:N.currentY,alt:N.altKey}):N=>({sash:f,start:N.startX,current:N.currentX,alt:N.altKey}),b=pe.map(f.onDidStart,m)(this.onSashStart,this),w=pe.map(f.onDidChange,m)(this.onSashChange,this),C=pe.map(f.onDidEnd,()=>this.sashItems.findIndex(N=>N.sash===f))(this.onSashEnd,this),S=f.onDidReset(()=>{const N=this.sashItems.findIndex(W=>W.sash===f),E=qo(N,-1),B=qo(N+1,this.viewItems.length),A=this.findFirstSnapIndex(E),O=this.findFirstSnapIndex(B);typeof A=="number"&&!this.viewItems[A].visible||typeof O=="number"&&!this.viewItems[O].visible||this._onDidSashReset.fire(N)}),x=ql(b,w,C,S,f),k={sash:f,disposable:x};this.sashItems.splice(i-1,0,k)}o.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),s||this.relayout([i],u),!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=ch.Idle}}relayout(e,t){const i=this.viewItems.reduce((s,o)=>s+o.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(d=>d.size),s,o,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const d=qo(e,-1),u=qo(e+1,this.viewItems.length);if(o)for(const k of o)n3(d,k),n3(u,k);if(s)for(const k of s)FE(d,k),FE(u,k);const h=d.map(k=>this.viewItems[k]),f=d.map(k=>i[k]),m=u.map(k=>this.viewItems[k]),p=u.map(k=>i[k]),b=d.reduce((k,N)=>k+(this.viewItems[N].minimumSize-i[N]),0),v=d.reduce((k,N)=>k+(this.viewItems[N].maximumSize-i[N]),0),w=u.length===0?Number.POSITIVE_INFINITY:u.reduce((k,N)=>k+(i[N]-this.viewItems[N].minimumSize),0),y=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((k,N)=>k+(i[N]-this.viewItems[N].maximumSize),0),C=Math.max(b,y,r),S=Math.min(w,v,a);let x=!1;if(l){const k=this.viewItems[l.index],N=t>=l.limitDelta;x=N!==k.visible,k.setVisible(N,l.size)}if(!x&&c){const k=this.viewItems[c.index],N=t<c.limitDelta;x=N!==k.visible,k.setVisible(N,c.size)}if(x)return this.resize(e,t,i,s,o,r,a);t=vo(t,C,S);for(let k=0,N=t;k<h.length;k++){const E=h[k],B=vo(f[k]+N,E.minimumSize,E.maximumSize),A=B-f[k];N-=A,E.size=B}for(let k=0,N=t;k<m.length;k++){const E=m[k],B=vo(p[k]-N,E.minimumSize,E.maximumSize),A=B-p[k];N+=A,E.size=B}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const s=qo(this.viewItems.length-1,-1),o=s.filter(a=>this.viewItems[a].priority===1),r=s.filter(a=>this.viewItems[a].priority===2);for(const a of r)n3(s,a);for(const a of o)FE(s,a);typeof e=="number"&&FE(s,e);for(let a=0;i!==0&&a<s.length;a++){const l=this.viewItems[s[a]],c=vo(l.size+i,l.minimumSize,l.maximumSize),d=c-l.size;i-=d,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const o=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const r=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const u=!(t[l]&&r[l+1]),h=!(i[l]&&o[l+1]);if(u&&h){const f=qo(l,-1),m=qo(l+1,this.viewItems.length),p=this.findFirstSnapIndex(f),b=this.findFirstSnapIndex(m),v=typeof p=="number"&&!this.viewItems[p].visible,w=typeof b=="number"&&!this.viewItems[b].visible;v&&o[l]&&(a>0||this.startSnappingEnabled)?c.state=1:w&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else u&&!h?c.state=1:!u&&h?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=e===void 0?i.size:Math.min(e,i.size),t=t===void 0?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)==null||e.disposable.dispose(),gi(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}const vA=class vA{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=vA.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(const o of e){const r=s.get(o.templateId);if(!r)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(r)}}renderTemplate(e){const t=ae(e,ge(".monaco-table-tr")),i=[],s=[];for(let r=0;r<this.columns.length;r++){const a=this.renderers[r],l=ae(t,ge(".monaco-table-td",{"data-col-index":r}));l.style.width=`${this.getColumnSize(r)}px`,i.push(l),s.push(a.renderTemplate(l))}const o={container:e,cellContainers:i,cellTemplateData:s};return this.renderedTemplates.add(o),o}renderElement(e,t,i,s){for(let o=0;o<this.columns.length;o++){const a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,i.cellTemplateData[o],s)}}disposeElement(e,t,i,s){for(let o=0;o<this.columns.length;o++){const r=this.renderers[o];if(r.disposeElement){const l=this.columns[o].project(e);r.disposeElement(l,t,i.cellTemplateData[o],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);ws(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}};vA.TemplateId="row";let aM=vA;function dWe(n){return{getHeight(e){return n.getHeight(e)},getTemplateId(){return aM.TemplateId}}}class uWe extends G{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??pe.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new $,this.onDidLayout=this._onDidLayout.event,this.element=ge(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(_d().setupManagedHover(Wo("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}const wA=class wA{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,s,o,r){this.virtualDelegate=i,this.columns=s,this.domId=`table_id_${++wA.InstanceCount}`,this.disposables=new ne,this.cachedWidth=0,this.cachedHeight=0,this.domNode=ae(t,ge(`.monaco-table.${this.domId}`));const a=s.map((d,u)=>this.disposables.add(new uWe(d,u))),l={size:a.reduce((d,u)=>d+u.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new vme(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new aM(s,o,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new Wa(e,this.domNode,dWe(i),[c],r)),pe.any(...a.map(d=>d.onDidLayout))(([d,u])=>c.layoutColumn(d,u),null,this.disposables),this.splitview.onDidSashReset(d=>{const u=s.reduce((f,m)=>f+m.weight,0),h=s[d].weight/u*this.cachedWidth;this.splitview.resizeView(d,h)},null,this.disposables),this.styleElement=Ta(this.domNode),this.style(OBe)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};wA.InstanceCount=0;let $6=wA;var la;(function(n){n[n.Expanded=0]="Expanded",n[n.Collapsed=1]="Collapsed",n[n.PreserveOrExpanded=2]="PreserveOrExpanded",n[n.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(la||(la={}));var N_;(function(n){n[n.Unknown=0]="Unknown",n[n.Twistie=1]="Twistie",n[n.Element=2]="Element",n[n.Filter=3]="Filter"})(N_||(N_={}));class pa extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class Hq{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function Vq(n){return typeof n=="object"&&"visibility"in n&&"data"in n}function sN(n){switch(n){case!0:return 1;case!1:return 0;default:return n}}function lB(n){return typeof n.collapsible=="boolean"}class hWe{constructor(e,t,i,s={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new vI,this._onDidChangeCollapseState=new $,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new $,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new $,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new hl(the),this.collapseByDefault=typeof s.collapseByDefault>"u"?!1:s.collapseByDefault,this.allowNonCollapsibleParents=s.allowNonCollapsibleParents??!1,this.filter=s.filter,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=Rt.empty(),s={}){if(e.length===0)throw new pa(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,i,s):this.spliceSimple(e,t,i,s)}spliceSmart(e,t,i,s=Rt.empty(),o,r=o.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,i,s,o);const l=[...s],c=t[t.length-1],d=new nu({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+i)].map(p=>e.getId(p.element).toString())}).ComputeDiff(!1);if(d.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,i,l,o);const u=t.slice(0,-1),h=(p,b,v)=>{if(r>0)for(let w=0;w<v;w++)p--,b--,this.spliceSmart(e,[...u,p,0],Number.MAX_SAFE_INTEGER,l[b].children,o,r-1)};let f=Math.min(a.children.length,c+i),m=l.length;for(const p of d.changes.sort((b,v)=>v.originalStart-b.originalStart))h(f,m,f-(p.originalStart+p.originalLength)),f=p.originalStart,m=p.modifiedStart-c,this.spliceSimple([...u,f],p.originalLength,Rt.slice(l,m,m+p.modifiedLength),o);h(f,m,f)}spliceSimple(e,t,i=Rt.empty(),{onDidCreateNode:s,onDidDeleteNode:o,diffIdentityProvider:r}){const{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),u=[],h=Rt.map(i,S=>this.createTreeNode(S,a,a.visible?1:0,c,u,s)),f=e[e.length-1];let m=0;for(let S=f;S>=0&&S<a.children.length;S--){const x=a.children[S];if(x.visible){m=x.visibleChildIndex;break}}const p=[];let b=0,v=0;for(const S of h)p.push(S),v+=S.renderNodeCount,S.visible&&(S.visibleChildIndex=m+b++);const w=_Q(a.children,f,t,p);r?a.lastDiffIds?_Q(a.lastDiffIds,f,t,p.map(S=>r.getId(S.element).toString())):a.lastDiffIds=a.children.map(S=>r.getId(S.element).toString()):a.lastDiffIds=void 0;let y=0;for(const S of w)S.visible&&y++;if(y!==0)for(let S=f+p.length;S<a.children.length;S++){const x=a.children[S];x.visible&&(x.visibleChildIndex-=y)}if(a.visibleChildrenCount+=b-y,c&&d){const S=w.reduce((x,k)=>x+(k.visible?k.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,v-S),this.list.splice(l,S,u)}if(w.length>0&&o){const S=x=>{o(x),x.children.forEach(S)};w.forEach(S)}this._onDidSplice.fire({insertedNodes:p,deletedNodes:w});let C=a;for(;C;){if(C.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}C=C.parent}}rerender(e){if(e.length===0)throw new pa(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:s}=this.getTreeNodeWithListIndex(e);return i&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const s=this.getTreeNode(e);typeof t>"u"&&(t=!s.collapsed);const o={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){const{node:i,listIndex:s,revealed:o}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(i,s,o,t);if(i!==this.root&&this.autoExpandSingleChildren&&r&&!lB(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return r}_setListNodeCollapseState(e,t,i,s){const o=this._setNodeCollapseState(e,s,!1);if(!i||!e.visible||!o)return o;const r=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=r-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),o}_setNodeCollapseState(e,t,i){let s;if(e===this.root?s=!1:(lB(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!lB(t)&&t.recursive)for(const o of e.children)s=this._setNodeCollapseState(o,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,s,o,r){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,s&&o.push(a);const c=e.children||Rt.empty(),d=s&&l!==0&&!a.collapsed;let u=0,h=1;for(const f of c){const m=this.createTreeNode(f,a,l,d,o,r);a.children.push(m),h+=m.renderNodeCount,m.visible&&(m.visibleChildIndex=u++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=u,a.visible=l===2?u>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=h):(a.renderNodeCount=0,s&&o.pop()),r==null||r(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,s=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,e.renderNodeCount=0,!1;s&&i.push(e)}const r=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,o,i,s&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=i.length-r):(e.renderNodeCount=0,s&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):Vq(i)?(e.filterData=i.data,sN(i.visibility)):(e.filterData=void 0,sN(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...s]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(s,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...s]=e;if(i<0||i>t.children.length)throw new pa(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:s,visible:o}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new pa(this.user,"Invalid tree location");const a=t.children[r];return{node:a,listIndex:i,revealed:s,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,s=!0,o=!0){const[r,...a]=e;if(r<0||r>t.children.length)throw new pa(this.user,"Invalid tree location");for(let l=0;l<r;l++)i+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:s,visible:o}:this.getParentNodeWithListIndex(a,t.children[r],i+1,s,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:xDe(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class fWe extends BI{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function cB(n){return n instanceof BI?new fWe(n):n}class gWe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=G.None,this.disposables=new ne}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)==null||s.call(i,cB(e),t)}onDragOver(e,t,i,s,o,r=!0){const a=this.dnd.onDragOver(cB(e),t&&t.element,i,s,o),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=Km(()=>{const f=this.modelProvider(),m=f.getNodeLocation(t);f.isCollapsed(m)&&f.setCollapsed(m,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!r){const f=typeof a=="boolean"?a:a.accept,m=typeof a=="boolean"?void 0:a.effect;return{accept:f,effect:m,feedback:[i]}}return a}if(a.bubble===1){const f=this.modelProvider(),m=f.getNodeLocation(t),p=f.getParentNodeLocation(m),b=f.getNode(p),v=p&&f.getListIndex(p);return this.onDragOver(e,b,v,s,o,!1)}const c=this.modelProvider(),d=c.getNodeLocation(t),u=c.getListIndex(d),h=c.getListRenderCount(d);return{...a,feedback:qo(u,u+h)}}drop(e,t,i,s,o){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(cB(e),t&&t.element,i,s,o)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function mWe(n,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new gWe(n,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const i=n(),s=i.getNodeLocation(t),o=i.getParentNodeLocation(s);return i.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}class jq{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,s;(s=(i=this.delegate).setDynamicHeight)==null||s.call(i,e.element,t)}}var WC;(function(n){n.None="none",n.OnHover="onHover",n.Always="always"})(WC||(WC={}));class pWe{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new ne,this.onDidChange=pe.forEach(e,i=>this._elements=i,this.disposables)}dispose(){this.disposables.dispose()}}const SL=class SL{constructor(e,t,i,s,o,r={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedIndentGuides=o,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=SL.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=G.None,this.disposables=new ne,this.templateId=e.templateId,this.updateOptions(r),pe.map(i,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)==null||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=vo(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[i,s]of this.renderedNodes)this.renderTreeElement(i,s)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==WC.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[i,s]of this.renderedNodes)this._renderIndentGuides(i,s);if(this.indentGuidesDisposable.dispose(),t){const i=new ne;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=ae(e,ge(".monaco-tl-row")),i=ae(t,ge(".monaco-tl-indent")),s=ae(t,ge(".monaco-tl-twistie")),o=ae(t,ge(".monaco-tl-contents")),r=this.renderer.renderTemplate(o);return{container:e,indent:i,twistie:s,indentGuidesDisposable:G.None,templateData:r}}renderElement(e,t,i,s){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,s)}disposeElement(e,t,i,s){var o,r;i.indentGuidesDisposable.dispose(),(r=(o=this.renderer).disposeElement)==null||r.call(o,e,t,i.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const i=SL.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=`${i+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...Ke.asClassNameArray(he.treeItemExpanded));let s=!1;this.renderer.renderTwistie&&(s=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(s||t.twistie.classList.add(...Ke.asClassNameArray(he.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(ws(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new ne,s=this.modelProvider();for(;;){const o=s.getNodeLocation(e),r=s.getParentNodeLocation(o);if(!r)break;const a=s.getNode(r),l=ge(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),i.add(Pe(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach(s=>{const o=i.getNodeLocation(s);try{const r=i.getParentNodeLocation(o);s.collapsible&&s.children.length>0&&!s.collapsed?t.add(s):r&&t.add(i.getNode(r))}catch{}}),this.activeIndentNodes.forEach(s=>{t.has(s)||this.renderedIndentGuides.forEach(s,o=>o.classList.remove("active"))}),t.forEach(s=>{this.activeIndentNodes.has(s)||this.renderedIndentGuides.forEach(s,o=>o.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),gi(this.disposables)}};SL.DefaultIndent=8;let K6=SL;class _We{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new ne,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){const r=this._filter.filter(e,t);if(typeof r=="boolean"?i=r?1:0:Vq(r)?i=sN(r.visibility):i=r,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:ed.Default,visibility:i};const s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),o=Array.isArray(s)?s:[s];for(const r of o){const a=r&&r.toString();if(typeof a>"u")return{data:ed.Default,visibility:i};let l;if(this.tree.findMatchType===xv.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let d=this._lowercasePattern.length;d>0;d--)l.push(c+d-1)}}else l=wv(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,o.length===1?{data:l,visibility:i}:{data:{label:a,score:l},visibility:i}}return this.tree.findMode===Wh.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:ed.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){gi(this.disposables)}}var Wh;(function(n){n[n.Highlight=0]="Highlight",n[n.Filter=1]="Filter"})(Wh||(Wh={}));var xv;(function(n){n[n.Fuzzy=0]="Fuzzy",n[n.Contiguous=1]="Contiguous"})(xv||(xv={}));let bWe=class{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,s,o,r={}){this.tree=e,this.view=i,this.filter=s,this.contextViewProvider=o,this.options=r,this._pattern="",this.width=0,this._onDidChangeMode=new $,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new $,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new $,this._onDidChangeOpenState=new $,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new ne,this.disposables=new ne,this._mode=e.options.defaultFindMode??Wh.Highlight,this._matchType=e.options.defaultFindMatchType??xv.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var t,i,s;const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(Oo(_("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?(t=this.widget)==null||t.showMessage({type:2,content:_("not found","No elements found.")}):(i=this.widget)==null||i.showMessage({type:2})):((s=this.widget)==null||s.clearMessage(),this.pattern&&Oo(_("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!ed.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)==null||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function vWe(n,e){return n.position===e.position&&wme(n,e)}function wme(n,e){return n.node.element===e.node.element&&n.startIndex===e.startIndex&&n.height===e.height&&n.endIndex===e.endIndex}class wWe{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return Vi(this.stickyNodes,e.stickyNodes,vWe)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!Vi(this.stickyNodes,e.stickyNodes,wme)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}}class yWe{constrainStickyScrollNodes(e,t,i){for(let s=0;s<e.length;s++){const o=e[s];if(o.position+o.height>i||s>=t)return e.slice(0,s)}return e}}let yte=class extends G{constructor(e,t,i,s,o,r={}){super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=o,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(r);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=r.stickyScrollDelegate??new yWe,this._widget=this._register(new CWe(i.getScrollableElement(),i,e,s,o,r.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let i=e,s=0,o=this.getNextStickyNode(i,void 0,s);for(;o&&(t.push(o),s+=o.height,!(t.length<=this.stickyScrollMaxItemCount&&(i=this.getNextVisibleNode(o),!i)));)o=this.getNextStickyNode(i,o.node,s);const r=this.constrainStickyNodes(t);return r.length?new wWe(r):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){const s=this.getAncestorUnderPrevious(e,t);if(s&&!(s===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,i))))return this.createStickyScrollNode(s,i)}nodeTopAlignsWithStickyNodesBottom(e,t){const i=this.getNodeIndex(e),s=this.view.getElementTop(i),o=t;return this.view.scrollTop===s-o}createStickyScrollNode(e,t){const i=this.treeDelegate.getHeight(e),{startIndex:s,endIndex:o}=this.getNodeRange(e),r=this.calculateStickyNodePosition(o,t,i);return{node:e,position:r,height:i,startIndex:s,endIndex:o}}getAncestorUnderPrevious(e,t=void 0){let i=e,s=this.getParentNode(i);for(;s;){if(s===t)return i;i=s,s=this.getParentNode(i)}if(t===void 0)return i}calculateStickyNodePosition(e,t,i){let s=this.view.getRelativeTop(e);if(s===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),d=this.view.getRelativeTop(e+1);s=d?d-c/this.view.renderHeight:null}if(s===null)return t;const o=this.view.element(e),r=this.treeDelegate.getHeight(o),l=s*this.view.renderHeight+r;return t+i>l&&t<=l?l-i:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;const s=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!s.length)return[];const o=s[s.length-1];if(s.length>this.stickyScrollMaxItemCount||o.position+o.height>t)throw new Error("stickyScrollDelegate violates constraints");return s}getParentNode(e){const t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw new Error("Node not found in tree");const s=this.model.getListRenderCount(t),o=i+s-1;return{startIndex:i,endIndex:o}}nodePositionTopBelowWidget(e){const t=[];let i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let s=0;for(let o=0;o<t.length&&o<this.stickyScrollMaxItemCount;o++)s+=this.treeDelegate.getHeight(t[o]);return s}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}},CWe=class{constructor(e,t,i,s,o,r){this.view=t,this.tree=i,this.treeRenderers=s,this.treeDelegate=o,this.accessibilityProvider=r,this._previousElements=[],this._previousStateDisposables=new ne,this._rootDomNode=ge(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=ge(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new SWe(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const s=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${s.position}px`;else{this._previousStateDisposables.clear();const o=Array(e.count);for(let r=e.count-1;r>=0;r--){const a=e.stickyNodes[r],{element:l,disposable:c}=this.createElement(a,r,e.count);o[r]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(o,e),this._previousElements=o}this._previousState=e,this._rootDomNode.style.height=`${s.position+s.height}px`}createElement(e,t,i){const s=e.startIndex,o=document.createElement("div");o.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(o.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(o.style.lineHeight=`${e.height}px`),o.classList.add("monaco-tree-sticky-row"),o.classList.add("monaco-list-row"),o.setAttribute("data-index",`${s}`),o.setAttribute("data-parity",s%2===0?"even":"odd"),o.setAttribute("id",this.view.getElementID(s));const r=this.setAccessibilityAttributes(o,e.node.element,t,i),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(h=>h.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const d=l.renderTemplate(o);l.renderElement(c,e.startIndex,d,e.height);const u=Pe(()=>{r.dispose(),l.disposeElement(c,e.startIndex,d,e.height),l.disposeTemplate(d),o.remove()});return{element:o,disposable:u}}setAccessibilityAttributes(e,t,i,s){if(!this.accessibilityProvider)return G.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,s))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const o=this.accessibilityProvider.getAriaLabel(t),r=o&&typeof o!="string"?o:nl(o),a=Je(c=>{const d=c.readObservable(r);d?e.setAttribute("aria-label",d):e.removeAttribute("aria-label")});typeof o=="string"||o&&e.setAttribute("aria-label",o.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}};class SWe extends G{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new $,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new $,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(Q(this.container,"focus",()=>this.onFocus())),this._register(Q(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(i=>this.onKeyDown(i))),this._register(this.view.onMouseDown(i=>this.onMouseDown(i))),this._register(this.view.onContextMenu(i=>this.handleContextMenu(i)))}handleContextMenu(e){const t=e.browserEvent.target;if(!Qk(t)&&!Wx(t)){this.focusedLast()&&this.view.domFocus();return}if(!wh(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const r=this.state.stickyNodes.findIndex(a=>{var l;return a.node.element===((l=e.element)==null?void 0:l.element)});if(r===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(r);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const s=this.state.stickyNodes[this.focusedIndex].node.element,o=this.elements[this.focusedIndex];this._onContextMenu.fire({element:s,anchor:o,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!Qk(t)&&!Wx(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const s=vo(i,0,t.count-1);this.setFocus(s)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const i=t.stickyNodes[t.count-1],s=t.count>1?t.stickyNodes[t.count-2]:void 0,o=this.view.getElementTop(e),r=s?s.position+s.height+i.height:i.height;this.view.scrollTop=o-r}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function gD(n){let e=N_.Unknown;return _3(n.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=N_.Twistie:_3(n.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=N_.Element:_3(n.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=N_.Filter),{browserEvent:n.browserEvent,element:n.element?n.element.element:null,target:e}}function xWe(n){const e=Qk(n.browserEvent.target);return{element:n.element?n.element.element:null,browserEvent:n.browserEvent,anchor:n.anchor,isStickyScroll:e}}function AT(n,e){e(n),n.children.forEach(t=>AT(t,e))}class dB{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new $,this.onDidChange=this._onDidChange.event}set(e,t){!(t!=null&&t.__forceEvent)&&Vi(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=d=>l.delete(d);t.forEach(d=>AT(d,c)),this.set([...l.values()]);return}const i=new Set,s=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>AT(l,s));const o=new Map,r=l=>o.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>AT(l,r));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const u=o.get(c);u&&u.visible&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class LWe extends xge{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(wge(e.browserEvent.target)||dm(e.browserEvent.target)||tx(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,s=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,o=Wx(e.browserEvent.target);let r=!1;if(o?r=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?r=this.tree.expandOnlyOnTwistieClick(t.element):r=!!this.tree.expandOnlyOnTwistieClick,o)this.handleStickyScrollMouseEvent(e,t);else{if(r&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!o||s)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),s){e.browserEvent.isHandledByList=!0;return}}o||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(DBe(e.browserEvent.target)||TBe(e.browserEvent.target))return;const i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");const s=this.list.indexOf(t),o=this.list.getElementTop(s),r=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=o-r,this.list.domFocus(),this.list.setFocus([s]),this.list.setSelection([s])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!Qk(t)&&!Wx(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!Qk(t)&&!Wx(t)){super.onContextMenu(e);return}}}class kWe extends Wa{constructor(e,t,i,s,o,r,a,l){super(e,t,i,s,l),this.focusTrait=o,this.selectionTrait=r,this.anchorTrait=a}createMouseController(e){return new LWe(this,e.tree,e.stickyScrollProvider)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const s=[],o=[];let r;i.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&o.push(e+l),this.anchorTrait.has(a)&&(r=e+l)}),s.length>0&&super.setFocus(ff([...super.getFocus(),...s])),o.length>0&&super.setSelection(ff([...super.getSelection(),...o])),typeof r=="number"&&super.setAnchor(r)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class yme{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return pe.filter(pe.map(this.view.onMouseDblClick,gD),e=>e.target!==N_.Filter)}get onMouseOver(){return pe.map(this.view.onMouseOver,gD)}get onMouseOut(){return pe.map(this.view.onMouseOut,gD)}get onContextMenu(){var e;return pe.any(pe.filter(pe.map(this.view.onContextMenu,xWe),t=>!t.isStickyScroll),((e=this.stickyScrollController)==null?void 0:e.onContextMenu)??pe.None)}get onPointer(){return pe.map(this.view.onPointer,gD)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return pe.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e;return((e=this.findController)==null?void 0:e.mode)??Wh.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e;return((e=this.findController)==null?void 0:e.matchType)??xv.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,s,o={}){this._user=e,this._options=o,this.eventBufferer=new vI,this.onDidChangeFindOpenState=pe.None,this.onDidChangeStickyScrollFocused=pe.None,this.disposables=new ne,this._onWillRefilter=new $,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new $,this.treeDelegate=new jq(i);const r=new xQ,a=new xQ,l=this.disposables.add(new pWe(a.event)),c=new OK;this.renderers=s.map(m=>new K6(m,()=>this.model,r.event,l,c,o));for(const m of this.renderers)this.disposables.add(m);let d;o.keyboardNavigationLabelProvider&&(d=new _We(this,o.keyboardNavigationLabelProvider,o.filter),o={...o,filter:d},this.disposables.add(d)),this.focus=new dB(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new dB(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new dB(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new kWe(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...mWe(()=>this.model,o),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,o),r.input=this.model.onDidChangeCollapseState;const u=pe.forEach(this.model.onDidSplice,m=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(m),this.selection.onDidModelSplice(m)})},this.disposables);u(()=>null,null,this.disposables);const h=this.disposables.add(new $),f=this.disposables.add(new hl(0));if(this.disposables.add(pe.any(u,this.focus.onDidChange,this.selection.onDidChange)(()=>{f.trigger(()=>{const m=new Set;for(const p of this.focus.getNodes())m.add(p);for(const p of this.selection.getNodes())m.add(p);h.fire([...m.values()])})})),a.input=h.event,o.keyboardSupport!==!1){const m=pe.chain(this.view.onKeyDown,p=>p.filter(b=>!dm(b.target)).map(b=>new _i(b)));pe.chain(m,p=>p.filter(b=>b.keyCode===15))(this.onLeftArrow,this,this.disposables),pe.chain(m,p=>p.filter(b=>b.keyCode===17))(this.onRightArrow,this,this.disposables),pe.chain(m,p=>p.filter(b=>b.keyCode===10))(this.onSpace,this,this.disposables)}if((o.findWidgetEnabled??!0)&&o.keyboardNavigationLabelProvider&&o.contextViewProvider){const m=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new bWe(this,this.model,this.view,d,o.contextViewProvider,m),this.focusNavigationFilter=p=>this.findController.shouldAllowFocus(p),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=pe.None,this.onDidChangeFindMatchType=pe.None;o.enableStickyScroll&&(this.stickyScrollController=new yte(this,this.model,this.view,this.renderers,this.treeDelegate,o),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=Ta(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===WC.Always)}updateOptions(e={}){var t;this._options={...this._options,...e};for(const i of this.renderers)i.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)==null||t.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===WC.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new yte(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=pe.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),(t=this.stickyScrollController)==null||t.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){var e;(e=this.stickyScrollController)!=null&&e.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){var i;this.view.layout(e,t),Hm(t)&&((i=this.findController)==null||i.layout(t))}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const s=e.treeStickyScrollBackground??e.listBackground;s&&(i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${s}; }`),i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${s}; }`)),e.treeStickyScrollBorder&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const o=Zh(e.listFocusAndSelectionOutline,Zh(e.listSelectionOutline,e.listFocusOutline??""));o&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${o}; outline-offset: -1px;}`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=i.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(o=>this.model.getNode(o));this.selection.set(i,t);const s=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(s,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(o=>this.model.getNode(o));this.focus.set(i,t);const s=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(s,t,!0)})}focusNext(e=1,t=!1,i,s=wh(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,i,s)}focusPrevious(e=1,t=!1,i,s=wh(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,i,s)}focusNextPage(e,t=wh(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=wh(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>{var i;return((i=this.stickyScrollController)==null?void 0:i.height)??0})}focusLast(e,t=wh(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=wh(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);if(i!==-1)if(!this.stickyScrollController)this.view.reveal(i,t);else{const s=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,s)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!0)){const r=this.model.getParentNodeLocation(s);if(!r)return;const a=this.model.getListIndex(r);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!1)){if(!i.children.some(l=>l.visible))return;const[r]=this.view.getFocus(),a=r+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i),o=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,o)}dispose(){var e;gi(this.disposables),(e=this.stickyScrollController)==null||e.dispose(),this.view.dispose()}}class zq{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new hWe(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(s,o){return i.sorter.compare(s.element,o.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=Rt.empty(),i={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),i)}_setChildren(e,t=Rt.empty(),i){const s=new Set,o=new Set,r=l=>{var d;if(l.element===null)return;const c=l;if(s.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const u=this.identityProvider.getId(c.element).toString();o.add(u),this.nodesByIdentity.set(u,c)}(d=i.onDidCreateNode)==null||d.call(i,c)},a=l=>{var d;if(l.element===null)return;const c=l;if(s.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const u=this.identityProvider.getId(c.element).toString();o.has(u)||this.nodesByIdentity.delete(u)}(d=i.onDidDeleteNode)==null||d.call(i,c)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:r,onDidDeleteNode:a})}preserveCollapseState(e=Rt.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Rt.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const r=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(r)}if(!i){let r;return typeof t.collapsed>"u"?r=void 0:t.collapsed===la.Collapsed||t.collapsed===la.PreserveOrCollapsed?r=!0:t.collapsed===la.Expanded||t.collapsed===la.PreserveOrExpanded?r=!1:r=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:r}}const s=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;let o;return typeof t.collapsed>"u"||t.collapsed===la.PreserveOrCollapsed||t.collapsed===la.PreserveOrExpanded?o=i.collapsed:t.collapsed===la.Collapsed?o=!0:t.collapsed===la.Expanded?o=!1:o=!!t.collapsed,{...t,collapsible:s,collapsed:o,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new pa(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new pa(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new pa(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(i);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new pa(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function OT(n){const e=[n.element],t=n.incompressible||!1;return{element:{elements:e,incompressible:t},children:Rt.map(Rt.from(n.children),OT),collapsible:n.collapsible,collapsed:n.collapsed}}function FT(n){const e=[n.element],t=n.incompressible||!1;let i,s;for(;[s,i]=Rt.consume(Rt.from(n.children),2),!(s.length!==1||s[0].incompressible);)n=s[0],e.push(n.element);return{element:{elements:e,incompressible:t},children:Rt.map(Rt.concat(s,i),FT),collapsible:n.collapsible,collapsed:n.collapsed}}function q6(n,e=0){let t;return e<n.element.elements.length-1?t=[q6(n,e+1)]:t=Rt.map(Rt.from(n.children),i=>q6(i,0)),e===0&&n.element.incompressible?{element:n.element.elements[e],children:t,incompressible:!0,collapsible:n.collapsible,collapsed:n.collapsed}:{element:n.element.elements[e],children:t,collapsible:n.collapsible,collapsed:n.collapsed}}function Cte(n){return q6(n,0)}function Cme(n,e,t){return n.element===e?{...n,children:t}:{...n,children:Rt.map(Rt.from(n.children),i=>Cme(i,e,t))}}const NWe=n=>({getId(e){return e.elements.map(t=>n.getId(t).toString()).join("\0")}});class IWe{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new zq(e,t,i),this.enabled=typeof i.compressionEnabled>"u"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e,t=Rt.empty(),i){const s=i.diffIdentityProvider&&NWe(i.diffIdentityProvider);if(e===null){const m=Rt.map(t,this.enabled?FT:OT);this._setChildren(null,m,{diffIdentityProvider:s,diffDepth:1/0});return}const o=this.nodes.get(e);if(!o)throw new pa(this.user,"Unknown compressed tree node");const r=this.model.getNode(o),a=this.model.getParentNodeLocation(o),l=this.model.getNode(a),c=Cte(r),d=Cme(c,e,t),u=(this.enabled?FT:OT)(d),h=i.diffIdentityProvider?(m,p)=>i.diffIdentityProvider.getId(m)===i.diffIdentityProvider.getId(p):void 0;if(Vi(u.element.elements,r.element.elements,h)){this._setChildren(o,u.children||Rt.empty(),{diffIdentityProvider:s,diffDepth:1});return}const f=l.children.map(m=>m===r?u:m);this._setChildren(l.element,f,{diffIdentityProvider:s,diffDepth:r.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,s=Rt.map(i,Cte),o=Rt.map(s,e?FT:OT);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const s=new Set,o=a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},r=a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...i,onDidCreateNode:o,onDidDeleteNode:r})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new pa(this.user,`Tree element not found: ${e}`);return t}}const EWe=n=>n[n.length-1];class Uq{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new Uq(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function DWe(n,e){return{splice(t,i,s){e.splice(t,i,s.map(o=>n.map(o)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function TWe(n,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(n(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(n(t),i)}}}}class RWe{get onDidSplice(){return pe.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return pe.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return pe.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||EWe;const s=o=>this.elementMapper(o.elements);this.nodeMapper=new Hq(o=>new Uq(s,o)),this.model=new IWe(e,DWe(this.nodeMapper,t),TWe(s,i))}setChildren(e,t=Rt.empty(),i={}){this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var MWe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};class $q extends yme{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,s,o={}){super(e,t,i,s,o),this.user=e}setChildren(e,t=Rt.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new zq(e,t,i)}}class Sme{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){let o=this.stickyScrollDelegate.getCompressedNode(e);o||(o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),o.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,s)):(i.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,i.data,s))}disposeElement(e,t,i,s){var o,r,a,l;i.compressedTreeNode?(r=(o=this.renderer).disposeCompressedElements)==null||r.call(o,i.compressedTreeNode,t,i.data,s):(l=(a=this.renderer).disposeElement)==null||l.call(a,e,t,i.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}MWe([yn],Sme.prototype,"compressedTreeNodeProvider",null);class PWe{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let s=0;s<e.length;s++){const o=e[s],r=o.position+o.height;if(s+1<e.length&&r+e[s+1].height>i||s>=t-1&&t<e.length){const l=e.slice(0,s),c=e.slice(s),d=this.compressStickyNodes(c);return[...l,d]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const i=[];for(let c=0;c<e.length;c++){const d=e[c],u=t.getCompressedTreeNode(d.node.element);if(u.element){if(c!==0&&u.element.incompressible)break;i.push(...u.element.elements)}}if(i.length<2)return e[0];const s=e[e.length-1],o={elements:i,incompressible:!1},r={...s.node,children:[],element:o},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:s.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,r),l}}function AWe(n,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=n().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}}}class xme extends $q{constructor(e,t,i,s,o={}){const r=()=>this,a=new PWe(()=>this.model),l=s.map(c=>new Sme(r,a,c));super(e,t,i,l,{...AWe(r,o),stickyScrollDelegate:a})}setChildren(e,t=Rt.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new RWe(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function uB(n){return{...n,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function G6(n,e){return e.parent?e.parent===n?!0:G6(n,e.parent):!1}function OWe(n,e){return n===e||G6(n,e)||G6(e,n)}class Kq{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new Kq(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class FWe{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...Ke.asClassNameArray(he.treeItemLoading)),!0):(t.classList.remove(...Ke.asClassNameArray(he.treeItemLoading)),!1)}disposeElement(e,t,i,s){var o,r;(r=(o=this.renderer).disposeElement)==null||r.call(o,this.nodeMapper.map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function Ste(n){return{browserEvent:n.browserEvent,elements:n.elements.map(e=>e.element)}}function xte(n){return{browserEvent:n.browserEvent,element:n.element&&n.element.element,target:n.target}}class BWe extends BI{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function hB(n){return n instanceof BI?new BWe(n):n}class WWe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)==null||s.call(i,hB(e),t)}onDragOver(e,t,i,s,o,r=!0){return this.dnd.onDragOver(hB(e),t&&t.element,i,s,o)}drop(e,t,i,s,o){this.dnd.drop(hB(e),t&&t.element,i,s,o)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}dispose(){this.dnd.dispose()}}function Lme(n){return n&&{...n,collapseByDefault:!0,identityProvider:n.identityProvider&&{getId(e){return n.identityProvider.getId(e.element)}},dnd:n.dnd&&new WWe(n.dnd),multipleSelectionController:n.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return n.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return n.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:n.accessibilityProvider&&{...n.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:n.accessibilityProvider.getRole?e=>n.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:n.accessibilityProvider.isChecked?e=>{var t;return!!((t=n.accessibilityProvider)!=null&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return n.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return n.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:n.accessibilityProvider.getWidgetRole?()=>n.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:n.accessibilityProvider.getAriaLevel&&(e=>n.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:n.accessibilityProvider.getActiveDescendantId&&(e=>n.accessibilityProvider.getActiveDescendantId(e.element))},filter:n.filter&&{filter(e,t){return n.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:n.keyboardNavigationLabelProvider&&{...n.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return n.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof n.expandOnlyOnTwistieClick>"u"?void 0:typeof n.expandOnlyOnTwistieClick!="function"?n.expandOnlyOnTwistieClick:e=>n.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof n.defaultFindVisibility=="number"?n.defaultFindVisibility:typeof n.defaultFindVisibility>"u"?2:n.defaultFindVisibility(e.element)}}function Z6(n,e){e(n),n.children.forEach(t=>Z6(t,e))}class kme{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return pe.map(this.tree.onDidChangeFocus,Ste)}get onDidChangeSelection(){return pe.map(this.tree.onDidChangeSelection,Ste)}get onMouseDblClick(){return pe.map(this.tree.onMouseDblClick,xte)}get onPointer(){return pe.map(this.tree.onPointer,xte)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,s,o,r={}){this.user=e,this.dataSource=o,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new $,this._onDidChangeNodeSlowState=new $,this.nodeMapper=new Hq(a=>new Kq(a)),this.disposables=new ne,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.sorter=r.sorter,this.getDefaultCollapseState=a=>r.collapseByDefault?r.collapseByDefault(a)?la.PreserveOrCollapsed:la.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,i,s,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=uB({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,s,o){const r=new jq(i),a=s.map(c=>new FWe(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=Lme(o)||{};return new $q(e,t,r,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,i=!1,s,o){if(typeof this.root.element>"u")throw new pa(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await pe.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(await this.refreshAndRenderNode(r,t,s,o),i)try{this.tree.rerender(r)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new pa(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await pe.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(await this.root.refreshPromise,await pe.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const s=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await this.root.refreshPromise,await pe.toPromise(this._onDidRender.event)),s}setSelection(e,t){const i=e.map(s=>this.getDataNode(s));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(s=>this.getDataNode(s));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new pa(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,i,s){await this.refreshNode(e,t,i),!this.disposables.isDisposed&&this.render(e,i,s)}async refreshNode(e,t,i){let s;if(this.subTreeRefreshPromises.forEach((o,r)=>{!s&&OWe(r,e)&&(s=o.then(()=>this.refreshNode(e,t,i)))}),s)return s;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,i);return}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){let s;e.refreshPromise=new Promise(o=>s=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const o=await this.doRefreshNode(e,t,i);e.stale=!1,await q8.settled(o.map(r=>this.doRefreshSubTree(r,t,i)))}finally{s()}}async doRefreshNode(e,t,i){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(Rt.empty());else{const o=this.doGetChildren(e);if(bQ(o))s=Promise.resolve(o);else{const r=_f(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),s=o.finally(()=>r.cancel())}}try{const o=await s;return this.setChildren(e,o,t,i)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),wl(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return bQ(i)?this.processChildren(i):(t=Xn(async()=>this.processChildren(await i)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(et))}setChildren(e,t,i,s){const o=[...t];if(e.children.length===0&&o.length===0)return[];const r=new Map,a=new Map;for(const d of e.children)r.set(d.element,d),this.identityProvider&&a.set(d.id,{node:d,collapsed:this.tree.hasElement(d)&&this.tree.isCollapsed(d)});const l=[],c=o.map(d=>{const u=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const p=uB({element:d,parent:e,hasChildren:u,defaultCollapseState:this.getDefaultCollapseState(d)});return u&&p.defaultCollapseState===la.PreserveOrExpanded&&l.push(p),p}const h=this.identityProvider.getId(d).toString(),f=a.get(h);if(f){const p=f.node;return r.delete(p.element),this.nodes.delete(p.element),this.nodes.set(d,p),p.element=d,p.hasChildren=u,i?f.collapsed?(p.children.forEach(b=>Z6(b,v=>this.nodes.delete(v.element))),p.children.splice(0,p.children.length),p.stale=!0):l.push(p):u&&!f.collapsed&&l.push(p),p}const m=uB({element:d,parent:e,id:h,hasChildren:u,defaultCollapseState:this.getDefaultCollapseState(d)});return s&&s.viewState.focus&&s.viewState.focus.indexOf(h)>-1&&s.focus.push(m),s&&s.viewState.selection&&s.viewState.selection.indexOf(h)>-1&&s.selection.push(m),(s&&s.viewState.expanded&&s.viewState.expanded.indexOf(h)>-1||u&&m.defaultCollapseState===la.PreserveOrExpanded)&&l.push(m),m});for(const d of r.values())Z6(d,u=>this.nodes.delete(u.element));for(const d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,i){const s=e.children.map(r=>this.asTreeElement(r,t)),o=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId(r){return i.diffIdentityProvider.getId(r.element)}}};this.tree.setChildren(e===this.root?null:e,s,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?Rt.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class qq{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new qq(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class HWe{constructor(e,t,i,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderCompressedElements(e,t,i,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...Ke.asClassNameArray(he.treeItemLoading)),!0):(t.classList.remove(...Ke.asClassNameArray(he.treeItemLoading)),!1)}disposeElement(e,t,i,s){var o,r;(r=(o=this.renderer).disposeElement)==null||r.call(o,this.nodeMapper.map(e),t,i.templateData,s)}disposeCompressedElements(e,t,i,s){var o,r;(r=(o=this.renderer).disposeCompressedElements)==null||r.call(o,this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=gi(this.disposables)}}function VWe(n){const e=n&&Lme(n);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return n.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}}}}class jWe extends kme{constructor(e,t,i,s,o,r,a={}){super(e,t,i,o,r,a),this.compressionDelegate=s,this.compressibleNodeMapper=new Hq(l=>new qq(l)),this.filter=a.filter}createTree(e,t,i,s,o){const r=new jq(i),a=s.map(c=>new HWe(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=VWe(o)||{};return new xme(e,t,r,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,i){if(!this.identityProvider)return super.render(e,t);const s=f=>this.identityProvider.getId(f).toString(),o=f=>{const m=new Set;for(const p of f){const b=this.tree.getCompressedTreeNode(p===this.root?null:p);if(b.element)for(const v of b.element.elements)m.add(s(v.element))}return m},r=o(this.tree.getSelection()),a=o(this.tree.getFocus());super.render(e,t,i);const l=this.getSelection();let c=!1;const d=this.getFocus();let u=!1;const h=f=>{const m=f.element;if(m)for(let p=0;p<m.elements.length;p++){const b=s(m.elements[p].element),v=m.elements[m.elements.length-1].element;r.has(b)&&l.indexOf(v)===-1&&(l.push(v),c=!0),a.has(b)&&d.indexOf(v)===-1&&(d.push(v),u=!0)}f.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),u&&this.setFocus(d)}processChildren(e){return this.filter&&(e=Rt.filter(e,t=>{const i=this.filter.filter(t,1),s=zWe(i);if(s===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===1})),super.processChildren(e)}}function zWe(n){return typeof n=="boolean"?n?1:0:Vq(n)?sN(n.visibility):sN(n)}class UWe extends yme{constructor(e,t,i,s,o,r={}){super(e,t,i,s,r),this.user=e,this.dataSource=o,this.identityProvider=r.identityProvider}createModel(e,t,i){return new zq(e,t,i)}}new we("isMac",Lt,_("isMac","Whether the operating system is macOS"));new we("isLinux",Mo,_("isLinux","Whether the operating system is Linux"));const cF=new we("isWindows",As,_("isWindows","Whether the operating system is Windows")),Nme=new we("isWeb",Kv,_("isWeb","Whether the platform is a web browser"));new we("isMacNative",Lt&&!Kv,_("isMacNative","Whether the operating system is macOS on a non-browser platform"));new we("isIOS",rd,_("isIOS","Whether the operating system is iOS"));new we("isMobile",yue,_("isMobile","Whether the platform is a mobile web browser"));new we("isDevelopment",!1,!0);new we("productQualityType","",_("productQualityType","Quality type of VS Code"));const Ime="inputFocus",Eme=new we(Ime,!1,_("inputFocus","Whether keyboard focus is inside an input box"));var Rf=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ii=function(n,e){return function(t,i){e(t,i,n)}};const Sl=kt("listService");class $We{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new ne,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,i;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)==null||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(i=this._lastFocusedWidget)==null||i.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new Lge(Ta(),"").style(Xv)),this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),S4(e.getHTMLElement())&&this.setLastFocusedList(e),ql(e.onDidFocus(()=>this.setLastFocusedList(e)),Pe(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const oN=new we("listScrollAtBoundary","none");se.or(oN.isEqualTo("top"),oN.isEqualTo("both"));se.or(oN.isEqualTo("bottom"),oN.isEqualTo("both"));const Dme=new we("listFocus",!0),Tme=new we("treestickyScrollFocused",!1),dF=new we("listSupportsMultiselect",!0),Rme=se.and(Dme,se.not(Ime),Tme.negate()),Gq=new we("listHasSelectionOrFocus",!1),Zq=new we("listDoubleSelection",!1),Yq=new we("listMultiSelection",!1),uF=new we("listSelectionNavigation",!1),KWe=new we("listSupportsFind",!0),Xq=new we("treeElementCanCollapse",!1),qWe=new we("treeElementHasParent",!1),Qq=new we("treeElementCanExpand",!1),GWe=new we("treeElementHasChild",!1),ZWe=new we("treeFindOpen",!1),Mme="listTypeNavigationMode",Pme="listAutomaticKeyboardNavigation";function hF(n,e){const t=n.createScoped(e.getHTMLElement());return Dme.bindTo(t),t}function fF(n,e){const t=oN.bindTo(n),i=()=>{const s=e.scrollTop===0,o=e.scrollHeight-e.renderHeight-e.scrollTop<1;s&&o?t.set("both"):s?t.set("top"):o?t.set("bottom"):t.set("none")};return i(),e.onDidScroll(i)}const e0="workbench.list.multiSelectModifier",BT="workbench.list.openMode",cl="workbench.list.horizontalScrolling",Jq="workbench.list.defaultFindMode",eG="workbench.list.typeNavigationMode",lM="workbench.list.keyboardNavigation",dd="workbench.list.scrollByPage",tG="workbench.list.defaultFindMatchType",rN="workbench.tree.indent",cM="workbench.tree.renderIndentGuides",ud="workbench.list.smoothScrolling",Mu="workbench.list.mouseWheelScrollSensitivity",Pu="workbench.list.fastScrollSensitivity",dM="workbench.tree.expandMode",uM="workbench.tree.enableStickyScroll",hM="workbench.tree.stickyScrollMaxItemCount";function Au(n){return n.getValue(e0)==="alt"}class YWe extends G{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Au(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(e0)&&(this.useAltAsMultipleSelectionModifier=Au(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:Cge(e)}isSelectionRangeChangeEvent(e){return Sge(e)}}function gF(n,e){const t=n.get(_t),i=n.get(ei),s=new ne;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(r){return i.mightProducePrintableCharacter(r)}},smoothScrolling:!!t.getValue(ud),mouseWheelScrollSensitivity:t.getValue(Mu),fastScrollSensitivity:t.getValue(Pu),multipleSelectionController:e.multipleSelectionController??s.add(new YWe(t)),keyboardNavigationEventFilter:JWe(i),scrollByPage:!!t.getValue(dd)},s]}let Lte=class extends Wa{constructor(e,t,i,s,o,r,a,l,c){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(cl),[u,h]=c.invokeFunction(gF,o);super(e,t,i,s,{keyboardSupport:!1,...u,horizontalScrolling:d}),this.disposables.add(h),this.contextKeyService=hF(r,this),this.disposables.add(fF(this.contextKeyService,this)),this.listSupportsMultiSelect=dF.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),uF.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=Gq.bindTo(this.contextKeyService),this.listDoubleSelection=Zq.bindTo(this.contextKeyService),this.listMultiSelection=Yq.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Au(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const m=this.getSelection(),p=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(m.length>0||p.length>0),this.listMultiSelection.set(m.length>1),this.listDoubleSelection.set(m.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const m=this.getSelection(),p=this.getFocus();this.listHasSelectionOrFocus.set(m.length>0||p.length>0)})),this.disposables.add(l.onDidChangeConfiguration(m=>{m.affectsConfiguration(e0)&&(this._useAltAsMultipleSelectionModifier=Au(l));let p={};if(m.affectsConfiguration(cl)&&this.horizontalScrolling===void 0){const b=!!l.getValue(cl);p={...p,horizontalScrolling:b}}if(m.affectsConfiguration(dd)){const b=!!l.getValue(dd);p={...p,scrollByPage:b}}if(m.affectsConfiguration(ud)){const b=!!l.getValue(ud);p={...p,smoothScrolling:b}}if(m.affectsConfiguration(Mu)){const b=l.getValue(Mu);p={...p,mouseWheelScrollSensitivity:b}}if(m.affectsConfiguration(Pu)){const b=l.getValue(Pu);p={...p,fastScrollSensitivity:b}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new Ame(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Qv(e):Xv)}};Lte=Rf([Ii(5,qe),Ii(6,Sl),Ii(7,_t),Ii(8,Ae)],Lte);let kte=class extends tWe{constructor(e,t,i,s,o,r,a,l,c){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(cl),[u,h]=c.invokeFunction(gF,o);super(e,t,i,s,{keyboardSupport:!1,...u,horizontalScrolling:d}),this.disposables=new ne,this.disposables.add(h),this.contextKeyService=hF(r,this),this.disposables.add(fF(this.contextKeyService,this.widget)),this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=dF.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),uF.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this._useAltAsMultipleSelectionModifier=Au(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(m=>{m.affectsConfiguration(e0)&&(this._useAltAsMultipleSelectionModifier=Au(l));let p={};if(m.affectsConfiguration(cl)&&this.horizontalScrolling===void 0){const b=!!l.getValue(cl);p={...p,horizontalScrolling:b}}if(m.affectsConfiguration(dd)){const b=!!l.getValue(dd);p={...p,scrollByPage:b}}if(m.affectsConfiguration(ud)){const b=!!l.getValue(ud);p={...p,smoothScrolling:b}}if(m.affectsConfiguration(Mu)){const b=l.getValue(Mu);p={...p,mouseWheelScrollSensitivity:b}}if(m.affectsConfiguration(Pu)){const b=l.getValue(Pu);p={...p,fastScrollSensitivity:b}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new Ame(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Qv(e):Xv)}dispose(){this.disposables.dispose(),super.dispose()}};kte=Rf([Ii(5,qe),Ii(6,Sl),Ii(7,_t),Ii(8,Ae)],kte);let Nte=class extends $6{constructor(e,t,i,s,o,r,a,l,c,d){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!c.getValue(cl),[h,f]=d.invokeFunction(gF,r);super(e,t,i,s,o,{keyboardSupport:!1,...h,horizontalScrolling:u}),this.disposables.add(f),this.contextKeyService=hF(a,this),this.disposables.add(fF(this.contextKeyService,this)),this.listSupportsMultiSelect=dF.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),uF.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=Gq.bindTo(this.contextKeyService),this.listDoubleSelection=Zq.bindTo(this.contextKeyService),this.listMultiSelection=Yq.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Au(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),b=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||b.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),b=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||b.length>0)})),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(e0)&&(this._useAltAsMultipleSelectionModifier=Au(c));let b={};if(p.affectsConfiguration(cl)&&this.horizontalScrolling===void 0){const v=!!c.getValue(cl);b={...b,horizontalScrolling:v}}if(p.affectsConfiguration(dd)){const v=!!c.getValue(dd);b={...b,scrollByPage:v}}if(p.affectsConfiguration(ud)){const v=!!c.getValue(ud);b={...b,smoothScrolling:v}}if(p.affectsConfiguration(Mu)){const v=c.getValue(Mu);b={...b,mouseWheelScrollSensitivity:v}}if(p.affectsConfiguration(Pu)){const v=c.getValue(Pu);b={...b,fastScrollSensitivity:v}}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new XWe(this,{configurationService:c,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Qv(e):Xv)}dispose(){this.disposables.dispose(),super.dispose()}};Nte=Rf([Ii(6,qe),Ii(7,Sl),Ii(8,_t),Ii(9,Ae)],Nte);class iG extends G{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new $),this.onDidOpen=this._onDidOpen.event,this._register(pe.filter(this.widget.onDidChangeSelection,i=>wh(i.browserEvent))(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(BT))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration(BT)&&(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(BT))!=="doubleClick")}))):this.openOnSingleClick=(t==null?void 0:t.openOnSingleClick)??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!i;this._open(this.getSelectedElement(),i,s,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,o=!0,r=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const o=!1,r=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}_open(e,t,i,s,o){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:o})}}class Ame extends iG{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class XWe extends iG{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class QWe extends iG{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function JWe(n){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const i=n.softDispatch(t,t.target);return i.kind===1?(e=!0,!1):(e=!1,i.kind===0)}}let Y6=class extends $q{constructor(e,t,i,s,o,r,a,l,c){const{options:d,getTypeNavigationMode:u,disposable:h}=r.invokeFunction(jI,o);super(e,t,i,s,d),this.disposables.add(h),this.internals=new Lv(this,o,u,o.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Y6=Rf([Ii(5,Ae),Ii(6,qe),Ii(7,Sl),Ii(8,_t)],Y6);let Ite=class extends xme{constructor(e,t,i,s,o,r,a,l,c){const{options:d,getTypeNavigationMode:u,disposable:h}=r.invokeFunction(jI,o);super(e,t,i,s,d),this.disposables.add(h),this.internals=new Lv(this,o,u,o.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Ite=Rf([Ii(5,Ae),Ii(6,qe),Ii(7,Sl),Ii(8,_t)],Ite);let Ete=class extends UWe{constructor(e,t,i,s,o,r,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(jI,r);super(e,t,i,s,o,u),this.disposables.add(f),this.internals=new Lv(this,r,h,r.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Ete=Rf([Ii(6,Ae),Ii(7,qe),Ii(8,Sl),Ii(9,_t)],Ete);let X6=class extends kme{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,s,o,r,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(jI,r);super(e,t,i,s,o,u),this.disposables.add(f),this.internals=new Lv(this,r,h,r.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};X6=Rf([Ii(6,Ae),Ii(7,qe),Ii(8,Sl),Ii(9,_t)],X6);let Dte=class extends jWe{constructor(e,t,i,s,o,r,a,l,c,d,u){const{options:h,getTypeNavigationMode:f,disposable:m}=l.invokeFunction(jI,a);super(e,t,i,s,o,r,h),this.disposables.add(m),this.internals=new Lv(this,a,f,a.overrideStyles,c,d,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Dte=Rf([Ii(7,Ae),Ii(8,qe),Ii(9,Sl),Ii(10,_t)],Dte);function Ome(n){const e=n.getValue(Jq);if(e==="highlight")return Wh.Highlight;if(e==="filter")return Wh.Filter;const t=n.getValue(lM);if(t==="simple"||t==="highlight")return Wh.Highlight;if(t==="filter")return Wh.Filter}function Fme(n){const e=n.getValue(tG);if(e==="fuzzy")return xv.Fuzzy;if(e==="contiguous")return xv.Contiguous}function jI(n,e){const t=n.get(_t),i=n.get(Df),s=n.get(qe),o=n.get(Ae),r=()=>{const h=s.getContextKeyValue(Mme);if(h==="automatic")return su.Automatic;if(h==="trigger"||s.getContextKeyValue(Pme)===!1)return su.Trigger;const m=t.getValue(eG);if(m==="automatic")return su.Automatic;if(m==="trigger")return su.Trigger},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(cl),[l,c]=o.invokeFunction(gF,e),d=e.paddingBottom,u=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(cM);return{getTypeNavigationMode:r,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(rN)=="number"?t.getValue(rN):void 0,renderIndentGuides:u,smoothScrolling:!!t.getValue(ud),defaultFindMode:Ome(t),defaultFindMatchType:Fme(t),horizontalScrolling:a,scrollByPage:!!t.getValue(dd),paddingBottom:d,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(dM)==="doubleClick",contextViewProvider:i,findWidgetStyles:n7e,enableStickyScroll:!!t.getValue(uM),stickyScrollMaxItemCount:Number(t.getValue(hM))}}}let Lv=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,s,o,r,a){this.tree=e,this.disposables=[],this.contextKeyService=hF(o,e),this.disposables.push(fF(this.contextKeyService,e)),this.listSupportsMultiSelect=dF.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),uF.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=KWe.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=Gq.bindTo(this.contextKeyService),this.hasDoubleSelection=Zq.bindTo(this.contextKeyService),this.hasMultiSelection=Yq.bindTo(this.contextKeyService),this.treeElementCanCollapse=Xq.bindTo(this.contextKeyService),this.treeElementHasParent=qWe.bindTo(this.contextKeyService),this.treeElementCanExpand=Qq.bindTo(this.contextKeyService),this.treeElementHasChild=GWe.bindTo(this.contextKeyService),this.treeFindOpen=ZWe.bindTo(this.contextKeyService),this.treeStickyScrollFocused=Tme.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Au(a),this.updateStyleOverrides(s);const c=()=>{const u=e.getFocus()[0];if(!u)return;const h=e.getNode(u);this.treeElementCanCollapse.set(h.collapsible&&!h.collapsed),this.treeElementHasParent.set(!!e.getParentElement(u)),this.treeElementCanExpand.set(h.collapsible&&h.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(u))},d=new Set;d.add(Mme),d.add(Pme),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection(()=>{const u=e.getSelection(),h=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(u.length>0||h.length>0),this.hasMultiSelection.set(u.length>1),this.hasDoubleSelection.set(u.length===2)})}),e.onDidChangeFocus(()=>{const u=e.getSelection(),h=e.getFocus();this.hasSelectionOrFocus.set(u.length>0||h.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(u=>this.treeFindOpen.set(u)),e.onDidChangeStickyScrollFocused(u=>this.treeStickyScrollFocused.set(u)),a.onDidChangeConfiguration(u=>{let h={};if(u.affectsConfiguration(e0)&&(this._useAltAsMultipleSelectionModifier=Au(a)),u.affectsConfiguration(rN)){const f=a.getValue(rN);h={...h,indent:f}}if(u.affectsConfiguration(cM)&&t.renderIndentGuides===void 0){const f=a.getValue(cM);h={...h,renderIndentGuides:f}}if(u.affectsConfiguration(ud)){const f=!!a.getValue(ud);h={...h,smoothScrolling:f}}if(u.affectsConfiguration(Jq)||u.affectsConfiguration(lM)){const f=Ome(a);h={...h,defaultFindMode:f}}if(u.affectsConfiguration(eG)||u.affectsConfiguration(lM)){const f=i();h={...h,typeNavigationMode:f}}if(u.affectsConfiguration(tG)){const f=Fme(a);h={...h,defaultFindMatchType:f}}if(u.affectsConfiguration(cl)&&t.horizontalScrolling===void 0){const f=!!a.getValue(cl);h={...h,horizontalScrolling:f}}if(u.affectsConfiguration(dd)){const f=!!a.getValue(dd);h={...h,scrollByPage:f}}if(u.affectsConfiguration(dM)&&t.expandOnlyOnTwistieClick===void 0&&(h={...h,expandOnlyOnTwistieClick:a.getValue(dM)==="doubleClick"}),u.affectsConfiguration(uM)){const f=a.getValue(uM);h={...h,enableStickyScroll:f}}if(u.affectsConfiguration(hM)){const f=Math.max(1,a.getValue(hM));h={...h,stickyScrollMaxItemCount:f}}if(u.affectsConfiguration(Mu)){const f=a.getValue(Mu);h={...h,mouseWheelScrollSensitivity:f}}if(u.affectsConfiguration(Pu)){const f=a.getValue(Pu);h={...h,fastScrollSensitivity:f}}Object.keys(h).length>0&&e.updateOptions(h)}),this.contextKeyService.onDidChangeContext(u=>{u.affectsSome(d)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new QWe(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?Qv(e):Xv)}dispose(){this.disposables=gi(this.disposables)}};Lv=Rf([Ii(4,qe),Ii(5,Sl),Ii(6,_t)],Lv);const e6e=Zi.as(rc.Configuration);e6e.registerConfiguration({id:"workbench",order:7,title:_("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[e0]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[_("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),_("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:_({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[BT]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:_({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[cl]:{type:"boolean",default:!1,description:_("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[dd]:{type:"boolean",default:!1,description:_("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[rN]:{type:"number",default:8,minimum:4,maximum:40,description:_("tree indent setting","Controls tree indentation in pixels.")},[cM]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:_("render tree indent guides","Controls whether the tree should render indent guides.")},[ud]:{type:"boolean",default:!1,description:_("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Mu]:{type:"number",default:1,markdownDescription:_("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Pu]:{type:"number",default:5,markdownDescription:_("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[Jq]:{type:"string",enum:["highlight","filter"],enumDescriptions:[_("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),_("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:_("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[lM]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[_("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),_("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),_("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:_("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:_("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[tG]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[_("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),_("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:_("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[dM]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:_("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[uM]:{type:"boolean",default:!0,description:_("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[hM]:{type:"number",minimum:1,default:7,markdownDescription:_("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[eG]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:_("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class um extends G{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(t==null?void 0:t.supportIcons)??!1,this.domNode=ae(e,ge("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",s){e||(e=""),s&&(e=um.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&Ar(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){var i,s,o;const e=[];let t=0;for(const r of this.highlights){if(r.end===r.start)continue;if(t<r.start){const c=this.text.substring(t,r.start);this.supportIcons?e.push(...lm(c)):e.push(c),t=r.start}const a=this.text.substring(t,r.end),l=ge("span.highlight",void 0,...this.supportIcons?lm(a):[a]);r.extraClasses&&l.classList.add(...r.extraClasses),e.push(l),t=r.end}if(t<this.text.length){const r=this.text.substring(t);this.supportIcons?e.push(...lm(r)):e.push(r)}if(ys(this.domNode,...e),(s=(i=this.options)==null?void 0:i.hoverDelegate)!=null&&s.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const r=((o=this.options)==null?void 0:o.hoverDelegate)??Wo("mouse");this.customHover=this._register(_d().setupManagedHover(r,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let i=0,s=0;return e.replace(/\r\n|\r|\n/g,(o,r)=>{s=o===`\r
`?-1:0,r+=i;for(const a of t)a.end<=r||(a.start>=r&&(a.start+=s),a.end>=r&&(a.end+=s));return i+=s,"⏎"})}}class IS{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||Ar(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class fM extends G{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new IS(ae(e,ge(".monaco-icon-label")))),this.labelContainer=ae(this.domNode.element,ge(".monaco-icon-label-container")),this.nameContainer=ae(this.labelContainer,ge("span.monaco-icon-name-container")),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=this._register(new n6e(this.nameContainer,!!t.supportIcons)):this.nameNode=new t6e(this.nameContainer),this.hoverDelegate=(t==null?void 0:t.hoverDelegate)??Wo("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){const s=["monaco-icon-label"],o=["monaco-icon-label-container"];let r="";i&&(i.extraClasses&&s.push(...i.extraClasses),i.italic&&s.push("italic"),i.strikethrough&&s.push("strikethrough"),i.disabledCommand&&o.push("disabled"),i.title&&(typeof i.title=="string"?r+=i.title:r+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(i!=null&&i.iconPath){let l;!a||!Qn(a)?(l=ge(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=bf(i==null?void 0:i.iconPath)}else a&&a.remove();if(this.domNode.classNames=s,this.domNode.element.setAttribute("aria-label",r),this.labelContainer.classList.value="",this.labelContainer.classList.add(...o),this.setupHover(i!=null&&i.descriptionTitle?this.labelContainer:this.element,i==null?void 0:i.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof um?(l.set(t||"",i?i.descriptionMatches:void 0,void 0,i==null?void 0:i.labelEscapeNewLines),this.setupHover(l.element,i==null?void 0:i.descriptionTitle)):(l.textContent=t&&(i!=null&&i.labelEscapeNewLines)?um.escapeNewLines(t,[]):t||"",this.setupHover(l.element,(i==null?void 0:i.descriptionTitle)||""),l.empty=!t)}if(i!=null&&i.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=(i==null?void 0:i.suffix)??""}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)(function(o,r){ir(r)?o.title=fq(r):r!=null&&r.markdownNotSupportedFallback?o.title=r.markdownNotSupportedFallback:o.removeAttribute("title")})(e,t);else{const s=_d().setupManagedHover(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new IS(sMe(this.nameContainer,ge("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new IS(ae(e.element,ge("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new IS(ae(this.labelContainer,ge("span.monaco-icon-description-container"))));(e=this.creationOptions)!=null&&e.supportDescriptionHighlights?this.descriptionNode=this._register(new um(ae(t.element,ge("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new IS(ae(t.element,ge("span.label-description"))))}return this.descriptionNode}}let t6e=class{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Ar(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=ae(this.container,ge("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const s=e[i],o=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${i}`;ae(this.container,ge("a.label-name",{id:o,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},s)),i<e.length-1&&ae(this.container,ge("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}};function i6e(n,e,t){if(!t)return;let i=0;return n.map(s=>{const o={start:i,end:i+s.length},r=t.map(a=>Ws.intersect(o,a)).filter(a=>!Ws.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=o.end+e.length,r})}class n6e extends G{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Ar(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new um(ae(this.container,ge("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=(t==null?void 0:t.separator)||"/",s=i6e(e,i,t==null?void 0:t.matches);for(let o=0;o<e.length;o++){const r=e[o],a=s?s[o]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${o}`,c=ge("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":o,role:"treeitem"});this._register(new um(ae(this.container,c),{supportIcons:this.supportIcons})).set(r,a,void 0,t==null?void 0:t.labelEscapeNewLines),o<e.length-1&&ae(c,ge("span.label-separator",void 0,i))}}}}const mD=ge,Bme={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class B1 extends G{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const s=this.options.keybindingLabelForeground;this.domNode=ae(e,mD(".monaco-keybinding")),s&&(this.domNode.style.color=s),this.hover=this._register(_d().setupManagedHover(Wo("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&B1.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let i=1;i<e.length;i++)ae(this.domNode,mD("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[i],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){ws(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const s=vq.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,!!(i!=null&&i.ctrlKey),s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,!!(i!=null&&i.shiftKey),s.separator),t.altKey&&this.renderKey(e,s.altKey,!!(i!=null&&i.altKey),s.separator),t.metaKey&&this.renderKey(e,s.metaKey,!!(i!=null&&i.metaKey),s.separator);const o=t.keyLabel;o&&this.renderKey(e,o,!!(i!=null&&i.keyCode),"")}renderKey(e,t,i,s){ae(e,this.createKeyElement(t,i?".highlight":"")),s&&ae(e,mD("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){ae(e,this.createKeyElement(_("unbound","Unbound")))}createKeyElement(e,t=""){const i=mD("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Ar(e.firstPart,t.firstPart)&&Ar(e.chordPart,t.chordPart)}}const Tte=new ad(()=>{const n=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:n,collatorIsNumeric:n.resolvedOptions().numeric}});function s6e(n,e,t=!1){const i=n||"",s=e||"",o=Tte.value.collator.compare(i,s);return Tte.value.collatorIsNumeric&&o===0&&i!==s?i<s?-1:1:o}function o6e(n,e,t){const i=n.toLowerCase(),s=e.toLowerCase(),o=r6e(n,e,t);if(o)return o;const r=i.endsWith(t),a=s.endsWith(t);if(r!==a)return r?-1:1;const l=s6e(i,s);return l!==0?l:i.localeCompare(s)}function r6e(n,e,t){const i=n.toLowerCase(),s=e.toLowerCase(),o=i.startsWith(t),r=s.startsWith(t);if(o!==r)return o?-1:1;if(o&&r){if(i.length<s.length)return-1;if(i.length>s.length)return 1}return 0}var mF=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Q6=function(n,e){return function(t,i){e(t,i,n)}},J6;const mc=ge;class Wme{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new ad(()=>{const s=i.label??"",o=JS(s).text.trim(),r=i.ariaLabel||[s,this.saneDescription,this.saneDetail].map(a=>g5e(a)).filter(a=>!!a).join(", ");return{saneLabel:s,saneSortLabel:o,saneAriaLabel:r}}),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class ks extends Wme{constructor(e,t,i,s,o,r){var a,l,c;super(e,t,o),this.fireButtonTriggered=i,this._onChecked=s,this.item=o,this._separator=r,this._checked=!1,this.onChecked=t?pe.map(pe.filter(this._onChecked.event,d=>d.element===this),d=>d.checked):pe.None,this._saneDetail=o.detail,this._labelHighlights=(a=o.highlights)==null?void 0:a.label,this._descriptionHighlights=(l=o.highlights)==null?void 0:l.description,this._detailHighlights=(c=o.highlights)==null?void 0:c.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var $d;(function(n){n[n.NONE=0]="NONE",n[n.MOUSE_HOVER=1]="MOUSE_HOVER",n[n.ACTIVE_ITEM=2]="ACTIVE_ITEM"})($d||($d={}));class Kp extends Wme{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=$d.NONE}}class a6e{getHeight(e){return e instanceof Kp?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof ks?gM.ID:mM.ID}}class l6e{getWidgetAriaLabel(){return _("quickInput","Quick Input")}getAriaLabel(e){var t;return(t=e.separator)!=null&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof ks)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class Hme{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new ne,t.toDisposeTemplate=new ne,t.entry=ae(e,mc(".quick-input-list-entry"));const i=ae(t.entry,mc("label.quick-input-list-label"));t.toDisposeTemplate.add(Ji(i,fe.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=ae(i,mc("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const s=ae(i,mc(".quick-input-list-rows")),o=ae(s,mc(".quick-input-list-row")),r=ae(s,mc(".quick-input-list-row"));t.label=new fM(o,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=DK(t.label.element,mc(".quick-input-list-icon"));const a=ae(o,mc(".quick-input-list-entry-keybinding"));t.keybinding=new B1(a,Mr),t.toDisposeTemplate.add(t.keybinding);const l=ae(r,mc(".quick-input-list-label-meta"));return t.detail=new fM(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=ae(t.entry,mc(".quick-input-list-separator")),t.actionBar=new Ea(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}var sb;let gM=(sb=class extends Hme{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return J6.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(Ji(t.checkbox,fe.CHANGE,i=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,i){var h;const s=e.element;i.element=s,s.element=i.entry??void 0;const o=s.item;i.checkbox.checked=s.checked,i.toDisposeElement.add(s.onChecked(f=>i.checkbox.checked=f)),i.checkbox.disabled=s.checkboxDisabled;const{labelHighlights:r,descriptionHighlights:a,detailHighlights:l}=s;if(o.iconPath){const f=kC(this.themeService.getColorTheme().type)?o.iconPath.dark:o.iconPath.light??o.iconPath.dark,m=Be.revive(f);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=bf(m)}else i.icon.style.backgroundImage="",i.icon.className=o.iconClass?`quick-input-list-icon ${o.iconClass}`:"";let c;!s.saneTooltip&&s.saneDescription&&(c={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const d={matches:r||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(d.extraClasses=o.iconClasses,d.italic=o.italic,d.strikethrough=o.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(s.saneLabel,s.saneDescription,d),i.keybinding.set(o.keybinding),s.saneDetail){let f;s.saneTooltip||(f={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(s.saneDetail,void 0,{matches:l,title:f,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";(h=s.separator)!=null&&h.label?(i.separator.textContent=s.separator.label,i.separator.style.display="",this.addItemWithSeparator(s)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!s.separator);const u=o.buttons;u&&u.length?(i.actionBar.push(u.map((f,m)=>Kx(f,`id-${m}`,()=>s.fireButtonTriggered({button:f,item:s.item}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}},J6=sb,sb.ID="quickpickitem",sb);gM=J6=mF([Q6(1,Vn)],gM);const yA=class yA extends Hme{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return yA.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderTemplate(e){const t=super.renderTemplate(e);return t.checkbox.style.display="none",t}renderElement(e,t,i){const s=e.element;i.element=s,s.element=i.entry??void 0,s.element.classList.toggle("focus-inside",!!s.focusInsideSeparator);const o=s.separator,{labelHighlights:r,descriptionHighlights:a,detailHighlights:l}=s;i.icon.style.backgroundImage="",i.icon.className="";let c;!s.saneTooltip&&s.saneDescription&&(c={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const d={matches:r||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(s.saneLabel,s.saneDescription,d),s.saneDetail){let h;s.saneTooltip||(h={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(s.saneDetail,void 0,{matches:l,title:h,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const u=o.buttons;u&&u.length?(i.actionBar.push(u.map((h,f)=>Kx(h,`id-${f}`,()=>s.fireSeparatorButtonTriggered({button:h,separator:s.separator}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(s)}disposeElement(e,t,i){var s;this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||(s=e.element.element)==null||s.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}};yA.ID="quickpickseparator";let mM=yA,aN=class extends G{constructor(e,t,i,s,o,r){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this.accessibilityService=r,this._onKeyDown=new $,this._onLeave=new $,this.onLeave=this._onLeave.event,this._visibleCountObservable=pt("VisibleCount",0),this.onChangedVisibleCount=pe.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=pt("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=pe.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=pt("CheckedCount",0),this.onChangedCheckedCount=pe.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=h6({equalsFn:Vi},new Array),this.onChangedCheckedElements=pe.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new $,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new $,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new $,this._elementCheckedEventBufferer=new vI,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new ne),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=ae(this.parent,mc(".quick-input-list")),this._separatorRenderer=new mM(t),this._itemRenderer=o.createInstance(gM,t),this._tree=this._register(o.createInstance(Y6,"QuickInput",this._container,new a6e,[this._itemRenderer,this._separatorRenderer],{filter:{filter(a){return a.hidden?0:a instanceof Kp?2:1}},sorter:{compare:(a,l)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const c=this._lastQueryString.toLowerCase();return d6e(a,l,c)}},accessibilityProvider:new l6e,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:WC.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=s,this._registerListeners()}get onDidChangeFocus(){return pe.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof ks).map(t=>t.item),this._store)}get onDidChangeSelection(){return pe.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof ks).map(t=>t.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new _i(e);switch(t.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(Q(this._container,fe.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(Q(this._container,fe.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(t=>!t.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new ihe(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{var i;if(jQ(t.browserEvent.target)){e.cancel();return}if(!(!jQ(t.browserEvent.relatedTarget)&&Zn(t.browserEvent.relatedTarget,(i=t.element)==null?void 0:i.element)))try{await e.trigger(async()=>{t.element instanceof ks&&this.showHover(t.element)})}catch(s){if(!wl(s))throw s}})),this._register(this._tree.onMouseOut(t=>{var i;Zn(t.browserEvent.relatedTarget,(i=t.element)==null?void 0:i.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const i of this._separatorRenderer.visibleSeparators){const s=i===t;!!(i.focusInsideSeparator&$d.ACTIVE_ITEM)!==s&&(s?i.focusInsideSeparator|=$d.ACTIVE_ITEM:i.focusInsideSeparator&=~$d.ACTIVE_ITEM,this._tree.rerender(i))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&$d.MOUSE_HOVER)||(i.focusInsideSeparator|=$d.MOUSE_HOVER,this._tree.rerender(i))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&$d.MOUSE_HOVER)&&(i.focusInsideSeparator&=~$d.MOUSE_HOVER,this._tree.rerender(i))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(i=>i instanceof ks);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof Kp&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let t;this._itemElements=new Array,this._elementTree=e.reduce((i,s,o)=>{let r;if(s.type==="separator"){if(!s.buttons)return i;t=new Kp(o,a=>this._onSeparatorButtonTriggered.fire(a),s),r=t}else{const a=o>0?e[o-1]:void 0;let l;a&&a.type==="separator"&&!a.buttons&&(t=void 0,l=a);const c=new ks(o,this._hasCheckboxes,d=>this._onButtonTriggered.fire(d),this._elementChecked,s,l);if(this._itemElements.push(c),t)return t.children.push(c),i;r=c}return i.push(r),i},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const i=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),s=i==null?void 0:i.parentNode;if(i&&s){const o=i.nextSibling;i.remove(),s.insertBefore(i,o)}},0)}setFocusedElements(e){const t=e.map(i=>this._itemElements.find(s=>s.item===i)).filter(i=>!!i).filter(i=>!i.hidden);if(this._tree.setFocus(t),e.length>0){const i=this._tree.getFocus()[0];i&&this._tree.reveal(i)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(i=>this._itemElements.find(s=>s.item===i)).filter(i=>!!i);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const i of e)t.add(i);for(const i of this._itemElements)i.checked=t.has(i.item)})}focus(e){var t;if(this._itemElements.length)switch(e===Li.Second&&this._itemElements.length<2&&(e=Li.First),e){case Li.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,i=>i.element instanceof ks);break;case Li.Second:{this._tree.scrollTop=0;let i=!1;this._tree.focusFirst(void 0,s=>s.element instanceof ks?i?!0:(i=!i,!1):!1);break}case Li.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,i=>i.element instanceof ks);break;case Li.Next:{const i=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,o=>o.element instanceof ks?(this._tree.reveal(o.element),!0):!1);const s=this._tree.getFocus();i.length&&i[0]===s[0]&&i[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case Li.Previous:{const i=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,o=>{if(!(o.element instanceof ks))return!1;const r=this._tree.getParentElement(o.element);return r===null||r.children[0]!==o.element?this._tree.reveal(o.element):this._tree.reveal(r),!0});const s=this._tree.getFocus();i.length&&i[0]===s[0]&&i[0]===this._itemElements[0]&&this._onLeave.fire();break}case Li.NextPage:this._tree.focusNextPage(void 0,i=>i.element instanceof ks?(this._tree.reveal(i.element),!0):!1);break;case Li.PreviousPage:this._tree.focusPreviousPage(void 0,i=>{if(!(i.element instanceof ks))return!1;const s=this._tree.getParentElement(i.element);return s===null||s.children[0]!==i.element?this._tree.reveal(i.element):this._tree.reveal(s),!0});break;case Li.NextSeparator:{let i=!1;const s=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,r=>{if(i)return!0;if(r.element instanceof Kp)i=!0,this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element.children[0]):this._tree.reveal(r.element,0);else if(r.element instanceof ks){if(r.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),!0;if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1});const o=this._tree.getFocus()[0];s===o&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,r=>r.element instanceof ks));break}case Li.PreviousSeparator:{let i,s=!!((t=this._tree.getFocus()[0])!=null&&t.separator);this._tree.focusPrevious(void 0,!0,void 0,o=>{if(o.element instanceof Kp)s?i||(this._separatorRenderer.isSeparatorVisible(o.element)?this._tree.reveal(o.element):this._tree.reveal(o.element,0),i=o.element.children[0]):s=!0;else if(o.element instanceof ks&&!i){if(o.element.separator)this._itemRenderer.isItemWithSeparatorVisible(o.element)?this._tree.reveal(o.element):this._tree.reveal(o.element,0),i=o.element;else if(o.element===this._elementTree[0])return this._tree.reveal(o.element,0),!0}return!1}),i&&this._tree.setFocus([i]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const s=i.index&&this._inputElements[i.index-1];i.item&&(i.separator=s&&s.type==="separator"&&!s.buttons?s:void 0)});else{let i;this._itemElements.forEach(s=>{let o;this.matchOnLabelMode==="fuzzy"?o=this.matchOnLabel?U3(e,JS(s.saneLabel))??void 0:void 0:o=this.matchOnLabel?c6e(t,JS(s.saneLabel))??void 0:void 0;const r=this.matchOnDescription?U3(e,JS(s.saneDescription||""))??void 0:void 0,a=this.matchOnDetail?U3(e,JS(s.saneDetail||""))??void 0:void 0;if(o||r||a?(s.labelHighlights=o,s.descriptionHighlights=r,s.detailHighlights=a,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=s.item?!s.item.alwaysShow:!0),s.item?s.separator=void 0:s.separator&&(s.hidden=!0),!this.sortByLabel){const l=s.index&&this._inputElements[s.index-1]||void 0;(l==null?void 0:l.type)==="separator"&&!l.buttons&&(i=l),i&&!s.hidden&&(s.separator=i,i=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(i=>i instanceof ks),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!(e!=null&&e.saneTooltip)||!(e instanceof ks))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new ne;t.add(this._tree.onDidChangeFocus(i=>{i.elements[0]instanceof ks&&this.showHover(i.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const i of e)i instanceof Kp?t.push({element:i,collapsible:!1,collapsed:!1,children:i.children.map(s=>({element:s,collapsible:!1,collapsed:!1}))}):t.push({element:i,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let i=0,s=e.length;i<s;i++){const o=e[i];if(!o.hidden)if(o.checked)t=!0;else return!1}return t}_updateCheckedObservables(){qi(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(i=>i.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){var t,i,s;this._lastHover&&!this._lastHover.isDisposed&&((i=(t=this.hoverDelegate).onDidHideHover)==null||i.call(t),(s=this._lastHover)==null||s.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:o=>{this.linkOpenerDelegate(o)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};mF([yn],aN.prototype,"onDidChangeFocus",null);mF([yn],aN.prototype,"onDidChangeSelection",null);aN=mF([Q6(4,Ae),Q6(5,Yr)],aN);function c6e(n,e){const{text:t,iconOffsets:i}=e;if(!i||i.length===0)return Rte(n,t);const s=wI(t," "),o=t.length-s.length,r=Rte(n,s);if(r)for(const a of r){const l=i[a.start+o]+o;a.start+=l,a.end+=l}return r}function Rte(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t!==-1?[{start:t,end:t+n.length}]:null}function d6e(n,e,t){const i=n.labelHighlights||[],s=e.labelHighlights||[];return i.length&&!s.length?-1:!i.length&&s.length?1:i.length===0&&s.length===0?0:o6e(n.saneSortLabel,e.saneSortLabel,t)}const Vme={weight:200,when:se.and(se.equals(ume,"quickPick"),B8e),metadata:{description:_("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function Lr(n,e={}){Ao.registerCommandAndKeybindingRule({...Vme,...n,secondary:u6e(n.primary,n.secondary??[],e)})}const pM=Lt?256:2048;function u6e(n,e,t={}){return t.withAltMod&&e.push(512+n),t.withCtrlMod&&(e.push(pM+n),t.withAltMod&&e.push(512+pM+n)),t.withCmdMod&&Lt&&(e.push(2048+n),t.withCtrlMod&&e.push(2304+n),t.withAltMod&&(e.push(2560+n),t.withCtrlMod&&e.push(2816+n))),e}function ca(n,e){return t=>{const i=t.get(Cl).currentQuickInput;if(i)return e&&i.quickNavigate?i.focus(e):i.focus(n)}}Lr({id:"quickInput.pageNext",primary:12,handler:ca(Li.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Lr({id:"quickInput.pagePrevious",primary:11,handler:ca(Li.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Lr({id:"quickInput.first",primary:pM+14,handler:ca(Li.First)},{withAltMod:!0,withCmdMod:!0});Lr({id:"quickInput.last",primary:pM+13,handler:ca(Li.Last)},{withAltMod:!0,withCmdMod:!0});Lr({id:"quickInput.next",primary:18,handler:ca(Li.Next)},{withCtrlMod:!0});Lr({id:"quickInput.previous",primary:16,handler:ca(Li.Previous)},{withCtrlMod:!0});const Mte=_("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),Pte=_("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");Lt?(Lr({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:ca(Li.NextSeparator,Li.Next),metadata:{description:Mte}}),Lr({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:ca(Li.NextSeparator)},{withCtrlMod:!0}),Lr({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:ca(Li.PreviousSeparator,Li.Previous),metadata:{description:Pte}}),Lr({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:ca(Li.PreviousSeparator)},{withCtrlMod:!0})):(Lr({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:ca(Li.NextSeparator,Li.Next),metadata:{description:Mte}}),Lr({id:"quickInput.nextSeparator",primary:2578,handler:ca(Li.NextSeparator)}),Lr({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:ca(Li.PreviousSeparator,Li.Previous),metadata:{description:Pte}}),Lr({id:"quickInput.previousSeparator",primary:2576,handler:ca(Li.PreviousSeparator)}));Lr({id:"quickInput.acceptInBackground",when:se.and(Vme.when,se.or(Eme.negate(),V8e)),primary:17,weight:250,handler:n=>{const e=n.get(Cl).currentQuickInput;e==null||e.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var h6e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},fB=function(n,e){return function(t,i){e(t,i,n)}},eH;const br=ge;var ob;let tH=(ob=class extends G{get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,i,s){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.contextKeyService=s,this.enabled=!0,this.onDidAcceptEmitter=this._register(new $),this.onDidCustomEmitter=this._register(new $),this.onDidTriggerButtonEmitter=this._register(new $),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new $),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new $),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=F8e.bindTo(this.contextKeyService),this.quickInputTypeContext=W8e.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=H8e.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(pe.runAndSubscribe(y4,({window:o,disposables:r})=>this.registerKeyModsListeners(o,r),{window:ui,disposables:this._store})),this._register(V2e(o=>{this.ui&&je(this.ui.container)===o&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const i=s=>{this.keyMods.ctrlCmd=s.ctrlKey||s.metaKey,this.keyMods.alt=s.altKey};for(const s of[fe.KEY_DOWN,fe.KEY_UP,fe.MOUSE_DOWN])t.add(Q(e,s,i,!0))}getUI(e){if(this.ui)return e&&je(this._container)!==je(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=ae(this._container,br(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=Ta(t),s=ae(t,br(".quick-input-titlebar")),o=this._register(new Ea(s,{hoverDelegate:this.options.hoverDelegate}));o.domNode.classList.add("quick-input-left-action-bar");const r=ae(s,br(".quick-input-title")),a=this._register(new Ea(s,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=ae(t,br(".quick-input-header")),c=ae(l,br("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",_("quickInput.checkAll","Toggle all checkboxes")),this._register(Ji(c,fe.CHANGE,T=>{const M=c.checked;O.setAllVisibleChecked(M)})),this._register(Q(c,fe.CLICK,T=>{(T.x||T.y)&&f.setFocus()}));const d=ae(l,br(".quick-input-description")),u=ae(l,br(".quick-input-and-message")),h=ae(u,br(".quick-input-filter")),f=this._register(new X8e(h,this.styles.inputBox,this.styles.toggle));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const m=ae(h,br(".quick-input-visible-count"));m.setAttribute("aria-live","polite"),m.setAttribute("aria-atomic","true");const p=new z6(m,{countFormat:_({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),b=ae(h,br(".quick-input-count"));b.setAttribute("aria-live","polite");const v=new z6(b,{countFormat:_({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),w=this._register(new Ea(l,{hoverDelegate:this.options.hoverDelegate}));w.domNode.classList.add("quick-input-inline-action-bar");const y=ae(l,br(".quick-input-action")),C=this._register(new nM(y,this.styles.button));C.label=_("ok","OK"),this._register(C.onDidClick(T=>{this.onDidAcceptEmitter.fire()}));const S=ae(l,br(".quick-input-action")),x=this._register(new nM(S,{...this.styles.button,supportIcons:!0}));x.label=_("custom","Custom"),this._register(x.onDidClick(T=>{this.onDidCustomEmitter.fire()}));const k=ae(u,br(`#${this.idPrefix}message.quick-input-message`)),N=this._register(new U6(t,this.styles.progressBar));N.getContainer().classList.add("quick-input-progress");const E=ae(t,br(".quick-input-html-widget"));E.tabIndex=-1;const B=ae(t,br(".quick-input-description")),A=this.idPrefix+"list",O=this._register(this.instantiationService.createInstance(aN,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,A));f.setAttribute("aria-controls",A),this._register(O.onDidChangeFocus(()=>{f.setAttribute("aria-activedescendant",O.getActiveDescendant()??"")})),this._register(O.onChangedAllVisibleChecked(T=>{c.checked=T})),this._register(O.onChangedVisibleCount(T=>{p.setCount(T)})),this._register(O.onChangedCheckedCount(T=>{v.setCount(T)})),this._register(O.onLeave(()=>{setTimeout(()=>{this.controller&&(f.setFocus(),this.controller instanceof iM&&this.controller.canSelectMany&&O.clearFocus())},0)}));const W=ld(t);return this._register(W),this._register(Q(t,fe.FOCUS,T=>{const M=this.getUI();if(Zn(T.relatedTarget,M.inputContainer)){const z=M.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==z&&this.endOfQuickInputBoxContext.set(z)}Zn(T.relatedTarget,M.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=Qn(T.relatedTarget)?T.relatedTarget:void 0)},!0)),this._register(W.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(BC.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(f.onKeyDown(T=>{const M=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==M&&this.endOfQuickInputBoxContext.set(M)})),this._register(Q(t,fe.FOCUS,T=>{f.setFocus()})),this._register(Ji(t,fe.KEY_DOWN,T=>{if(!Zn(T.target,E))switch(T.keyCode){case 3:Dt.stop(T,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:Dt.stop(T,!0),this.hide(BC.Gesture);break;case 2:if(!T.altKey&&!T.ctrlKey&&!T.metaKey){const M=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?M.push("input"):M.push("input[type=text]"),this.getUI().list.displayed&&M.push(".monaco-list"),this.getUI().message&&M.push(".quick-input-message a"),this.getUI().widget){if(Zn(T.target,this.getUI().widget))break;M.push(".quick-input-html-widget")}const z=t.querySelectorAll(M.join(", "));T.shiftKey&&T.target===z[0]?(Dt.stop(T,!0),O.clearFocus()):!T.shiftKey&&Zn(T.target,z[z.length-1])&&(Dt.stop(T,!0),z[0].focus())}break;case 10:T.ctrlKey&&(Dt.stop(T,!0),this.getUI().list.toggleHover());break}})),this.ui={container:t,styleSheet:i,leftActionBar:o,titleBar:s,title:r,description1:B,description2:d,widget:E,rightActionBar:a,inlineActionBar:w,checkAll:c,inputContainer:u,filterContainer:h,inputBox:f,visibleCountContainer:m,visibleCount:p,countContainer:b,count:v,okContainer:y,ok:C,message:k,customButtonContainer:S,customButton:x,list:O,progressBar:N,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:T=>this.show(T),hide:()=>this.hide(),setVisibilities:T=>this.setVisibilities(T),setEnabled:T=>this.setEnabled(T),setContextKey:T=>this.options.setContextKey(T),linkOpenerDelegate:T=>this.options.linkOpenerDelegate(T)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,ae(this._container,this.ui.container))}pick(e,t={},i=ht.None){return new Promise((s,o)=>{let r=d=>{var u;r=s,(u=t.onKeyMods)==null||u.call(t,a.keyMods),s(d)};if(i.isCancellationRequested){r(void 0);return}const a=this.createQuickPick({useSeparators:!0});let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)r(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(r(d),a.hide())}}),a.onDidChangeActive(d=>{const u=d[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const u=d[0];u&&(r(u),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...d,removeItem:()=>{const u=a.items.indexOf(d.item);if(u!==-1){const h=a.items.slice(),f=h.splice(u,1),m=a.activeItems.filter(b=>b!==f[0]),p=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=h,m&&(a.activeItems=m),a.keepScrollPosition=p}}})),a.onDidTriggerSeparatorButton(d=>{var u;return(u=t.onDidTriggerSeparatorButton)==null?void 0:u.call(t,d)}),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{gi(c),r(void 0)})];a.title=t.title,t.value&&(a.value=t.value),a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,u])=>{l=u,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(h=>h.type!=="separator"&&h.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{o(d),a.hide()})})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new iM(t)}createInputBox(){const e=this.getUI(!0);return new j8e(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i==null||i.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",ys(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(vn.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),ys(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const s=this.options.backKeybindingLabel();V6.tooltip=s?_("quickInput.backWithKeybinding","Back ({0})",s):_("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var o;const t=this.controller;if(!t)return;t.willHide(e);const i=(o=this.ui)==null?void 0:o.container,s=i&&!vhe(i);if(this.controller=null,this.onHideEmitter.fire(),i&&(i.style.display="none"),!s){let r=this.previousFocusElement;for(;r&&!r.offsetParent;)r=r.parentElement??void 0;r!=null&&r.offsetParent?(r.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,eH.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:s,widgetShadow:o}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=o?`0 0 8px 2px ${o}`:"",this.ui.list.style(this.styles.list);const r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const a=r.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}},eH=ob,ob.MAX_WIDTH=600,ob);tH=eH=h6e([fB(1,up),fB(2,Ae),fB(3,qe)],tH);var f6e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ES=function(n,e){return function(t,i){e(t,i,n)}};let iH=class extends sOe{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(H6))),this._quickAccess}constructor(e,t,i,s,o){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=s,this.configurationService=o,this._onShow=this._register(new $),this._onHide=this._register(new $),this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:o=>this.setContextKey(o),linkOpenerDelegate:o=>{this.instantiationService.invokeFunction(r=>{r.get(hr).open(o,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(j6))},s=this._register(this.instantiationService.createInstance(tH,{...i,...t}));return s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(o=>{je(e.activeContainer)===je(s.container)&&s.layout(o,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{s.isVisible()||s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(s.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(s.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new we(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t==null||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,i=ht.None){return this.controller.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:ye(aee),quickInputForeground:ye(wFe),quickInputTitleBackground:ye(yFe),widgetBorder:ye(Efe),widgetShadow:ye(E1)},inputBox:$2,toggle:U2,countBadge:Nge,button:t7e,progressBar:i7e,keybindingLabel:e7e,list:Qv({listBackground:aee,listFocusBackground:zk,listFocusForeground:jk,listInactiveFocusForeground:jk,listInactiveSelectionIconForeground:nq,listInactiveFocusBackground:zk,listFocusOutline:Ai,listInactiveFocusOutline:Ai}),pickerGroup:{pickerGroupBorder:ye(CFe),pickerGroupForeground:ye(Wfe)}}}};iH=f6e([ES(0,Ae),ES(1,qe),ES(2,Vn),ES(3,up),ES(4,_t)],iH);var jme=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},a_=function(n,e){return function(t,i){e(t,i,n)}};let nH=class extends iH{constructor(e,t,i,s,o,r){super(t,i,s,new SW(e.getContainerDomNode(),o),r),this.host=void 0;const a=lN.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return pe.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return pe.None},get onDidAddContainer(){return pe.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};nH=jme([a_(1,Ae),a_(2,qe),a_(3,Vn),a_(4,Ut),a_(5,_t)],nH);let sH=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(nH,e);this.mapEditorToService.set(e,t),jm(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,i=ht.None){return this.activeService.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}};sH=jme([a_(0,Ae),a_(1,Ut)],sH);const CA=class CA{static get(e){return e.getContribution(CA.ID)}constructor(e){this.editor=e,this.widget=new oH(this.editor)}dispose(){this.widget.dispose()}};CA.ID="editor.controller.quickInput";let lN=CA;const SA=class SA{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return SA.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};SA.ID="editor.contrib.quickInputWidget";let oH=SA;Ot(lN.ID,lN,4);class g6e{constructor(e,t,i,s,o){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=s,this.background=o}}function m6e(n){if(!n||!Array.isArray(n))return[];const e=[];let t=0;for(let i=0,s=n.length;i<s;i++){const o=n[i];let r=-1;if(typeof o.fontStyle=="string"){r=0;const c=o.fontStyle.split(" ");for(let d=0,u=c.length;d<u;d++)switch(c[d]){case"italic":r=r|1;break;case"bold":r=r|2;break;case"underline":r=r|4;break;case"strikethrough":r=r|8;break}}let a=null;typeof o.foreground=="string"&&(a=o.foreground);let l=null;typeof o.background=="string"&&(l=o.background),e[t++]=new g6e(o.token||"",i,r,a,l)}return e}function p6e(n,e){n.sort((d,u)=>{const h=y6e(d.token,u.token);return h!==0?h:d.index-u.index});let t=0,i="000000",s="ffffff";for(;n.length>=1&&n[0].token==="";){const d=n.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(i=d.foreground),d.background!==null&&(s=d.background)}const o=new b6e;for(const d of e)o.getId(d);const r=o.getId(i),a=o.getId(s),l=new nG(t,r,a),c=new sG(l);for(let d=0,u=n.length;d<u;d++){const h=n[d];c.insert(h.token,h.fontStyle,o.getId(h.foreground),o.getId(h.background))}return new zme(o,c)}const _6e=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class b6e{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(_6e);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=oe.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class zme{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(m6e(e),t)}static createFromParsedTokenTheme(e,t){return p6e(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i>"u"){const s=this._match(t),o=w6e(t);i=(s.metadata|o<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const v6e=/\b(comment|string|regex|regexp)\b/;function w6e(n){const e=n.match(v6e);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function y6e(n,e){return n<e?-1:n>e?1:0}class nG{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new nG(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class sG{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let i,s;t===-1?(i=e,s=""):(i=e.substring(0,t),s=e.substring(t+1));const o=this._children.get(i);return typeof o<"u"?o.match(s):this._mainRule}insert(e,t,i,s){if(e===""){this._mainRule.acceptOverwrite(t,i,s);return}const o=e.indexOf(".");let r,a;o===-1?(r=e,a=""):(r=e.substring(0,o),a=e.substring(o+1));let l=this._children.get(r);typeof l>"u"&&(l=new sG(this._mainRule.clone()),this._children.set(r,l)),l.insert(a,t,i,s)}}function C6e(n){const e=[];for(let t=1,i=n.length;t<i;t++){const s=n[t];e[t]=`.mtk${t} { color: ${s}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const S6e={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[tc]:"#FFFFFE",[Vu]:"#000000",[Nfe]:"#E5EBF1",[HI]:"#D3D3D3",[VI]:"#939393",[XK]:"#ADD6FF4D"}},x6e={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[tc]:"#1E1E1E",[Vu]:"#D4D4D4",[Nfe]:"#3A3D41",[HI]:"#404040",[VI]:"#707070",[XK]:"#ADD6FF26"}},L6e={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[tc]:"#000000",[Vu]:"#FFFFFF",[HI]:"#FFFFFF",[VI]:"#FFFFFF"}},k6e={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[tc]:"#FFFFFF",[Vu]:"#292929",[HI]:"#292929",[VI]:"#292929"}},N6e={IconContribution:"base.contributions.icons"};var Ate;(function(n){function e(t,i){let s=t.defaults;for(;Ke.isThemeIcon(s);){const o=t0.getIcon(s.id);if(!o)return;s=o.defaults}return s}n.getDefinition=e})(Ate||(Ate={}));var Ote;(function(n){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(s=>({format:s.format,location:s.location.toString()}))}}n.toJSONObject=e;function t(i){const s=o=>ir(o)?o:void 0;if(i&&Array.isArray(i.src)&&i.src.every(o=>ir(o.format)&&ir(o.location)))return{weight:s(i.weight),style:s(i.style),src:i.src.map(o=>({format:o.format,location:Be.parse(o.location)}))}}n.fromJSONObject=t})(Ote||(Ote={}));class I6e{constructor(){this._onDidChange=new $,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:_("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:_("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Ke.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,s){const o=this.iconsById[e];if(o){if(i&&!o.description){o.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return o}const r={id:e,description:i,defaults:t,deprecationMessage:s};this.iconsById[e]=r;const a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(o,r)=>o.id.localeCompare(r.id),t=o=>{for(;Ke.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(const o of s.filter(r=>!!r.description).sort(e))i.push(`|<i class="${t(o)}"></i>|${o.id}|${Ke.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const o of s.filter(r=>!Ke.isThemeIcon(r.defaults)).sort(e))i.push(`|<i class="${t(o)}"></i>|${o.id}|`);return i.join(`
`)}}const t0=new I6e;Zi.add(N6e.IconContribution,t0);function Di(n,e,t,i){return t0.registerIcon(n,e,t,i)}function Ume(){return t0}function E6e(){const n=Hue();for(const e in n){const t="\\"+n[e].toString(16);t0.registerIcon(e,{fontCharacter:t})}}E6e();const $me="vscode://schemas/icons",Kme=Zi.as(O4.JSONContribution);Kme.registerSchema($me,t0.getIconSchema());const Fte=new li(()=>Kme.notifySchemaChanged($me),200);t0.onDidChange(()=>{Fte.isScheduled()||Fte.schedule()});const qme=Di("widget-close",he.close,_("widgetClose","Icon for the close action in widgets."));Di("goto-previous-location",he.arrowUp,_("previousChangeIcon","Icon for goto previous editor location."));Di("goto-next-location",he.arrowDown,_("nextChangeIcon","Icon for goto next editor location."));Ke.modify(he.sync,"spin");Ke.modify(he.loading,"spin");function D6e(n){const e=new ne,t=e.add(new $),i=Ume();return e.add(i.onDidChange(()=>t.fire())),n&&e.add(n.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const s=n?n.getProductIconTheme():new Gme,o={},r=[],a=[];for(const l of i.getIcons()){const c=s.getIcon(l);if(!c)continue;const d=c.font,u=`--vscode-icon-${l.id}-font-family`,h=`--vscode-icon-${l.id}-content`;d?(o[d.id]=d.definition,a.push(`${u}: ${v3(d.id)};`,`${h}: '${c.fontCharacter}';`),r.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${v3(d.id)}; }`)):(a.push(`${h}: '${c.fontCharacter}'; ${u}: 'codicon';`),r.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`))}for(const l in o){const c=o[l],d=c.weight?`font-weight: ${c.weight};`:"",u=c.style?`font-style: ${c.style};`:"",h=c.src.map(f=>`${bf(f.location)} format('${f.format}')`).join(", ");r.push(`@font-face { src: ${h}; font-family: ${v3(l)};${d}${u} font-display: block; }`)}return r.push(`:root { ${a.join(" ")} }`),r.join(`
`)}}}class Gme{getIcon(e){const t=Ume();let i=e.defaults;for(;Ke.isThemeIcon(i);){const s=t.getIcon(i.id);if(!s)return;i=s.defaults}return i}}const Eh="vs",xy="vs-dark",Y_="hc-black",X_="hc-light",Zme=Zi.as(yfe.ColorContribution),T6e=Zi.as(ofe.ThemingContribution);class Yme{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(WT(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,oe.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=rH(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,oe.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=Zme.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case Eh:return il.LIGHT;case Y_:return il.HIGH_CONTRAST_DARK;case X_:return il.HIGH_CONTRAST_LIGHT;default:return il.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const o=rH(this.themeData.base);e=o.rules,o.encodedTokensColors&&(t=o.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(i||s){const o={token:""};i&&(o.foreground=i),s&&(o.background=s),e.push(o)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=zme.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const o=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=Jo.getForeground(o),a=Jo.getFontStyle(o);return{foreground:r,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function WT(n){return n===Eh||n===xy||n===Y_||n===X_}function rH(n){switch(n){case Eh:return S6e;case xy:return x6e;case Y_:return L6e;case X_:return k6e}}function pD(n){const e=rH(n);return new Yme(n,e)}class R6e extends G{constructor(){super(),this._onColorThemeChange=this._register(new $),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new $),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new Gme,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Eh,pD(Eh)),this._knownThemes.set(xy,pD(xy)),this._knownThemes.set(Y_,pD(Y_)),this._knownThemes.set(X_,pD(X_));const e=this._register(D6e(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Eh),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),Jue(ui,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return u2(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Ta(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),G.None}_registerShadowDomContainer(e){const t=Ta(e,i=>{i.className="monaco-colors",i.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!WT(t.base)&&!WT(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new Yme(e,t)),WT(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Eh),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=ui.matchMedia("(forced-colors: active)").matches;if(e!==Qc(this._theme.type)){let t;kC(this._theme.type)?t=e?Y_:xy:t=e?X_:Eh,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};T6e.getThemingParticipants().forEach(r=>r(this._theme,i,this._environment));const s=[];for(const r of Zme.getColors()){const a=this._theme.getColor(r.id,!0);a&&s.push(`${GK(r.id)}: ${a.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${s.join(`
`)} }`);const o=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(C6e(o)),this._themeCSS=e.join(`
`),this._updateCSS(),nn.setColorMap(o),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const Ha=kt("themeService");var M6e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},gB=function(n,e){return function(t,i){e(t,i,n)}};let aH=class extends G{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new $,this._onDidChangeReducedMotion=new $,this._onDidChangeLinkUnderline=new $,this._accessibilityModeEnabledContext=TI.bindTo(this._contextKeyService);const s=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(s(),this._onDidChangeScreenReaderOptimized.fire()),r.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),s(),this._register(this.onDidChangeScreenReaderOptimized(()=>s()));const o=ui.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=o.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(o),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(Q(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",i),this._layoutService.mainContainer.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const i=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=i,this._onDidChangeLinkUnderline.fire()}}));const e=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};aH=M6e([gB(0,qe),gB(1,up),gB(2,_t)],aH);var pF=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},bu=function(n,e){return function(t,i){e(t,i,n)}},j0,sx;let lH=class{constructor(e,t,i){this._commandService=e,this._keybindingService=t,this._hiddenStates=new cH(i)}createMenu(e,t,i){return new _M(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t)}getMenuActions(e,t,i){const s=new _M(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t),o=s.getActions(i);return s.dispose(),o}resetHiddenStates(e){this._hiddenStates.reset(e)}};lH=pF([bu(0,Ci),bu(1,ei),bu(2,ac)],lH);var rb;let cH=(rb=class{constructor(e){this._storageService=e,this._disposables=new ne,this._onDidChange=new $,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(j0._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,j0._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(j0._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){var o;const i=this._isHiddenByDefault(e,t),s=((o=this._data[e.id])==null?void 0:o.includes(t))??!1;return i?!s:s}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const o=this._data[e.id];if(i)o?o.indexOf(t)<0&&o.push(t):this._data[e.id]=[t];else if(o){const r=o.indexOf(t);r>=0&&LDe(o,r),o.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(j0._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},j0=rb,rb._key="menu.hiddenCommands",rb);cH=j0=pF([bu(0,ac)],cH);class qx{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(ls.getMenuItems(this._id));let t;for(const i of e){const s=i.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeysAndSubmenuIds(i)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(qx._fillInKbExprKeys(e.when,this._structureContextKeys),hy(e)){if(e.command.precondition&&qx._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;qx._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(ls.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}}let dH=sx=class extends qx{constructor(e,t,i,s,o,r){super(e,i),this._hiddenStates=t,this._commandService=s,this._keybindingService=o,this._contextKeyService=r,this.refresh()}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[s,o]=i;let r;for(const a of o)if(this._contextKeyService.contextMatchesRules(a.when)){const l=hy(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=P6e(this._id,l?a.command:a,this._hiddenStates);if(l){const d=Xme(this._commandService,this._keybindingService,a.command.id,a.when);(r??(r=[])).push(new Fr(a.command,a.alt,e,c,d,this._contextKeyService,this._commandService))}else{const d=new sx(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),u=Ss.join(...d.map(h=>h[1]));u.length>0&&(r??(r=[])).push(new fy(a,c,u))}}r&&r.length>0&&t.push([s,r])}return t}_sort(e){return e.sort(sx._compareMenuItems)}static _compareMenuItems(e,t){const i=e.group,s=t.group;if(i!==s){if(i){if(!s)return-1}else return 1;if(i==="navigation")return-1;if(s==="navigation")return 1;const a=i.localeCompare(s);if(a!==0)return a}const o=e.order||0,r=t.order||0;return o<r?-1:o>r?1:sx._compareTitles(hy(e)?e.command.title:e.title,hy(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,s=typeof t=="string"?t:t.original;return i.localeCompare(s)}};dH=sx=pF([bu(3,Ci),bu(4,ei),bu(5,qe)],dH);let _M=class{constructor(e,t,i,s,o,r){this._disposables=new ne,this._menuInfo=new dH(e,t,i.emitEventsForSubmenuChanges,s,o,r);const a=new li(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(a),this._disposables.add(ls.onDidChangeMenu(u=>{for(const h of this._menuInfo.allMenuIds)if(u.has(h)){a.schedule();break}}));const l=this._disposables.add(new ne),c=u=>{let h=!1,f=!1,m=!1;for(const p of u)if(h=h||p.isStructuralChange,f=f||p.isEnablementChange,m=m||p.isToggleChange,h&&f&&m)break;return{menu:this,isStructuralChange:h,isEnablementChange:f,isToggleChange:m}},d=()=>{l.add(r.onDidChangeContext(u=>{const h=u.affectsSome(this._menuInfo.structureContextKeys),f=u.affectsSome(this._menuInfo.preconditionContextKeys),m=u.affectsSome(this._menuInfo.toggledContextKeys);(h||f||m)&&this._onDidChange.fire({menu:this,isStructuralChange:h,isEnablementChange:f,isToggleChange:m})})),l.add(t.onDidChange(u=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new Due({onWillAddFirstListener:d,onDidRemoveLastListener:l.clear.bind(l),delay:i.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};_M=pF([bu(3,Ci),bu(4,ei),bu(5,qe)],_M);function P6e(n,e,t){const i=BMe(e)?e.submenu.id:e.id,s=typeof e.title=="string"?e.title:e.title.value,o=$_({id:`hide/${n.id}/${i}`,label:_("hide.label","Hide '{0}'",s),run(){t.updateHidden(n,i,!0)}}),r=$_({id:`toggle/${n.id}/${i}`,label:s,get checked(){return!t.isHidden(n,i)},run(){t.updateHidden(n,i,!!this.checked)}});return{hide:o,toggle:r,get isHidden(){return!r.checked}}}function Xme(n,e,t,i=void 0,s=!0){return $_({id:`configureKeybinding/${t}`,label:_("configure keybinding","Configure Keybinding"),enabled:s,run(){const r=!!!e.lookupKeybinding(t)&&i?i.serialize():void 0;n.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(r?` +when:${r}`:""))}})}var A6e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Bte=function(n,e){return function(t,i){e(t,i,n)}},uH;const Wte="application/vnd.code.resources";var ab;let hH=(ab=class extends G{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(mf||ehe)&&this.installWebKitWriteTextWorkaround(),this._register(pe.runAndSubscribe(y4,({window:i,disposables:s})=>{s.add(Q(i.document,"copy",()=>this.clearResourcesState()))},{window:ui,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const t=new S1;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,ZS().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async i=>{(!(i instanceof Error)||i.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(i)})};this._register(pe.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:i})=>{i.add(Q(t,"click",e)),i.add(Q(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.clearResourcesState(),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await ZS().navigator.clipboard.writeText(e)}catch(i){console.error(i)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=x1(),i=t.activeElement,s=t.body.appendChild(ge("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=e,s.focus(),s.select(),t.execCommand("copy"),Qn(i)&&i.focus(),s.remove()}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await ZS().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async readResources(){try{const t=await ZS().navigator.clipboard.read();for(const i of t)if(i.types.includes(`web ${Wte}`)){const s=await i.getType(`web ${Wte}`);return JSON.parse(await s.text()).map(r=>Be.from(r))}}catch{}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return v4(e.substring(0,uH.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}},uH=ab,ab.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,ab);hH=uH=A6e([Bte(0,up),Bte(1,Os)],hH);const Mf=kt("clipboardService");var O6e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},F6e=function(n,e){return function(t,i){e(t,i,n)}};const Gx="data-keybinding-context";let oG=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};const xA=class xA extends oG{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};xA.INSTANCE=new xA;let HC=xA;const xL=class xL extends oG{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=_y.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(s=>{if(s.source===7){const o=Array.from(this._values,([r])=>r);this._values.clear(),i.fire(new Vte(o))}else{const o=[];for(const r of s.affectedKeys){const a=`config.${r}`,l=this._values.findSuperstr(a);l!==void 0&&(o.push(...Rt.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(o.push(a),this._values.delete(a))}i.fire(new Vte(o))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(xL._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(xL._keyPrefix.length),i=this._configurationService.getValue(t);let s;switch(typeof i){case"number":case"boolean":case"string":s=i;break;default:Array.isArray(i)?s=JSON.stringify(i):s=i}return this._values.set(e,s),s}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};xL._keyPrefix="config.";let fH=xL;class B6e{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class Hte{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class Vte{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class W6e{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function H6e(n,e){return n.allKeysContainedIn(new Set(Object.keys(e)))}class Qme extends G{constructor(e){super(),this._onDidChangeContext=this._register(new uv({merge:t=>new W6e(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new B6e(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new V6e(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new Hte(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new Hte(e))}getContext(e){return this._isDisposed?HC.INSTANCE:this.getContextValuesContainer(j6e(e))}dispose(){super.dispose(),this._isDisposed=!0}}let gH=class extends Qme{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new fH(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?HC.INSTANCE:this._contexts.get(e)||HC.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new oG(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};gH=O6e([F6e(0,_t)],gH);class V6e extends Qme{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new es),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(Gx)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(Gx,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;H6e(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(Gx),super.dispose())}getContextValuesContainer(e){return this._isDisposed?HC.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function j6e(n){for(;n;){if(n.hasAttribute(Gx)){const e=n.getAttribute(Gx);return e?parseInt(e,10):NaN}n=n.parentElement}return 0}function z6e(n,e,t){n.get(qe).createKey(String(e),U6e(t))}function U6e(n){return pue(n,e=>{if(typeof e=="object"&&e.$mid===1)return Be.revive(e).toString();if(e instanceof Be)return e.toString()})}Mt.registerCommand("_setContext",z6e);Mt.registerCommand({id:"getContextKeyInfo",handler(){return[...we.all()].sort((n,e)=>n.key.localeCompare(e.key))},metadata:{description:_("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Mt.registerCommand("_generateContextKeyInfo",function(){const n=[],e=new Set;for(const t of we.all())e.has(t.key)||(e.add(t.key),n.push(t));n.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(n,void 0,2))});let $6e=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class jte{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);i.outgoing.set(s.key,s),s.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new $6e(t,e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),s=this._findCycle(t,i);if(s)return s}}_findCycle(e,t){for(const[i,s]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const o=this._findCycle(s,t);if(o)return o;t.delete(i)}}}class W1{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}const K6e=!1;class zte extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class bM{constructor(e=new W1,t=!1,i,s=K6e){this._services=e,this._strict=t,this._parent=i,this._enableTracing=s,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(Ae,this),this._globalGraph=s?(i==null?void 0:i._globalGraph)??new jte(o=>o):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,gi(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)m4(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const i=this,s=new class extends bM{dispose(){i._children.delete(s),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(s),t==null||t.add(s),s}invokeFunction(e,...t){this._throwIfDisposed();const i=Zx.traceInvocation(this._enableTracing,e);let s=!1;try{return e({get:r=>{if(s)throw dK("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(r,i);if(!a)throw new Error(`[invokeFunction] unknown service '${r}'`);return a}},...t)}finally{s=!0,i.stop()}}createInstance(e,...t){this._throwIfDisposed();let i,s;return e instanceof Xd?(i=Zx.traceCreation(this._enableTracing,e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=Zx.traceCreation(this._enableTracing,e),s=this._createInstance(e,t,i)),i.stop(),s}_createInstance(e,t=[],i){const s=Vc.getServiceDependencies(e).sort((a,l)=>a.index-l.index),o=[];for(const a of s){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(l)}const r=s.length>0?s[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const a=r-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,r)}return Reflect.construct(e,t.concat(o))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof Xd)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof Xd?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){var l;const s=new jte(c=>c.id.toString());let o=0;const r=[{id:e,desc:t,_trace:i}],a=new Set;for(;r.length;){const c=r.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),o++>1e3)throw new zte(s);for(const d of Vc.getServiceDependencies(c.desc.ctor)){const u=this._getServiceInstanceOrDescriptor(d.id);if(u||this._throwIfStrict(`[createInstance] ${e} depends on ${d.id} which is NOT registered.`,!0),(l=this._globalGraph)==null||l.insertEdge(String(c.id),String(d.id)),u instanceof Xd){const h={id:d.id,desc:u,_trace:c._trace.branch(d.id,!0)};s.insertEdge(c,h),r.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new zte(s);break}for(const{data:d}of c){if(this._getServiceInstanceOrDescriptor(d.id)instanceof Xd){const h=this._createServiceInstanceWithOwner(d.id,d.desc.ctor,d.desc.staticArguments,d.desc.supportsDelayedInstantiation,d._trace);this._setCreatedServiceInstance(d.id,h)}s.removeNode(d)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],s,o){if(this._services.get(e)instanceof Xd)return this._createServiceInstance(e,t,i,s,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,s,o);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],s,o,r){if(s){const a=new bM(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new u2e(()=>{const d=a._createInstance(t,i,o);for(const[u,h]of l){const f=d[u];if(typeof f=="function")for(const m of h)m.disposable=f.apply(d,m.listener)}return l.clear(),r.add(d),d});return new Proxy(Object.create(null),{get(d,u){if(!c.isInitialized&&typeof u=="string"&&(u.startsWith("onDid")||u.startsWith("onWill"))){let m=l.get(u);return m||(m=new So,l.set(u,m)),(b,v,w)=>{if(c.isInitialized)return c.value[u](b,v,w);{const y={listener:[b,v,w],disposable:void 0},C=m.push(y);return Pe(()=>{var x;C(),(x=y.disposable)==null||x.dispose()})}}}if(u in d)return d[u];const h=c.value;let f=h[u];return typeof f!="function"||(f=f.bind(h),d[u]=f),f},set(d,u,h){return c.value[u]=h,!0},getPrototypeOf(d){return t.prototype}})}else{const a=this._createInstance(t,i,o);return r.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}const na=class na{static traceInvocation(e,t){return e?new na(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):na._None}static traceCreation(e,t){return e?new na(1,t.name):na._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new na(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;na._totals+=e;let t=!1;function i(o,r){const a=[],l=new Array(o+1).join("	");for(const[c,d,u]of r._dep)if(d&&u){t=!0,a.push(`${l}CREATES -> ${c}`);const h=i(o+1,u);h&&a.push(h)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${na._totals.toFixed(2)}ms)`];(e>2||t)&&na.all.add(s.join(`
`))}};na.all=new Set,na._None=new class extends na{constructor(){super(0,null)}stop(){}branch(){return this}},na._totals=0;let Zx=na;const q6e=new Set([tt.inMemory,tt.vscodeSourceControl,tt.walkThrough,tt.walkThroughSnippet,tt.vscodeChatCodeBlock]);class G6e{constructor(){this._byResource=new cs,this._byOwner=new Map}set(e,t,i){let s=this._byResource.get(e);s||(s=new Map,this._byResource.set(e,s)),s.set(t,i);let o=this._byOwner.get(t);o||(o=new cs,this._byOwner.set(t,o)),o.set(e,i)}get(e,t){const i=this._byResource.get(e);return i==null?void 0:i.get(t)}delete(e,t){let i=!1,s=!1;const o=this._byResource.get(e);o&&(i=o.delete(t));const r=this._byOwner.get(t);if(r&&(s=r.delete(e)),i!==s)throw new Error("illegal state");return i&&s}values(e){var t,i;return typeof e=="string"?((t=this._byOwner.get(e))==null?void 0:t.values())??Rt.empty():Be.isUri(e)?((i=this._byResource.get(e))==null?void 0:i.values())??Rt.empty():Rt.map(Rt.concat(...this._byOwner.values()),s=>s[1])}}class Z6e{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new cs,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const s=this._resourceStats(t);this._add(s),this._data.set(t,s)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(q6e.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===on.Error?t.errors+=1:i===on.Warning?t.warnings+=1:i===on.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class tg{constructor(){this._onMarkerChanged=new Due({delay:0,merge:tg._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new G6e,this._stats=new Z6e(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(uue(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const s=[];for(const o of i){const r=tg._toMarker(e,t,o);r&&s.push(r)}this._data.set(t,e,s),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:s,severity:o,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}=i;if(r)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,u=u>0?u:c,{resource:t,owner:e,code:s,severity:o,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}}changeAll(e,t){const i=[],s=this._data.values(e);if(s)for(const o of s){const r=Rt.first(o);r&&(i.push(r.resource),this._data.delete(r.resource,e))}if(ho(t)){const o=new cs;for(const{resource:r,marker:a}of t){const l=tg._toMarker(e,r,a);if(!l)continue;const c=o.get(r);c?c.push(l):(o.set(r,[l]),i.push(r))}for(const[r,a]of o)this._data.set(r,e,a)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:s,take:o}=e;if((!o||o<0)&&(o=-1),t&&i){const r=this._data.get(i,t);if(r){const a=[];for(const l of r)if(tg._accept(l,s)){const c=a.push(l);if(o>0&&c===o)break}return a}else return[]}else if(!t&&!i){const r=[];for(const a of this._data.values())for(const l of a)if(tg._accept(l,s)){const c=r.push(l);if(o>0&&c===o)return r}return r}else{const r=this._data.values(i??t),a=[];for(const l of r)for(const c of l)if(tg._accept(c,s)){const d=a.push(c);if(o>0&&d===o)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new cs;for(const i of e)for(const s of i)t.set(s,!0);return Array.from(t.keys())}}class Y6e extends G{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=vs.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=vs.createEmptyModel(this.logService);const e=Zi.as(rc.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const s of e){const o=i[s],r=t[s];o!==void 0?this._configurationModel.setValue(s,o):r?this._configurationModel.setValue(s,r.default):this._configurationModel.removeValue(s)}}}const pp=kt("accessibilitySignalService"),$t=class $t{static register(e){return new $t(e.fileName)}constructor(e){this.fileName=e}};$t.error=$t.register({fileName:"error.mp3"}),$t.warning=$t.register({fileName:"warning.mp3"}),$t.success=$t.register({fileName:"success.mp3"}),$t.foldedArea=$t.register({fileName:"foldedAreas.mp3"}),$t.break=$t.register({fileName:"break.mp3"}),$t.quickFixes=$t.register({fileName:"quickFixes.mp3"}),$t.taskCompleted=$t.register({fileName:"taskCompleted.mp3"}),$t.taskFailed=$t.register({fileName:"taskFailed.mp3"}),$t.terminalBell=$t.register({fileName:"terminalBell.mp3"}),$t.diffLineInserted=$t.register({fileName:"diffLineInserted.mp3"}),$t.diffLineDeleted=$t.register({fileName:"diffLineDeleted.mp3"}),$t.diffLineModified=$t.register({fileName:"diffLineModified.mp3"}),$t.chatRequestSent=$t.register({fileName:"chatRequestSent.mp3"}),$t.chatResponseReceived1=$t.register({fileName:"chatResponseReceived1.mp3"}),$t.chatResponseReceived2=$t.register({fileName:"chatResponseReceived2.mp3"}),$t.chatResponseReceived3=$t.register({fileName:"chatResponseReceived3.mp3"}),$t.chatResponseReceived4=$t.register({fileName:"chatResponseReceived4.mp3"}),$t.clear=$t.register({fileName:"clear.mp3"}),$t.save=$t.register({fileName:"save.mp3"}),$t.format=$t.register({fileName:"format.mp3"}),$t.voiceRecordingStarted=$t.register({fileName:"voiceRecordingStarted.mp3"}),$t.voiceRecordingStopped=$t.register({fileName:"voiceRecordingStopped.mp3"}),$t.progress=$t.register({fileName:"progress.mp3"});let Bi=$t;class X6e{constructor(e){this.randomOneOf=e}}const mt=class mt{constructor(e,t,i,s,o,r){this.sound=e,this.name=t,this.legacySoundSettingsKey=i,this.settingsKey=s,this.legacyAnnouncementSettingsKey=o,this.announcementMessage=r}static register(e){const t=new X6e("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new mt(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return mt._signals.add(i),i}};mt._signals=new Set,mt.errorAtPosition=mt.register({name:_("accessibilitySignals.positionHasError.name","Error at Position"),sound:Bi.error,announcementMessage:_("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}),mt.warningAtPosition=mt.register({name:_("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:Bi.warning,announcementMessage:_("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}),mt.errorOnLine=mt.register({name:_("accessibilitySignals.lineHasError.name","Error on Line"),sound:Bi.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:_("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"}),mt.warningOnLine=mt.register({name:_("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:Bi.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:_("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}),mt.foldedArea=mt.register({name:_("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:Bi.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:_("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),mt.break=mt.register({name:_("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:Bi.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:_("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),mt.inlineSuggestion=mt.register({name:_("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:Bi.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),mt.terminalQuickFix=mt.register({name:_("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:Bi.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:_("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),mt.onDebugBreak=mt.register({name:_("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:Bi.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:_("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),mt.noInlayHints=mt.register({name:_("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:Bi.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:_("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),mt.taskCompleted=mt.register({name:_("accessibilitySignals.taskCompleted","Task Completed"),sound:Bi.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:_("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),mt.taskFailed=mt.register({name:_("accessibilitySignals.taskFailed","Task Failed"),sound:Bi.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:_("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),mt.terminalCommandFailed=mt.register({name:_("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:Bi.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:_("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),mt.terminalCommandSucceeded=mt.register({name:_("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:Bi.success,announcementMessage:_("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}),mt.terminalBell=mt.register({name:_("accessibilitySignals.terminalBell","Terminal Bell"),sound:Bi.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:_("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),mt.notebookCellCompleted=mt.register({name:_("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:Bi.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:_("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),mt.notebookCellFailed=mt.register({name:_("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:Bi.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:_("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),mt.diffLineInserted=mt.register({name:_("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:Bi.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),mt.diffLineDeleted=mt.register({name:_("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:Bi.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),mt.diffLineModified=mt.register({name:_("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:Bi.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),mt.chatRequestSent=mt.register({name:_("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:Bi.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:_("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),mt.chatResponseReceived=mt.register({name:_("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[Bi.chatResponseReceived1,Bi.chatResponseReceived2,Bi.chatResponseReceived3,Bi.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),mt.progress=mt.register({name:_("accessibilitySignals.progress","Progress"),sound:Bi.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:_("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"}),mt.clear=mt.register({name:_("accessibilitySignals.clear","Clear"),sound:Bi.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:_("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}),mt.save=mt.register({name:_("accessibilitySignals.save","Save"),sound:Bi.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:_("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}),mt.format=mt.register({name:_("accessibilitySignals.format","Format"),sound:Bi.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:_("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"}),mt.voiceRecordingStarted=mt.register({name:_("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:Bi.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),mt.voiceRecordingStopped=mt.register({name:_("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:Bi.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});let ha=mt;class Q6e extends G{constructor(e,t=[]){super(),this.logger=new HMe([e,...t]),this._register(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const Jme=[];function H1(n){Jme.push(n)}function J6e(){return Jme.slice(0)}class eHe{getParseResult(e){}}var Uu=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ln=function(n,e){return function(t,i){e(t,i,n)}};class tHe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new $}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let mH=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new KTe(new tHe(t))):Promise.reject(new Error("Model not found"))}};mH=Uu([Ln(0,Ei)],mH);const LA=class LA{show(){return LA.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}};LA.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};let pH=LA;class iHe{withProgress(e,t,i){return t({report:()=>{}})}}class nHe{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class sHe{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+`

`+t),ui.confirm(i)}async prompt(e){var s;let t;if(this.doConfirm(e.message,e.detail)){const o=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&o.push(e.cancelButton),t=await((s=o[0])==null?void 0:s.run({checkboxChecked:!1}))}return{result:t}}async error(e,t){await this.prompt({type:vn.Error,message:e,detail:t})}}const LL=class LL{info(e){return this.notify({severity:vn.Info,message:e})}warn(e){return this.notify({severity:vn.Warning,message:e})}error(e){return this.notify({severity:vn.Error,message:e})}notify(e){switch(e.severity){case vn.Error:console.error(e.message);break;case vn.Warning:console.warn(e.message);break;default:console.log(e.message);break}return LL.NO_OP}prompt(e,t,i,s){return LL.NO_OP}status(e,t){return G.None}};LL.NO_OP=new lOe;let _H=LL,bH=class{constructor(e){this._onWillExecuteCommand=new $,this._onDidExecuteCommand=new $,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=Mt.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}};bH=Uu([Ln(0,Ae)],bH);let VC=class extends L3e{constructor(e,t,i,s,o,r){super(e,t,i,s,o),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=f=>{const m=new ne;m.add(Q(f,fe.KEY_DOWN,p=>{const b=new _i(p);this._dispatch(b,b.target)&&(b.preventDefault(),b.stopPropagation())})),m.add(Q(f,fe.KEY_UP,p=>{const b=new _i(p);this._singleModifierDispatch(b,b.target)&&b.preventDefault()})),this._domNodeListeners.push(new oHe(f,m))},l=f=>{for(let m=0;m<this._domNodeListeners.length;m++){const p=this._domNodeListeners[m];p.domNode===f&&(this._domNodeListeners.splice(m,1),p.dispose())}},c=f=>{f.getOption(61)||a(f.getContainerDomNode())},d=f=>{f.getOption(61)||l(f.getContainerDomNode())};this._register(r.onCodeEditorAdd(c)),this._register(r.onCodeEditorRemove(d)),r.listCodeEditors().forEach(c);const u=f=>{a(f.getContainerDomNode())},h=f=>{l(f.getContainerDomNode())};this._register(r.onDiffEditorAdd(u)),this._register(r.onDiffEditorRemove(h)),r.listDiffEditors().forEach(u)}addDynamicKeybinding(e,t,i,s){return ql(Mt.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:s}]))}addDynamicKeybindings(e){const t=e.map(i=>({keybinding:$8(i.keybinding,Mr),command:i.command??null,commandArgs:i.commandArgs,when:i.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),Pe(()=>{for(let i=0;i<this._dynamicKeybindings.length;i++)if(this._dynamicKeybindings[i]===t[0]){this._dynamicKeybindings.splice(i,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Ao.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Bx(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return ui.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let s=0;for(const o of e){const r=o.when||void 0,a=o.keybinding;if(!a)i[s++]=new Tee(void 0,o.command,o.commandArgs,r,t,null,!1);else{const l=Gk.resolveKeybinding(a,Mr);for(const c of l)i[s++]=new Tee(c,o.command,o.commandArgs,r,t,null,!1)}}return i}resolveKeyboardEvent(e){const t=new pf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new Gk([t],Mr)}};VC=Uu([Ln(0,qe),Ln(1,Ci),Ln(2,Zs),Ln(3,wn),Ln(4,Os),Ln(5,Ut)],VC);class oHe extends G{constructor(e,t){super(),this.domNode=e,this._register(t)}}function Ute(n){return n&&typeof n=="object"&&(!n.overrideIdentifier||typeof n.overrideIdentifier=="string")&&(!n.resource||n.resource instanceof Be)}let vM=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new $,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new Y6e(e);this._configuration=new eF(t.reload(),vs.createEmptyModel(e),vs.createEmptyModel(e),vs.createEmptyModel(e),vs.createEmptyModel(e),vs.createEmptyModel(e),new cs,vs.createEmptyModel(e),new cs,e),t.dispose()}getValue(e,t){const i=typeof e=="string"?e:void 0,s=Ute(e)?e:Ute(t)?t:{};return this._configuration.getValue(i,s,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const s of e){const[o,r]=s;this.getValue(o)!==r&&(this._configuration.updateValue(o,r),i.push(o))}if(i.length>0){const s=new w3e({keys:i,overrides:[]},t,this._configuration,void 0,this.logService);s.source=8,this._onDidChangeConfiguration.fire(s)}return Promise.resolve()}updateValue(e,t,i,s){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};vM=Uu([Ln(0,Os)],vM);let vH=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new $,this.configurationService.onDidChangeConfiguration(s=>{this._onDidChangeConfiguration.fire({affectedKeys:s.affectedKeys,affectsConfiguration:(o,r)=>s.affectsConfiguration(r)})})}getValue(e,t,i){const s=U.isIPosition(t)?t:null,o=s?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0,r=e?this.getLanguage(e,s):void 0;return typeof o>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:r}):this.configurationService.getValue(o,{resource:e,overrideIdentifier:r})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};vH=Uu([Ln(0,_t),Ln(1,Ei),Ln(2,ji)],vH);let wH=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:Mo||Lt?`
`:`\r
`}};wH=Uu([Ln(0,_t)],wH);class rHe{publicLog2(){}}const kL=class kL{constructor(){const e=Be.from({scheme:kL.SCHEME,authority:"model",path:"/"});this.workspace={id:lge,folders:[new W3e({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===kL.SCHEME?this.workspace.folders[0]:null}};kL.SCHEME="inmemory";let yH=kL;function wM(n,e,t){if(!e||!(n instanceof vM))return;const i=[];Object.keys(e).forEach(s=>{m3e(s)&&i.push([`editor.${s}`,e[s]]),t&&p3e(s)&&i.push([`diffEditor.${s}`,e[s]])}),i.length>0&&n.updateValues(i)}let CH=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const i=Array.isArray(e)?e:bq.convert(e),s=new Map;for(const a of i){if(!(a instanceof cm))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=s.get(l);c||(c=[],s.set(l,c)),c.push(Ki.replaceMove(D.lift(a.textEdit.range),a.textEdit.text))}let o=0,r=0;for(const[a,l]of s)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),r+=1,o+=l.length;return{ariaSummary:hv(a6.bulkEditServiceSummary,o,r),isApplied:o>0}}};CH=Uu([Ln(0,Ei)],CH);class aHe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return ml(e)}}let SH=class extends d3e{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const s=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();s&&(t=s.getContainerDomNode())}return super.showContextView(e,t,i)}};SH=Uu([Ln(0,up),Ln(1,Ut)],SH);class lHe{constructor(){this._neverEmitter=new $,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class cHe extends f6{constructor(){super()}}class dHe extends Q6e{constructor(){super(new WMe)}}let xH=class extends S6{constructor(e,t,i,s,o,r){super(e,t,i,s,o,r),this.configure({blockMouse:!1})}};xH=Uu([Ln(0,Zs),Ln(1,wn),Ln(2,Df),Ln(3,ei),Ln(4,Oa),Ln(5,qe)],xH);const LH={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"};let kH=class extends vW{constructor(e,t,i,s,o){super(LH,e,t,i,s,o)}};kH=Uu([Ln(0,Ei),Ln(1,F4),Ln(2,Os),Ln(3,Yi),Ln(4,xe)],kH);class uHe{async playSignal(e,t){}}Tt(Os,dHe,0);Tt(_t,vM,0);Tt(F4,vH,0);Tt(sfe,wH,0);Tt(yv,yH,0);Tt(PC,aHe,0);Tt(Zs,rHe,0);Tt(NI,sHe,0);Tt($K,nHe,0);Tt(wn,_H,0);Tt(zu,tg,0);Tt(ji,cHe,0);Tt(Ha,R6e,0);Tt(Ei,F6,0);Tt(Nq,I6,0);Tt(qe,gH,0);Tt(age,iHe,0);Tt(fp,pH,0);Tt(ac,QBe,0);Tt(fr,kH,0);Tt(RI,CH,0);Tt(cge,lHe,0);Tt(dr,mH,0);Tt(Yr,aH,0);Tt(Sl,$We,0);Tt(Ci,bH,0);Tt(ei,VC,0);Tt(Cl,sH,0);Tt(Df,SH,0);Tt(hr,N6,0);Tt(Mf,hH,0);Tt(Zr,xH,0);Tt(Oa,lH,0);Tt(pp,uHe,0);Tt(rme,eHe,0);var Ye;(function(n){const e=new W1;for(const[l,c]of nJ())e.set(l,c);const t=new bM(e,!0);e.set(Ae,t);function i(l){s||r({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof Xd?t.invokeFunction(d=>d.get(l)):c}n.get=i;let s=!1;const o=new $;function r(l){if(s)return t;s=!0;for(const[d,u]of nJ())e.get(d)||e.set(d,u);for(const d in l)if(l.hasOwnProperty(d)){const u=kt(d);e.get(u)instanceof Xd&&e.set(u,l[d])}const c=J6e();for(const d of c)try{t.createInstance(d)}catch(u){et(u)}return o.fire(),t}n.initialize=r;function a(l){if(s)return l();const c=new ne,d=c.add(o.event(()=>{d.dispose(),c.add(l())}));return c}n.withServices=a})(Ye||(Ye={}));function hHe(n,e){return new fHe(n,e)}class fHe extends S2{constructor(e,t){const i={amdModuleId:LH.amdModuleId,esmModuleLocation:LH.esmModuleLocation,label:t.label};super(i,t.keepIdleModels||!1,e),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?F9(this._foreignModuleHost):[];return e.$loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;const s=(a,l)=>e.$fmr(a,l),o=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},r={};for(const a of i)r[a]=o(a,s);return r})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this.workerWithSyncedResources(e).then(t=>this.getProxy())}}const zI={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};class Lo{constructor(e,t,i,s){this.startColumn=e,this.endColumn=t,this.className=i,this.type=s,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,s=t.length;if(i!==s)return!1;for(let o=0;o<i;o++)if(!Lo._equals(e[o],t[o]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const s=t+1,o=i+1,r=i-t,a=[];let l=0;for(const c of e)c.endColumn<=s||c.startColumn>=o||(a[l++]=new Lo(Math.max(1,c.startColumn-s+1),Math.min(r+1,c.endColumn-s+1),c.className,c.type));return a}static filter(e,t,i,s){if(e.length===0)return[];const o=[];let r=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;const u=d.startLineNumber===t?d.startColumn:i,h=d.endLineNumber===t?d.endColumn:s;o[r++]=new Lo(u,h,c.inlineClassName,c.type)}return o}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=Lo._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class $te{constructor(e,t,i,s){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=s}}class yM{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,s=e.length;i<s;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let s=0;for(;s+1<this.count&&this.stopOffsets[s]===this.stopOffsets[s+1];)s++;i.push(new $te(t,this.stopOffsets[s],this.classNames.join(" "),yM._metadata(this.metadata))),t=this.stopOffsets[s]+1,this.stopOffsets.splice(0,s+1),this.classNames.splice(0,s+1),this.metadata.splice(0,s+1),this.count-=s+1}return this.count>0&&t<e&&(i.push(new $te(t,e-1,this.classNames.join(" "),yM._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=e){this.stopOffsets.splice(s,0,e),this.classNames.splice(s,0,t),this.metadata.splice(s,0,i);break}this.count++}}class gHe{static normalize(e,t){if(t.length===0)return[];const i=[],s=new yM;let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];let c=l.startColumn,d=l.endColumn;const u=l.className,h=l.type===1?2:l.type===2?4:0;if(c>1){const p=e.charCodeAt(c-2);qn(p)&&c--}if(d>1){const p=e.charCodeAt(d-2);qn(p)&&d--}const f=c-1,m=d-2;o=s.consumeLowerThan(f,o,i),s.count===0&&(o=f),s.insert(m,u,h)}return s.consumeLowerThan(1073741824,o,i),i}}class rs{constructor(e,t,i,s){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=s,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class epe{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class _p{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f,m,p,b,v,w,y){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=s,this.isBasicASCII=o,this.containsRTL=r,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(Lo.compare),this.tabSize=d,this.startVisibleColumn=u,this.spaceWidth=h,this.stopRenderingLineAfter=p,this.renderWhitespace=b==="all"?4:b==="boundary"?1:b==="selection"?2:b==="trailing"?3:0,this.renderControlCharacters=v,this.fontLigatures=w,this.selectionsOnLine=y&&y.sort((x,k)=>x.startOffset<k.startOffset?-1:1);const C=Math.abs(m-h),S=Math.abs(f-h);C<S?(this.renderSpaceWidth=m,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Lo.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class tpe{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Qd{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,s){const o=(t<<16|i<<0)>>>0;this._data[e-1]=o,this._horizontalOffset[e-1]=s}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=Qd.getPartIndex(t),s=Qd.getCharIndex(t);return new tpe(i,s)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;const s=(e<<16|i<<0)>>>0;let o=0,r=this.length-1;for(;o+1<r;){const p=o+r>>>1,b=this._data[p];if(b===s)return p;b>s?r=p:o=p}if(o===r)return o;const a=this._data[o],l=this._data[r];if(a===s)return o;if(l===s)return r;const c=Qd.getPartIndex(a),d=Qd.getCharIndex(a),u=Qd.getPartIndex(l);let h;c!==u?h=t:h=Qd.getCharIndex(l);const f=i-d,m=h-i;return f<=m?o:r}}class NH{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function UI(n,e){if(n.lineContent.length===0){if(n.lineDecorations.length>0){e.appendString("<span>");let t=0,i=0,s=0;for(const r of n.lineDecorations)(r.type===1||r.type===2)&&(e.appendString('<span class="'),e.appendString(r.className),e.appendString('"></span>'),r.type===1&&(s|=1,t++),r.type===2&&(s|=2,i++));e.appendString("</span>");const o=new Qd(1,t+i);return o.setColumnInfo(1,t,0,0),new NH(o,!1,s)}return e.appendString("<span><span></span></span>"),new NH(new Qd(0,0),!1,0)}return SHe(_He(n),e)}class mHe{constructor(e,t,i,s){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=s}}function _F(n){const e=new N1(1e4),t=UI(n,e);return new mHe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class pHe{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f,m,p,b){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=s,this.isOverflowing=o,this.overflowingCharCount=r,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=d,this.startVisibleColumn=u,this.containsRTL=h,this.spaceWidth=f,this.renderSpaceCharCode=m,this.renderWhitespace=p,this.renderControlCharacters=b}}function _He(n){const e=n.lineContent;let t,i,s;n.stopRenderingLineAfter!==-1&&n.stopRenderingLineAfter<e.length?(t=!0,i=e.length-n.stopRenderingLineAfter,s=n.stopRenderingLineAfter):(t=!1,i=0,s=e.length);let o=bHe(e,n.containsRTL,n.lineTokens,n.fauxIndentLength,s);n.renderControlCharacters&&!n.isBasicASCII&&(o=wHe(e,o)),(n.renderWhitespace===4||n.renderWhitespace===1||n.renderWhitespace===2&&n.selectionsOnLine||n.renderWhitespace===3&&!n.continuesWithWrappedLine)&&(o=yHe(n,e,s,o));let r=0;if(n.lineDecorations.length>0){for(let a=0,l=n.lineDecorations.length;a<l;a++){const c=n.lineDecorations[a];c.type===3||c.type===1?r|=1:c.type===2&&(r|=2)}o=CHe(e,s,o,n.lineDecorations)}return n.containsRTL||(o=vHe(e,o,!n.isBasicASCII||n.fontLigatures)),new pHe(n.useMonospaceOptimizations,n.canUseHalfwidthRightwardsArrow,e,s,t,i,o,r,n.fauxIndentLength,n.tabSize,n.startVisibleColumn,n.containsRTL,n.spaceWidth,n.renderSpaceCharCode,n.renderWhitespace,n.renderControlCharacters)}function bHe(n,e,t,i,s){const o=[];let r=0;i>0&&(o[r++]=new rs(i,"",0,!1));let a=i;for(let l=0,c=t.getCount();l<c;l++){const d=t.getEndOffset(l);if(d<=i)continue;const u=t.getClassName(l);if(d>=s){const f=e?CC(n.substring(a,s)):!1;o[r++]=new rs(s,u,0,f);break}const h=e?CC(n.substring(a,d)):!1;o[r++]=new rs(d,u,0,h),a=d}return o}function vHe(n,e,t){let i=0;const s=[];let o=0;if(t)for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex;if(i+50<c){const d=l.type,u=l.metadata,h=l.containsRTL;let f=-1,m=i;for(let p=i;p<c;p++)n.charCodeAt(p)===32&&(f=p),f!==-1&&p-m>=50&&(s[o++]=new rs(f+1,d,u,h),m=f+1,f=-1);m!==c&&(s[o++]=new rs(c,d,u,h))}else s[o++]=l;i=c}else for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex,d=c-i;if(d>50){const u=l.type,h=l.metadata,f=l.containsRTL,m=Math.ceil(d/50);for(let p=1;p<m;p++){const b=i+p*50;s[o++]=new rs(b,u,h,f)}s[o++]=new rs(c,u,h,f)}else s[o++]=l;i=c}return s}function ipe(n){return n<32?n!==9:n===127||n>=8234&&n<=8238||n>=8294&&n<=8297||n>=8206&&n<=8207||n===1564}function wHe(n,e){const t=[];let i=new rs(0,"",0,!1),s=0;for(const o of e){const r=o.endIndex;for(;s<r;s++){const a=n.charCodeAt(s);ipe(a)&&(s>i.endIndex&&(i=new rs(s,o.type,o.metadata,o.containsRTL),t.push(i)),i=new rs(s+1,"mtkcontrol",o.metadata,!1),t.push(i))}s>i.endIndex&&(i=new rs(r,o.type,o.metadata,o.containsRTL),t.push(i))}return t}function yHe(n,e,t,i){const s=n.continuesWithWrappedLine,o=n.fauxIndentLength,r=n.tabSize,a=n.startVisibleColumn,l=n.useMonospaceOptimizations,c=n.selectionsOnLine,d=n.renderWhitespace===1,u=n.renderWhitespace===3,h=n.renderSpaceWidth!==n.spaceWidth,f=[];let m=0,p=0,b=i[p].type,v=i[p].containsRTL,w=i[p].endIndex;const y=i.length;let C=!1,S=fo(e),x;S===-1?(C=!0,S=t,x=t):x=Xc(e);let k=!1,N=0,E=c&&c[N],B=a%r;for(let O=o;O<t;O++){const W=e.charCodeAt(O);E&&O>=E.endOffset&&(N++,E=c&&c[N]);let T;if(O<S||O>x)T=!0;else if(W===9)T=!0;else if(W===32)if(d)if(k)T=!0;else{const M=O+1<t?e.charCodeAt(O+1):0;T=M===32||M===9}else T=!0;else T=!1;if(T&&c&&(T=!!E&&E.startOffset<=O&&E.endOffset>O),T&&u&&(T=C||O>x),T&&v&&O>=S&&O<=x&&(T=!1),k){if(!T||!l&&B>=r){if(h){const M=m>0?f[m-1].endIndex:o;for(let z=M+1;z<=O;z++)f[m++]=new rs(z,"mtkw",1,!1)}else f[m++]=new rs(O,"mtkw",1,!1);B=B%r}}else(O===w||T&&O>o)&&(f[m++]=new rs(O,b,0,v),B=B%r);for(W===9?B=r:$m(W)?B+=2:B++,k=T;O===w&&(p++,p<y);)b=i[p].type,v=i[p].containsRTL,w=i[p].endIndex}let A=!1;if(k)if(s&&d){const O=t>0?e.charCodeAt(t-1):0,W=t>1?e.charCodeAt(t-2):0;O===32&&W!==32&&W!==9||(A=!0)}else A=!0;if(A)if(h){const O=m>0?f[m-1].endIndex:o;for(let W=O+1;W<=t;W++)f[m++]=new rs(W,"mtkw",1,!1)}else f[m++]=new rs(t,"mtkw",1,!1);else f[m++]=new rs(t,b,0,v);return f}function CHe(n,e,t,i){i.sort(Lo.compare);const s=gHe.normalize(n,i),o=s.length;let r=0;const a=[];let l=0,c=0;for(let u=0,h=t.length;u<h;u++){const f=t[u],m=f.endIndex,p=f.type,b=f.metadata,v=f.containsRTL;for(;r<o&&s[r].startOffset<m;){const w=s[r];if(w.startOffset>c&&(c=w.startOffset,a[l++]=new rs(c,p,b,v)),w.endOffset+1<=m)c=w.endOffset+1,a[l++]=new rs(c,p+" "+w.className,b|w.metadata,v),r++;else{c=m,a[l++]=new rs(c,p+" "+w.className,b|w.metadata,v);break}}m>c&&(c=m,a[l++]=new rs(c,p,b,v))}const d=t[t.length-1].endIndex;if(r<o&&s[r].startOffset===d)for(;r<o&&s[r].startOffset===d;){const u=s[r];a[l++]=new rs(c,u.className,u.metadata,!1),r++}return a}function SHe(n,e){const t=n.fontIsMonospace,i=n.canUseHalfwidthRightwardsArrow,s=n.containsForeignElements,o=n.lineContent,r=n.len,a=n.isOverflowing,l=n.overflowingCharCount,c=n.parts,d=n.fauxIndentLength,u=n.tabSize,h=n.startVisibleColumn,f=n.containsRTL,m=n.spaceWidth,p=n.renderSpaceCharCode,b=n.renderWhitespace,v=n.renderControlCharacters,w=new Qd(r+1,c.length);let y=!1,C=0,S=h,x=0,k=0,N=0;f?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let E=0,B=c.length;E<B;E++){const A=c[E],O=A.endIndex,W=A.type,T=A.containsRTL,M=b!==0&&A.isWhitespace(),z=M&&!t&&(W==="mtkw"||!s),ee=C===O&&A.isPseudoAfter();if(x=0,e.appendString("<span "),T&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(z?"mtkz":W),e.appendASCIICharCode(34),M){let q=0;{let Z=C,V=S;for(;Z<O;Z++){const Fe=(o.charCodeAt(Z)===9?u-V%u:1)|0;q+=Fe,Z>=d&&(V+=Fe)}}for(z&&(e.appendString(' style="width:'),e.appendString(String(m*q)),e.appendString('px"')),e.appendASCIICharCode(62);C<O;C++){w.setColumnInfo(C+1,E-N,x,k),N=0;const Z=o.charCodeAt(C);let V,le;if(Z===9){V=u-S%u|0,le=V,!i||le>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let Fe=2;Fe<=le;Fe++)e.appendCharCode(160)}else V=2,le=1,e.appendCharCode(p),e.appendCharCode(8204);x+=V,k+=le,C>=d&&(S+=le)}}else for(e.appendASCIICharCode(62);C<O;C++){w.setColumnInfo(C+1,E-N,x,k),N=0;const q=o.charCodeAt(C);let Z=1,V=1;switch(q){case 9:Z=u-S%u,V=Z;for(let le=1;le<=Z;le++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:v?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:$m(q)&&V++,v&&q<32?e.appendCharCode(9216+q):v&&q===127?e.appendCharCode(9249):v&&ipe(q)?(e.appendString("[U+"),e.appendString(xHe(q)),e.appendString("]"),Z=8,V=Z):e.appendCharCode(q)}x+=Z,k+=V,C>=d&&(S+=V)}ee?N++:N=0,C>=r&&!y&&A.isPseudoAfter()&&(y=!0,w.setColumnInfo(C+1,E,x,k)),e.appendString("</span>")}return y||w.setColumnInfo(r+1,c.length-1,x,k),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(_("showMore","Show more ({0})",LHe(l))),e.appendString("</span>")),e.appendString("</span>"),new NH(w,f,s)}function xHe(n){return n.toString(16).toUpperCase().padStart(4,"0")}function LHe(n){return n<1024?_("overflow.chars","{0} chars",n):n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/1024/1024).toFixed(1)} MB`}let Kte=class{constructor(e,t,i,s){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=s|0}};class kHe{constructor(e,t){this.tabSize=e,this.data=t}}class rG{constructor(e,t,i,s,o,r,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=s,this.startVisibleColumn=o,this.tokens=r,this.inlineDecorations=a}}class Ma{constructor(e,t,i,s,o,r,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=s,this.isBasicASCII=Ma.isBasicASCII(i,r),this.containsRTL=Ma.containsRTL(i,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?CI(e):!0}static containsRTL(e,t,i){return!t&&i?CC(e):!1}}class Yx{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class NHe{constructor(e,t,i,s){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=s}toInlineDecoration(e){return new Yx(new D(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class npe{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class cN{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&Vi(e.data,t.data)}static equalsArr(e,t){return Vi(e,t,cN.equals)}}function IHe(n){return Array.isArray(n)}function EHe(n){return!IHe(n)}function spe(n){return typeof n=="string"}function qte(n){return!spe(n)}function l_(n){return!n}function Xh(n,e){return n.ignoreCase&&e?e.toLowerCase():e}function Gte(n){return n.replace(/[&<>'"_]/g,"-")}function DHe(n,e){console.log(`${n.languageId}: ${e}`)}function Ri(n,e){return new Error(`${n.languageId}: ${e}`)}function fg(n,e,t,i,s){const o=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let r=null;return e.replace(o,function(a,l,c,d,u,h,f,m,p){return l_(c)?l_(d)?!l_(u)&&u<i.length?Xh(n,i[u]):!l_(f)&&n&&typeof n[f]=="string"?n[f]:(r===null&&(r=s.split("."),r.unshift(s)),!l_(h)&&h<r.length?Xh(n,r[h]):""):Xh(n,t):"$"})}function THe(n,e,t){const i=/\$[sS](\d\d?)/g;let s=null;return e.replace(i,function(o,r){return s===null&&(s=t.split("."),s.unshift(t)),!l_(r)&&r<s.length?Xh(n,s[r]):""})}function _D(n,e){let t=e;for(;t&&t.length>0;){const i=n.tokenizer[t];if(i)return i;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return null}function RHe(n,e){let t=e;for(;t&&t.length>0;){if(n.stateNames[t])return!0;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return!1}var MHe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},PHe=function(n,e){return function(t,i){e(t,i,n)}},IH;const ope=5,kA=class kA{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Ly(e,t);let i=Ly.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let s=this._entries[i];return s||(s=new Ly(e,t),this._entries[i]=s,s)}};kA._INSTANCE=new kA(ope);let dN=kA;class Ly{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Ly._equals(this,e)}push(e){return dN.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return dN.create(this.parent,e)}}class vw{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new vw(this.languageId,this.state)}}const NA=class NA{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new Xx(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new Xx(e,t);const i=Ly.getStackElementId(e);let s=this._entries[i];return s||(s=new Xx(e,null),this._entries[i]=s,s)}};NA._INSTANCE=new NA(ope);let gg=NA;class Xx{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:gg.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof Xx)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class AHe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new Sk(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,s){const o=i.languageId,r=i.state,a=nn.get(o);if(!a)return this.enterLanguage(o),this.emit(s,""),r;const l=a.tokenize(e,t,r);if(s!==0)for(const c of l.tokens)this._tokens.push(new Sk(c.offset+s,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new mK(this._tokens,e)}}class CM{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const s=e!==null?e.length:0,o=t.length,r=i!==null?i.length:0;if(s===0&&o===0&&r===0)return new Uint32Array(0);if(s===0&&o===0)return i;if(o===0&&r===0)return e;const a=new Uint32Array(s+o+r);e!==null&&a.set(e);for(let l=0;l<o;l++)a[s+l]=t[l];return i!==null&&a.set(i,s+o),a}nestedLanguageTokenize(e,t,i,s){const o=i.languageId,r=i.state,a=nn.get(o);if(!a)return this.enterLanguage(o),this.emit(s,""),r;const l=a.tokenizeEncoded(e,t,r);if(s!==0)for(let c=0,d=l.tokens.length;c<d;c+=2)l.tokens[c]+=s;return this._prependTokens=CM._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new p4(CM._merge(this._prependTokens,this._tokens,null),e)}}let uN=IH=class extends G{constructor(e,t,i,s,o){super(),this._configurationService=o,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=s,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._register(nn.onDidChange(a=>{if(r)return;let l=!1;for(let c=0,d=a.changedLanguages.length;c<d;c++){const u=a.changedLanguages[c];if(this._embeddedLanguages[u]){l=!0;break}}l&&(r=!0,nn.handleChange([this._languageId]),r=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=nn.get(t);if(i){if(i instanceof IH){const s=i.getLoadStatus();s.loaded===!1&&e.push(s.promise)}continue}nn.isResolved(t)||e.push(nn.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=dN.create(null,this._lexer.start);return gg.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return pq(this._languageId,i);const s=new AHe,o=this._tokenize(e,t,i,s);return s.finalize(o)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return J4(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const s=new CM(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,i,s);return s.finalize(o)}_tokenize(e,t,i,s){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,s):this._myTokenize(e,t,i,0,s)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=_D(this._lexer,t.stack.state),!i))throw Ri(this._lexer,"tokenizer state is not defined: "+t.stack.state);let s=-1,o=!1;for(const r of i){if(!qte(r.action)||r.action.nextEmbedded!=="@pop")continue;o=!0;let a=r.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}const c=e.search(a);c===-1||c!==0&&r.matchOnlyAtLineStart||(s===-1||c<s)&&(s=c)}if(!o)throw Ri(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return s}_nestedTokenize(e,t,i,s,o){const r=this._findLeavingNestedLanguageOffset(e,i);if(r===-1){const c=o.nestedLanguageTokenize(e,t,i.embeddedLanguageData,s);return gg.create(i.stack,new vw(i.embeddedLanguageData.languageId,c))}const a=e.substring(0,r);a.length>0&&o.nestedLanguageTokenize(a,!1,i.embeddedLanguageData,s);const l=e.substring(r);return this._myTokenize(l,t,i,s+r,o)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,s,o){o.enterLanguage(this._languageId);const r=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedLanguageData,d=i.stack,u=0,h=null,f=!0;for(;f||u<l;){const m=u,p=d.depth,b=h?h.groups.length:0,v=d.state;let w=null,y=null,C=null,S=null,x=null;if(h){w=h.matches;const E=h.groups.shift();y=E.matched,C=E.action,S=h.rule,h.groups.length===0&&(h=null)}else{if(!f&&u>=l)break;f=!1;let E=this._lexer.tokenizer[v];if(!E&&(E=_D(this._lexer,v),!E))throw Ri(this._lexer,"tokenizer state is not defined: "+v);const B=a.substr(u);for(const A of E)if((u===0||!A.matchOnlyAtLineStart)&&(w=B.match(A.resolveRegex(v)),w)){y=w[0],C=A.action;break}}if(w||(w=[""],y=""),C||(u<l&&(w=[a.charAt(u)],y=w[0]),C=this._lexer.defaultToken),y===null)break;for(u+=y.length;EHe(C)&&qte(C)&&C.test;)C=C.test(y,w,v,u===l);let k=null;if(typeof C=="string"||Array.isArray(C))k=C;else if(C.group)k=C.group;else if(C.token!==null&&C.token!==void 0){if(C.tokenSubst?k=fg(this._lexer,C.token,y,w,v):k=C.token,C.nextEmbedded)if(C.nextEmbedded==="@pop"){if(!c)throw Ri(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw Ri(this._lexer,"cannot enter embedded language from within an embedded language");x=fg(this._lexer,C.nextEmbedded,y,w,v)}if(C.goBack&&(u=Math.max(0,u-C.goBack)),C.switchTo&&typeof C.switchTo=="string"){let E=fg(this._lexer,C.switchTo,y,w,v);if(E[0]==="@"&&(E=E.substr(1)),_D(this._lexer,E))d=d.switchTo(E);else throw Ri(this._lexer,"trying to switch to a state '"+E+"' that is undefined in rule: "+this._safeRuleName(S))}else{if(C.transform&&typeof C.transform=="function")throw Ri(this._lexer,"action.transform not supported");if(C.next)if(C.next==="@push"){if(d.depth>=this._lexer.maxStack)throw Ri(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(v)}else if(C.next==="@pop"){if(d.depth<=1)throw Ri(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(S));d=d.pop()}else if(C.next==="@popall")d=d.popall();else{let E=fg(this._lexer,C.next,y,w,v);if(E[0]==="@"&&(E=E.substr(1)),_D(this._lexer,E))d=d.push(E);else throw Ri(this._lexer,"trying to set a next state '"+E+"' that is undefined in rule: "+this._safeRuleName(S))}}C.log&&typeof C.log=="string"&&DHe(this._lexer,this._lexer.languageId+": "+fg(this._lexer,C.log,y,w,v))}if(k===null)throw Ri(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(S));const N=E=>{const B=this._languageService.getLanguageIdByLanguageName(E)||this._languageService.getLanguageIdByMimeType(E)||E,A=this._getNestedEmbeddedLanguageData(B);if(u<l){const O=e.substr(u);return this._nestedTokenize(O,t,gg.create(d,A),s+u,o)}else return gg.create(d,A)};if(Array.isArray(k)){if(h&&h.groups.length>0)throw Ri(this._lexer,"groups cannot be nested: "+this._safeRuleName(S));if(w.length!==k.length+1)throw Ri(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(S));let E=0;for(let B=1;B<w.length;B++)E+=w[B].length;if(E!==y.length)throw Ri(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(S));h={rule:S,matches:w,groups:[]};for(let B=0;B<k.length;B++)h.groups[B]={action:k[B],matched:w[B+1]};u-=y.length;continue}else{if(k==="@rematch"&&(u-=y.length,y="",w=null,k="",x!==null))return N(x);if(y.length===0){if(l===0||p!==d.depth||v!==d.state||(h?h.groups.length:0)!==b)continue;throw Ri(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(S))}let E=null;if(spe(k)&&k.indexOf("@brackets")===0){const B=k.substr(9),A=OHe(this._lexer,y);if(!A)throw Ri(this._lexer,"@brackets token returned but no bracket defined as: "+y);E=Gte(A.token+B)}else{const B=k===""?"":k+this._lexer.tokenPostfix;E=Gte(B)}m<r&&o.emit(m+s,E)}if(x!==null)return N(x)}return gg.create(d,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new vw(e,MC);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),nn.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=nn.get(e);return t?new vw(e,t.getInitialState()):new vw(e,MC)}};uN=IH=MHe([PHe(4,_t)],uN);function OHe(n,e){if(!e)return null;e=Xh(n,e);const t=n.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}const mB=Ef("standaloneColorizer",{createHTML:n=>n});class aG{static colorizeElement(e,t,i,s){s=s||{};const o=s.theme||"vs",r=s.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(r)||r;e.setTheme(o);const l=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+o;const c=d=>{const u=(mB==null?void 0:mB.createHTML(d))??d;i.innerHTML=u};return this.colorize(t,l||"",a,s).then(c,d=>console.error(d))}static async colorize(e,t,i,s){const o=e.languageIdCodec;let r=4;s&&typeof s.tabSize=="number"&&(r=s.tabSize),CK(t)&&(t=t.substr(1));const a=Bu(t);if(!e.isRegisteredLanguageId(i))return Zte(a,r,o);const l=await nn.getOrCreate(i);return l?FHe(a,r,l,o):Zte(a,r,o)}static colorizeLine(e,t,i,s,o=4){const r=Ma.isBasicASCII(e,t),a=Ma.containsRTL(e,r,i);return _F(new _p(!1,!0,e,!1,r,a,0,s,[],o,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){const s=e.getLineContent(t);e.tokenization.forceTokenization(t);const r=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(s,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,i)}}function FHe(n,e,t,i){return new Promise((s,o)=>{const r=()=>{const a=BHe(n,e,t,i);if(t instanceof uN){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(r,o);return}}s(a)};r()})}function Zte(n,e,t){let i=[];const o=new Uint32Array(2);o[0]=0,o[1]=33587200;for(let r=0,a=n.length;r<a;r++){const l=n[r];o[0]=l.length;const c=new us(o,l,t),d=Ma.isBasicASCII(l,!0),u=Ma.containsRTL(l,d,!0),h=_F(new _p(!1,!0,l,!1,d,u,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(h.html),i.push("<br/>")}return i.join("")}function BHe(n,e,t,i){let s=[],o=t.getInitialState();for(let r=0,a=n.length;r<a;r++){const l=n[r],c=t.tokenizeEncoded(l,!0,o);us.convertToEndOffset(c.tokens,l.length);const d=new us(c.tokens,l,i),u=Ma.isBasicASCII(l,!0),h=Ma.containsRTL(l,u,!0),f=_F(new _p(!1,!0,l,!1,u,h,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(f.html),s.push("<br/>"),o=c.endState}return s.join("")}var WHe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},HHe=function(n,e){return function(t,i){e(t,i,n)}},Gy;let SM=(Gy=class{constructor(e,t){}dispose(){}},Gy.ID="editor.contrib.markerDecorations",Gy);SM=WHe([HHe(1,Nq)],SM);Ot(SM.ID,SM,0);class rpe extends G{constructor(e,t){super(),this._onDidChange=this._register(new $),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,s=!1;const o=()=>{if(i&&!s)try{i=!1,s=!0,t()}finally{zr(je(this._referenceDomElement),()=>{s=!1,o()})}};this._resizeObserver=new ResizeObserver(r=>{r&&r[0]&&r[0].contentRect?e={width:r[0].contentRect.width,height:r[0].contentRect.height}:e=null,i=!0,o()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,s=0;t?(i=t.width,s=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,s=this._referenceDomElement.clientHeight),i=Math.max(5,i),s=Math.max(5,s),(this._width!==i||this._height!==s)&&(this._width=i,this._height=s,e&&this._onDidChange.fire())}}const Hw=class Hw{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=Hw._read(e,this.key),i=o=>Hw._read(e,o),s=(o,r)=>Hw._write(e,o,r);this.migrate(t,i,s)}static _read(e,t){if(typeof e>"u")return;const i=t.indexOf(".");if(i>=0){const s=t.substring(0,i);return this._read(e[s],t.substring(i+1))}return e[t]}static _write(e,t,i){const s=t.indexOf(".");if(s>=0){const o=t.substring(0,s);e[o]=e[o]||{},this._write(e[o],t.substring(s+1),i);return}e[t]=i}};Hw.items=[];let hN=Hw;function bd(n,e){hN.items.push(new hN(n,e))}function Xr(n,e){bd(n,(t,i,s)=>{if(typeof t<"u"){for(const[o,r]of e)if(t===o){s(n,r);return}}})}function VHe(n){hN.items.forEach(e=>e.apply(n))}Xr("wordWrap",[[!0,"on"],[!1,"off"]]);Xr("lineNumbers",[[!0,"on"],[!1,"off"]]);Xr("cursorBlinking",[["visible","solid"]]);Xr("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Xr("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Xr("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Xr("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Xr("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Xr("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Xr("autoIndent",[[!1,"advanced"],[!0,"full"]]);Xr("matchBrackets",[[!0,"always"],[!1,"never"]]);Xr("renderFinalNewline",[[!0,"on"],[!1,"off"]]);Xr("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);Xr("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);Xr("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);bd("autoClosingBrackets",(n,e,t)=>{n===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});bd("renderIndentGuides",(n,e,t)=>{typeof n<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!n))});bd("highlightActiveIndentGuide",(n,e,t)=>{typeof n<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!n))});const jHe={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};bd("suggest.filteredTypes",(n,e,t)=>{if(n&&typeof n=="object"){for(const i of Object.entries(jHe))n[i[0]]===!1&&typeof e(`suggest.${i[1]}`)>"u"&&t(`suggest.${i[1]}`,!1);t("suggest.filteredTypes",void 0)}});bd("quickSuggestions",(n,e,t)=>{if(typeof n=="boolean"){const i=n?"on":"off";t("quickSuggestions",{comments:i,strings:i,other:i})}});bd("experimental.stickyScroll.enabled",(n,e,t)=>{typeof n=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",n))});bd("experimental.stickyScroll.maxLineCount",(n,e,t)=>{typeof n=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",n))});bd("codeActionsOnSave",(n,e,t)=>{if(n&&typeof n=="object"){let i=!1;const s={};for(const o of Object.entries(n))typeof o[1]=="boolean"?(i=!0,s[o[0]]=o[1]?"explicit":"never"):s[o[0]]=o[1];i&&t("codeActionsOnSave",s)}});bd("codeActionWidget.includeNearbyQuickfixes",(n,e,t)=>{typeof n=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",n))});bd("lightbulb.enabled",(n,e,t)=>{typeof n=="boolean"&&t("lightbulb.enabled",n?void 0:"off")});class zHe{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new $,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const jC=new zHe;var UHe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},$He=function(n,e){return function(t,i){e(t,i,n)}};let EH=class extends G{constructor(e,t,i,s,o){super(),this._accessibilityService=o,this._onDidChange=this._register(new $),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new $),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Nue,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new rpe(s,i.dimension)),this._targetWindowId=je(s).vscodeWindowId,this._rawOptions=Yte(i),this._validatedOptions=mg.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Qa.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(jC.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(iW.onDidChange(()=>this._recomputeOptions())),this._register(Dk.getInstance(je(s)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=mg.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=U_.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),s={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:jC.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return mg.computeOptions(this._validatedOptions,s)}_readEnvConfiguration(){return{extraEditorClassName:qHe(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:z_||ul,pixelRatio:Dk.getInstance(VQ(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return iW.readFontInfo(VQ(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=Yte(e);mg.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=mg.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=KHe(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};EH=UHe([$He(4,Yr)],EH);function KHe(n){let e=0;for(;n;)n=Math.floor(n/10),e++;return e||1}function qHe(){let n="";return!mf&&!ehe&&(n+="no-user-select "),mf&&(n+="no-minimap-shadow ",n+="enable-user-select "),Lt&&(n+="mac "),n}class GHe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class ZHe{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class mg{static validateOptions(e){const t=new GHe;for(const i of lw){const s=i.name==="_never_"?void 0:e[i.name];t._write(i.id,i.validate(s))}return t}static computeOptions(e,t){const i=new ZHe;for(const s of lw)i._write(s.id,s.compute(t,i,e._read(s.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Vi(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!mg._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let s=!1;for(const o of lw){const r=!mg._deepEquals(e._read(o.id),t._read(o.id));i[o.id]=r,r&&(s=!0)}return s?new kue(i):null}static applyUpdate(e,t){let i=!1;for(const s of lw)if(t.hasOwnProperty(s.name)){const o=s.applyUpdate(e[s.name],t[s.name]);e[s.name]=o.newValue,i=i||o.didChange}return i}}function Yte(n){const e=vh(n);return VHe(e),e}var $g;(function(n){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},i={...e},s={...e};let o=0;const r={keydown:0,input:0,render:0};function a(){v(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),r.keydown=1,queueMicrotask(l)}n.onKeyDown=a;function l(){r.keydown===1&&(performance.mark("keydown/end"),r.keydown=2)}function c(){performance.mark("input/start"),r.input=1,b()}n.onBeforeInput=c;function d(){r.input===0&&c(),queueMicrotask(u)}n.onInput=d;function u(){r.input===1&&(performance.mark("input/end"),r.input=2)}function h(){v()}n.onKeyUp=h;function f(){v()}n.onSelectionChange=f;function m(){r.keydown===2&&r.input===2&&r.render===0&&(performance.mark("render/start"),r.render=1,queueMicrotask(p),b())}n.onRenderStart=m;function p(){r.render===1&&(performance.mark("render/end"),r.render=2)}function b(){setTimeout(v)}function v(){r.keydown===2&&r.input===2&&r.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),w("keydown",e),w("input",t),w("render",i),w("inputlatency",s),o++,y())}function w(k,N){const E=performance.getEntriesByName(k)[0].duration;N.total+=E,N.min=Math.min(N.min,E),N.max=Math.max(N.max,E)}function y(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),r.keydown=0,r.input=0,r.render=0}function C(){if(o===0)return;const k={keydown:S(e),input:S(t),render:S(i),total:S(s),sampleCount:o};return x(e),x(t),x(i),x(s),o=0,k}n.getAndClearMeasurements=C;function S(k){return{average:k.total/o,max:k.max,min:k.min}}function x(k){k.total=0,k.min=Number.MAX_VALUE,k.max=0}})($g||($g={}));class bF{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new ape(this.x-e.scrollX,this.y-e.scrollY)}}class ape{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new bF(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class YHe{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s,this._editorPagePositionBrand=void 0}}class XHe{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function lG(n){const e=un(n);return new YHe(e.left,e.top,e.width,e.height)}function cG(n,e,t){const i=e.width/n.offsetWidth,s=e.height/n.offsetHeight,o=(t.x-e.x)/i,r=(t.y-e.y)/s;return new XHe(o,r)}class ep extends Vl{constructor(e,t,i){super(je(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new bF(this.posx,this.posy),this.editorPos=lG(i),this.relativePos=cG(i,this.editorPos,this.pos)}}class QHe{constructor(e){this._editorViewDomNode=e}_create(e){return new ep(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return Q(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return Q(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return Q(e,fe.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return Q(e,fe.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onMouseLeave(e,t){return Q(e,fe.MOUSE_LEAVE,i=>{t(this._create(i))})}onMouseMove(e,t){return Q(e,"mousemove",i=>t(this._create(i)))}}class JHe{constructor(e){this._editorViewDomNode=e}_create(e){return new ep(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return Q(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return Q(e,fe.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onPointerLeave(e,t){return Q(e,fe.POINTER_LEAVE,i=>{t(this._create(i))})}onPointerMove(e,t){return Q(e,"pointermove",i=>t(this._create(i)))}}class eVe extends G{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new D1),this._keydownListener=null}startMonitoring(e,t,i,s,o){this._keydownListener=Ji(e.ownerDocument,"keydown",r=>{r.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,r.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,r=>{s(new ep(r,!0,this._editorViewDomNode))},r=>{this._keydownListener.dispose(),o(r)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}const IA=class IA{constructor(e){this._editor=e,this._instanceId=++IA._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new li(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let i=this._rules.get(t);if(!i){const s=this._counter++;i=new tVe(t,`dyn-rule-${this._instanceId}-${s}`,u2(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,i)}return i}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}};IA._idPool=0;let xM=IA;class tVe{constructor(e,t,i,s){this.key=e,this.className=t,this.properties=s,this._referenceCount=0,this._styleElementDisposables=new ne,this._styleElement=Ta(i,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let i=`.${e} {`;for(const s in t){const o=t[s];let r;typeof o=="object"?r=ye(o.id):r=o;const a=iVe(s);i+=`
	${a}: ${r};`}return i+=`
}`,i}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function iVe(n){return n.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class $I extends G{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,s=e.length;i<s;i++){const o=e[i];switch(o.type){case 0:this.onCompositionStart(o)&&(t=!0);break;case 1:this.onCompositionEnd(o)&&(t=!0);break;case 2:this.onConfigurationChanged(o)&&(t=!0);break;case 3:this.onCursorStateChanged(o)&&(t=!0);break;case 4:this.onDecorationsChanged(o)&&(t=!0);break;case 5:this.onFlushed(o)&&(t=!0);break;case 6:this.onFocusChanged(o)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case 8:this.onLineMappingChanged(o)&&(t=!0);break;case 9:this.onLinesChanged(o)&&(t=!0);break;case 10:this.onLinesDeleted(o)&&(t=!0);break;case 11:this.onLinesInserted(o)&&(t=!0);break;case 12:this.onRevealRangeRequest(o)&&(t=!0);break;case 13:this.onScrollChanged(o)&&(t=!0);break;case 15:this.onTokensChanged(o)&&(t=!0);break;case 14:this.onThemeChanged(o)&&(t=!0);break;case 16:this.onTokensColorsChanged(o)&&(t=!0);break;case 17:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}}class Qr extends $I{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class hd{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const i=[];let s=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[s++]=this.read(e)),e=e.parentElement;const o=new Uint8Array(s);for(let r=0;r<s;r++)o[r]=i[s-r-1];return o}}class nVe{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class sVe extends nVe{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class oVe{constructor(e,t,i,s){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=s}}class vF{static from(e){const t=new Array(e.length);for(let i=0,s=e.length;i<s;i++){const o=e[i];t[i]=new vF(o.left,o.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class Q_{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class rVe{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class Xte{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class HT{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,s,o){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(i,s),r.getClientRects()}catch{return null}finally{this._detachRange(r,o)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Q_.compare);const t=[];let i=0,s=e[0];for(let o=1,r=e.length;o<r;o++){const a=e[o];s.left+s.width+.9>=a.left?s.width=Math.max(s.width,a.left+a.width-s.left):(t[i++]=s,s=a)}return t[i++]=s,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||e.length===0)return null;const s=[];for(let o=0,r=e.length;o<r;o++){const a=e[o];s[o]=new Q_(Math.max(0,(a.left-t)/i),a.width/i)}return this._mergeAdjacentRanges(s)}static readHorizontalRanges(e,t,i,s,o,r){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),s=Math.min(l,Math.max(0,s)),t===s&&i===o&&i===0&&!e.children[t].firstChild){const h=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,r.clientRectDeltaLeft,r.clientRectScale)}t!==s&&s>0&&o===0&&(s--,o=1073741824);let c=e.children[t].firstChild,d=e.children[s].firstChild;if((!c||!d)&&(!c&&i===0&&t>0&&(c=e.children[t-1].firstChild,i=1073741824),!d&&o===0&&s>0&&(d=e.children[s-1].firstChild,o=1073741824)),!c||!d)return null;i=Math.min(c.textContent.length,Math.max(0,i)),o=Math.min(d.textContent.length,Math.max(0,o));const u=this._readClientRects(c,i,d,o,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(u,r.clientRectDeltaLeft,r.clientRectScale)}}const aVe=function(){return Gc?!0:!(Mo||ul||mf)}();let ky=!0;class Qte{constructor(e,t){this.themeType=t;const i=e.options,s=i.get(50);i.get(38)==="off"?this.renderWhitespace=i.get(100):this.renderWhitespace="none",this.renderControlCharacters=i.get(95),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(118),this.fontLigatures=i.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}const EA=class EA{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=Jt(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Qc(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,s,o){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const r=s.getViewLineRenderingData(e),a=this._options,l=Lo.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn);let c=null;if(Qc(a.themeType)||this._options.renderWhitespace==="selection"){const f=s.selections;for(const m of f){if(m.endLineNumber<e||m.startLineNumber>e)continue;const p=m.startLineNumber===e?m.startColumn:r.minColumn,b=m.endLineNumber===e?m.endColumn:r.maxColumn;p<b&&(Qc(a.themeType)&&l.push(new Lo(p,b,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new epe(p-1,b-1))))}}const d=new _p(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,l,r.tabSize,r.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==Vm.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(d))return!1;o.appendString('<div style="top:'),o.appendString(String(t)),o.appendString("px;height:"),o.appendString(String(i)),o.appendString('px;" class="'),o.appendString(EA.CLASS_NAME),o.appendString('">');const u=UI(d,o);o.appendString("</div>");let h=null;return ky&&aVe&&r.isBasicASCII&&a.useMonospaceOptimizations&&u.containsForeignElements===0&&(h=new bD(this._renderedViewLine?this._renderedViewLine.domNode:null,d,u.characterMapping)),h||(h=cpe(this._renderedViewLine?this._renderedViewLine.domNode:null,d,u.characterMapping,u.containsRTL,u.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(i))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof bD:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof bD?this._renderedViewLine.monospaceAssumptionsAreValid():ky}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof bD&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,s){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const o=this._renderedViewLine.input.stopRenderingLineAfter;if(o!==-1&&t>o+1&&i>o+1)return new Xte(!0,[new Q_(this.getWidth(s),0)]);o!==-1&&t>o+1&&(t=o+1),o!==-1&&i>o+1&&(i=o+1);const r=this._renderedViewLine.getVisibleRangesForRange(e,t,i,s);return r&&r.length>0?new Xte(!1,r):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};EA.CLASS_NAME="view-line";let Dh=EA;class bD{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;const s=Math.floor(t.lineContent.length/300);if(s>0){this._keyColumnPixelOffsetCache=new Float32Array(s);for(let o=0;o<s;o++)this._keyColumnPixelOffsetCache[o]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return ky;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),ky=!1)}return ky}toSlowRenderedLine(){return cpe(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,s){const o=this._getColumnPixelOffset(e,t,s),r=this._getColumnPixelOffset(e,i,s);return[new Q_(o,r-o)]}_getColumnPixelOffset(e,t,i){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const s=Math.floor((t-1)/300)-1,o=(s+1)*300+1;let r=-1;if(this._keyColumnPixelOffsetCache&&(r=this._keyColumnPixelOffsetCache[s],r===-1&&(r=this._actualReadPixelOffset(e,o,i),this._keyColumnPixelOffsetCache[s]=r)),r===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(o),l=this._characterMapping.getHorizontalOffset(t);return r+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return-1;const s=this._characterMapping.getDomPosition(t),o=HT.readHorizontalRanges(this._getReadingTarget(this.domNode),s.partIndex,s.charIndex,s.partIndex,s.charIndex,i);return!o||o.length===0?-1:o[0].left}getColumnOfNodeOffset(e,t){return dG(this._characterMapping,e,t)}}class lpe{constructor(e,t,i,s,o){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,a=this._characterMapping.length;r<=a;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const o=this._readPixelOffset(this.domNode,e,t,s);if(o===-1)return null;const r=this._readPixelOffset(this.domNode,e,i,s);return r===-1?null:[new Q_(o,r-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,s)}_readVisibleRangesForRange(e,t,i,s,o){if(i===s){const r=this._readPixelOffset(e,t,i,o);return r===-1?null:[new Q_(r,0)]}else return this._readRawVisibleRangesForRange(e,i,s,o)}_readPixelOffset(e,t,i,s){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(s);const o=this._getReadingTarget(e);return o.firstChild?(s.markDidDomLayout(),o.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const o=this._pixelOffsetCache[i];if(o!==-1)return o;const r=this._actualReadPixelOffset(e,t,i,s);return this._pixelOffsetCache[i]=r,r}return this._actualReadPixelOffset(e,t,i,s)}_actualReadPixelOffset(e,t,i,s){if(this._characterMapping.length===0){const l=HT.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,s);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(s);const o=this._characterMapping.getDomPosition(i),r=HT.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,s);if(!r||r.length===0)return-1;const a=r[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,s){if(t===1&&i===this._characterMapping.length)return[new Q_(0,this.getWidth(s))];const o=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(i);return HT.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,r.partIndex,r.charIndex,s)}getColumnOfNodeOffset(e,t){return dG(this._characterMapping,e,t)}}class lVe extends lpe{_readVisibleRangesForRange(e,t,i,s,o){const r=super._readVisibleRangesForRange(e,t,i,s,o);if(!r||r.length===0||i===s||i===1&&s===this._characterMapping.length)return r;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,s,o);if(a!==-1){const l=r[r.length-1];l.left<a&&(l.width=a-l.left)}}return r}}const cpe=function(){return z_?cVe:dVe}();function cVe(n,e,t,i,s){return new lVe(n,e,t,i,s)}function dVe(n,e,t,i,s){return new lpe(n,e,t,i,s)}function dG(n,e,t){const i=e.textContent.length;let s=-1;for(;e;)e=e.previousSibling,s++;return n.getColumn(new tpe(s,t),i)}class fN{static whitespaceVisibleColumn(e,t,i){const s=e.length;let o=0,r=-1,a=-1;for(let l=0;l<s;l++){if(l===t)return[r,a,o];switch(o%i===0&&(r=l,a=o),e.charCodeAt(l)){case 32:o+=1;break;case 9:o=Bn.nextRenderTabStop(o,i);break;default:return[-1,-1,-1]}}return t===s?[r,a,o]:[-1,-1,-1]}static atomicPosition(e,t,i,s){const o=e.length,[r,a,l]=fN.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(s){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(r===-1)return-1;let h=a;for(let f=r;f<o;++f){if(h===a+i)return r;switch(e.charCodeAt(f)){case 32:h+=1;break;case 9:h=Bn.nextRenderTabStop(h,i);break;default:return-1}}return h===a+i?r:-1}const d=Bn.nextRenderTabStop(l,i);let u=l;for(let h=t;h<o;h++){if(u===d)return h;switch(e.charCodeAt(h)){case 32:u+=1;break;case 9:u=Bn.nextRenderTabStop(u,i);break;default:return-1}}return u===d?o:-1}}class Xf{constructor(e=null){this.hitTarget=e,this.type=0}}class dpe{get hitTarget(){return this.spanNode}constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var c_;(function(n){function e(t,i,s){const o=t.getPositionFromDOMInfo(i,s);return o?new dpe(o,i,null):new Xf(i)}n.createFromDOMInfo=e})(c_||(c_={}));class uVe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class io{static _deduceRage(e,t=null){return!t&&e?new D(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,s,o,r){return{type:e,element:t,mouseColumn:i,position:s,range:o,detail:r}}static createViewZone(e,t,i,s,o){return{type:e,element:t,mouseColumn:i,position:s,range:this._deduceRage(s),detail:o}}static createContentText(e,t,i,s,o){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,s),detail:o}}static createContentEmpty(e,t,i,s){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:s}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,s){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:s}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class po{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class zC{constructor(e,t,i){this.viewModel=e.viewModel;const s=e.configuration.options;this.layoutInfo=s.get(146),this.viewDomNode=t.viewDomNode,this.lineHeight=s.get(67),this.stickyTabStops=s.get(117),this.typicalHalfwidthCharacterWidth=s.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return zC.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const s=i.verticalOffset+i.height/2,o=e.viewModel.getLineCount();let r=null,a,l=null;return i.afterLineNumber!==o&&(l=new U(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(r=new U(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),l===null?a=r:r===null?a=l:t<s?a=r:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:r,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const s=this._context.viewModel.getLineCount(),o=this._context.viewModel.getLineMaxColumn(s);return{range:new D(s,o,s,o),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new D(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return zC._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class hVe{constructor(e,t,i,s){this.editorPos=t,this.pos=i,this.relativePos=s,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,to._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class fVe extends hVe{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=hd.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,i,s,o){super(e,t,i,s),this.hitTestResult=new ad(()=>to.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=o;const r=!!this._eventTarget;this._useHitTestTarget=!r}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?Bn.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return io.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return io.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,s){return io.createMargin(e,this.target,this._getMouseColumn(t),t,i,s)}fulfillViewZone(e,t,i){return io.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return io.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return io.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return io.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return io.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return io.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const Jte={isAfterLines:!0};function pB(n){return{isAfterLines:!1,horizontalDistanceToText:n}}class to{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=hd.collect(t,this._viewHelper.viewDomNode);return!!(po.isChildOfContentWidgets(i)||po.isChildOfOverflowingContentWidgets(i)||po.isChildOfOverlayWidgets(i)||po.isChildOfOverflowingOverlayWidgets(i))}createMouseTarget(e,t,i,s,o){const r=new zC(this._context,this._viewHelper,e),a=new fVe(r,t,i,s,o);try{const l=to._createMouseTarget(r,a);if(l.type===6&&r.stickyTabStops&&l.position!==null){const c=to._snapToSoftTabBoundary(l.position,r.viewModel),d=D.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,d,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const i=t;let s=null;return!po.isChildOfOverflowGuard(t.targetPath)&&!po.isChildOfOverflowingContentWidgets(t.targetPath)&&!po.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(s=s||t.fulfillUnknown()),s=s||to._hitTestContentWidget(e,i),s=s||to._hitTestOverlayWidget(e,i),s=s||to._hitTestMinimap(e,i),s=s||to._hitTestScrollbarSlider(e,i),s=s||to._hitTestViewZone(e,i),s=s||to._hitTestMargin(e,i),s=s||to._hitTestViewCursor(e,i),s=s||to._hitTestTextArea(e,i),s=s||to._hitTestViewLines(e,i),s=s||to._hitTestScrollbar(e,i),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(po.isChildOfContentWidgets(t.targetPath)||po.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(po.isChildOfOverlayWidgets(t.targetPath)||po.isChildOfOverflowingOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const s of i)if(t.target===s.domNode)return t.fulfillContentText(s.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,s=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(const r of i){if(s<r.contentLeft||s>r.contentLeft+r.width)continue;const a=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(a<=o&&o<=a+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const s=t.isInContentArea?8:5;return t.fulfillViewZone(s,i.position,i)}return null}static _hitTestTextArea(e,t){return po.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),s=i.range.getStartPosition();let o=Math.abs(t.relativePos.x);const r={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};if(o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return r.glyphMarginLane=l[Math.floor(o/e.lineHeight)],t.fulfillMargin(2,s,i.range,r)}return o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,s,i.range,r):(o-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,s,i.range,r))}return null}static _hitTestViewLines(e,t){if(!po.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new U(1,1),Jte);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),o=e.viewModel.getLineMaxColumn(s);return t.fulfillContentEmpty(new U(s,o),Jte)}if(po.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(s)===0){const r=e.getLineWidth(s),a=pB(t.mouseContentHorizontalOffset-r);return t.fulfillContentEmpty(new U(s,1),a)}const o=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=o){const r=pB(t.mouseContentHorizontalOffset-o),a=new U(s,e.viewModel.getLineMaxColumn(s));return t.fulfillContentEmpty(a,r)}}const i=t.hitTestResult.value;return i.type===1?to.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(po.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new U(i,s))}return null}static _hitTestScrollbarSlider(e,t){if(po.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(s);return t.fulfillScrollbar(new U(s,o))}}return null}static _hitTestScrollbar(e,t){if(po.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new U(i,s))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(146),s=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return to._getMouseColumn(s,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,s,o){const r=s.lineNumber,a=s.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){const v=pB(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(s,v)}const c=e.visibleRangeForPosition(r,a);if(!c)return t.fulfillUnknown(s);const d=c.left;if(Math.abs(t.mouseContentHorizontalOffset-d)<1)return t.fulfillContentText(s,null,{mightBeForeignElement:!!o,injectedText:o});const u=[];if(u.push({offset:c.left,column:a}),a>1){const v=e.visibleRangeForPosition(r,a-1);v&&u.push({offset:v.left,column:a-1})}const h=e.viewModel.getLineMaxColumn(r);if(a<h){const v=e.visibleRangeForPosition(r,a+1);v&&u.push({offset:v.left,column:a+1})}u.sort((v,w)=>v.offset-w.offset);const f=t.pos.toClientCoordinates(je(e.viewDomNode)),m=i.getBoundingClientRect(),p=m.left<=f.clientX&&f.clientX<=m.right;let b=null;for(let v=1;v<u.length;v++){const w=u[v-1],y=u[v];if(w.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=y.offset){b=new D(r,w.column,r,y.column);const C=Math.abs(w.offset-t.mouseContentHorizontalOffset),S=Math.abs(y.offset-t.mouseContentHorizontalOffset);s=C<S?new U(r,w.column):new U(r,y.column);break}}return t.fulfillContentText(s,b,{mightBeForeignElement:!p||!!o,injectedText:o})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(i),o=s+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>o)){const a=Math.floor((s+o)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new bF(t.pos.x,l),d=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(je(e.viewDomNode)));if(d.type===1)return d}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(je(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=mv(e.viewDomNode);let s;if(i?typeof i.caretRangeFromPoint>"u"?s=gVe(i,t.clientX,t.clientY):s=i.caretRangeFromPoint(t.clientX,t.clientY):s=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!s||!s.startContainer)return new Xf;const o=s.startContainer;if(o.nodeType===o.TEXT_NODE){const r=o.parentNode,a=r?r.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Dh.CLASS_NAME?c_.createFromDOMInfo(e,r,s.startOffset):new Xf(o.parentNode)}else if(o.nodeType===o.ELEMENT_NODE){const r=o.parentNode,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Dh.CLASS_NAME?c_.createFromDOMInfo(e,o,o.textContent.length):new Xf(o)}return new Xf}static _doHitTestWithCaretPositionFromPoint(e,t){const i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const s=i.offsetNode.parentNode,o=s?s.parentNode:null,r=o?o.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===Dh.CLASS_NAME?c_.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new Xf(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const s=i.offsetNode.parentNode,o=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,r=s?s.parentNode:null,a=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(o===Dh.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return c_.createFromDOMInfo(e,l,0)}else if(a===Dh.CLASS_NAME)return c_.createFromDOMInfo(e,i.offsetNode,0)}return new Xf(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:s}=t.model.getOptions(),o=fN.atomicPosition(i,e.column-1,s,2);return o!==-1?new U(e.lineNumber,o+1):e}static doHitTest(e,t){let i=new Xf;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(je(e.viewDomNode)))),i.type===1){const s=e.viewModel.getInjectedTextAt(i.position),o=e.viewModel.normalizePosition(i.position,2);(s||!o.equals(i.position))&&(i=new dpe(o,i.spanNode,s))}return i}}function gVe(n,e,t){const i=document.createRange();let s=n.elementFromPoint(e,t);if(s!==null){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const o=s.getBoundingClientRect(),r=je(s),a=r.getComputedStyle(s,null).getPropertyValue("font-style"),l=r.getComputedStyle(s,null).getPropertyValue("font-variant"),c=r.getComputedStyle(s,null).getPropertyValue("font-weight"),d=r.getComputedStyle(s,null).getPropertyValue("font-size"),u=r.getComputedStyle(s,null).getPropertyValue("line-height"),h=r.getComputedStyle(s,null).getPropertyValue("font-family"),f=`${a} ${l} ${c} ${d}/${u} ${h}`,m=s.innerText;let p=o.left,b=0,v;if(e>o.left+o.width)b=m.length;else{const w=DH.getInstance();for(let y=0;y<m.length+1;y++){if(v=w.getCharWidth(m.charAt(y),f)/2,p+=v,e<p){b=y;break}p+=v}}i.setStart(s.firstChild,b),i.setEnd(s.firstChild,b)}return i}const p_=class p_{static getInstance(){return p_._INSTANCE||(p_._INSTANCE=new p_),p_._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const s=this._canvas.getContext("2d");s.font=t;const r=s.measureText(e).width;return this._cache[i]=r,r}};p_._INSTANCE=null;let DH=p_;class uG extends $I{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new to(this._context,i),this._mouseDownOperation=this._register(new mVe(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(r,a)=>this._createMouseTarget(r,a),r=>this._getMouseColumn(r))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const s=new QHe(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,r=>this._onContextMenu(r,!0))),this._register(s.onMouseMove(this.viewHelper.viewDomNode,r=>{this._onMouseMove(r),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=Q(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new ep(a,!1,this.viewHelper.viewDomNode))}))})),this._register(s.onMouseUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r)));let o=0;this._register(s.onPointerDown(this.viewHelper.viewDomNode,(r,a)=>{o=a})),this._register(Q(this.viewHelper.viewDomNode,fe.POINTER_UP,r=>{this._mouseDownOperation.onPointerUp()})),this._register(s.onMouseDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r,o))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=T2.INSTANCE;let t=0,i=Qa.getZoomLevel(),s=!1,o=0;const r=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(76))return;const c=new gv(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const d=Qa.getZoomLevel(),u=c.deltaY>0?1:-1;Qa.setZoomLevel(d+u),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(i=Qa.getZoomLevel(),s=a(l),o=0),t=Date.now(),o+=c.deltaY,s&&(Qa.setZoomLevel(i+o/5),c.preventDefault(),c.stopPropagation())};this._register(Q(this.viewHelper.viewDomNode,fe.MOUSE_WHEEL,r,{capture:!0,passive:!1}));function a(l){return Lt?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(146)){const t=this._context.configuration.options.get(146).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const s=new ape(e,t).toPageCoordinates(je(this.viewHelper.viewDomNode)),o=lG(this.viewHelper.viewDomNode);if(s.y<o.y||s.y>o.y+o.height||s.x<o.x||s.x>o.x+o.width)return null;const r=cG(this.viewHelper.viewDomNode,o,s);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,s,r,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const s=mv(this.viewHelper.viewDomNode);s&&(i=s.elementsFromPoint(e.posx,e.posy).find(o=>this.viewHelper.viewDomNode.contains(o)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),s=i.type===6||i.type===7,o=i.type===2||i.type===3||i.type===4,r=i.type===3,a=this._context.configuration.options.get(110),l=i.type===8||i.type===5,c=i.type===9;let d=e.leftButton||e.middleButton;Lt&&e.leftButton&&e.ctrlKey&&(d=!1);const u=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(s||r&&a))u(),this._mouseDownOperation.start(i.type,e,t);else if(o)e.preventDefault();else if(l){const h=i.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(u(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(u(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class mVe extends G{constructor(e,t,i,s,o,r){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=s,this._createMouseTarget=o,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new eVe(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new pVe(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new TH,this._currentSelection=new Ie(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const s=this._findMousePosition(t,!0);if(!s||!s.position)return;this._mouseState.trySetCount(t.detail,s.position),t.detail=this._mouseState.count;const o=this._context.configuration.options;if(!o.get(92)&&o.get(35)&&!o.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&s.type===6&&s.position&&this._currentSelection.containsPosition(s.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,r=>this._onMouseDownThenMove(r),r=>{const a=this._findMousePosition(this._lastMouseEvent,!1);wh(r)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(s,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,s=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(s.getCurrentScrollTop()-a,0),c=zC.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return io.createOutsideEditor(o,u,"above",a)}const d=s.getLineNumberAtVerticalOffset(l);return io.createOutsideEditor(o,new U(d,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=s.getCurrentScrollTop()+e.relativePos.y,c=zC.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return io.createOutsideEditor(o,u,"below",a)}const d=s.getLineNumberAtVerticalOffset(l);return io.createOutsideEditor(o,new U(d,i.getLineMaxColumn(d)),"below",a)}const r=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return io.createOutsideEditor(o,new U(r,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return io.createOutsideEditor(o,new U(r,i.getLineMaxColumn(r)),"right",a)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const s=this._createMouseTarget(e,t);if(!s.position)return null;if(s.type===8||s.type===5){const r=this._helpPositionJumpOverViewZone(s.detail);if(r)return io.createViewZone(s.type,s.element,s.mouseColumn,r,s.detail)}return s}_helpPositionJumpOverViewZone(e){const t=new U(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,s=e.positionAfter;return i&&s?i.isBefore(t)?i:s:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class pVe extends G{constructor(e,t,i,s){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=s,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new _Ve(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class _Ve extends G{constructor(e,t,i,s,o,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=s,this._position=o,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=zr(je(r.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(146).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed(),i=this._tick(),s=t*(i/1e3)*e,o=this._position.outsidePosition==="above"?-s:s;this._context.viewModel.viewLayout.deltaScrollNow(0,o),this._viewHelper.renderNow();const r=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?r.startLineNumber:r.endLineNumber;let l;{const c=lG(this._viewHelper.viewDomNode),d=this._context.configuration.options.get(146).horizontalScrollbarHeight,u=new bF(this._mouseEvent.pos.x,c.y+c.height-d-.1),h=cG(this._viewHelper.viewDomNode,c,u);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,u,h,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=io.createOutsideEditor(this._position.mouseColumn,new U(a,1),"above",this._position.outsideDistance):l=io.createOutsideEditor(this._position.mouseColumn,new U(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=zr(je(l.element),()=>this._execute())}}const DA=class DA{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>DA.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};DA.CLEAR_MOUSE_DOWN_COUNT_TIME=400;let TH=DA;const Vw=class Vw{constructor(e,t,i,s,o){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=s,this.newlineCountBeforeSelection=o}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),s=e.getSelectionStart(),o=e.getSelectionEnd();let r;if(t){const a=i.substring(0,s),l=t.value.substring(0,t.selectionStart);a===l&&(r=t.newlineCountBeforeSelection)}return new Vw(i,s,o,null,r)}collapseSelection(){return this.selectionStart===this.value.length?this:new Vw(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var s,o,r,a;if(e<=this.selectionStart){const l=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(((s=this.selection)==null?void 0:s.getStartPosition())??null,l,-1)}if(e>=this.selectionEnd){const l=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(((o=this.selection)==null?void 0:o.getEndPosition())??null,l,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf("…")===-1)return this._finishDeduceEditorPosition(((r=this.selection)==null?void 0:r.getStartPosition())??null,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(((a=this.selection)==null?void 0:a.getEndPosition())??null,i,-1)}_finishDeduceEditorPosition(e,t,i){let s=0,o=-1;for(;(o=t.indexOf(`
`,o+1))!==-1;)s++;return[e,i*t.length,s]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const s=Math.min(Um(e.value,t.value),e.selectionStart,t.selectionStart),o=Math.min(o2(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(s,e.value.length-o);const r=t.value.substring(s,t.value.length-o),a=e.selectionStart-s,l=e.selectionEnd-s,c=t.selectionStart-s,d=t.selectionEnd-s;if(c===d){const h=e.selectionStart-s;return{text:r,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}const u=l-a;return{text:r,replacePrevCharCnt:u,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(Um(e.value,t.value),e.selectionEnd),s=Math.min(o2(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(i,e.value.length-s),r=t.value.substring(i,t.value.length-s);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:o.length-a,positionDelta:l-r.length}}};Vw.EMPTY=new Vw("",0,0,null,void 0);let no=Vw;class ww{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,s=i+1,o=i+t;return new D(s,1,o+1,1)}static fromEditorSelection(e,t,i,s){const r=ww._getPageOfLine(t.startLineNumber,i),a=ww._getRangeForPage(r,i),l=ww._getPageOfLine(t.endLineNumber,i),c=ww._getRangeForPage(l,i);let d=a.intersectRanges(new D(1,1,t.startLineNumber,t.startColumn));if(s&&e.getValueLengthInRange(d,1)>500){const v=e.modifyPosition(d.getEndPosition(),-500);d=D.fromPositions(v,d.getEndPosition())}const u=e.getValueInRange(d,1),h=e.getLineCount(),f=e.getLineMaxColumn(h);let m=c.intersectRanges(new D(t.endLineNumber,t.endColumn,h,f));if(s&&e.getValueLengthInRange(m,1)>500){const v=e.modifyPosition(m.getStartPosition(),500);m=D.fromPositions(m.getStartPosition(),v)}const p=e.getValueInRange(m,1);let b;if(r===l||r+1===l)b=e.getValueInRange(t,1);else{const v=a.intersectRanges(t),w=c.intersectRanges(t);b=e.getValueInRange(v,1)+"…"+e.getValueInRange(w,1)}return s&&b.length>2*500&&(b=b.substring(0,500)+"…"+b.substring(b.length-500,b.length)),new no(u+b+p,u.length,u.length+b.length,t,d.endLineNumber-d.startLineNumber)}}var bVe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},eie=function(n,e){return function(t,i){e(t,i,n)}},LM;(function(n){n.Tap="-monaco-textarea-synthetic-tap"})(LM||(LM={}));const RH={forceCopyWithSyntaxHighlighting:!1},TA=class TA{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};TA.INSTANCE=new TA;let gN=TA;class vVe{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let MH=class extends G{get textAreaState(){return this._textAreaState}constructor(e,t,i,s,o,r){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=s,this._accessibilityService=o,this._logService=r,this._onFocus=this._register(new $),this.onFocus=this._onFocus.event,this._onBlur=this._register(new $),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new $),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new $),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new $),this.onCut=this._onCut.event,this._onPaste=this._register(new $),this.onPaste=this._onPaste.event,this._onType=this._register(new $),this.onType=this._onType.event,this._onCompositionStart=this._register(new $),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new $),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new $),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new $),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new es),this._asyncTriggerCut=this._register(new li(()=>this._onCut.fire(),0)),this._textAreaState=no.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(pe.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new li(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new _i(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new _i(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new vVe;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const u=no.readFromTextArea(this._textArea,this._textAreaState),h=no.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(h),this._onCompositionUpdate.fire(l);return}const d=c.handleCompositionUpdate(l.data);this._textAreaState=no.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(d),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const u=no.readFromTextArea(this._textArea,this._textAreaState),h=no.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(h),this._onCompositionEnd.fire();return}const d=c.handleCompositionUpdate(l.data);this._textAreaState=no.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(d),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=no.readFromTextArea(this._textArea,this._textAreaState),d=no.deduceInput(this._textAreaState,c,this._OS===2);d.replacePrevCharCnt===0&&d.text.length===1&&(qn(d.text.charCodeAt(0))||d.text.charCodeAt(0)===127)||(this._textAreaState=c,(d.text!==""||d.replacePrevCharCnt!==0||d.replaceNextCharCnt!==0||d.positionDelta!==0)&&this._onType.fire(d))})),this._register(this._textArea.onCut(l=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,d]=PH.getTextData(l.clipboardData);c&&(d=d||gN.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:d}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new li(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return Q(this._textArea.ownerDocument,"selectionchange",t=>{if($g.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const i=Date.now(),s=i-e;if(e=i,s<5)return;const o=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),o<100||!this._textAreaState.selection)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),u=this._textAreaState.deduceEditorPosition(l),h=this._host.deduceModelPosition(u[0],u[1],u[2]),f=new Ie(d.lineNumber,d.column,h.lineNumber,h.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};gN.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,i),e.preventDefault(),e.clipboardData&&PH.setTextData(e.clipboardData,t.text,t.html,i)}};MH=bVe([eie(4,Yr),eie(5,Os)],MH);const PH={getTextData(n){const e=n.getData(dn.text);let t=null;const i=n.getData("vscode-editor-data");if(typeof i=="string")try{t=JSON.parse(i),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&n.files.length>0?[Array.prototype.slice.call(n.files,0).map(o=>o.name).join(`
`),null]:[e,t]},setTextData(n,e,t,i){n.setData(dn.text,e),typeof t=="string"&&n.setData("text/html",t),n.setData("vscode-editor-data",JSON.stringify(i))}};class wVe extends G{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new It(this._actual,"keydown")).event,this.onKeyUp=this._register(new It(this._actual,"keyup")).event,this.onCompositionStart=this._register(new It(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new It(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new It(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new It(this._actual,"beforeinput")).event,this.onInput=this._register(new It(this._actual,"input")).event,this.onCut=this._register(new It(this._actual,"cut")).event,this.onCopy=this._register(new It(this._actual,"copy")).event,this.onPaste=this._register(new It(this._actual,"paste")).event,this.onFocus=this._register(new It(this._actual,"focus")).event,this.onBlur=this._register(new It(this._actual,"blur")).event,this._onSyntheticTap=this._register(new $),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>$g.onKeyDown())),this._register(this.onBeforeInput(()=>$g.onBeforeInput())),this._register(this.onInput(()=>$g.onInput())),this._register(this.onKeyUp(()=>$g.onKeyUp())),this._register(Q(this._actual,LM.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=mv(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?Ms()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const s=this._actual;let o=null;const r=mv(s);r?o=r.activeElement:o=Ms();const a=je(o),l=o===s,c=s.selectionStart,d=s.selectionEnd;if(l&&c===t&&d===i){ul&&a.parent!==a&&s.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(t,i),ul&&a.parent!==a&&s.focus();return}try{const u=iMe(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(t,i),nMe(s,u)}catch{}}}class yVe extends uG{constructor(e,t,i){super(e,t,i),this._register(qs.addTarget(this.viewHelper.linesContentDomNode)),this._register(Q(this.viewHelper.linesContentDomNode,yi.Tap,o=>this.onTap(o))),this._register(Q(this.viewHelper.linesContentDomNode,yi.Change,o=>this.onChange(o))),this._register(Q(this.viewHelper.linesContentDomNode,yi.Contextmenu,o=>this._onContextMenu(new ep(o,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(Q(this.viewHelper.linesContentDomNode,"pointerdown",o=>{const r=o.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const s=new JHe(this.viewHelper.viewDomNode);this._register(s.onPointerMove(this.viewHelper.viewDomNode,o=>this._onMouseMove(o))),this._register(s.onPointerUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,(o,r)=>this._onMouseDown(o,r)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const i=this._createMouseTarget(new ep(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:i.type===6&&i.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class CVe extends uG{constructor(e,t,i){super(e,t,i),this._register(qs.addTarget(this.viewHelper.linesContentDomNode)),this._register(Q(this.viewHelper.linesContentDomNode,yi.Tap,s=>this.onTap(s))),this._register(Q(this.viewHelper.linesContentDomNode,yi.Change,s=>this.onChange(s))),this._register(Q(this.viewHelper.linesContentDomNode,yi.Contextmenu,s=>this._onContextMenu(new ep(s,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new ep(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(LM.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class SVe extends G{constructor(e,t,i){super(),(rd||GDe&&yue)&&SK.pointerEvents?this.handler=this._register(new yVe(e,t,i)):ui.TouchEvent?this.handler=this._register(new CVe(e,t,i)):this.handler=this._register(new uG(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class i0 extends $I{}const RA=class RA extends i0{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new U(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);const i=e.get(146);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new U(e,1));if(t.column!==1)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){const s=Math.abs(this._lastCursorModelPosition.lineNumber-i);return s===0?'<span class="relative-current-line-number">'+i+"</span>":String(s)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===i||i%10===0)return String(i);const s=this._context.viewModel.getLineCount();return i===s?String(i):""}return String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Mo?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,o=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);o.sort((c,d)=>D.compareRangesUsingEnds(c.range,d.range));let r=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=i;c<=s;c++){const d=c-i;let u=this._getLineRenderLineNumber(c),h="";for(;r<o.length&&o[r].range.endLineNumber<c;)r++;for(let f=r;f<o.length;f++){const{range:m,options:p}=o[f];m.startLineNumber<=c&&(h+=" "+p.lineNumberClassName)}if(!u&&!h){l[d]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(u=""),this._renderFinalNewline==="dimmed"&&(h+=" dimmed-line-number")),c===this._activeLineNumber&&(h+=" active-line-number"),l[d]=`<div class="${RA.CLASS_NAME}${t}${h}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${u}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};RA.CLASS_NAME="line-numbers";let kM=RA;yl((n,e)=>{const t=n.getColor(f7e),i=n.getColor(N7e);i?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});const jw=class jw extends Qr{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=Jt(document.createElement("div")),this._domNode.setClassName(jw.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Jt(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(jw.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}};jw.CLASS_NAME="glyph-margin",jw.OUTER_CLASS_NAME="margin";let NM=jw;const Ny="monaco-mouse-cursor-text";var xVe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},tie=function(n,e){return function(t,i){e(t,i,n)}};class LVe{constructor(e,t,i,s,o){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=s,this.distanceToModelLineEnd=o,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new U(this.modelLineNumber,this.distanceToModelLineStart+1),i=new U(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const _B=ul;let AH=class extends Qr{constructor(e,t,i,s,o){super(e),this._keybindingService=s,this._instantiationService=o,this._primaryCursorPosition=new U(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const r=this._context.configuration.options,a=r.get(146);this._setAccessibilityOptions(r),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=r.get(50),this._lineHeight=r.get(67),this._emptySelectionClipboard=r.get(37),this._copyWithSyntaxHighlighting=r.get(25),this._visibleTextArea=null,this._selections=[new Ie(1,1,1,1)],this._modelSelections=[new Ie(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Jt(document.createElement("textarea")),hd.write(this.textArea,7),this.textArea.setClassName(`inputarea ${Ny}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(r)),this.textArea.setAttribute("aria-required",r.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(r.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",_("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",r.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=Jt(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:h=>this._context.viewModel.getLineMaxColumn(h),getValueInRange:(h,f)=>this._context.viewModel.getValueInRange(h,f),getValueLengthInRange:(h,f)=>this._context.viewModel.getValueLengthInRange(h,f),modifyPosition:(h,f)=>this._context.viewModel.modifyPosition(h,f)},d={getDataToCopy:()=>{const h=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,As),f=this._context.viewModel.model.getEOL(),m=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),p=Array.isArray(h)?h:null,b=Array.isArray(h)?h.join(f):h;let v,w=null;if(RH.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&b.length<65536){const y=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);y&&(v=y.html,w=y.mode)}return{isFromEmptySelection:m,multicursorText:p,text:b,html:v,mode:w}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const h=this._selections[0];if(Lt&&h.isEmpty()){const m=h.getStartPosition();let p=this._getWordBeforePosition(m);if(p.length===0&&(p=this._getCharacterBeforePosition(m)),p.length>0)return new no(p,p.length,p.length,D.fromPositions(m),0)}if(Lt&&!h.isEmpty()&&c.getValueLengthInRange(h,0)<500){const m=c.getValueInRange(h,0);return new no(m,0,m.length,h,0)}if(mf&&!h.isEmpty()){const m="vscode-placeholder";return new no(m,0,m.length,null,void 0)}return no.EMPTY}if(DQ){const h=this._selections[0];if(h.isEmpty()){const f=h.getStartPosition(),[m,p]=this._getAndroidWordAtPosition(f);if(m.length>0)return new no(m,p,p,D.fromPositions(f),0)}return no.EMPTY}return ww.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(h,f,m)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(h,f,m)},u=this._register(new wVe(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(MH,d,u,Mr,{isAndroid:DQ,isChrome:SI,isFirefox:ul,isSafari:mf})),this._register(this._textAreaInput.onKeyDown(h=>{this._viewController.emitKeyDown(h)})),this._register(this._textAreaInput.onKeyUp(h=>{this._viewController.emitKeyUp(h)})),this._register(this._textAreaInput.onPaste(h=>{let f=!1,m=null,p=null;h.metadata&&(f=this._emptySelectionClipboard&&!!h.metadata.isFromEmptySelection,m=typeof h.metadata.multicursorText<"u"?h.metadata.multicursorText:null,p=h.metadata.mode),this._viewController.paste(h.text,f,m,p)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(h=>{h.replacePrevCharCnt||h.replaceNextCharCnt||h.positionDelta?this._viewController.compositionType(h.text,h.replacePrevCharCnt,h.replaceNextCharCnt,h.positionDelta):this._viewController.type(h.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(h=>{this._viewController.setSelection(h)})),this._register(this._textAreaInput.onCompositionStart(h=>{const f=this.textArea.domNode,m=this._modelSelections[0],{distanceToModelLineStart:p,widthOfHiddenTextBefore:b}=(()=>{const w=f.value.substring(0,Math.min(f.selectionStart,f.selectionEnd)),y=w.lastIndexOf(`
`),C=w.substring(y+1),S=C.lastIndexOf("	"),x=C.length-S-1,k=m.getStartPosition(),N=Math.min(k.column-1,x),E=k.column-1-N,B=C.substring(0,C.length-N),{tabSize:A}=this._context.viewModel.model.getOptions(),O=kVe(this.textArea.domNode.ownerDocument,B,this._fontInfo,A);return{distanceToModelLineStart:E,widthOfHiddenTextBefore:O}})(),{distanceToModelLineEnd:v}=(()=>{const w=f.value.substring(Math.max(f.selectionStart,f.selectionEnd)),y=w.indexOf(`
`),C=y===-1?w:w.substring(0,y),S=C.indexOf("	"),x=S===-1?C.length:C.length-S-1,k=m.getEndPosition(),N=Math.min(this._context.viewModel.model.getLineMaxColumn(k.lineNumber)-k.column,x);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(k.lineNumber)-k.column-N}})();this._context.viewModel.revealRange("keyboard",!0,D.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new LVe(this._context,m.startLineNumber,p,b,v),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${Ny} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(h=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${Ny}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(Fx.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(e.lineNumber),s=gl(t,[]);let o=!0,r=e.column,a=!0,l=e.column,c=0;for(;c<50&&(o||a);){if(o&&r<=1&&(o=!1),o){const d=i.charCodeAt(r-2);s.get(d)!==0?o=!1:r--}if(a&&l>i.length&&(a=!1),a){const d=i.charCodeAt(l-1);s.get(d)!==0?a=!1:l++}c++}return[i.substring(r-1,l-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=gl(this._context.configuration.options.get(132),[]);let s=e.column,o=0;for(;s>1;){const r=t.charCodeAt(s-2);if(i.get(r)!==0||o>50)return t.substring(s-1,e.column-1);o++,s--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!qn(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){var i,s,o;if(e.get(2)===1){const r=(i=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))==null?void 0:i.getAriaLabel(),a=(s=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))==null?void 0:s.getAriaLabel(),l=(o=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))==null?void 0:o.getAriaLabel(),c=_("accessibilityModeOff","The editor is not accessible at this time.");return r?_("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",c,r):a?_("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",c,a):l?_("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",c,l):c}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===md.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const s=e.get(146).wrappingColumn;if(s!==-1&&this._accessibilitySupport!==1){const o=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(s*o.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=_B?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:s}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${s*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!Fx.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new U(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)==null||t.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const i=this._visibleTextArea.visibleTextareaStart,s=this._visibleTextArea.visibleTextareaEnd,o=this._visibleTextArea.startPosition,r=this._visibleTextArea.endPosition;if(o&&r&&i&&s&&s.left>=this._scrollLeft&&i.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,d=this._contentLeft+i.left-this._scrollLeft,u=s.left-i.left+1;if(d<this._contentLeft){const v=this._contentLeft-d;d+=v,c+=v,u-=v}u>this._contentWidth&&(u=this._contentWidth);const h=this._context.viewModel.getViewLineData(o.lineNumber),f=h.tokens.findTokenIndexAtOffset(o.column-1),m=h.tokens.findTokenIndexAtOffset(r.column-1),p=f===m,b=this._visibleTextArea.definePresentation(p?h.tokens.getPresentation(f):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:d,width:u,height:this._lineHeight,useCover:!1,color:(nn.getColorMap()||[])[b.foreground],italic:b.italic,bold:b.bold,underline:b.underline,strikethrough:b.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(Lt||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:_B?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;do{if(i=e.indexOf(`
`,i+1),i===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:_B?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;Cs(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?oe.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const s=this._context.configuration.options;s.get(57)?i.setClassName("monaco-editor-background textAreaCover "+NM.OUTER_CLASS_NAME):s.get(68).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+kM.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};AH=xVe([tie(3,ei),tie(4,Ae)],AH);function kVe(n,e,t,i){if(e.length===0)return 0;const s=n.createElement("div");s.style.position="absolute",s.style.top="-50000px",s.style.width="50000px";const o=n.createElement("span");Cs(o,t),o.style.whiteSpace="pre",o.style.tabSize=`${i*t.spaceWidth}px`,o.append(e),s.appendChild(o),n.body.appendChild(s);const r=o.offsetWidth;return s.remove(),r}const NVe=()=>!0,IVe=()=>!1,EVe=n=>n===" "||n==="	";class k0{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}constructor(e,t,i,s){this.languageConfigurationService=s,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const o=i.options,r=o.get(146),a=o.get(50);this.readOnly=o.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(117),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=o.get(129),this.wordSeparators=o.get(132),this.emptySelectionClipboard=o.get(37),this.copyWithSyntaxHighlighting=o.get(25),this.multiCursorMergeOverlapping=o.get(77),this.multiCursorPaste=o.get(79),this.multiCursorLimit=o.get(80),this.autoClosingBrackets=o.get(6),this.autoClosingComments=o.get(7),this.autoClosingQuotes=o.get(11),this.autoClosingDelete=o.get(9),this.autoClosingOvertype=o.get(10),this.autoSurround=o.get(14),this.autoIndent=o.get(12),this.wordSegmenterLocales=o.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const d of l)this.surroundingPairs[d.open]=d.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=(c==null?void 0:c.blockCommentStartToken)??null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)==null?void 0:e.getElectricCharacters();if(t)for(const i of t)this._electricChars[i]=!0}return this._electricChars}onElectricCharacter(e,t,i){const s=x_(t,i-1),o=this.languageConfigurationService.getLanguageConfiguration(s.languageId).electricCharacter;return o?o.onElectricCharacter(e,s,i-s.firstCharOffset):null}normalizeIndentation(e){return Iq(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return EVe;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return NVe;case"never":return IVe}}_getLanguageDefinedShouldAutoClose(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return s=>i.indexOf(s)!==-1}visibleColumnFromColumn(e,t){return Bn.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const s=Bn.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),o=e.getLineMinColumn(t);if(s<o)return o;const r=e.getLineMaxColumn(t);return s>r?r:s}}let jt=class upe{static fromModelState(e){return new DVe(e)}static fromViewState(e){return new TVe(e)}static fromModelSelection(e){const t=Ie.liftSelection(e),i=new ps(D.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return upe.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,s=e.length;i<s;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class DVe{constructor(e){this.modelState=e,this.viewState=null}}class TVe{constructor(e){this.modelState=null,this.viewState=e}}class ps{constructor(e,t,i,s,o){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=s,this.leftoverVisibleColumns=o,this._singleCursorStateBrand=void 0,this.selection=ps._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,s){return e?new ps(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new U(t,i),s):new ps(new D(t,i,t,i),0,s,new U(t,i),s)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?Ie.fromPositions(e.getStartPosition(),t):Ie.fromPositions(e.getEndPosition(),t)}}class ar{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function tp(n){return n==="'"||n==='"'||n==="`"}class d_{static columnSelect(e,t,i,s,o,r){const a=Math.abs(o-i)+1,l=i>o,c=s>r,d=s<r,u=[];for(let h=0;h<a;h++){const f=i+(l?-h:h),m=e.columnFromVisibleColumn(t,f,s),p=e.columnFromVisibleColumn(t,f,r),b=e.visibleColumnFromColumn(t,new U(f,m)),v=e.visibleColumnFromColumn(t,new U(f,p));d&&(b>r||v<s)||c&&(v>s||b<r)||u.push(new ps(new D(f,m,f,m),0,0,new U(f,p),0))}if(u.length===0)for(let h=0;h<a;h++){const f=i+(l?-h:h),m=t.getLineMaxColumn(f);u.push(new ps(new D(f,m,f,m),0,0,new U(f,m),0))}return{viewStates:u,reversed:l,fromLineNumber:i,fromVisualColumn:s,toLineNumber:o,toVisualColumn:r}}static columnSelectLeft(e,t,i){let s=i.toViewVisualColumn;return s>0&&s--,d_.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,s)}static columnSelectRight(e,t,i){let s=0;const o=Math.min(i.fromViewLineNumber,i.toViewLineNumber),r=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=o;l<=r;l++){const c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new U(l,c));s=Math.max(s,d)}let a=i.toViewVisualColumn;return a<s&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,s){const o=s?e.pageSize:1,r=Math.max(1,i.toViewLineNumber-o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}static columnSelectDown(e,t,i,s){const o=s?e.pageSize:1,r=Math.min(t.getLineCount(),i.toViewLineNumber+o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}}class Rs{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Ie.fromPositions(s.getEndPosition())}}class RVe{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Ie.fromRange(s,0)}}class VT{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Ie.fromPositions(s.getStartPosition())}}class IM{constructor(e,t,i,s,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Ie.fromPositions(s.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class hG{constructor(e,t,i,s=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class bB{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class ti{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-Gue(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new U(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const s=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),r=fN.atomicPosition(o,t.column-1,i,0);if(r!==-1&&r+1>=s)return new U(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,i){const s=e.stickyTabStops?ti.leftPositionAtomicSoftTabs(t,i,e.tabSize):ti.leftPosition(t,i);return new bB(s.lineNumber,s.column,0)}static moveLeft(e,t,i,s,o){let r,a;if(i.hasSelection()&&!s)r=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(o-1)),c=t.normalizePosition(ti.clipPositionColumn(l,t),0),d=ti.left(e,t,c);r=d.lineNumber,a=d.column}return i.move(s,r,a,0)}static clipPositionColumn(e,t){return new U(e.lineNumber,ti.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+wK(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new U(t,i)}static rightPositionAtomicSoftTabs(e,t,i,s,o){if(i<e.getLineIndentColumn(t)){const r=e.getLineContent(t),a=fN.atomicPosition(r,i-1,s,1);if(a!==-1)return new U(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const s=e.stickyTabStops?ti.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):ti.rightPosition(t,i.lineNumber,i.column);return new bB(s.lineNumber,s.column,0)}static moveRight(e,t,i,s,o){let r,a;if(i.hasSelection()&&!s)r=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,o-1),c=t.normalizePosition(ti.clipPositionColumn(l,t),1),d=ti.right(e,t,c);r=d.lineNumber,a=d.column}return i.move(s,r,a,0)}static vertical(e,t,i,s,o,r,a,l){const c=Bn.visibleColumnFromColumn(t.getLineContent(i),s,e.tabSize)+o,d=t.getLineCount(),u=i===1&&s===1,h=i===d&&s===t.getLineMaxColumn(i),f=r<i?u:h;if(i=r,i<1?(i=1,a?s=t.getLineMinColumn(i):s=Math.min(t.getLineMaxColumn(i),s)):i>d?(i=d,a?s=t.getLineMaxColumn(i):s=Math.min(t.getLineMaxColumn(i),s)):s=e.columnFromVisibleColumn(t,i,c),f?o=0:o=c-Bn.visibleColumnFromColumn(t.getLineContent(i),s,e.tabSize),l!==void 0){const m=new U(i,s),p=t.normalizePosition(m,l);o=o+(s-p.column),i=p.lineNumber,s=p.column}return new bB(i,s,o)}static down(e,t,i,s,o,r,a){return this.vertical(e,t,i,s,o,i+r,a,4)}static moveDown(e,t,i,s,o){let r,a;i.hasSelection()&&!s?(r=i.selection.endLineNumber,a=i.selection.endColumn):(r=i.position.lineNumber,a=i.position.column);let l=0,c;do if(c=ti.down(e,t,r+l,a,i.leftoverVisibleColumns,o,!0),t.normalizePosition(new U(c.lineNumber,c.column),2).lineNumber>r)break;while(l++<10&&r+l<t.getLineCount());return i.move(s,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,i){const s=i.selection,o=ti.down(e,t,s.selectionStartLineNumber,s.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=ti.down(e,t,s.positionLineNumber,s.positionColumn,i.leftoverVisibleColumns,1,!1);return new ps(new D(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new U(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,i,s,o,r,a){return this.vertical(e,t,i,s,o,i-r,a,3)}static moveUp(e,t,i,s,o){let r,a;i.hasSelection()&&!s?(r=i.selection.startLineNumber,a=i.selection.startColumn):(r=i.position.lineNumber,a=i.position.column);const l=ti.up(e,t,r,a,i.leftoverVisibleColumns,o,!0);return i.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){const s=i.selection,o=ti.up(e,t,s.selectionStartLineNumber,s.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=ti.up(e,t,s.positionLineNumber,s.positionColumn,i.leftoverVisibleColumns,1,!1);return new ps(new D(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new U(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,s){let o=i.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return i.move(s,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,i,s){const o=t.getLineCount();let r=i.position.lineNumber;for(;r<o&&this._isBlankLine(t,r);)r++;for(;r<o&&!this._isBlankLine(t,r);)r++;return i.move(s,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,i,s){const o=i.position.lineNumber,r=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||r;let l;return i.position.column===a?l=r:l=a,i.move(s,o,l,0)}static moveToEndOfLine(e,t,i,s,o){const r=i.position.lineNumber,a=t.getLineMaxColumn(r);return i.move(s,r,a,o?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,s){return i.move(s,1,1,0)}static moveToEndOfBuffer(e,t,i,s){const o=t.getLineCount(),r=t.getLineMaxColumn(o);return i.move(s,o,r,0)}}class kv{static deleteRight(e,t,i,s){const o=[];let r=e!==3;for(let a=0,l=s.length;a<l;a++){const c=s[a];let d=c;if(d.isEmpty()){const u=c.getPosition(),h=ti.right(t,i,u);d=new D(h.lineNumber,h.column,u.lineNumber,u.column)}if(d.isEmpty()){o[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(r=!0),o[a]=new Rs(d,"")}return[r,o]}static isAutoClosingPairDelete(e,t,i,s,o,r,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=r.length;l<c;l++){const d=r[l],u=d.getPosition();if(!d.isEmpty())return!1;const h=o.getLineContent(u.lineNumber);if(u.column<2||u.column>=h.length+1)return!1;const f=h.charAt(u.column-2),m=s.get(f);if(!m)return!1;if(tp(f)){if(i==="never")return!1}else if(t==="never")return!1;const p=h.charAt(u.column-1);let b=!1;for(const v of m)v.open===f&&v.close===p&&(b=!0);if(!b)return!1;if(e==="auto"){let v=!1;for(let w=0,y=a.length;w<y;w++){const C=a[w];if(u.lineNumber===C.startLineNumber&&u.column===C.startColumn){v=!0;break}}if(!v)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const s=[];for(let o=0,r=i.length;o<r;o++){const a=i[o].getPosition(),l=new D(a.lineNumber,a.column-1,a.lineNumber,a.column+1);s[o]=new Rs(l,"")}return[!0,s]}static deleteLeft(e,t,i,s,o){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,s,o))return this._runAutoClosingPairDelete(t,i,s);const r=[];let a=e!==2;for(let l=0,c=s.length;l<c;l++){const d=kv.getDeleteRange(s[l],i,t);if(d.isEmpty()){r[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),r[l]=new Rs(d,"")}return[a,r]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const s=e.getPosition();if(i.useTabStops&&s.column>1){const o=t.getLineContent(s.lineNumber),r=fo(o),a=r===-1?o.length+1:r+1;if(s.column<=a){const l=i.visibleColumnFromColumn(t,s),c=Bn.prevIndentTabStop(l,i.indentSize),d=i.columnFromVisibleColumn(t,s.lineNumber,c);return new D(s.lineNumber,d,s.lineNumber,s.column)}}return D.fromPositions(kv.getPositionAfterDeleteLeft(s,t),s)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=GRe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new U(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){const s=[];let o=null;i.sort((r,a)=>U.compare(r.getStartPosition(),a.getEndPosition()));for(let r=0,a=i.length;r<a;r++){const l=i[r];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let d,u,h,f;c.lineNumber<t.getLineCount()?(d=c.lineNumber,u=1,h=c.lineNumber+1,f=1):c.lineNumber>1&&(o==null?void 0:o.endLineNumber)!==c.lineNumber?(d=c.lineNumber-1,u=t.getLineMaxColumn(c.lineNumber-1),h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,u=1,h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const m=new D(d,u,h,f);o=m,m.isEmpty()?s[r]=null:s[r]=new Rs(m,"")}else s[r]=null;else s[r]=new Rs(l,"")}return new ar(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Qt{static _createWord(e,t,i,s,o){return{start:s,end:o,wordType:t,nextCharClass:i}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,i){const s=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(s,e,i)}static _doFindPreviousWordOnLine(e,t,i){let s=0;const o=t.findPrevIntlWordBeforeOrAtOffset(e,i.column-2);for(let r=i.column-2;r>=0;r--){const a=e.charCodeAt(r),l=t.get(a);if(o&&r===o.index)return this._createIntlWord(o,l);if(l===0){if(s===2)return this._createWord(e,s,l,r+1,this._findEndOfWord(e,t,s,r+1));s=1}else if(l===2){if(s===1)return this._createWord(e,s,l,r+1,this._findEndOfWord(e,t,s,r+1));s=2}else if(l===1&&s!==0)return this._createWord(e,s,l,r+1,this._findEndOfWord(e,t,s,r+1))}return s!==0?this._createWord(e,s,1,0,this._findEndOfWord(e,t,s,0)):null}static _findEndOfWord(e,t,i,s){const o=t.findNextIntlWordAtOrAfterOffset(e,s),r=e.length;for(let a=s;a<r;a++){const l=e.charCodeAt(a),c=t.get(l);if(o&&a===o.index+o.segment.length||c===1||i===1&&c===2||i===2&&c===0)return a}return r}static _findNextWordOnLine(e,t,i){const s=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(s,e,i)}static _doFindNextWordOnLine(e,t,i){let s=0;const o=e.length,r=t.findNextIntlWordAtOrAfterOffset(e,i.column-1);for(let a=i.column-1;a<o;a++){const l=e.charCodeAt(a),c=t.get(l);if(r&&a===r.index)return this._createIntlWord(r,c);if(c===0){if(s===2)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=1}else if(c===2){if(s===1)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=2}else if(c===1&&s!==0)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a)}return s!==0?this._createWord(e,s,1,this._findStartOfWord(e,t,s,o-1),o):null}static _findStartOfWord(e,t,i,s){const o=t.findPrevIntlWordBeforeOrAtOffset(e,s);for(let r=s;r>=0;r--){const a=e.charCodeAt(r),l=t.get(a);if(o&&r===o.index)return r;if(l===1||i===1&&l===2||i===2&&l===0)return r+1}return 0}static moveWordLeft(e,t,i,s,o){let r=i.lineNumber,a=i.column;a===1&&r>1&&(r=r-1,a=t.getLineMaxColumn(r));let l=Qt._findPreviousWordOnLine(e,t,new U(r,a));if(s===0)return new U(r,l?l.start+1:1);if(s===1)return!o&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Qt._findPreviousWordOnLine(e,t,new U(r,l.start+1))),new U(r,l?l.start+1:1);if(s===3){for(;l&&l.wordType===2;)l=Qt._findPreviousWordOnLine(e,t,new U(r,l.start+1));return new U(r,l?l.start+1:1)}return l&&a<=l.end+1&&(l=Qt._findPreviousWordOnLine(e,t,new U(r,l.start+1))),new U(r,l?l.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,s=e.getLineMaxColumn(i);if(t.column===1)return i>1?new U(i-1,e.getLineMaxColumn(i-1)):t;const o=e.getLineContent(i);for(let r=t.column-1;r>1;r--){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a===95&&l!==95)return new U(i,r);if(a===45&&l!==45)return new U(i,r);if((Bg(a)||VE(a))&&Yd(l))return new U(i,r);if(Yd(a)&&Yd(l)&&r+1<s){const c=o.charCodeAt(r);if(Bg(c)||VE(c))return new U(i,r)}}return new U(i,1)}static moveWordRight(e,t,i,s){let o=i.lineNumber,r=i.column,a=!1;r===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,r=1);let l=Qt._findNextWordOnLine(e,t,new U(o,r));if(s===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Qt._findNextWordOnLine(e,t,new U(o,l.end+1))),l?r=l.end+1:r=t.getLineMaxColumn(o);else if(s===3){for(a&&(r=0);l&&(l.wordType===2||l.start+1<=r);)l=Qt._findNextWordOnLine(e,t,new U(o,l.end+1));l?r=l.start+1:r=t.getLineMaxColumn(o)}else l&&!a&&r>=l.start+1&&(l=Qt._findNextWordOnLine(e,t,new U(o,l.end+1))),l?r=l.start+1:r=t.getLineMaxColumn(o);return new U(o,r)}static _moveWordPartRight(e,t){const i=t.lineNumber,s=e.getLineMaxColumn(i);if(t.column===s)return i<e.getLineCount()?new U(i+1,1):t;const o=e.getLineContent(i);for(let r=t.column+1;r<s;r++){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a!==95&&l===95)return new U(i,r);if(a!==45&&l===45)return new U(i,r);if((Bg(a)||VE(a))&&Yd(l))return new U(i,r);if(Yd(a)&&Yd(l)&&r+1<s){const c=o.charCodeAt(r);if(Bg(c)||VE(c))return new U(i,r)}}return new U(i,s)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=t.column-2,o=Xc(i,s);return o+1<s?new D(t.lineNumber,o+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,s=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(kv.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new D(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new U(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(r){const u=this._deleteWordLeftWhitespace(s,a);if(u)return u}let d=Qt._findPreviousWordOnLine(i,s,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=Qt._findPreviousWordOnLine(i,s,new U(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l))),new D(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const s=new U(i.positionLineNumber,i.positionColumn),o=this._deleteInsideWordWhitespace(t,s);return o||this._deleteInsideWordDetermineDeleteRange(e,t,s)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=i.length;if(s===0)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,o))return null;let r=Math.min(t.column-1,s-1);if(!this._charAtIsWhitespace(i,r))return null;for(;o>0&&this._charAtIsWhitespace(i,o-1);)o--;for(;r+1<s&&this._charAtIsWhitespace(i,r+1);)r++;return new D(t.lineNumber,o+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const s=t.getLineContent(i.lineNumber),o=s.length;if(o===0)return i.lineNumber>1?new D(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new D(i.lineNumber,1,i.lineNumber+1,1):new D(i.lineNumber,1,i.lineNumber,1);const r=u=>u.start+1<=i.column&&i.column<=u.end+1,a=(u,h)=>(u=Math.min(u,i.column),h=Math.max(h,i.column),new D(i.lineNumber,u,i.lineNumber,h)),l=u=>{let h=u.start+1,f=u.end+1,m=!1;for(;f-1<o&&this._charAtIsWhitespace(s,f-1);)m=!0,f++;if(!m)for(;h>1&&this._charAtIsWhitespace(s,h-2);)h--;return a(h,f)},c=Qt._findPreviousWordOnLine(e,t,i);if(c&&r(c))return l(c);const d=Qt._findNextWordOnLine(e,t,i);return d&&r(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),s=Qt._moveWordPartLeft(e,i);return new D(i.lineNumber,i.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let s=t;s<i;s++){const o=e.charAt(s);if(o!==" "&&o!=="	")return s}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=t.column-1,o=this._findFirstNonWhitespaceChar(i,s);return s+1<o?new D(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,s=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;const a=new U(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,c=a.column;const d=s.getLineCount(),u=s.getLineMaxColumn(l);if(l===d&&c===u)return null;if(r){const f=this._deleteWordRightWhitespace(s,a);if(f)return f}let h=Qt._findNextWordOnLine(i,s,a);return t===2?h?c=h.end+1:c<u||l===d?c=u:(l++,h=Qt._findNextWordOnLine(i,s,new U(l,1)),h?c=h.start+1:c=s.getLineMaxColumn(l)):(h&&c>=h.start+1&&(h=Qt._findNextWordOnLine(i,s,new U(l,h.end+1))),h?c=h.start+1:c<u||l===d?c=u:(l++,h=Qt._findNextWordOnLine(i,s,new U(l,1)),h?c=h.start+1:c=s.getLineMaxColumn(l))),new D(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),s=Qt._moveWordPartRight(e,i);return new D(i.lineNumber,i.column,s.lineNumber,s.column)}static _createWordAtPosition(e,t,i){const s=new D(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(e,t,i,s){const o=gl(t,i),r=Qt._findPreviousWordOnLine(o,e,s);if(r&&r.wordType===1&&r.start<=s.column-1&&s.column-1<=r.end)return Qt._createWordAtPosition(e,s.lineNumber,r);const a=Qt._findNextWordOnLine(o,e,s);return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?Qt._createWordAtPosition(e,s.lineNumber,a):null}static word(e,t,i,s,o){const r=gl(e.wordSeparators,e.wordSegmenterLocales),a=Qt._findPreviousWordOnLine(r,t,o),l=Qt._findNextWordOnLine(r,t,o);if(!s){let f,m;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(f=a.start+1,m=a.end+1):l&&l.wordType===1&&l.start<=o.column-1&&o.column-1<=l.end?(f=l.start+1,m=l.end+1):(a?f=a.end+1:f=1,l?m=l.start+1:m=t.getLineMaxColumn(o.lineNumber)),new ps(new D(o.lineNumber,f,o.lineNumber,m),1,0,new U(o.lineNumber,m),0)}let c,d;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<o.column-1&&o.column-1<l.end?(c=l.start+1,d=l.end+1):(c=o.column,d=o.column);const u=o.lineNumber;let h;if(i.selectionStart.containsPosition(o))h=i.selectionStart.endColumn;else if(o.isBeforeOrEqual(i.selectionStart.getStartPosition())){h=c;const f=new U(u,h);i.selectionStart.containsPosition(f)&&(h=i.selectionStart.endColumn)}else{h=d;const f=new U(u,h);i.selectionStart.containsPosition(f)&&(h=i.selectionStart.startColumn)}return i.move(!0,u,h,0)}}class wF extends Qt{static deleteWordPartLeft(e){const t=vD([Qt.deleteWordLeft(e,0),Qt.deleteWordLeft(e,2),Qt._deleteWordPartLeft(e.model,e.selection)]);return t.sort(D.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=vD([Qt.deleteWordRight(e,0),Qt.deleteWordRight(e,2),Qt._deleteWordPartRight(e.model,e.selection)]);return t.sort(D.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,i,s){const o=vD([Qt.moveWordLeft(e,t,i,0,s),Qt.moveWordLeft(e,t,i,2,s),Qt._moveWordPartLeft(t,i)]);return o.sort(U.compare),o[2]}static moveWordPartRight(e,t,i){const s=vD([Qt.moveWordRight(e,t,i,0),Qt.moveWordRight(e,t,i,2),Qt._moveWordPartRight(t,i)]);return s.sort(U.compare),s[0]}}function vD(n){return n.filter(e=>!!e)}class ms{static addCursorDown(e,t,i){const s=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];s[o++]=new jt(l.modelState,l.viewState),i?s[o++]=jt.fromModelState(ti.translateDown(e.cursorConfig,e.model,l.modelState)):s[o++]=jt.fromViewState(ti.translateDown(e.cursorConfig,e,l.viewState))}return s}static addCursorUp(e,t,i){const s=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];s[o++]=new jt(l.modelState,l.viewState),i?s[o++]=jt.fromModelState(ti.translateUp(e.cursorConfig,e.model,l.modelState)):s[o++]=jt.fromViewState(ti.translateUp(e.cursorConfig,e,l.viewState))}return s}static moveToBeginningOfLine(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];s[o]=this._moveToLineStart(e,a,i)}return s}static _moveToLineStart(e,t,i){const s=t.viewState.position.column,o=t.modelState.position.column,r=s===o,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!r&&!(s===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return jt.fromViewState(ti.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return jt.fromModelState(ti.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=this._moveToLineEnd(e,l,i,s)}return o}static _moveToLineEnd(e,t,i,s){const o=t.viewState.position,r=e.getLineMaxColumn(o.lineNumber),a=o.column===r,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=r-o.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,i,s):this._moveToLineEndByView(e,t,i,s)}static _moveToLineEndByView(e,t,i,s){return jt.fromViewState(ti.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,s))}static _moveToLineEndByModel(e,t,i,s){return jt.fromModelState(ti.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,s))}static expandLineSelection(e,t){const i=[];for(let s=0,o=t.length;s<o;s++){const r=t[s],a=r.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=r.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),i[s]=jt.fromModelState(new ps(new D(a,1,a,1),0,0,new U(c,d),0))}return i}static moveToBeginningOfBuffer(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];s[o]=jt.fromModelState(ti.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return s}static moveToEndOfBuffer(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];s[o]=jt.fromModelState(ti.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return s}static selectAll(e,t){const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return jt.fromModelState(new ps(new D(1,1,1,1),0,0,new U(i,s),0))}static line(e,t,i,s,o){const r=e.model.validatePosition(s),a=o?e.coordinatesConverter.validateViewPosition(new U(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!i){const c=e.model.getLineCount();let d=r.lineNumber+1,u=1;return d>c&&(d=c,u=e.model.getLineMaxColumn(d)),jt.fromModelState(new ps(new D(r.lineNumber,1,d,u),2,0,new U(d,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<l)return jt.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(r.lineNumber>l){const c=e.getLineCount();let d=a.lineNumber+1,u=1;return d>c&&(d=c,u=e.getLineMaxColumn(d)),jt.fromViewState(t.viewState.move(!0,d,u,0))}else{const c=t.modelState.selectionStart.getEndPosition();return jt.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,i,s){const o=e.model.validatePosition(s);return jt.fromModelState(Qt.word(e.cursorConfig,e.model,t.modelState,i,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new jt(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,s=t.viewState.position.column;return jt.fromViewState(new ps(new D(i,s,i,s),0,0,new U(i,s),0))}static moveTo(e,t,i,s,o){if(i){if(t.modelState.selectionStartKind===1)return this.word(e,t,i,s);if(t.modelState.selectionStartKind===2)return this.line(e,t,i,s,o)}const r=e.model.validatePosition(s),a=o?e.coordinatesConverter.validateViewPosition(new U(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return jt.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,s,o,r){switch(i){case 0:return r===4?this._moveHalfLineLeft(e,t,s):this._moveLeft(e,t,s,o);case 1:return r===4?this._moveHalfLineRight(e,t,s):this._moveRight(e,t,s,o);case 2:return r===2?this._moveUpByViewLines(e,t,s,o):this._moveUpByModelLines(e,t,s,o);case 3:return r===2?this._moveDownByViewLines(e,t,s,o):this._moveDownByModelLines(e,t,s,o);case 4:return r===2?t.map(a=>jt.fromViewState(ti.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>jt.fromModelState(ti.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 5:return r===2?t.map(a=>jt.fromViewState(ti.moveToNextBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>jt.fromModelState(ti.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 6:return this._moveToViewMinColumn(e,t,s);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,s);case 8:return this._moveToViewCenterColumn(e,t,s);case 9:return this._moveToViewMaxColumn(e,t,s);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,s);default:return null}}static viewportMove(e,t,i,s,o){const r=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 14:{const l=[];for(let c=0,d=t.length;c<d;c++){const u=t[c];l[c]=this.findPositionInViewportIfOutside(e,u,r,s)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,s){const o=t.viewState.position.lineNumber;if(i.startLineNumber<=o&&o<=i.endLineNumber-1)return new jt(t.modelState,t.viewState);{let r;o>i.endLineNumber-1?r=i.endLineNumber-1:o<i.startLineNumber?r=i.startLineNumber:r=o;const a=ti.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return jt.fromViewState(t.viewState.move(s,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.min(t.endLineNumber,s+i-1)}static _lastLineNumberInRange(e,t,i){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.max(s,t.endLineNumber-i+1)}static _moveLeft(e,t,i,s){return t.map(o=>jt.fromViewState(ti.moveLeft(e.cursorConfig,e,o.viewState,i,s)))}static _moveHalfLineLeft(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[o]=jt.fromViewState(ti.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return s}static _moveRight(e,t,i,s){return t.map(o=>jt.fromViewState(ti.moveRight(e.cursorConfig,e,o.viewState,i,s)))}static _moveHalfLineRight(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[o]=jt.fromViewState(ti.moveRight(e.cursorConfig,e,a.viewState,i,c))}return s}static _moveDownByViewLines(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=jt.fromViewState(ti.moveDown(e.cursorConfig,e,l.viewState,i,s))}return o}static _moveDownByModelLines(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=jt.fromModelState(ti.moveDown(e.cursorConfig,e.model,l.modelState,i,s))}return o}static _moveUpByViewLines(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=jt.fromViewState(ti.moveUp(e.cursorConfig,e,l.viewState,i,s))}return o}static _moveUpByModelLines(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=jt.fromModelState(ti.moveUp(e.cursorConfig,e.model,l.modelState,i,s))}return o}static _moveToViewPosition(e,t,i,s,o){return jt.fromViewState(t.viewState.move(i,s,o,0))}static _moveToModelPosition(e,t,i,s,o){return jt.fromModelState(t.modelState.move(i,s,o,0))}static _moveToViewMinColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewCenterColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewMaxColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewLastNonWhitespaceColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}}var EM;(function(n){const e=function(i){if(!as(i))return!1;const s=i;return!(!ir(s.to)||!co(s.select)&&!gue(s.select)||!co(s.by)&&!ir(s.by)||!co(s.value)&&!Hm(s.value))};n.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},n.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let s;switch(i.to){case n.RawDirection.Left:s=0;break;case n.RawDirection.Right:s=1;break;case n.RawDirection.Up:s=2;break;case n.RawDirection.Down:s=3;break;case n.RawDirection.PrevBlankLine:s=4;break;case n.RawDirection.NextBlankLine:s=5;break;case n.RawDirection.WrappedLineStart:s=6;break;case n.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case n.RawDirection.WrappedLineColumnCenter:s=8;break;case n.RawDirection.WrappedLineEnd:s=9;break;case n.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case n.RawDirection.ViewPortTop:s=11;break;case n.RawDirection.ViewPortBottom:s=13;break;case n.RawDirection.ViewPortCenter:s=12;break;case n.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let o=0;switch(i.by){case n.RawUnit.Line:o=1;break;case n.RawUnit.WrappedLine:o=2;break;case n.RawUnit.Character:o=3;break;case n.RawUnit.HalfLine:o=4;break}return{direction:s,unit:o,select:!!i.select,value:i.value||1}}n.parse=t})(EM||(EM={}));class fG{constructor(e,t,i){this._indentRulesSupport=t,this._indentationLineProcessor=new hpe(e,i)}shouldIncrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(i)}shouldDecrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(i)}shouldIgnore(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(i)}shouldIndentNextLine(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(i)}}class gG{constructor(e,t){this.model=e,this.indentationLineProcessor=new hpe(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),i=this._getProcessedTokensAfterRange(e),s=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:i,previousLineProcessedTokens:s}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),i=x_(t,e.startColumn-1);let s;if(mG(this.model,e.getStartPosition())){const r=e.startColumn-1-i.firstCharOffset,a=i.firstCharOffset,l=a+r;s=t.sliceAndInflate(a,l,0)}else{const r=e.startColumn-1;s=t.sliceAndInflate(0,r,0)}return this.indentationLineProcessor.getProcessedTokens(s)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const i=this.model.tokenization.getLineTokens(t.lineNumber),s=x_(i,t.column-1),o=t.column-1-s.firstCharOffset,r=s.firstCharOffset+o,a=s.firstCharOffset+s.getLineLength(),l=i.sliceAndInflate(r,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=f=>{this.model.tokenization.forceTokenization(f);const m=this.model.tokenization.getLineTokens(f),p=this.model.getLineMaxColumn(f)-1;return x_(m,p)};this.model.tokenization.forceTokenization(e.startLineNumber);const i=this.model.tokenization.getLineTokens(e.startLineNumber),s=x_(i,e.startColumn-1),o=us.createEmpty("",s.languageIdCodec),r=e.startLineNumber-1;if(r===0||!(s.firstCharOffset===0))return o;const c=t(r);if(!(s.languageId===c.languageId))return o;const u=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(u)}}class hpe{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){var r,a;const i=(l,c)=>{const d=fi(l);return c+l.substring(d.length)};(a=(r=this.model.tokenization).forceTokenization)==null||a.call(r,e);const s=this.model.tokenization.getLineTokens(e);let o=this.getProcessedTokens(s).getLineContent();return t!==void 0&&(o=i(o,t)),o}getProcessedTokens(e){const t=l=>l===2||l===3||l===1,i=e.getLanguageId(0),o=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew.getBracketRegExp({global:!0}),r=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let d=e.getTokenText(l);t(c)&&(d=d.replace(o,""));const u=e.getMetadata(l);r.push({text:d,metadata:u})}),us.createFromTextAndMetadata(r,e.languageIdCodec)}}function mG(n,e){n.tokenization.forceTokenization(e.lineNumber);const t=n.tokenization.getLineTokens(e.lineNumber),i=x_(t,e.column-1),s=i.firstCharOffset===0,o=t.getLanguageId(0)===i.languageId;return!s&&!o}function Iy(n,e,t,i){e.tokenization.forceTokenization(t.startLineNumber);const s=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=i.getLanguageConfiguration(s);if(!o)return null;const a=new gG(e,i).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),d=a.afterRangeProcessedTokens.getLineContent(),u=o.onEnter(n,l,c,d);if(!u)return null;const h=u.indentAction;let f=u.appendText;const m=u.removeText||0;f?h===Dn.Indent&&(f="	"+f):h===Dn.Indent||h===Dn.IndentOutdent?f="	":f="";let p=qhe(e,t.startLineNumber,t.startColumn);return m&&(p=p.substring(0,p.length-m)),{indentAction:h,appendText:f,removeText:m,indentation:p}}var MVe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},PVe=function(n,e){return function(t,i){e(t,i,n)}},jT;const vB=Object.create(null);function Rp(n,e){if(e<=0)return"";vB[n]||(vB[n]=["",n]);const t=vB[n];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+n;return t[e]}let pl=jT=class{static unshiftIndent(e,t,i,s,o){const r=Bn.visibleColumnFromColumn(e,t,i);if(o){const a=Rp(" ",s),c=Bn.prevIndentTabStop(r,s)/s;return Rp(a,c)}else{const a="	",c=Bn.prevRenderTabStop(r,i)/i;return Rp(a,c)}}static shiftIndent(e,t,i,s,o){const r=Bn.visibleColumnFromColumn(e,t,i);if(o){const a=Rp(" ",s),c=Bn.nextIndentTabStop(r,s)/s;return Rp(a,c)}else{const a="	",c=Bn.nextRenderTabStop(r,i)/i;return Rp(a,c)}}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let s=this._selection.endLineNumber;this._selection.endColumn===1&&i!==s&&(s=s-1);const{tabSize:o,indentSize:r,insertSpaces:a}=this._opts,l=i===s;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let u=i;u<=s;u++,c=d){d=0;const h=e.getLineContent(u);let f=fo(h);if(this._opts.isUnshift&&(h.length===0||f===0)||!l&&!this._opts.isUnshift&&h.length===0)continue;if(f===-1&&(f=h.length),u>1&&Bn.visibleColumnFromColumn(h,f+1,o)%r!==0&&e.tokenization.isCheapToTokenize(u-1)){const b=Iy(this._opts.autoIndent,e,new D(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)),this._languageConfigurationService);if(b){if(d=c,b.appendText)for(let v=0,w=b.appendText.length;v<w&&d<r&&b.appendText.charCodeAt(v)===32;v++)d++;b.removeText&&(d=Math.max(0,d-b.removeText));for(let v=0;v<d&&!(f===0||h.charCodeAt(f-1)!==32);v++)f--}}if(this._opts.isUnshift&&f===0)continue;let m;this._opts.isUnshift?m=jT.unshiftIndent(h,f+1,o,r,a):m=jT.shiftIndent(h,f+1,o,r,a),this._addEditOperation(t,new D(u,1,u,f+1),m),u===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?Rp(" ",r):"	";for(let d=i;d<=s;d++){const u=e.getLineContent(d);let h=fo(u);if(!(this._opts.isUnshift&&(u.length===0||h===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(h===-1&&(h=u.length),!(this._opts.isUnshift&&h===0)))if(this._opts.isUnshift){h=Math.min(h,r);for(let f=0;f<h;f++)if(u.charCodeAt(f)===9){h=f+1;break}this._addEditOperation(t,new D(d,1,d,h+1),"")}else this._addEditOperation(t,new D(d,1,d,1),c),d===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const s=t.getInverseEditOperations()[0];return new Ie(s.range.endLineNumber,s.range.endColumn,s.range.endLineNumber,s.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const s=this._selection.startColumn;return i.startColumn<=s?i:i.getDirection()===0?new Ie(i.startLineNumber,s,i.endLineNumber,i.endColumn):new Ie(i.endLineNumber,i.endColumn,i.startLineNumber,s)}return i}};pl=jT=MVe([PVe(2,Yi)],pl);class AVe{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new D(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new D(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const i=t.getInverseEditOperations(),s=i[0].range,o=i[1].range;return new Ie(s.endLineNumber,s.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}}class OVe{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new D(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return new Ie(s.endLineNumber,s.startColumn,s.endLineNumber,s.endColumn-this._charAfter.length)}}function FVe(n,e,t){const i=n.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let s,o=-1;for(s=e-1;s>=1;s--){if(n.tokenization.getLanguageIdAtPosition(s,0)!==i)return o;const r=n.getLineContent(s);if(t.shouldIgnore(s)||/^\s+$/.test(r)||r===""){o=s;continue}return s}}return-1}function mN(n,e,t,i=!0,s){if(n<4)return null;const o=s.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!o)return null;const r=new fG(e,o,s);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=FVe(e,t,r);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(r.shouldIncrease(a)||r.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:fi(l),action:Dn.Indent,line:a}}else if(r.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:fi(l),action:null,line:a}}else{if(a===1)return{indentation:fi(e.getLineContent(a)),action:null,line:a};const l=a-1,c=o.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let d=0;for(let u=l-1;u>0;u--)if(!r.shouldIndentNextLine(u)){d=u;break}return{indentation:fi(e.getLineContent(d+1)),action:null,line:d+1}}if(i)return{indentation:fi(e.getLineContent(a)),action:null,line:a};for(let d=a;d>0;d--){if(r.shouldIncrease(d))return{indentation:fi(e.getLineContent(d)),action:Dn.Indent,line:d};if(r.shouldIndentNextLine(d)){let u=0;for(let h=d-1;h>0;h--)if(!r.shouldIndentNextLine(d)){u=h;break}return{indentation:fi(e.getLineContent(u+1)),action:null,line:u+1}}else if(r.shouldDecrease(d))return{indentation:fi(e.getLineContent(d)),action:null,line:d}}return{indentation:fi(e.getLineContent(1)),action:null,line:1}}}function Qx(n,e,t,i,s,o){if(n<4)return null;const r=o.getLanguageConfiguration(t);if(!r)return null;const a=o.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=new fG(e,a,o),c=mN(n,e,i,void 0,o);if(c){const d=c.line;if(d!==void 0){let u=!0;for(let h=d;h<i-1;h++)if(!/^\s*$/.test(e.getLineContent(h))){u=!1;break}if(u){const h=r.onEnter(n,"",e.getLineContent(d),"");if(h){let f=fi(e.getLineContent(d));return h.removeText&&(f=f.substring(0,f.length-h.removeText)),h.indentAction===Dn.Indent||h.indentAction===Dn.IndentOutdent?f=s.shiftIndent(f):h.indentAction===Dn.Outdent&&(f=s.unshiftIndent(f)),l.shouldDecrease(i)&&(f=s.unshiftIndent(f)),h.appendText&&(f+=h.appendText),fi(f)}}}return l.shouldDecrease(i)?c.action===Dn.Indent?c.indentation:s.unshiftIndent(c.indentation):c.action===Dn.Indent?s.shiftIndent(c.indentation):c.indentation}return null}function BVe(n,e,t,i,s){if(n<4)return null;const o=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),r=s.getLanguageConfiguration(o).indentRulesSupport;if(!r)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new gG(e,s).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,d=l.beforeRangeProcessedTokens,u=fi(d.getLineContent()),h=HVe(e,t.startLineNumber,d),f=mG(e,t.getStartPosition()),m=e.getLineContent(t.startLineNumber),p=fi(m),b=mN(n,h,t.startLineNumber+1,void 0,s);if(!b){const w=f?p:u;return{beforeEnter:w,afterEnter:w}}let v=f?p:b.indentation;return b.action===Dn.Indent&&(v=i.shiftIndent(v)),r.shouldDecrease(c.getLineContent())&&(v=i.unshiftIndent(v)),{beforeEnter:f?p:u,afterEnter:v}}function WVe(n,e,t,i,s,o){const r=n.autoIndent;if(r<4||mG(e,t.getStartPosition()))return null;const l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),c=o.getLanguageConfiguration(l).indentRulesSupport;if(!c)return null;const u=new gG(e,o).getProcessedTokenContextAroundRange(t),h=u.beforeRangeProcessedTokens.getLineContent(),f=u.afterRangeProcessedTokens.getLineContent(),m=h+f,p=h+i+f;if(!c.shouldDecrease(m)&&c.shouldDecrease(p)){const v=mN(r,e,t.startLineNumber,!1,o);if(!v)return null;let w=v.indentation;return v.action!==Dn.Indent&&(w=s.unshiftIndent(w)),w}const b=t.startLineNumber-1;if(b>0){const v=e.getLineContent(b);if(c.shouldIndentNextLine(v)&&c.shouldIncrease(p)){const w=mN(r,e,t.startLineNumber,!1,o),y=w==null?void 0:w.indentation;if(y!==void 0){const C=e.getLineContent(t.startLineNumber),S=fi(C),k=s.shiftIndent(y)===S,N=/^\s*$/.test(m),E=n.autoClosingPairs.autoClosingPairsOpenByEnd.get(i),A=E&&E.length>0&&N;if(k&&A)return y}}}return null}function fpe(n,e,t){const i=t.getLanguageConfiguration(n.getLanguageId()).indentRulesSupport;return!i||e<1||e>n.getLineCount()?null:i.getIndentMetadata(n.getLineContent(e))}function HVe(n,e,t){return{tokenization:{getLineTokens:s=>s===e?t:n.tokenization.getLineTokens(s),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(s,o)=>n.getLanguageIdAtPosition(s,o)},getLineContent:s=>s===e?t.getLineContent():n.getLineContent(s)}}class VVe{static getEdits(e,t,i,s,o){if(!o&&this._isAutoIndentType(e,t,i)){const r=[];for(const l of i){const c=this._findActualIndentationForSelection(e,t,l,s);if(c===null)return;r.push({selection:l,indentation:c})}const a=OH.getAutoClosingPairClose(e,t,i,s,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,r,s,a)}}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let s=0,o=i.length;s<o;s++)if(!t.tokenization.isCheapToTokenize(i[s].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,i,s){const o=WVe(e,t,i,s,{shiftIndent:a=>bG(e,a),unshiftIndent:a=>DM(e,a)},e.languageConfigurationService);if(o===null)return null;const r=qhe(t,i.startLineNumber,i.startColumn);return o===e.normalizeIndentation(r)?null:o}static _getIndentationAndAutoClosingPairEdits(e,t,i,s,o){const r=i.map(({selection:l,indentation:c})=>{if(o!==null){const d=this._getEditFromIndentationAndSelection(e,t,c,l,s,!1);return new QVe(d,l,s,o)}else{const d=this._getEditFromIndentationAndSelection(e,t,c,l,s,!0);return qp(d.range,d.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new ar(4,r,a)}static _getEditFromIndentationAndSelection(e,t,i,s,o,r=!0){const a=s.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a);let c=e.normalizeIndentation(i);if(l!==0){const u=t.getLineContent(a);c+=u.substring(l-1,s.startColumn-1)}return c+=r?o:"",{range:new D(a,1,s.endLineNumber,s.endColumn),text:c}}}class jVe{static getEdits(e,t,i,s,o,r){if(gpe(t,i,s,o,r))return this._runAutoClosingOvertype(e,s,r)}static _runAutoClosingOvertype(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const l=t[o].getPosition(),c=new D(l.lineNumber,l.column,l.lineNumber,l.column+1);s[o]=new Rs(c,i)}return new ar(4,s,{shouldPushStackElementBefore:CF(e,4),shouldPushStackElementAfter:!1})}}class zVe{static getEdits(e,t,i,s,o){if(gpe(e,t,i,s,o)){const r=i.map(a=>new Rs(new D(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new ar(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class OH{static getEdits(e,t,i,s,o,r){if(!r){const a=this.getAutoClosingPairClose(e,t,i,s,o);if(a!==null)return this._runAutoClosingOpenCharType(i,s,o,a)}}static _runAutoClosingOpenCharType(e,t,i,s){const o=[];for(let r=0,a=e.length;r<a;r++){const l=e[r];o[r]=new XVe(l,t,!i,s)}return new ar(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,i,s,o){for(const m of i)if(!m.isEmpty())return null;const r=i.map(m=>{const p=m.getPosition();return o?{lineNumber:p.lineNumber,beforeColumn:p.column-s.length,afterColumn:p.column}:{lineNumber:p.lineNumber,beforeColumn:p.column,afterColumn:p.column}}),a=this._findAutoClosingPairOpen(e,t,r.map(m=>new U(m.lineNumber,m.beforeColumn)),s);if(!a)return null;let l,c;if(tp(s)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const u=this._findContainedAutoClosingPair(e,a),h=u?u.close:"";let f=!0;for(const m of r){const{lineNumber:p,beforeColumn:b,afterColumn:v}=m,w=t.getLineContent(p),y=w.substring(0,b-1),C=w.substring(v-1);if(C.startsWith(h)||(f=!1),C.length>0){const N=C.charAt(0);if(!this._isBeforeClosingBrace(e,C)&&!c(N))return null}if(a.open.length===1&&(s==="'"||s==='"')&&l!=="always"){const N=gl(e.wordSeparators,[]);if(y.length>0){const E=y.charCodeAt(y.length-1);if(N.get(E)===0)return null}}if(!t.tokenization.isCheapToTokenize(p))return null;t.tokenization.forceTokenization(p);const S=t.tokenization.getLineTokens(p),x=x_(S,b-1);if(!a.shouldAutoClose(x,b-x.firstCharOffset))return null;const k=a.findNeutralCharacter();if(k){const N=t.tokenization.getTokenTypeIfInsertingCharacter(p,b,k);if(!a.isOK(N))return null}}return f?a.close.substring(0,a.close.length-h.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),s=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let o=null;for(const r of s)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!o||r.open.length>o.open.length)&&(o=r);return o}static _findAutoClosingPairOpen(e,t,i,s){const o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!o)return null;let r=null;for(const a of o)if(r===null||a.open.length>r.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new D(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+s!==a.open){l=!1;break}l&&(r=a)}return r}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),s=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],r=s.some(l=>t.startsWith(l.open)),a=o.some(l=>t.startsWith(l.close));return!r&&a}}class UVe{static getEdits(e,t,i,s,o){if(!o&&this._isSurroundSelectionType(e,t,i,s))return this._runSurroundSelectionType(e,i,s)}static _runSurroundSelectionType(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=e.surroundingPairs[i];s[o]=new AVe(a,i,l)}return new ar(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,i,s){if(!mpe(e,s)||!e.surroundingPairs.hasOwnProperty(s))return!1;const o=tp(s);for(const r of i){if(r.isEmpty())return!1;let a=!0;for(let l=r.startLineNumber;l<=r.endLineNumber;l++){const c=t.getLineContent(l),d=l===r.startLineNumber?r.startColumn-1:0,u=l===r.endLineNumber?r.endColumn-1:c.length,h=c.substring(d,u);if(/[^ \t]/.test(h)){a=!1;break}}if(a)return!1;if(o&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){const l=t.getValueInRange(r);if(tp(l))return!1}}return!0}}class $Ve{static getEdits(e,t,i,s,o,r){if(!r&&this._isTypeInterceptorElectricChar(t,i,s)){const a=this._typeInterceptorElectricChar(e,t,i,s[0],o);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,s,o){if(!t.electricChars.hasOwnProperty(o)||!s.isEmpty())return null;const r=s.getPosition();i.tokenization.forceTokenization(r.lineNumber);const a=i.tokenization.getLineTokens(r.lineNumber);let l;try{l=t.onElectricCharacter(o,a,r.column)}catch(c){return et(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+o).lastIndexOf(l.matchOpenBracket)+1,d=i.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:r.lineNumber,column:c},500);if(d){if(d.startLineNumber===r.lineNumber)return null;const u=i.getLineContent(d.startLineNumber),h=fi(u),f=t.normalizeIndentation(h),m=i.getLineContent(r.lineNumber),p=i.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,b=m.substring(p-1,r.column-1),v=f+b+o,w=new D(r.lineNumber,1,r.lineNumber,r.column),y=new Rs(w,v);return new ar(_G(v,e),[y],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class KVe{static getEdits(e,t,i){const s=[];for(let r=0,a=t.length;r<a;r++)s[r]=new Rs(t[r],i);const o=_G(i,e);return new ar(o,s,{shouldPushStackElementBefore:CF(e,o),shouldPushStackElementAfter:!1})}}class yF{static getEdits(e,t,i,s,o){if(!o&&s===`
`){const r=[];for(let a=0,l=i.length;a<l;a++)r[a]=this._enter(e,t,!1,i[a]);return new ar(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,i,s){if(e.autoIndent===0)return qp(s,`
`,i);if(!t.tokenization.isCheapToTokenize(s.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(s.startLineNumber),c=fi(l).substring(0,s.startColumn-1);return qp(s,`
`+e.normalizeIndentation(c),i)}const o=Iy(e.autoIndent,t,s,e.languageConfigurationService);if(o){if(o.indentAction===Dn.None)return qp(s,`
`+e.normalizeIndentation(o.indentation+o.appendText),i);if(o.indentAction===Dn.Indent)return qp(s,`
`+e.normalizeIndentation(o.indentation+o.appendText),i);if(o.indentAction===Dn.IndentOutdent){const l=e.normalizeIndentation(o.indentation),c=e.normalizeIndentation(o.indentation+o.appendText),d=`
`+c+`
`+l;return i?new VT(s,d,!0):new IM(s,d,-1,c.length-l.length,!0)}else if(o.indentAction===Dn.Outdent){const l=DM(e,o.indentation);return qp(s,`
`+e.normalizeIndentation(l+o.appendText),i)}}const r=t.getLineContent(s.startLineNumber),a=fi(r).substring(0,s.startColumn-1);if(e.autoIndent>=4){const l=BVe(e.autoIndent,t,s,{unshiftIndent:c=>DM(e,c),shiftIndent:c=>bG(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,s.getEndPosition());const d=s.endColumn,u=t.getLineContent(s.endLineNumber),h=fo(u);if(h>=0?s=s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,h+1)):s=s.setEndPosition(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),i)return new VT(s,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return d<=h+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new IM(s,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return qp(s,`
`+e.normalizeIndentation(a),i)}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];const s=[];for(let o=0,r=i.length;o<r;o++){let a=i[o].positionLineNumber;if(a===1)s[o]=new VT(new D(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);s[o]=this._enter(e,t,!1,new D(a,l,a,l))}}return s}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];const s=[];for(let o=0,r=i.length;o<r;o++){const a=i[o].positionLineNumber,l=t.getLineMaxColumn(a);s[o]=this._enter(e,t,!1,new D(a,l,a,l))}return s}static lineBreakInsert(e,t,i){const s=[];for(let o=0,r=i.length;o<r;o++)s[o]=this._enter(e,t,!0,i[o]);return s}}class qVe{static getEdits(e,t,i,s,o,r){const a=this._distributePasteToCursors(e,i,s,o,r);return a?(i=i.sort(D.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,s,o)}static _distributePasteToCursors(e,t,i,s,o){if(s||t.length===1)return null;if(o&&o.length===t.length)return o;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substring(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substring(0,i.length-1));const r=Bu(i);if(r.length===t.length)return r}return null}static _distributedPaste(e,t,i,s){const o=[];for(let r=0,a=i.length;r<a;r++)o[r]=new Rs(i[r],s[r]);return new ar(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,s,o){const r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],d=c.getPosition();if(o&&!c.isEmpty()&&(o=!1),o&&s.indexOf(`
`)!==s.length-1&&(o=!1),o){const u=new D(d.lineNumber,1,d.lineNumber,1);r[a]=new hG(u,s,c,!0)}else r[a]=new Rs(c,s)}return new ar(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class GVe{static getEdits(e,t,i,s,o,r,a,l){const c=s.map(d=>this._compositionType(i,d,o,r,a,l));return new ar(4,c,{shouldPushStackElementBefore:CF(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,s,o,r){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-s),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),d=new D(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===i&&r===0?null:new IM(d,i,0,r)}}class ZVe{static getEdits(e,t,i){const s=[];for(let r=0,a=t.length;r<a;r++)s[r]=new Rs(t[r],i);const o=_G(i,e);return new ar(o,s,{shouldPushStackElementBefore:CF(e,o),shouldPushStackElementAfter:!1})}}class YVe{static getCommands(e,t,i){const s=[];for(let o=0,r=i.length;o<r;o++){const a=i[o];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const d=e.normalizeIndentation(c);if(!l.startsWith(d)){s[o]=new Rs(new D(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}s[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){s[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}s[o]=new pl(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return s}static _goodIndentForLine(e,t,i){let s=null,o="";const r=mN(e.autoIndent,t,i,!1,e.languageConfigurationService);if(r)s=r.action,o=r.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const d=t.getLineContent(a);if(Xc(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=Iy(e.autoIndent,t,new D(a,l,a,l),e.languageConfigurationService);c&&(o=c.indentation+c.appendText)}return s&&(s===Dn.Indent&&(o=bG(e,o)),s===Dn.Outdent&&(o=DM(e,o)),o=e.normalizeIndentation(o)),o||null}static _replaceJumpToNextIndent(e,t,i,s){let o="";const r=i.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,r),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)o+=" "}else o="	";return new Rs(i,o,s)}}class pG extends IM{constructor(e,t,i,s,o,r){super(e,t,i,s),this._openCharacter=o,this._closeCharacter=r,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,i){return this.closeCharacterRange=new D(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new D(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,i)}}class XVe extends pG{constructor(e,t,i,s){const o=(i?t:"")+s,r=0,a=-s.length;super(e,o,r,a,t,s)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,s,t)}}class QVe extends pG{constructor(e,t,i,s){const o=i+s,r=0,a=i.length;super(t,o,r,a,i,s),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:o}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length!==2)throw new Error("There should be two inverse edit operations!");const s=i[0].range,o=i[1].range,r=s.plusRange(o);return this._computeCursorStateWithRange(e,r,t)}}function _G(n,e){return n===" "?e===5||e===6?6:5:4}function CF(n,e){return nie(n)&&!nie(e)?!0:n===5?!1:iie(n)!==iie(e)}function iie(n){return n===6||n===5?"space":n}function nie(n){return n===4||n===5||n===6}function gpe(n,e,t,i,s){if(n.autoClosingOvertype==="never"||!n.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(!a.isEmpty())return!1;const l=a.getPosition(),c=e.getLineContent(l.lineNumber);if(c.charAt(l.column-1)!==s)return!1;const u=tp(s);if((l.column>2?c.charCodeAt(l.column-2):0)===92&&u)return!1;if(n.autoClosingOvertype==="auto"){let f=!1;for(let m=0,p=i.length;m<p;m++){const b=i[m];if(l.lineNumber===b.startLineNumber&&l.column===b.startColumn){f=!0;break}}if(!f)return!1}}return!0}function qp(n,e,t){return t?new VT(n,e,!0):new Rs(n,e,!0)}function bG(n,e,t){return t=t||1,pl.shiftIndent(e,e.length+t,n.tabSize,n.indentSize,n.insertSpaces)}function DM(n,e,t){return t=t||1,pl.unshiftIndent(e,e.length+t,n.tabSize,n.indentSize,n.insertSpaces)}function mpe(n,e){return tp(e)?n.autoSurround==="quotes"||n.autoSurround==="languageDefined":n.autoSurround==="brackets"||n.autoSurround==="languageDefined"}class pg{static indent(e,t,i){if(t===null||i===null)return[];const s=[];for(let o=0,r=i.length;o<r;o++)s[o]=new pl(i[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static outdent(e,t,i){const s=[];for(let o=0,r=i.length;o<r;o++)s[o]=new pl(i[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static paste(e,t,i,s,o,r){return qVe.getEdits(e,t,i,s,o,r)}static tab(e,t,i){return YVe.getCommands(e,t,i)}static compositionType(e,t,i,s,o,r,a,l){return GVe.getEdits(e,t,i,s,o,r,a,l)}static compositionEndWithInterceptors(e,t,i,s,o,r){if(!s)return null;let a=null;for(const h of s)if(a===null)a=h.insertedText;else if(a!==h.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const h of s)if(h.deletedText.length!==0){c=!0;break}if(c){if(!mpe(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const h=tp(l);for(const p of s)if(p.deletedSelectionStart!==0||p.deletedSelectionEnd!==p.deletedText.length||/^[ \t]+$/.test(p.deletedText)||h&&tp(p.deletedText))return null;const f=[];for(const p of o){if(!p.isEmpty())return null;f.push(p.getPosition())}if(f.length!==s.length)return null;const m=[];for(let p=0,b=f.length;p<b;p++)m.push(new OVe(f[p],s[p].deletedText,t.surroundingPairs[l]));return new ar(4,m,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=zVe.getEdits(t,i,o,r,l);if(d!==void 0)return d;const u=OH.getEdits(t,i,o,l,!0,!1);return u!==void 0?u:null}static typeWithInterceptors(e,t,i,s,o,r,a){const l=yF.getEdits(i,s,o,a,e);if(l!==void 0)return l;const c=VVe.getEdits(i,s,o,a,e);if(c!==void 0)return c;const d=jVe.getEdits(t,i,s,o,r,a);if(d!==void 0)return d;const u=OH.getEdits(i,s,o,a,!1,e);if(u!==void 0)return u;const h=UVe.getEdits(i,s,o,a,e);if(h!==void 0)return h;const f=$Ve.getEdits(t,i,s,o,a,e);return f!==void 0?f:KVe.getEdits(t,o,a)}static typeWithoutInterceptors(e,t,i,s,o){return ZVe.getEdits(e,s,o)}}class JVe{constructor(e,t,i,s,o,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=s,this.insertedSelectionStart=o,this.insertedSelectionEnd=r}}var R;(function(n){n.editorSimpleInput=new we("editorSimpleInput",!1,!0),n.editorTextFocus=new we("editorTextFocus",!1,_("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),n.focus=new we("editorFocus",!1,_("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),n.textInputFocus=new we("textInputFocus",!1,_("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),n.readOnly=new we("editorReadonly",!1,_("editorReadonly","Whether the editor is read-only")),n.inDiffEditor=new we("inDiffEditor",!1,_("inDiffEditor","Whether the context is a diff editor")),n.isEmbeddedDiffEditor=new we("isEmbeddedDiffEditor",!1,_("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),n.inMultiDiffEditor=new we("inMultiDiffEditor",!1,_("inMultiDiffEditor","Whether the context is a multi diff editor")),n.multiDiffEditorAllCollapsed=new we("multiDiffEditorAllCollapsed",void 0,_("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),n.hasChanges=new we("diffEditorHasChanges",!1,_("diffEditorHasChanges","Whether the diff editor has changes")),n.comparingMovedCode=new we("comparingMovedCode",!1,_("comparingMovedCode","Whether a moved code block is selected for comparison")),n.accessibleDiffViewerVisible=new we("accessibleDiffViewerVisible",!1,_("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),n.diffEditorRenderSideBySideInlineBreakpointReached=new we("diffEditorRenderSideBySideInlineBreakpointReached",!1,_("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),n.diffEditorInlineMode=new we("diffEditorInlineMode",!1,_("diffEditorInlineMode","Whether inline mode is active")),n.diffEditorOriginalWritable=new we("diffEditorOriginalWritable",!1,_("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),n.diffEditorModifiedWritable=new we("diffEditorModifiedWritable",!1,_("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),n.diffEditorOriginalUri=new we("diffEditorOriginalUri","",_("diffEditorOriginalUri","The uri of the original document")),n.diffEditorModifiedUri=new we("diffEditorModifiedUri","",_("diffEditorModifiedUri","The uri of the modified document")),n.columnSelection=new we("editorColumnSelection",!1,_("editorColumnSelection","Whether `editor.columnSelection` is enabled")),n.writable=n.readOnly.toNegated(),n.hasNonEmptySelection=new we("editorHasSelection",!1,_("editorHasSelection","Whether the editor has text selected")),n.hasOnlyEmptySelection=n.hasNonEmptySelection.toNegated(),n.hasMultipleSelections=new we("editorHasMultipleSelections",!1,_("editorHasMultipleSelections","Whether the editor has multiple selections")),n.hasSingleSelection=n.hasMultipleSelections.toNegated(),n.tabMovesFocus=new we("editorTabMovesFocus",!1,_("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),n.tabDoesNotMoveFocus=n.tabMovesFocus.toNegated(),n.isInEmbeddedEditor=new we("isInEmbeddedEditor",!1,!0),n.canUndo=new we("canUndo",!1,!0),n.canRedo=new we("canRedo",!1,!0),n.hoverVisible=new we("editorHoverVisible",!1,_("editorHoverVisible","Whether the editor hover is visible")),n.hoverFocused=new we("editorHoverFocused",!1,_("editorHoverFocused","Whether the editor hover is focused")),n.stickyScrollFocused=new we("stickyScrollFocused",!1,_("stickyScrollFocused","Whether the sticky scroll is focused")),n.stickyScrollVisible=new we("stickyScrollVisible",!1,_("stickyScrollVisible","Whether the sticky scroll is visible")),n.standaloneColorPickerVisible=new we("standaloneColorPickerVisible",!1,_("standaloneColorPickerVisible","Whether the standalone color picker is visible")),n.standaloneColorPickerFocused=new we("standaloneColorPickerFocused",!1,_("standaloneColorPickerFocused","Whether the standalone color picker is focused")),n.inCompositeEditor=new we("inCompositeEditor",void 0,_("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),n.notInCompositeEditor=n.inCompositeEditor.toNegated(),n.languageId=new we("editorLangId","",_("editorLangId","The language identifier of the editor")),n.hasCompletionItemProvider=new we("editorHasCompletionItemProvider",!1,_("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),n.hasCodeActionsProvider=new we("editorHasCodeActionsProvider",!1,_("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),n.hasCodeLensProvider=new we("editorHasCodeLensProvider",!1,_("editorHasCodeLensProvider","Whether the editor has a code lens provider")),n.hasDefinitionProvider=new we("editorHasDefinitionProvider",!1,_("editorHasDefinitionProvider","Whether the editor has a definition provider")),n.hasDeclarationProvider=new we("editorHasDeclarationProvider",!1,_("editorHasDeclarationProvider","Whether the editor has a declaration provider")),n.hasImplementationProvider=new we("editorHasImplementationProvider",!1,_("editorHasImplementationProvider","Whether the editor has an implementation provider")),n.hasTypeDefinitionProvider=new we("editorHasTypeDefinitionProvider",!1,_("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),n.hasHoverProvider=new we("editorHasHoverProvider",!1,_("editorHasHoverProvider","Whether the editor has a hover provider")),n.hasDocumentHighlightProvider=new we("editorHasDocumentHighlightProvider",!1,_("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),n.hasDocumentSymbolProvider=new we("editorHasDocumentSymbolProvider",!1,_("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),n.hasReferenceProvider=new we("editorHasReferenceProvider",!1,_("editorHasReferenceProvider","Whether the editor has a reference provider")),n.hasRenameProvider=new we("editorHasRenameProvider",!1,_("editorHasRenameProvider","Whether the editor has a rename provider")),n.hasSignatureHelpProvider=new we("editorHasSignatureHelpProvider",!1,_("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),n.hasInlayHintsProvider=new we("editorHasInlayHintsProvider",!1,_("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),n.hasDocumentFormattingProvider=new we("editorHasDocumentFormattingProvider",!1,_("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),n.hasDocumentSelectionFormattingProvider=new we("editorHasDocumentSelectionFormattingProvider",!1,_("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),n.hasMultipleDocumentFormattingProvider=new we("editorHasMultipleDocumentFormattingProvider",!1,_("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),n.hasMultipleDocumentSelectionFormattingProvider=new we("editorHasMultipleDocumentSelectionFormattingProvider",!1,_("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(R||(R={}));const Xt=0;class ln extends Hn{runEditorCommand(e,t,i){const s=t._getViewModel();s&&this.runCoreEditorCommand(s,i||{})}}var Ns;(function(n){const e=function(i){if(!as(i))return!1;const s=i;return!(!ir(s.to)||!co(s.by)&&!ir(s.by)||!co(s.value)&&!Hm(s.value)||!co(s.revealCursor)&&!gue(s.revealCursor))};n.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},n.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(i){let s;switch(i.to){case n.RawDirection.Up:s=1;break;case n.RawDirection.Right:s=2;break;case n.RawDirection.Down:s=3;break;case n.RawDirection.Left:s=4;break;default:return null}let o;switch(i.by){case n.RawUnit.Line:o=1;break;case n.RawUnit.WrappedLine:o=2;break;case n.RawUnit.Page:o=3;break;case n.RawUnit.HalfPage:o=4;break;case n.RawUnit.Editor:o=5;break;case n.RawUnit.Column:o=6;break;default:o=2}const r=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:s,unit:o,value:r,revealCursor:a,select:!!i.select}}n.parse=t})(Ns||(Ns={}));var yw;(function(n){const e=function(t){if(!as(t))return!1;const i=t;return!(!Hm(i.lineNumber)&&!ir(i.lineNumber)||!co(i.at)&&!ir(i.at))};n.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},n.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(yw||(yw={}));class FH{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const s=t.get(Ut).getFocusedCodeEditor();return s&&s.hasTextFocus()?this._runEditorCommand(t,s,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const s=Ms();return s&&["input","textarea"].indexOf(s.tagName.toLowerCase())>=0?(this.runDOMCommand(s),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const s=t.get(Ut).getActiveCodeEditor();return s?(s.focus(),this._runEditorCommand(t,s,i)):!1})}_runEditorCommand(e,t,i){const s=this.runEditorCommand(e,t,i);return s||!0}}var is;(function(n){class e extends ln{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){if(!y.position)return;w.model.pushStackElement(),w.setCursorStates(y.source,3,[ms.moveTo(w,w.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)])&&y.revealType!==2&&w.revealAllCursors(y.source,!0,!0)}}n.MoveTo=_e(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),n.MoveToSelect=_e(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends ln{runCoreEditorCommand(w,y){w.model.pushStackElement();const C=this._getColumnSelectResult(w,w.getPrimaryCursorState(),w.getCursorColumnSelectData(),y);C!==null&&(w.setCursorStates(y.source,3,C.viewStates.map(S=>jt.fromViewState(S))),w.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:C.fromLineNumber,fromViewVisualColumn:C.fromVisualColumn,toViewLineNumber:C.toLineNumber,toViewVisualColumn:C.toVisualColumn}),C.reversed?w.revealTopMostCursor(y.source):w.revealBottomMostCursor(y.source))}}n.ColumnSelect=_e(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(v,w,y,C){if(typeof C.position>"u"||typeof C.viewPosition>"u"||typeof C.mouseColumn>"u")return null;const S=v.model.validatePosition(C.position),x=v.coordinatesConverter.validateViewPosition(new U(C.viewPosition.lineNumber,C.viewPosition.column),S),k=C.doColumnSelect?y.fromViewLineNumber:x.lineNumber,N=C.doColumnSelect?y.fromViewVisualColumn:C.mouseColumn-1;return d_.columnSelect(v.cursorConfig,v,k,N,x.lineNumber,C.mouseColumn-1)}}),n.CursorColumnSelectLeft=_e(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(v,w,y,C){return d_.columnSelectLeft(v.cursorConfig,v,y)}}),n.CursorColumnSelectRight=_e(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(v,w,y,C){return d_.columnSelectRight(v.cursorConfig,v,y)}});class i extends t{constructor(w){super(w),this._isPaged=w.isPaged}_getColumnSelectResult(w,y,C,S){return d_.columnSelectUp(w.cursorConfig,w,C,this._isPaged)}}n.CursorColumnSelectUp=_e(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:3600,linux:{primary:0}}})),n.CursorColumnSelectPageUp=_e(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends t{constructor(w){super(w),this._isPaged=w.isPaged}_getColumnSelectResult(w,y,C,S){return d_.columnSelectDown(w.cursorConfig,w,C,this._isPaged)}}n.CursorColumnSelectDown=_e(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:3602,linux:{primary:0}}})),n.CursorColumnSelectPageDown=_e(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:3596,linux:{primary:0}}}));class o extends ln{constructor(){super({id:"cursorMove",precondition:void 0,metadata:EM.metadata})}runCoreEditorCommand(w,y){const C=EM.parse(y);C&&this._runCursorMove(w,y.source,C)}_runCursorMove(w,y,C){w.model.pushStackElement(),w.setCursorStates(y,3,o._move(w,w.getCursorStates(),C)),w.revealAllCursors(y,!0)}static _move(w,y,C){const S=C.select,x=C.value;switch(C.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return ms.simpleMove(w,y,C.direction,S,x,C.unit);case 11:case 13:case 12:case 14:return ms.viewportMove(w,y,C.direction,S,x);default:return null}}}n.CursorMoveImpl=o,n.CursorMove=_e(new o);class r extends ln{constructor(w){super(w),this._staticArgs=w.args}runCoreEditorCommand(w,y){let C=this._staticArgs;this._staticArgs.value===-1&&(C={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:y.pageSize||w.cursorConfig.pageSize}),w.model.pushStackElement(),w.setCursorStates(y.source,3,ms.simpleMove(w,w.getCursorStates(),C.direction,C.select,C.value,C.unit)),w.revealAllCursors(y.source,!0)}}n.CursorLeft=_e(new r({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),n.CursorLeftSelect=_e(new r({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:1039}})),n.CursorRight=_e(new r({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),n.CursorRightSelect=_e(new r({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:1041}})),n.CursorUp=_e(new r({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),n.CursorUpSelect=_e(new r({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),n.CursorPageUp=_e(new r({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:11}})),n.CursorPageUpSelect=_e(new r({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:1035}})),n.CursorDown=_e(new r({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),n.CursorDownSelect=_e(new r({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),n.CursorPageDown=_e(new r({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:12}})),n.CursorPageDownSelect=_e(new r({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:1036}})),n.CreateCursor=_e(new class extends ln{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(v,w){if(!w.position)return;let y;w.wholeLine?y=ms.line(v,v.getPrimaryCursorState(),!1,w.position,w.viewPosition):y=ms.moveTo(v,v.getPrimaryCursorState(),!1,w.position,w.viewPosition);const C=v.getCursorStates();if(C.length>1){const S=y.modelState?y.modelState.position:null,x=y.viewState?y.viewState.position:null;for(let k=0,N=C.length;k<N;k++){const E=C[k];if(!(S&&!E.modelState.selection.containsPosition(S))&&!(x&&!E.viewState.selection.containsPosition(x))){C.splice(k,1),v.model.pushStackElement(),v.setCursorStates(w.source,3,C);return}}}C.push(y),v.model.pushStackElement(),v.setCursorStates(w.source,3,C)}}),n.LastCursorMoveToSelect=_e(new class extends ln{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(v,w){if(!w.position)return;const y=v.getLastAddedCursorIndex(),C=v.getCursorStates(),S=C.slice(0);S[y]=ms.moveTo(v,C[y],!0,w.position,w.viewPosition),v.model.pushStackElement(),v.setCursorStates(w.source,3,S)}});class a extends ln{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,ms.moveToBeginningOfLine(w,w.getCursorStates(),this._inSelectionMode)),w.revealAllCursors(y.source,!0)}}n.CursorHome=_e(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),n.CursorHomeSelect=_e(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends ln{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,this._exec(w.getCursorStates())),w.revealAllCursors(y.source,!0)}_exec(w){const y=[];for(let C=0,S=w.length;C<S;C++){const x=w[C],k=x.modelState.position.lineNumber;y[C]=jt.fromModelState(x.modelState.move(this._inSelectionMode,k,1,0))}return y}}n.CursorLineStart=_e(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:0,mac:{primary:287}}})),n.CursorLineStartSelect=_e(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends ln{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,ms.moveToEndOfLine(w,w.getCursorStates(),this._inSelectionMode,y.sticky||!1)),w.revealAllCursors(y.source,!0)}}n.CursorEnd=_e(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Xt,kbExpr:R.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:_("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),n.CursorEndSelect=_e(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Xt,kbExpr:R.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:_("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends ln{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,this._exec(w,w.getCursorStates())),w.revealAllCursors(y.source,!0)}_exec(w,y){const C=[];for(let S=0,x=y.length;S<x;S++){const k=y[S],N=k.modelState.position.lineNumber,E=w.model.getLineMaxColumn(N);C[S]=jt.fromModelState(k.modelState.move(this._inSelectionMode,N,E,0))}return C}}n.CursorLineEnd=_e(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:0,mac:{primary:291}}})),n.CursorLineEndSelect=_e(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends ln{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,ms.moveToBeginningOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealAllCursors(y.source,!0)}}n.CursorTop=_e(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:2062,mac:{primary:2064}}})),n.CursorTopSelect=_e(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:3086,mac:{primary:3088}}}));class h extends ln{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,ms.moveToEndOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealAllCursors(y.source,!0)}}n.CursorBottom=_e(new h({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:2061,mac:{primary:2066}}})),n.CursorBottomSelect=_e(new h({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends ln{constructor(){super({id:"editorScroll",precondition:void 0,metadata:Ns.metadata})}determineScrollMethod(w){const y=[6],C=[1,2,3,4,5,6],S=[4,2],x=[1,3];return y.includes(w.unit)&&S.includes(w.direction)?this._runHorizontalEditorScroll.bind(this):C.includes(w.unit)&&x.includes(w.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(w,y){const C=Ns.parse(y);if(!C)return;const S=this.determineScrollMethod(C);S&&S(w,y.source,C)}_runVerticalEditorScroll(w,y,C){const S=this._computeDesiredScrollTop(w,C);if(C.revealCursor){const x=w.getCompletelyVisibleViewRangeAtScrollTop(S);w.setCursorStates(y,3,[ms.findPositionInViewportIfOutside(w,w.getPrimaryCursorState(),x,C.select)])}w.viewLayout.setScrollPosition({scrollTop:S},0)}_computeDesiredScrollTop(w,y){if(y.unit===1){const x=w.viewLayout.getFutureViewport(),k=w.getCompletelyVisibleViewRangeAtScrollTop(x.top),N=w.coordinatesConverter.convertViewRangeToModelRange(k);let E;y.direction===1?E=Math.max(1,N.startLineNumber-y.value):E=Math.min(w.model.getLineCount(),N.startLineNumber+y.value);const B=w.coordinatesConverter.convertModelPositionToViewPosition(new U(E,1));return w.viewLayout.getVerticalOffsetForLineNumber(B.lineNumber)}if(y.unit===5){let x=0;return y.direction===3&&(x=w.model.getLineCount()-w.cursorConfig.pageSize),w.viewLayout.getVerticalOffsetForLineNumber(x)}let C;y.unit===3?C=w.cursorConfig.pageSize*y.value:y.unit===4?C=Math.round(w.cursorConfig.pageSize/2)*y.value:C=y.value;const S=(y.direction===1?-1:1)*C;return w.viewLayout.getCurrentScrollTop()+S*w.cursorConfig.lineHeight}_runHorizontalEditorScroll(w,y,C){const S=this._computeDesiredScrollLeft(w,C);w.viewLayout.setScrollPosition({scrollLeft:S},0)}_computeDesiredScrollLeft(w,y){const C=(y.direction===4?-1:1)*y.value;return w.viewLayout.getCurrentScrollLeft()+C*w.cursorConfig.typicalHalfwidthCharacterWidth}}n.EditorScrollImpl=f,n.EditorScroll=_e(new f),n.ScrollLineUp=_e(new class extends ln{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(v,w){n.EditorScroll.runCoreEditorCommand(v,{to:Ns.RawDirection.Up,by:Ns.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollPageUp=_e(new class extends ln{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(v,w){n.EditorScroll.runCoreEditorCommand(v,{to:Ns.RawDirection.Up,by:Ns.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollEditorTop=_e(new class extends ln{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus}})}runCoreEditorCommand(v,w){n.EditorScroll.runCoreEditorCommand(v,{to:Ns.RawDirection.Up,by:Ns.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollLineDown=_e(new class extends ln{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(v,w){n.EditorScroll.runCoreEditorCommand(v,{to:Ns.RawDirection.Down,by:Ns.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollPageDown=_e(new class extends ln{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(v,w){n.EditorScroll.runCoreEditorCommand(v,{to:Ns.RawDirection.Down,by:Ns.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollEditorBottom=_e(new class extends ln{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus}})}runCoreEditorCommand(v,w){n.EditorScroll.runCoreEditorCommand(v,{to:Ns.RawDirection.Down,by:Ns.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollLeft=_e(new class extends ln{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus}})}runCoreEditorCommand(v,w){n.EditorScroll.runCoreEditorCommand(v,{to:Ns.RawDirection.Left,by:Ns.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollRight=_e(new class extends ln{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus}})}runCoreEditorCommand(v,w){n.EditorScroll.runCoreEditorCommand(v,{to:Ns.RawDirection.Right,by:Ns.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:w.source})}});class m extends ln{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){y.position&&(w.model.pushStackElement(),w.setCursorStates(y.source,3,[ms.word(w,w.getPrimaryCursorState(),this._inSelectionMode,y.position)]),y.revealType!==2&&w.revealAllCursors(y.source,!0,!0))}}n.WordSelect=_e(new m({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),n.WordSelectDrag=_e(new m({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),n.LastCursorWordSelect=_e(new class extends ln{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(v,w){if(!w.position)return;const y=v.getLastAddedCursorIndex(),C=v.getCursorStates(),S=C.slice(0),x=C[y];S[y]=ms.word(v,x,x.modelState.hasSelection(),w.position),v.model.pushStackElement(),v.setCursorStates(w.source,3,S)}});class p extends ln{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){y.position&&(w.model.pushStackElement(),w.setCursorStates(y.source,3,[ms.line(w,w.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)]),y.revealType!==2&&w.revealAllCursors(y.source,!1,!0))}}n.LineSelect=_e(new p({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),n.LineSelectDrag=_e(new p({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class b extends ln{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){if(!y.position)return;const C=w.getLastAddedCursorIndex(),S=w.getCursorStates(),x=S.slice(0);x[C]=ms.line(w,S[C],this._inSelectionMode,y.position,y.viewPosition),w.model.pushStackElement(),w.setCursorStates(y.source,3,x)}}n.LastCursorLineSelect=_e(new b({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),n.LastCursorLineSelectDrag=_e(new b({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),n.CancelSelection=_e(new class extends ln{constructor(){super({id:"cancelSelection",precondition:R.hasNonEmptySelection,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(v,w){v.model.pushStackElement(),v.setCursorStates(w.source,3,[ms.cancelSelection(v,v.getPrimaryCursorState())]),v.revealAllCursors(w.source,!0)}}),n.RemoveSecondaryCursors=_e(new class extends ln{constructor(){super({id:"removeSecondaryCursors",precondition:R.hasMultipleSelections,kbOpts:{weight:Xt+1,kbExpr:R.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(v,w){v.model.pushStackElement(),v.setCursorStates(w.source,3,[v.getPrimaryCursorState()]),v.revealAllCursors(w.source,!0),Tu(_("removedCursor","Removed secondary cursors"))}}),n.RevealLine=_e(new class extends ln{constructor(){super({id:"revealLine",precondition:void 0,metadata:yw.metadata})}runCoreEditorCommand(v,w){const y=w,C=y.lineNumber||0;let S=typeof C=="number"?C+1:parseInt(C)+1;S<1&&(S=1);const x=v.model.getLineCount();S>x&&(S=x);const k=new D(S,1,S,v.model.getLineMaxColumn(S));let N=0;if(y.at)switch(y.at){case yw.RawAtArgument.Top:N=3;break;case yw.RawAtArgument.Center:N=1;break;case yw.RawAtArgument.Bottom:N=4;break}const E=v.coordinatesConverter.convertModelRangeToViewRange(k);v.revealRange(w.source,!1,E,N,0)}}),n.SelectAll=new class extends FH{constructor(){super(UMe)}runDOMCommand(v){ul&&(v.focus(),v.select()),v.ownerDocument.execCommand("selectAll")}runEditorCommand(v,w,y){const C=w._getViewModel();C&&this.runCoreEditorCommand(C,y)}runCoreEditorCommand(v,w){v.model.pushStackElement(),v.setCursorStates("keyboard",3,[ms.selectAll(v,v.getPrimaryCursorState())])}},n.SetSelection=_e(new class extends ln{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(v,w){w.selection&&(v.model.pushStackElement(),v.setCursorStates(w.source,3,[jt.fromModelSelection(w.selection)]))}})})(is||(is={}));const eje=se.and(R.textInputFocus,R.columnSelection);function V1(n,e){Ao.registerKeybindingRule({id:n,primary:e,when:eje,weight:Xt+1})}V1(is.CursorColumnSelectLeft.id,1039);V1(is.CursorColumnSelectRight.id,1041);V1(is.CursorColumnSelectUp.id,1040);V1(is.CursorColumnSelectPageUp.id,1035);V1(is.CursorColumnSelectDown.id,1042);V1(is.CursorColumnSelectPageDown.id,1036);function sie(n){return n.register(),n}var Ey;(function(n){class e extends Hn{runEditorCommand(i,s,o){const r=s._getViewModel();r&&this.runCoreEditingCommand(s,r,o||{})}}n.CoreEditingCommand=e,n.LineBreakInsert=_e(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:R.writable,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,yF.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection)))}}),n.Outdent=_e(new class extends e{constructor(){super({id:"outdent",precondition:R.writable,kbOpts:{weight:Xt,kbExpr:se.and(R.editorTextFocus,R.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,pg.outdent(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),n.Tab=_e(new class extends e{constructor(){super({id:"tab",precondition:R.writable,kbOpts:{weight:Xt,kbExpr:se.and(R.editorTextFocus,R.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,pg.tab(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),n.DeleteLeft=_e(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,s){const[o,r]=kv.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());o&&t.pushUndoStop(),t.executeCommands(this.id,r),i.setPrevEditOperationType(2)}}),n.DeleteRight=_e(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:Xt,kbExpr:R.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,s){const[o,r]=kv.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));o&&t.pushUndoStop(),t.executeCommands(this.id,r),i.setPrevEditOperationType(3)}}),n.Undo=new class extends FH{constructor(){super(Phe)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,i,s){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().undo()}},n.Redo=new class extends FH{constructor(){super(Ahe)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,i,s){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().redo()}}})(Ey||(Ey={}));class oie extends M4{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){const i=e.get(Ut).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function n0(n,e){sie(new oie("default:"+n,n)),sie(new oie(n,n,e))}n0("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});n0("replacePreviousChar");n0("compositionType");n0("compositionStart");n0("compositionEnd");n0("paste");n0("cut");class tje{constructor(e,t,i,s){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=s}paste(e,t,i,s){this.commandDelegate.paste(e,t,i,s)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,s){this.commandDelegate.compositionType(e,t,i,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){is.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new U(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=Mo&&t.get(108),s=t.get(22);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):s?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){is.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){is.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),is.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),is.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){is.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){is.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){is.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){is.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){is.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){is.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){is.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){is.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){is.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class ppe{constructor(e){this._lineFactory=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Zt("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),s=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>s)return null;let o=0,r=0;for(let l=i;l<=s;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(r===0?(o=c,r=1):r++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(o,r)}onLinesChanged(e,t){const i=e+t-1;if(this.getCount()===0)return!1;const s=this.getStartLineNumber(),o=this.getEndLineNumber();let r=!1;for(let a=e;a<=i;a++)a>=s&&a<=o&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,s=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=s)return this._rendLineNumberStart+=i,null;if(e>o)return null;if(i+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);const r=[];for(let u=0;u<i;u++)r[u]=this._lineFactory.createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),d=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(r).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let s=!1;for(let o=0,r=e.length;o<r;o++){const a=e[o];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let d=l;d<=c;d++){const u=d-this._rendLineNumberStart;this._lines[u].onTokensChanged(),s=!0}}return s}}class _pe{constructor(e){this._lineFactory=e,this.domNode=this._createDomNode(),this._linesCollection=new ppe(this._lineFactory)}_createDomNode(){const e=Jt(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(146)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,s=t.length;i<s;i++){const o=t[i].getDomNode();o==null||o.remove()}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,s=t.length;i<s;i++){const o=t[i].getDomNode();o==null||o.remove()}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new BH(this.domNode.domNode,this._lineFactory,e),s={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=i.render(s,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}const ph=class ph{constructor(e,t,i){this._domNode=e,this._lineFactory=t,this._viewportData=i}render(e,t,i,s){const o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||i<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=i-t+1,o.lines=[];for(let r=t;r<=i;r++)o.lines[r-t]=this._lineFactory.createLine();return this._finishRendering(o,!0,s),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(i-o.rendLineNumberStart,o.linesLength-1),s,t),o.rendLineNumberStart>t){const r=t,a=Math.min(i,o.rendLineNumberStart-1);r<=a&&(this._insertLinesBefore(o,r,a,s,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart<t){const r=Math.min(o.linesLength,t-o.rendLineNumberStart);r>0&&(this._removeLinesBefore(o,r),o.linesLength-=r)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<i){const r=o.rendLineNumberStart+o.linesLength,a=i;r<=a&&(this._insertLinesAfter(o,r,a,s,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart+o.linesLength-1>i){const r=Math.max(0,i-o.rendLineNumberStart+1),l=o.linesLength-1-r+1;l>0&&(this._removeLinesAfter(o,l),o.linesLength-=l)}return this._finishRendering(o,!1,s),o}_renderUntouchedLines(e,t,i,s,o){const r=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=r+l;a[l].layoutLine(c,s[c-o],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,i,s,o){const r=[];let a=0;for(let l=t;l<=i;l++)r[a++]=this._lineFactory.createLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const s=e.lines[i].getDomNode();s==null||s.remove()}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,s,o){const r=[];let a=0;for(let l=t;l<=i;l++)r[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let s=0;s<t;s++){const o=e.lines[i+s].getDomNode();o==null||o.remove()}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,s){ph._ttPolicy&&(i=ph._ttPolicy.createHTML(i));const o=this._domNode.lastChild;t||!o?this._domNode.innerHTML=i:o.insertAdjacentHTML("afterend",i);let r=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];s[a]&&(l.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const s=document.createElement("div");ph._ttPolicy&&(t=ph._ttPolicy.createHTML(t)),s.innerHTML=t;for(let o=0;o<e.linesLength;o++){const r=e.lines[o];if(i[o]){const a=s.firstChild,l=r.getDomNode();l.parentNode.replaceChild(a,l),r.setDomNode(a)}}}_finishRendering(e,t,i){const s=ph._sb,o=e.linesLength,r=e.lines,a=e.rendLineNumberStart,l=[];{s.reset();let c=!1;for(let d=0;d<o;d++){const u=r[d];l[d]=!1,!(u.getDomNode()||!u.renderLine(d+a,i[d],this._viewportData.lineHeight,this._viewportData,s))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,s.build(),l)}{s.reset();let c=!1;const d=[];for(let u=0;u<o;u++){const h=r[u];d[u]=!1,!(l[u]||!h.renderLine(u+a,i[u],this._viewportData.lineHeight,this._viewportData,s))&&(d[u]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,s.build(),d)}}};ph._ttPolicy=Ef("editorViewLayer",{createHTML:e=>e}),ph._sb=new N1(1e5);let BH=ph;class bpe extends Qr{constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new _pe({createLine:()=>new ije(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(50);Cs(this.domNode,i),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._context.configuration.options.get(50);return Cs(this.domNode,i),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,s=t.length;i<s;i++){const o=t[i];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class ije{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Jt(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,i,s,o){let r="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];r+=c.render(s.startLineNumber,e)}return this._renderedContent===r?!1:(this._renderedContent=r,o.appendString('<div style="top:'),o.appendString(String(t)),o.appendString("px;height:"),o.appendString(String(i)),o.appendString('px;">'),o.appendString(r),o.appendString("</div>"),!0)}layoutLine(e,t,i){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(i))}}class nje extends bpe{constructor(e){super(e);const i=this._context.configuration.options.get(146);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class sje extends bpe{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Cs(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;Cs(this.domNode,t.get(50));const i=t.get(146);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class SF{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)==null||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)==null||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)==null||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)==null||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return SF.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(i.type===5||i.type===8)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new U(e.afterLineNumber,1)).lineNumber}}}class oje extends Qr{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=Jt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const i=this._context.configuration.options.get(146),s=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==s&&(this.contentWidth=s,e=!0);const o=i.contentLeft;return this.contentLeft!==o&&(this.contentLeft=o,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const i=e.getDecorationsInViewport();for(const s of i){if(!s.options.blockClassName)continue;let o=this.blocks[t];o||(o=this.blocks[t]=Jt(document.createElement("div")),this.domNode.appendChild(o));let r,a;s.options.blockIsAfterEnd?(r=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0)):(r=e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!0),a=s.range.isEmpty()&&!s.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0));const[l,c,d,u]=s.options.blockPadding??[0,0,0,0];o.setClassName("blockDecorations-block "+s.options.blockClassName),o.setLeft(this.contentLeft-u),o.setWidth(this.contentWidth+u+c),o.setTop(r-e.scrollTop-l),o.setHeight(a-r+l+d),t++}for(let s=t;s<this.blocks.length;s++)this.blocks[s].domNode.remove();this.blocks.length=t}}class rje extends Qr{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Jt(document.createElement("div")),hd.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Jt(document.createElement("div")),hd.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new aje(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,s,o){this._widgets[e.getId()].setPosition(t,i,s,o),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const s=i.domNode.domNode;s.remove(),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class aje{constructor(e,t,i){this._primaryAnchor=new DS(null,null),this._secondaryAnchor=new DS(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=Jt(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,o=s.get(146);this._fixedOverflowWidgets=s.get(42),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=s.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){const i=t.get(146);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){this._affinity=e,this._primaryAnchor=s(t,this._context.viewModel,this._affinity),this._secondaryAnchor=s(i,this._context.viewModel,this._affinity);function s(o,r,a){if(!o)return new DS(null,null);const l=r.model.validatePosition(o);if(r.coordinatesConverter.modelPositionIsVisible(l)){const c=r.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new DS(o,c)}return new DS(o,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(t==null?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,s){this._setPosition(s,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,s){const o=e.top,r=o,a=e.top+e.height,l=s.viewportHeight-a,c=o-i,d=r>=i,u=a,h=l>=i;let f=e.left;return f+t>s.scrollLeft+s.viewportWidth&&(f=s.scrollLeft+s.viewportWidth-t),f<s.scrollLeft&&(f=s.scrollLeft),{fitsAbove:d,aboveTop:c,fitsBelow:h,belowTop:u,left:f}}_layoutHorizontalSegmentInPage(e,t,i,s){const a=Math.max(15,t.left-s),l=Math.min(t.left+t.width+s,e.width-15),d=this._viewDomNode.domNode.ownerDocument.defaultView;let u=t.left+i-((d==null?void 0:d.scrollX)??0);if(u+s>l){const h=u-(l-s);u-=h,i-=h}if(u<a){const h=u-a;u-=h,i-=h}return[i,u]}_layoutBoxInPage(e,t,i,s){const o=e.top-i,r=e.top+e.height,a=un(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,c=l.defaultView,d=a.top+o-((c==null?void 0:c.scrollY)??0),u=a.top+r-((c==null?void 0:c.scrollY)??0),h=qm(l.body),[f,m]=this._layoutHorizontalSegmentInPage(h,a,e.left-s.scrollLeft+this._contentLeft,t),p=22,b=22,v=d>=p,w=u+i<=h.height-b;return this._fixedOverflowWidgets?{fitsAbove:v,aboveTop:Math.max(d,p),fitsBelow:w,belowTop:u,left:m}:{fitsAbove:v,aboveTop:o,fitsBelow:w,belowTop:r,left:f}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new TS(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var r,a;const t=o(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),i=((r=this._secondaryAnchor.viewPosition)==null?void 0:r.lineNumber)===((a=this._primaryAnchor.viewPosition)==null?void 0:a.lineNumber)?this._secondaryAnchor.viewPosition:null,s=o(i,this._affinity,this._lineHeight);return{primary:t,secondary:s};function o(l,c,d){if(!l)return null;const u=e.visibleRangeForPosition(l);if(!u)return null;const h=l.column===1&&c===3?0:u.left,f=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new rie(f,h,d)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;const s=this._context.configuration.options.get(50);let o=t.left;return o<e.left?o=Math.max(o,e.left-i+s.typicalFullwidthCharacterWidth):o=Math.min(o,e.left+i-s.typicalFullwidthCharacterWidth),new rie(e.top,o,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=wB(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeOffsetWidth=r.width,this._cachedDomNodeOffsetHeight=r.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const s=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let o;this.allowEditorOverflow?o=this._layoutBoxInPage(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):o=this._layoutBoxInViewport(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let r=1;r<=2;r++)for(const a of this._preference)if(a===1){if(!o)return null;if(r===2||o.fitsAbove)return{kind:"inViewport",coordinate:new TS(o.aboveTop,o.left),position:1}}else if(a===2){if(!o)return null;if(r===2||o.fitsBelow)return{kind:"inViewport",coordinate:new TS(o.belowTop,o.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new TS(s.top,s.left)),position:0}:{kind:"inViewport",coordinate:new TS(s.top,s.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){var t;if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,((t=this._renderData)==null?void 0:t.kind)==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&wB(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&wB(this._actual.afterRender,this._actual,this._renderData.position)}}class DS{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class TS{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class rie{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function wB(n,e,...t){try{return n.call(e,...t)}catch{return null}}class vpe extends i0{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(146);this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Ie(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const o of this._selections)t.add(o.positionLineNumber);const i=Array.from(t);i.sort((o,r)=>o-r),Vi(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const s=this._selections.every(o=>o.isEmpty());return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=[];for(let r=t;r<=i;r++){const a=r-t;s[a]=""}if(this._wordWrap){const r=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new U(a,1)).lineNumber,d=l.convertModelPositionToViewPosition(new U(c,1)).lineNumber,u=l.convertModelPositionToViewPosition(new U(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,h=Math.max(d,t),f=Math.min(u,i);for(let m=h;m<=f;m++){const p=m-t;s[p]=r}}}const o=this._renderOne(e,!0);for(const r of this._cursorLineNumbers){if(r<t||r>i)continue;const a=r-t;s[a]=o}this._renderData=s}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class lje extends vpe{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class cje extends vpe{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}yl((n,e)=>{const t=n.getColor(Tge);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||n.defines(qee)){const i=n.getColor(qee);i&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),Qc(n.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class dje extends i0{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],s=0;for(let l=0,c=t.length;l<c;l++){const d=t[l];d.options.className&&(i[s++]=d)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const d=l.options.className,u=c.options.className;return d<u?-1:d>u?1:D.compareRangesUsingStarts(l.range,c.range)});const o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,a=[];for(let l=o;l<=r;l++){const c=l-o;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let r=0,a=t.length;r<a;r++){const l=t[r];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',d=Math.max(l.range.startLineNumber,s),u=Math.min(l.range.endLineNumber,o);for(let h=d;h<=u;h++){const f=h-s;i[f]+=c}}}_renderNormalDecorations(e,t,i){const s=e.visibleRange.startLineNumber;let o=null,r=!1,a=null,l=!1;for(let c=0,d=t.length;c<d;c++){const u=t[c];if(u.options.isWholeLine)continue;const h=u.options.className,f=!!u.options.showIfCollapsed;let m=u.range;if(f&&m.endColumn===1&&m.endLineNumber!==m.startLineNumber&&(m=new D(m.startLineNumber,m.startColumn,m.endLineNumber-1,this._context.viewModel.getLineMaxColumn(m.endLineNumber-1))),o===h&&r===f&&D.areIntersectingOrTouching(a,m)){a=D.plusRange(a,m);continue}o!==null&&this._renderNormalDecoration(e,a,o,l,r,s,i),o=h,r=f,a=m,l=u.options.shouldFillLineOnLineBreak??!1}o!==null&&this._renderNormalDecoration(e,a,o,l,r,s,i)}_renderNormalDecoration(e,t,i,s,o,r,a){const l=e.linesVisibleRangesForRange(t,i==="findMatch");if(l)for(let c=0,d=l.length;c<d;c++){const u=l[c];if(u.outsideRenderedLine)continue;const h=u.lineNumber-r;if(o&&u.ranges.length===1){const f=u.ranges[0];if(f.width<this._typicalHalfwidthCharacterWidth){const m=Math.round(f.left+f.width/2),p=Math.max(0,Math.round(m-this._typicalHalfwidthCharacterWidth/2));u.ranges[0]=new vF(p,this._typicalHalfwidthCharacterWidth)}}for(let f=0,m=u.ranges.length;f<m;f++){const p=s&&u.continuesOnNextLine&&m===1,b=u.ranges[f],v='<div class="cdr '+i+'" style="left:'+String(b.left)+"px;width:"+(p?"100%;":String(b.width)+"px;")+'"></div>';a[h]+=v}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class uje extends Qr{constructor(e,t,i,s){super(e);const o=this._context.configuration.options,r=o.get(104),a=o.get(75),l=o.get(40),c=o.get(107),d={listenOnDomNode:i.domNode,className:"editor-scrollable "+yW(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new q4(t.domNode,d,this._context.viewLayout.getScrollable())),hd.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=Jt(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(h,f,m)=>{const p={};{const b=h.scrollTop;b&&(p.scrollTop=this._context.viewLayout.getCurrentScrollTop()+b,h.scrollTop=0)}if(m){const b=h.scrollLeft;b&&(p.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+b,h.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(p,1)};this._register(Q(i.domNode,"scroll",h=>u(i.domNode,!0,!0))),this._register(Q(t.domNode,"scroll",h=>u(t.domNode,!0,!1))),this._register(Q(s.domNode,"scroll",h=>u(s.domNode,!0,!1))),this._register(Q(this.scrollbarDomNode.domNode,"scroll",h=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(73).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){const t=this._context.configuration.options,i=t.get(104),s=t.get(75),o=t.get(40),r=t.get(107),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:o,scrollPredominantAxis:r};this.scrollbar.updateOptions(a)}return e.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+yW(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class WH{constructor(e,t,i,s,o){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=s,this._decorationToRenderBrand=void 0,this.zIndex=o??0}}class hje{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}}class fje{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class wpe extends i0{_render(e,t,i){const s=[];for(let a=e;a<=t;a++){const l=a-e;s[l]=new fje}if(i.length===0)return s;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let o=null,r=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],d=c.className,u=c.zIndex;let h=Math.max(c.startLineNumber,e)-e;const f=Math.min(c.endLineNumber,t)-e;o===d?(h=Math.max(r+1,h),r=Math.max(r,f)):(o=d,r=f);for(let m=h;m<=r;m++)s[m].add(new hje(d,u,c.tooltip))}return s}}class gje extends Qr{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,i=t.get(146);this.domNode=Jt(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=Jt(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&D.equalsRange(i.preference.range,t.range)?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var r;const i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,o=e.getDecorationsInViewport();for(const a of o){const l=a.options.glyphMarginClassName;if(!l)continue;const c=Math.max(a.range.startLineNumber,i),d=Math.min(a.range.endLineNumber,s),u=((r=a.options.glyphMargin)==null?void 0:r.position)??Jl.Center,h=a.options.zIndex??0;for(let f=c;f<=d;f++){const m=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new U(f,0)),p=this._context.viewModel.glyphLanes.getLanesAtLine(m.lineNumber).indexOf(u);t.push(new mje(f,p,h,l))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(const o of Object.values(this._widgets)){const r=o.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(D.lift(r));if(!a||!l||l<i||a>s)continue;const c=Math.max(a,i),d=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new U(c,0)),u=this._context.viewModel.glyphLanes.getLanesAtLine(d.lineNumber).indexOf(o.preference.lane);t.push(new pje(c,u,o.preference.zIndex,o))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((i,s)=>i.lineNumber===s.lineNumber?i.laneIndex===s.laneIndex?i.zIndex===s.zIndex?s.type===i.type?i.type===0&&s.type===0?i.className<s.className?-1:1:0:s.type-i.type:s.zIndex-i.zIndex:i.laneIndex-s.laneIndex:i.lineNumber-s.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const s of Object.values(this._widgets))s.renderInfo=null;const t=new gf(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){const s=t.peek();if(!s)break;const o=t.takeWhile(a=>a.lineNumber===s.lineNumber&&a.laneIndex===s.laneIndex);if(!o||o.length===0)break;const r=o[0];if(r.type===0){const a=[];for(const l of o){if(l.zIndex!==r.zIndex||l.type!==r.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}i.push(r.accept(a.join(" ")))}else r.widget.renderInfo={lineNumber:r.lineNumber,laneIndex:r.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(const i of Object.values(this._widgets))i.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const i of Object.values(this._widgets))if(!i.renderInfo)i.domNode.setDisplay("none");else{const s=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(s),i.domNode.setLeft(o),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}for(let i=0;i<this._decorationGlyphsToRender.length;i++){const s=this._decorationGlyphsToRender[i],o=e.viewportData.relativeVerticalOffset[s.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+s.laneIndex*this._lineHeight;let a;i<this._managedDomNodes.length?a=this._managedDomNodes[i]:(a=Jt(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+s.combinedClassName),a.setPosition("absolute"),a.setTop(o),a.setLeft(r),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}}}class mje{constructor(e,t,i,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=s,this.type=0}accept(e){return new _je(this.lineNumber,this.laneIndex,e)}}class pje{constructor(e,t,i,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=s,this.type=1}}class _je{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}}class bje extends i0{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(147),s=t.get(50);this._spaceWidth=s.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(147),s=t.get(50);return this._spaceWidth=s.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var s;const i=e.selections[0].getPosition();return(s=this._primaryPosition)!=null&&s.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var l,c;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=e.scrollWidth,o=this._primaryPosition,r=this.getGuidesByLine(t,Math.min(i+1,this._context.viewModel.getLineCount()),o),a=[];for(let d=t;d<=i;d++){const u=d-t,h=r[u];let f="";const m=((l=e.visibleRangeForPosition(new U(d,1)))==null?void 0:l.left)??0;for(const p of h){const b=p.column===-1?m+(p.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new U(d,p.column)).left;if(b>s||this._maxIndentLeft>0&&b>this._maxIndentLeft)break;const v=p.horizontalLine?p.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",w=p.horizontalLine?(((c=e.visibleRangeForPosition(new U(d,p.horizontalLine.endColumn)))==null?void 0:c.left)??b+this._spaceWidth)-b:this._spaceWidth;f+=`<div class="core-guide ${p.className} ${v}" style="left:${b}px;width:${w}px"></div>`}a[u]=f}this._renderResult=a}getGuidesByLine(e,t,i){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?G_.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?G_.EnabledForActive:G_.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,o=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){const u=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);r=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let u=e;u<=t;u++){const h=new Array;d.push(h);const f=s?s[u-e]:[],m=new gf(f),p=o?o[u-e]:0;for(let b=1;b<=p;b++){const v=(b-1)*c+1,w=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&r<=u&&u<=a&&b===l;h.push(...m.takeWhile(C=>C.visibleColumn<v)||[]);const y=m.peek();(!y||y.visibleColumn!==v||y.horizontalLine)&&h.push(new k_(v,-1,`core-guide-indent lvl-${(b-1)%30}`+(w?" indent-active":""),null,-1,-1))}h.push(...m.takeWhile(b=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function N0(n){if(!(n&&n.isTransparent()))return n}yl((n,e)=>{const t=[{bracketColor:Age,guideColor:F7e,guideColorActive:z7e},{bracketColor:Oge,guideColor:B7e,guideColorActive:U7e},{bracketColor:Fge,guideColor:W7e,guideColorActive:$7e},{bracketColor:Bge,guideColor:H7e,guideColorActive:K7e},{bracketColor:Wge,guideColor:V7e,guideColorActive:q7e},{bracketColor:Hge,guideColor:j7e,guideColorActive:G7e}],i=new Xge,s=[{indentColor:HI,indentColorActive:VI},{indentColor:p7e,indentColorActive:y7e},{indentColor:_7e,indentColorActive:C7e},{indentColor:b7e,indentColorActive:S7e},{indentColor:v7e,indentColorActive:x7e},{indentColor:w7e,indentColorActive:L7e}],o=t.map(a=>{const l=n.getColor(a.bracketColor),c=n.getColor(a.guideColor),d=n.getColor(a.guideColorActive),u=N0(N0(c)??(l==null?void 0:l.transparent(.3))),h=N0(N0(d)??l);if(!(!u||!h))return{guideColor:u,guideColorActive:h}}).filter(mu),r=s.map(a=>{const l=n.getColor(a.indentColor),c=n.getColor(a.indentColorActive),d=N0(l),u=N0(c);if(!(!d||!u))return{indentColor:d,indentColorActive:u}}).filter(mu);if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${i.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${i.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${i.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class yB{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class vje{constructor(){this._currentVisibleRange=new D(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class wje{constructor(e,t,i,s,o,r,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=s,this.startScrollTop=o,this.stopScrollTop=r,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class yje{constructor(e,t,i,s,o){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=s,this.scrollType=o,this.type="selections";let r=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const d=t[l];r=Math.min(r,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=a}}const MA=class MA extends Qr{constructor(e,t){super(e);const i=this._context.configuration,s=this._context.configuration.options,o=s.get(50),r=s.get(147);this._lineHeight=s.get(67),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=s.get(101),this._cursorSurroundingLines=s.get(29),this._cursorSurroundingLinesStyle=s.get(30),this._canUseLayerHinting=!s.get(32),this._viewLineOptions=new Qte(i,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new _pe({createLine:()=>new Dh(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,hd.write(this.domNode,8),this.domNode.setClassName(`view-lines ${Ny}`),Cs(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new li(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new li(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new vje,this._horizontalRevealRequest=null,this._stickyScrollEnabled=s.get(116).enabled,this._maxNumberStickyLines=s.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(50),s=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,Cs(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new Qte(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=i;o<=s;o++)this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let s=!1;for(let o=t;o<=i;o++)s=this._visibleLines.getVisibleLine(o).onSelectionChanged()||s;return s}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new wje(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new yje(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const s=this._getLineNumberFor(i);if(s===-1||s<1||s>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(s)===1)return new U(s,1);const o=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(s<o||s>r)return null;let a=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(s);return a<l&&(a=l),new U(s,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Dh.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++){const o=this._visibleLines.getVisibleLine(s);if(e===o.getDomNode())return s}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;const s=new yB(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getWidth(s);return this._updateLineWidthsSlowIfDomDidLayout(s),o}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,s=D.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;const o=[];let r=0;const a=new yB(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new U(s.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let u=s.startLineNumber;u<=s.endLineNumber;u++){if(u<c||u>d)continue;const h=u===s.startLineNumber?s.startColumn:1,f=u!==s.endLineNumber,m=f?this._context.viewModel.getLineMaxColumn(u):s.endColumn,p=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,h,m,a);if(p){if(t&&u<i){const b=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new U(u+1,1)).lineNumber,b!==l&&(p.ranges[p.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[r++]=new oVe(p.outsideRenderedLine,u,vF.from(p.ranges),f)}}return this._updateLineWidthsSlowIfDomDidLayout(a),r===0?null:o}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const s=new yB(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,s);return this._updateLineWidthsSlowIfDomDidLayout(s),o}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new rVe(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let s=1,o=!0;for(let r=t;r<=i;r++){const a=this._visibleLines.getVisibleLine(r);if(e&&!a.getWidthIsFast()){o=!1;continue}s=Math.max(s,a.getWidth(null))}return o&&t===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=i;o<=s;o++){const r=this._visibleLines.getVisibleLine(o);if(r.needsMonospaceFontCheck()){const a=r.getWidth(null);a>t&&(t=a,e=o)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let o=i;o<=s;o++)this._visibleLines.getVisibleLine(o).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const s=this._computeScrollLeftToReveal(i);s&&(this._isViewportWrapping||this._ensureMaxLineWidth(s.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:s.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),Mo&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=i;o<=s;o++)if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,s,o,r){const a=e.top,l=e.height,c=a+l;let d,u,h;if(o&&o.length>0){let v=o[0].startLineNumber,w=o[0].endLineNumber;for(let y=1,C=o.length;y<C;y++){const S=o[y];v=Math.min(v,S.startLineNumber),w=Math.max(w,S.endLineNumber)}d=!1,u=this._context.viewLayout.getVerticalOffsetForLineNumber(v),h=this._context.viewLayout.getVerticalOffsetForLineNumber(w)+this._lineHeight}else if(s)d=!0,u=this._context.viewLayout.getVerticalOffsetForLineNumber(s.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(s.endLineNumber)+this._lineHeight;else return-1;const f=(t==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default";let m=0,p=0;if(f)i||(m=this._lineHeight);else{const v=l/this._lineHeight,w=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),y=Math.min(v/2,w);m=y*this._lineHeight,p=Math.max(0,y-1)*this._lineHeight}i||(r===0||r===4)&&(p+=this._lineHeight),u-=m,h+=p;let b;if(h-u>l){if(!d)return-1;b=u}else if(r===5||r===6)if(r===6&&a<=u&&h<=c)b=a;else{const v=Math.max(5*this._lineHeight,l*.2),w=u-v,y=h-l;b=Math.max(y,w)}else if(r===1||r===2)if(r===2&&a<=u&&h<=c)b=a;else{const v=(u+h)/2;b=Math.max(0,v-l/2)}else b=this._computeMinimumScrolling(a,c,u,h,r===3,r===4);return b}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(146),s=t.left,o=s+t.width-i.verticalScrollbarWidth;let r=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const d of c.ranges)r=Math.min(r,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const d=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!d)return null;for(const u of d.ranges)r=Math.min(r,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}return e.minimalReveal||(r=Math.max(0,r-MA.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(s,o,r,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,i,s,o,r){e=e|0,t=t|0,i=i|0,s=s|0,o=!!o,r=!!r;const a=t-e;if(s-i<a){if(o)return i;if(r)return Math.max(0,s-a);if(i<e)return i;if(s>t)return Math.max(0,s-a)}else return i;return e}};MA.HORIZONTAL_EXTRA_PX=30;let HH=MA;class Cje extends wpe{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(146);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let s=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(i[s++]=new WH(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,c));const d=a.options.firstLineDecorationClassName;d&&(i[s++]=new WH(a.range.startLineNumber,a.range.startLineNumber,d,a.options.linesDecorationsTooltip??null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),o=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),a='" style="left:'+o+"px;width:"+r+'px;"></div>',l=[];for(let c=t;c<=i;c++){const d=c-t,u=s[d].getDecorations();let h="";for(const f of u){let m='<div class="cldr '+f.className;f.tooltip!==null&&(m+='" title="'+f.tooltip),m+=a,h+=m}l[d]=h}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Sje extends wpe{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let s=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.marginClassName,c=a.options.zIndex;l&&(i[s++]=new WH(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),o=[];for(let r=t;r<=i;r++){const a=r-t,l=s[a].getDecorations();let c="";for(const d of l)c+='<div class="cmdr '+d.className+'" style=""></div>';o[a]=c}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}const sg=class sg{constructor(e,t,i,s){this._rgba8Brand=void 0,this.r=sg._clamp(e),this.g=sg._clamp(t),this.b=sg._clamp(i),this.a=sg._clamp(s)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};sg.Empty=new sg(0,0,0,0);let Qh=sg;const PA=class PA extends G{static getInstance(){return this._INSTANCE||(this._INSTANCE=new PA),this._INSTANCE}constructor(){super(),this._onDidChange=new $,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(nn.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=nn.getColorMap();if(!e){this._colors=[Qh.Empty],this._backgroundIsLight=!0;return}this._colors=[Qh.Empty];for(let i=1;i<e.length;i++){const s=e[i].rgba;this._colors[i]=new Qh(s.r,s.g,s.b,Math.round(s.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};PA._INSTANCE=null;let TM=PA;const xje=(()=>{const n=[];for(let e=32;e<=126;e++)n.push(e);return n.push(65533),n})(),Lje=(n,e)=>(n-=32,n<0||n>96?e<=2?(n+96)%96:95:n);class pN{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=pN.soften(e,12/15),this.charDataLight=pN.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let s=0,o=e.length;s<o;s++)i[s]=_2(e[s]*t);return i}renderChar(e,t,i,s,o,r,a,l,c,d,u){const h=1*this.scale,f=2*this.scale,m=u?1:f;if(t+h>e.width||i+m>e.height){console.warn("bad render request outside image data");return}const p=d?this.charDataLight:this.charDataNormal,b=Lje(s,c),v=e.width*4,w=a.r,y=a.g,C=a.b,S=o.r-w,x=o.g-y,k=o.b-C,N=Math.max(r,l),E=e.data;let B=b*h*f,A=i*v+t*4;for(let O=0;O<m;O++){let W=A;for(let T=0;T<h;T++){const M=p[B++]/255*(r/255);E[W++]=w+S*M,E[W++]=y+x*M,E[W++]=C+k*M,E[W++]=N}A+=v}}blockRenderChar(e,t,i,s,o,r,a,l){const c=1*this.scale,d=2*this.scale,u=l?1:d;if(t+c>e.width||i+u>e.height){console.warn("bad render request outside image data");return}const h=e.width*4,f=.5*(o/255),m=r.r,p=r.g,b=r.b,v=s.r-m,w=s.g-p,y=s.b-b,C=m+v*f,S=p+w*f,x=b+y*f,k=Math.max(o,a),N=e.data;let E=i*h+t*4;for(let B=0;B<u;B++){let A=E;for(let O=0;O<c;O++)N[A++]=C,N[A++]=S,N[A++]=x,N[A++]=k;E+=h}}}const aie={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},lie=n=>{const e=new Uint8ClampedArray(n.length/2);for(let t=0;t<n.length;t+=2)e[t>>1]=aie[n[t]]<<4|aie[n[t+1]]&15;return e},cie={1:jm(()=>lie("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:jm(()=>lie("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class Jx{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return cie[e]?i=new pN(cie[e](),e):i=Jx.createFromSampleData(Jx.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let s=0;for(const o of xje)i.fillText(String.fromCharCode(o),s,16/2),s+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const s=Jx._downsample(e,t);return new pN(s,t)}static _downsampleChar(e,t,i,s,o){const r=1*o,a=2*o;let l=s,c=0;for(let d=0;d<a;d++){const u=d/a*16,h=(d+1)/a*16;for(let f=0;f<r;f++){const m=f/r*10,p=(f+1)/r*10;let b=0,v=0;for(let y=u;y<h;y++){const C=t+Math.floor(y)*3840,S=1-(y-Math.floor(y));for(let x=m;x<p;x++){const k=1-(x-Math.floor(x)),N=C+Math.floor(x)*4,E=k*S;v+=E,b+=e[N]*e[N+3]/255*E}}const w=b/v;c=Math.max(c,w),i[l++]=_2(w)}}return c}static _downsample(e,t){const i=2*t*1*t,s=i*96,o=new Uint8ClampedArray(s);let r=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,o,r,t)),r+=i,a+=10*4;if(l>0){const c=255/l;for(let d=0;d<s;d++)o[d]*=c}return o}}const ype=As?'"Segoe WPC", "Segoe UI", sans-serif':Lt?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',kje=140,Nje=2;class Dy{constructor(e,t,i){const s=e.options,o=s.get(144),r=s.get(146),a=r.minimap,l=s.get(50),c=s.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(106),this.paddingTop=s.get(84).top,this.paddingBottom=s.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=r.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=ype,this.sectionHeaderFontSize=c.sectionHeaderFontSize*o,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=Dy._getSectionHeaderColor(t,i.getColor(1)),this.charRenderer=jm(()=>Jx.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=Dy._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=Dy._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(_4e);return i?new Qh(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(b4e);return t?Qh._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const i=e.getColor(Vu);return i?new Qh(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class eL{constructor(e,t,i,s,o,r,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=s,this.sliderTop=o,this.sliderHeight=r,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,s,o,r,a,l,c,d,u){const h=e.pixelRatio,f=e.minimapLineHeight,m=Math.floor(e.canvasInnerHeight/f),p=e.lineHeight;if(e.minimapHeightIsEditorHeight){let x=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(x+=Math.max(0,o-e.lineHeight-e.paddingBottom));const k=Math.max(1,Math.floor(o*o/x)),N=Math.max(0,e.minimapHeight-k),E=N/(d-o),B=c*E,A=N>0,O=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),W=Math.floor(e.paddingTop/e.lineHeight);return new eL(c,d,A,E,B,k,W,1,Math.min(a,O))}let b;if(r&&i!==a){const x=i-t+1;b=Math.floor(x*f/h)}else{const x=o/p;b=Math.floor(x*f/h)}const v=Math.floor(e.paddingTop/p);let w=Math.floor(e.paddingBottom/p);if(e.scrollBeyondLastLine){const x=o/p;w=Math.max(w,x-1)}let y;if(w>0){const x=o/p;y=(v+a+w-x-1)*f/h}else y=Math.max(0,(v+a)*f/h-b);y=Math.min(e.minimapHeight-b,y);const C=y/(d-o),S=c*C;if(m>=v+a+w){const x=y>0;return new eL(c,d,x,C,S,b,v,1,a)}else{let x;t>1?x=t+v:x=Math.max(1,c/p);let k,N=Math.max(1,Math.floor(x-S*h/f));N<v?(k=v-N+1,N=1):(k=0,N=Math.max(1,N-v)),u&&u.scrollHeight===d&&(u.scrollTop>c&&(N=Math.min(N,u.startLineNumber),k=Math.max(k,u.topPaddingLineCount)),u.scrollTop<c&&(N=Math.max(N,u.startLineNumber),k=Math.min(k,u.topPaddingLineCount)));const E=Math.min(a,N-k+m-1),B=(c-s)/p;let A;return c>=e.paddingTop?A=(t-N+k+B)*f/h:A=c/e.paddingTop*(k+B)*f/h,new eL(c,d,!0,C,A,b,k,N,E)}}}const AA=class AA{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};AA.INVALID=new AA(-1);let RM=AA;class die{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new ppe({createLine:()=>RM.INVALID}),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let s=0,o=i.length;s<o;s++)if(i[s].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class vG{constructor(e,t,i,s){this._backgroundFillData=vG._createBackgroundFillData(t,i,s),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const s=i.r,o=i.g,r=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let d=0;d<t;d++)for(let u=0;u<e;u++)l[c]=s,l[c+1]=o,l[c+2]=r,l[c+3]=a,c+=4;return l}}class _N{static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:s}=cy.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),o=t/s,r=o/2;if(!i||i.minimapLines.length===0){const b=[];if(b[0]=1,s>1){for(let v=0,w=s-1;v<w;v++)b[v]=Math.round(v*o+r);b[s-1]=t}return[new _N(o,b),[]]}const a=i.minimapLines,l=a.length,c=[];let d=0,u=0,h=1;const f=10;let m=[],p=null;for(let b=0;b<s;b++){const v=Math.max(h,Math.round(b*o)),w=Math.max(v,Math.round((b+1)*o));for(;d<l&&a[d]<v;){if(m.length<f){const C=d+1+u;p&&p.type==="deleted"&&p._oldIndex===d-1?p.deleteToLineNumber++:(p={type:"deleted",_oldIndex:d,deleteFromLineNumber:C,deleteToLineNumber:C},m.push(p)),u--}d++}let y;if(d<l&&a[d]<=w)y=a[d],d++;else if(b===0?y=1:b+1===s?y=t:y=Math.round(b*o+r),m.length<f){const C=d+1+u;p&&p.type==="inserted"&&p._i===b-1?p.insertToLineNumber++:(p={type:"inserted",_i:b,insertFromLineNumber:C,insertToLineNumber:C},m.push(p)),u++}c[b]=y,h=y}if(m.length<f)for(;d<l;){const b=d+1+u;p&&p.type==="deleted"&&p._oldIndex===d-1?p.deleteToLineNumber++:(p={type:"deleted",_oldIndex:d,deleteFromLineNumber:b,deleteToLineNumber:b},m.push(p)),u--,d++}else m=[{type:"flush"}];return[new _N(o,c),m]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let s=this.modelLineToMinimapLine(t)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=t;)s++;if(i===s){const o=this.minimapLines[i];if(o<e||o>t)return null}return[i+1,s+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),s=this.modelLineToMinimapLine(t);return e!==t&&s===i&&(s===this.minimapLines.length?i>1&&i--:s++),[i,s]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,s=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,o),s=Math.max(s,o)):this.minimapLines[o]-=t;return[i,s]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class Ije extends Qr{constructor(e){super(e),this._sectionHeaderCache=new Hu(10,1.5),this.tokensColorTracker=TM.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Dy(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=_N.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new Cw(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new Dy(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const s=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);s&&t.push({fromLineNumber:s[0],toLineNumber:s[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const s={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,i]=_N.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const s of i)switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const s=[];for(let o=0,r=t-e+1;o<r;o++)i[o]?s[o]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+o-1]):s[o]=null;return s}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Ie(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const i=this._getMinimapDecorationsInViewport(e,t).filter(s=>{var o;return!((o=s.options.minimap)!=null&&o.sectionHeaderStyle)});if(this._samplingState){const s=[];for(const o of i){if(!o.options.minimap)continue;const r=o.range,a=this._samplingState.modelLineToMinimapLine(r.startLineNumber),l=this._samplingState.modelLineToMinimapLine(r.endLineNumber);s.push(new npe(new D(a,r.startColumn,l,r.endColumn),o.options))}return s}return i}getSectionHeaderDecorationsInViewport(e,t){const i=this.options.minimapLineHeight,o=this.options.sectionHeaderFontSize/i;return e=Math.floor(Math.max(1,e-o)),this._getMinimapDecorationsInViewport(e,t).filter(r=>{var a;return!!((a=r.options.minimap)!=null&&a.sectionHeaderStyle)})}_getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];i=new D(s,1,o,this._context.viewModel.getLineMaxColumn(o))}else i=new D(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(i)}getSectionHeaderText(e,t){var r;const i=(r=e.options.minimap)==null?void 0:r.sectionHeaderText;if(!i)return null;const s=this._sectionHeaderCache.get(i);if(s)return s;const o=t(i);return this._sectionHeaderCache.set(i,o),o}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new D(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class Cw extends G{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(ree),this._domNode=Jt(document.createElement("div")),hd.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Jt(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Jt(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Jt(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Jt(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Jt(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Ji(this._domNode.domNode,fe.POINTER_DOWN,i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.button===0&&this._lastRenderData){const c=un(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(i,d,this._lastRenderData.renderedLayout)}return}const o=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.offsetY;let l=Math.floor(r/o)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new D1,this._sliderPointerDownListener=Ji(this._slider.domNode,fe.POINTER_DOWN,i=>{i.preventDefault(),i.stopPropagation(),i.button===0&&this._lastRenderData&&this._startSliderDragging(i,i.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=qs.addTarget(this._domNode.domNode),this._sliderTouchStartListener=Q(this._domNode.domNode,yi.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=Q(this._domNode.domNode,yi.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=Ji(this._domNode.domNode,yi.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const s=e.pageX;this._slider.toggleClassName("active",!0);const o=(r,a)=>{const l=un(this._domNode.domNode),c=Math.min(Math.abs(a-s),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(As&&c>kje){this._model.setScrollTop(i.scrollTop);return}const d=r-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(d))};e.pageY!==t&&o(e.pageY,s),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>o(r.pageY,r.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new vG(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var i;return(i=this._lastRenderData)==null||i.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var i;return(i=this._lastRenderData)==null||i.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(ree),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=eL.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(D.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((h,f)=>(h.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:s,canvasInnerHeight:o}=this._model.options,r=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,s,o);const d=new uie(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,r),this._renderDecorationsLineHighlights(c,i,d,e,r);const u=new uie(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,u,e,r,l,a,s),this._renderDecorationsHighlights(c,i,u,e,r,l,a,s),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,i,s,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,a=0;for(const l of t){const c=s.intersectWithViewport(l);if(!c)continue;const[d,u]=c;for(let m=d;m<=u;m++)i.set(m,!0);const h=s.getYForLineNumber(d,o),f=s.getYForLineNumber(u,o);a>=h||(a>r&&e.fillRect(Td,r,e.canvas.width,a-r),r=h),a=f}a>r&&e.fillRect(Td,r,e.canvas.width,a-r)}_renderDecorationsLineHighlights(e,t,i,s,o){const r=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const d=s.intersectWithViewport(l.range);if(!d)continue;const[u,h]=d,f=c.getColor(this._theme.value);if(!f||f.isTransparent())continue;let m=r.get(f.toString());m||(m=f.transparent(.5).toString(),r.set(f.toString(),m)),e.fillStyle=m;for(let p=u;p<=h;p++){if(i.has(p))continue;i.set(p,!0);const b=s.getYForLineNumber(u,o);e.fillRect(Td,b,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,i,s,o,r,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const d=s.intersectWithViewport(c);if(!d)continue;const[u,h]=d;for(let f=u;f<=h;f++)this.renderDecorationOnLine(e,i,c,this._selectionColor,s,f,o,o,r,a,l)}}_renderDecorationsHighlights(e,t,i,s,o,r,a,l){for(const c of t){const d=c.options.minimap;if(!d)continue;const u=s.intersectWithViewport(c.range);if(!u)continue;const[h,f]=u,m=d.getColor(this._theme.value);if(!(!m||m.isTransparent()))for(let p=h;p<=f;p++)switch(d.position){case 1:this.renderDecorationOnLine(e,i,c.range,m,s,p,o,o,r,a,l);continue;case 2:{const b=s.getYForLineNumber(p,o);this.renderDecoration(e,m,2,b,Nje,o);continue}}}}renderDecorationOnLine(e,t,i,s,o,r,a,l,c,d,u){const h=o.getYForLineNumber(r,l);if(h+a<0||h>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:m}=i,p=f===r?i.startColumn:1,b=m===r?i.endColumn:this._model.getLineMaxColumn(r),v=this.getXOffsetForPosition(t,r,p,c,d,u),w=this.getXOffsetForPosition(t,r,b,c,d,u);this.renderDecoration(e,s,v,h,w-v,a)}getXOffsetForPosition(e,t,i,s,o,r){if(i===1)return Td;if((i-1)*o>=r)return r;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[Td];let d=Td;for(let u=1;u<c.length+1;u++){const h=c.charCodeAt(u-1),f=h===9?s*o:$m(h)?2*o:o,m=d+f;if(m>=r){l[u]=r;break}l[u]=m,d=m}e.set(t,l)}return i-1<l.length?l[i-1]:r}renderDecoration(e,t,i,s,o,r){e.fillStyle=t&&t.toString()||"",e.fillRect(i,s,o,r)}_renderSectionHeaders(e){var p;const t=this._model.options.minimapLineHeight,i=this._model.options.sectionHeaderFontSize,s=this._model.options.sectionHeaderLetterSpacing,o=i*1.5,{canvasInnerWidth:r}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,d=`rgb(${c.r} ${c.g} ${c.b})`,u=d,h=this._decorationsCanvas.domNode.getContext("2d");h.letterSpacing=s+"px",h.font="500 "+i+"px "+this._model.options.sectionHeaderFontFamily,h.strokeStyle=u,h.lineWidth=.2;const f=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);f.sort((b,v)=>b.range.startLineNumber-v.range.startLineNumber);const m=Cw._fitSectionHeader.bind(null,h,r-Td);for(const b of f){const v=e.getYForLineNumber(b.range.startLineNumber,t)+i,w=v-i,y=w+2,C=this._model.getSectionHeaderText(b,m);Cw._renderSectionLabel(h,C,((p=b.options.minimap)==null?void 0:p.sectionHeaderStyle)===2,l,d,r,w,o,v,y)}}static _fitSectionHeader(e,t,i){if(!i)return i;const s="…",o=e.measureText(i).width,r=e.measureText(s).width;if(o<=t||o<=r)return i;const a=i.length,l=o/i.length,c=Math.floor((t-r)/l)-1;let d=Math.ceil(c/2);for(;d>0&&/\s/.test(i[d-1]);)--d;return i.substring(0,d)+s+i.substring(a-(c-d))}static _renderSectionLabel(e,t,i,s,o,r,a,l,c,d){t&&(e.fillStyle=s,e.fillRect(0,a,r,l),e.fillStyle=o,e.fillText(t,Td,c)),i&&(e.beginPath(),e.moveTo(0,d),e.lineTo(r,d),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const M=this._lastRenderData._get();return new die(e,M.imageData,M.lines)}const o=this._getBuffer();if(!o)return null;const[r,a,l]=Cw._renderUntouchedLines(o,e.topPaddingLineCount,t,i,s,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),d=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,h=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,m=this._model.tokensColorTracker,p=m.backgroundIsLight(),b=this._model.options.renderMinimap,v=this._model.options.charRenderer(),w=this._model.options.fontScale,y=this._model.options.minimapCharWidth,S=(b===1?2:3)*w,x=s>S?Math.floor((s-S)/2):0,k=h.a/255,N=new Qh(Math.round((h.r-u.r)*k+u.r),Math.round((h.g-u.g)*k+u.g),Math.round((h.b-u.b)*k+u.b),255);let E=e.topPaddingLineCount*s;const B=[];for(let M=0,z=i-t+1;M<z;M++)l[M]&&Cw._renderLine(o,N,h.a,p,b,y,m,f,v,E,x,d,c[M],w,s),B[M]=new RM(E),E+=s;const A=r===-1?0:r,W=(a===-1?o.height:a)-A;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,A,o.width,W),new die(e,o,B)}static _renderUntouchedLines(e,t,i,s,o,r){const a=[];if(!r){for(let E=0,B=s-i+1;E<B;E++)a[E]=!0;return[-1,-1,a]}const l=r._get(),c=l.imageData.data,d=l.rendLineNumberStart,u=l.lines,h=u.length,f=e.width,m=e.data,p=(s-i+1)*o*f*4;let b=-1,v=-1,w=-1,y=-1,C=-1,S=-1,x=t*o;for(let E=i;E<=s;E++){const B=E-i,A=E-d,O=A>=0&&A<h?u[A].dy:-1;if(O===-1){a[B]=!0,x+=o;continue}const W=O*f*4,T=(O+o)*f*4,M=x*f*4,z=(x+o)*f*4;y===W&&S===M?(y=T,S=z):(w!==-1&&(m.set(c.subarray(w,y),C),b===-1&&w===0&&w===C&&(b=y),v===-1&&y===p&&w===C&&(v=w)),w=W,y=T,C=M,S=z),a[B]=!1,x+=o}w!==-1&&(m.set(c.subarray(w,y),C),b===-1&&w===0&&w===C&&(b=y),v===-1&&y===p&&w===C&&(v=w));const k=b===-1?-1:b/(f*4),N=v===-1?-1:v/(f*4);return[k,N,a]}static _renderLine(e,t,i,s,o,r,a,l,c,d,u,h,f,m,p){const b=f.content,v=f.tokens,w=e.width-r,y=p===1;let C=Td,S=0,x=0;for(let k=0,N=v.getCount();k<N;k++){const E=v.getEndOffset(k),B=v.getForeground(k),A=a.getColor(B);for(;S<E;S++){if(C>w)return;const O=b.charCodeAt(S);if(O===9){const W=h-(S+x)%h;x+=W-1,C+=W*r}else if(O===32)C+=r;else{const W=$m(O)?2:1;for(let T=0;T<W;T++)if(o===2?c.blockRenderChar(e,C,d+u,A,l,t,i,y):c.renderChar(e,C,d+u,O,A,l,t,i,m,s,y),C+=r,C>w)return}}}}}class uie{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let s=0,o=this._endLineNumber-this._startLineNumber+1;s<o;s++)this._values[s]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class Eje extends Qr{constructor(e,t){super(e),this._viewDomNode=t;const s=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=s.verticalScrollbarWidth,this._minimapWidth=s.minimap.minimapWidth,this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._editorHeight=s.height,this._editorWidth=s.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=Jt(document.createElement("div")),hd.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=Jt(document.createElement("div")),hd.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){const t=Jt(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()],s=t?t.preference:null,o=t==null?void 0:t.stackOridinal;return i.preference===s&&i.stack===o?(this._updateMaxMinWidth(),!1):(i.preference=s,i.stack=o,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var i,s;let e=0;const t=Object.keys(this._widgets);for(let o=0,r=t.length;o<r;o++){const a=t[o],c=(s=(i=this._widgets[a].widget).getMinContentWidthInPx)==null?void 0:s.call(i);typeof c<"u"&&(e=Math.max(e,c))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const i=e.domNode;if(e.preference===null){i.setTop("");return}const s=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){const o=i.domNode.clientHeight;i.setTop(this._editorHeight-o-2*this._horizontalScrollbarHeight)}else i.setTop(0);e.stack!==void 0?(i.setTop(t[e.preference]),t[e.preference]+=i.domNode.clientWidth):i.setRight(s)}else if(e.preference===2)i.domNode.style.right="50%",e.stack!==void 0?(i.setTop(t[2]),t[2]+=i.domNode.clientHeight):i.setTop(0);else{const{top:o,left:r}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const l=this._viewDomNodeRect;i.setTop(o+l.top),i.setLeft(r+l.left),i.setPosition("fixed")}else i.setTop(o),i.setLeft(r),i.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=un(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),i=Array.from({length:3},()=>0);t.sort((s,o)=>(this._widgets[s].stack||0)-(this._widgets[o].stack||0));for(let s=0,o=t.length;s<o;s++){const r=t[s];this._renderWidget(this._widgets[r],i)}}}class Dje{constructor(e,t){const i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(144),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);const s=t.getColor(I7e);this.borderColor=s?s.toString():null,this.hideCursor=i.get(59);const o=t.getColor(aF);this.cursorColorSingle=o?o.transparent(.7).toString():null;const r=t.getColor(Rge);this.cursorColorPrimary=r?r.transparent(.7).toString():null;const a=t.getColor(Mge);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=i.get(73),c=l.enabled,d=l.side,u=t.getColor(E7e),h=nn.getDefaultBackground();u?this.backgroundColor=u:c&&d==="right"?this.backgroundColor=h:this.backgroundColor=null;const m=i.get(146).overviewRuler;this.top=m.top,this.right=m.right,this.domWidth=m.width,this.domHeight=m.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[p,b]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=p,this.w=b}_initLanes(e,t,i){const s=t-e;if(i>=3){const o=Math.floor(s/3),r=Math.floor(s/3),a=s-o-r,l=e,c=l+o,d=l+o+a;return[[0,l,c,l,d,l,c,l],[0,o,a,o+a,r,o+a+r,a+r,o+a+r]]}else if(i===2){const o=Math.floor(s/2),r=s-o,a=e,l=a+o;return[[0,a,a,a,l,a,a,a],[0,o,o,o,r,o+r,o+r,o+r]]}else{const o=e,r=s;return[[0,o,o,o,o,o,o,o],[0,r,r,r,r,r,r,r]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&oe.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class Tje extends Qr{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=Jt(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=nn.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new U(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new Dje(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let s=this._settings.cursorColorSingle;i>1&&(s=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:s})}return this._cursorPositions.sort((t,i)=>U.compare(t.position,i.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?oe.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(cN.compareByRenderingProps),this._actualShouldRender===1&&!cN.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!Vi(this._renderedCursorPositions,this._cursorPositions,(m,p)=>m.position.lineNumber===p.position.lineNumber&&m.color===p.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const i=this._settings.canvasWidth,s=this._settings.canvasHeight,o=this._settings.lineHeight,r=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=s/a,c=6*this._settings.pixelRatio|0,d=c/2|0,u=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(u.fillStyle=oe.Format.CSS.formatHexA(e),u.fillRect(0,0,i,s)):(u.clearRect(0,0,i,s),u.fillStyle=oe.Format.CSS.formatHexA(e),u.fillRect(0,0,i,s)):u.clearRect(0,0,i,s);const h=this._settings.x,f=this._settings.w;for(const m of t){const p=m.color,b=m.data;u.fillStyle=p;let v=0,w=0,y=0;for(let C=0,S=b.length/3;C<S;C++){const x=b[3*C],k=b[3*C+1],N=b[3*C+2];let E=r.getVerticalOffsetForLineNumber(k)*l|0,B=(r.getVerticalOffsetForLineNumber(N)+o)*l|0;if(B-E<c){let O=(E+B)/2|0;O<d?O=d:O+d>s&&(O=s-d),E=O-d,B=O+d}E>y+1||x!==v?(C!==0&&u.fillRect(h[v],w,f[v],y-w),v=x,w=E,y=B):B>y&&(y=B)}u.fillRect(h[v],w,f[v],y-w)}if(!this._settings.hideCursor){const m=2*this._settings.pixelRatio|0,p=m/2|0,b=this._settings.x[7],v=this._settings.w[7];let w=-100,y=-100,C=null;for(let S=0,x=this._cursorPositions.length;S<x;S++){const k=this._cursorPositions[S].color;if(!k)continue;const N=this._cursorPositions[S].position;let E=r.getVerticalOffsetForLineNumber(N.lineNumber)*l|0;E<p?E=p:E+p>s&&(E=s-p);const B=E-p,A=B+m;B>y+1||k!==C?(S!==0&&C&&u.fillRect(b,w,v,y-w),w=B,y=A):A>y&&(y=A),C=k,u.fillStyle=k}C&&u.fillRect(b,w,v,y-w)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(u.beginPath(),u.lineWidth=1,u.strokeStyle=this._settings.borderColor,u.moveTo(0,0),u.lineTo(0,s),u.moveTo(1,0),u.lineTo(i,0),u.stroke())}}class hie{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class Cpe{constructor(e,t,i,s){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=s,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class Rje{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Cpe.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),s=Math.floor(this._outerHeight),o=i/s,r=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const d=this._zones[l];if(!e){const C=d.getColorZones();if(C){a.push(C);continue}}const u=this._getVerticalOffsetForLine(d.startLineNumber),h=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:u+d.heightInLines*t,f=Math.floor(o*u),m=Math.floor(o*h);let p=Math.floor((f+m)/2),b=m-p;b<r&&(b=r),p-b<0&&(p=b),p+b>i&&(p=i-b);const v=d.color;let w=this._color2Id[v];w||(w=++this._lastAssignedId,this._color2Id[v]=w,this._id2Color[w]=v);const y=new hie(p-b,p+b,w);d.setColorZone(y),a.push(y)}return this._colorZonesInvalid=!1,a.sort(hie.compare),a}}class Mje extends $I{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=Jt(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new Rje(s=>this._context.viewLayout.getVerticalOffsetForLineNumber(s)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(o,i,s,e),!0}_renderOneLane(e,t,i,s){let o=0,r=0,a=0;for(const l of t){const c=l.colorId,d=l.from,u=l.to;c!==o?(e.fillRect(0,r,s,a-r),o=c,e.fillStyle=i[o],r=d,a=u):a>=d?a=Math.max(a,u):(e.fillRect(0,r,s,a-r),r=d,a=u)}e.fillRect(0,r,s,a-r)}}class Pje extends Qr{constructor(e){super(e),this.domNode=Jt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:s}=this._context.viewModel.model.getOptions(),o=s;let r=t-e;for(;r>0;){const a=Jt(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),r--}return}let i=e-t;for(;i>0;){const s=this._renderedRulers.pop();this.domNode.removeChild(s),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const s=this._renderedRulers[t],o=this._rulers[t];s.setBoxShadow(o.color?`1px 0 0 0 ${o.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}class Aje extends Qr{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(104);this._useShadows=i.useShadows,this._domNode=Jt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(146);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(104);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class Oje{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class Fje{constructor(e,t){this.lineNumber=e,this.ranges=t}}function Bje(n){return new Oje(n)}function Wje(n){return new Fje(n.lineNumber,n.ranges.map(Bje))}const _n=class _n extends i0{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const s=this._typicalHalfwidthCharacterWidth/4;let o=null,r=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!o&&c<i.length;c++)i[c].lineNumber===a&&(o=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!r&&c>=0;c--)i[c].lineNumber===l&&(r=i[c].ranges[0]);o&&!o.startStyle&&(o=null),r&&!r.startStyle&&(r=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],d=c.left,u=c.left+c.width,h={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const m=t[a-1].ranges[0].left,p=t[a-1].ranges[0].left+t[a-1].ranges[0].width;wD(d-m)<s?h.top=2:d>m&&(h.top=1),wD(u-p)<s?f.top=2:m<u&&u<p&&(f.top=1)}else o&&(h.top=o.startStyle.top,f.top=o.endStyle.top);if(a+1<l){const m=t[a+1].ranges[0].left,p=t[a+1].ranges[0].left+t[a+1].ranges[0].width;wD(d-m)<s?h.bottom=2:m<d&&d<p&&(h.bottom=1),wD(u-p)<s?f.bottom=2:u<p&&(f.bottom=1)}else r&&(h.bottom=r.startStyle.bottom,f.bottom=r.endStyle.bottom);c.startStyle=h,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,i){const o=(t.linesVisibleRangesForRange(e,!0)||[]).map(Wje);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,i),o}_createSelectionPiece(e,t,i,s,o){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+s.toString()+"px;width:"+o.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,i,s){if(s.length===0)return;const o=!!s[0].ranges[0].startStyle,r=s[0].lineNumber,a=s[s.length-1].lineNumber;for(let l=0,c=s.length;l<c;l++){const d=s[l],u=d.lineNumber,h=u-t,f=i&&u===r?1:0,m=i&&u!==r&&u===a?1:0;let p="",b="";for(let v=0,w=d.ranges.length;v<w;v++){const y=d.ranges[v];if(o){const S=y.startStyle,x=y.endStyle;if(S.top===1||S.bottom===1){p+=this._createSelectionPiece(f,m,_n.SELECTION_CLASS_NAME,y.left-_n.ROUNDED_PIECE_WIDTH,_n.ROUNDED_PIECE_WIDTH);let k=_n.EDITOR_BACKGROUND_CLASS_NAME;S.top===1&&(k+=" "+_n.SELECTION_TOP_RIGHT),S.bottom===1&&(k+=" "+_n.SELECTION_BOTTOM_RIGHT),p+=this._createSelectionPiece(f,m,k,y.left-_n.ROUNDED_PIECE_WIDTH,_n.ROUNDED_PIECE_WIDTH)}if(x.top===1||x.bottom===1){p+=this._createSelectionPiece(f,m,_n.SELECTION_CLASS_NAME,y.left+y.width,_n.ROUNDED_PIECE_WIDTH);let k=_n.EDITOR_BACKGROUND_CLASS_NAME;x.top===1&&(k+=" "+_n.SELECTION_TOP_LEFT),x.bottom===1&&(k+=" "+_n.SELECTION_BOTTOM_LEFT),p+=this._createSelectionPiece(f,m,k,y.left+y.width,_n.ROUNDED_PIECE_WIDTH)}}let C=_n.SELECTION_CLASS_NAME;if(o){const S=y.startStyle,x=y.endStyle;S.top===0&&(C+=" "+_n.SELECTION_TOP_LEFT),S.bottom===0&&(C+=" "+_n.SELECTION_BOTTOM_LEFT),x.top===0&&(C+=" "+_n.SELECTION_TOP_RIGHT),x.bottom===0&&(C+=" "+_n.SELECTION_BOTTOM_RIGHT)}b+=this._createSelectionPiece(f,m,C,y.left,y.width)}e[h][0]+=p,e[h][1]+=b}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let r=i;r<=s;r++){const a=r-i;t[a]=["",""]}const o=[];for(let r=0,a=this._selections.length;r<a;r++){const l=this._selections[r];if(l.isEmpty()){o[r]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[r]);o[r]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([r,a])=>r+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};_n.SELECTION_CLASS_NAME="selected-text",_n.SELECTION_TOP_LEFT="top-left-radius",_n.SELECTION_BOTTOM_LEFT="bottom-left-radius",_n.SELECTION_TOP_RIGHT="top-right-radius",_n.SELECTION_BOTTOM_RIGHT="bottom-right-radius",_n.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",_n.ROUNDED_PIECE_WIDTH=10;let VH=_n;yl((n,e)=>{const t=n.getColor(ZOe);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function wD(n){return n<0?-n:n}class fie{constructor(e,t,i,s,o,r,a){this.top=e,this.left=t,this.paddingLeft=i,this.width=s,this.height=o,this.textContent=r,this.textContentClassName=a}}var Hh;(function(n){n[n.Single=0]="Single",n[n.MultiPrimary=1]="MultiPrimary",n[n.MultiSecondary=2]="MultiSecondary"})(Hh||(Hh={}));class gie{constructor(e,t){this._context=e;const i=this._context.configuration.options,s=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Jt(document.createElement("div")),this._domNode.setClassName(`cursor ${Ny}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Cs(this._domNode,s),this._domNode.setDisplay("none"),this._position=new U(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case Hh.Single:this._pluralityClass="";break;case Hh.MultiPrimary:this._pluralityClass="cursor-primary";break;case Hh.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),Cs(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[s,o]=jRe(i,t-1);return[new U(e,s+1),i.substring(s,o)]}_prepareRender(e){let t="",i="";const[s,o]=this._getGraphemeAwarePosition();if(this._cursorStyle===bs.Line||this._cursorStyle===bs.LineThin){const h=e.visibleRangeForPosition(s);if(!h||h.outsideRenderedLine)return null;const f=je(this._domNode.domNode);let m;this._cursorStyle===bs.Line?(m=zQ(f,this._lineCursorWidth>0?this._lineCursorWidth:2),m>2&&(t=o,i=this._getTokenClassName(s))):m=zQ(f,1);let p=h.left,b=0;m>=2&&p>=1&&(b=1,p-=b);const v=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta;return new fie(v,p,b,m,this._lineHeight,t,i)}const r=e.linesVisibleRangesForRange(new D(s.lineNumber,s.column,s.lineNumber,s.column+o.length),!1);if(!r||r.length===0)return null;const a=r[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=o==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===bs.Block&&(t=o,i=this._getTokenClassName(s));let d=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===bs.Underline||this._cursorStyle===bs.UnderlineThin)&&(d+=this._lineHeight-2,u=2),new fie(d,l.left,0,c,u,t,i)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${Ny} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}const NL=class NL extends Qr{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new gie(this._context,Hh.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=Jt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new oc,this._cursorFlatBlinkInterval=new NK,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,s=this._secondaryCursors.length;i<s;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){const s=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&i!==3;if(this._primaryCursor.setPlurality(t.length?Hh.MultiPrimary:Hh.Single),this._primaryCursor.onCursorPositionChanged(e,s),this._updateBlinking(),this._secondaryCursors.length<t.length){const o=t.length-this._secondaryCursors.length;for(let r=0;r<o;r++){const a=new gie(this._context,Hh.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const o=this._secondaryCursors.length-t.length;for(let r=0;r<o;r++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let o=0;o<t.length;o++)this._secondaryCursors[o].onCursorPositionChanged(t[o],s)}onCursorStateChanged(e){const t=[];for(let s=0,o=e.selections.length;s<o;s++)t[s]=e.selections[s].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let s=0,o=e.ranges.length;s<o;s++)if(e.ranges[s].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},NL.BLINK_INTERVAL,je(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},NL.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case bs.Line:e+=" cursor-line-style";break;case bs.Block:e+=" cursor-block-style";break;case bs.Underline:e+=" cursor-underline-style";break;case bs.LineThin:e+=" cursor-line-thin-style";break;case bs.BlockOutline:e+=" cursor-block-outline-style";break;case bs.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const s=this._primaryCursor.render(e);s&&(t[i++]=s);for(let o=0,r=this._secondaryCursors.length;o<r;o++){const a=this._secondaryCursors[o].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};NL.BLINK_INTERVAL=500;let jH=NL;yl((n,e)=>{const t=[{class:".cursor",foreground:aF,background:Lq},{class:".cursor-primary",foreground:Rge,background:u7e},{class:".cursor-secondary",foreground:Mge,background:h7e}];for(const i of t){const s=n.getColor(i.foreground);if(s){let o=n.getColor(i.background);o||(o=s.opposite()),e.addRule(`.monaco-editor .cursors-layer ${i.class} { background-color: ${s}; border-color: ${s}; color: ${o}; }`),Qc(n.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${i.class} { border-left: 1px solid ${o}; border-right: 1px solid ${o}; }`)}}});const CB=()=>{throw new Error("Invalid change accessor")};class Hje extends Qr{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=Jt(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Jt(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const s of e)t.set(s.id,s);let i=!1;return this._context.viewModel.changeWhitespace(s=>{const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==d.afterViewLineNumber||u.height!==d.heightInPx)&&(s.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const r=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new U(r,this._context.viewModel.model.getLineMaxColumn(r))}let i;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),o=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!o,afterViewLineNumber:s.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{const s={addZone:o=>(t=!0,this._addZone(i,o)),removeZone:o=>{o&&(t=this._removeZone(i,o)||t)},layoutZone:o=>{o&&(t=this._layoutZone(i,o)||t)}};Vje(e,s),s.addZone=CB,s.removeZone=CB,s.layoutZone=CB}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:Jt(t.domNode),marginDomNode:t.marginDomNode?Jt(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,i.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.remove(),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],s=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=s.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(i.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){et(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){et(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let s=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(i[r.id]=r,s=!0);const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],c=this._zones[l];let d=0,u=0,h="none";i.hasOwnProperty(l)?(d=i[l].verticalOffset-e.bigNumbersDelta,u=i[l].height,h="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(u),c.domNode.setDisplay(h),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(u),c.marginDomNode.setDisplay(h))}s&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function Vje(n,e){try{return n(e)}catch(t){et(t)}}class jje extends i0{constructor(e){super(),this._context=e,this._options=new mie(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new mie(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber-t+1,o=new Array(s);for(let a=0;a<s;a++)o[a]=!0;const r=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,o);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=r.data[l];let d=null;if(this._options.renderWhitespace==="selection"){const u=this._selection;for(const h of u){if(h.endLineNumber<a||h.startLineNumber>a)continue;const f=h.startLineNumber===a?h.startColumn:c.minColumn,m=h.endLineNumber===a?h.endColumn:c.maxColumn;f<m&&(d||(d=[]),d.push(new epe(f-1,m-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,d,c)}}_applyRenderWhitespace(e,t,i,s){if(this._options.renderWhitespace==="selection"&&!i||this._options.renderWhitespace==="trailing"&&s.continuesWithWrappedLine)return"";const o=this._context.theme.getColor(kq),r=this._options.renderWithSVG,a=s.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=s.continuesWithWrappedLine,d=s.minColumn-1,u=this._options.renderWhitespace==="boundary",h=this._options.renderWhitespace==="trailing",f=this._options.lineHeight,m=this._options.middotWidth,p=this._options.wsmiddotWidth,b=this._options.spaceWidth,v=Math.abs(p-b),w=Math.abs(m-b),y=v<w?11825:183,C=this._options.canUseHalfwidthRightwardsArrow;let S="",x=!1,k=fo(a),N;k===-1?(x=!0,k=l,N=l):N=Xc(a);let E=0,B=i&&i[E],A=0;for(let O=d;O<l;O++){const W=a.charCodeAt(O);if(B&&O>=B.endOffset&&(E++,B=i&&i[E]),W!==9&&W!==32||h&&!x&&O<=N)continue;if(u&&O>=k&&O<=N&&W===32){const M=O-1>=0?a.charCodeAt(O-1):0,z=O+1<l?a.charCodeAt(O+1):0;if(M!==32&&z!==32)continue}if(u&&c&&O===l-1){const M=O-1>=0?a.charCodeAt(O-1):0;if(W===32&&M!==32&&M!==9)continue}if(i&&(!B||B.startOffset>O||B.endOffset<=O))continue;const T=e.visibleRangeForPosition(new U(t,O+1));T&&(r?(A=Math.max(A,T.left),W===9?S+=this._renderArrow(f,b,T.left):S+=`<circle cx="${(T.left+b/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(b/7).toFixed(2)}" />`):W===9?S+=`<div class="mwh" style="left:${T.left}px;height:${f}px;">${C?"￫":"→"}</div>`:S+=`<div class="mwh" style="left:${T.left}px;height:${f}px;">${String.fromCharCode(y)}</div>`)}return r?(A=Math.round(A+b),`<svg style="bottom:0;position:absolute;width:${A}px;height:${f}px" viewBox="0 0 ${A} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${o}">`+S+"</svg>"):S}_renderArrow(e,t,i){const s=t/7,o=t,r=e/2,a=i,l={x:0,y:s/2},c={x:100/125*o,y:l.y},d={x:c.x-.2*c.x,y:c.y+.2*c.x},u={x:d.x+.1*c.x,y:d.y+.1*c.x},h={x:u.x+.35*c.x,y:u.y-.35*c.x},f={x:h.x,y:-h.y},m={x:u.x,y:-u.y},p={x:d.x,y:-d.y},b={x:c.x,y:-c.y},v={x:l.x,y:-l.y};return`<path d="M ${[l,c,d,u,h,f,m,p,b,v].map(C=>`${(a+C.x).toFixed(2)} ${(r+C.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class mie{constructor(e){const t=e.options,i=t.get(50),s=t.get(38);s==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):s==="svg"?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class zje{constructor(e,t,i,s){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=i,this._model=s,this.visibleRange=new D(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class Uje{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class $je{constructor(e,t,i){this.configuration=e,this.theme=new Uje(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var Kje=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},qje=function(n,e){return function(t,i){e(t,i,n)}};let zH=class extends $I{constructor(e,t,i,s,o,r,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new Ie(1,1,1,1)],this._renderAnimationFrame=null;const l=new tje(t,s,o,e);this._context=new $je(t,i,s),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(AH,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Jt(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Jt(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Jt(document.createElement("div")),hd.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new uje(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new HH(this._context,this._linesContent),this._viewZones=new Hje(this._context),this._viewParts.push(this._viewZones);const c=new Tje(this._context);this._viewParts.push(c);const d=new Aje(this._context);this._viewParts.push(d);const u=new nje(this._context);this._viewParts.push(u),u.addDynamicOverlay(new lje(this._context)),u.addDynamicOverlay(new VH(this._context)),u.addDynamicOverlay(new bje(this._context)),u.addDynamicOverlay(new dje(this._context)),u.addDynamicOverlay(new jje(this._context));const h=new sje(this._context);this._viewParts.push(h),h.addDynamicOverlay(new cje(this._context)),h.addDynamicOverlay(new Sje(this._context)),h.addDynamicOverlay(new Cje(this._context)),h.addDynamicOverlay(new kM(this._context)),this._glyphMarginWidgets=new gje(this._context),this._viewParts.push(this._glyphMarginWidgets);const f=new NM(this._context);f.getDomNode().appendChild(this._viewZones.marginDomNode),f.getDomNode().appendChild(h.getDomNode()),f.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(f),this._contentWidgets=new rje(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new jH(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new Eje(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const m=new Pje(this._context);this._viewParts.push(m);const p=new oje(this._context);this._viewParts.push(p);const b=new Ije(this._context);if(this._viewParts.push(b),c){const v=this._scrollbar.getOverviewRulerLayoutInfo();v.parent.insertBefore(c.getDomNode(),v.insertBefore)}this._linesContent.appendChild(u.getDomNode()),this._linesContent.appendChild(m.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(b.getDomNode()),this._overflowGuardContainer.appendChild(p.domNode),this.domNode.appendChild(this._overflowGuardContainer),r?(r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),r.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new SVe(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let i=[],s=0;i=i.concat(e.getAllMarginDecorations().map(o=>{var a,l;const r=((a=o.options.glyphMargin)==null?void 0:a.position)??Jl.Center;return s=Math.max(s,o.range.endLineNumber),{range:o.range,lane:r,persist:(l=o.options.glyphMargin)==null?void 0:l.persistLane}})),i=i.concat(this._glyphMarginWidgets.getWidgets().map(o=>{const r=e.validateRange(o.preference.range);return s=Math.max(s,r.endLineNumber),{range:r,lane:o.preference.lane}})),i.sort((o,r)=>D.compareRangesUsingStarts(o.range,r.range)),t.reset(s);for(const o of i)t.push(o.lane,o.range,o.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new uVe(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new U(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(146);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+yW(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){var e;if(this._store.isDisposed)throw new Zt;if(this._renderAnimationFrame===null){const t=this._createCoordinatedRendering();this._renderAnimationFrame=UH.INSTANCE.scheduleCoordinatedRendering({window:je((e=this.domNode)==null?void 0:e.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new Zt;try{return t.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new Zt;return t.renderText()},prepareRender:(i,s)=>{if(this._store.isDisposed)throw new Zt;return t.prepareRender(i,s)},render:(i,s)=>{if(this._store.isDisposed)throw new Zt;return t.render(i,s)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();Kg(()=>e.prepareRenderText());const t=Kg(()=>e.renderText());if(t){const[i,s]=t;Kg(()=>e.prepareRender(i,s)),Kg(()=>e.render(i,s))}}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}$g.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new zje(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new sVe(this._context.viewLayout,i,this._viewLines)]},prepareRender:(e,t)=>{for(const i of e)i.prepareRender(t)},render:(e,t)=>{for(const i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const o=this._viewLines.visibleRangeForPosition(new U(s.lineNumber,s.column));return o?o.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?SF.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new Mje(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,i,s,o;this._contentWidgets.setWidgetPosition(e.widget,((t=e.position)==null?void 0:t.position)??null,((i=e.position)==null?void 0:i.secondaryPosition)??null,((s=e.position)==null?void 0:s.preference)??null,((o=e.position)==null?void 0:o.positionAffinity)??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};zH=Kje([qje(6,Ae)],zH);function Kg(n){try{return n()}catch(e){return et(e),null}}const OA=class OA{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[i,s]of this._animationFrameRunners)s.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,d2(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const i of e)Kg(()=>i.prepareRenderText());const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t[i]=Kg(()=>o.renderText())}for(let i=0,s=e.length;i<s;i++){const o=e[i],r=t[i];if(!r)continue;const[a,l]=r;Kg(()=>o.prepareRender(a,l))}for(let i=0,s=e.length;i<s;i++){const o=e[i],r=t[i];if(!r)continue;const[a,l]=r;Kg(()=>o.render(a,l))}}};OA.INSTANCE=new OA;let UH=OA;class tL{constructor(e,t,i,s,o){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=s,this.wrappedTextIndentLength=o}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let s=this.breakOffsets[e]-t;return e>0&&(s+=this.wrappedTextIndentLength),s}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let s=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&s>this.injectionOffsets[o];o++)s<this.injectionOffsets[o]+this.injectionOptions[o].content.length?s=this.injectionOffsets[o]:s-=this.injectionOptions[o].content.length;return s}translateToOutputPosition(e,t=2){let i=e;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(e<this.injectionOffsets[s]||t!==1&&e===this.injectionOffsets[s]);s++)i+=this.injectionOptions[s].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,s=this.breakOffsets.length-1,o=0,r=0;for(;i<=s;){o=i+(s-i)/2|0;const l=this.breakOffsets[o];if(r=o>0?this.breakOffsets[o-1]:0,t===0)if(e<=r)s=o-1;else if(e>l)i=o+1;else break;else if(e<r)s=o-1;else if(e>=l)i=o+1;else break}let a=e-r;return o>0&&(a+=this.wrappedTextIndentLength),new yD(o,a)}normalizeOutputPosition(e,t,i){if(this.injectionOffsets!==null){const s=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(s,i);if(o!==s)return this.offsetInInputWithInjectionsToOutputPosition(o,i)}if(i===0){if(e>0&&t===this.getMinOutputOffset(e))return new yD(e-1,this.getMaxOutputOffset(e-1))}else if(i===1){const s=this.getOutputLineCount()-1;if(e<s&&t===this.getMaxOutputOffset(e))return new yD(e+1,this.getMinOutputOffset(e+1))}return new yD(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2){if(e===i.offsetInInputWithInjections+i.length&&pie(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let s=i.offsetInInputWithInjections;if(_ie(this.injectionOptions[i.injectedTextIndex].cursorStops))return s;let o=i.injectedTextIndex-1;for(;o>=0&&this.injectionOffsets[o]===this.injectionOffsets[i.injectedTextIndex]&&!(pie(this.injectionOptions[o].cursorStops)||(s-=this.injectionOptions[o].content.length,_ie(this.injectionOptions[o].cursorStops)));)o--;return s}}else if(t===1||t===4){let s=i.offsetInInputWithInjections+i.length,o=i.injectedTextIndex;for(;o+1<this.injectionOffsets.length&&this.injectionOffsets[o+1]===this.injectionOffsets[o];)s+=this.injectionOptions[o+1].content.length,o++;return s}else if(t===0||t===3){let s=i.offsetInInputWithInjections,o=i.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)s-=this.injectionOptions[o-1].content.length,o--;return s}R4()}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.getInjectedTextAtOffset(i);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let s=0;for(let o=0;o<t.length;o++){const r=i[o].content.length,a=t[o]+s,l=t[o]+s+r;if(a>e)break;if(e<=l)return{injectedTextIndex:o,offsetInInputWithInjections:a,length:r};s+=r}}}}function pie(n){return n==null?!0:n===jl.Right||n===jl.Both}function _ie(n){return n==null?!0:n===jl.Left||n===jl.Both}class yD{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new U(e+this.outputLineIndex,this.outputOffset+1)}}const SB=Ef("domLineBreaksComputer",{createHTML:n=>n});class wG{static create(e){return new wG(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,i,s,o){const r=[],a=[];return{addRequest:(l,c,d)=>{r.push(l),a.push(c)},finalize:()=>Gje(Fg(this.targetWindow.deref()),r,e,t,i,s,o,a)}}}function Gje(n,e,t,i,s,o,r,a){function l(E){const B=a[E];if(B){const A=cd.applyInjectedText(e[E],B),O=B.map(T=>T.options),W=B.map(T=>T.column-1);return new tL(W,O,[A.length],[],0)}else return null}if(s===-1){const E=[];for(let B=0,A=e.length;B<A;B++)E[B]=l(B);return E}const c=Math.round(s*t.typicalHalfwidthCharacterWidth),u=Math.round(i*(o===3?2:o===2?1:0)),h=Math.ceil(t.spaceWidth*u),f=document.createElement("div");Cs(f,t);const m=new N1(1e4),p=[],b=[],v=[],w=[],y=[];for(let E=0;E<e.length;E++){const B=cd.applyInjectedText(e[E],a[E]);let A=0,O=0,W=c;if(o!==0)if(A=fo(B),A===-1)A=0;else{for(let ee=0;ee<A;ee++){const q=B.charCodeAt(ee)===9?i-O%i:1;O+=q}const z=Math.ceil(t.spaceWidth*O);z+t.typicalFullwidthCharacterWidth>c?(A=0,O=0):W=c-z}const T=B.substr(A),M=Zje(T,O,i,W,m,h);p[E]=A,b[E]=O,v[E]=T,w[E]=M[0],y[E]=M[1]}const C=m.build(),S=(SB==null?void 0:SB.createHTML(C))??C;f.innerHTML=S,f.style.position="absolute",f.style.top="10000",r==="keepAll"?(f.style.wordBreak="keep-all",f.style.overflowWrap="anywhere"):(f.style.wordBreak="inherit",f.style.overflowWrap="break-word"),n.document.body.appendChild(f);const x=document.createRange(),k=Array.prototype.slice.call(f.children,0),N=[];for(let E=0;E<e.length;E++){const B=k[E],A=Yje(x,B,v[E],w[E]);if(A===null){N[E]=l(E);continue}const O=p[E],W=b[E]+u,T=y[E],M=[];for(let Z=0,V=A.length;Z<V;Z++)M[Z]=T[A[Z]];if(O!==0)for(let Z=0,V=A.length;Z<V;Z++)A[Z]+=O;let z,ee;const q=a[E];q?(z=q.map(Z=>Z.options),ee=q.map(Z=>Z.column-1)):(z=null,ee=null),N[E]=new tL(ee,z,A,M,W)}return f.remove(),N}function Zje(n,e,t,i,s,o){if(o!==0){const h=String(o);s.appendString('<div style="text-indent: -'),s.appendString(h),s.appendString("px; padding-left: "),s.appendString(h),s.appendString("px; box-sizing: border-box; width:")}else s.appendString('<div style="width:');s.appendString(String(i)),s.appendString('px;">');const r=n.length;let a=e,l=0;const c=[],d=[];let u=0<r?n.charCodeAt(0):0;s.appendString("<span>");for(let h=0;h<r;h++){h!==0&&h%16384===0&&s.appendString("</span><span>"),c[h]=l,d[h]=a;const f=u;u=h+1<r?n.charCodeAt(h+1):0;let m=1,p=1;switch(f){case 9:m=t-a%t,p=m;for(let b=1;b<=m;b++)b<m?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 32:u===32?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 60:s.appendString("&lt;");break;case 62:s.appendString("&gt;");break;case 38:s.appendString("&amp;");break;case 0:s.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.appendCharCode(65533);break;default:$m(f)&&p++,f<32?s.appendCharCode(9216+f):s.appendCharCode(f)}l+=m,a+=p}return s.appendString("</span>"),c[n.length]=l,d[n.length]=a,s.appendString("</div>"),[c,d]}function Yje(n,e,t,i){if(t.length<=1)return null;const s=Array.prototype.slice.call(e.children,0),o=[];try{$H(n,s,i,0,null,t.length-1,null,o)}catch(r){return console.log(r),null}return o.length===0?null:(o.push(t.length),o)}function $H(n,e,t,i,s,o,r,a){if(i===o||(s=s||xB(n,e,t[i],t[i+1]),r=r||xB(n,e,t[o],t[o+1]),Math.abs(s[0].top-r[0].top)<=.1))return;if(i+1===o){a.push(o);return}const l=i+(o-i)/2|0,c=xB(n,e,t[l],t[l+1]);$H(n,e,t,i,s,l,c,a),$H(n,e,t,l,c,o,r,a)}function xB(n,e,t,i){return n.setStart(e[t/16384|0].firstChild,t%16384),n.setEnd(e[i/16384|0].firstChild,i%16384),n.getClientRects()}class Xje extends G{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new uK),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){this._editor=e,this._instantiationService=i;for(const s of t){if(this._pending.has(s.id)){et(new Error(`Cannot have two contributions with the same id ${s.id}`));continue}this._pending.set(s.id,s)}this._instantiateSome(0),this._register(GS(je(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(GS(je(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(GS(je(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,i]of this._instances)typeof i.saveViewState=="function"&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(const[t,i]of this._instances)typeof i.restoreViewState=="function"&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return GS(je((e=this._editor)==null?void 0:e.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const i of t)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const i=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,i),typeof i.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(i){et(i)}}}}class Spe{constructor(e,t,i,s,o,r,a){this.id=e,this.label=t,this.alias=i,this.metadata=s,this._precondition=o,this._run=r,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}class yG{static create(e){return new yG(e.get(135),e.get(134))}constructor(e,t){this.classifier=new Qje(e,t)}createLineBreaksComputer(e,t,i,s,o){const r=[],a=[],l=[];return{addRequest:(c,d,u)=>{r.push(c),a.push(d),l.push(u)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,d=[];for(let u=0,h=r.length;u<h;u++){const f=a[u],m=l[u];m&&!m.injectionOptions&&!f?d[u]=Jje(this.classifier,m,r[u],t,i,c,s,o):d[u]=eze(this.classifier,r[u],f,t,i,c,s,o)}return KH.length=0,qH.length=0,d}}}}class Qje extends I1{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let KH=[],qH=[];function Jje(n,e,t,i,s,o,r,a){if(s===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",d=e.breakOffsets,u=e.breakOffsetsVisibleColumn,h=xpe(t,i,s,o,r),f=s-h,m=KH,p=qH;let b=0,v=0,w=0,y=s;const C=d.length;let S=0;if(S>=0){let x=Math.abs(u[S]-y);for(;S+1<C;){const k=Math.abs(u[S+1]-y);if(k>=x)break;x=k,S++}}for(;S<C;){let x=S<0?0:d[S],k=S<0?0:u[S];v>x&&(x=v,k=w);let N=0,E=0,B=0,A=0;if(k<=y){let W=k,T=x===0?0:t.charCodeAt(x-1),M=x===0?0:n.get(T),z=!0;for(let ee=x;ee<l;ee++){const q=ee,Z=t.charCodeAt(ee);let V,le;if(qn(Z)?(ee++,V=0,le=2):(V=n.get(Z),le=iL(Z,W,i,o)),q>v&&GH(T,M,Z,V,c)&&(N=q,E=W),W+=le,W>y){q>v?(B=q,A=W-le):(B=ee+1,A=W),W-E>f&&(N=0),z=!1;break}T=Z,M=V}if(z){b>0&&(m[b]=d[d.length-1],p[b]=u[d.length-1],b++);break}}if(N===0){let W=k,T=t.charCodeAt(x),M=n.get(T),z=!1;for(let ee=x-1;ee>=v;ee--){const q=ee+1,Z=t.charCodeAt(ee);if(Z===9){z=!0;break}let V,le;if(fv(Z)?(ee--,V=0,le=2):(V=n.get(Z),le=$m(Z)?o:1),W<=y){if(B===0&&(B=q,A=W),W<=y-f)break;if(GH(Z,V,T,M,c)){N=q,E=W;break}}W-=le,T=Z,M=V}if(N!==0){const ee=f-(A-E);if(ee<=i){const q=t.charCodeAt(B);let Z;qn(q)?Z=2:Z=iL(q,A,i,o),ee-Z<0&&(N=0)}}if(z){S--;continue}}if(N===0&&(N=B,E=A),N<=v){const W=t.charCodeAt(v);qn(W)?(N=v+2,E=w+2):(N=v+1,E=w+iL(W,w,i,o))}for(v=N,m[b]=N,w=E,p[b]=E,b++,y=E+f;S<0||S<C&&u[S]<E;)S++;let O=Math.abs(u[S]-y);for(;S+1<C;){const W=Math.abs(u[S+1]-y);if(W>=O)break;O=W,S++}}return b===0?null:(m.length=b,p.length=b,KH=e.breakOffsets,qH=e.breakOffsetsVisibleColumn,e.breakOffsets=m,e.breakOffsetsVisibleColumn=p,e.wrappedTextIndentLength=h,e)}function eze(n,e,t,i,s,o,r,a){const l=cd.applyInjectedText(e,t);let c,d;if(t&&t.length>0?(c=t.map(E=>E.options),d=t.map(E=>E.column-1)):(c=null,d=null),s===-1)return c?new tL(d,c,[l.length],[],0):null;const u=l.length;if(u<=1)return c?new tL(d,c,[l.length],[],0):null;const h=a==="keepAll",f=xpe(l,i,s,o,r),m=s-f,p=[],b=[];let v=0,w=0,y=0,C=s,S=l.charCodeAt(0),x=n.get(S),k=iL(S,0,i,o),N=1;qn(S)&&(k+=1,S=l.charCodeAt(1),x=n.get(S),N++);for(let E=N;E<u;E++){const B=E,A=l.charCodeAt(E);let O,W;qn(A)?(E++,O=0,W=2):(O=n.get(A),W=iL(A,k,i,o)),GH(S,x,A,O,h)&&(w=B,y=k),k+=W,k>C&&((w===0||k-y>m)&&(w=B,y=k-W),p[v]=w,b[v]=y,v++,C=y+m,w=0),S=A,x=O}return v===0&&(!t||t.length===0)?null:(p[v]=u,b[v]=k,new tL(d,c,p,b,f))}function iL(n,e,t,i){return n===9?t-e%t:$m(n)||n<32?i:1}function bie(n,e){return e-n%e}function GH(n,e,t,i,s){return t!==32&&(e===2&&i!==2||e!==1&&i===1||!s&&e===3&&i!==2||!s&&i===3&&e!==1)}function xpe(n,e,t,i,s){let o=0;if(s!==0){const r=fo(n);if(r!==-1){for(let l=0;l<r;l++){const c=n.charCodeAt(l)===9?bie(o,e):1;o+=c}const a=s===3?2:s===2?1:0;for(let l=0;l<a;l++){const c=bie(o,e);o+=c}o+i>t&&(o=0)}}return o}class MM{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new ps(new D(1,1,1,1),0,0,new U(1,1),0),new ps(new D(1,1,1,1),0,0,new U(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new jt(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?Ie.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):Ie.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,s){return t.equals(i)?s:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,s=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),r=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,s,i,r),l=this._validatePositionWithCache(e,o,s,a);return i.equals(r)&&s.equals(a)&&o.equals(l)?t:new ps(D.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+s.column-a.column,r,t.leftoverVisibleColumns+i.column-r.column)}_setState(e,t,i){if(i&&(i=MM._validateViewState(e.viewModel,i)),t){const s=e.model.validateRange(t.selectionStart),o=t.selectionStart.equalsRange(s)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),a=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new ps(s,t.selectionStartKind,o,r,a)}else{if(!i)return;const s=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new ps(s,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,o,i.leftoverVisibleColumns)}if(i){const s=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new ps(s,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{const s=e.coordinatesConverter.convertModelPositionToViewPosition(new U(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new U(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new D(s.lineNumber,s.column,o.lineNumber,o.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new ps(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class vie{constructor(e){this.context=e,this.cursors=[new MM(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return hAe(this.cursors,Io(e=>e.viewState.position,U.compare)).viewState.position}getBottomMostViewPosition(){return uAe(this.cursors,Io(e=>e.viewState.position,U.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(jt.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const s=i-t;for(let o=0;o<s;o++)this._addSecondaryCursor()}else if(t>i){const s=t-i;for(let o=0;o<s;o++)this._removeSecondaryCursor(this.cursors.length-2)}for(let s=0;s<i;s++)this.cursors[s+1].setState(this.context,e[s].modelState,e[s].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new MM(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let i=0,s=e.length;i<s;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(Io(i=>i.selection,D.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1],r=s.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||r.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):l=a.getStartPosition().isBefore(r.getEndPosition()),l){const c=s.index<o.index?i:i+1,d=s.index<o.index?i+1:i,u=t[d].index,h=t[c].index,f=t[d].selection,m=t[c].selection;if(!f.equalsSelection(m)){const p=f.plusRange(m),b=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,v=m.selectionStartLineNumber===m.startLineNumber&&m.selectionStartColumn===m.startColumn;let w;u===this.lastAddedCursorIndex?(w=b,this.lastAddedCursorIndex=h):w=v;let y;w?y=new Ie(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn):y=new Ie(p.endLineNumber,p.endColumn,p.startLineNumber,p.startColumn),t[c].selection=y;const C=jt.fromModelSelection(y);e[h].setState(this.context,C.modelState,C.viewState)}for(const p of t)p.index>u&&p.index--;e.splice(u,1),t.splice(d,1),this._removeSecondaryCursor(u-1),i--}}}}class wie{constructor(e,t,i,s){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=s}}class tze{constructor(){this.type=0}}class ize{constructor(){this.type=1}}class nze{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class sze{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}}class Mp{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class CD{constructor(){this.type=5}}class oze{constructor(e){this.type=6,this.isFocused=e}}class rze{constructor(){this.type=7}}class SD{constructor(){this.type=8}}class Lpe{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class ZH{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class YH{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class nL{constructor(e,t,i,s,o,r,a){this.source=e,this.minimalReveal=t,this.range=i,this.selections=s,this.verticalType=o,this.revealHorizontal=r,this.scrollType=a,this.type=12}}class aze{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class lze{constructor(e){this.theme=e,this.type=14}}class cze{constructor(e){this.type=15,this.ranges=e}}class dze{constructor(){this.type=16}}let uze=class{constructor(){this.type=17}};class hze extends G{constructor(){super(),this._onEvent=this._register(new $),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const s=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(s){this._outgoingEvents[t]=s;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new fze),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class fze{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class CG{constructor(e,t,i,s){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new CG(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class SG{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new SG(this.oldHasFocus,e.hasFocus)}}class xG{constructor(e,t,i,s,o,r,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=s,this.scrollWidth=o,this.scrollLeft=r,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new xG(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class gze{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class mze{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class PM{constructor(e,t,i,s,o,r,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=s,this.source=o,this.reason=r,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,s=t.length;if(i!==s)return!1;for(let o=0;o<i;o++)if(!e[o].equalsSelection(t[o]))return!1;return!0}isNoOp(){return PM._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new PM(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class pze{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class _ze{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class bze{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class vze{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class wze{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class yze{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class Cze{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class Sze extends G{constructor(e,t,i,s){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new wie(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new vie(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=gi(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new wie(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,s){let o=!1;const r=this.context.cursorConfig.multiCursorLimit;s!==null&&s.length>r&&(s=s.slice(0,r),o=!0);const a=sL.from(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,a,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,i,s,o,r){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=D.fromPositions(a[0],a[0]),e.emitViewEvent(new nL(t,i,l,c,s,o,r))}revealPrimary(e,t,i,s,o,r){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new nL(t,i,null,l,s,o,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,s=t.length;i<s;i++){const o=t[i];e.push({inSelectionMode:!o.isEmpty(),selectionStart:{lineNumber:o.selectionStartLineNumber,column:o.selectionStartColumn},position:{lineNumber:o.positionLineNumber,column:o.positionColumn}})}return e}restoreState(e,t){const i=[];for(let s=0,o=t.length;s<o;s++){const r=t[s];let a=1,l=1;r.position&&r.position.lineNumber&&(a=r.position.lineNumber),r.position&&r.position.column&&(l=r.position.column);let c=a,d=l;r.selectionStart&&r.selectionStart.lineNumber&&(c=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(d=r.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,jt.fromModelSelections(i)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof ame){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const s=i.containsEvent(1);if(this._prevEditOperationType=0,s)this._cursors.dispose(),this._cursors=new vie(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const o=jt.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,o)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const o=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,jt.fromModelSelections(o))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,s){this.setStates(e,t,s,jt.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],s=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),s.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const o=this._model.deltaDecorations([],i),r=this._model.deltaDecorations([],s);this._autoClosedActions.push(new yie(this._model,o,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=xze.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const i=[],s=[];for(let o=0;o<e.commands.length;o++){const r=e.commands[o];r instanceof pG&&r.enclosingRange&&r.closeCharacterRange&&(i.push(r.closeCharacterRange),s.push(r.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,s),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,s,o){const r=sL.from(this._model,this);if(r.equals(s))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new sze(l,a,i)),!s||s.cursorState.length!==r.cursorState.length||r.cursorState.some((c,d)=>!c.modelState.equals(s.cursorState[d].modelState))){const c=s?s.cursorState.map(u=>u.modelState.selection):null,d=s?s.modelVersionId:0;e.emitOutgoingEvent(new PM(c,a,d,r.modelVersionId,t||"keyboard",i,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];if(!o.text||o.text.indexOf(`
`)>=0)return null;const r=o.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const a=r[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,d=o.text.length-r[2].length-1,u=o.text.lastIndexOf(c,d-1);if(u===-1)return null;t.push([u,d])}return t}executeEdits(e,t,i,s){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(i)),o&&(i[0]._isTracked=!0);const r=[],a=[],l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(o)for(let u=0,h=o.length;u<h;u++){const[f,m]=o[u],p=c[u],b=p.range.startLineNumber,v=p.range.startColumn-1+f,w=p.range.startColumn-1+m;r.push(new D(b,w+1,b,w+2)),a.push(new D(b,v+1,b,w+2))}const d=s(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,a)}_executeEdit(e,t,i,s=0){if(this.context.cursorConfig.readOnly)return;const o=sL.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){et(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,s,o,!1)&&this.revealAll(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return yie.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new oL(this._model,this.getSelections())}endComposition(e,t){const i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(pg.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){const s=t.length;let o=0;for(;o<s;){const r=wK(t,o),a=t.substr(o,r);this._executeEditOperation(pg.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),o+=r}}else this._executeEditOperation(pg.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,s,o,r){if(t.length===0&&i===0&&s===0){if(o!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new Ie(c.lineNumber,c.column+o,c.lineNumber,c.column+o)});this.setSelections(e,r,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(pg.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,s,o))},e,r)}paste(e,t,i,s,o){this._executeEdit(()=>{this._executeEditOperation(pg.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,s||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(kv.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new ar(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new ar(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}}class sL{static from(e,t){return new sL(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class yie{static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const s=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(s&&(t.push(s),s.startLineNumber!==s.endLineNumber))return!1}t.sort(D.compareRangesUsingStarts),e.sort(D.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class xze{static executeCommands(e,t,i){const s={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(s,i);for(let r=0,a=s.trackedRanges.length;r<a;r++)s.model._setTrackedRange(s.trackedRanges[r],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(i.operations.length===0)return null;const s=i.operations,o=this._getLoserCursorMap(s);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let c=0,d=s.length;c<d;c++)o.hasOwnProperty(s[c].identifier.major.toString())||r.push(s[c]);i.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,r,c=>{const d=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f]=[];for(const f of c)f.identifier&&d[f.identifier.major].push(f);const u=(f,m)=>f.identifier.minor-m.identifier.minor,h=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f].length>0?(d[f].sort(u),h[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>d[f],getTrackedSelection:m=>{const p=parseInt(m,10),b=e.model._getTrackedRange(e.trackedRanges[p]);return e.trackedRangesDirection[p]===0?new Ie(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):new Ie(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn)}})):h[f]=e.selectionsBefore[f];return h});a||(a=e.selectionsBefore);const l=[];for(const c in o)o.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],s=!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(a){const l=this._getEditOperationsFromCommand(e,o,a);i=i.concat(l.operations),s=s||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(e,t,i){const s=[];let o=0;const r=(u,h,f=!1)=>{D.isEmpty(u)&&h===""||s.push({identifier:{major:t,minor:o++},range:u,text:h,forceMoveMarkers:f,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const d={addEditOperation:r,addTrackedEditOperation:(u,h,f)=>{a=!0,r(u,h,f)},trackSelection:(u,h)=>{const f=Ie.liftSelection(u);let m;if(f.isEmpty())if(typeof h=="boolean")h?m=2:m=3;else{const v=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===v?m=2:m=3}else m=1;const p=e.trackedRanges.length,b=e.model._setTrackedRange(null,f,m);return e.trackedRanges[p]=b,e.trackedRangesDirection[p]=f.getDirection(),p.toString()}};try{i.getEditOperations(e.model,d)}catch(u){return et(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,s)=>-D.compareRangesUsingEnds(i.range,s.range));const t={};for(let i=1;i<e.length;i++){const s=e[i-1],o=e[i];if(D.getStartPosition(s.range).isBefore(D.getEndPosition(o.range))){let r;s.identifier.major>o.identifier.major?r=s.identifier.major:r=o.identifier.major,t[r.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===r&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class Lze{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class oL{static _capture(e,t){const i=[];for(const s of t){if(s.startLineNumber!==s.endLineNumber)return null;i.push(new Lze(e.getLineContent(s.startLineNumber),s.startColumn-1,s.endColumn-1))}return i}constructor(e,t){this._original=oL._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const i=oL._capture(e,t);if(!i||this._original.length!==i.length)return null;const s=[];for(let o=0,r=this._original.length;o<r;o++)s.push(oL._deduceOutcome(this._original[o],i[o]));return s}static _deduceOutcome(e,t){const i=Math.min(e.startSelection,t.startSelection,Um(e.text,t.text)),s=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,o2(e.text,t.text)),o=e.text.substring(i,e.text.length-s),r=t.text.substring(i,t.text.length-s);return new JVe(o,e.startSelection-i,e.endSelection-i,r,t.startSelection-i,t.endSelection-i)}}class kze{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,s)}}class Nze{constructor(e,t,i,s,o){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=s,this.minWidth=o,this.prefixSum=0}}var gm;let Ize=(gm=class{constructor(e,t,i,s){this._instanceId=Xue(++gm.INSTANCE_COUNT),this._pendingChanges=new kze,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=s}static findInsertionIndex(e,t,i){let s=0,o=e.length;for(;s<o;){const r=s+o>>>1;t===e[r].afterLineNumber?i<e[r].ordinal?o=r:s=r+1:t<e[r].afterLineNumber?o=r:s=r+1}return s}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(s,o,r,a)=>{t=!0,s=s|0,o=o|0,r=r|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new Nze(l,s,o,r,a)),l},changeOneWhitespace:(s,o,r)=>{t=!0,o=o|0,r=r|0,this._pendingChanges.change({id:s,newAfterLineNumber:o,newHeight:r})},removeWhitespace:s=>{t=!0,this._pendingChanges.remove({id:s})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const s=new Set;for(const l of i)s.add(l.id);const o=new Map;for(const l of t)o.set(l.id,l);const r=l=>{const c=[];for(const d of l)if(!s.has(d.id)){if(o.has(d.id)){const u=o.get(d.id);d.afterLineNumber=u.newAfterLineNumber,d.height=u.newHeight}c.push(d)}return c},a=r(this._arr).concat(r(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=gm.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,s=t.length;i<s;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const s=this._findWhitespaceIndex(e);if(s!==-1&&(this._arr[s].height!==i&&(this._arr[s].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==t)){const o=this._arr[s];this._removeWhitespace(s),o.afterLineNumber=t,this._insertWhitespace(o)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,s=this._arr.length;i<s;i++){const o=this._arr[i].afterLineNumber;e<=o&&o<=t?this._arr[i].afterLineNumber=e-1:o>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,s=this._arr.length;i<s;i++){const o=this._arr[i].afterLineNumber;e<=o&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,s=t.length-1;for(;i<=s;){const r=(s-i|0)/2|0,a=i+r|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else s=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let i;e>1?i=this._lineHeight*(e-1):i=0;const s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+s+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const i=this._lineHeight*e,s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+s+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,i=this._lineHeight;let s=1,o=t;for(;s<o;){const r=(s+o)/2|0,a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+i)s=r+1;else{if(e>=a)return r;o=r}}return s>t?t:s}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this._lineHeight,s=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(s)|0;let r=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(s)|0;const l=this.getWhitespacesCount()|0;let c,d;a===-1?(a=l,d=r+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let u=o,h=u;const f=5e5;let m=0;o>=f&&(m=Math.floor(o/f)*f,m=Math.floor(m/i)*i,h-=m);const p=[],b=e+(t-e)/2;let v=-1;for(let S=s;S<=r;S++){if(v===-1){const x=u,k=u+i;(x<=b&&b<k||x>b)&&(v=S)}for(u+=i,p[S-s]=h,h+=i;d===S;)h+=c,u+=c,a++,a>=l?d=r+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){r=S;break}}v===-1&&(v=r);const w=this.getVerticalOffsetForLineNumber(r)|0;let y=s,C=r;return y<C&&o<e&&y++,y<C&&w+i>t&&C--,{bigNumbersDelta:m,startLineNumber:s,endLineNumber:r,relativeVerticalOffset:p,centeredLineNumber:v,completelyVisibleStartLineNumber:y,completelyVisibleEndLineNumber:C,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeight*t:i=0;let s;return e>0?s=this.getWhitespacesAccumulatedHeight(e-1):s=0,i+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const s=this.getVerticalOffsetForWhitespaceIndex(i),o=this.getHeightForWhitespaceIndex(i);if(e>=s+o)return-1;for(;t<i;){const r=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(e>=a+l)t=r+1;else{if(e>=a)return r;i=r}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const s=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:r,verticalOffset:i,height:s}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),s=this.getWhitespacesCount()-1;if(i<0)return[];const o=[];for(let r=i;r<=s;r++){const a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(a>=t)break;o.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:a,height:l})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}},gm.INSTANCE_COUNT=0,gm);const Eze=125;class ox{constructor(e,t,i,s){e=e|0,t=t|0,i=i|0,s=s|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),s<0&&(s=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=s,this.scrollHeight=Math.max(i,s)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class Dze extends G{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new $),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new ox(0,0,0,0),this._scrollable=this._register(new T1({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,s=t.contentHeight!==e.contentHeight;(i||s)&&this._onDidContentSizeChange.fire(new CG(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class Tze extends G{constructor(e,t,i){super(),this._configuration=e;const s=this._configuration.options,o=s.get(146),r=s.get(84);this._linesLayout=new Ize(t,s.get(67),r.top,r.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new Dze(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new ox(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?Eze:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const i=t.get(84);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(146)){const i=t.get(146),s=i.contentWidth,o=i.height,r=this._scrollable.getScrollDimensions(),a=r.contentWidth;this._scrollable.setScrollDimensions(new ox(s,r.contentWidth,o,this._getContentHeight(s,o,a)))}else this._updateHeight();e.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const s=this._configuration.options.get(104);return s.horizontal===2||e>=t?0:s.horizontalScrollbarSize}_getContentHeight(e,t,i){const s=this._configuration.options;let o=this._linesLayout.getLinesTotalHeight();return s.get(106)?o+=Math.max(0,t-s.get(67)-s.get(84).bottom):s.get(104).ignoreHorizontalScrollbarInContentHeight||(o+=this._getHorizontalScrollbarHeight(e,i)),o}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,s=e.contentWidth;this._scrollable.setScrollDimensions(new ox(t,e.contentWidth,i,this._getContentHeight(t,i,s)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new Kte(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new Kte(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,i=e.get(147),s=e.get(50),o=e.get(146);if(i.isViewportWrapping){const r=e.get(73);return t>o.contentWidth+s.typicalHalfwidthCharacterWidth&&r.enabled&&r.side==="right"?t+o.verticalScrollbarWidth:t}else{const r=e.get(105)*s.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+r+o.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new ox(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),s=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-s,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class Rze{constructor(e,t,i,s,o){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=s,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const s=e.range,o=e.options;let r;if(o.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new U(s.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new U(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),1);r=new D(a.lineNumber,a.column,l.lineNumber,l.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(s,1);i=new npe(r,o),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,i=!1){const s=new D(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(s,t,i).inlineDecorations[0]}_getDecorationsInRange(e,t,i){const s=this._linesCollection.getDecorationsInRange(e,this.editorId,XR(this.configuration.options),t,i),o=e.startLineNumber,r=e.endLineNumber,a=[];let l=0;const c=[];for(let d=o;d<=r;d++)c[d-o]=[];for(let d=0,u=s.length;d<u;d++){const h=s[d],f=h.options;if(!LG(this.model,h))continue;const m=this._getOrCreateViewModelDecoration(h),p=m.range;if(a[l++]=m,f.inlineClassName){const b=new Yx(p,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),v=Math.max(o,p.startLineNumber),w=Math.min(r,p.endLineNumber);for(let y=v;y<=w;y++)c[y-o].push(b)}if(f.beforeContentClassName&&o<=p.startLineNumber&&p.startLineNumber<=r){const b=new Yx(new D(p.startLineNumber,p.startColumn,p.startLineNumber,p.startColumn),f.beforeContentClassName,1);c[p.startLineNumber-o].push(b)}if(f.afterContentClassName&&o<=p.endLineNumber&&p.endLineNumber<=r){const b=new Yx(new D(p.endLineNumber,p.endColumn,p.endLineNumber,p.endColumn),f.afterContentClassName,2);c[p.endLineNumber-o].push(b)}}return{decorations:a,inlineDecorations:c}}}function LG(n,e){return!(e.options.hideInCommentTokens&&kG(n,e)||e.options.hideInStringTokens&&NG(n,e))}function kG(n,e){return kpe(n,e.range,t=>t===1)}function NG(n,e){return kpe(n,e.range,t=>t===2)}function kpe(n,e,t){for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const s=n.tokenization.getLineTokens(i),o=i===e.startLineNumber,r=i===e.endLineNumber;let a=o?s.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<s.getCount()&&!(r&&s.getStartOffset(a)>e.endColumn-1);){if(!t(s.getStandardTokenType(a)))return!1;a++}}return!0}function LB(n,e){return n===null?e?AM.INSTANCE:OM.INSTANCE:new Mze(n,e)}class Mze{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const s=i>0?this._projectionData.breakOffsets[i-1]:0,o=this._projectionData.breakOffsets[i];let r;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,d)=>new cd(0,0,c+1,this._projectionData.injectionOptions[d],0));r=cd.applyInjectedText(e.getLineContent(t),a).substring(s,o)}else r=e.getValueInRange({startLineNumber:t,startColumn:s+1,endLineNumber:t,endColumn:o+1});return i>0&&(r=Cie(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const s=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],s),s[0]}getViewLinesData(e,t,i,s,o,r,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions;let u=null;if(c){u=[];let f=0,m=0;for(let p=0;p<l.getOutputLineCount();p++){const b=new Array;u[p]=b;const v=p>0?l.breakOffsets[p-1]:0,w=l.breakOffsets[p];for(;m<c.length;){const y=d[m].content.length,C=c[m]+f,S=C+y;if(C>w)break;if(v<S){const x=d[m];if(x.inlineClassName){const k=p>0?l.wrappedTextIndentLength:0,N=k+Math.max(C-v,0),E=k+Math.min(S-v,w-v);N!==E&&b.push(new NHe(N,E,x.inlineClassName,x.inlineClassNameAffectsLetterSpacing))}}if(S<=w)f+=y,m++;else break}}}let h;c?h=e.tokenization.getLineTokens(t).withInserted(c.map((f,m)=>({offset:f,text:d[m].content,tokenMetadata:us.defaultTokenMetadata}))):h=e.tokenization.getLineTokens(t);for(let f=i;f<i+s;f++){const m=o+f-i;if(!r[m]){a[m]=null;continue}a[m]=this._getViewLineData(h,u?u[f]:null,f)}}_getViewLineData(e,t,i){this._assertVisible();const s=this._projectionData,o=i>0?s.wrappedTextIndentLength:0,r=i>0?s.breakOffsets[i-1]:0,a=s.breakOffsets[i],l=e.sliceAndInflate(r,a,o);let c=l.getLineContent();i>0&&(c=Cie(s.wrappedTextIndentLength)+c);const d=this._projectionData.getMinOutputOffset(i)+1,u=c.length+1,h=i+1<this.getViewLineCount(),f=i===0?0:s.breakOffsetsVisibleColumn[i-1];return new rG(c,h,d,u,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){const s=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(s)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}const FA=class FA{constructor(){}isVisible(){return!0}setVisible(e){return e?this:OM.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const s=e.tokenization.getLineTokens(t),o=s.getLineContent();return new rG(o,!1,1,o.length+1,0,s.inflate(),null)}getViewLinesData(e,t,i,s,o,r,a){if(!r[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new U(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}};FA.INSTANCE=new FA;let AM=FA;const BA=class BA{constructor(){}isVisible(){return!1}setVisible(e){return e?AM.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,s,o,r,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};BA.INSTANCE=new BA;let OM=BA;const kB=[""];function Cie(n){if(n>=kB.length)for(let e=1;e<=n;e++)kB[e]=Pze(e);return kB[n]}function Pze(n){return new Array(n+1).join(" ")}class Aze{constructor(e,t,i,s,o,r,a,l,c,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=o,this.tabSize=r,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new Fze(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),o=i.length,r=this.createLineBreaksComputer(),a=new gf(cd.fromDecorations(s));for(let p=0;p<o;p++){const b=a.takeWhile(v=>v.lineNumber===p+1);r.addRequest(i[p],b,t?t[p]:null)}const l=r.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(p=>this.model.getDecorationRange(p)).sort(D.compareRangesUsingStarts);let u=1,h=0,f=-1,m=f+1<d.length?h+1:o+2;for(let p=0;p<o;p++){const b=p+1;b===m&&(f++,u=d[f].startLineNumber,h=d[f].endLineNumber,m=f+1<d.length?h+1:o+2);const v=b>=u&&b<=h,w=LB(l[p],!v);c[p]=w.getViewLineCount(),this.modelLineProjections[p]=w}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new YAe(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(h=>this.model.validateRange(h)),i=Oze(t),s=this.hiddenAreasDecorationIds.map(h=>this.model.getDecorationRange(h)).sort(D.compareRangesUsingStarts);if(i.length===s.length){let h=!1;for(let f=0;f<i.length;f++)if(!i[f].equalsRange(s[f])){h=!0;break}if(!h)return!1}const o=i.map(h=>({range:h,options:rt.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,o);const r=i;let a=1,l=0,c=-1,d=c+1<r.length?l+1:this.modelLineProjections.length+2,u=!1;for(let h=0;h<this.modelLineProjections.length;h++){const f=h+1;f===d&&(c++,a=r[c].startLineNumber,l=r[c].endLineNumber,d=c+1<r.length?l+1:this.modelLineProjections.length+2);let m=!1;if(f>=a&&f<=l?this.modelLineProjections[h].isVisible()&&(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!1),m=!0):(u=!0,this.modelLineProjections[h].isVisible()||(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!0),m=!0)),m){const p=this.modelLineProjections[h].getViewLineCount();this.projectedModelLineLineCounts.setValue(h,p)}}return u||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,s,o){const r=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===i,c=this.wrappingIndent===s,d=this.wordBreak===o;if(r&&a&&l&&c&&d)return!1;const u=r&&a&&!l&&c&&d;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=s,this.wordBreak=o;let h=null;if(u){h=[];for(let f=0,m=this.modelLineProjections.length;f<m;f++)h[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new ZH(s,o)}onModelLinesInserted(e,t,i,s){if(!e||e<=this._validModelVersionId)return null;const o=t>2&&!this.modelLineProjections[t-2].isVisible(),r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let d=0,u=s.length;d<u;d++){const h=LB(s[d],!o);l.push(h);const f=h.getViewLineCount();a+=f,c[d]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new YH(r,r+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const s=t-1,o=this.modelLineProjections[s].getViewLineCount(),r=this.modelLineProjections[s].isVisible(),a=LB(i,r);this.modelLineProjections[s]=a;const l=this.modelLineProjections[s].getViewLineCount();let c=!1,d=0,u=-1,h=0,f=-1,m=0,p=-1;o>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1,m=u+1,p=m+(o-l)-1,c=!0):o<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+o-1,h=u+1,f=h+(l-o)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1),this.projectedModelLineLineCounts.setValue(s,l);const b=d<=u?new Lpe(d,u-d+1):null,v=h<=f?new YH(h,f):null,w=m<=p?new ZH(m,p):null;return[c,b,v,w]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.guides.getActiveIndentGuide(s.lineNumber,o.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,s=t.remainder;return new Sie(i+1,s)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new U(e.modelLineNumber,s)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new U(e.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),s=this.getViewLineInfo(t),o=new Array;let r=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=s.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const d=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,u=l===s.modelLineNumber?s.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let h=d;h<u;h++)a.push(new Sie(l,h))}if(!c.isVisible()&&r){const d=new U(l-1,this.model.getLineMaxColumn(l-1)+1),u=D.fromPositions(r,d);o.push(new xie(u,a)),a=[],r=null}else c.isVisible()&&!r&&(r=new U(l,1))}if(r){const l=D.fromPositions(r,this.getModelEndPositionOfViewLine(s));o.push(new xie(l,a))}return o}getViewLinesBracketGuides(e,t,i,s){const o=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,r=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,o,s);for(const d of a.viewLines){const h=c[d.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let m=-1;if(f.column!==-1){const v=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(v.lineNumber===d.modelLineWrappedLineIdx)m=v.column;else if(v.lineNumber<d.modelLineWrappedLineIdx)m=this.getMinColumnOfViewLine(d);else if(v.lineNumber>d.modelLineWrappedLineIdx)return}const p=this.convertModelPositionToViewPosition(d.modelLineNumber,f.horizontalLine.endColumn),b=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return b.lineNumber===d.modelLineWrappedLineIdx?new k_(f.visibleColumn,m,f.className,new Vx(f.horizontalLine.top,p.column),-1,-1):b.lineNumber<d.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new k_(f.visibleColumn,m,f.className,new Vx(f.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});r.push(h.filter(f=>!!f))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let o=[];const r=[],a=[],l=i.lineNumber-1,c=s.lineNumber-1;let d=null;for(let m=l;m<=c;m++){const p=this.modelLineProjections[m];if(p.isVisible()){const b=p.getViewLineNumberOfModelPosition(0,m===l?i.column:1),v=p.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(m+1)),w=v-b+1;let y=0;w>1&&p.getViewLineMinColumn(this.model,m+1,v)===1&&(y=b===0?1:2),r.push(w),a.push(y),d===null&&(d=new U(m+1,0))}else d!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,m)),d=null)}d!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,s.lineNumber)),d=null);const u=t-e+1,h=new Array(u);let f=0;for(let m=0,p=o.length;m<p;m++){let b=o[m];const v=Math.min(u-f,r[m]),w=a[m];let y;w===2?y=0:w===1?y=1:y=v;for(let C=0;C<v;C++)C===y&&(b=0),h[f++]=b}return h}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const s=this.projectedModelLineLineCounts.getIndexOf(e-1);let o=e;const r=s.index,a=s.remainder,l=[];for(let c=r,d=this.model.getLineCount();c<d;c++){const u=this.modelLineProjections[c];if(!u.isVisible())continue;const h=c===r?a:0;let f=u.getViewLineCount()-h,m=!1;if(o+f>t&&(m=!0,f=t-o+1),u.getViewLinesData(this.model,c+1,h,f,o-e,i,l),o+=f,m)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const s=this.projectedModelLineLineCounts.getIndexOf(e-1),o=s.index,r=s.remainder,a=this.modelLineProjections[o],l=a.getViewLineMinColumn(this.model,o+1,r),c=a.getViewLineMaxColumn(this.model,o+1,r);t<l&&(t=l),t>c&&(t=c);const d=a.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new U(o+1,d)).equals(i)?new U(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),s=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new D(i.lineNumber,i.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),s=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new U(i.modelLineNumber,s))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new D(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2,s=!1,o=!1){const r=this.model.validatePosition(new U(e,t)),a=r.lineNumber,l=r.column;let c=a-1,d=!1;if(o)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,d=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,d=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new U(s?0:1,1);const u=1+this.projectedModelLineLineCounts.getPrefixSum(c);let h;return d?o?h=this.modelLineProjections[c].getViewPositionOfModelPosition(u,1,i):h=this.modelLineProjections[c].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(c+1),i):h=this.modelLineProjections[a-1].getViewPositionOfModelPosition(u,l,i),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return D.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new D(i.lineNumber,i.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const o=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(o,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;const s=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,s,o){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new D(r.lineNumber,1,a.lineNumber,a.column),t,i,s,o);let l=[];const c=r.lineNumber-1,d=a.lineNumber-1;let u=null;for(let p=c;p<=d;p++)if(this.modelLineProjections[p].isVisible())u===null&&(u=new U(p+1,p===c?r.column:1));else if(u!==null){const v=this.model.getLineMaxColumn(p);l=l.concat(this.model.getDecorationsInRange(new D(u.lineNumber,u.column,p,v),t,i,s)),u=null}u!==null&&(l=l.concat(this.model.getDecorationsInRange(new D(u.lineNumber,u.column,a.lineNumber,a.column),t,i,s)),u=null),l.sort((p,b)=>{const v=D.compareRangesUsingStarts(p.range,b.range);return v===0?p.id<b.id?-1:p.id>b.id?1:0:v});const h=[];let f=0,m=null;for(const p of l){const b=p.id;m!==b&&(m=b,h[f++]=p)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function Oze(n){if(n.length===0)return[];const e=n.slice();e.sort(D.compareRangesUsingStarts);const t=[];let i=e[0].startLineNumber,s=e[0].endLineNumber;for(let o=1,r=e.length;o<r;o++){const a=e[o];a.startLineNumber>s+1?(t.push(new D(i,1,s,1)),i=a.startLineNumber,s=a.endLineNumber):a.endLineNumber>s&&(s=a.endLineNumber)}return t.push(new D(i,1,s,1)),t}class Sie{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class xie{constructor(e,t){this.modelRange=e,this.viewLines=t}}class Fze{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,s){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,s)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class Bze{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new Wze(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,s){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,s)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new ZH(t,i)}onModelLinesInserted(e,t,i,s){return new YH(t,i)}onModelLineChanged(e,t,i){return[!1,new Lpe(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,s=new Array(i);for(let o=0;o<i;o++)s[o]=0;return s}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new rG(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const s=this.model.getLineCount();e=Math.min(Math.max(1,e),s),t=Math.min(Math.max(1,t),s);const o=[];for(let r=e;r<=t;r++){const a=r-e;o[a]=i[a]?this.getViewLineData(r):null}return o}getDecorationsInRange(e,t,i,s,o){return this.model.getDecorationsInRange(e,t,i,s,o)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class Wze{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const Pp=Jl.Right;class Hze{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*Pp/8))}reset(e){const t=Math.ceil((e+1)*Pp/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,i){i&&(this.persist|=1<<e-1);for(let s=t.startLineNumber;s<=t.endLineNumber;s++){const o=Pp*s+(e-1);this.lanes[o>>>3]|=1<<o%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(s))}}getLanesAtLine(e){const t=[];let i=Pp*e;for(let s=0;s<Pp;s++)(this.persist&1<<s||this.lanes[i>>>3]&1<<i%8)&&t.push(s+1),i++;return t.length?t:[Jl.Center]}countAtLine(e){let t=Pp*e,i=0;for(let s=0;s<Pp;s++)(this.persist&1<<s||this.lanes[t>>>3]&1<<t%8)&&i++,t++;return i}}let Vze=class extends G{constructor(e,t,i,s,o,r,a,l,c,d){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this._transactionalTarget=d,this.hiddenAreasModel=new zze,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new hze,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new k0(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new li(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=IG.create(this.model),this.glyphLanes=new Hze(0),this.model.isTooLargeForTokenization())this._lines=new Bze(this.model);else{const u=this._configuration.options,h=u.get(50),f=u.get(140),m=u.get(147),p=u.get(139),b=u.get(130);this._lines=new Aze(this._editorId,this.model,s,o,h,this.model.getOptions().tabSize,f,m.wrappingColumn,p,b)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Sze(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new Tze(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(u=>{u.scrollTopChanged&&this._handleVisibleLinesChanged(),u.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new aze(u)),this._eventDispatcher.emitOutgoingEvent(new xG(u.oldScrollWidth,u.oldScrollLeft,u.oldScrollHeight,u.oldScrollTop,u.scrollWidth,u.scrollLeft,u.scrollHeight,u.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(u=>{this._eventDispatcher.emitOutgoingEvent(u)})),this._decorations=new Rze(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(u=>{try{const h=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(h,u)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(TM.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new dze)})),this._register(this._themeService.onDidColorThemeChange(u=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new lze(u))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new D(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new oze(e)),this._eventDispatcher.emitOutgoingEvent(new SG(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new tze)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new ize)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new U(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new kie(t,this._viewportStart.startLineDelta)}return new kie(null,0)}_onConfigurationChanged(e,t){const i=this._captureStableViewport(),s=this._configuration.options,o=s.get(50),r=s.get(140),a=s.get(147),l=s.get(139),c=s.get(130);this._lines.setWrappingSettings(o,r,a.wrappingColumn,l,c)&&(e.emitViewEvent(new CD),e.emitViewEvent(new SD),e.emitViewEvent(new Mp(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(92)&&(this._decorations.reset(),e.emitViewEvent(new Mp(null))),t.hasChanged(99)&&(this._decorations.reset(),e.emitViewEvent(new Mp(null))),e.emitViewEvent(new nze(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),k0.shouldRecreate(t)&&(this.cursorConfig=new k0(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const i=this._eventDispatcher.beginEmitViewEvents();let s=!1,o=!1;const r=e instanceof Z_?e.rawContentChangedEvent.changes:e.changes,a=e instanceof Z_?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const u of r)switch(u.changeType){case 4:{for(let h=0;h<u.detail.length;h++){const f=u.detail[h];let m=u.injectedTexts[h];m&&(m=m.filter(p=>!p.ownerId||p.ownerId===this._editorId)),l.addRequest(f,m,null)}break}case 2:{let h=null;u.injectedText&&(h=u.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(u.detail,h,null);break}}const c=l.finalize(),d=new gf(c);for(const u of r)switch(u.changeType){case 1:{this._lines.onModelFlushed(),i.emitViewEvent(new CD),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),s=!0;break}case 3:{const h=this._lines.onModelLinesDeleted(a,u.fromLineNumber,u.toLineNumber);h!==null&&(i.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber)),s=!0;break}case 4:{const h=d.takeCount(u.detail.length),f=this._lines.onModelLinesInserted(a,u.fromLineNumber,u.toLineNumber,h);f!==null&&(i.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),s=!0;break}case 2:{const h=d.dequeue(),[f,m,p,b]=this._lines.onModelLineChanged(a,u.lineNumber,h);o=f,m&&i.emitViewEvent(m),p&&(i.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),b&&(i.emitViewEvent(b),this.viewLayout.onLinesDeleted(b.fromLineNumber,b.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!s&&o&&(i.emitViewEvent(new SD),i.emitViewEvent(new Mp(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const i=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(i){const s=this.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),o=this.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber);this.viewLayout.setScrollPosition({scrollTop:o+this._viewportStart.startLineDelta},1)}}try{const i=this._eventDispatcher.beginEmitViewEvents();e instanceof Z_&&i.emitOutgoingEvent(new wze(e.contentChangedEvent)),this._cursor.onModelContentChanged(i,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let i=0,s=e.ranges.length;i<s;i++){const o=e.ranges[i],r=this.coordinatesConverter.convertModelPositionToViewPosition(new U(o.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new U(o.toLineNumber,this.model.getLineMaxColumn(o.toLineNumber))).lineNumber;t[i]={fromLineNumber:r,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new cze(t)),this._eventDispatcher.emitOutgoingEvent(new Cze(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new rze),this.cursorConfig=new k0(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new vze(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new k0(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new bze(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new CD),t.emitViewEvent(new SD),t.emitViewEvent(new Mp(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new k0(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new yze(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new Mp(e)),this._eventDispatcher.emitOutgoingEvent(new _ze(e))}))}setHiddenAreas(e,t){var r;this.hiddenAreasModel.setHiddenAreas(t,e);const i=this.hiddenAreasModel.getMergedRanges();if(i===this.previousHiddenAreas)return;this.previousHiddenAreas=i;const s=this._captureStableViewport();let o=!1;try{const a=this._eventDispatcher.beginEmitViewEvents();o=this._lines.setHiddenAreas(i),o&&(a.emitViewEvent(new CD),a.emitViewEvent(new SD),a.emitViewEvent(new Mp(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const l=(r=s.viewportStartModelPosition)==null?void 0:r.lineNumber;l&&i.some(d=>d.startLineNumber<=l&&l<=d.endLineNumber)||s.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),o&&this._eventDispatcher.emitOutgoingEvent(new mze)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(146),t=this._configuration.options.get(67),i=Math.max(20,Math.round(e.height/t)),s=this.viewLayout.getLinesViewportData(),o=Math.max(1,s.completelyVisibleStartLineNumber-i),r=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new D(o,this.getLineMinColumn(o),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];const s=[];let o=0,r=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let d=0,u=i.length;d<u;d++){const h=i[d].startLineNumber,f=i[d].endLineNumber;f<r||h>l||(r<h&&(s[o++]=new D(r,a,h-1,this.model.getLineMaxColumn(h-1))),r=f+1,a=1)}return(r<l||r===l&&a<c)&&(s[o++]=new D(r,a,l,c)),s}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new D(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,s=t.completelyVisibleEndLineNumber;return new D(i,this.getLineMinColumn(i),s,this.getLineMaxColumn(s))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),s=this.coordinatesConverter.convertViewPositionToModelPosition(new U(i,this.getLineMinColumn(i))),o=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:s,firstPositionDeltaTop:o}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),s=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,s){return this._lines.getViewLinesBracketGuides(e,t,i,s)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=fo(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Xc(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const s=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,s)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const i=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new Ma(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,i,s,r.tokens,t,o,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const s=this._lines.getViewLinesData(e,t,i);return new kHe(this.getTabSize(),s)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,XR(this._configuration.options)),i=new jze;for(const s of t){const o=s.options,r=o.overviewRuler;if(!r)continue;const a=r.position;if(a===0)continue;const l=r.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);i.accept(l,o.zIndex,c,d,a)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const i=t.options.overviewRuler;i==null||i.invalidateCachedColor();const s=t.options.minimap;s==null||s.invalidateCachedColor()}}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e),s=this.model.modifyPosition(i,t);return this.coordinatesConverter.convertModelPositionToViewPosition(s)}deduceModelPositionRelativeToViewPosition(e,t,i){const s=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const r=this.model.getOffsetAt(s)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,i){const s=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(D.compareRangesUsingStarts);let o=!1,r=!1;for(const l of e)l.isEmpty()?o=!0:r=!0;if(!r){if(!t)return"";const l=e.map(d=>d.startLineNumber);let c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+s);return c}if(o&&t){const l=[];let c=0;for(const d of e){const u=d.startLineNumber;d.isEmpty()?u!==c&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(d,i?2:0)),c=u}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===Do||e.length!==1)return null;let s=e[0];if(s.isEmpty()){if(!t)return null;const d=s.startLineNumber;s=new D(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const o=this._configuration.options.get(50),r=this._getColorMap(),l=/[:;\\\/<>]/.test(o.fontFamily)||o.fontFamily===Eo.fontFamily;let c;return l?c=Eo.fontFamily:(c=o.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Eo.fontFamily}`),{mode:i,html:`<div style="color: ${r[1]};background-color: ${r[2]};font-family: ${c};font-weight: ${o.fontWeight};font-size: ${o.fontSize}px;line-height: ${o.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,r)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,s=e.startColumn,o=e.endLineNumber,r=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=o;c++){const d=this.model.tokenization.getLineTokens(c),u=d.getLineContent(),h=c===i?s-1:0,f=c===o?r-1:u.length;u===""?l+="<br>":l+=e3e(u,d.inflate(),t,h,f,a,As)}return l}_getColorMap(){const e=nn.getColorMap(),t=["#000000"];if(e)for(let i=1,s=e.length;i<s;i++)t[i]=oe.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(s=>this._cursor.setStates(s,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(s=>this._cursor.setSelections(s,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new pze);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(s=>this._cursor.executeEdits(s,e,t,i))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,s,o){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,i,s,o))}paste(e,t,i,s){this._executeCursorEdit(o=>this._cursor.paste(o,e,t,i,s))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealAllCursors(e,t,i=!1){this._withViewEventsCollector(s=>this._cursor.revealAll(s,e,i,0,t,0))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(s=>this._cursor.revealPrimary(s,e,i,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new D(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new nL(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new D(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new nL(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,s,o){this._withViewEventsCollector(r=>r.emitViewEvent(new nL(e,!1,i,null,s,t,o)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new uze),this._eventDispatcher.emitOutgoingEvent(new gze))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges(()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class IG{static create(e){const t=e._setTrackedRange(null,new D(1,1,1,1),1);return new IG(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,s,o){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=s,this._startLineDelta=o}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new U(t,e.getLineMinColumn(t))),s=e.model._setTrackedRange(this._modelTrackedRange,new D(i.lineNumber,i.column,i.lineNumber,i.column),1),o=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=s,this._startLineDelta=r-o}invalidate(){this._isValid=!1}}class jze{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,s,o){const r=this._asMap[e];if(r){const a=r.data,l=a[a.length-3],c=a[a.length-1];if(l===o&&c+1>=i){s>c&&(a[a.length-1]=s);return}a.push(o,i,s)}else{const a=new cN(e,t,[o,i,s]);this._asMap[e]=a,this.asArray.push(a)}}}class zze{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const i=this.hiddenAreas.get(e);i&&Lie(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,i)=>Uze(t,i),[]);return Lie(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function Uze(n,e){const t=[];let i=0,s=0;for(;i<n.length&&s<e.length;){const o=n[i],r=e[s];if(o.endLineNumber<r.startLineNumber-1)t.push(n[i++]);else if(r.endLineNumber<o.startLineNumber-1)t.push(e[s++]);else{const a=Math.min(o.startLineNumber,r.startLineNumber),l=Math.max(o.endLineNumber,r.endLineNumber);t.push(new D(a,1,l,1)),i++,s++}}for(;i<n.length;)t.push(n[i++]);for(;s<e.length;)t.push(e[s++]);return t}function Lie(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].equalsRange(e[t]))return!1;return!0}class kie{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),s=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:s+this.startLineDelta},1)}}var $ze=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Qu=function(n,e){return function(t,i){e(t,i,n)}},Gp,lb;let bN=(lb=class extends G{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,t,i,s,o,r,a,l,c,d,u,h){super(),this.languageConfigurationService=u,this._deliveryQueue=QTe(),this._contributions=this._register(new Xje),this._onDidDispose=this._register(new $),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new Nie({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new Nie({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Qs(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new $({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new $),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new $),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),o.willCreateCodeEditor();const f={...t};this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++Kze,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,i.contextMenuId??(i.isSimpleWidget?Ne.SimpleEditorContext:Ne.EditorContext),f,d)),this._register(this._configuration.onDidChange(b=>{this._onDidChangeConfiguration.fire(b);const v=this._configuration.options;if(b.hasChanged(146)){const w=v.get(146);this._onDidLayoutChange.fire(w)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=o,this._commandService=r,this._themeService=l,this._register(new Gze(this,this._contextKeyService)),this._register(new Zze(this,this._contextKeyService,h)),this._instantiationService=this._register(s.createChild(new W1([qe,this._contextKeyService]))),this._modelData=null,this._focusTracker=new Yze(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let m;Array.isArray(i.contributions)?m=i.contributions:m=K_.getEditorContributions(),this._contributions.initialize(this,m,this._instantiationService);for(const b of K_.getEditorActions()){if(this._actions.has(b.id)){et(new Error(`Cannot have two actions with the same id ${b.id}`));continue}const v=new Spe(b.id,b.label,b.alias,b.metadata,b.precondition??void 0,w=>this._instantiationService.invokeFunction(y=>Promise.resolve(b.runEditorCommand(y,this,w))),this._contextKeyService);this._actions.set(v.id,v)}const p=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new dMe(this._domElement,{onDragOver:b=>{if(!p())return;const v=this.getTargetAtClientPoint(b.clientX,b.clientY);v!=null&&v.position&&this.showDropIndicatorAt(v.position)},onDrop:async b=>{if(!p()||(this.removeDropIndicator(),!b.dataTransfer))return;const v=this.getTargetAtClientPoint(b.clientX,b.clientY);v!=null&&v.position&&this._onDropIntoEditor.fire({position:v.position,event:b})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)==null||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i,s){return new EH(e,t,i,this._domElement,s)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return zI.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Qt.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){var t;try{this._beginUpdate();const i=e;if(this._modelData===null&&i===null||this._modelData&&this._modelData.model===i)return;const s={oldModelUrl:((t=this._modelData)==null?void 0:t.model.uri)||null,newModelUrl:(i==null?void 0:i.uri)||null};this._onWillChangeModel.fire(s);const o=this.hasTextFocus(),r=this._detachModel();this._attachModel(i),o&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(r),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,s){const o=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,s)}getTopForLineNumber(e,t=!1){return this._modelData?Gp._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?Gp._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,s=!1){const o=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,s)}getBottomForLineNumber(e,t=!1){if(!this._modelData)return-1;const i=this._modelData.model.getLineMaxColumn(e);return Gp._getVerticalOffsetAfterPosition(this._modelData,e,i,t)}setHiddenAreas(e,t){var i;(i=this._modelData)==null||i.viewModel.setHiddenAreas(e.map(s=>D.lift(s)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return Bn.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!U.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,s){if(!this._modelData)return;if(!D.isIRange(e))throw new Error("Invalid arguments");const o=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",i,r,t,s)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new D(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,s){if(!U.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new D(e.lineNumber,e.column,e.lineNumber,e.column),t,i,s)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const i=Ie.isISelection(e),s=D.isIRange(e);if(!i&&!s)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(s){const o={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(o,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new Ie(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,s){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new D(e,1,t,1),i,!1,s)}revealRange(e,t=0,i=!1,s=!0){this._revealRange(e,i?1:0,s,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,s){if(!D.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(D.lift(e),t,i,s)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let s=0,o=e.length;s<o;s++)if(!Ie.isISelection(e[s]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:t,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(t.contributionsState||{});const s=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(s)}}handleInitialized(){var e;(e=this._getViewModel())==null||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){i=i||{};try{switch(this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const o=i;this._type(e,o.text||"");return}case"replacePreviousChar":{const o=i;this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);return}case"compositionType":{const o=i;this._compositionType(e,o.text||"",o.replacePrevCharCnt||0,o.replaceNextCharCnt||0,o.positionDelta||0);return}case"paste":{const o=i;this._paste(e,o.text||"",o.pasteOnNewLine||!1,o.multicursorText||null,o.mode||null,o.clipboardEvent);return}case"cut":this._cut(e);return}const s=this.getAction(t);if(s){Promise.resolve(s.run(i)).then(void 0,et);return}if(!this._modelData||this._triggerEditorCommand(e,t,i))return;this._triggerCommand(t,i)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,s,o){this._modelData&&this._modelData.viewModel.compositionType(t,i,s,o,e)}_paste(e,t,i,s,o,r){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,i,s,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:r,range:new D(l.lineNumber,l.column,c.lineNumber,c.column),languageId:o})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const s=K_.getEditorCommand(t);return s?(i=i||{},i.source=e,this._instantiationService.invokeFunction(o=>{Promise.resolve(s.runEditorCommand(o,this,i)).then(void 0,et)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(92))return!1;let s;return i?Array.isArray(i)?s=()=>i:s=i:s=()=>null,this._modelData.viewModel.executeEdits(e,t,s),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new Xze(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,XR(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,XR(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(i=>i.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,s=i.get(146),o=Gp._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+s.glyphMarginWidth+s.lineNumbersWidth+s.decorationsWidth-this.getScrollLeft();return{top:o,left:r,height:i.get(67)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Cs(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const i=e.onBeforeAttached(),s=new Vze(this._id,this._configuration,e,wG.create(je(this._domElement)),yG.create(this._configuration.options),a=>zr(je(this._domElement),a),this.languageConfigurationService,this._themeService,i,{batchChanges:a=>{try{return this._beginUpdate(),a()}finally{this._endUpdate()}}});t.push(e.onWillDispose(()=>this.setModel(null))),t.push(s.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const u=this.getOption(80),h=_("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",u);this._notificationService.prompt(B4.Warning,h,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:_("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let u=0,h=a.selections.length;u<h;u++)l[u]=a.selections[u].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const d={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(d);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[o,r]=this._createView(s);if(r){this._domElement.appendChild(o.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];o.addContentWidget(this._contentWidgets[d])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];o.addOverlayWidget(this._overlayWidgets[d])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];o.addGlyphMarginWidget(this._glyphMarginWidgets[d])}o.render(!1,!0),o.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new qze(e,s,o,r,t,i)}_createView(e){let t;this.isSimpleWidget?t={paste:(o,r,a,l)=>{this._paste("keyboard",o,r,a,l)},type:o=>{this._type("keyboard",o)},compositionType:(o,r,a,l)=>{this._compositionType("keyboard",o,r,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(o,r,a,l)=>{const c={text:o,pasteOnNewLine:r,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:o=>{const r={text:o};this._commandService.executeCommand("type",r)},compositionType:(o,r,a,l)=>{if(a||l){const c={text:o,replacePrevCharCnt:r,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:o,replaceCharCnt:r};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new SF(e.coordinatesConverter);return i.onKeyDown=o=>this._onKeyDown.fire(o),i.onKeyUp=o=>this._onKeyUp.fire(o),i.onContextMenu=o=>this._onContextMenu.fire(o),i.onMouseMove=o=>this._onMouseMove.fire(o),i.onMouseLeave=o=>this._onMouseLeave.fire(o),i.onMouseDown=o=>this._onMouseDown.fire(o),i.onMouseUp=o=>this._onMouseUp.fire(o),i.onMouseDrag=o=>this._onMouseDrag.fire(o),i.onMouseDrop=o=>this._onMouseDrop.fire(o),i.onMouseDropCanceled=o=>this._onMouseDropCanceled.fire(o),i.onMouseWheel=o=>this._onMouseWheel.fire(o),[new zH(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var i;if((i=this._contributionsDisposable)==null||i.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&t.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new D(e.lineNumber,e.column,e.lineNumber,e.column),options:Gp.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}},Gp=lb,lb.dropIntoEditorDecorationOptions=rt.register({description:"workbench-dnd-target",className:"dnd-target"}),lb);bN=Gp=$ze([Qu(3,Ae),Qu(4,Ut),Qu(5,Ci),Qu(6,qe),Qu(7,Vn),Qu(8,wn),Qu(9,Yr),Qu(10,Yi),Qu(11,xe)],bN);let Kze=0;class qze{constructor(e,t,i,s,o,r){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=s,this.listenersToRemove=o,this.attachedView=r}dispose(){gi(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class Nie extends G{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new $(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new $(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class Qs extends ${constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class Gze extends G{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=R.editorSimpleInput.bindTo(t),this._editorFocus=R.focus.bindTo(t),this._textInputFocus=R.textInputFocus.bindTo(t),this._editorTextFocus=R.editorTextFocus.bindTo(t),this._tabMovesFocus=R.tabMovesFocus.bindTo(t),this._editorReadonly=R.readOnly.bindTo(t),this._inDiffEditor=R.inDiffEditor.bindTo(t),this._editorColumnSelection=R.columnSelection.bindTo(t),this._hasMultipleSelections=R.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=R.hasNonEmptySelection.bindTo(t),this._canUndo=R.canUndo.bindTo(t),this._canRedo=R.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(jC.onDidChangeTabFocus(i=>this._tabMovesFocus.set(i))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(jC.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class Zze extends G{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=R.languageId.bindTo(t),this._hasCompletionItemProvider=R.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=R.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=R.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=R.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=R.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=R.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=R.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=R.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=R.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=R.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=R.hasReferenceProvider.bindTo(t),this._hasRenameProvider=R.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=R.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=R.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=R.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=R.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=R.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=R.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=R.isInEmbeddedEditor.bindTo(t);const s=()=>this._update();this._register(e.onDidChangeModel(s)),this._register(e.onDidChangeModelLanguage(s)),this._register(i.completionProvider.onDidChange(s)),this._register(i.codeActionProvider.onDidChange(s)),this._register(i.codeLensProvider.onDidChange(s)),this._register(i.definitionProvider.onDidChange(s)),this._register(i.declarationProvider.onDidChange(s)),this._register(i.implementationProvider.onDidChange(s)),this._register(i.typeDefinitionProvider.onDidChange(s)),this._register(i.hoverProvider.onDidChange(s)),this._register(i.documentHighlightProvider.onDidChange(s)),this._register(i.documentSymbolProvider.onDidChange(s)),this._register(i.referenceProvider.onDidChange(s)),this._register(i.renameProvider.onDidChange(s)),this._register(i.documentFormattingEditProvider.onDidChange(s)),this._register(i.documentRangeFormattingEditProvider.onDidChange(s)),this._register(i.signatureHelpProvider.onDidChange(s)),this._register(i.inlayHintsProvider.onDidChange(s)),s()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===tt.walkThroughSnippet||e.uri.scheme===tt.vscodeChatCodeBlock)})}}class Yze extends G{constructor(e,t){super(),this._onChange=this._register(new $),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(ld(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(ld(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class Xze{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(s=>{this._isChangingDecorations||e.call(t,s)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const s=e.getDecorationRange(i);s&&t.push(s)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const Qze=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),Jze=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function NB(n){return Qze+encodeURIComponent(n.toString())+Jze}const eUe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),tUe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function iUe(n){return eUe+encodeURIComponent(n.toString())+tUe}yl((n,e)=>{const t=n.getColor(j4);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${NB(t)}") repeat-x bottom left; }`);const i=n.getColor(vf);i&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${NB(i)}") repeat-x bottom left; }`);const s=n.getColor(Du);s&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${NB(s)}") repeat-x bottom left; }`);const o=n.getColor(qOe);o&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${iUe(o)}") no-repeat bottom left; }`);const r=n.getColor(D7e);r&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${r.rgba.a}; }`)});class fd{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new fd(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const s=e.getVisibleRanges();if(s.length>0){t=s[0].getStartPosition();const o=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-o}return new fd(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,s,o){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=s,this._cursorPosition=o}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i,1)}}function nUe(n,e,t,i){if(n.length===0)return e;if(e.length===0)return n;const s=[];let o=0,r=0;for(;o<n.length&&r<e.length;){const a=n[o],l=e[r],c=t(a),d=t(l);c<d?(s.push(a),o++):c>d?(s.push(l),r++):(s.push(i(a,l)),o++,r++)}for(;o<n.length;)s.push(n[o]),o++;for(;r<e.length;)s.push(e[r]),r++;return s}function FM(n,e){const t=new ne,i=n.createDecorationsCollection();return t.add(AI({debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const o=e.read(s);i.set(o)})),t.add({dispose:()=>{i.clear()}}),t}function Sw(n,e){return n.appendChild(e),Pe(()=>{e.remove()})}function sUe(n,e){return n.prepend(e),Pe(()=>{e.remove()})}class Npe extends G{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new rpe(e,t)),this._width=pt(this,this.elementSizeObserver.getWidth()),this._height=pt(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(i=>qi(s=>{this._width.set(this.elementSizeObserver.getWidth(),s),this._height.set(this.elementSizeObserver.getHeight(),s)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function Iie(n,e,t){let i=e.get(),s=i,o=i;const r=pt("animatedValue",i);let a=-1;const l=300;let c;t.add(OI({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(u,h)=>(u.didChange(e)&&(h.animate=h.animate||u.change),!0)},(u,h)=>{c!==void 0&&(n.cancelAnimationFrame(c),c=void 0),s=o,i=e.read(u),a=Date.now()-(h.animate?0:l),d()}));function d(){const u=Date.now()-a;o=Math.floor(oUe(u,s,i-s,l)),u<l?c=n.requestAnimationFrame(d):o=i,r.set(o,void 0)}return r}function oUe(n,e,t,i){return n===i?e+t:t*(-Math.pow(2,-10*n/i)+1)+e}class EG extends G{constructor(e,t,i){super(),this._register(new XH(e,i)),this._register(yf(i,{height:t.actualHeight,top:t.actualTop}))}}class xw{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=pt(this,void 0),this._actualHeight=pt(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=i=>{this._actualTop.set(i,void 0)},this.onComputedHeight=i=>{this._actualHeight.set(i,void 0)}}}const WA=class WA{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${WA._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};WA._counter=0;let XH=WA;function yf(n,e){return Je(t=>{for(let[i,s]of Object.entries(e))s&&typeof s=="object"&&"read"in s&&(s=s.read(t)),typeof s=="number"&&(s=`${s}px`),i=i.replace(/[A-Z]/g,o=>"-"+o.toLowerCase()),n.style[i]=s})}function BM(n,e,t,i){const s=new ne,o=[];return s.add(nr((r,a)=>{const l=e.read(r),c=new Map,d=new Map;t&&t(!0),n.changeViewZones(u=>{for(const h of o)u.removeZone(h),i==null||i.delete(h);o.length=0;for(const h of l){const f=u.addZone(h);h.setZoneId&&h.setZoneId(f),o.push(f),i==null||i.add(f),c.set(h,f)}}),t&&t(!1),a.add(OI({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(u,h){const f=d.get(u.changedObservable);return f!==void 0&&h.zoneIds.push(f),!0}},(u,h)=>{for(const f of l)f.onChange&&(d.set(f.onChange,c.get(f)),f.onChange.read(u));t&&t(!0),n.changeViewZones(f=>{for(const m of h.zoneIds)f.layoutZone(m)}),t&&t(!1)}))})),s.add({dispose(){t&&t(!0),n.changeViewZones(r=>{for(const a of o)r.removeZone(a)}),i==null||i.clear(),t&&t(!1)}}),s}class rUe extends Gi{dispose(){super.dispose(!0)}}function Eie(n,e){const t=Mk(e,s=>s.original.startLineNumber<=n.lineNumber);if(!t)return D.fromPositions(n);if(t.original.endLineNumberExclusive<=n.lineNumber){const s=n.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return D.fromPositions(new U(s,n.column))}if(!t.innerChanges)return D.fromPositions(new U(t.modified.startLineNumber,1));const i=Mk(t.innerChanges,s=>s.originalRange.getStartPosition().isBeforeOrEqual(n));if(!i){const s=n.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return D.fromPositions(new U(s,n.column))}if(i.originalRange.containsPosition(n))return i.modifiedRange;{const s=aUe(i.originalRange.getEndPosition(),n);return D.fromPositions(s.addToPosition(i.modifiedRange.getEndPosition()))}}function aUe(n,e){return n.lineNumber===e.lineNumber?new ec(0,e.column-n.column):new ec(e.lineNumber-n.lineNumber,e.column-1)}function lUe(n,e){let t;return n.filter(i=>{const s=e(i,t);return t=i,s})}class WM{static create(e,t=void 0){return new Die(e,e,t)}static createWithDisposable(e,t,i=void 0){const s=new ne;return s.add(t),s.add(e),new Die(e,s,i)}}class Die extends WM{constructor(e,t,i){super(),this.object=e,this._disposable=t,this._debugOwner=i,this._refCount=1,this._isDisposed=!1,this._owners=[],i&&this._addOwner(i)}_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new cUe(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);t!==-1&&this._owners.splice(t,1)}}}class cUe extends WM{constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var DG=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},TG=function(n,e){return function(t,i){e(t,i,n)}};const dUe=Di("diff-review-insert",he.add,_("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),uUe=Di("diff-review-remove",he.remove,_("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),hUe=Di("diff-review-close",he.close,_("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));var Zy;let I_=(Zy=class extends G{constructor(e,t,i,s,o,r,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=s,this._width=o,this._height=r,this._diffs=a,this._models=l,this._instantiationService=c,this._state=gp(this,(d,u)=>{const h=this._visible.read(d);if(this._parentNode.style.visibility=h?"visible":"hidden",!h)return null;const f=u.add(this._instantiationService.createInstance(QH,this._diffs,this._models,this._setVisible,this._canClose)),m=u.add(this._instantiationService.createInstance(JH,this._parentNode,f,this._width,this._height,this._models));return{model:f,view:m}}).recomputeInitiallyAndOnChange(this._store)}next(){qi(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){qi(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){qi(e=>{this._setVisible(!1,e)})}},Zy._ttPolicy=Ef("diffReview",{createHTML:e=>e}),Zy);I_=DG([TG(8,Ae)],I_);let QH=class extends G{constructor(e,t,i,s,o){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=s,this._accessibilitySignalService=o,this._groups=pt(this,[]),this._currentGroupIdx=pt(this,0),this._currentElementIdx=pt(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((r,a)=>this._groups.read(a)[r]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((r,a)=>{var l;return(l=this.currentGroup.read(a))==null?void 0:l.lines[r]}),this._register(Je(r=>{const a=this._diffs.read(r);if(!a){this._groups.set([],void 0);return}const l=fUe(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());qi(c=>{const d=this._models.getModifiedPosition();if(d){const u=l.findIndex(h=>(d==null?void 0:d.lineNumber)<h.range.modified.endLineNumberExclusive);u!==-1&&this._currentGroupIdx.set(u,c)}this._groups.set(l,c)})})),this._register(Je(r=>{const a=this.currentElement.read(r);(a==null?void 0:a.type)===yo.Deleted?this._accessibilitySignalService.playSignal(ha.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(a==null?void 0:a.type)===yo.Added&&this._accessibilitySignalService.playSignal(ha.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(Je(r=>{const a=this.currentElement.read(r);if(a&&a.type!==yo.Header){const l=a.modifiedLineNumber??a.diff.modified.startLineNumber;this._models.modifiedSetSelection(D.fromPositions(new U(l,1)))}}))}_goToGroupDelta(e,t){const i=this.groups.get();!i||i.length<=1||Cv(t,s=>{this._currentGroupIdx.set(vt.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),s),this._currentElementIdx.set(0,s)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||qi(i=>{this._currentElementIdx.set(vt.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const i=t.lines.indexOf(e);i!==-1&&qi(s=>{this._currentElementIdx.set(i,s)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===yo.Deleted?this._models.originalReveal(D.fromPositions(new U(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==yo.Header?D.fromPositions(new U(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};QH=DG([TG(4,pp)],QH);const RS=3;function fUe(n,e,t){const i=[];for(const s of iK(n,(o,r)=>r.modified.startLineNumber-o.modified.endLineNumberExclusive<2*RS)){const o=[];o.push(new mUe);const r=new at(Math.max(1,s[0].original.startLineNumber-RS),Math.min(s[s.length-1].original.endLineNumberExclusive+RS,e+1)),a=new at(Math.max(1,s[0].modified.startLineNumber-RS),Math.min(s[s.length-1].modified.endLineNumberExclusive+RS,t+1));due(s,(d,u)=>{const h=new at(d?d.original.endLineNumberExclusive:r.startLineNumber,u?u.original.startLineNumber:r.endLineNumberExclusive),f=new at(d?d.modified.endLineNumberExclusive:a.startLineNumber,u?u.modified.startLineNumber:a.endLineNumberExclusive);h.forEach(m=>{o.push(new bUe(m,f.startLineNumber+(m-h.startLineNumber)))}),u&&(u.original.forEach(m=>{o.push(new pUe(u,m))}),u.modified.forEach(m=>{o.push(new _Ue(u,m))}))});const l=s[0].modified.join(s[s.length-1].modified),c=s[0].original.join(s[s.length-1].original);i.push(new gUe(new lo(l,c),o))}return i}var yo;(function(n){n[n.Header=0]="Header",n[n.Unchanged=1]="Unchanged",n[n.Deleted=2]="Deleted",n[n.Added=3]="Added"})(yo||(yo={}));class gUe{constructor(e,t){this.range=e,this.lines=t}}class mUe{constructor(){this.type=yo.Header}}class pUe{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=yo.Deleted,this.modifiedLineNumber=void 0}}class _Ue{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=yo.Added,this.originalLineNumber=void 0}}class bUe{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=yo.Unchanged}}let JH=class extends G{constructor(e,t,i,s,o,r){super(),this._element=e,this._model=t,this._width=i,this._height=s,this._models=o,this._languageService=r,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new Ea(a)),this._register(Je(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new Or("diffreview.close",_("label.close","Close"),"close-diff-review "+Ke.asClassName(hUe),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new EI(this._content,{})),ys(this.domNode,this._scrollbar.getDomNode(),a),this._register(Je(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(Pe(()=>{ys(this.domNode)})),this._register(yf(this.domNode,{width:this._width,height:this._height})),this._register(yf(this._content,{width:this._width,height:this._height})),this._register(nr((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(Ji(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),s=document.createElement("div");s.className="diff-review-table",s.setAttribute("role","list"),s.setAttribute("aria-label",_("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),Cs(s,i.get(50)),ys(this._content,s);const o=this._models.getOriginalModel(),r=this._models.getModifiedModel();if(!o||!r)return;const a=o.getOptions(),l=r.getOptions(),c=i.get(67),d=this._model.currentGroup.get();for(const u of(d==null?void 0:d.lines)||[]){if(!d)break;let h;if(u.type===yo.Header){const m=document.createElement("div");m.className="diff-review-row",m.setAttribute("role","listitem");const p=d.range,b=this._model.currentGroupIndex.get(),v=this._model.groups.get().length,w=x=>x===0?_("no_lines_changed","no lines changed"):x===1?_("one_line_changed","1 line changed"):_("more_lines_changed","{0} lines changed",x),y=w(p.original.length),C=w(p.modified.length);m.setAttribute("aria-label",_({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",b+1,v,p.original.startLineNumber,y,p.modified.startLineNumber,C));const S=document.createElement("div");S.className="diff-review-cell diff-review-summary",S.appendChild(document.createTextNode(`${b+1}/${v}: @@ -${p.original.startLineNumber},${p.original.length} +${p.modified.startLineNumber},${p.modified.length} @@`)),m.appendChild(S),h=m}else h=this._createRow(u,c,this._width.get(),t,o,a,i,r,l);s.appendChild(h);const f=Te(m=>this._model.currentElement.read(m)===u);e.add(Je(m=>{const p=f.read(m);h.tabIndex=p?0:-1,p&&h.focus()})),e.add(Q(h,"focus",()=>{this._model.goToLine(u)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,s,o,r,a,l,c){const d=s.get(146),u=d.glyphMarginWidth+d.lineNumbersWidth,h=a.get(146),f=10+h.glyphMarginWidth+h.lineNumbersWidth;let m="diff-review-row",p="";const b="diff-review-spacer";let v=null;switch(e.type){case yo.Added:m="diff-review-row line-insert",p=" char-insert",v=dUe;break;case yo.Deleted:m="diff-review-row line-delete",p=" char-delete",v=uUe;break}const w=document.createElement("div");w.style.minWidth=i+"px",w.className=m,w.setAttribute("role","listitem"),w.ariaLevel="";const y=document.createElement("div");y.className="diff-review-cell",y.style.height=`${t}px`,w.appendChild(y);const C=document.createElement("span");C.style.width=u+"px",C.style.minWidth=u+"px",C.className="diff-review-line-number"+p,e.originalLineNumber!==void 0?C.appendChild(document.createTextNode(String(e.originalLineNumber))):C.innerText=" ",y.appendChild(C);const S=document.createElement("span");S.style.width=f+"px",S.style.minWidth=f+"px",S.style.paddingRight="10px",S.className="diff-review-line-number"+p,e.modifiedLineNumber!==void 0?S.appendChild(document.createTextNode(String(e.modifiedLineNumber))):S.innerText=" ",y.appendChild(S);const x=document.createElement("span");if(x.className=b,v){const E=document.createElement("span");E.className=Ke.asClassName(v),E.innerText="  ",x.appendChild(E)}else x.innerText="  ";y.appendChild(x);let k;if(e.modifiedLineNumber!==void 0){let E=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);I_._ttPolicy&&(E=I_._ttPolicy.createHTML(E)),y.insertAdjacentHTML("beforeend",E),k=l.getLineContent(e.modifiedLineNumber)}else{let E=this._getLineHtml(o,s,r.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);I_._ttPolicy&&(E=I_._ttPolicy.createHTML(E)),y.insertAdjacentHTML("beforeend",E),k=o.getLineContent(e.originalLineNumber)}k.length===0&&(k=_("blankLine","blank"));let N="";switch(e.type){case yo.Unchanged:e.originalLineNumber===e.modifiedLineNumber?N=_({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",k,e.originalLineNumber):N=_("equalLine","{0} original line {1} modified line {2}",k,e.originalLineNumber,e.modifiedLineNumber);break;case yo.Added:N=_("insertLine","+ {0} modified line {1}",k,e.modifiedLineNumber);break;case yo.Deleted:N=_("deleteLine","- {0} original line {1}",k,e.originalLineNumber);break}return w.setAttribute("aria-label",N),w}_getLineHtml(e,t,i,s,o){const r=e.getLineContent(s),a=t.get(50),l=us.createEmpty(r,o),c=Ma.isBasicASCII(r,e.mightContainNonBasicASCII()),d=Ma.containsRTL(r,c,e.mightContainRTL());return _F(new _p(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,r,!1,c,d,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==Vm.OFF,null)).html}};JH=DG([TG(5,ji)],JH);class vUe{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}P("diffEditor.move.border","#8b8b8b9c",_("diffEditor.move.border","The border color for text that got moved in the diff editor."));P("diffEditor.moveActive.border","#FFA500",_("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));P("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},_("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const wUe=Di("diff-insert",he.add,_("diffInsertIcon","Line decoration for inserts in the diff editor.")),Ipe=Di("diff-remove",he.remove,_("diffRemoveIcon","Line decoration for removals in the diff editor.")),HM=rt.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+Ke.asClassName(wUe),marginClassName:"gutter-insert"}),vN=rt.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+Ke.asClassName(Ipe),marginClassName:"gutter-delete"}),Tie=rt.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),Rie=rt.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),VM=rt.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),RG=rt.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),MG=rt.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),UC=rt.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),PG=rt.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),AG=rt.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var Epe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},eV=function(n,e){return function(t,i){e(t,i,n)}},Zp;const KI=kt("diffProviderFactoryService");let tV=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(iV,e)}};tV=Epe([eV(0,Ae)],tV);Tt(KI,tV,1);var cb;let iV=(cb=class{constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new $,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)==null||e.dispose()}async computeDiff(e,t,i,s){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,i,s);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new Ia(new at(1,2),new at(1,t.getLineCount()+1),[new ua(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const o=JSON.stringify([e.uri.toString(),t.uri.toString()]),r=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),a=Zp.diffCache.get(o);if(a&&a.context===r)return a.result;const l=ds.create(),c=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),d=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:d,timedOut:(c==null?void 0:c.quitEarly)??!0,detectedMoves:i.computeMoves?(c==null?void 0:c.moves.length)??0:-1}),s.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!c)throw new Error("no diff result available");return Zp.diffCache.size>10&&Zp.diffCache.delete(Zp.diffCache.keys().next().value),Zp.diffCache.set(o,{result:c,context:r}),c}setOptions(e){var i;let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((i=this.diffAlgorithmOnDidChangeSubscription)==null||i.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),t=!0),t&&this.onDidChangeEventEmitter.fire()}},Zp=cb,cb.diffCache=new Map,cb);iV=Zp=Epe([eV(1,fr),eV(2,Zs)],iV);function xF(){return U9&&!!U9.VSCODE_DEV}function Dpe(n){if(xF()){const e=yUe();return e.add(n),{dispose(){e.delete(n)}}}else return{dispose(){}}}function yUe(){xD||(xD=new Set);const n=globalThis;return n.$hotReload_applyNewExports||(n.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e},i=[];for(const s of xD){const o=s(t);o&&i.push(o)}if(i.length>0)return s=>{let o=!1;for(const r of i)r(s)&&(o=!0);return o}}),xD}let xD;xF()&&Dpe(({oldExports:n,newSrc:e,config:t})=>{if(t.mode==="patch-prototype")return i=>{var s,o;for(const r in i){const a=i[r];if(console.log(`[hot-reload] Patching prototype methods of '${r}'`,{exportedItem:a}),typeof a=="function"&&a.prototype){const l=n[r];if(l){for(const c of Object.getOwnPropertyNames(a.prototype)){const d=Object.getOwnPropertyDescriptor(a.prototype,c),u=Object.getOwnPropertyDescriptor(l.prototype,c);((s=d==null?void 0:d.value)==null?void 0:s.toString())!==((o=u==null?void 0:u.value)==null?void 0:o.toString())&&console.log(`[hot-reload] Patching prototype method '${r}.${c}'`),Object.defineProperty(l.prototype,c,d)}i[r]=l}}}return!0}});function kr(n,e){return CUe([n],e),n}function CUe(n,e){xF()&&Ts("reload",i=>Dpe(({oldExports:s})=>{if([...Object.values(s)].some(o=>n.includes(o)))return o=>(i(void 0),!0)})).read(e)}var SUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},xUe=function(n,e){return function(t,i){e(t,i,n)}};let nV=class extends G{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=pt(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=pt(this,void 0),this.diff=this._diff,this._unchangedRegions=pt(this,void 0),this.unchangedRegions=Te(this,a=>{var l;return this._options.hideUnchangedRegions.read(a)?((l=this._unchangedRegions.read(a))==null?void 0:l.regions)??[]:(qi(c=>{var d;for(const u of((d=this._unchangedRegions.get())==null?void 0:d.regions)||[])u.collapseAll(c)}),[])}),this.movedTextToCompare=pt(this,void 0),this._activeMovedText=pt(this,void 0),this._hoveredMovedText=pt(this,void 0),this.activeMovedText=Te(this,a=>this.movedTextToCompare.read(a)??this._hoveredMovedText.read(a)??this._activeMovedText.read(a)),this._cancellationTokenSource=new Gi,this._diffProvider=Te(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=Ts("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(Pe(()=>this._cancellationTokenSource.cancel()));const s=P1("contentChangedSignal"),o=this._register(new li(()=>s.trigger(void 0),200));this._register(Je(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(m=>m.isDragged.read(a)))return;const c=l.originalDecorationIds.map(m=>e.original.getDecorationRange(m)).map(m=>m?at.fromRangeInclusive(m):void 0),d=l.modifiedDecorationIds.map(m=>e.modified.getDecorationRange(m)).map(m=>m?at.fromRangeInclusive(m):void 0),u=l.regions.map((m,p)=>!c[p]||!d[p]?void 0:new qg(c[p].startLineNumber,d[p].startLineNumber,c[p].length,m.visibleLineCountTop.read(a),m.visibleLineCountBottom.read(a))).filter(mu),h=[];let f=!1;for(const m of iK(u,(p,b)=>p.getHiddenModifiedRange(a).endLineNumberExclusive===b.getHiddenModifiedRange(a).startLineNumber))if(m.length>1){f=!0;const p=m.reduce((v,w)=>v+w.lineCount,0),b=new qg(m[0].originalLineNumber,m[0].modifiedLineNumber,p,m[0].visibleLineCountTop.get(),m[m.length-1].visibleLineCountBottom.get());h.push(b)}else h.push(m[0]);if(f){const m=e.original.deltaDecorations(l.originalDecorationIds,h.map(b=>({range:b.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),p=e.modified.deltaDecorations(l.modifiedDecorationIds,h.map(b=>({range:b.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));qi(b=>{this._unchangedRegions.set({regions:h,originalDecorationIds:m,modifiedDecorationIds:p},b)})}}));const r=(a,l,c)=>{const d=qg.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let u;const h=this._unchangedRegions.get();if(h){const b=h.originalDecorationIds.map(C=>e.original.getDecorationRange(C)).map(C=>C?at.fromRangeInclusive(C):void 0),v=h.modifiedDecorationIds.map(C=>e.modified.getDecorationRange(C)).map(C=>C?at.fromRangeInclusive(C):void 0);let y=lUe(h.regions.map((C,S)=>{if(!b[S]||!v[S])return;const x=b[S].length;return new qg(b[S].startLineNumber,v[S].startLineNumber,x,Math.min(C.visibleLineCountTop.get(),x),Math.min(C.visibleLineCountBottom.get(),x-C.visibleLineCountTop.get()))}).filter(mu),(C,S)=>!S||C.modifiedLineNumber>=S.modifiedLineNumber+S.lineCount&&C.originalLineNumber>=S.originalLineNumber+S.lineCount).map(C=>new lo(C.getHiddenOriginalRange(c),C.getHiddenModifiedRange(c)));y=lo.clip(y,at.ofLength(1,e.original.getLineCount()),at.ofLength(1,e.modified.getLineCount())),u=lo.inverse(y,e.original.getLineCount(),e.modified.getLineCount())}const f=[];if(u)for(const b of d){const v=u.filter(w=>w.original.intersectsStrict(b.originalUnchangedRange)&&w.modified.intersectsStrict(b.modifiedUnchangedRange));f.push(...b.setVisibleRanges(v,l))}else f.push(...d);const m=e.original.deltaDecorations((h==null?void 0:h.originalDecorationIds)||[],f.map(b=>({range:b.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),p=e.modified.deltaDecorations((h==null?void 0:h.modifiedDecorationIds)||[],f.map(b=>({range:b.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:f,originalDecorationIds:m,modifiedDecorationIds:p},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=Bh.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),o.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=Bh.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),o.schedule()})),this._register(nr(async(a,l)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),o.cancel(),s.read(a);const c=this._diffProvider.read(a);c.onChangeSignal.read(a),kr(efe,a),kr(_W,a),this._isDiffUpToDate.set(!1,void 0);let d=[];l.add(e.original.onDidChangeContent(f=>{const m=Bh.fromModelContentChanges(f.changes);d=J2(d,m)}));let u=[];l.add(e.modified.onDidChangeContent(f=>{const m=Bh.fromModelContentChanges(f.changes);u=J2(u,m)}));let h=await c.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(h=LUe(h,e.original,e.modified),h=(e.original,e.modified,void 0)??h,h=(e.original,e.modified,void 0)??h,qi(f=>{r(h,f),this._lastDiff=h;const m=OG.fromDiffResult(h);this._diff.set(m,f),this._isDiffUpToDate.set(!0,f);const p=this.movedTextToCompare.get();this.movedTextToCompare.set(p?this._lastDiff.moves.find(b=>b.lineRangeMapping.modified.intersect(p.lineRangeMapping.modified)):void 0,f)}))}))}ensureModifiedLineIsVisible(e,t,i){var o,r;if(((o=this.diff.get())==null?void 0:o.mappings.length)===0)return;const s=((r=this._unchangedRegions.get())==null?void 0:r.regions)||[];for(const a of s)if(a.getHiddenModifiedRange(void 0).contains(e)){a.showModifiedLine(e,t,i);return}}ensureOriginalLineIsVisible(e,t,i){var o,r;if(((o=this.diff.get())==null?void 0:o.mappings.length)===0)return;const s=((r=this._unchangedRegions.get())==null?void 0:r.regions)||[];for(const a of s)if(a.getHiddenOriginalRange(void 0).contains(e)){a.showOriginalLine(e,t,i);return}}async waitForDiff(){await bge(this.isDiffUpToDate,e=>e)}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:e==null?void 0:e.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){var s;const t=(s=e.collapsedRegions)==null?void 0:s.map(o=>at.deserialize(o.range)),i=this._unchangedRegions.get();!i||!t||qi(o=>{for(const r of i.regions)for(const a of t)if(r.modifiedUnchangedRange.intersect(a)){r.setHiddenModifiedRange(a,o);break}})}};nV=SUe([xUe(2,KI)],nV);function LUe(n,e,t){return{changes:n.changes.map(i=>new Ia(i.original,i.modified,i.innerChanges?i.innerChanges.map(s=>kUe(s,e,t)):void 0)),moves:n.moves,identical:n.identical,quitEarly:n.quitEarly}}function kUe(n,e,t){let i=n.originalRange,s=n.modifiedRange;return i.startColumn===1&&s.startColumn===1&&(i.endColumn!==1||s.endColumn!==1)&&i.endColumn===e.getLineMaxColumn(i.endLineNumber)&&s.endColumn===t.getLineMaxColumn(s.endLineNumber)&&i.endLineNumber<e.getLineCount()&&s.endLineNumber<t.getLineCount()&&(i=i.setEndPosition(i.endLineNumber+1,1),s=s.setEndPosition(s.endLineNumber+1,1)),new ua(i,s)}class OG{static fromDiffResult(e){return new OG(e.changes.map(t=>new Tpe(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,s){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=s}}class Tpe{constructor(e){this.lineRangeMapping=e}}class qg{static fromDiffs(e,t,i,s,o){const r=Ia.inverse(e,t,i),a=[];for(const l of r){let c=l.original.startLineNumber,d=l.modified.startLineNumber,u=l.original.length;const h=c===1&&d===1,f=c+u===t+1&&d+u===i+1;(h||f)&&u>=o+s?(h&&!f&&(u-=o),f&&!h&&(c+=o,d+=o,u-=o),a.push(new qg(c,d,u,0,0))):u>=o*2+s&&(c+=o,d+=o,u-=o*2,a.push(new qg(c,d,u,0,0)))}return a}get originalUnchangedRange(){return at.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return at.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,s,o){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=pt(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=pt(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=Te(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=pt(this,void 0);const r=Math.max(Math.min(s,this.lineCount),0),a=Math.max(Math.min(o,this.lineCount-s),0);qQ(s===r),qQ(o===a),this._visibleLineCountTop.set(r,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const i=[],s=new el(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let o=this.originalLineNumber,r=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(s.ranges.length===0)this.showAll(t),i.push(this);else{let l=0;for(const c of s.ranges){const d=l===s.ranges.length-1;l++;const u=(d?a:c.endLineNumberExclusive)-r,h=new qg(o,r,u,0,0);h.setHiddenModifiedRange(c,t),i.push(h),o=h.originalUnchangedRange.endLineNumberExclusive,r=h.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return at.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return at.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const i=e.startLineNumber-this.modifiedLineNumber,s=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,s,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(e=10,t){const i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){const s=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),o=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&s<o||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+s,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+o,i)}showOriginalLine(e,t,i){const s=e-this.originalLineNumber,o=this.originalLineNumber+this.lineCount-e;t===0&&s<o||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+o-s,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+s-o,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}}class NUe extends G{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,s,o,r,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=s,this._editor=o,this._viewLineCounts=r,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Ke.asClassName(he.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const d=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${d}px`,this._diffActions.style.lineHeight=`${d}px`,this._marginDomNode.appendChild(this._diffActions);let u=0;const h=i.getOption(128)&&!rd,f=(m,p)=>{this._contextMenuService.showContextMenu({domForShadowRoot:h?i.getDomNode()??void 0:void 0,getAnchor:()=>({x:m,y:p}),getActions:()=>{const b=[],v=s.modified.isEmpty;return b.push(new Or("diff.clipboard.copyDeletedContent",v?s.original.length>1?_("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):_("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.original.length>1?_("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):_("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const y=this._originalTextModel.getValueInRange(s.original.toExclusiveRange());await this._clipboardService.writeText(y)})),s.original.length>1&&b.push(new Or("diff.clipboard.copyDeletedLineContent",v?_("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.original.startLineNumber+u):_("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.original.startLineNumber+u),void 0,!0,async()=>{let y=this._originalTextModel.getLineContent(s.original.startLineNumber+u);y===""&&(y=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(y)})),i.getOption(92)||b.push(new Or("diff.inline.revertChange",_("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),b},autoSelectFirstItem:!0})};this._register(Ji(this._diffActions,"mousedown",m=>{if(!m.leftButton)return;const{top:p,height:b}=un(this._diffActions),v=Math.floor(d/3);m.preventDefault(),f(m.posx,p+b+v)})),this._register(i.onMouseMove(m=>{(m.target.type===8||m.target.type===5)&&m.target.detail.viewZoneId===this._getViewZoneId()?(u=this._updateLightBulbPosition(this._marginDomNode,m.event.browserEvent.y,d),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(m=>{m.event.leftButton&&(m.target.type===8||m.target.type===5)&&m.target.detail.viewZoneId===this._getViewZoneId()&&(m.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,m.event.browserEvent.y,d),f(m.event.posx,m.event.posy+d))}))}_updateLightBulbPosition(e,t,i){const{top:s}=un(e),o=t-s,r=Math.floor(o/i),a=r*i;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],r<l)return c}return r}}const Mie=Ef("diffEditorWidget",{createHTML:n=>n});function IUe(n,e,t,i){Cs(i,e.fontInfo);const s=t.length>0,o=new N1(1e4);let r=0,a=0;const l=[];for(let h=0;h<n.lineTokens.length;h++){const f=h+1,m=n.lineTokens[h],p=n.lineBreakData[h],b=Lo.filter(t,f,1,Number.MAX_SAFE_INTEGER);if(p){let v=0;for(const w of p.breakOffsets){const y=m.sliceAndInflate(v,w,0);r=Math.max(r,Pie(a,y,Lo.extractWrapped(b,v,w),s,n.mightContainNonBasicASCII,n.mightContainRTL,e,o)),a++,v=w}l.push(p.breakOffsets.length)}else l.push(1),r=Math.max(r,Pie(a,m,b,s,n.mightContainNonBasicASCII,n.mightContainRTL,e,o)),a++}r+=e.scrollBeyondLastColumn;const c=o.build(),d=Mie?Mie.createHTML(c):c;i.innerHTML=d;const u=r*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:u,viewLineCounts:l}}class EUe{constructor(e,t,i,s){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=s}}class FG{static fromEditor(e){var o;const t=e.getOptions(),i=t.get(50),s=t.get(146);return new FG(((o=e.getModel())==null?void 0:o.getOptions().tabSize)||0,i,t.get(33),i.typicalHalfwidthCharacterWidth,t.get(105),t.get(67),s.decorationsWidth,t.get(118),t.get(100),t.get(95),t.get(51))}constructor(e,t,i,s,o,r,a,l,c,d,u){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=s,this.scrollBeyondLastColumn=o,this.lineHeight=r,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=d,this.fontLigatures=u}}function Pie(n,e,t,i,s,o,r,a){a.appendString('<div class="view-line'),i||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(n*r.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=Ma.isBasicASCII(l,s),d=Ma.containsRTL(l,c,o),u=UI(new _p(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,d,0,e,t,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==Vm.OFF,null),a);return a.appendString("</div>"),u.characterMapping.getHorizontalOffset(u.characterMapping.length)}var DUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Aie=function(n,e){return function(t,i){e(t,i,n)}};let sV=class extends G{constructor(e,t,i,s,o,r,a,l,c,d){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=s,this._diffEditorWidget=o,this._canIgnoreViewZoneUpdateEvent=r,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=d,this._originalTopPadding=pt(this,0),this._originalScrollOffset=pt(this,0),this._originalScrollOffsetAnimated=Iie(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=pt(this,0),this._modifiedScrollOffset=pt(this,0),this._modifiedScrollOffsetAnimated=Iie(this._targetWindow,this._modifiedScrollOffset,this._store);const u=pt("invalidateAlignmentsState",0),h=this._register(new li(()=>{u.set(u.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(y=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(y=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(y=>{(y.hasChanged(147)||y.hasChanged(67))&&h.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(y=>{(y.hasChanged(147)||y.hasChanged(67))&&h.schedule()}));const f=this._diffModel.map(y=>y?ii(this,y.model.original.onDidChangeTokens,()=>y.model.original.tokenization.backgroundTokenizationState===2):void 0).map((y,C)=>y==null?void 0:y.read(C)),m=Te(y=>{const C=this._diffModel.read(y),S=C==null?void 0:C.diff.read(y);if(!C||!S)return null;u.read(y);const k=this._options.renderSideBySide.read(y);return Oie(this._editors.original,this._editors.modified,S.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,k)}),p=Te(y=>{var x;const C=(x=this._diffModel.read(y))==null?void 0:x.movedTextToCompare.read(y);if(!C)return null;u.read(y);const S=C.changes.map(k=>new Tpe(k));return Oie(this._editors.original,this._editors.modified,S,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function b(){const y=document.createElement("div");return y.className="diagonal-fill",y}const v=this._register(new ne);this.viewZones=gp(this,(y,C)=>{var Z,V,le,Fe;v.clear();const S=m.read(y)||[],x=[],k=[],N=this._modifiedTopPadding.read(y);N>0&&k.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:N,showInHiddenAreas:!0,suppressMouseDown:!0});const E=this._originalTopPadding.read(y);E>0&&x.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:E,showInHiddenAreas:!0,suppressMouseDown:!0});const B=this._options.renderSideBySide.read(y),A=B||(Z=this._editors.modified._getViewModel())==null?void 0:Z.createLineBreaksComputer();if(A){const ke=this._editors.original.getModel();for(const De of S)if(De.diff)for(let ce=De.originalRange.startLineNumber;ce<De.originalRange.endLineNumberExclusive;ce++){if(ce>ke.getLineCount())return{orig:x,mod:k};A==null||A.addRequest(ke.getLineContent(ce),null,null)}}const O=(A==null?void 0:A.finalize())??[];let W=0;const T=this._editors.modified.getOption(67),M=(V=this._diffModel.read(y))==null?void 0:V.movedTextToCompare.read(y),z=((le=this._editors.original.getModel())==null?void 0:le.mightContainNonBasicASCII())??!1,ee=((Fe=this._editors.original.getModel())==null?void 0:Fe.mightContainRTL())??!1,q=FG.fromEditor(this._editors.modified);for(const ke of S)if(ke.diff&&!B&&(!this._options.useTrueInlineDiffRendering.read(y)||!BG(ke.diff))){if(!ke.originalRange.isEmpty){f.read(y);const ce=document.createElement("div");ce.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const Re=this._editors.original.getModel();if(ke.originalRange.endLineNumberExclusive-1>Re.getLineCount())return{orig:x,mod:k};const Ee=new EUe(ke.originalRange.mapToLineArray(ve=>Re.tokenization.getLineTokens(ve)),ke.originalRange.mapToLineArray(ve=>O[W++]),z,ee),it=[];for(const ve of ke.diff.innerChanges||[])it.push(new Yx(ve.originalRange.delta(-(ke.diff.original.startLineNumber-1)),UC.className,0));const Ge=IUe(Ee,q,it,ce),J=document.createElement("div");if(J.className="inline-deleted-margin-view-zone",Cs(J,q.fontInfo),this._options.renderIndicators.read(y))for(let ve=0;ve<Ge.heightInLines;ve++){const nt=document.createElement("div");nt.className=`delete-sign ${Ke.asClassName(Ipe)}`,nt.setAttribute("style",`position:absolute;top:${ve*T}px;width:${q.lineDecorationsWidth}px;height:${T}px;right:0;`),J.appendChild(nt)}let Le;v.add(new NUe(()=>Fg(Le),J,this._editors.modified,ke.diff,this._diffEditorWidget,Ge.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let ve=0;ve<Ge.viewLineCounts.length;ve++){const nt=Ge.viewLineCounts[ve];nt>1&&x.push({afterLineNumber:ke.originalRange.startLineNumber+ve,domNode:b(),heightInPx:(nt-1)*T,showInHiddenAreas:!0,suppressMouseDown:!0})}k.push({afterLineNumber:ke.modifiedRange.startLineNumber-1,domNode:ce,heightInPx:Ge.heightInLines*T,minWidthInPx:Ge.minWidthInPx,marginDomNode:J,setZoneId(ve){Le=ve},showInHiddenAreas:!0,suppressMouseDown:!0})}const De=document.createElement("div");De.className="gutter-delete",x.push({afterLineNumber:ke.originalRange.endLineNumberExclusive-1,domNode:b(),heightInPx:ke.modifiedHeightInPx,marginDomNode:De,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const De=ke.modifiedHeightInPx-ke.originalHeightInPx;if(De>0){if(M!=null&&M.lineRangeMapping.original.delta(-1).deltaLength(2).contains(ke.originalRange.endLineNumberExclusive-1))continue;x.push({afterLineNumber:ke.originalRange.endLineNumberExclusive-1,domNode:b(),heightInPx:De,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let ce=function(){const Ee=document.createElement("div");return Ee.className="arrow-revert-change "+Ke.asClassName(he.arrowRight),C.add(Q(Ee,"mousedown",it=>it.stopPropagation())),C.add(Q(Ee,"click",it=>{it.stopPropagation(),o.revert(ke.diff)})),ge("div",{},Ee)};if(M!=null&&M.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(ke.modifiedRange.endLineNumberExclusive-1))continue;let Re;ke.diff&&ke.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(y)&&(Re=ce()),k.push({afterLineNumber:ke.modifiedRange.endLineNumberExclusive-1,domNode:b(),heightInPx:-De,marginDomNode:Re,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const ke of p.read(y)??[]){if(!(M!=null&&M.lineRangeMapping.original.intersect(ke.originalRange))||!(M!=null&&M.lineRangeMapping.modified.intersect(ke.modifiedRange)))continue;const De=ke.modifiedHeightInPx-ke.originalHeightInPx;De>0?x.push({afterLineNumber:ke.originalRange.endLineNumberExclusive-1,domNode:b(),heightInPx:De,showInHiddenAreas:!0,suppressMouseDown:!0}):k.push({afterLineNumber:ke.modifiedRange.endLineNumberExclusive-1,domNode:b(),heightInPx:-De,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:x,mod:k}});let w=!1;this._register(this._editors.original.onDidScrollChange(y=>{y.scrollLeftChanged&&!w&&(w=!0,this._editors.modified.setScrollLeft(y.scrollLeft),w=!1)})),this._register(this._editors.modified.onDidScrollChange(y=>{y.scrollLeftChanged&&!w&&(w=!0,this._editors.original.setScrollLeft(y.scrollLeft),w=!1)})),this._originalScrollTop=ii(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=ii(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(Je(y=>{const C=this._originalScrollTop.read(y)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(y))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(y));C!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(C,1)})),this._register(Je(y=>{const C=this._modifiedScrollTop.read(y)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(y))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(y));C!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(C,1)})),this._register(Je(y=>{var x;const C=(x=this._diffModel.read(y))==null?void 0:x.movedTextToCompare.read(y);let S=0;if(C){const k=this._editors.original.getTopForLineNumber(C.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();S=this._editors.modified.getTopForLineNumber(C.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-k}S>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(S,void 0)):S<0?(this._modifiedTopPadding.set(-S,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-S,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+S,void 0,!0)}))}};sV=DUe([Aie(8,Mf),Aie(9,Zr)],sV);function Oie(n,e,t,i,s,o){const r=new gf(Fie(n,i)),a=new gf(Fie(e,s)),l=n.getOption(67),c=e.getOption(67),d=[];let u=0,h=0;function f(m,p){for(;;){let b=r.peek(),v=a.peek();if(b&&b.lineNumber>=m&&(b=void 0),v&&v.lineNumber>=p&&(v=void 0),!b&&!v)break;const w=b?b.lineNumber-u:Number.MAX_VALUE,y=v?v.lineNumber-h:Number.MAX_VALUE;w<y?(r.dequeue(),v={lineNumber:b.lineNumber-u+h,heightInPx:0}):w>y?(a.dequeue(),b={lineNumber:v.lineNumber-h+u,heightInPx:0}):(r.dequeue(),a.dequeue()),d.push({originalRange:at.ofLength(b.lineNumber,1),modifiedRange:at.ofLength(v.lineNumber,1),originalHeightInPx:l+b.heightInPx,modifiedHeightInPx:c+v.heightInPx,diff:void 0})}}for(const m of t){let y=function(C,S,x=!1){var A,O;if(C<w||S<v)return;if(b)b=!1;else if(!x&&(C===w||S===v))return;const k=new at(w,C),N=new at(v,S);if(k.isEmpty&&N.isEmpty)return;const E=((A=r.takeWhile(W=>W.lineNumber<C))==null?void 0:A.reduce((W,T)=>W+T.heightInPx,0))??0,B=((O=a.takeWhile(W=>W.lineNumber<S))==null?void 0:O.reduce((W,T)=>W+T.heightInPx,0))??0;d.push({originalRange:k,modifiedRange:N,originalHeightInPx:k.length*l+E,modifiedHeightInPx:N.length*c+B,diff:m.lineRangeMapping}),w=C,v=S};const p=m.lineRangeMapping;f(p.original.startLineNumber,p.modified.startLineNumber);let b=!0,v=p.modified.startLineNumber,w=p.original.startLineNumber;if(o)for(const C of p.innerChanges||[]){C.originalRange.startColumn>1&&C.modifiedRange.startColumn>1&&y(C.originalRange.startLineNumber,C.modifiedRange.startLineNumber);const S=n.getModel(),x=C.originalRange.endLineNumber<=S.getLineCount()?S.getLineMaxColumn(C.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;C.originalRange.endColumn<x&&y(C.originalRange.endLineNumber,C.modifiedRange.endLineNumber)}y(p.original.endLineNumberExclusive,p.modified.endLineNumberExclusive,!0),u=p.original.endLineNumberExclusive,h=p.modified.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),d}function Fie(n,e){const t=[],i=[],s=n.getOption(147).wrappingColumn!==-1,o=n._getViewModel().coordinatesConverter,r=n.getOption(67);if(s)for(let l=1;l<=n.getModel().getLineCount();l++){const c=o.getModelLineViewLineCount(l);c>1&&i.push({lineNumber:l,heightInPx:r*(c-1)})}for(const l of n.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:o.convertViewPositionToModelPosition(new U(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return nUe(t,i,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}function BG(n){return n.innerChanges?n.innerChanges.every(e=>Bie(e.modifiedRange)&&Bie(e.originalRange)||e.originalRange.equalsRange(new D(1,1,1,1))):!1}function Bie(n){return n.startLineNumber===n.endLineNumber}const IL=class IL extends G{constructor(e,t,i,s,o){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=s,this._editors=o,this._originalScrollTop=ii(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=ii(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=Ts("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=pt(this,0),this._modifiedViewZonesChangedSignal=Ts("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=Ts("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=gp(this,(d,u)=>{var k;this._element.replaceChildren();const h=this._diffModel.read(d),f=(k=h==null?void 0:h.diff.read(d))==null?void 0:k.movedTexts;if(!f||f.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(d);const m=this._originalEditorLayoutInfo.read(d),p=this._modifiedEditorLayoutInfo.read(d);if(!m||!p){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(d),this._originalViewZonesChangedSignal.read(d);const b=f.map(N=>{function E(q,Z){const V=Z.getTopForLineNumber(q.startLineNumber,!0),le=Z.getTopForLineNumber(q.endLineNumberExclusive,!0);return(V+le)/2}const B=E(N.lineRangeMapping.original,this._editors.original),A=this._originalScrollTop.read(d),O=E(N.lineRangeMapping.modified,this._editors.modified),W=this._modifiedScrollTop.read(d),T=B-A,M=O-W,z=Math.min(B,O),ee=Math.max(B,O);return{range:new vt(z,ee),from:T,to:M,fromWithoutScroll:B,toWithoutScroll:O,move:N}});b.sort(EDe(Io(N=>N.fromWithoutScroll>N.toWithoutScroll,DDe),Io(N=>N.fromWithoutScroll>N.toWithoutScroll?N.fromWithoutScroll:-N.toWithoutScroll,Kl)));const v=WG.compute(b.map(N=>N.range)),w=10,y=m.verticalScrollbarWidth,C=(v.getTrackCount()-1)*10+w*2,S=y+C+(p.contentLeft-IL.movedCodeBlockPadding);let x=0;for(const N of b){const E=v.getTrack(x),B=y+w+E*10,A=15,O=15,W=S,T=p.glyphMarginWidth+p.lineNumbersWidth,M=18,z=document.createElementNS("http://www.w3.org/2000/svg","rect");z.classList.add("arrow-rectangle"),z.setAttribute("x",`${W-T}`),z.setAttribute("y",`${N.to-M/2}`),z.setAttribute("width",`${T}`),z.setAttribute("height",`${M}`),this._element.appendChild(z);const ee=document.createElementNS("http://www.w3.org/2000/svg","g"),q=document.createElementNS("http://www.w3.org/2000/svg","path");q.setAttribute("d",`M 0 ${N.from} L ${B} ${N.from} L ${B} ${N.to} L ${W-O} ${N.to}`),q.setAttribute("fill","none"),ee.appendChild(q);const Z=document.createElementNS("http://www.w3.org/2000/svg","polygon");Z.classList.add("arrow"),u.add(Je(V=>{q.classList.toggle("currentMove",N.move===h.activeMovedText.read(V)),Z.classList.toggle("currentMove",N.move===h.activeMovedText.read(V))})),Z.setAttribute("points",`${W-O},${N.to-A/2} ${W},${N.to} ${W-O},${N.to+A/2}`),ee.appendChild(Z),this._element.appendChild(ee),x++}this.width.set(C,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(Pe(()=>this._element.remove())),this._register(Je(d=>{const u=this._originalEditorLayoutInfo.read(d),h=this._modifiedEditorLayoutInfo.read(d);!u||!h||(this._element.style.left=`${u.width-u.verticalScrollbarWidth}px`,this._element.style.height=`${u.height}px`,this._element.style.width=`${u.verticalScrollbarWidth+u.contentLeft-IL.movedCodeBlockPadding+this.width.read(d)}px`)})),this._register(A1(this._state));const r=Te(d=>{const u=this._diffModel.read(d),h=u==null?void 0:u.diff.read(d);return h?h.movedTexts.map(f=>({move:f,original:new xw(nl(f.lineRangeMapping.original.startLineNumber-1),18),modified:new xw(nl(f.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(BM(this._editors.original,r.map(d=>d.map(u=>u.original)))),this._register(BM(this._editors.modified,r.map(d=>d.map(u=>u.modified)))),this._register(nr((d,u)=>{const h=r.read(d);for(const f of h)u.add(new Wie(this._editors.original,f.original,f.move,"original",this._diffModel.get())),u.add(new Wie(this._editors.modified,f.modified,f.move,"modified",this._diffModel.get()))}));const a=Ts("original.onDidFocusEditorWidget",d=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>d(void 0),0))),l=Ts("modified.onDidFocusEditorWidget",d=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>d(void 0),0)));let c="modified";this._register(OI({createEmptyChangeSummary:()=>{},handleChange:(d,u)=>(d.didChange(a)&&(c="original"),d.didChange(l)&&(c="modified"),!0)},d=>{a.read(d),l.read(d);const u=this._diffModel.read(d);if(!u)return;const h=u.diff.read(d);let f;if(h&&c==="original"){const m=this._editors.originalCursor.read(d);m&&(f=h.movedTexts.find(p=>p.lineRangeMapping.original.contains(m.lineNumber)))}if(h&&c==="modified"){const m=this._editors.modifiedCursor.read(d);m&&(f=h.movedTexts.find(p=>p.lineRangeMapping.modified.contains(m.lineNumber)))}f!==u.movedTextToCompare.get()&&u.movedTextToCompare.set(void 0,void 0),u.setActiveMovedText(f)}))}};IL.movedCodeBlockPadding=4;let Ty=IL;class WG{static compute(e){const t=[],i=[];for(const s of e){let o=t.findIndex(r=>!r.intersectsStrict(s));o===-1&&(t.length>=6?o=fAe(t,Io(a=>a.intersectWithRangeLength(s),Kl)):(o=t.length,t.push(new WK))),t[o].addRange(s),i.push(o)}return new WG(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class Wie extends EG{constructor(e,t,i,s,o){const r=Ct("div.diff-hidden-lines-widget");super(e,t,r.root),this._editor=e,this._move=i,this._kind=s,this._diffModel=o,this._nodes=Ct("div.diff-moved-code-block",{style:{marginRight:"4px"}},[Ct("div.text-content@textContent"),Ct("div.action-bar@actionBar")]),r.root.appendChild(this._nodes.root);const a=ii(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(yf(this._nodes.root,{paddingRight:a.map(h=>h.verticalScrollbarWidth)}));let l;i.changes.length>0?l=this._kind==="original"?_("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):_("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?_("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):_("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new Ea(this._nodes.actionBar,{highlightToggledItems:!0})),d=new Or("",l,"",!1);c.push(d,{icon:!1,label:!0});const u=new Or("","Compare",Ke.asClassName(he.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register(Je(h=>{const f=this._diffModel.movedTextToCompare.read(h)===i;u.checked=f})),c.push(u,{icon:!1,label:!0})}}class TUe extends G{constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=Te(this,o=>{const r=this._diffModel.read(o),a=r==null?void 0:r.diff.read(o);if(!a)return null;const l=this._diffModel.read(o).movedTextToCompare.read(o),c=this._options.renderIndicators.read(o),d=this._options.showEmptyDecorations.read(o),u=[],h=[];if(!l)for(const m of a.mappings)if(m.lineRangeMapping.original.isEmpty||u.push({range:m.lineRangeMapping.original.toInclusiveRange(),options:c?vN:Rie}),m.lineRangeMapping.modified.isEmpty||h.push({range:m.lineRangeMapping.modified.toInclusiveRange(),options:c?HM:Tie}),m.lineRangeMapping.modified.isEmpty||m.lineRangeMapping.original.isEmpty)m.lineRangeMapping.original.isEmpty||u.push({range:m.lineRangeMapping.original.toInclusiveRange(),options:PG}),m.lineRangeMapping.modified.isEmpty||h.push({range:m.lineRangeMapping.modified.toInclusiveRange(),options:RG});else{const p=this._options.useTrueInlineDiffRendering.read(o)&&BG(m.lineRangeMapping);for(const b of m.lineRangeMapping.innerChanges||[])if(m.lineRangeMapping.original.contains(b.originalRange.startLineNumber)&&u.push({range:b.originalRange,options:b.originalRange.isEmpty()&&d?AG:UC}),m.lineRangeMapping.modified.contains(b.modifiedRange.startLineNumber)&&h.push({range:b.modifiedRange,options:b.modifiedRange.isEmpty()&&d&&!p?MG:VM}),p){const v=r.model.original.getValueInRange(b.originalRange);h.push({range:b.modifiedRange,options:{description:"deleted-text",before:{content:v,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(l)for(const m of l.changes){const p=m.original.toInclusiveRange();p&&u.push({range:p,options:c?vN:Rie});const b=m.modified.toInclusiveRange();b&&h.push({range:b,options:c?HM:Tie});for(const v of m.innerChanges||[])u.push({range:v.originalRange,options:UC}),h.push({range:v.modifiedRange,options:VM})}const f=this._diffModel.read(o).activeMovedText.read(o);for(const m of a.movedTexts)u.push({range:m.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(m===f?" currentMove":""),blockPadding:[Ty.movedCodeBlockPadding,0,Ty.movedCodeBlockPadding,Ty.movedCodeBlockPadding]}}),h.push({range:m.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(m===f?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:u,modifiedDecorations:h}}),this._register(FM(this._editors.original,this._decorations.map(o=>(o==null?void 0:o.originalDecorations)||[]))),this._register(FM(this._editors.modified,this._decorations.map(o=>(o==null?void 0:o.modifiedDecorations)||[])))}}class RUe{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=PI(this,i=>{const s=this._sashRatio.read(i)??this._options.splitViewDefaultRatio.read(i);return this._computeSashLeft(s,i)},(i,s)=>{const o=this.dimensions.width.get();this._sashRatio.set(i/o,s)}),this._sashRatio=pt(this,void 0)}_computeSashLeft(e,t){const i=this.dimensions.width.read(t),s=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),o=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):s,r=100;return i<=r*2?s:o<r?r:o>i-r?i-r:o}}class Rpe extends G{constructor(e,t,i,s,o,r){super(),this._domNode=e,this._dimensions=t,this._enabled=i,this._boundarySashes=s,this.sashLeft=o,this._resetSash=r,this._sash=this._register(new Hs(this._domNode,{getVerticalSashTop:a=>0,getVerticalSashLeft:a=>this.sashLeft.get(),getVerticalSashHeight:a=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(Je(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(Je(a=>{const l=this._enabled.read(a);this._sash.state=l?3:0,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}}class MUe extends G{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=ii(this,this._editor.onDidScrollChange,r=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(r=>r===0),this.modelAttached=ii(this,this._editor.onDidChangeModel,r=>this._editor.hasModel()),this.editorOnDidChangeViewZones=Ts("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=Ts("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=P1("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const s=this._domNode.appendChild(Ct("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),o=new ResizeObserver(()=>{qi(r=>{this.domNodeSizeChanged.trigger(r)})});o.observe(this._domNode),this._register(Pe(()=>o.disconnect())),this._register(Je(r=>{s.className=this.isScrollTopZero.read(r)?"":"scroll-decoration"})),this._register(Je(r=>this.render(r)))}dispose(){super.dispose(),ys(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),s=new Set(this.views.keys()),o=vt.ofStartAndLength(0,this._domNode.clientHeight);if(!o.isEmpty)for(const r of i){const a=new at(r.startLineNumber,r.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);qi(c=>{for(const d of l){if(!d.range.intersect(a))continue;s.delete(d.id);let u=this.views.get(d.id);if(u)u.item.set(d,c);else{const p=document.createElement("div");this._domNode.appendChild(p);const b=pt("item",d),v=this.itemProvider.createView(b,p);u=new PUe(b,v,p),this.views.set(d.id,u)}const h=d.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(d.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(d.range.startLineNumber-1,!1)-t,m=(d.range.endLineNumberExclusive===1?Math.max(h,this._editor.getTopForLineNumber(d.range.startLineNumber,!1)-t):Math.max(h,this._editor.getBottomForLineNumber(d.range.endLineNumberExclusive-1,!0)-t))-h;u.domNode.style.top=`${h}px`,u.domNode.style.height=`${m}px`,u.gutterItemView.layout(vt.ofStartAndLength(h,m),o)}})}for(const r of s){const a=this.views.get(r);a.gutterItemView.dispose(),a.domNode.remove(),this.views.delete(r)}}}class PUe{constructor(e,t,i){this.item=e,this.gutterItemView=t,this.domNode=i}}class Mpe extends pv{constructor(e){super(),this._getContext=e}runAction(e,t){const i=this._getContext();return super.runAction(e,i)}}class Hie extends Xhe{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new ec(e-1,t)}}class AUe extends G{constructor(e,t,i={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new eRe),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new ne),i.hoverDelegate=i.hoverDelegate??this._register(OC()),this.options=i,this.toggleMenuAction=this._register(new wN(()=>{var s;return(s=this.toggleMenuActionViewItem)==null?void 0:s.show()},i.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new Ea(this.element,{orientation:i.orientation,ariaLabel:i.ariaLabel,actionRunner:i.actionRunner,allowContextMenu:i.allowContextMenu,highlightToggledItems:i.highlightToggledItems,hoverDelegate:i.hoverDelegate,actionViewItemProvider:(s,o)=>{if(s.id===wN.ID)return this.toggleMenuActionViewItem=new z2(s,s.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:Ke.asClassNameArray(i.moreIcon??he.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(i.actionViewItemProvider){const r=i.actionViewItemProvider(s,o);if(r)return r}if(s instanceof SC){const r=new z2(s,s.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:s.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return r.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(r),this.disposables.add(this._onDidChangeDropdownVisibility.add(r.onDidChangeVisibility)),r}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach(s=>{this.actionBar.push(s,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(s)})})}getKeybindingLabel(e){var i,s;const t=(s=(i=this.options).getKeyBinding)==null?void 0:s.call(i,e);return(t==null?void 0:t.getLabel())??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}const HA=class HA extends Or{constructor(e,t){t=t||_("moreActions","More Actions..."),super(HA.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};HA.ID="toolbar.toggle.more";let wN=HA;var Ppe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Fl=function(n,e){return function(t,i){e(t,i,n)}};let yN=class extends AUe{constructor(e,t,i,s,o,r,a,l){super(e,o,{getKeyBinding:d=>r.lookupKeybinding(d.id)??void 0,...t,allowContextMenu:!0,skipTelemetry:typeof(t==null?void 0:t.telemetrySource)=="string"}),this._options=t,this._menuService=i,this._contextKeyService=s,this._contextMenuService=o,this._keybindingService=r,this._commandService=a,this._sessionDisposables=this._store.add(new ne);const c=t==null?void 0:t.telemetrySource;c&&this._store.add(this.actionBar.onDidRun(d=>l.publicLog2("workbenchActionExecuted",{id:d.action.id,from:c})))}setActions(e,t=[],i){var d,u,h;this._sessionDisposables.clear();const s=e.slice(),o=t.slice(),r=[];let a=0;const l=[];let c=!1;if(((d=this._options)==null?void 0:d.hiddenItemStrategy)!==-1)for(let f=0;f<s.length;f++){const m=s[f];!(m instanceof Fr)&&!(m instanceof fy)||m.hideActions&&(r.push(m.hideActions.toggle),m.hideActions.toggle.checked&&a++,m.hideActions.isHidden&&(c=!0,s[f]=void 0,((u=this._options)==null?void 0:u.hiddenItemStrategy)!==0&&(l[f]=m)))}if(((h=this._options)==null?void 0:h.overflowBehavior)!==void 0){const f=Y7e(new Set(this._options.overflowBehavior.exempted),Rt.map(s,b=>b==null?void 0:b.id)),m=this._options.overflowBehavior.maxItems-f.size;let p=0;for(let b=0;b<s.length;b++){const v=s[b];v&&(p++,!f.has(v.id)&&p>=m&&(s[b]=void 0,l[b]=v))}}pQ(s),pQ(l),super.setActions(s,Ss.join(l,o)),(r.length>0||s.length>0)&&this._sessionDisposables.add(Q(this.getElement(),"contextmenu",f=>{var w,y,C,S,x;const m=new Vl(je(this.getElement()),f),p=this.getItemAction(m.target);if(!p)return;m.preventDefault(),m.stopPropagation();const b=[];if(p instanceof Fr&&p.menuKeybinding)b.push(p.menuKeybinding);else if(!(p instanceof fy||p instanceof wN)){const k=!!this._keybindingService.lookupKeybinding(p.id);b.push(Xme(this._commandService,this._keybindingService,p.id,void 0,k))}if(r.length>0){let k=!1;if(a===1&&((w=this._options)==null?void 0:w.hiddenItemStrategy)===0){k=!0;for(let N=0;N<r.length;N++)if(r[N].checked){r[N]=$_({id:p.id,label:p.label,checked:!0,enabled:!1,run(){}});break}}if(!k&&(p instanceof Fr||p instanceof fy)){if(!p.hideActions)return;b.push(p.hideActions.hide)}else b.push($_({id:"label",label:_("hide","Hide"),enabled:!1,run(){}}))}const v=Ss.join(b,r);(y=this._options)!=null&&y.resetMenu&&!i&&(i=[this._options.resetMenu]),c&&i&&(v.push(new Ss),v.push($_({id:"resetThisMenu",label:_("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),v.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>m,getActions:()=>v,menuId:(C=this._options)==null?void 0:C.contextMenu,menuActionOptions:{renderShortTitle:!0,...(S=this._options)==null?void 0:S.menuOptions},skipTelemetry:typeof((x=this._options)==null?void 0:x.telemetrySource)=="string",contextKeyService:this._contextKeyService})}))}};yN=Ppe([Fl(2,Oa),Fl(3,qe),Fl(4,Zr),Fl(5,ei),Fl(6,Ci),Fl(7,Zs)],yN);let jM=class extends yN{constructor(e,t,i,s,o,r,a,l,c){super(e,{resetMenu:t,...i},s,o,r,a,l,c),this._onDidChangeMenuItems=this._store.add(new $),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const d=this._store.add(s.createMenu(t,o,{emitEventsForSubmenuChanges:!0})),u=()=>{var m,p,b;const h=[],f=[];rF(d,i==null?void 0:i.menuOptions,{primary:h,secondary:f},(m=i==null?void 0:i.toolbarOptions)==null?void 0:m.primaryGroup,(p=i==null?void 0:i.toolbarOptions)==null?void 0:p.shouldInlineSubmenu,(b=i==null?void 0:i.toolbarOptions)==null?void 0:b.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",h.length===0&&f.length===0),super.setActions(h,f)};this._store.add(d.onDidChange(()=>{u(),this._onDidChangeMenuItems.fire(this)})),u()}setActions(){throw new Zt("This toolbar is populated from a menu.")}};jM=Ppe([Fl(3,Oa),Fl(4,qe),Fl(5,Zr),Fl(6,ei),Fl(7,Ci),Fl(8,Zs)],jM);var Ape=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},zT=function(n,e){return function(t,i){e(t,i,n)}};const IB=[],LD=35;let oV=class extends G{constructor(e,t,i,s,o,r,a,l,c){super(),this._diffModel=t,this._editors=i,this._options=s,this._sashLayout=o,this._boundarySashes=r,this._instantiationService=a,this._contextKeyService=l,this._menuService=c,this._menu=this._register(this._menuService.createMenu(Ne.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=ii(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(d=>d.length>0),this._showSash=Te(this,d=>this._options.renderSideBySide.read(d)&&this._hasActions.read(d)),this.width=Te(this,d=>this._hasActions.read(d)?LD:0),this.elements=Ct("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:LD+"px"}},[]),this._currentDiff=Te(this,d=>{var m;const u=this._diffModel.read(d);if(!u)return;const h=(m=u.diff.read(d))==null?void 0:m.mappings,f=this._editors.modifiedCursor.read(d);if(f)return h==null?void 0:h.find(p=>p.lineRangeMapping.modified.contains(f.lineNumber))}),this._selectedDiffs=Te(this,d=>{const u=this._diffModel.read(d),h=u==null?void 0:u.diff.read(d);if(!h)return IB;const f=this._editors.modifiedSelections.read(d);if(f.every(v=>v.isEmpty()))return IB;const m=new el(f.map(v=>at.fromRangeInclusive(v))),b=h.mappings.filter(v=>v.lineRangeMapping.innerChanges&&m.intersects(v.lineRangeMapping.modified)).map(v=>({mapping:v,rangeMappings:v.lineRangeMapping.innerChanges.filter(w=>f.some(y=>D.areIntersecting(w.modifiedRange,y)))}));return b.length===0||b.every(v=>v.rangeMappings.length===0)?IB:b}),this._register(sUe(e,this.elements.root)),this._register(Q(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(yf(this.elements.root,{display:this._hasActions.map(d=>d?"block":"none")})),oo(this,d=>this._showSash.read(d)?new Rpe(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,PI(this,h=>this._sashLayout.sashLeft.read(h)-LD,(h,f)=>this._sashLayout.sashLeft.set(h+LD,f)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new MUe(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(d,u)=>{const h=this._diffModel.read(u);if(!h)return[];const f=h.diff.read(u);if(!f)return[];const m=this._selectedDiffs.read(u);if(m.length>0){const b=Ia.fromRangeMappings(m.flatMap(v=>v.rangeMappings));return[new Vie(b,!0,Ne.DiffEditorSelectionToolbar,void 0,h.model.original.uri,h.model.modified.uri)]}const p=this._currentDiff.read(u);return f.mappings.map(b=>new Vie(b.lineRangeMapping.withInnerChangesFromLineRanges(),b.lineRangeMapping===(p==null?void 0:p.lineRangeMapping),Ne.DiffEditorHunkToolbar,void 0,h.model.original.uri,h.model.modified.uri))},createView:(d,u)=>this._instantiationService.createInstance(rV,d,u,this)})),this._register(Q(this.elements.gutter,fe.MOUSE_WHEEL,d=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(d)},{passive:!1}))}computeStagedValue(e){const t=e.innerChanges??[],i=new Hie(this._editors.modifiedModel.get()),s=new Hie(this._editors.original.getModel());return new VK(t.map(a=>a.toTextEdit(i))).apply(s)}layout(e){this.elements.gutter.style.left=e+"px"}};oV=Ape([zT(6,Ae),zT(7,qe),zT(8,Oa)],oV);class Vie{constructor(e,t,i,s,o,r){this.mapping=e,this.showAlways=t,this.menuId=i,this.rangeOverride=s,this.originalUri=o,this.modifiedUri=r}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let rV=class extends G{constructor(e,t,i,s){super(),this._item=e,this._elements=Ct("div.gutterItem",{style:{height:"20px",width:"34px"}},[Ct("div.background@background",{},[]),Ct("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,r=>r.showAlways),this._menuId=this._item.map(this,r=>r.menuId),this._isSmall=pt(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const o=this._register(s.createInstance(EC,"element",!0,{position:{hoverPosition:1}}));this._register(Sw(t,this._elements.root)),this._register(Je(r=>{const a=this._showAlways.read(r);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(nr((r,a)=>{this._elements.buttons.replaceChildren();const l=a.add(s.createInstance(jM,this._elements.buttons,this._menuId.read(r),{orientation:1,hoverDelegate:o,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(r)?1:3},hiddenItemStrategy:0,actionRunner:new Mpe(()=>{const c=this._item.get(),d=c.mapping;return{mapping:d,originalWithModifiedChanges:i.computeStagedValue(d),originalUri:c.originalUri,modifiedUri:c.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let i=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),i=this._elements.buttons.clientHeight;const s=e.length/2-i/2,o=i;let r=e.start+s;const a=vt.tryCreate(o,t.endExclusive-o-i),l=vt.tryCreate(e.start+o,e.endExclusive-i-o);l&&a&&l.start<l.endExclusive&&(r=a.clip(r),r=l.clip(r)),this._elements.buttons.style.top=`${r-e.start}px`}};rV=Ape([zT(3,Ae)],rV);function Rr(n){return aV.get(n)}const og=class og extends G{static get(e){let t=og._map.get(e);if(!t){t=new og(e),og._map.set(e,t);const i=e.onDidDispose(()=>{const s=og._map.get(e);s&&(og._map.delete(e),s.dispose(),i.dispose())})}return t}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new M1(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){var t;super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=pt(this,this.editor.getModel()),this.model=this._model,this.isReadonly=ii(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=h6({owner:this,lazy:!0},((t=this.editor.getModel())==null?void 0:t.getVersionId())??null),this.versionId=this._versionId,this._selections=h6({owner:this,equalsFn:c6(H2(Ie.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=ii(this,i=>{const s=this.editor.onDidFocusEditorWidget(i),o=this.editor.onDidBlurEditorWidget(i);return{dispose(){s.dispose(),o.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=PI(this,i=>{var s;return this.versionId.read(i),((s=this.model.read(i))==null?void 0:s.getValue())??""},(i,s)=>{const o=this.model.get();o!==null&&i!==o.getValue()&&o.setValue(i)}),this.valueIsEmpty=Te(this,i=>{var s;return this.versionId.read(i),((s=this.editor.getModel())==null?void 0:s.getValueLength())===0}),this.cursorSelection=ma({owner:this,equalsFn:c6(Ie.selectionsEqual)},i=>{var s;return((s=this.selections.read(i))==null?void 0:s[0])??null}),this.onDidType=P1(this),this.scrollTop=ii(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=ii(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=ii(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(i=>i.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(i=>i.decorationsLeft),this.contentWidth=ii(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(i=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,i)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(i=>{var s;this._beginUpdate();try{this._versionId.set(((s=this.editor.getModel())==null?void 0:s.getVersionId())??null,this._currentTransaction,i),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(i=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,i),this._forceUpdate()}finally{this._endUpdate()}}))}forceUpdate(e){this._beginUpdate();try{return this._forceUpdate(),e?e(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){var e;this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(((e=this.editor.getModel())==null?void 0:e.getVersionId())??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return ii(this,t=>this.editor.onDidChangeConfiguration(i=>{i.hasChanged(e)&&t(void 0)}),()=>this.editor.getOption(e))}setDecorations(e){const t=new ne,i=this.editor.createDecorationsCollection();return t.add(AI({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const o=e.read(s);i.set(o)})),t.add({dispose:()=>{i.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,i={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(i);const s=Je(o=>{e.position.read(o),e.minContentWidthInPx.read(o),this.editor.layoutOverlayWidget(i)});return Pe(()=>{s.dispose(),this.editor.removeOverlayWidget(i)})}};og._map=new Map;let aV=og;function lV(n,e){return rBe({createEmptyChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(t,i)=>{if(t.didChange(n)){const s=t.change;s!==void 0&&i.deltas.push(s),i.didChange=!0}return!0}},(t,i)=>{const s=n.read(t);i.didChange&&e(s,i.deltas)})}function OUe(n,e){const t=new ne,i=lV(n,(s,o)=>{t.clear(),e(s,o,t)});return{dispose(){i.dispose(),t.dispose()}}}var FUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},BUe=function(n,e){return function(t,i){e(t,i,n)}},UT,db;let zM=(db=class extends G{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=s,this._modifiedOutlineSource=oo(this,l=>{const c=this._editors.modifiedModel.read(l),d=UT._breadcrumbsSourceFactory.read(l);return!c||!d?void 0:d(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();qi(d=>{for(const u of this._editors.original.getSelections()||[])c==null||c.ensureOriginalLineIsVisible(u.getStartPosition().lineNumber,0,d),c==null||c.ensureOriginalLineIsVisible(u.getEndPosition().lineNumber,0,d)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();qi(d=>{for(const u of this._editors.modified.getSelections()||[])c==null||c.ensureModifiedLineIsVisible(u.getStartPosition().lineNumber,0,d),c==null||c.ensureModifiedLineIsVisible(u.getEndPosition().lineNumber,0,d)})}));const o=this._diffModel.map((l,c)=>{var u;const d=(l==null?void 0:l.unchangedRegions.read(c))??[];return d.length===1&&d[0].modifiedLineNumber===1&&d[0].lineCount===((u=this._editors.modifiedModel.read(c))==null?void 0:u.getLineCount())?[]:d});this.viewZones=gp(this,(l,c)=>{const d=this._modifiedOutlineSource.read(l);if(!d)return{origViewZones:[],modViewZones:[]};const u=[],h=[],f=this._options.renderSideBySide.read(l),m=this._options.compactMode.read(l),p=o.read(l);for(let b=0;b<p.length;b++){const v=p[b];if(!v.shouldHideControls(l)&&!(m&&(b===0||b===p.length-1)))if(m){{const w=Te(this,C=>v.getHiddenOriginalRange(C).startLineNumber-1),y=new xw(w,12);u.push(y),c.add(new jie(this._editors.original,y,v,!f))}{const w=Te(this,C=>v.getHiddenModifiedRange(C).startLineNumber-1),y=new xw(w,12);h.push(y),c.add(new jie(this._editors.modified,y,v))}}else{{const w=Te(this,C=>v.getHiddenOriginalRange(C).startLineNumber-1),y=new xw(w,24);u.push(y),c.add(new zie(this._editors.original,y,v,v.originalUnchangedRange,!f,d,C=>this._diffModel.get().ensureModifiedLineIsVisible(C,2,void 0),this._options))}{const w=Te(this,C=>v.getHiddenModifiedRange(C).startLineNumber-1),y=new xw(w,24);h.push(y),c.add(new zie(this._editors.modified,y,v,v.modifiedUnchangedRange,!1,d,C=>this._diffModel.get().ensureModifiedLineIsVisible(C,2,void 0),this._options))}}}return{origViewZones:u,modViewZones:h}});const r={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new Us(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(_("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+Ke.asClassName(he.fold),zIndex:10001};this._register(FM(this._editors.original,Te(this,l=>{const c=o.read(l),d=c.map(u=>({range:u.originalUnchangedRange.toInclusiveRange(),options:r}));for(const u of c)u.shouldHideControls(l)&&d.push({range:D.fromPositions(new U(u.originalLineNumber,1)),options:a});return d}))),this._register(FM(this._editors.modified,Te(this,l=>{const c=o.read(l),d=c.map(u=>({range:u.modifiedUnchangedRange.toInclusiveRange(),options:r}));for(const u of c)u.shouldHideControls(l)&&d.push({range:at.ofLength(u.modifiedLineNumber,1).toInclusiveRange(),options:a});return d}))),this._register(Je(l=>{const c=o.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(d=>d.getHiddenOriginalRange(l).toInclusiveRange()).filter(mu)),this._editors.modified.setHiddenAreas(c.map(d=>d.getHiddenModifiedRange(l).toInclusiveRange()).filter(mu))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const d=l.target.position.lineNumber,u=this._diffModel.get();if(!u)return;const h=u.unchangedRegions.get().find(f=>f.modifiedUnchangedRange.includes(d));if(!h)return;h.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const d=l.target.position.lineNumber,u=this._diffModel.get();if(!u)return;const h=u.unchangedRegions.get().find(f=>f.originalUnchangedRange.includes(d));if(!h)return;h.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}},UT=db,db._breadcrumbsSourceFactory=pt(UT,()=>({dispose(){},getBreadcrumbItems(e,t){return[]}})),db);zM=UT=FUe([BUe(3,Ae)],zM);class jie extends EG{constructor(e,t,i,s=!1){const o=Ct("div.diff-hidden-lines-widget");super(e,t,o.root),this._unchangedRegion=i,this._hide=s,this._nodes=Ct("div.diff-hidden-lines-compact",[Ct("div.line-left",[]),Ct("div.text@text",[]),Ct("div.line-right",[])]),o.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register(Je(r=>{if(!this._hide){const a=this._unchangedRegion.getHiddenModifiedRange(r).length,l=_("hiddenLines","{0} hidden lines",a);this._nodes.text.innerText=l}}))}}class zie extends EG{constructor(e,t,i,s,o,r,a,l){const c=Ct("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=s,this._hide=o,this._modifiedOutlineSource=r,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=Ct("div.diff-hidden-lines",[Ct("div.top@top",{title:_("diff.hiddenLines.top","Click or drag to show more above")}),Ct("div.center@content",{style:{display:"flex"}},[Ct("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[ge("a",{title:_("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...lm("$(unfold)"))]),Ct("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),Ct("div.bottom@bottom",{title:_("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root),this._hide?ys(this._nodes.first):this._register(yf(this._nodes.first,{width:Rr(this._editor).layoutInfoContentLeft})),this._register(Je(u=>{const h=this._unchangedRegion.visibleLineCountTop.read(u)+this._unchangedRegion.visibleLineCountBottom.read(u)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!h),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(u)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(u)>0),this._nodes.top.classList.toggle("canMoveBottom",!h);const f=this._unchangedRegion.isDragged.read(u),m=this._editor.getDomNode();m&&(m.classList.toggle("draggingUnchangedRegion",!!f),f==="top"?(m.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(u)>0),m.classList.toggle("canMoveBottom",!h)):f==="bottom"?(m.classList.toggle("canMoveTop",!h),m.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(u)>0)):(m.classList.toggle("canMoveTop",!1),m.classList.toggle("canMoveBottom",!1)))}));const d=this._editor;this._register(Q(this._nodes.top,"mousedown",u=>{if(u.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),u.preventDefault();const h=u.clientY;let f=!1;const m=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const p=je(this._nodes.top),b=Q(p,"mousemove",w=>{const C=w.clientY-h;f=f||Math.abs(C)>2;const S=Math.round(C/d.getOption(67)),x=Math.max(0,Math.min(m+S,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(x,void 0)}),v=Q(p,"mouseup",w=>{f||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),b.dispose(),v.dispose()})})),this._register(Q(this._nodes.bottom,"mousedown",u=>{if(u.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),u.preventDefault();const h=u.clientY;let f=!1;const m=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const p=je(this._nodes.bottom),b=Q(p,"mousemove",w=>{const C=w.clientY-h;f=f||Math.abs(C)>2;const S=Math.round(C/d.getOption(67)),x=Math.max(0,Math.min(m-S,this._unchangedRegion.getMaxVisibleLineCountBottom())),k=this._unchangedRegionRange.endLineNumberExclusive>d.getModel().getLineCount()?d.getContentHeight():d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(x,void 0);const N=this._unchangedRegionRange.endLineNumberExclusive>d.getModel().getLineCount()?d.getContentHeight():d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);d.setScrollTop(d.getScrollTop()+(N-k))}),v=Q(p,"mouseup",w=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!f){const y=d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const C=d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);d.setScrollTop(d.getScrollTop()+(C-y))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),b.dispose(),v.dispose()})})),this._register(Je(u=>{const h=[];if(!this._hide){const f=i.getHiddenModifiedRange(u).length,m=_("hiddenLines","{0} hidden lines",f),p=ge("span",{title:_("diff.hiddenLines.expandAll","Double click to unfold")},m);p.addEventListener("dblclick",w=>{w.button===0&&(w.preventDefault(),this._unchangedRegion.showAll(void 0))}),h.push(p);const b=this._unchangedRegion.getHiddenModifiedRange(u),v=this._modifiedOutlineSource.getBreadcrumbItems(b,u);if(v.length>0){h.push(ge("span",void 0,"  |  "));for(let w=0;w<v.length;w++){const y=v[w],C=i2.toIcon(y.kind),S=Ct("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[vv(C)," ",y.name,...w===v.length-1?[]:[vv(he.chevronRight)]]).root;h.push(S),S.onclick=()=>{this._revealModifiedHiddenLine(y.startLineNumber)}}}}ys(this._nodes.others,...h)}))}}var WUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},HUe=function(n,e){return function(t,i){e(t,i,n)}},pc,Uh;let CN=(Uh=class extends G{constructor(e,t,i,s,o,r,a){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=s,this._rootHeight=o,this._modifiedEditorLayoutInfo=r,this._themeService=a,this.width=pc.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=ii(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=Te(h=>{const f=l.read(h),m=f.getColor(r4e)||(f.getColor(s4e)||TW).transparent(2),p=f.getColor(a4e)||(f.getColor(o4e)||RW).transparent(2);return{insertColor:m,removeColor:p}}),d=Jt(document.createElement("div"));d.setClassName("diffViewport"),d.setPosition("absolute");const u=Ct("div.diffOverview",{style:{position:"absolute",top:"0px",width:pc.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(Sw(u,d.domNode)),this._register(Ji(u,fe.POINTER_DOWN,h=>{this._editors.modified.delegateVerticalScrollbarPointerDown(h)})),this._register(Q(u,fe.MOUSE_WHEEL,h=>{this._editors.modified.delegateScrollFromMouseWheelEvent(h)},{passive:!1})),this._register(Sw(this._rootElement,u)),this._register(nr((h,f)=>{const m=this._diffModel.read(h),p=this._editors.original.createOverviewRuler("original diffOverviewRuler");p&&(f.add(p),f.add(Sw(u,p.getDomNode())));const b=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(b&&(f.add(b),f.add(Sw(u,b.getDomNode()))),!p||!b)return;const v=Ts("viewZoneChanged",this._editors.original.onDidChangeViewZones),w=Ts("viewZoneChanged",this._editors.modified.onDidChangeViewZones),y=Ts("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),C=Ts("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);f.add(Je(S=>{var A;v.read(S),w.read(S),y.read(S),C.read(S);const x=c.read(S),k=(A=m==null?void 0:m.diff.read(S))==null?void 0:A.mappings;function N(O,W,T){const M=T._getViewModel();return M?O.filter(z=>z.length>0).map(z=>{const ee=M.coordinatesConverter.convertModelPositionToViewPosition(new U(z.startLineNumber,1)),q=M.coordinatesConverter.convertModelPositionToViewPosition(new U(z.endLineNumberExclusive,1)),Z=q.lineNumber-ee.lineNumber;return new Cpe(ee.lineNumber,q.lineNumber,Z,W.toString())}):[]}const E=N((k||[]).map(O=>O.lineRangeMapping.original),x.removeColor,this._editors.original),B=N((k||[]).map(O=>O.lineRangeMapping.modified),x.insertColor,this._editors.modified);p==null||p.setZones(E),b==null||b.setZones(B)})),f.add(Je(S=>{const x=this._rootHeight.read(S),k=this._rootWidth.read(S),N=this._modifiedEditorLayoutInfo.read(S);if(N){const E=pc.ENTIRE_DIFF_OVERVIEW_WIDTH-2*pc.ONE_OVERVIEW_WIDTH;p.setLayout({top:0,height:x,right:E+pc.ONE_OVERVIEW_WIDTH,width:pc.ONE_OVERVIEW_WIDTH}),b.setLayout({top:0,height:x,right:0,width:pc.ONE_OVERVIEW_WIDTH});const B=this._editors.modifiedScrollTop.read(S),A=this._editors.modifiedScrollHeight.read(S),O=this._editors.modified.getOption(104),W=new TC(O.verticalHasArrows?O.arrowSize:0,O.verticalScrollbarSize,0,N.height,A,B);d.setTop(W.getSliderPosition()),d.setHeight(W.getSliderSize())}else d.setTop(0),d.setHeight(0);u.style.height=x+"px",u.style.left=k-pc.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",d.setWidth(pc.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}},pc=Uh,Uh.ONE_OVERVIEW_WIDTH=15,Uh.ENTIRE_DIFF_OVERVIEW_WIDTH=Uh.ONE_OVERVIEW_WIDTH*2,Uh);CN=pc=WUe([HUe(6,Vn)],CN);const EB=[];class VUe extends G{constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=s,this._selectedDiffs=Te(this,o=>{const r=this._diffModel.read(o),a=r==null?void 0:r.diff.read(o);if(!a)return EB;const l=this._editors.modifiedSelections.read(o);if(l.every(h=>h.isEmpty()))return EB;const c=new el(l.map(h=>at.fromRangeInclusive(h))),u=a.mappings.filter(h=>h.lineRangeMapping.innerChanges&&c.intersects(h.lineRangeMapping.modified)).map(h=>({mapping:h,rangeMappings:h.lineRangeMapping.innerChanges.filter(f=>l.some(m=>D.areIntersecting(f.modifiedRange,m)))}));return u.length===0||u.every(h=>h.rangeMappings.length===0)?EB:u}),this._register(nr((o,r)=>{if(!this._options.shouldRenderOldRevertArrows.read(o))return;const a=this._diffModel.read(o),l=a==null?void 0:a.diff.read(o);if(!a||!l||a.movedTextToCompare.read(o))return;const c=[],d=this._selectedDiffs.read(o),u=new Set(d.map(h=>h.mapping));if(d.length>0){const h=this._editors.modifiedSelections.read(o),f=r.add(new UM(h[h.length-1].positionLineNumber,this._widget,d.flatMap(m=>m.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}for(const h of l.mappings)if(!u.has(h)&&!h.lineRangeMapping.modified.isEmpty&&h.lineRangeMapping.innerChanges){const f=r.add(new UM(h.lineRangeMapping.modified.startLineNumber,this._widget,h.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}r.add(Pe(()=>{for(const h of c)this._editors.modified.removeGlyphMarginWidget(h)}))}))}}const VA=class VA extends G{getId(){return this._id}constructor(e,t,i,s){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=s,this._id=`revertButton${VA.counter++}`,this._domNode=Ct("div.revertButton",{title:this._revertSelection?_("revertSelectedChanges","Revert Selected Changes"):_("revertChange","Revert Change")},[vv(he.arrowRight)]).root,this._register(Q(this._domNode,fe.MOUSE_DOWN,o=>{o.button!==2&&(o.stopPropagation(),o.preventDefault())})),this._register(Q(this._domNode,fe.MOUSE_UP,o=>{o.stopPropagation(),o.preventDefault()})),this._register(Q(this._domNode,fe.CLICK,o=>{this._diffs instanceof lo?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),o.stopPropagation(),o.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:Jl.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};VA.counter=0;let UM=VA;function jUe(n,e,t){return lBe({debugName:()=>`Configuration Key "${n}"`},i=>t.onDidChangeConfiguration(s=>{s.affectsConfiguration(n)&&i(s)}),()=>t.getValue(n)??e)}function vc(n,e,t){const i=n.bindTo(e);return AI({debugName:()=>`Set Context Key "${n.key}"`},s=>{i.set(t(s))})}var zUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Uie=function(n,e){return function(t,i){e(t,i,n)}};let cV=class extends G{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,i,s,o,r,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._argCodeEditorWidgetOptions=s,this._createInnerEditor=o,this._instantiationService=r,this._keybindingService=a,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new $),this.modifiedScrollTop=ii(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=ii(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=Rr(this.modified),this.originalObs=Rr(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=ii(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=ma({owner:this,equalsFn:U.equals},l=>{var c;return((c=this.modifiedSelections.read(l)[0])==null?void 0:c.getPosition())??new U(1,1)}),this.originalCursor=ii(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new U(1,1)),this._argCodeEditorWidgetOptions=null,this._register(OI({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(i.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{i.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const i=this._adjustOptionsForLeftHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return s.setContextValue("isInDiffLeftEditor",!0),s}_createRightHandSideEditor(e,t){const i=this._adjustOptionsForRightHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return s.setContextValue("isInDiffRightEditor",!0),s}_constructInnerEditor(e,t,i,s){const o=this._createInnerEditor(e,t,i,s);return this._register(o.onDidContentSizeChange(r=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+CN.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),o}_adjustOptionsForLeftHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=md.revealHorizontalRightPadding.defaultValue+CN.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var i;e||(e="");const t=_("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(i=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))==null?void 0:i.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};cV=zUe([Uie(5,Ae),Uie(6,ei)],cV);const jA=class jA extends G{constructor(){super(...arguments),this._id=++jA.idCounter,this._onDidDispose=this._register(new $),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,i=0){this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,s=!0){this._targetEditor.revealRange(e,t,i,s)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};jA.idCounter=0;let dV=jA;var UUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},$Ue=function(n,e){return function(t,i){e(t,i,n)}};let uV=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=pt(this,0),this._screenReaderMode=ii(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=Te(this,s=>this._options.read(s).renderSideBySide&&this._diffEditorWidth.read(s)<=this._options.read(s).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=Te(this,s=>this._options.read(s).renderOverviewRuler),this.renderSideBySide=Te(this,s=>this.compactMode.read(s)&&this.shouldRenderInlineViewInSmartMode.read(s)?!1:this._options.read(s).renderSideBySide&&!(this._options.read(s).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(s)&&!this._screenReaderMode.read(s))),this.readOnly=Te(this,s=>this._options.read(s).readOnly),this.shouldRenderOldRevertArrows=Te(this,s=>!(!this._options.read(s).renderMarginRevertIcon||!this.renderSideBySide.read(s)||this.readOnly.read(s)||this.shouldRenderGutterMenu.read(s))),this.shouldRenderGutterMenu=Te(this,s=>this._options.read(s).renderGutterMenu),this.renderIndicators=Te(this,s=>this._options.read(s).renderIndicators),this.enableSplitViewResizing=Te(this,s=>this._options.read(s).enableSplitViewResizing),this.splitViewDefaultRatio=Te(this,s=>this._options.read(s).splitViewDefaultRatio),this.ignoreTrimWhitespace=Te(this,s=>this._options.read(s).ignoreTrimWhitespace),this.maxComputationTimeMs=Te(this,s=>this._options.read(s).maxComputationTime),this.showMoves=Te(this,s=>this._options.read(s).experimental.showMoves&&this.renderSideBySide.read(s)),this.isInEmbeddedEditor=Te(this,s=>this._options.read(s).isInEmbeddedEditor),this.diffWordWrap=Te(this,s=>this._options.read(s).diffWordWrap),this.originalEditable=Te(this,s=>this._options.read(s).originalEditable),this.diffCodeLens=Te(this,s=>this._options.read(s).diffCodeLens),this.accessibilityVerbose=Te(this,s=>this._options.read(s).accessibilityVerbose),this.diffAlgorithm=Te(this,s=>this._options.read(s).diffAlgorithm),this.showEmptyDecorations=Te(this,s=>this._options.read(s).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=Te(this,s=>this._options.read(s).onlyShowAccessibleDiffViewer),this.compactMode=Te(this,s=>this._options.read(s).compactMode),this.trueInlineDiffRenderingEnabled=Te(this,s=>this._options.read(s).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=Te(this,s=>!this.renderSideBySide.read(s)&&this.trueInlineDiffRenderingEnabled.read(s)),this.hideUnchangedRegions=Te(this,s=>this._options.read(s).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=Te(this,s=>this._options.read(s).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=Te(this,s=>this._options.read(s).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=Te(this,s=>this._options.read(s).hideUnchangedRegions.minimumLineCount),this._model=pt(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,s=>hBe(this,o=>{const r=s==null?void 0:s.diff.read(o);return r?KUe(r,this.trueInlineDiffRenderingEnabled.read(o)):void 0})).flatten().map(this,s=>!!s),this.inlineViewHideOriginalLineNumbers=this.compactMode;const i={...e,...$ie(e,Ls)};this._options=pt(this,i)}updateOptions(e){const t=$ie(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}};uV=UUe([$Ue(1,Yr)],uV);function KUe(n,e){return n.mappings.every(t=>qUe(t.lineRangeMapping)||GUe(t.lineRangeMapping)||e&&BG(t.lineRangeMapping))}function qUe(n){return n.original.length===0}function GUe(n){return n.modified.length===0}function $ie(n,e){var t,i,s,o,r,a,l,c;return{enableSplitViewResizing:Me(n.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:XDe(n.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:Me(n.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:Me(n.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:Vp(n.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:Vp(n.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Me(n.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Me(n.renderIndicators,e.renderIndicators),originalEditable:Me(n.originalEditable,e.originalEditable),diffCodeLens:Me(n.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Me(n.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:tn(n.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:tn(n.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:Me(n.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:Me((t=n.experimental)==null?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:Me((i=n.experimental)==null?void 0:i.showEmptyDecorations,e.experimental.showEmptyDecorations),useTrueInlineView:Me((s=n.experimental)==null?void 0:s.useTrueInlineView,e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:Me(((o=n.hideUnchangedRegions)==null?void 0:o.enabled)??((r=n.experimental)==null?void 0:r.collapseUnchangedRegions),e.hideUnchangedRegions.enabled),contextLineCount:Vp((a=n.hideUnchangedRegions)==null?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:Vp((l=n.hideUnchangedRegions)==null?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:Vp((c=n.hideUnchangedRegions)==null?void 0:c.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:Me(n.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:Me(n.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:Vp(n.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:Me(n.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:Me(n.renderGutterMenu,e.renderGutterMenu),compactMode:Me(n.compactMode,e.compactMode)}}var ZUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},MS=function(n,e){return function(t,i){e(t,i,n)}};let Cf=class extends dV{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,i,s,o,r,a,l){super(),this._domElement=e,this._parentContextKeyService=s,this._parentInstantiationService=o,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=Ct("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[Ct("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),Ct("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),Ct("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register(Yk(this,void 0)),this._diffModel=Te(this,C=>{var S;return(S=this._diffModelSrc.read(C))==null?void 0:S.object}),this.onDidChangeModel=pe.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new W1([qe,this._contextKeyService]))),this._boundarySashes=pt(this,void 0),this._accessibleDiffViewerShouldBeVisible=pt(this,!1),this._accessibleDiffViewerVisible=Te(this,C=>this._options.onlyShowAccessibleDiffViewer.read(C)?!0:this._accessibleDiffViewerShouldBeVisible.read(C)),this._movedBlocksLinesPart=pt(this,void 0),this._layoutInfo=Te(this,C=>{var ee,q;const S=this._rootSizeObserver.width.read(C),x=this._rootSizeObserver.height.read(C);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=x+"px";const k=this._sash.read(C),N=this._gutter.read(C),E=(N==null?void 0:N.width.read(C))??0,B=((ee=this._overviewRulerPart.read(C))==null?void 0:ee.width)??0;let A,O,W,T,M;if(!!k){const Z=k.sashLeft.read(C),V=((q=this._movedBlocksLinesPart.read(C))==null?void 0:q.width.read(C))??0;A=0,O=Z-E-V,M=Z-E,W=Z,T=S-W-B}else{M=0;const Z=this._options.inlineViewHideOriginalLineNumbers.read(C);A=E,Z?O=0:O=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(C)),W=E+O,T=S-W-B}return this.elements.original.style.left=A+"px",this.elements.original.style.width=O+"px",this._editors.original.layout({width:O,height:x},!0),N==null||N.layout(M),this.elements.modified.style.left=W+"px",this.elements.modified.style.width=T+"px",this._editors.modified.layout({width:T,height:x},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((C,S)=>C==null?void 0:C.diff.read(S)),this.onDidUpdateDiff=pe.fromObservableLight(this._diffValue),r.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(Pe(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new Npe(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(uV,t),this._register(Je(C=>{this._options.setWidth(this._rootSizeObserver.width.read(C))})),this._contextKeyService.createKey(R.isEmbeddedDiffEditor.key,!1),this._register(vc(R.isEmbeddedDiffEditor,this._contextKeyService,C=>this._options.isInEmbeddedEditor.read(C))),this._register(vc(R.comparingMovedCode,this._contextKeyService,C=>{var S;return!!((S=this._diffModel.read(C))!=null&&S.movedTextToCompare.read(C))})),this._register(vc(R.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,C=>this._options.couldShowInlineViewBecauseOfSize.read(C))),this._register(vc(R.diffEditorInlineMode,this._contextKeyService,C=>!this._options.renderSideBySide.read(C))),this._register(vc(R.hasChanges,this._contextKeyService,C=>{var S,x;return(((x=(S=this._diffModel.read(C))==null?void 0:S.diff.read(C))==null?void 0:x.mappings.length)??0)>0})),this._editors=this._register(this._instantiationService.createInstance(cV,this.elements.original,this.elements.modified,this._options,i,(C,S,x,k)=>this._createInnerEditor(C,S,x,k))),this._register(vc(R.diffEditorOriginalWritable,this._contextKeyService,C=>this._options.originalEditable.read(C))),this._register(vc(R.diffEditorModifiedWritable,this._contextKeyService,C=>!this._options.readOnly.read(C))),this._register(vc(R.diffEditorOriginalUri,this._contextKeyService,C=>{var S;return((S=this._diffModel.read(C))==null?void 0:S.model.original.uri.toString())??""})),this._register(vc(R.diffEditorModifiedUri,this._contextKeyService,C=>{var S;return((S=this._diffModel.read(C))==null?void 0:S.model.modified.uri.toString())??""})),this._overviewRulerPart=oo(this,C=>this._options.renderOverviewRuler.read(C)?this._instantiationService.createInstance(kr(CN,C),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(S=>S.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const c={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((C,S)=>{var x;return C-(((x=this._overviewRulerPart.read(S))==null?void 0:x.width)??0)})};this._sashLayout=new RUe(this._options,c),this._sash=oo(this,C=>{const S=this._options.renderSideBySide.read(C);return this.elements.root.classList.toggle("side-by-side",S),S?new Rpe(this.elements.root,c,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const d=oo(this,C=>this._instantiationService.createInstance(kr(zM,C),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);oo(this,C=>this._instantiationService.createInstance(kr(TUe,C),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const u=new Set,h=new Set;let f=!1;const m=oo(this,C=>this._instantiationService.createInstance(kr(sV,C),je(this._domElement),this._editors,this._diffModel,this._options,this,()=>f||d.get().isUpdatingHiddenAreas,u,h)).recomputeInitiallyAndOnChange(this._store),p=Te(this,C=>{const S=m.read(C).viewZones.read(C).orig,x=d.read(C).viewZones.read(C).origViewZones;return S.concat(x)}),b=Te(this,C=>{const S=m.read(C).viewZones.read(C).mod,x=d.read(C).viewZones.read(C).modViewZones;return S.concat(x)});this._register(BM(this._editors.original,p,C=>{f=C},u));let v;this._register(BM(this._editors.modified,b,C=>{f=C,f?v=fd.capture(this._editors.modified):(v==null||v.restore(this._editors.modified),v=void 0)},h)),this._accessibleDiffViewer=oo(this,C=>this._instantiationService.createInstance(kr(I_,C),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(S,x)=>this._accessibleDiffViewerShouldBeVisible.set(S,x),this._options.onlyShowAccessibleDiffViewer.map(S=>!S),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((S,x)=>{var k;return(k=S==null?void 0:S.diff.read(x))==null?void 0:k.mappings.map(N=>N.lineRangeMapping)}),new vUe(this._editors))).recomputeInitiallyAndOnChange(this._store);const w=this._accessibleDiffViewerVisible.map(C=>C?"hidden":"visible");this._register(yf(this.elements.modified,{visibility:w})),this._register(yf(this.elements.original,{visibility:w})),this._createDiffEditorContributions(),r.addDiffEditor(this),this._gutter=oo(this,C=>this._options.shouldRenderGutterMenu.read(C)?this._instantiationService.createInstance(kr(oV,C),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(A1(this._layoutInfo)),oo(this,C=>new(kr(Ty,C))(this.elements.root,this._diffModel,this._layoutInfo.map(S=>S.originalEditor),this._layoutInfo.map(S=>S.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,C=>{this._movedBlocksLinesPart.set(C,void 0)}),this._register(pe.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,C=>this._handleCursorPositionChange(C,!0))),this._register(pe.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,C=>this._handleCursorPositionChange(C,!1)));const y=this._diffModel.map(this,(C,S)=>{if(C)return C.diff.read(S)===void 0&&!C.isDiffUpToDate.read(S)});this._register(nr((C,S)=>{if(y.read(C)===!0){const x=this._editorProgressService.show(!0,1e3);S.add(Pe(()=>x.done()))}})),this._register(nr((C,S)=>{S.add(new(kr(VUe,C))(this._editors,this._diffModel,this._options,this))})),this._register(nr((C,S)=>{const x=this._diffModel.read(C);if(x)for(const k of[x.model.original,x.model.modified])S.add(k.onWillDispose(N=>{et(new Zt("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register(Je(C=>{this._options.setModel(this._diffModel.read(C))}))}_createInnerEditor(e,t,i,s){return e.createInstance(bN,t,i,s)}_createDiffEditorContributions(){const e=K_.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){et(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return zI.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var i;const e=this._editors.original.saveViewState(),t=this._editors.modified.saveViewState();return{original:e,modified:t,modelState:(i=this._diffModel.get())==null?void 0:i.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const i=e;this._editors.original.restoreViewState(i.original),this._editors.modified.restoreViewState(i.modified),i.modelState&&((t=this._diffModel.get())==null||t.restoreSerializedState(i.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(nV,e,this._options)}getModel(){var e;return((e=this._diffModel.get())==null?void 0:e.model)??null}setModel(e){const t=e?"model"in e?WM.create(e).createNewRef(this):WM.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){const i=this._diffModel.get();!e&&i&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==(e==null?void 0:e.object)&&Cv(t,s=>{var a;const o=e==null?void 0:e.object;ii.batchEventsGlobally(s,()=>{this._editors.original.setModel(o?o.model.original:null),this._editors.modified.setModel(o?o.model.modified:null)});const r=(a=this._diffModelSrc.get())==null?void 0:a.createNewRef(this);this._diffModelSrc.set(e==null?void 0:e.createNewRef(this),s),setTimeout(()=>{r==null||r.dispose()},0)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var t;const e=(t=this._diffModel.get())==null?void 0:t.diff.get();return e?YUe(e):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const i=e.map(s=>({range:s.modifiedRange,text:t.model.original.getValueInRange(s.originalRange)}));this._editors.modified.executeEdits("diffEditor",i)}_goTo(e){this._editors.modified.setPosition(new U(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var o,r;const t=(r=(o=this._diffModel.get())==null?void 0:o.diff.get())==null?void 0:r.mappings;if(!t||t.length===0)return;const i=this._editors.modified.getPosition().lineNumber;let s;e==="next"?s=t.find(a=>a.lineRangeMapping.modified.startLineNumber>i)??t[0]:s=Mk(t,a=>a.lineRangeMapping.modified.startLineNumber<i)??t[t.length-1],this._goTo(s),s.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(ha.diffLineDeleted,{source:"diffEditor.goToDiff"}):s.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(ha.diffLineInserted,{source:"diffEditor.goToDiff"}):s&&this._accessibilitySignalService.playSignal(ha.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{var i;const t=(i=e.diff.get())==null?void 0:i.mappings;!t||t.length===0||this._goTo(t[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var r,a;const e=this._editors.modified.hasWidgetFocus(),t=e?this._editors.modified:this._editors.original,i=e?this._editors.original:this._editors.modified;let s;const o=t.getSelection();if(o){const l=(a=(r=this._diffModel.get())==null?void 0:r.diff.get())==null?void 0:a.mappings.map(c=>e?c.lineRangeMapping.flip():c.lineRangeMapping);if(l){const c=Eie(o.getStartPosition(),l),d=Eie(o.getEndPosition(),l);s=D.plusRange(c,d)}}return{destination:i,destinationSelection:s}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&qi(i=>{for(const s of e)s.collapseAll(i)})}showAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&qi(i=>{for(const s of e)s.showAll(i)})}_handleCursorPositionChange(e,t){var i,s;if((e==null?void 0:e.reason)===3){const o=(s=(i=this._diffModel.get())==null?void 0:i.diff.get())==null?void 0:s.mappings.find(r=>t?r.lineRangeMapping.modified.contains(e.position.lineNumber):r.lineRangeMapping.original.contains(e.position.lineNumber));o!=null&&o.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(ha.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):o!=null&&o.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(ha.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):o&&this._accessibilitySignalService.playSignal(ha.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};Cf=ZUe([MS(3,qe),MS(4,Ae),MS(5,Ut),MS(6,pp),MS(7,fp)],Cf);function YUe(n){return n.mappings.map(e=>{const t=e.lineRangeMapping;let i,s,o,r,a=t.innerChanges;return t.original.isEmpty?(i=t.original.startLineNumber-1,s=0,a=void 0):(i=t.original.startLineNumber,s=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(o=t.modified.startLineNumber-1,r=0,a=void 0):(o=t.modified.startLineNumber,r=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:s,modifiedStartLineNumber:o,modifiedEndLineNumber:r,charChanges:a==null?void 0:a.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var HG=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},xi=function(n,e){return function(t,i){e(t,i,n)}};let XUe=0,Kie=!1;function QUe(n){if(!n){if(Kie)return;Kie=!0}n3e(n||ui.document.body)}let $M=class extends bN{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f){const m={...t};m.ariaLabel=m.ariaLabel||o6.editorViewAccessibleLabel,super(e,m,{},i,s,o,r,c,d,u,h,f),l instanceof VC?this._standaloneKeybindingService=l:this._standaloneKeybindingService=null,QUe(m.ariaContainerElement),_Be((p,b)=>i.createInstance(EC,p,b,{})),bBe(a)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const s="DYNAMIC_"+ ++XUe,o=se.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(s,e,t,o),s}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),G.None;const t=e.id,i=e.label,s=se.and(se.equals("editorId",this.getId()),se.deserialize(e.precondition)),o=e.keybindings,r=se.and(s,se.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...m)=>Promise.resolve(e.run(this,...m)),d=new ne,u=this.getId()+":"+t;if(d.add(Mt.registerCommand(u,c)),a){const f={command:{id:u,title:i},when:s,group:a,order:l};d.add(ls.appendMenuItem(Ne.EditorContext,f))}if(Array.isArray(o))for(const f of o)d.add(this._standaloneKeybindingService.addDynamicKeybinding(u,f,c,r));const h=new Spe(u,i,i,void 0,s,(...f)=>Promise.resolve(e.run(this,...f)),this._contextKeyService);return this._actions.set(t,h),d.add(Pe(()=>{this._actions.delete(t)})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof x2)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};$M=HG([xi(2,Ae),xi(3,Ut),xi(4,Ci),xi(5,qe),xi(6,ju),xi(7,ei),xi(8,Vn),xi(9,wn),xi(10,Yr),xi(11,Yi),xi(12,xe)],$M);let hV=class extends $M{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f,m,p,b){const v={...t};wM(u,v,!1);const w=c.registerEditorContainer(e);typeof v.theme=="string"&&c.setTheme(v.theme),typeof v.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!v.autoDetectHighContrast);const y=v.model;delete v.model,super(e,v,i,s,o,r,a,l,c,d,h,p,b),this._configurationService=u,this._standaloneThemeService=c,this._register(w);let C;if(typeof y>"u"){const S=m.getLanguageIdByMimeType(v.language)||v.language||Do;C=Ope(f,m,v.value||"",S,void 0),this._ownsModel=!0}else C=y,this._ownsModel=!1;if(this._attachModel(C),C){const S={oldModelUrl:null,newModelUrl:C.uri};this._onDidChangeModel.fire(S)}}dispose(){super.dispose()}updateOptions(e){wM(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};hV=HG([xi(2,Ae),xi(3,Ut),xi(4,Ci),xi(5,qe),xi(6,ju),xi(7,ei),xi(8,Ha),xi(9,wn),xi(10,_t),xi(11,Yr),xi(12,Ei),xi(13,ji),xi(14,Yi),xi(15,xe)],hV);let fV=class extends Cf{constructor(e,t,i,s,o,r,a,l,c,d,u,h){const f={...t};wM(l,f,!0);const m=r.registerEditorContainer(e);typeof f.theme=="string"&&r.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&r.setAutoDetectHighContrast(!!f.autoDetectHighContrast),super(e,f,{},s,i,o,h,d),this._configurationService=l,this._standaloneThemeService=r,this._register(m)}dispose(){super.dispose()}updateOptions(e){wM(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance($M,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};fV=HG([xi(2,Ae),xi(3,qe),xi(4,Ut),xi(5,Ha),xi(6,wn),xi(7,_t),xi(8,Zr),xi(9,fp),xi(10,Mf),xi(11,pp)],fV);function Ope(n,e,t,i,s){if(t=t||"",!i){const o=t.indexOf(`
`);let r=t;return o!==-1&&(r=t.substring(0,o)),qie(n,t,e.createByFilepathOrFirstLine(s||null,r),s)}return qie(n,t,e.createById(i),s)}function qie(n,e,t,i){return n.createModel(e,t,i)}var JUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Gie=function(n,e){return function(t,i){e(t,i,n)}};class e$e{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let KM=class extends G{constructor(e,t,i,s,o){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=s,this._viewModel=pt(this,void 0),this._collapsed=Te(this,l=>{var c;return(c=this._viewModel.read(l))==null?void 0:c.collapsed.read(l)}),this._editorContentHeight=pt(this,500),this.contentHeight=Te(this,l=>(this._collapsed.read(l)?0:this._editorContentHeight.read(l))+this._outerEditorHeight),this._modifiedContentWidth=pt(this,0),this._modifiedWidth=pt(this,0),this._originalContentWidth=pt(this,0),this._originalWidth=pt(this,0),this.maxScroll=Te(this,l=>{const c=this._modifiedContentWidth.read(l)-this._modifiedWidth.read(l),d=this._originalContentWidth.read(l)-this._originalWidth.read(l);return c>d?{maxScroll:c,width:this._modifiedWidth.read(l)}:{maxScroll:d,width:this._originalWidth.read(l)}}),this._elements=Ct("div.multiDiffEntry",[Ct("div.header@header",[Ct("div.header-content",[Ct("div.collapse-button@collapseButton"),Ct("div.file-path",[Ct("div.title.modified.show-file-icons@primaryPath",[]),Ct("div.status.deleted@status",["R"]),Ct("div.title.original.show-file-icons@secondaryPath",[])]),Ct("div.actions@actions")])]),Ct("div.editorParent",[Ct("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(Cf,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=Rr(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=Rr(this.editor.getOriginalEditor()).isFocused,this.isFocused=Te(this,l=>this.isModifedFocused.read(l)||this.isOriginalFocused.read(l)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new ne),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const r=new nM(this._elements.collapseButton,{});this._register(Je(l=>{r.element.className="",r.icon=this._collapsed.read(l)?he.chevronRight:he.chevronDown})),this._register(r.onDidClick(()=>{var l;(l=this._viewModel.get())==null||l.collapsed.set(!this._collapsed.get(),void 0)})),this._register(Je(l=>{this._elements.editor.style.display=this._collapsed.read(l)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(l=>{const c=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(c,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(l=>{const c=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(c,void 0)})),this._register(this.editor.onDidContentSizeChange(l=>{ex(c=>{this._editorContentHeight.set(l.contentHeight,c),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),c),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),c)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(l=>{if(this._isSettingScrollTop||!l.scrollTopChanged||!this._data)return;const c=l.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(c)})),this._register(Je(l=>{var d;const c=(d=this._viewModel.read(l))==null?void 0:d.isActive.read(l);this._elements.root.classList.toggle("active",c)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(o.createScoped(this._elements.actions));const a=this._register(this._instantiationService.createChild(new W1([qe,this._contextKeyService])));this._register(a.createInstance(jM,this._elements.actions,Ne.MultiDiffEditorFileToolbar,{actionRunner:this._register(new Mpe(()=>{var l;return(l=this._viewModel.get())==null?void 0:l.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:l=>l.startsWith("navigation")},actionViewItemProvider:(l,c)=>Ege(a,l,c)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(s){return{...s,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!e){ex(s=>{this._viewModel.set(void 0,s),this.editor.setDiffModel(null,s),this._dataStore.clear()});return}const i=e.viewModel.documentDiffItem;if(ex(s=>{var c,d;(c=this._resourceLabel)==null||c.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let o=!1,r=!1,a=!1,l="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(l="R",o=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(l="A",a=!0):(l="D",r=!0),this._elements.status.classList.toggle("renamed",o),this._elements.status.classList.toggle("deleted",r),this._elements.status.classList.toggle("added",a),this._elements.status.innerText=l,(d=this._resourceLabel2)==null||d.setUri(o?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,s),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,s),this.editor.updateOptions(t(i.options??{}))}),i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange(()=>{this.editor.updateOptions(t(i.options??{}))})),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,s=>{s||this.setData(void 0)}),e.viewModel.documentDiffItem.contextKeys)for(const[s,o]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(s,o)}render(e,t,i,s){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const o=e.length-this._headerHeight,r=Math.max(0,Math.min(s.start-e.start,o));this._elements.header.style.transform=`translateY(${r}px)`,ex(a=>{this.editor.layout({width:t-2*8-2*1,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",r>0||i>0),this._elements.header.classList.toggle("collapsed",r===o)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};KM=JUe([Gie(3,Ae),Gie(4,qe)],KM);class t$e{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){let t;if(this._unused.size===0)t=this._create(e),this._itemData.set(t,e);else{const i=[...this._unused.values()];t=i.find(s=>this._itemData.get(s).getId()===e.getId())??i[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var i$e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Zie=function(n,e){return function(t,i){e(t,i,n)}};let gV=class extends G{constructor(e,t,i,s,o,r){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=s,this._parentContextKeyService=o,this._parentInstantiationService=r,this._scrollableElements=Ct("div.scrollContent",[Ct("div@content",{style:{overflow:"hidden"}}),Ct("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new T1({forceIntegerValues:!1,scheduleAtNextAnimationFrame:l=>zr(je(this._element),l),smoothScrollDuration:100})),this._scrollableElement=this._register(new q4(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=Ct("div.monaco-component.multiDiffEditor",{},[Ct("div",{},[this._scrollableElement.getDomNode()]),Ct("div.placeholder@placeholder",{},[Ct("div",[_("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new Npe(this._element,void 0)),this._objectPool=this._register(new t$e(l=>{const c=this._instantiationService.createInstance(KM,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return c.setData(l),c})),this.scrollTop=ii(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=ii(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=gp(this,(l,c)=>{const d=this._viewModel.read(l);if(!d)return{items:[],getItem:m=>{throw new Zt}};const u=d.items.read(l),h=new Map;return{items:u.map(m=>{var v;const p=c.add(new n$e(m,this._objectPool,this.scrollLeft,w=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+w})})),b=(v=this._lastDocStates)==null?void 0:v[p.getKey()];return b&&qi(w=>{p.setViewState(b,w)}),h.set(m,p),p}),getItem:m=>h.get(m)}}),this._viewItems=this._viewItemsInfo.map(this,l=>l.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(l,c)=>l.reduce((d,u)=>d+u.contentHeight.read(c)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new W1([qe,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(R.inMultiDiffEditor.key,!0),this._register(nr((l,c)=>{const d=this._viewModel.read(l);if(d&&d.contextKeys)for(const[u,h]of Object.entries(d.contextKeys)){const f=this._contextKeyService.createKey(u,void 0);f.set(h),c.add(Pe(()=>f.reset()))}}));const a=this._parentContextKeyService.createKey(R.multiDiffEditorAllCollapsed.key,!1);this._register(Je(l=>{const c=this._viewModel.read(l);if(c){const d=c.items.read(l).every(u=>u.collapsed.read(l));a.set(d)}})),this._register(Je(l=>{const c=this._dimension.read(l);this._sizeObserver.observe(c)})),this._register(Je(l=>{const c=this._viewItems.read(l);this._elements.placeholder.classList.toggle("visible",c.length===0)})),this._scrollableElements.content.style.position="relative",this._register(Je(l=>{const c=this._sizeObserver.height.read(l);this._scrollableElements.root.style.height=`${c}px`;const d=this._totalHeight.read(l);this._scrollableElements.content.style.height=`${d}px`;const u=this._sizeObserver.width.read(l);let h=u;const f=this._viewItems.read(l),m=HK(f,Io(p=>p.maxScroll.read(l).maxScroll,Kl));if(m){const p=m.maxScroll.read(l);h=u+p.maxScroll}this._scrollableElement.setScrollDimensions({width:u,height:c,scrollHeight:d,scrollWidth:h})})),e.replaceChildren(this._elements.root),this._register(Pe(()=>{e.replaceChildren()})),this._register(this._register(Je(l=>{ex(c=>{this.render(l)})})))}render(e){const t=this.scrollTop.read(e);let i=0,s=0,o=0;const r=this._sizeObserver.height.read(e),a=vt.ofStartAndLength(t,r),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const d=c.contentHeight.read(e),u=Math.min(d,r),h=vt.ofStartAndLength(s,u),f=vt.ofStartAndLength(o,d);if(f.isBefore(a))i-=d-u,c.hide();else if(f.isAfter(a))c.hide();else{const m=Math.max(0,Math.min(a.start-f.start,d-u));i-=m;const p=vt.ofStartAndLength(t+i,r);c.render(h,m,l,p)}s+=u+this._spaceBetweenPx,o+=d+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+i)}px)`}};gV=i$e([Zie(4,qe),Zie(5,Ae)],gV);class n$e extends G{constructor(e,t,i,s){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=s,this._templateRef=this._register(Yk(this,void 0)),this.contentHeight=Te(this,o=>{var r,a;return((a=(r=this._templateRef.read(o))==null?void 0:r.object.contentHeight)==null?void 0:a.read(o))??this.viewModel.lastTemplateData.read(o).contentHeight}),this.maxScroll=Te(this,o=>{var r;return((r=this._templateRef.read(o))==null?void 0:r.object.maxScroll.read(o))??{maxScroll:0,scrollWidth:0}}),this.template=Te(this,o=>{var r;return(r=this._templateRef.read(o))==null?void 0:r.object}),this._isHidden=pt(this,!1),this._isFocused=Te(this,o=>{var r;return((r=this.template.read(o))==null?void 0:r.isFocused.read(o))??!1}),this.viewModel.setIsFocused(this._isFocused,void 0),this._register(Je(o=>{var a;const r=this._scrollLeft.read(o);(a=this._templateRef.read(o))==null||a.object.setScrollLeft(r)})),this._register(Je(o=>{const r=this._templateRef.read(o);!r||!this._isHidden.read(o)||r.object.isFocused.read(o)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${(e=this.viewModel.documentDiffItem.modified)==null?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var r;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const i=this.viewModel.lastTemplateData.get(),s=(r=e.selections)==null?void 0:r.map(Ie.liftSelection);this.viewModel.lastTemplateData.set({...i,selections:s},t);const o=this._templateRef.get();o&&s&&o.object.editor.setSelections(s)}_updateTemplateData(e){const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){const e=this._templateRef.get();e&&qi(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,s){this._isHidden.set(!1,void 0);let o=this._templateRef.get();if(!o){o=this._objectPool.getUnusedObj(new e$e(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(o,void 0);const r=this.viewModel.lastTemplateData.get().selections;r&&o.object.editor.setSelections(r)}o.object.render(e,i,t,s)}}P("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},_("multiDiffEditor.headerBackground","The background color of the diff editor's header"));P("multiDiffEditor.background",tc,_("multiDiffEditor.background","The background color of the multi file diff editor"));P("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},_("multiDiffEditor.border","The border color of the multi file diff editor"));var s$e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},o$e=function(n,e){return function(t,i){e(t,i,n)}};let mV=class extends G{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=pt(this,void 0),this._viewModel=pt(this,void 0),this._widgetImpl=gp(this,(s,o)=>(kr(KM,s),o.add(this._instantiationService.createInstance(kr(gV,s),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register(A1(this._widgetImpl))}};mV=s$e([o$e(2,Ae)],mV);function r$e(n,e,t){return Ye.initialize(t||{}).createInstance(hV,n,e)}function a$e(n){return Ye.get(Ut).onCodeEditorAdd(t=>{n(t)})}function l$e(n){return Ye.get(Ut).onDiffEditorAdd(t=>{n(t)})}function c$e(){return Ye.get(Ut).listCodeEditors()}function d$e(){return Ye.get(Ut).listDiffEditors()}function u$e(n,e,t){return Ye.initialize(t||{}).createInstance(fV,n,e)}function h$e(n,e){const t=Ye.initialize(e||{});return new mV(n,{},t)}function f$e(n){if(typeof n.id!="string"||typeof n.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return Mt.registerCommand(n.id,n.run)}function g$e(n){if(typeof n.id!="string"||typeof n.label!="string"||typeof n.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=se.deserialize(n.precondition),t=(s,...o)=>Hn.runEditorCommand(s,o,e,(r,a,l)=>Promise.resolve(n.run(a,...l))),i=new ne;if(i.add(Mt.registerCommand(n.id,t)),n.contextMenuGroupId){const s={command:{id:n.id,title:n.label},when:e,group:n.contextMenuGroupId,order:n.contextMenuOrder||0};i.add(ls.appendMenuItem(Ne.EditorContext,s))}if(Array.isArray(n.keybindings)){const s=Ye.get(ei);if(!(s instanceof VC))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const o=se.and(e,se.deserialize(n.keybindingContext));i.add(s.addDynamicKeybindings(n.keybindings.map(r=>({keybinding:r,command:n.id,when:o}))))}}return i}function m$e(n){return Fpe([n])}function Fpe(n){const e=Ye.get(ei);return e instanceof VC?e.addDynamicKeybindings(n.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:se.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),G.None)}function p$e(n,e,t){const i=Ye.get(ji),s=i.getLanguageIdByMimeType(e)||e;return Ope(Ye.get(Ei),i,n,s,t)}function _$e(n,e){const t=Ye.get(ji),i=t.getLanguageIdByMimeType(e)||e||Do;n.setLanguage(t.createById(i))}function b$e(n,e,t){n&&Ye.get(zu).changeOne(e,n.uri,t)}function v$e(n){Ye.get(zu).changeAll(n,[])}function w$e(n){return Ye.get(zu).read(n)}function y$e(n){return Ye.get(zu).onMarkerChanged(n)}function C$e(n){return Ye.get(Ei).getModel(n)}function S$e(){return Ye.get(Ei).getModels()}function x$e(n){return Ye.get(Ei).onModelAdded(n)}function L$e(n){return Ye.get(Ei).onModelRemoved(n)}function k$e(n){return Ye.get(Ei).onModelLanguageChanged(t=>{n({model:t.model,oldLanguage:t.oldLanguageId})})}function N$e(n){return hHe(Ye.get(Ei),n)}function I$e(n,e){const t=Ye.get(ji),i=Ye.get(Ha);return aG.colorizeElement(i,t,n,e).then(()=>{i.registerEditorContainer(n)})}function E$e(n,e,t){const i=Ye.get(ji);return Ye.get(Ha).registerEditorContainer(ui.document.body),aG.colorize(i,n,e,t)}function D$e(n,e,t=4){return Ye.get(Ha).registerEditorContainer(ui.document.body),aG.colorizeModelLine(n,e,t)}function T$e(n){const e=nn.get(n);return e||{getInitialState:()=>MC,tokenize:(t,i,s)=>pq(n,s)}}function R$e(n,e){nn.getOrCreate(e);const t=T$e(e),i=Bu(n),s=[];let o=t.getInitialState();for(let r=0,a=i.length;r<a;r++){const l=i[r],c=t.tokenize(l,!0,o);s[r]=c.tokens,o=c.endState}return s}function M$e(n,e){Ye.get(Ha).defineTheme(n,e)}function P$e(n){Ye.get(Ha).setTheme(n)}function A$e(){iW.clearAllFontInfos()}function O$e(n,e){return Mt.registerCommand({id:n,handler:e})}function F$e(n){return Ye.get(hr).registerOpener({async open(t){return typeof t=="string"&&(t=Be.parse(t)),n.open(t)}})}function B$e(n){return Ye.get(Ut).registerCodeEditorOpenHandler(async(t,i,s)=>{var a;if(!i)return null;const o=(a=t.options)==null?void 0:a.selection;let r;return o&&typeof o.endLineNumber=="number"&&typeof o.endColumn=="number"?r=o:o&&(r={lineNumber:o.startLineNumber,column:o.startColumn}),await n.openCodeEditor(i,t.resource,r)?i:null})}function W$e(){return{create:r$e,getEditors:c$e,getDiffEditors:d$e,onDidCreateEditor:a$e,onDidCreateDiffEditor:l$e,createDiffEditor:u$e,addCommand:f$e,addEditorAction:g$e,addKeybindingRule:m$e,addKeybindingRules:Fpe,createModel:p$e,setModelLanguage:_$e,setModelMarkers:b$e,getModelMarkers:w$e,removeAllMarkers:v$e,onDidChangeMarkers:y$e,getModels:S$e,getModel:C$e,onDidCreateModel:x$e,onWillDisposeModel:L$e,onDidChangeModelLanguage:k$e,createWebWorker:N$e,colorizeElement:I$e,colorize:E$e,colorizeModelLine:D$e,tokenize:R$e,defineTheme:M$e,setTheme:P$e,remeasureFonts:A$e,registerCommand:O$e,registerLinkOpener:F$e,registerEditorOpener:B$e,AccessibilitySupport:X9,ContentWidgetPositionPreference:n8,CursorChangeReason:s8,DefaultEndOfLine:o8,EditorAutoIndentStrategy:a8,EditorOption:l8,EndOfLinePreference:c8,EndOfLineSequence:d8,MinimapPosition:y8,MinimapSectionHeaderStyle:C8,MouseTargetType:S8,OverlayWidgetPositionPreference:k8,OverviewRulerLane:N8,GlyphMarginLane:u8,RenderLineNumbersType:D8,RenderMinimap:T8,ScrollbarVisibility:M8,ScrollType:R8,TextEditorCursorBlinkingStyle:W8,TextEditorCursorStyle:H8,TrackedRangeStickiness:V8,WrappingIndent:j8,InjectedTextCursorStops:g8,PositionAffinity:E8,ShowLightbulbIconMode:A8,ConfigurationChangedEvent:kue,BareFontInfo:U_,FontInfo:tW,TextModelResolvedOptions:ST,FindMatch:Rk,ApplyUpdateResult:Tx,EditorZoom:Qa,createMultiFileDiffEditor:h$e,EditorType:zI,EditorOptions:md}}function H$e(n,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!n(t))return!1;return!0}function kD(n,e){return typeof n=="boolean"?n:e}function Yie(n,e){return typeof n=="string"?n:e}function V$e(n){const e={};for(const t of n)e[t]=!0;return e}function Xie(n,e=!1){e&&(n=n.map(function(i){return i.toLowerCase()}));const t=V$e(n);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function pV(n,e,t){e=e.replace(/@@/g,"");let i=0,s;do s=!1,e=e.replace(/@(\w+)/g,function(r,a){s=!0;let l="";if(typeof n[a]=="string")l=n[a];else if(n[a]&&n[a]instanceof RegExp)l=n[a].source;else throw n[a]===void 0?Ri(n,"language definition does not contain attribute '"+a+"', used at: "+e):Ri(n,"attribute reference '"+a+"' must be a string, used at: "+e);return l_(l)?"":"(?:"+l+")"}),i++;while(s&&i<5);e=e.replace(/\x01/g,"@");const o=(n.ignoreCase?"i":"")+(n.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(THe(n,e,c),o)),l)}return new RegExp(e,o)}function j$e(n,e,t,i){if(i<0)return n;if(i<e.length)return e[i];if(i>=100){i=i-100;const s=t.split(".");if(s.unshift(t),i<s.length)return s[i]}return null}function z$e(n,e,t,i){let s=-1,o=t,r=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(s=parseInt(r[3]),r[2]&&(s=s+100)),o=r[4]);let a="~",l=o;!o||o.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(r=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(a=r[1],l=r[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const d=Xie(l.split("|"),n.ignoreCase);c=function(u){return a==="~"?d(u):!d(u)}}else if(a==="@"||a==="!@"){const d=n[l];if(!d)throw Ri(n,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!H$e(function(h){return typeof h=="string"},d))throw Ri(n,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const u=Xie(d,n.ignoreCase);c=function(h){return a==="@"?u(h):!u(h)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const d=pV(n,"^"+l+"$",!1);c=function(u){return a==="~"?d.test(u):!d.test(u)}}else c=function(d,u,h,f){return pV(n,"^"+fg(n,l,u,h,f)+"$",!1).test(d)};else if(l.indexOf("$")<0){const d=Xh(n,l);c=function(u){return a==="=="?u===d:u!==d}}else{const d=Xh(n,l);c=function(u,h,f,m,p){const b=fg(n,d,h,f,m);return a==="=="?u===b:u!==b}}return s===-1?{name:t,value:i,test:function(d,u,h,f){return c(d,d,u,h,f)}}:{name:t,value:i,test:function(d,u,h,f){const m=j$e(d,u,h,s);return c(m||"",d,u,h,f)}}}function _V(n,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Ri(n,"a 'token' attribute must be of type string, in rule: "+e);{const i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw Ri(n,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Ri(n,"the next state must be a string value in rule: "+e);{let s=t.next;if(!/^(@pop|@push|@popall)$/.test(s)&&(s[0]==="@"&&(s=s.substr(1)),s.indexOf("$")<0&&!RHe(n,fg(n,s,"",[],""))))throw Ri(n,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=s}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,n.usesEmbedded=!0),i}}else if(Array.isArray(t)){const i=[];for(let s=0,o=t.length;s<o;s++)i[s]=_V(n,e,t[s]);return{group:i}}else if(t.cases){const i=[];for(const o in t.cases)if(t.cases.hasOwnProperty(o)){const r=_V(n,e,t.cases[o]);o==="@default"||o==="@"||o===""?i.push({test:void 0,value:r,name:o}):o==="@eos"?i.push({test:function(a,l,c,d){return d},value:r,name:o}):i.push(z$e(n,e,o,r))}const s=n.defaultToken;return{test:function(o,r,a,l){for(const c of i)if(!c.test||c.test(o,r,a,l))return c.value;return s}}}else throw Ri(n,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class U$e{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw Ri(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=pV(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")",!0)}setAction(e,t){this.action=_V(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function Bpe(n,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={languageId:n,includeLF:kD(e.includeLF,!1),noThrow:!1,maxStack:100,start:typeof e.start=="string"?e.start:null,ignoreCase:kD(e.ignoreCase,!1),unicode:kD(e.unicode,!1),tokenPostfix:Yie(e.tokenPostfix,"."+n),defaultToken:Yie(e.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},i=e;i.languageId=n,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function s(r,a,l){for(const c of l){let d=c.include;if(d){if(typeof d!="string")throw Ri(t,"an 'include' attribute must be a string at: "+r);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw Ri(t,"include target '"+d+"' is not defined at: "+r);s(r+"."+d,a,e.tokenizer[d])}else{const u=new U$e(r);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(u.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")u.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const h=c[1];h.next=c[2],u.setAction(i,h)}else throw Ri(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else u.setAction(i,c[1]);else{if(!c.regex)throw Ri(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r);c.name&&typeof c.name=="string"&&(u.name=c.name),c.matchOnlyAtStart&&(u.matchOnlyAtLineStart=kD(c.matchOnlyAtLineStart,!1)),u.setRegex(i,c.regex),u.setAction(i,c.action)}a.push(u)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Ri(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const r in e.tokenizer)if(e.tokenizer.hasOwnProperty(r)){t.start||(t.start=r);const a=e.tokenizer[r];t.tokenizer[r]=new Array,s("tokenizer."+r,t.tokenizer[r],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Ri(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const o=[];for(const r of e.brackets){let a=r;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Ri(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")o.push({token:a.token+t.tokenPostfix,open:Xh(t,a.open),close:Xh(t,a.close)});else throw Ri(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=o,t.noThrow=!0,t}function $$e(n){xC.registerLanguage(n)}function K$e(){let n=[];return n=n.concat(xC.getLanguages()),n}function q$e(n){return Ye.get(ji).languageIdCodec.encodeLanguageId(n)}function G$e(n,e){return Ye.withServices(()=>{const i=Ye.get(ji).onDidRequestRichLanguageFeatures(s=>{s===n&&(i.dispose(),e())});return i})}function Z$e(n,e){return Ye.withServices(()=>{const i=Ye.get(ji).onDidRequestBasicLanguageFeatures(s=>{s===n&&(i.dispose(),e())});return i})}function Y$e(n,e){if(!Ye.get(ji).isRegisteredLanguageId(n))throw new Error(`Cannot set configuration for unknown language ${n}`);return Ye.get(Yi).register(n,e,100)}class X$e{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if(typeof this._actual.tokenize=="function")return SN.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const s=this._actual.tokenizeEncoded(e,i);return new p4(s.tokens,s.endState)}}class SN{constructor(e,t,i,s){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=s}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let s=0;for(let o=0,r=e.length;o<r;o++){const a=e[o];let l=a.startIndex;o===0?l=0:l<s&&(l=s),i[o]=new Sk(l,a.scopes,t),s=l}return i}static adaptTokenize(e,t,i,s){const o=t.tokenize(i,s),r=SN._toClassicTokens(o.tokens,e);let a;return o.endState.equals(s)?a=s:a=o.endState,new mK(r,a)}tokenize(e,t,i){return SN.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),s=this._standaloneThemeService.getColorTheme().tokenTheme,o=[];let r=0,a=0;for(let c=0,d=t.length;c<d;c++){const u=t[c],h=s.match(i,u.scopes)|1024;if(r>0&&o[r-1]===h)continue;let f=u.startIndex;c===0?f=0:f<a&&(f=a),o[r++]=f,o[r++]=h,a=f}const l=new Uint32Array(r);for(let c=0;c<r;c++)l[c]=o[c];return l}tokenizeEncoded(e,t,i){const s=this._actual.tokenize(e,i),o=this._toBinaryTokens(this._languageService.languageIdCodec,s.tokens);let r;return s.endState.equals(i)?r=i:r=s.endState,new p4(o,r)}}function Q$e(n){return typeof n.getInitialState=="function"}function J$e(n){return"tokenizeEncoded"in n}function Wpe(n){return n&&typeof n.then=="function"}function eKe(n){const e=Ye.get(Ha);if(n){const t=[null];for(let i=1,s=n.length;i<s;i++)t[i]=oe.fromHex(n[i]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function Hpe(n,e){return J$e(e)?new X$e(n,e):new SN(n,e,Ye.get(ji),Ye.get(Ha))}function VG(n,e){const t=new DRe(async()=>{const i=await Promise.resolve(e.create());return i?Q$e(i)?Hpe(n,i):new uN(Ye.get(ji),Ye.get(Ha),n,Bpe(n,i),Ye.get(_t)):null});return nn.registerFactory(n,t)}function tKe(n,e){if(!Ye.get(ji).isRegisteredLanguageId(n))throw new Error(`Cannot set tokens provider for unknown language ${n}`);return Wpe(e)?VG(n,{create:()=>e}):nn.register(n,Hpe(n,e))}function iKe(n,e){const t=i=>new uN(Ye.get(ji),Ye.get(Ha),n,Bpe(n,i),Ye.get(_t));return Wpe(e)?VG(n,{create:()=>e}):nn.register(n,t(e))}function nKe(n,e){return Ye.get(xe).referenceProvider.register(n,e)}function sKe(n,e){return Ye.get(xe).renameProvider.register(n,e)}function oKe(n,e){return Ye.get(xe).newSymbolNamesProvider.register(n,e)}function rKe(n,e){return Ye.get(xe).signatureHelpProvider.register(n,e)}function aKe(n,e){return Ye.get(xe).hoverProvider.register(n,{provideHover:async(i,s,o,r)=>{const a=i.getWordAtPosition(s);return Promise.resolve(e.provideHover(i,s,o,r)).then(l=>{if(l)return!l.range&&a&&(l.range=new D(s.lineNumber,a.startColumn,s.lineNumber,a.endColumn)),l.range||(l.range=new D(s.lineNumber,s.column,s.lineNumber,s.column)),l})}})}function lKe(n,e){return Ye.get(xe).documentSymbolProvider.register(n,e)}function cKe(n,e){return Ye.get(xe).documentHighlightProvider.register(n,e)}function dKe(n,e){return Ye.get(xe).linkedEditingRangeProvider.register(n,e)}function uKe(n,e){return Ye.get(xe).definitionProvider.register(n,e)}function hKe(n,e){return Ye.get(xe).implementationProvider.register(n,e)}function fKe(n,e){return Ye.get(xe).typeDefinitionProvider.register(n,e)}function gKe(n,e){return Ye.get(xe).codeLensProvider.register(n,e)}function mKe(n,e,t){return Ye.get(xe).codeActionProvider.register(n,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(s,o,r,a)=>{const c=Ye.get(zu).read({resource:s.uri}).filter(d=>D.areIntersectingOrTouching(d,o));return e.provideCodeActions(s,o,{markers:c,only:r.only,trigger:r.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function pKe(n,e){return Ye.get(xe).documentFormattingEditProvider.register(n,e)}function _Ke(n,e){return Ye.get(xe).documentRangeFormattingEditProvider.register(n,e)}function bKe(n,e){return Ye.get(xe).onTypeFormattingEditProvider.register(n,e)}function vKe(n,e){return Ye.get(xe).linkProvider.register(n,e)}function wKe(n,e){return Ye.get(xe).completionProvider.register(n,e)}function yKe(n,e){return Ye.get(xe).colorProvider.register(n,e)}function CKe(n,e){return Ye.get(xe).foldingRangeProvider.register(n,e)}function SKe(n,e){return Ye.get(xe).declarationProvider.register(n,e)}function xKe(n,e){return Ye.get(xe).selectionRangeProvider.register(n,e)}function LKe(n,e){return Ye.get(xe).documentSemanticTokensProvider.register(n,e)}function kKe(n,e){return Ye.get(xe).documentRangeSemanticTokensProvider.register(n,e)}function NKe(n,e){return Ye.get(xe).inlineCompletionsProvider.register(n,e)}function IKe(n,e){return Ye.get(xe).inlineEditProvider.register(n,e)}function EKe(n,e){return Ye.get(xe).inlayHintsProvider.register(n,e)}function DKe(){return{register:$$e,getLanguages:K$e,onLanguage:G$e,onLanguageEncountered:Z$e,getEncodedLanguageId:q$e,setLanguageConfiguration:Y$e,setColorMap:eKe,registerTokensProviderFactory:VG,setTokensProvider:tKe,setMonarchTokensProvider:iKe,registerReferenceProvider:nKe,registerRenameProvider:sKe,registerNewSymbolNameProvider:oKe,registerCompletionItemProvider:wKe,registerSignatureHelpProvider:rKe,registerHoverProvider:aKe,registerDocumentSymbolProvider:lKe,registerDocumentHighlightProvider:cKe,registerLinkedEditingRangeProvider:dKe,registerDefinitionProvider:uKe,registerImplementationProvider:hKe,registerTypeDefinitionProvider:fKe,registerCodeLensProvider:gKe,registerCodeActionProvider:mKe,registerDocumentFormattingEditProvider:pKe,registerDocumentRangeFormattingEditProvider:_Ke,registerOnTypeFormattingEditProvider:bKe,registerLinkProvider:vKe,registerColorProvider:yKe,registerFoldingRangeProvider:CKe,registerDeclarationProvider:SKe,registerSelectionRangeProvider:xKe,registerDocumentSemanticTokensProvider:LKe,registerDocumentRangeSemanticTokensProvider:kKe,registerInlineCompletionsProvider:NKe,registerInlineEditProvider:IKe,registerInlayHintsProvider:EKe,DocumentHighlightKind:r8,CompletionItemKind:e8,CompletionItemTag:t8,CompletionItemInsertTextRule:J9,SymbolKind:F8,SymbolTag:B8,IndentAction:f8,CompletionTriggerKind:i8,SignatureHelpTriggerKind:O8,InlayHintKind:m8,InlineCompletionTriggerKind:p8,InlineEditTriggerKind:_8,CodeActionTriggerType:Q9,NewSymbolNameTag:x8,NewSymbolNameTriggerKind:L8,PartialAcceptTriggerKind:I8,HoverVerbosityAction:h8,FoldingRangeKind:zm,SelectedSuggestionInfo:jue}}const jG=kt("IEditorCancelService"),Vpe=new we("cancellableOperation",!1,_("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));Tt(jG,class{constructor(){this._tokens=new WeakMap}add(n,e){let t=this._tokens.get(n);t||(t=n.invokeWithinContext(s=>{const o=Vpe.bindTo(s.get(qe)),r=new So;return{key:o,tokens:r}}),this._tokens.set(n,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(n){const e=this._tokens.get(n);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);class TKe extends Gi{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(i=>i.get(jG).add(e,this))}dispose(){this._unregister(),super.dispose()}}_e(new class extends Hn{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Vpe})}runEditorCommand(n,e){n.get(jG).cancel(e)}});let jpe=class bV{constructor(e,t){if(this.flags=t,this.flags&1){const i=e.getModel();this.modelVersionId=i?hv("{0}#{1}",i.uri.toString(),i.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof bV))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new bV(e,this.flags))}};class ip extends TKe{constructor(e,t,i,s){super(e,s),this._listener=new ne,t&4&&this._listener.add(e.onDidChangeCursorPosition(o=>{(!i||!D.containsPosition(i,o.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(o=>{(!i||!D.containsRange(i,o.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(o=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(o=>this.cancel())),this._listener.add(e.onDidChangeModelContent(o=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class zG extends Gi{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}function Ou(n){return n&&typeof n.getEditorType=="function"?n.getEditorType()===zI.ICodeEditor:!1}function UG(n){return n&&typeof n.getEditorType=="function"?n.getEditorType()===zI.IDiffEditor:!1}function RKe(n){return!!n&&typeof n=="object"&&typeof n.onDidChangeActiveEditor=="function"}function zpe(n){return Ou(n)?n:UG(n)?n.getModifiedEditor():RKe(n)&&Ou(n.activeCodeEditor)?n.activeCodeEditor:null}class $C{static _handleEolEdits(e,t){let i;const s=[];for(const o of t)typeof o.eol=="number"&&(i=o.eol),o.range&&typeof o.text=="string"&&s.push(o);return typeof i=="number"&&e.hasModel()&&e.getModel().pushEOL(i),s}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),s=i.validateRange(t.range);return i.getFullModelRange().equalsRange(s)}static execute(e,t,i){i&&e.pushUndoStop();const s=fd.capture(e),o=$C._handleEolEdits(e,t);o.length===1&&$C._isFullModelReplaceEdit(e,o[0])?e.executeEdits("formatEditsCommand",o.map(r=>Ki.replace(D.lift(r.range),r.text))):e.executeEdits("formatEditsCommand",o.map(r=>Ki.replaceMove(D.lift(r.range),r.text))),i&&e.pushUndoStop(),s.restoreRelativeVerticalPositionOfCursor(e)}}class Qie{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class MKe{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(Qie.toKey(e))}has(e){return this._set.has(Qie.toKey(e))}}function Upe(n,e,t){const i=[],s=new MKe,o=n.ordered(t);for(const a of o)i.push(a),a.extensionId&&s.add(a.extensionId);const r=e.ordered(t);for(const a of r){if(a.extensionId){if(s.has(a.extensionId))continue;s.add(a.extensionId)}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,d){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,d)}})}return i}const EL=class EL{static setFormatterSelector(e){return{dispose:EL._selectors.unshift(e)}}static async select(e,t,i,s){if(e.length===0)return;const o=Rt.first(EL._selectors);if(o)return await o(e,t,i,s)}};EL._selectors=new So;let xN=EL;async function $pe(n,e,t,i,s,o,r){const a=n.get(Ae),{documentRangeFormattingEditProvider:l}=n.get(xe),c=Ou(e)?e.getModel():e,d=l.ordered(c),u=await xN.select(d,c,i,2);u&&(s.report(u),await a.invokeFunction(PKe,u,e,t,o,r))}async function PKe(n,e,t,i,s,o){var v,w;const r=n.get(fr),a=n.get(Os),l=n.get(pp);let c,d;Ou(t)?(c=t.getModel(),d=new ip(t,5,void 0,s)):(c=t,d=new zG(t,s));const u=[];let h=0;for(const y of sK(i).sort(D.compareRangesUsingStarts))h>0&&D.areIntersectingOrTouching(u[h-1],y)?u[h-1]=D.fromPositions(u[h-1].getStartPosition(),y.getEndPosition()):h=u.push(y);const f=async y=>{var S,x;a.trace("[format][provideDocumentRangeFormattingEdits] (request)",(S=e.extensionId)==null?void 0:S.value,y);const C=await e.provideDocumentRangeFormattingEdits(c,y,c.getFormattingOptions(),d.token)||[];return a.trace("[format][provideDocumentRangeFormattingEdits] (response)",(x=e.extensionId)==null?void 0:x.value,C),C},m=(y,C)=>{if(!y.length||!C.length)return!1;const S=y.reduce((x,k)=>D.plusRange(x,k.range),y[0].range);if(!C.some(x=>D.intersectRanges(S,x.range)))return!1;for(const x of y)for(const k of C)if(D.intersectRanges(x.range,k.range))return!0;return!1},p=[],b=[];try{if(typeof e.provideDocumentRangesFormattingEdits=="function"){a.trace("[format][provideDocumentRangeFormattingEdits] (request)",(v=e.extensionId)==null?void 0:v.value,u);const y=await e.provideDocumentRangesFormattingEdits(c,u,c.getFormattingOptions(),d.token)||[];a.trace("[format][provideDocumentRangeFormattingEdits] (response)",(w=e.extensionId)==null?void 0:w.value,y),b.push(y)}else{for(const y of u){if(d.token.isCancellationRequested)return!0;b.push(await f(y))}for(let y=0;y<u.length;++y)for(let C=y+1;C<u.length;++C){if(d.token.isCancellationRequested)return!0;if(m(b[y],b[C])){const S=D.plusRange(u[y],u[C]),x=await f(S);u.splice(C,1),u.splice(y,1),u.push(S),b.splice(C,1),b.splice(y,1),b.push(x),y=0,C=0}}}for(const y of b){if(d.token.isCancellationRequested)return!0;const C=await r.computeMoreMinimalEdits(c.uri,y);C&&p.push(...C)}}finally{d.dispose()}if(p.length===0)return!1;if(Ou(t))$C.execute(t,p,!0),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:y}]=p,C=new Ie(y.startLineNumber,y.startColumn,y.endLineNumber,y.endColumn);c.pushEditOperations([C],p.map(S=>({text:S.text,range:D.lift(S.range),forceMoveMarkers:!0})),S=>{for(const{range:x}of S)if(D.areIntersectingOrTouching(x,C))return[new Ie(x.startLineNumber,x.startColumn,x.endLineNumber,x.endColumn)];return null})}return l.playSignal(ha.format,{userGesture:o}),!0}async function AKe(n,e,t,i,s,o){const r=n.get(Ae),a=n.get(xe),l=Ou(e)?e.getModel():e,c=Upe(a.documentFormattingEditProvider,a.documentRangeFormattingEditProvider,l),d=await xN.select(c,l,t,1);d&&(i.report(d),await r.invokeFunction(OKe,d,e,t,s,o))}async function OKe(n,e,t,i,s,o){const r=n.get(fr),a=n.get(pp);let l,c;Ou(t)?(l=t.getModel(),c=new ip(t,5,void 0,s)):(l=t,c=new zG(t,s));let d;try{const u=await e.provideDocumentFormattingEdits(l,l.getFormattingOptions(),c.token);if(d=await r.computeMoreMinimalEdits(l.uri,u),c.token.isCancellationRequested)return!0}finally{c.dispose()}if(!d||d.length===0)return!1;if(Ou(t))$C.execute(t,d,i!==2),i!==2&&t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:u}]=d,h=new Ie(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn);l.pushEditOperations([h],d.map(f=>({text:f.text,range:D.lift(f.range),forceMoveMarkers:!0})),f=>{for(const{range:m}of f)if(D.areIntersectingOrTouching(m,h))return[new Ie(m.startLineNumber,m.startColumn,m.endLineNumber,m.endColumn)];return null})}return a.playSignal(ha.format,{userGesture:o}),!0}async function FKe(n,e,t,i,s,o){const r=e.documentRangeFormattingEditProvider.ordered(t);for(const a of r){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,i,s,o)).catch(fn);if(ho(l))return await n.computeMoreMinimalEdits(t.uri,l)}}async function BKe(n,e,t,i,s){const o=Upe(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const r of o){const a=await Promise.resolve(r.provideDocumentFormattingEdits(t,i,s)).catch(fn);if(ho(a))return await n.computeMoreMinimalEdits(t.uri,a)}}function Kpe(n,e,t,i,s,o,r){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(s)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,s,o,r)).catch(fn).then(l=>n.computeMoreMinimalEdits(t.uri,l))}Mt.registerCommand("_executeFormatRangeProvider",async function(n,...e){const[t,i,s]=e;zt(Be.isUri(t)),zt(D.isIRange(i));const o=n.get(dr),r=n.get(fr),a=n.get(xe),l=await o.createModelReference(t);try{return FKe(r,a,l.object.textEditorModel,D.lift(i),s,ht.None)}finally{l.dispose()}});Mt.registerCommand("_executeFormatDocumentProvider",async function(n,...e){const[t,i]=e;zt(Be.isUri(t));const s=n.get(dr),o=n.get(fr),r=n.get(xe),a=await s.createModelReference(t);try{return BKe(o,r,a.object.textEditorModel,i,ht.None)}finally{a.dispose()}});Mt.registerCommand("_executeFormatOnTypeProvider",async function(n,...e){const[t,i,s,o]=e;zt(Be.isUri(t)),zt(U.isIPosition(i)),zt(typeof s=="string");const r=n.get(dr),a=n.get(fr),l=n.get(xe),c=await r.createModelReference(t);try{return Kpe(a,l,c.object.textEditorModel,U.lift(i),s,o,ht.None)}finally{c.dispose()}});md.wrappingIndent.defaultValue=0;md.glyphMargin.defaultValue=!1;md.autoIndent.defaultValue=3;md.overviewRulerLanes.defaultValue=2;xN.setFormatterSelector((n,e,t)=>Promise.resolve(n[0]));const Ho=zue();Ho.editor=W$e();Ho.languages=DKe();const qpe=Ho.CancellationTokenSource,Gpe=Ho.Emitter,$G=Ho.KeyCode,KG=Ho.KeyMod,Zpe=Ho.Position,LF=Ho.Range,Ype=Ho.Selection,Xpe=Ho.SelectionDirection,Qpe=Ho.MarkerSeverity,Jpe=Ho.MarkerTag,e_e=Ho.Uri,t_e=Ho.Token,KC=Ho.editor,Gt=Ho.languages,DB=globalThis.MonacoEnvironment;(DB!=null&&DB.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=Ho);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const qI=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:qpe,Emitter:Gpe,KeyCode:$G,KeyMod:KG,MarkerSeverity:Qpe,MarkerTag:Jpe,Position:Zpe,Range:LF,Selection:Ype,SelectionDirection:Xpe,Token:t_e,Uri:e_e,editor:KC,languages:Gt},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var WKe=Object.defineProperty,HKe=Object.getOwnPropertyDescriptor,VKe=Object.getOwnPropertyNames,jKe=Object.prototype.hasOwnProperty,zKe=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of VKe(e))!jKe.call(n,s)&&s!==t&&WKe(n,s,{get:()=>e[s],enumerable:!(i=HKe(e,s))||i.enumerable});return n},UKe=(n,e,t)=>(zKe(n,e,"default"),t),rx={};UKe(rx,qI);var i_e={},TB={},$Ke=class n_e{static getOrCreate(e){return TB[e]||(TB[e]=new n_e(e)),TB[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,i)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=i})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,i_e[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function ze(n){const e=n.id;i_e[e]=n,rx.languages.register(n);const t=$Ke.getOrCreate(e);rx.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),rx.languages.onLanguageEncountered(e,async()=>{const i=await t.load();rx.languages.setLanguageConfiguration(e,i.conf)})}ze({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>We(()=>import("./abap-BrgZPUOV.js"),[])});ze({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>We(()=>import("./apex-DyP6w7ZV.js"),[])});ze({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>We(()=>import("./azcli-BaLxmfj-.js"),[])});ze({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>We(()=>import("./bat-CFOPXBzS.js"),[])});ze({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>We(()=>import("./bicep-BfEKNvv3.js"),[])});ze({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>We(()=>import("./cameligo-BFG1Mk7z.js"),[])});ze({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>We(()=>import("./clojure-DTECt2xU.js"),[])});ze({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>We(()=>import("./coffee-CDGzqUPQ.js"),[])});ze({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>We(()=>import("./cpp-CLLBncYj.js"),[])});ze({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>We(()=>import("./cpp-CLLBncYj.js"),[])});ze({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>We(()=>import("./csharp-dUCx_-0o.js"),[])});ze({id:"csp",extensions:[".csp"],aliases:["CSP","csp"],loader:()=>We(()=>import("./csp-5Rap-vPy.js"),[])});ze({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>We(()=>import("./css-D3h14YRZ.js"),[])});ze({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>We(()=>import("./cypher-DrQuvNYM.js"),[])});ze({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>We(()=>import("./dart-CFKIUWau.js"),[])});ze({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>We(()=>import("./dockerfile-Zznr-cwX.js"),[])});ze({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>We(()=>import("./ecl-Ce3n6wWz.js"),[])});ze({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>We(()=>import("./elixir-deUWdS0T.js"),[])});ze({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>We(()=>import("./flow9-i9-g7ZhI.js"),[])});ze({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>We(()=>import("./fsharp-CzKuDChf.js"),[])});ze({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>We(()=>import("./freemarker2-CZTc98aW.js"),[]).then(n=>n.TagAutoInterpolationDollar)});ze({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>We(()=>import("./freemarker2-CZTc98aW.js"),[]).then(n=>n.TagAngleInterpolationDollar)});ze({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>We(()=>import("./freemarker2-CZTc98aW.js"),[]).then(n=>n.TagBracketInterpolationDollar)});ze({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>We(()=>import("./freemarker2-CZTc98aW.js"),[]).then(n=>n.TagAngleInterpolationBracket)});ze({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>We(()=>import("./freemarker2-CZTc98aW.js"),[]).then(n=>n.TagBracketInterpolationBracket)});ze({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>We(()=>import("./freemarker2-CZTc98aW.js"),[]).then(n=>n.TagAutoInterpolationDollar)});ze({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>We(()=>import("./freemarker2-CZTc98aW.js"),[]).then(n=>n.TagAutoInterpolationBracket)});ze({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>We(()=>import("./go-Cphgjts3.js"),[])});ze({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>We(()=>import("./graphql-Cg7bfA9N.js"),[])});ze({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>We(()=>import("./handlebars-9ELF-5bM.js"),[])});ze({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>We(()=>import("./hcl-0cvrggvQ.js"),[])});ze({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>We(()=>import("./html-BucAT6S7.js"),[])});ze({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>We(()=>import("./ini-Drc7WvVn.js"),[])});ze({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>We(()=>import("./java-B_fMsGYe.js"),[])});ze({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>We(()=>import("./javascript-C4-_p9Ui.js"),__vite__mapDeps([0,1]))});ze({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>We(()=>import("./julia-Bqgm2twL.js"),[])});ze({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>We(()=>import("./kotlin-BSkB5QuD.js"),[])});ze({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>We(()=>import("./less-BsTHnhdd.js"),[])});ze({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>We(()=>import("./lexon-YWi4-JPR.js"),[])});ze({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>We(()=>import("./lua-nf6ki56Z.js"),[])});ze({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>We(()=>import("./liquid-SS4NGn9H.js"),[])});ze({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>We(()=>import("./m3-Cpb6xl2v.js"),[])});ze({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>We(()=>import("./markdown-DSZPf7rp.js"),[])});ze({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>We(()=>import("./mdx-B6BErnRG.js"),[])});ze({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>We(()=>import("./mips-B_c3zf-v.js"),[])});ze({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>We(()=>import("./msdax-rUNN04Wq.js"),[])});ze({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>We(()=>import("./mysql-DDwshQtU.js"),[])});ze({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>We(()=>import("./objective-c-B5zXfXm9.js"),[])});ze({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>We(()=>import("./pascal-CXOwvkN_.js"),[])});ze({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>We(()=>import("./pascaligo-Bc-ZgV77.js"),[])});ze({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>We(()=>import("./perl-CwNk8-XU.js"),[])});ze({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>We(()=>import("./pgsql-tGk8EFnU.js"),[])});ze({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>We(()=>import("./php-CpIb_Oan.js"),[])});ze({id:"pla",extensions:[".pla"],loader:()=>We(()=>import("./pla-B03wrqEc.js"),[])});ze({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>We(()=>import("./postiats-BKlk5iyT.js"),[])});ze({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>We(()=>import("./powerquery-Bhzvs7bI.js"),[])});ze({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>We(()=>import("./powershell-Dd3NCNK9.js"),[])});ze({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>We(()=>import("./protobuf-COyEY5Pt.js"),[])});ze({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>We(()=>import("./pug-BaJupSGV.js"),[])});ze({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>We(()=>import("./python-B5pW9uRh.js"),[])});ze({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>We(()=>import("./qsharp-DXyYeYxl.js"),[])});ze({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>We(()=>import("./r-CdQndTaG.js"),[])});ze({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>We(()=>import("./razor-g9SM9QrJ.js"),[])});ze({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>We(()=>import("./redis-CVwtpugi.js"),[])});ze({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>We(()=>import("./redshift-25W9uPmb.js"),[])});ze({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>We(()=>import("./restructuredtext-DfzH4Xui.js"),[])});ze({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>We(()=>import("./ruby-Cp1zYvxS.js"),[])});ze({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>We(()=>import("./rust-D5C2fndG.js"),[])});ze({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>We(()=>import("./sb-CDntyWJ8.js"),[])});ze({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>We(()=>import("./scala-BoFRg7Ot.js"),[])});ze({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>We(()=>import("./scheme-Bio4gycK.js"),[])});ze({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>We(()=>import("./scss-4Ik7cdeQ.js"),[])});ze({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>We(()=>import("./shell-CX-rkNHf.js"),[])});ze({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>We(()=>import("./solidity-Tw7wswEv.js"),[])});ze({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>We(()=>import("./sophia-C5WLch3f.js"),[])});ze({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>We(()=>import("./sparql-DHaeiCBh.js"),[])});ze({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>We(()=>import("./sql-CCSDG5nI.js"),[])});ze({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>We(()=>import("./st-pnP8ivHi.js"),[])});ze({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>We(()=>import("./swift-DwJ7jVG9.js"),[])});ze({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>We(()=>import("./systemverilog-B9Xyijhd.js"),[])});ze({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>We(()=>import("./systemverilog-B9Xyijhd.js"),[])});ze({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>We(()=>import("./tcl-DnHyzjbg.js"),[])});ze({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>We(()=>import("./twig-CPajHgWi.js"),[])});ze({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>We(()=>import("./typescript-D2ap8n5I.js"),[])});ze({id:"typespec",extensions:[".tsp"],aliases:["TypeSpec"],loader:()=>We(()=>import("./typespec-D-MeaMDU.js"),[])});ze({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>We(()=>import("./vb-DgyLZaXg.js"),[])});ze({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>We(()=>import("./wgsl-BIv9DU6q.js"),[])});ze({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>We(()=>import("./xml-bQUzy-9C.js"),[])});ze({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>We(()=>import("./yaml-CkS4F76a.js"),[])});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var KKe=Object.defineProperty,qKe=Object.getOwnPropertyDescriptor,GKe=Object.getOwnPropertyNames,ZKe=Object.prototype.hasOwnProperty,YKe=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of GKe(e))!ZKe.call(n,s)&&s!==t&&KKe(n,s,{get:()=>e[s],enumerable:!(i=qKe(e,s))||i.enumerable});return n},XKe=(n,e,t)=>(YKe(n,e,"default"),t),j1={};XKe(j1,qI);var qG=class{constructor(e,t,i){this._onDidChange=new j1.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},GG={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},ZG={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},s_e=new qG("css",GG,ZG),o_e=new qG("scss",GG,ZG),r_e=new qG("less",GG,ZG);j1.languages.css={cssDefaults:s_e,lessDefaults:r_e,scssDefaults:o_e};function YG(){return We(()=>import("./cssMode-D_Tlq5JJ.js"),[])}j1.languages.onLanguage("less",()=>{YG().then(n=>n.setupMode(r_e))});j1.languages.onLanguage("scss",()=>{YG().then(n=>n.setupMode(o_e))});j1.languages.onLanguage("css",()=>{YG().then(n=>n.setupMode(s_e))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var QKe=Object.defineProperty,JKe=Object.getOwnPropertyDescriptor,eqe=Object.getOwnPropertyNames,tqe=Object.prototype.hasOwnProperty,iqe=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of eqe(e))!tqe.call(n,s)&&s!==t&&QKe(n,s,{get:()=>e[s],enumerable:!(i=JKe(e,s))||i.enumerable});return n},nqe=(n,e,t)=>(iqe(n,e,"default"),t),kF={};nqe(kF,qI);var sqe=class{constructor(e,t,i){this._onDidChange=new kF.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},oqe={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},NF={format:oqe,suggest:{},data:{useDefaultDataProvider:!0}};function IF(n){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:n===rL,documentFormattingEdits:n===rL,documentRangeFormattingEdits:n===rL}}var rL="html",Jie="handlebars",ene="razor",a_e=EF(rL,NF,IF(rL)),rqe=a_e.defaults,l_e=EF(Jie,NF,IF(Jie)),aqe=l_e.defaults,c_e=EF(ene,NF,IF(ene)),lqe=c_e.defaults;kF.languages.html={htmlDefaults:rqe,razorDefaults:lqe,handlebarDefaults:aqe,htmlLanguageService:a_e,handlebarLanguageService:l_e,razorLanguageService:c_e,registerHTMLLanguageService:EF};function cqe(){return We(()=>import("./htmlMode-tTCyrxX6.js"),[])}function EF(n,e=NF,t=IF(n)){const i=new sqe(n,e,t);let s;const o=kF.languages.onLanguage(n,async()=>{s=(await cqe()).setupMode(i)});return{defaults:i,dispose(){o.dispose(),s==null||s.dispose(),s=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var dqe=Object.defineProperty,uqe=Object.getOwnPropertyDescriptor,hqe=Object.getOwnPropertyNames,fqe=Object.prototype.hasOwnProperty,gqe=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of hqe(e))!fqe.call(n,s)&&s!==t&&dqe(n,s,{get:()=>e[s],enumerable:!(i=uqe(e,s))||i.enumerable});return n},mqe=(n,e,t)=>(gqe(n,e,"default"),t),GI={};mqe(GI,qI);var pqe=class{constructor(e,t,i){this._onDidChange=new GI.Emitter,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},_qe={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},bqe={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},d_e=new pqe("json",_qe,bqe),vqe=()=>u_e().then(n=>n.getWorker());GI.languages.json={jsonDefaults:d_e,getWorker:vqe};function u_e(){return We(()=>import("./jsonMode-CUwnoAgR.js"),[])}GI.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});GI.languages.onLanguage("json",()=>{u_e().then(n=>n.setupMode(d_e))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var wqe=Object.defineProperty,yqe=Object.getOwnPropertyDescriptor,Cqe=Object.getOwnPropertyNames,Sqe=Object.prototype.hasOwnProperty,xqe=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Cqe(e))!Sqe.call(n,s)&&s!==t&&wqe(n,s,{get:()=>e[s],enumerable:!(i=yqe(e,s))||i.enumerable});return n},Lqe=(n,e,t)=>(xqe(n,e,"default"),t),kqe="5.4.5",qC={};Lqe(qC,qI);var h_e=(n=>(n[n.None=0]="None",n[n.CommonJS=1]="CommonJS",n[n.AMD=2]="AMD",n[n.UMD=3]="UMD",n[n.System=4]="System",n[n.ES2015=5]="ES2015",n[n.ESNext=99]="ESNext",n))(h_e||{}),f_e=(n=>(n[n.None=0]="None",n[n.Preserve=1]="Preserve",n[n.React=2]="React",n[n.ReactNative=3]="ReactNative",n[n.ReactJSX=4]="ReactJSX",n[n.ReactJSXDev=5]="ReactJSXDev",n))(f_e||{}),g_e=(n=>(n[n.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",n[n.LineFeed=1]="LineFeed",n))(g_e||{}),m_e=(n=>(n[n.ES3=0]="ES3",n[n.ES5=1]="ES5",n[n.ES2015=2]="ES2015",n[n.ES2016=3]="ES2016",n[n.ES2017=4]="ES2017",n[n.ES2018=5]="ES2018",n[n.ES2019=6]="ES2019",n[n.ES2020=7]="ES2020",n[n.ESNext=99]="ESNext",n[n.JSON=100]="JSON",n[n.Latest=99]="Latest",n))(m_e||{}),p_e=(n=>(n[n.Classic=1]="Classic",n[n.NodeJs=2]="NodeJs",n))(p_e||{}),__e=class{constructor(n,e,t,i,s){this._onDidChange=new qC.Emitter,this._onDidExtraLibsChange=new qC.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(n),this.setDiagnosticsOptions(e),this.setWorkerOptions(t),this.setInlayHintsOptions(i),this.setModeConfiguration(s),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(n,e){let t;if(typeof e>"u"?t=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t=e,this._extraLibs[t]&&this._extraLibs[t].content===n)return{dispose:()=>{}};let i=1;return this._removedExtraLibs[t]&&(i=this._removedExtraLibs[t]+1),this._extraLibs[t]&&(i=this._extraLibs[t].version+1),this._extraLibs[t]={content:n,version:i},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let s=this._extraLibs[t];s&&s.version===i&&(delete this._extraLibs[t],this._removedExtraLibs[t]=i,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(n){for(const e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),n&&n.length>0)for(const e of n){const t=e.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,i=e.content;let s=1;this._removedExtraLibs[t]&&(s=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:i,version:s}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(n){this._compilerOptions=n||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(n){this._diagnosticsOptions=n||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(n){this._workerOptions=n||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(n){this._inlayHintsOptions=n||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(n){}setEagerModelSync(n){this._eagerModelSync=n}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration(n){this._modeConfiguration=n||Object.create(null),this._onDidChange.fire(void 0)}},Nqe=kqe,b_e={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},v_e=new __e({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},b_e),w_e=new __e({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},b_e),Iqe=()=>DF().then(n=>n.getTypeScriptWorker()),Eqe=()=>DF().then(n=>n.getJavaScriptWorker());qC.languages.typescript={ModuleKind:h_e,JsxEmit:f_e,NewLineKind:g_e,ScriptTarget:m_e,ModuleResolutionKind:p_e,typescriptVersion:Nqe,typescriptDefaults:v_e,javascriptDefaults:w_e,getTypeScriptWorker:Iqe,getJavaScriptWorker:Eqe};function DF(){return We(()=>import("./tsMode-DD6FbFxv.js"),[])}qC.languages.onLanguage("typescript",()=>DF().then(n=>n.setupTypeScript(v_e)));qC.languages.onLanguage("javascript",()=>DF().then(n=>n.setupJavaScript(w_e)));class Dqe extends Bo{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:Ze("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:he.map,toggled:se.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:se.has("isInDiffEditor"),menu:{when:se.has("isInDiffEditor"),id:Ne.EditorTitle,order:22,group:"navigation"}})}run(e,...t){const i=e.get(_t),s=!i.getValue("diffEditor.hideUnchangedRegions.enabled");i.updateValue("diffEditor.hideUnchangedRegions.enabled",s)}}class y_e extends Bo{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:Ze("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:se.has("isInDiffEditor")})}run(e,...t){const i=e.get(_t),s=!i.getValue("diffEditor.experimental.showMoves");i.updateValue("diffEditor.experimental.showMoves",s)}}class C_e extends Bo{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:Ze("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:se.has("isInDiffEditor")})}run(e,...t){const i=e.get(_t),s=!i.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");i.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",s)}}const ZI=Ze("diffEditor","Diff Editor");class Tqe extends pd{constructor(){super({id:"diffEditor.switchSide",title:Ze("switchSide","Switch Side"),icon:he.arrowSwap,precondition:se.has("isInDiffEditor"),f1:!0,category:ZI})}runEditorCommand(e,t,i){const s=z1(e);if(s instanceof Cf){if(i&&i.dryRun)return{destinationSelection:s.mapToOtherSide().destinationSelection};s.switchSide()}}}class Rqe extends pd{constructor(){super({id:"diffEditor.exitCompareMove",title:Ze("exitCompareMove","Exit Compare Move"),icon:he.close,precondition:R.comparingMovedCode,f1:!1,category:ZI,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,t,...i){const s=z1(e);s instanceof Cf&&s.exitCompareMove()}}class Mqe extends pd{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:Ze("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:he.fold,precondition:se.has("isInDiffEditor"),f1:!0,category:ZI})}runEditorCommand(e,t,...i){const s=z1(e);s instanceof Cf&&s.collapseAllUnchangedRegions()}}class Pqe extends pd{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:Ze("showAllUnchangedRegions","Show All Unchanged Regions"),icon:he.unfold,precondition:se.has("isInDiffEditor"),f1:!0,category:ZI})}runEditorCommand(e,t,...i){const s=z1(e);s instanceof Cf&&s.showAllUnchangedRegions()}}class vV extends Bo{constructor(){super({id:"diffEditor.revert",title:Ze("revert","Revert"),f1:!1,category:ZI})}run(e,t){const i=Aqe(e,t.originalUri,t.modifiedUri);i instanceof Cf&&i.revertRangeMappings(t.mapping.innerChanges??[])}}const S_e=Ze("accessibleDiffViewer","Accessible Diff Viewer"),zA=class zA extends Bo{constructor(){super({id:zA.id,title:Ze("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:S_e,precondition:se.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){const t=z1(e);t==null||t.accessibleDiffViewerNext()}};zA.id="editor.action.accessibleDiffViewer.next";let LN=zA;const UA=class UA extends Bo{constructor(){super({id:UA.id,title:Ze("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:S_e,precondition:se.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){const t=z1(e);t==null||t.accessibleDiffViewerPrev()}};UA.id="editor.action.accessibleDiffViewer.prev";let qM=UA;function Aqe(n,e,t){return n.get(Ut).listDiffEditors().find(o=>{var l,c;const r=o.getModifiedEditor(),a=o.getOriginalEditor();return r&&((l=r.getModel())==null?void 0:l.uri.toString())===t.toString()&&a&&((c=a.getModel())==null?void 0:c.uri.toString())===e.toString()})||null}function z1(n){const t=n.get(Ut).listDiffEditors(),i=Ms();if(i)for(const s of t){const o=s.getContainerDomNode();if(Oqe(o,i))return s}return null}function Oqe(n,e){let t=e;for(;t;){if(t===n)return!0;t=t.parentElement}return!1}vi(Dqe);vi(y_e);vi(C_e);ls.appendMenuItem(Ne.EditorTitle,{command:{id:new C_e().desc.id,title:_("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:se.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:se.has("isInDiffEditor")},order:11,group:"1_diff",when:se.and(R.diffEditorRenderSideBySideInlineBreakpointReached,se.has("isInDiffEditor"))});ls.appendMenuItem(Ne.EditorTitle,{command:{id:new y_e().desc.id,title:_("showMoves","Show Moved Code Blocks"),icon:he.move,toggled:L1.create("config.diffEditor.experimental.showMoves",!0),precondition:se.has("isInDiffEditor")},order:10,group:"1_diff",when:se.has("isInDiffEditor")});vi(vV);for(const n of[{icon:he.arrowRight,key:R.diffEditorInlineMode.toNegated()},{icon:he.discard,key:R.diffEditorInlineMode}])ls.appendMenuItem(Ne.DiffEditorHunkToolbar,{command:{id:new vV().desc.id,title:_("revertHunk","Revert Block"),icon:n.icon},when:se.and(R.diffEditorModifiedWritable,n.key),order:5,group:"primary"}),ls.appendMenuItem(Ne.DiffEditorSelectionToolbar,{command:{id:new vV().desc.id,title:_("revertSelection","Revert Selection"),icon:n.icon},when:se.and(R.diffEditorModifiedWritable,n.key),order:5,group:"primary"});vi(Tqe);vi(Rqe);vi(Mqe);vi(Pqe);ls.appendMenuItem(Ne.EditorTitle,{command:{id:LN.id,title:_("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:se.has("isInDiffEditor")},order:10,group:"2_diff",when:se.and(R.accessibleDiffViewerVisible.negate(),se.has("isInDiffEditor"))});Mt.registerCommandAlias("editor.action.diffReview.next",LN.id);vi(LN);Mt.registerCommandAlias("editor.action.diffReview.prev",qM.id);vi(qM);var Fqe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Bqe=function(n,e){return function(t,i){e(t,i,n)}},wV;const TF=new we("selectionAnchorSet",!1);var ub;let np=(ub=class{static get(e){return e.getContribution(wV.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=TF.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(Ie.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new Us().appendText(_("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),Oo(_("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(Ie.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}},wV=ub,ub.ID="editor.contrib.selectionAnchorController",ub);np=wV=Fqe([Bqe(1,qe)],np);class Wqe extends Ce{constructor(){super({id:"editor.action.setSelectionAnchor",label:_("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2080),weight:100}})}async run(e,t){var i;(i=np.get(t))==null||i.setSelectionAnchor()}}class Hqe extends Ce{constructor(){super({id:"editor.action.goToSelectionAnchor",label:_("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:TF})}async run(e,t){var i;(i=np.get(t))==null||i.goToSelectionAnchor()}}class Vqe extends Ce{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:_("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:TF,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2089),weight:100}})}async run(e,t){var i;(i=np.get(t))==null||i.selectFromAnchorToCursor()}}class jqe extends Ce{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:_("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:TF,kbOpts:{kbExpr:R.editorTextFocus,primary:9,weight:100}})}async run(e,t){var i;(i=np.get(t))==null||i.cancelSelectionAnchor()}}Ot(np.ID,np,4);de(Wqe);de(Hqe);de(Vqe);de(jqe);const zqe=P("editorOverviewRuler.bracketMatchForeground","#A0A0A0",_("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class Uqe extends Ce{constructor(){super({id:"editor.action.jumpToBracket",label:_("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:R.editorTextFocus,primary:3165,weight:100}})}run(e,t){var i;(i=Nv.get(t))==null||i.jumpToBracket()}}class $qe extends Ce{constructor(){super({id:"editor.action.selectToBracket",label:_("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:Ze("smartSelect.selectToBracketDescription","Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){var o;let s=!0;i&&i.selectBrackets===!1&&(s=!1),(o=Nv.get(t))==null||o.selectToBracket(s)}}class Kqe extends Ce{constructor(){super({id:"editor.action.removeBrackets",label:_("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:R.editorTextFocus,primary:2561,weight:100}})}run(e,t){var i;(i=Nv.get(t))==null||i.removeBrackets(this.id)}}class qqe{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}const rg=class rg extends G{static get(e){return e.getContribution(rg.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new li(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(i=>{const s=i.getStartPosition(),o=e.bracketPairs.matchBracket(s);let r=null;if(o)o[0].containsPosition(s)&&!o[1].containsPosition(s)?r=o[1].getStartPosition():o[1].containsPosition(s)&&(r=o[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(s);if(a)r=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(s);l&&l.range&&(r=l.range.getStartPosition())}}return r?new Ie(r.lineNumber,r.column,r.lineNumber,r.column):new Ie(s.lineNumber,s.column,s.lineNumber,s.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach(s=>{const o=s.getStartPosition();let r=t.bracketPairs.matchBracket(o);if(!r&&(r=t.bracketPairs.findEnclosingBrackets(o),!r)){const c=t.bracketPairs.findNextBracket(o);c&&c.range&&(r=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(r){r.sort(D.compareRangesUsingStarts);const[c,d]=r;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(o)){const u=a;a=l,l=u}}a&&l&&i.push(new Ie(a.lineNumber,a.column,l.lineNumber,l.column))}),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach(i=>{const s=i.getPosition();let o=t.bracketPairs.matchBracket(s);o||(o=t.bracketPairs.findEnclosingBrackets(s)),o&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:o[0],text:""},{range:o[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const i of this._lastBracketsData){const s=i.brackets;s&&(e[t++]={range:s[0],options:i.options},e[t++]={range:s[1],options:i.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),i=t.getVersionId();let s=[];this._lastVersionId===i&&(s=this._lastBracketsData);const o=[];let r=0;for(let u=0,h=e.length;u<h;u++){const f=e[u];f.isEmpty()&&(o[r++]=f.getStartPosition())}o.length>1&&o.sort(U.compare);const a=[];let l=0,c=0;const d=s.length;for(let u=0,h=o.length;u<h;u++){const f=o[u];for(;c<d&&s[c].position.isBefore(f);)c++;if(c<d&&s[c].position.equals(f))a[l++]=s[c];else{let m=t.bracketPairs.matchBracket(f,20),p=rg._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!m&&this._matchBrackets==="always"&&(m=t.bracketPairs.findEnclosingBrackets(f,20),p=rg._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new qqe(f,m,p)}}this._lastBracketsData=a,this._lastVersionId=i}};rg.ID="editor.contrib.bracketMatchingController",rg._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=rt.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:sn(zqe),position:Na.Center}}),rg._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=rt.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});let Nv=rg;Ot(Nv.ID,Nv,1);de($qe);de(Uqe);de(Kqe);ls.appendMenuItem(Ne.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:_({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class Gqe{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const i=this._selection.startLineNumber,s=this._selection.startColumn,o=this._selection.endColumn;if(!(this._isMovingLeft&&s===1)&&!(!this._isMovingLeft&&o===e.getLineMaxColumn(i)))if(this._isMovingLeft){const r=new D(i,s-1,i,s),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new D(i,o,i,o),a)}else{const r=new D(i,o,i,o+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new D(i,s,i,s),a)}}computeCursorState(e,t){return this._isMovingLeft?new Ie(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new Ie(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class x_e extends Ce{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const i=[],s=t.getSelections();for(const o of s)i.push(new Gqe(o,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class Zqe extends x_e{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:_("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:R.writable})}}class Yqe extends x_e{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:_("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:R.writable})}}de(Zqe);de(Yqe);class Xqe extends Ce{constructor(){super({id:"editor.action.transposeLetters",label:_("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:R.writable,kbOpts:{kbExpr:R.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const i=t.getModel(),s=[],o=t.getSelections();for(const r of o){if(!r.isEmpty())continue;const a=r.startLineNumber,l=r.startColumn,c=i.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;const d=l===c?r.getPosition():ti.rightPosition(i,r.getPosition().lineNumber,r.getPosition().column),u=ti.leftPosition(i,d),h=ti.leftPosition(i,u),f=i.getValueInRange(D.fromPositions(h,u)),m=i.getValueInRange(D.fromPositions(u,d)),p=D.fromPositions(h,d);s.push(new Rs(p,m+f))}s.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop())}}de(Xqe);const RF=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let n;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?n=crypto.getRandomValues.bind(crypto):n=function(i){for(let s=0;s<i.length;s++)i[s]=Math.floor(Math.random()*256);return i};const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){n(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let s=0,o="";return o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o}}();function XG(n){return{asString:async()=>n,asFile:()=>{},value:typeof n=="string"?n:void 0}}function Qqe(n,e,t){const i={id:RF(),name:n,uri:e,data:t};return{asString:async()=>"",asFile:()=>i,value:void 0}}class L_e{constructor(){this._entries=new Map}get size(){let e=0;for(const t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){const t=[...this._entries.keys()];return Rt.some(this,([i,s])=>s.asFile())&&t.push("files"),N_e(GM(e),t)}get(e){var t;return(t=this._entries.get(this.toKey(e)))==null?void 0:t[0]}append(e,t){const i=this._entries.get(e);i?i.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(const[e,t]of this._entries)for(const i of t)yield[e,i]}toKey(e){return GM(e)}}function GM(n){return n.toLowerCase()}function k_e(n,e){return N_e(GM(n),e.map(GM))}function N_e(n,e){if(n==="*/*")return e.length>0;if(e.includes(n))return!0;const t=n.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;const[i,s,o]=t;return o==="*"?e.some(r=>r.startsWith(s+"/")):!1}const MF=Object.freeze({create:n=>ff(n.map(e=>e.toString())).join(`\r
`),split:n=>n.split(`\r
`),parse:n=>MF.split(n).filter(e=>!e.startsWith("#"))}),Hd=class Hd{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+Hd.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new Hd((this.value?[this.value,...e]:e).join(Hd.sep))}};Hd.sep=".",Hd.None=new Hd("@@none@@"),Hd.Empty=new Hd("");let Hi=Hd;const tne={EDITORS:"CodeEditors",FILES:"CodeFiles"};class Jqe{}const eGe={DragAndDropContribution:"workbench.contributions.dragAndDrop"};Zi.add(eGe.DragAndDropContribution,new Jqe);const DL=class DL{constructor(){}static getInstance(){return DL.INSTANCE}hasData(e){return e&&e===this.proto}getData(e){if(this.hasData(e))return this.data}};DL.INSTANCE=new DL;let yV=DL;function I_e(n){const e=new L_e;for(const t of n.items){const i=t.type;if(t.kind==="string"){const s=new Promise(o=>t.getAsString(o));e.append(i,XG(s))}else if(t.kind==="file"){const s=t.getAsFile();s&&e.append(i,tGe(s))}}return e}function tGe(n){const e=n.path?Be.parse(n.path):void 0;return Qqe(n.name,e,async()=>new Uint8Array(await n.arrayBuffer()))}const iGe=Object.freeze([tne.EDITORS,tne.FILES,Xk.RESOURCES,Xk.INTERNAL_URI_LIST]);function E_e(n,e=!1){const t=I_e(n),i=t.get(Xk.INTERNAL_URI_LIST);if(i)t.replace(dn.uriList,i);else if(e||!t.has(dn.uriList)){const s=[];for(const o of n.items){const r=o.getAsFile();if(r){const a=r.path;try{a?s.push(Be.file(a).toString()):s.push(Be.parse(r.name,!0).toString())}catch{}}}s.length&&t.replace(dn.uriList,XG(MF.create(s)))}for(const s of iGe)t.delete(s);return t}var QG=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},kN=function(n,e){return function(t,i){e(t,i,n)}};class JG{async provideDocumentPasteEdits(e,t,i,s,o){const r=await this.getEdit(i,o);if(r)return{edits:[{insertText:r.insertText,title:r.title,kind:r.kind,handledMimeType:r.handledMimeType,yieldTo:r.yieldTo}],dispose(){}}}async provideDocumentDropEdits(e,t,i,s){const o=await this.getEdit(i,s);if(o)return{edits:[{insertText:o.insertText,title:o.title,kind:o.kind,handledMimeType:o.handledMimeType,yieldTo:o.yieldTo}],dispose(){}}}}const TL=class TL extends JG{constructor(){super(...arguments),this.kind=TL.kind,this.dropMimeTypes=[dn.text],this.pasteMimeTypes=[dn.text]}async getEdit(e,t){const i=e.get(dn.text);if(!i||e.has(dn.uriList))return;const s=await i.asString();return{handledMimeType:dn.text,title:_("text.label","Insert Plain Text"),insertText:s,kind:this.kind}}};TL.id="text",TL.kind=new Hi("text.plain");let Iv=TL;class D_e extends JG{constructor(){super(...arguments),this.kind=new Hi("uri.absolute"),this.dropMimeTypes=[dn.uriList],this.pasteMimeTypes=[dn.uriList]}async getEdit(e,t){const i=await T_e(e);if(!i.length||t.isCancellationRequested)return;let s=0;const o=i.map(({uri:a,originalText:l})=>a.scheme===tt.file?a.fsPath:(s++,l)).join(" ");let r;return s>0?r=i.length>1?_("defaultDropProvider.uriList.uris","Insert Uris"):_("defaultDropProvider.uriList.uri","Insert Uri"):r=i.length>1?_("defaultDropProvider.uriList.paths","Insert Paths"):_("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:dn.uriList,insertText:o,title:r,kind:this.kind}}}let ZM=class extends JG{constructor(e){super(),this._workspaceContextService=e,this.kind=new Hi("uri.relative"),this.dropMimeTypes=[dn.uriList],this.pasteMimeTypes=[dn.uriList]}async getEdit(e,t){const i=await T_e(e);if(!i.length||t.isCancellationRequested)return;const s=Yl(i.map(({uri:o})=>{const r=this._workspaceContextService.getWorkspaceFolder(o);return r?w5e(r.uri,o):void 0}));if(s.length)return{handledMimeType:dn.uriList,insertText:s.join(" "),title:i.length>1?_("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):_("defaultDropProvider.uriList.relativePath","Insert Relative Path"),kind:this.kind}}};ZM=QG([kN(0,yv)],ZM);class nGe{constructor(){this.kind=new Hi("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:dn.text}]}async provideDocumentPasteEdits(e,t,i,s,o){var l;if(s.triggerKind!==Lk.PasteAs&&!((l=s.only)!=null&&l.contains(this.kind)))return;const r=i.get("text/html"),a=await(r==null?void 0:r.asString());if(!(!a||o.isCancellationRequested))return{dispose(){},edits:[{insertText:a,yieldTo:this._yieldTo,title:_("pasteHtmlLabel","Insert HTML"),kind:this.kind}]}}}async function T_e(n){const e=n.get(dn.uriList);if(!e)return[];const t=await e.asString(),i=[];for(const s of MF.parse(t))try{i.push({uri:Be.parse(s),originalText:s})}catch{}return i}let CV=class extends G{constructor(e,t){super(),this._register(e.documentDropEditProvider.register("*",new Iv)),this._register(e.documentDropEditProvider.register("*",new D_e)),this._register(e.documentDropEditProvider.register("*",new ZM(t)))}};CV=QG([kN(0,xe),kN(1,yv)],CV);let SV=class extends G{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new Iv)),this._register(e.documentPasteEditProvider.register("*",new D_e)),this._register(e.documentPasteEditProvider.register("*",new ZM(t))),this._register(e.documentPasteEditProvider.register("*",new nGe))}};SV=QG([kN(0,xe),kN(1,yv)],SV);const Il=class Il{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,i=this.value.charCodeAt(e),s;if(s=Il._table[i],typeof s=="number")return this.pos+=1,{type:s,pos:e,len:1};if(Il.isDigitCharacter(i)){s=8;do t+=1,i=this.value.charCodeAt(e+t);while(Il.isDigitCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}if(Il.isVariableCharacter(i)){s=9;do i=this.value.charCodeAt(e+ ++t);while(Il.isVariableCharacter(i)||Il.isDigitCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}s=10;do t+=1,i=this.value.charCodeAt(e+t);while(!isNaN(i)&&typeof Il._table[i]>"u"&&!Il.isDigitCharacter(i)&&!Il.isVariableCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}};Il._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};let xV=Il;class U1{constructor(){this._children=[]}appendChild(e){return e instanceof Co&&this._children[this._children.length-1]instanceof Co?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:i}=e,s=i.children.indexOf(e),o=i.children.slice(0);o.splice(s,1,...t),i._children=o,function r(a,l){for(const c of a)c.parent=l,r(c.children,c)}(t,i)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof YI)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class Co extends U1{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Co(this.value)}}class R_e extends U1{}class Xa extends R_e{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof $1?this._children[0]:void 0}clone(){const e=new Xa(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class $1 extends U1{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof Co&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new $1;return this.options.forEach(e.appendChild,e),e}}class eZ extends U1{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let i=!1,s=e.replace(this.regexp,function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(o=>o instanceof Ec&&!!o.elseValue)&&(s=this._replace([])),s}_replace(e){let t="";for(const i of this._children)if(i instanceof Ec){let s=e[i.index]||"";s=i.resolve(s),t+=s}else t+=i.toString();return t}toString(){return""}clone(){const e=new eZ;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class Ec extends U1{constructor(e,t,i,s){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=s}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(i=>i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((i,s)=>s===0?i.charAt(0).toLowerCase()+i.substr(1):i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}clone(){return new Ec(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class NN extends R_e{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new Co(t)],!0):!1}clone(){const e=new NN(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function ine(n,e){const t=[...n];for(;t.length>0;){const i=t.shift();if(!e(i))break;t.unshift(...i.children)}}class YI extends U1{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(i){return i instanceof Xa&&(e.push(i),t=!t||t.index<i.index?i:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk(s=>s===e?(i=!0,!1):(t+=s.len(),!0)),i?t:-1}fullLen(e){let t=0;return ine([e],i=>(t+=i.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:i}=e;for(;i;)i instanceof Xa&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof NN&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new YI;return this._children=this.children.map(t=>t.clone()),e}walk(e){ine(this.children,e)}}class Ev{constructor(){this._scanner=new xV,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){const s=new YI;return this.parseFragment(e,s),this.ensureFinalTabstop(s,i??!1,t??!1),s}parseFragment(e,t){const i=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const s=new Map,o=[];t.walk(l=>(l instanceof Xa&&(l.isFinalTabstop?s.set(0,void 0):!s.has(l.index)&&l.children.length>0?s.set(l.index,l.children):o.push(l)),!0));const r=(l,c)=>{const d=s.get(l.index);if(!d)return;const u=new Xa(l.index);u.transform=l.transform;for(const h of d){const f=h.clone();u.appendChild(f),f instanceof Xa&&s.has(f.index)&&!c.has(f.index)&&(c.add(f.index),r(f,c),c.delete(f.index))}t.replace(l,[u])},a=new Set;for(const l of o)r(l,a);return t.children.slice(i)}ensureFinalTabstop(e,t,i){(t||i&&e.placeholders.length>0)&&(e.placeholders.find(o=>o.index===0)||e.appendChild(new Xa(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const i=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),i}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const s=this._scanner.next();if(s.type!==0&&s.type!==4&&s.type!==5)return!1}this._token=this._scanner.next()}const i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Co(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Xa(Number(t)):new NN(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);const o=new Xa(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Co("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){const r=new $1;for(;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(r),this._accept(4)))return e.appendChild(o),!0}return this._backTo(i),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(i)}_parseChoiceElement(e){const t=this._token,i=[];for(;!(this._token.type===2||this._token.type===7);){let s;if((s=this._accept(5,!0))?s=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||s:s=this._accept(void 0,!0),!s)return this._backTo(t),!1;i.push(s)}return i.length===0?(this._backTo(t),!1):(e.appendChild(new Co(i.join(""))),!0)}_parseComplexVariable(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);const o=new NN(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Co("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(i)}_parseTransform(e){const t=new eZ;let i="",s="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,i+=o;continue}if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new Co(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){s+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(i,s)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);const s=this._accept(8,!0);if(s)if(i){if(this._accept(4))return e.appendChild(new Ec(Number(s))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Ec(Number(s))),!0;else return this._backTo(t),!1;if(this._accept(6)){const o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Ec(Number(s),o)),!0)}else if(this._accept(11)){const o=this._until(4);if(o)return e.appendChild(new Ec(Number(s),void 0,o,void 0)),!0}else if(this._accept(12)){const o=this._until(4);if(o)return e.appendChild(new Ec(Number(s),void 0,void 0,o)),!0}else if(this._accept(13)){const o=this._until(1);if(o){const r=this._until(4);if(r)return e.appendChild(new Ec(Number(s),void 0,o,r)),!0}}else{const o=this._until(4);if(o)return e.appendChild(new Ec(Number(s),void 0,void 0,o)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Co(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}function M_e(n,e,t){var i,s;return(typeof t.insertText=="string"?t.insertText==="":t.insertText.snippet==="")?{edits:((i=t.additionalEdit)==null?void 0:i.edits)??[]}:{edits:[...e.map(o=>new cm(n,{range:o,text:typeof t.insertText=="string"?Ev.escape(t.insertText)+"$0":t.insertText.snippet,insertAsSnippet:!0})),...((s=t.additionalEdit)==null?void 0:s.edits)??[]]}}function P_e(n){function e(r,a){return"mimeType"in r?r.mimeType===a.handledMimeType:!!a.kind&&r.kind.contains(a.kind)}const t=new Map;for(const r of n)for(const a of r.yieldTo??[])for(const l of n)if(l!==r&&e(a,l)){let c=t.get(r);c||(c=[],t.set(r,c)),c.push(l)}if(!t.size)return Array.from(n);const i=new Set,s=[];function o(r){if(!r.length)return[];const a=r[0];if(s.includes(a))return console.warn("Yield to cycle detected",a),r;if(i.has(a))return o(r.slice(1));let l=[];const c=t.get(a);return c&&(s.push(a),l=o(c),s.pop()),i.add(a),[...l,a,...o(r.slice(1))]}return o(Array.from(n))}var sGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},oGe=function(n,e){return function(t,i){e(t,i,n)}};const rGe=rt.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:Que,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}}),$A=class $A extends G{constructor(e,t,i,s,o){super(),this.typeId=e,this.editor=t,this.range=i,this.delegate=o,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(s),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=ge(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=ge("span.icon");this.domNode.append(t),t.classList.add(...Ke.asClassNameArray(he.loading),"codicon-modifier-spin");const i=()=>{const s=this.editor.getOption(67);this.domNode.style.height=`${s}px`,this.domNode.style.width=`${Math.ceil(.8*s)}px`};i(),this._register(this.editor.onDidChangeConfiguration(s=>{(s.hasChanged(52)||s.hasChanged(67))&&i()})),this._register(Q(this.domNode,fe.CLICK,s=>{this.delegate.cancel()}))}getId(){return $A.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}};$A.baseId="editor.widget.inlineProgressWidget";let LV=$A,YM=class extends G{constructor(e,t,i){super(),this.id=e,this._editor=t,this._instantiationService=i,this._showDelay=500,this._showPromise=this._register(new es),this._currentWidget=this._register(new es),this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}dispose(){super.dispose(),this._currentDecorations.clear()}async showWhile(e,t,i,s,o){const r=this._operationIdPool++;this._currentOperation=r,this.clear(),this._showPromise.value=Km(()=>{const a=D.fromPositions(e);this._currentDecorations.set([{range:a,options:rGe}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(LV,this.id,this._editor,a,t,s))},o??this._showDelay);try{return await i}finally{this._currentOperation===r&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};YM=sGe([oGe(2,Ae)],YM);var aGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},nne=function(n,e){return function(t,i){e(t,i,n)}},$T,mm;let Br=(mm=class{static get(e){return e.getContribution($T.ID)}constructor(e,t,i){this._openerService=i,this._messageWidget=new es,this._messageListeners=new ne,this._mouseOverMessage=!1,this._editor=e,this._visible=$T.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;(e=this._message)==null||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){Oo(td(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=td(e)?Q4(e,{actionHandler:{callback:s=>{this.closeMessage(),_q(this._openerService,s,td(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new sne(this._editor,t,typeof e=="string"?e:this._message.element),this._messageListeners.add(pe.debounce(this._editor.onDidBlurEditorText,(s,o)=>o,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&Zn(Ms(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(Q(this._messageWidget.value.getDomNode(),fe.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(Q(this._messageWidget.value.getDomNode(),fe.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let i;this._messageListeners.add(this._editor.onMouseMove(s=>{s.target.position&&(i?i.containsPosition(s.target.position)||this.closeMessage():i=new D(t.lineNumber-3,1,s.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(sne.fadeOut(this._messageWidget.value))}},$T=mm,mm.ID="editor.contrib.messageController",mm.MESSAGE_VISIBLE=new we("messageVisible",!1,_("messageVisible","Whether the editor is currently showing an inline message")),mm);Br=$T=aGe([nne(1,qe),nne(2,hr)],Br);const lGe=Hn.bindToContribution(Br.get);_e(new lGe({id:"leaveEditorMessage",precondition:Br.MESSAGE_VISIBLE,handler:n=>n.closeMessage(),kbOpts:{weight:130,primary:9}}));let sne=class{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:i},s){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const r=document.createElement("div");typeof s=="string"?(r.classList.add("message"),r.textContent=s):(s.classList.add("message"),r.appendChild(s)),this._domNode.appendChild(r);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};Ot(Br.ID,Br,4);function RB(n,e){return e&&(n.stack||n.stacktrace)?_("stackTrace.format","{0}: {1}",rne(n),one(n.stack)||one(n.stacktrace)):rne(n)}function one(n){return Array.isArray(n)?n.join(`
`):n}function rne(n){return n.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${n.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof n.code=="string"&&typeof n.errno=="number"&&typeof n.syscall=="string"?_("nodeExceptionMessage","A system error occurred ({0})",n.message):n.message||_("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function XM(n=null,e=!1){if(!n)return _("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(n)){const t=Yl(n),i=XM(t[0],e);return t.length>1?_("error.moreErrors","{0} ({1} errors in total)",i,t.length):i}if(ir(n))return n;if(n.detail){const t=n.detail;if(t.error)return RB(t.error,e);if(t.exception)return RB(t.exception,e)}return n.stack?RB(n,e):n.message?n.message:_("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var A_e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ry=function(n,e){return function(t,i){e(t,i,n)}},kV,hb;let NV=(hb=class extends G{constructor(e,t,i,s,o,r,a,l,c,d){super(),this.typeId=e,this.editor=t,this.showCommand=s,this.range=o,this.edits=r,this.onSelectNewEdit=a,this._contextMenuService=l,this._keybindingService=d,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=i.bindTo(c),this.visibleContext.set(!0),this._register(Pe(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register(Pe(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(u=>{o.containsPosition(u.position)||this.dispose()})),this._register(pe.runAndSubscribe(d.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){var t;const e=(t=this._keybindingService.lookupKeybinding(this.showCommand.id))==null?void 0:t.getLabel();this.button.element.title=this.showCommand.label+(e?` (${e})`:"")}create(){this.domNode=ge(".post-edit-widget"),this.button=this._register(new nM(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(Q(this.domNode,fe.CLICK,()=>this.showSelector()))}getId(){return kV.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const e=un(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map((e,t)=>$_({id:"",label:e.title,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}}))})}},kV=hb,hb.baseId="editor.widget.postEditWidget",hb);NV=kV=A_e([Ry(7,Zr),Ry(8,qe),Ry(9,ei)],NV);let QM=class extends G{constructor(e,t,i,s,o,r,a){super(),this._id=e,this._editor=t,this._visibleContext=i,this._showCommand=s,this._instantiationService=o,this._bulkEditService=r,this._notificationService=a,this._currentWidget=this._register(new es),this._register(pe.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}async applyEditAndShowIfNeeded(e,t,i,s,o){const r=this._editor.getModel();if(!r||!e.length)return;const a=t.allEdits.at(t.activeEditIndex);if(!a)return;const l=async b=>{const v=this._editor.getModel();v&&(await v.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:b,allEdits:t.allEdits},i,s,o))},c=(b,v)=>{wl(b)||(this._notificationService.error(v),i&&this.show(e[0],t,l))};let d;try{d=await s(a,o)}catch(b){return c(b,_("resolveError",`Error resolving edit '{0}':
{1}`,a.title,XM(b)))}if(o.isCancellationRequested)return;const u=M_e(r.uri,e,d),h=e[0],f=r.deltaDecorations([],[{range:h,options:{description:"paste-line-suffix",stickiness:0}}]);this._editor.focus();let m,p;try{m=await this._bulkEditService.apply(u,{editor:this._editor,token:o}),p=r.getDecorationRange(f[0])}catch(b){return c(b,_("applyError",`Error applying edit '{0}':
{1}`,a.title,XM(b)))}finally{r.deltaDecorations(f,[])}o.isCancellationRequested||i&&m.isApplied&&t.allEdits.length>1&&this.show(p??h,t,l)}show(e,t,i){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(NV,this._id,this._editor,this._visibleContext,this._showCommand,e,t,i))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;(e=this._currentWidget.value)==null||e.showSelector()}};QM=A_e([Ry(4,Ae),Ry(5,RI),Ry(6,wn)],QM);var cGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},I0=function(n,e){return function(t,i){e(t,i,n)}},Yp;const O_e="editor.changePasteType",tZ=new we("pasteWidgetVisible",!1,_("pasteWidgetVisible","Whether the paste widget is showing")),MB="application/vnd.code.copyMetadata";var fb;let Sf=(fb=class extends G{static get(e){return e.getContribution(Yp.ID)}constructor(e,t,i,s,o,r,a){super(),this._bulkEditService=i,this._clipboardService=s,this._languageFeaturesService=o,this._quickInputService=r,this._progressService=a,this._editor=e;const l=e.getContainerDomNode();this._register(Q(l,"copy",c=>this.handleCopy(c))),this._register(Q(l,"cut",c=>this.handleCopy(c))),this._register(Q(l,"paste",c=>this.handlePaste(c),!0)),this._pasteProgressManager=this._register(new YM("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(QM,"pasteIntoEditor",e,tZ,{id:O_e,label:_("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferred:e},x1().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(85).enabled}async finishedPaste(){await this._currentPasteOperation}handleCopy(e){var p,b,v,w;if(!this._editor.hasTextFocus()||((b=(p=this._clipboardService).clearInternalState)==null||b.call(p),!e.clipboardData||!this.isPasteAsEnabled()))return;const t=this._editor.getModel(),i=this._editor.getSelections();if(!t||!(i!=null&&i.length))return;const s=this._editor.getOption(37);let o=i;const r=i.length===1&&i[0].isEmpty();if(r){if(!s)return;o=[new D(o[0].startLineNumber,1,o[0].startLineNumber,1+t.getLineLength(o[0].startLineNumber))]}const a=(v=this._editor._getViewModel())==null?void 0:v.getPlainTextToCopy(i,s,As),c={multicursorText:Array.isArray(a)?a:null,pasteOnNewLine:r,mode:null},d=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(y=>!!y.prepareDocumentPaste);if(!d.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:c});return}const u=I_e(e.clipboardData),h=d.flatMap(y=>y.copyMimeTypes??[]),f=RF();this.setCopyMetadata(e.clipboardData,{id:f,providerCopyMimeTypes:h,defaultPastePayload:c});const m=Xn(async y=>{const C=Yl(await Promise.all(d.map(async S=>{try{return await S.prepareDocumentPaste(t,o,u,y)}catch(x){console.error(x);return}})));C.reverse();for(const S of C)for(const[x,k]of S)u.replace(x,k);return u});(w=Yp._currentCopyOperation)==null||w.dataTransferPromise.cancel(),Yp._currentCopyOperation={handle:f,dataTransferPromise:m}}async handlePaste(e){var l,c,d;if(!e.clipboardData||!this._editor.hasTextFocus())return;(l=Br.get(this._editor))==null||l.closeMessage(),(c=this._currentPasteOperation)==null||c.cancel(),this._currentPasteOperation=void 0;const t=this._editor.getModel(),i=this._editor.getSelections();if(!(i!=null&&i.length)||!t||this._editor.getOption(92)||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;const s=this.fetchCopyMetadata(e),o=E_e(e.clipboardData);o.delete(MB);const r=[...e.clipboardData.types,...(s==null?void 0:s.providerCopyMimeTypes)??[],dn.uriList],a=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(u=>{var f,m;const h=(f=this._pasteAsActionContext)==null?void 0:f.preferred;return h&&u.providedPasteEditKinds&&!this.providerMatchesPreference(u,h)?!1:(m=u.pasteMimeTypes)==null?void 0:m.some(p=>k_e(p,r))});if(!a.length){(d=this._pasteAsActionContext)!=null&&d.preferred&&this.showPasteAsNoEditMessage(i,this._pasteAsActionContext.preferred);return}e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,a,i,o,s):this.doPasteInline(a,i,o,s,e)}showPasteAsNoEditMessage(e,t){var i;(i=Br.get(this._editor))==null||i.showMessage(_("pasteAsError","No paste edits for '{0}' found",t instanceof Hi?t.value:t.providerId),e[0].getStartPosition())}doPasteInline(e,t,i,s,o){const r=this._editor;if(!r.hasModel())return;const a=new ip(r,3,void 0),l=Xn(async c=>{const d=this._editor;if(!d.hasModel())return;const u=d.getModel(),h=new ne,f=h.add(new Gi(c));h.add(a.token.onCancellationRequested(()=>f.cancel()));const m=f.token;try{if(await this.mergeInDataFromCopy(i,s,m),m.isCancellationRequested)return;const p=e.filter(w=>this.isSupportedPasteProvider(w,i));if(!p.length||p.length===1&&p[0]instanceof Iv)return this.applyDefaultPasteHandler(i,s,m,o);const b={triggerKind:Lk.Automatic},v=await this.getPasteEdits(p,i,u,t,b,m);if(h.add(v),m.isCancellationRequested)return;if(v.edits.length===1&&v.edits[0].provider instanceof Iv)return this.applyDefaultPasteHandler(i,s,m,o);if(v.edits.length){const w=d.getOption(85).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:v.edits},w,(y,C)=>new Promise((S,x)=>{(async()=>{var k,N;try{const E=(N=(k=y.provider).resolveDocumentPasteEdit)==null?void 0:N.call(k,y,C),B=new S1,A=E&&await this._pasteProgressManager.showWhile(t[0].getEndPosition(),_("resolveProcess","Resolving paste edit. Click to cancel"),Promise.race([B.p,E]),{cancel:()=>(B.cancel(),x(new Xl))},0);return A&&(y.additionalEdit=A.additionalEdit),S(y)}catch(E){return x(E)}})()}),m)}await this.applyDefaultPasteHandler(i,s,m,o)}finally{h.dispose(),this._currentPasteOperation===l&&(this._currentPasteOperation=void 0)}});this._pasteProgressManager.showWhile(t[0].getEndPosition(),_("pasteIntoEditorProgress","Running paste handlers. Click to cancel and do basic paste"),l,{cancel:async()=>{try{if(l.cancel(),a.token.isCancellationRequested)return;await this.applyDefaultPasteHandler(i,s,a.token,o)}finally{a.dispose()}}}).then(()=>{a.dispose()}),this._currentPasteOperation=l}showPasteAsPick(e,t,i,s,o){const r=Xn(async a=>{const l=this._editor;if(!l.hasModel())return;const c=l.getModel(),d=new ne,u=d.add(new ip(l,3,void 0,a));try{if(await this.mergeInDataFromCopy(s,o,u.token),u.token.isCancellationRequested)return;let h=t.filter(v=>this.isSupportedPasteProvider(v,s,e));e&&(h=h.filter(v=>this.providerMatchesPreference(v,e)));const f={triggerKind:Lk.PasteAs,only:e&&e instanceof Hi?e:void 0};let m=d.add(await this.getPasteEdits(h,s,c,i,f,u.token));if(u.token.isCancellationRequested)return;if(e&&(m={edits:m.edits.filter(v=>e instanceof Hi?e.contains(v.kind):e.providerId===v.provider.id),dispose:m.dispose}),!m.edits.length){f.only&&this.showPasteAsNoEditMessage(i,f.only);return}let p;if(e)p=m.edits.at(0);else{const v=await this._quickInputService.pick(m.edits.map(w=>{var y;return{label:w.title,description:(y=w.kind)==null?void 0:y.value,edit:w}}),{placeHolder:_("pasteAsPickerPlaceholder","Select Paste Action")});p=v==null?void 0:v.edit}if(!p)return;const b=M_e(c.uri,i,p);await this._bulkEditService.apply(b,{editor:this._editor})}finally{d.dispose(),this._currentPasteOperation===r&&(this._currentPasteOperation=void 0)}});this._progressService.withProgress({location:10,title:_("pasteAsProgress","Running paste handlers")},()=>r)}setCopyMetadata(e,t){e.setData(MB,JSON.stringify(t))}fetchCopyMetadata(e){if(!e.clipboardData)return;const t=e.clipboardData.getData(MB);if(t)try{return JSON.parse(t)}catch{return}const[i,s]=PH.getTextData(e.clipboardData);if(s)return{defaultPastePayload:{mode:s.mode,multicursorText:s.multicursorText??null,pasteOnNewLine:!!s.isFromEmptySelection}}}async mergeInDataFromCopy(e,t,i){var s;if(t!=null&&t.id&&((s=Yp._currentCopyOperation)==null?void 0:s.handle)===t.id){const o=await Yp._currentCopyOperation.dataTransferPromise;if(i.isCancellationRequested)return;for(const[r,a]of o)e.replace(r,a)}if(!e.has(dn.uriList)){const o=await this._clipboardService.readResources();if(i.isCancellationRequested)return;o.length&&e.append(dn.uriList,XG(MF.create(o)))}}async getPasteEdits(e,t,i,s,o,r){const a=new ne,l=await xI(Promise.all(e.map(async d=>{var u,h;try{const f=await((u=d.provideDocumentPasteEdits)==null?void 0:u.call(d,i,s,t,o,r));return f&&a.add(f),(h=f==null?void 0:f.edits)==null?void 0:h.map(m=>({...m,provider:d}))}catch(f){wl(f)||console.error(f);return}})),r),c=Yl(l??[]).flat().filter(d=>!o.only||o.only.contains(d.kind));return{edits:P_e(c),dispose:()=>a.dispose()}}async applyDefaultPasteHandler(e,t,i,s){const o=e.get(dn.text)??e.get("text"),r=await(o==null?void 0:o.asString())??"";if(i.isCancellationRequested)return;const a={clipboardEvent:s,text:r,pasteOnNewLine:(t==null?void 0:t.defaultPastePayload.pasteOnNewLine)??!1,multicursorText:(t==null?void 0:t.defaultPastePayload.multicursorText)??null,mode:null};this._editor.trigger("keyboard","paste",a)}isSupportedPasteProvider(e,t,i){var s;return(s=e.pasteMimeTypes)!=null&&s.some(o=>t.matches(o))?!i||this.providerMatchesPreference(e,i):!1}providerMatchesPreference(e,t){return t instanceof Hi?e.providedPasteEditKinds?e.providedPasteEditKinds.some(i=>t.contains(i)):!0:e.id===t.providerId}},Yp=fb,fb.ID="editor.contrib.copyPasteActionController",fb);Sf=Yp=cGe([I0(1,Ae),I0(2,RI),I0(3,Mf),I0(4,xe),I0(5,Cl),I0(6,age)],Sf);const Dv="9_cutcopypaste",dGe=Gc||document.queryCommandSupported("cut"),F_e=Gc||document.queryCommandSupported("copy"),uGe=typeof navigator.clipboard>"u"||ul?document.queryCommandSupported("paste"):!0;function iZ(n){return n.register(),n}const hGe=dGe?iZ(new k1({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Gc?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:Ne.MenubarEditMenu,group:"2_ccp",title:_({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:Ne.EditorContext,group:Dv,title:_("actions.clipboard.cutLabel","Cut"),when:R.writable,order:1},{menuId:Ne.CommandPalette,group:"",title:_("actions.clipboard.cutLabel","Cut"),order:1},{menuId:Ne.SimpleEditorContext,group:Dv,title:_("actions.clipboard.cutLabel","Cut"),when:R.writable,order:1}]})):void 0,fGe=F_e?iZ(new k1({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Gc?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:Ne.MenubarEditMenu,group:"2_ccp",title:_({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:Ne.EditorContext,group:Dv,title:_("actions.clipboard.copyLabel","Copy"),order:2},{menuId:Ne.CommandPalette,group:"",title:_("actions.clipboard.copyLabel","Copy"),order:1},{menuId:Ne.SimpleEditorContext,group:Dv,title:_("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;ls.appendMenuItem(Ne.MenubarEditMenu,{submenu:Ne.MenubarCopy,title:Ze("copy as","Copy As"),group:"2_ccp",order:3});ls.appendMenuItem(Ne.EditorContext,{submenu:Ne.EditorContextCopy,title:Ze("copy as","Copy As"),group:Dv,order:3});ls.appendMenuItem(Ne.EditorContext,{submenu:Ne.EditorContextShare,title:Ze("share","Share"),group:"11_share",order:-1,when:se.and(se.notEquals("resourceScheme","output"),R.editorTextFocus)});ls.appendMenuItem(Ne.ExplorerContext,{submenu:Ne.ExplorerContextShare,title:Ze("share","Share"),group:"11_share",order:-1});const PB=uGe?iZ(new k1({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Gc?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:Ne.MenubarEditMenu,group:"2_ccp",title:_({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:Ne.EditorContext,group:Dv,title:_("actions.clipboard.pasteLabel","Paste"),when:R.writable,order:4},{menuId:Ne.CommandPalette,group:"",title:_("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:Ne.SimpleEditorContext,group:Dv,title:_("actions.clipboard.pasteLabel","Paste"),when:R.writable,order:4}]})):void 0;class gGe extends Ce{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:_("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:R.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(37)&&t.getSelection().isEmpty()||(RH.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),RH.forceCopyWithSyntaxHighlighting=!1)}}function B_e(n,e){n&&(n.addImplementation(1e4,"code-editor",(t,i)=>{const s=t.get(Ut).getFocusedCodeEditor();if(s&&s.hasTextFocus()){const o=s.getOption(37),r=s.getSelection();return r&&r.isEmpty()&&!o||s.getContainerDomNode().ownerDocument.execCommand(e),!0}return!1}),n.addImplementation(0,"generic-dom",(t,i)=>(x1().execCommand(e),!0)))}B_e(hGe,"cut");B_e(fGe,"copy");PB&&(PB.addImplementation(1e4,"code-editor",(n,e)=>{var o;const t=n.get(Ut),i=n.get(Mf),s=t.getFocusedCodeEditor();return s&&s.hasTextFocus()?s.getContainerDomNode().ownerDocument.execCommand("paste")?((o=Sf.get(s))==null?void 0:o.finishedPaste())??Promise.resolve():Kv?(async()=>{const a=await i.readText();if(a!==""){const l=gN.INSTANCE.get(a);let c=!1,d=null,u=null;l&&(c=s.getOption(37)&&!!l.isFromEmptySelection,d=typeof l.multicursorText<"u"?l.multicursorText:null,u=l.mode),s.trigger("keyboard","paste",{text:a,pasteOnNewLine:c,multicursorText:d,mode:u})}})():!0:!1}),PB.addImplementation(0,"generic-dom",(n,e)=>(x1().execCommand("paste"),!0)));F_e&&de(gGe);const Mi=new class{constructor(){this.QuickFix=new Hi("quickfix"),this.Refactor=new Hi("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new Hi("notebook"),this.Source=new Hi("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")}};var Ur;(function(n){n.Refactor="refactor",n.RefactorPreview="refactor preview",n.Lightbulb="lightbulb",n.Default="other (default)",n.SourceAction="source action",n.QuickFix="quick fix action",n.FixAll="fix all",n.OrganizeImports="organize imports",n.AutoFix="auto fix",n.QuickFixHover="quick fix hover window",n.OnSave="save participants",n.ProblemsView="problems view"})(Ur||(Ur={}));function mGe(n,e){return!(n.include&&!n.include.intersects(e)||n.excludes&&n.excludes.some(t=>W_e(e,t,n.include))||!n.includeSourceActions&&Mi.Source.contains(e))}function pGe(n,e){const t=e.kind?new Hi(e.kind):void 0;return!(n.include&&(!t||!n.include.contains(t))||n.excludes&&t&&n.excludes.some(i=>W_e(t,i,n.include))||!n.includeSourceActions&&t&&Mi.Source.contains(t)||n.onlyIncludePreferredActions&&!e.isPreferred)}function W_e(n,e,t){return!(!e.contains(n)||t&&e.contains(t))}class ou{static fromUser(e,t){return!e||typeof e!="object"?new ou(t.kind,t.apply,!1):new ou(ou.getKindFromUser(e,t.kind),ou.getApplyFromUser(e,t.apply),ou.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new Hi(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}}class _Ge{constructor(e,t,i){this.action=e,this.provider=t,this.highlightRange=i}async resolve(e){var t;if((t=this.provider)!=null&&t.resolveCodeAction&&!this.action.edit){let i;try{i=await this.provider.resolveCodeAction(this.action,e)}catch(s){fn(s)}i&&(this.action.edit=i.edit)}return this}}const H_e="editor.action.codeAction",nZ="editor.action.quickFix",V_e="editor.action.autoFix",j_e="editor.action.refactor",z_e="editor.action.sourceAction",IV="editor.action.organizeImports",EV="editor.action.fixAll";class aL extends G{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return e.isAI&&!t.isAI?1:!e.isAI&&t.isAI?-1:ho(e.diagnostics)?ho(t.diagnostics)?aL.codeActionsPreferredComparator(e,t):-1:ho(t.diagnostics)?1:aL.codeActionsPreferredComparator(e,t)}constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(aL.codeActionsComparator),this.validActions=this.allActions.filter(({action:s})=>!s.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&Mi.QuickFix.contains(new Hi(e.kind))&&!!e.isPreferred)}get hasAIFix(){return this.validActions.some(({action:e})=>!!e.isAI)}get allAIFixes(){return this.validActions.every(({action:e})=>!!e.isAI)}}const ane={actions:[],documentation:void 0};async function Lw(n,e,t,i,s,o){var p;const r=i.filter||{},a={...r,excludes:[...r.excludes||[],Mi.Notebook]},l={only:(p=r.include)==null?void 0:p.value,trigger:i.type},c=new zG(e,o),d=i.type===2,u=bGe(n,e,d?a:r),h=new ne,f=u.map(async b=>{try{s.report(b);const v=await b.provideCodeActions(e,t,l,c.token);if(v&&h.add(v),c.token.isCancellationRequested)return ane;const w=((v==null?void 0:v.actions)||[]).filter(C=>C&&pGe(r,C)),y=wGe(b,w,r.include);return{actions:w.map(C=>new _Ge(C,b)),documentation:y}}catch(v){if(wl(v))throw v;return fn(v),ane}}),m=n.onDidChange(()=>{const b=n.all(e);Vi(b,u)||c.cancel()});try{const b=await Promise.all(f),v=b.map(y=>y.actions).flat(),w=[...Yl(b.map(y=>y.documentation)),...vGe(n,e,i,v)];return new aL(v,w,h)}finally{m.dispose(),c.dispose()}}function bGe(n,e,t){return n.all(e).filter(i=>i.providedCodeActionKinds?i.providedCodeActionKinds.some(s=>mGe(t,new Hi(s))):!0)}function*vGe(n,e,t,i){var s,o,r;if(e&&i.length)for(const a of n.all(e))a._getAdditionalMenuItems&&(yield*(r=a._getAdditionalMenuItems)==null?void 0:r.call(a,{trigger:t.type,only:(o=(s=t.filter)==null?void 0:s.include)==null?void 0:o.value},i.map(l=>l.action)))}function wGe(n,e,t){if(!n.documentation)return;const i=n.documentation.map(s=>({kind:new Hi(s.kind),command:s.command}));if(t){let s;for(const o of i)o.kind.contains(t)&&(s?s.kind.contains(o.kind)&&(s=o):s=o);if(s)return s==null?void 0:s.command}for(const s of e)if(s.kind){for(const o of i)if(o.kind.contains(new Hi(s.kind)))return o.command}}var E_;(function(n){n.OnSave="onSave",n.FromProblemsView="fromProblemsView",n.FromCodeActions="fromCodeActions",n.FromAILightbulb="fromAILightbulb"})(E_||(E_={}));async function yGe(n,e,t,i,s=ht.None){var c;const o=n.get(RI),r=n.get(Ci),a=n.get(Zs),l=n.get(wn);if(a.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),await e.resolve(s),!s.isCancellationRequested&&!((c=e.action.edit)!=null&&c.edits.length&&!(await o.apply(e.action.edit,{editor:i==null?void 0:i.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:t!==E_.OnSave,showPreview:i==null?void 0:i.preview})).isApplied)&&e.action.command)try{await r.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(d){const u=CGe(d);l.error(typeof u=="string"?u:_("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}function CGe(n){return typeof n=="string"?n:n instanceof Error&&typeof n.message=="string"?n.message:void 0}Mt.registerCommand("_executeCodeActionProvider",async function(n,e,t,i,s){if(!(e instanceof Be))throw al();const{codeActionProvider:o}=n.get(xe),r=n.get(Ei).getModel(e);if(!r)throw al();const a=Ie.isISelection(t)?Ie.liftSelection(t):D.isIRange(t)?r.validateRange(t):void 0;if(!a)throw al();const l=typeof i=="string"?new Hi(i):void 0,c=await Lw(o,r,a,{type:1,triggerAction:Ur.Default,filter:{includeSourceActions:!0,include:l}},jc.None,ht.None),d=[],u=Math.min(c.validActions.length,typeof s=="number"?s:0);for(let h=0;h<u;h++)d.push(c.validActions[h].resolve(ht.None));try{return await Promise.all(d),c.validActions.map(h=>h.action)}finally{setTimeout(()=>c.dispose(),100)}});var SGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},xGe=function(n,e){return function(t,i){e(t,i,n)}},DV,gb;let TV=(gb=class{constructor(e){this.keybindingService=e}getResolver(){const e=new ad(()=>this.keybindingService.getKeybindings().filter(t=>DV.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let i=t.commandArgs;return t.command===IV?i={kind:Mi.SourceOrganizeImports.value}:t.command===EV&&(i={kind:Mi.SourceFixAll.value}),{resolvedKeybinding:t.resolvedKeybinding,...ou.fromUser(i,{kind:Hi.None,apply:"never"})}}));return t=>{if(t.kind){const i=this.bestKeybindingForCodeAction(t,e.value);return i==null?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new Hi(e.kind);return t.filter(s=>s.kind.contains(i)).filter(s=>s.preferred?e.isPreferred:!0).reduceRight((s,o)=>s?s.kind.contains(o.kind)?o:s:o,void 0)}},DV=gb,gb.codeActionCommands=[j_e,H_e,z_e,IV,EV],gb);TV=DV=SGe([xGe(0,ei)],TV);P("symbolIcon.arrayForeground",wt,_("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.booleanForeground",wt,_("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},_("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.colorForeground",wt,_("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.constantForeground",wt,_("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},_("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},_("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},_("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},_("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},_("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.fileForeground",wt,_("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.folderForeground",wt,_("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},_("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},_("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.keyForeground",wt,_("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.keywordForeground",wt,_("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},_("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.moduleForeground",wt,_("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.namespaceForeground",wt,_("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.nullForeground",wt,_("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.numberForeground",wt,_("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.objectForeground",wt,_("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.operatorForeground",wt,_("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.packageForeground",wt,_("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.propertyForeground",wt,_("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.referenceForeground",wt,_("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.snippetForeground",wt,_("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.stringForeground",wt,_("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.structForeground",wt,_("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.textForeground",wt,_("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.typeParameterForeground",wt,_("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.unitForeground",wt,_("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));P("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},_("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));const U_e=Object.freeze({kind:Hi.Empty,title:_("codeAction.widget.id.more","More Actions...")}),LGe=Object.freeze([{kind:Mi.QuickFix,title:_("codeAction.widget.id.quickfix","Quick Fix")},{kind:Mi.RefactorExtract,title:_("codeAction.widget.id.extract","Extract"),icon:he.wrench},{kind:Mi.RefactorInline,title:_("codeAction.widget.id.inline","Inline"),icon:he.wrench},{kind:Mi.RefactorRewrite,title:_("codeAction.widget.id.convert","Rewrite"),icon:he.wrench},{kind:Mi.RefactorMove,title:_("codeAction.widget.id.move","Move"),icon:he.wrench},{kind:Mi.SurroundWith,title:_("codeAction.widget.id.surround","Surround With"),icon:he.surroundWith},{kind:Mi.Source,title:_("codeAction.widget.id.source","Source Action"),icon:he.symbolFile},U_e]);function kGe(n,e,t){if(!e)return n.map(o=>{var r;return{kind:"action",item:o,group:U_e,disabled:!!o.action.disabled,label:o.action.disabled||o.action.title,canPreview:!!((r=o.action.edit)!=null&&r.edits.length)}});const i=LGe.map(o=>({group:o,actions:[]}));for(const o of n){const r=o.action.kind?new Hi(o.action.kind):Hi.None;for(const a of i)if(a.group.kind.contains(r)){a.actions.push(o);break}}const s=[];for(const o of i)if(o.actions.length){s.push({kind:"header",group:o.group});for(const r of o.actions){const a=o.group;s.push({kind:"action",item:r,group:r.action.isAI?{title:a.title,kind:a.kind,icon:he.sparkle}:a,label:r.action.title,disabled:!!r.action.disabled,keybinding:t(r.action)})}}return s}var NGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},IGe=function(n,e){return function(t,i){e(t,i,n)}},z0;const lne=Di("gutter-lightbulb",he.lightBulb,_("gutterLightbulbWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor.")),cne=Di("gutter-lightbulb-auto-fix",he.lightbulbAutofix,_("gutterLightbulbAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.")),dne=Di("gutter-lightbulb-sparkle",he.lightbulbSparkle,_("gutterLightbulbAIFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.")),une=Di("gutter-lightbulb-aifix-auto-fix",he.lightbulbSparkleAutofix,_("gutterLightbulbAIFixAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.")),hne=Di("gutter-lightbulb-sparkle-filled",he.sparkleFilled,_("gutterLightbulbSparkleFilledWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available."));var wc;(function(n){n.Hidden={type:0};class e{constructor(i,s,o,r){this.actions=i,this.trigger=s,this.editorPosition=o,this.widgetPosition=r,this.type=1}}n.Showing=e})(wc||(wc={}));var $h;let IN=($h=class extends G{constructor(e,t){super(),this._editor=e,this._keybindingService=t,this._onClick=this._register(new $),this.onClick=this._onClick.event,this._state=wc.Hidden,this._gutterState=wc.Hidden,this._iconClasses=[],this.lightbulbClasses=["codicon-"+lne.id,"codicon-"+une.id,"codicon-"+cne.id,"codicon-"+dne.id,"codicon-"+hne.id],this.gutterDecoration=z0.GUTTER_DECORATION,this._domNode=ge("div.lightBulbWidget"),this._domNode.role="listbox",this._register(qs.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(i=>{const s=this._editor.getModel();(this.state.type!==1||!s||this.state.editorPosition.lineNumber>=s.getLineCount())&&this.hide(),(this.gutterState.type!==1||!s||this.gutterState.editorPosition.lineNumber>=s.getLineCount())&&this.gutterHide()})),this._register($2e(this._domNode,i=>{if(this.state.type!==1)return;this._editor.focus(),i.preventDefault();const{top:s,height:o}=un(this._domNode),r=this._editor.getOption(67);let a=Math.floor(r/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(a+=r),this._onClick.fire({x:i.posx,y:s+o+a,actions:this.state.actions,trigger:this.state.trigger})})),this._register(Q(this._domNode,"mouseenter",i=>{(i.buttons&1)===1&&this.hide()})),this._register(pe.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,()=>{var i,s;this._preferredKbLabel=((i=this._keybindingService.lookupKeybinding(V_e))==null?void 0:i.getLabel())??void 0,this._quickFixKbLabel=((s=this._keybindingService.lookupKeybinding(nZ))==null?void 0:s.getLabel())??void 0,this._updateLightBulbTitleAndIcon()})),this._register(this._editor.onMouseDown(async i=>{if(!i.target.element||!this.lightbulbClasses.some(l=>i.target.element&&i.target.element.classList.contains(l))||this.gutterState.type!==1)return;this._editor.focus();const{top:s,height:o}=un(i.target.element),r=this._editor.getOption(67);let a=Math.floor(r/3);this.gutterState.widgetPosition.position!==null&&this.gutterState.widgetPosition.position.lineNumber<this.gutterState.editorPosition.lineNumber&&(a+=r),this._onClick.fire({x:i.event.posx,y:s+o+a,actions:this.gutterState.actions,trigger:this.gutterState.trigger})}))}dispose(){super.dispose(),this._editor.removeContentWidget(this),this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,i){if(e.validActions.length<=0)return this.gutterHide(),this.hide();if(!this._editor.hasTextFocus())return this.gutterHide(),this.hide();if(!this._editor.getOptions().get(65).enabled)return this.gutterHide(),this.hide();const r=this._editor.getModel();if(!r)return this.gutterHide(),this.hide();const{lineNumber:a,column:l}=r.validatePosition(i),c=r.getOptions().tabSize,d=this._editor.getOptions().get(50),u=r.getLineContent(a),h=lF(u,c),f=d.spaceWidth*h>22,m=S=>S>2&&this._editor.getTopForLineNumber(S)===this._editor.getTopForLineNumber(S-1),p=this._editor.getLineDecorations(a);let b=!1;if(p)for(const S of p){const x=S.options.glyphMarginClassName;if(x&&!this.lightbulbClasses.some(k=>x.includes(k))){b=!0;break}}let v=a,w=1;if(!f){const S=x=>{const k=r.getLineContent(x);return/^\s*$|^\s+/.test(k)||k.length<=w};if(a>1&&!m(a-1)){const x=r.getLineCount(),k=a===x,N=a>1&&S(a-1),E=!k&&S(a+1),B=S(a),A=!E&&!N;if(!E&&!N&&!b)return this.gutterState=new wc.Showing(e,t,i,{position:{lineNumber:v,column:w},preference:z0._posPref}),this.renderGutterLightbub(),this.hide();N||k||N&&!B?v-=1:(E||A&&B)&&(v+=1)}else if(a===1&&(a===r.getLineCount()||!S(a+1)&&!S(a)))if(this.gutterState=new wc.Showing(e,t,i,{position:{lineNumber:v,column:w},preference:z0._posPref}),b)this.gutterHide();else return this.renderGutterLightbub(),this.hide();else if(a<r.getLineCount()&&!m(a+1))v+=1;else if(l*d.spaceWidth<22)return this.hide();w=/^\S\s*$/.test(r.getLineContent(v))?2:1}this.state=new wc.Showing(e,t,i,{position:{lineNumber:v,column:w},preference:z0._posPref}),this._gutterDecorationID&&(this._removeGutterDecoration(this._gutterDecorationID),this.gutterHide());const y=e.validActions,C=e.validActions[0].action.kind;if(y.length!==1||!C){this._editor.layoutContentWidget(this);return}this._editor.layoutContentWidget(this)}hide(){this.state!==wc.Hidden&&(this.state=wc.Hidden,this._editor.layoutContentWidget(this))}gutterHide(){this.gutterState!==wc.Hidden&&(this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID),this.gutterState=wc.Hidden)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}get gutterState(){return this._gutterState}set gutterState(e){this._gutterState=e,this._updateGutterLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],this.state.type!==1)return;let e,t=!1;this.state.actions.allAIFixes?(e=he.sparkleFilled,this.state.actions.validActions.length===1&&(t=!0)):this.state.actions.hasAutoFix?this.state.actions.hasAIFix?e=he.lightbulbSparkleAutofix:e=he.lightbulbAutofix:this.state.actions.hasAIFix?e=he.lightbulbSparkle:e=he.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,t),this._iconClasses=Ke.asClassNameArray(e),this._domNode.classList.add(...this._iconClasses)}_updateGutterLightBulbTitleAndIcon(){if(this.gutterState.type!==1)return;let e,t=!1;this.gutterState.actions.allAIFixes?(e=hne,this.gutterState.actions.validActions.length===1&&(t=!0)):this.gutterState.actions.hasAutoFix?this.gutterState.actions.hasAIFix?e=une:e=cne:this.gutterState.actions.hasAIFix?e=dne:e=lne,this._updateLightbulbTitle(this.gutterState.actions.hasAutoFix,t);const i=rt.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:Ke.asClassName(e),glyphMargin:{position:Jl.Left},stickiness:1});this.gutterDecoration=i}renderGutterLightbub(){const e=this._editor.getSelection();e&&(this._gutterDecorationID===void 0?this._addGutterDecoration(e.startLineNumber):this._updateGutterDecoration(this._gutterDecorationID,e.startLineNumber))}_addGutterDecoration(e){this._editor.changeDecorations(t=>{this._gutterDecorationID=t.addDecoration(new D(e,0,e,0),this.gutterDecoration)})}_removeGutterDecoration(e){this._editor.changeDecorations(t=>{t.removeDecoration(e),this._gutterDecorationID=void 0})}_updateGutterDecoration(e,t){this._editor.changeDecorations(i=>{i.changeDecoration(e,new D(t,0,t,0)),i.changeDecorationOptions(e,this.gutterDecoration)})}_updateLightbulbTitle(e,t){this.state.type===1&&(t?this.title=_("codeActionAutoRun","Run: {0}",this.state.actions.validActions[0].action.title):e&&this._preferredKbLabel?this.title=_("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!e&&this._quickFixKbLabel?this.title=_("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):e||(this.title=_("codeAction","Show Code Actions")))}set title(e){this._domNode.title=e}},z0=$h,$h.GUTTER_DECORATION=rt.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:Ke.asClassName(he.lightBulb),glyphMargin:{position:Jl.Left},stickiness:1}),$h.ID="editor.contrib.lightbulbWidget",$h._posPref=[0],$h);IN=z0=NGe([IGe(1,ei)],IN);var $_e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},RV=function(n,e){return function(t,i){e(t,i,n)}};const K_e="acceptSelectedCodeAction",q_e="previewSelectedCodeAction";class EGe{get templateId(){return"header"}renderTemplate(e){e.classList.add("group-header");const t=document.createElement("span");return e.append(t),{container:e,text:t}}renderElement(e,t,i){var s;i.text.textContent=((s=e.group)==null?void 0:s.title)??""}disposeTemplate(e){}}let MV=class{get templateId(){return"action"}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);const t=document.createElement("div");t.className="icon",e.append(t);const i=document.createElement("span");i.className="title",e.append(i);const s=new B1(e,Mr);return{container:e,icon:t,text:i,keybinding:s}}renderElement(e,t,i){var r,a,l;if((r=e.group)!=null&&r.icon?(i.icon.className=Ke.asClassName(e.group.icon),e.group.icon.color&&(i.icon.style.color=ye(e.group.icon.color.id))):(i.icon.className=Ke.asClassName(he.lightBulb),i.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!e.item||!e.label)return;i.text.textContent=G_e(e.label),i.keybinding.set(e.keybinding),rMe(!!e.keybinding,i.keybinding.element);const s=(a=this._keybindingService.lookupKeybinding(K_e))==null?void 0:a.getLabel(),o=(l=this._keybindingService.lookupKeybinding(q_e))==null?void 0:l.getLabel();i.container.classList.toggle("option-disabled",e.disabled),e.disabled?i.container.title=e.label:s&&o?this._supportsPreview&&e.canPreview?i.container.title=_({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to Apply, Shift+F2 to Preview"']},"{0} to Apply, {1} to Preview",s,o):i.container.title=_({key:"label",comment:['placeholder is a keybinding, e.g "F2 to Apply"']},"{0} to Apply",s):i.container.title=""}disposeTemplate(e){e.keybinding.dispose()}};MV=$_e([RV(1,ei)],MV);class DGe extends UIEvent{constructor(){super("acceptSelectedAction")}}class fne extends UIEvent{constructor(){super("previewSelectedAction")}}function TGe(n){if(n.kind==="action")return n.label}let PV=class extends G{constructor(e,t,i,s,o,r){super(),this._delegate=s,this._contextViewService=o,this._keybindingService=r,this._actionLineHeight=24,this._headerLineHeight=26,this.cts=this._register(new Gi),this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");const a={getHeight:l=>l.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:l=>l.kind};this._list=this._register(new Wa(e,this.domNode,a,[new MV(t,this._keybindingService),new EGe],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:TGe},accessibilityProvider:{getAriaLabel:l=>{if(l.kind==="action"){let c=l.label?G_e(l==null?void 0:l.label):"";return l.disabled&&(c=_({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",c,l.disabled)),c}return null},getWidgetAriaLabel:()=>_({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:l=>l.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(Xv),this._register(this._list.onMouseClick(l=>this.onListClick(l))),this._register(this._list.onMouseOver(l=>this.onListHover(l))),this._register(this._list.onDidChangeFocus(()=>this.onFocus())),this._register(this._list.onDidChangeSelection(l=>this.onListSelection(l))),this._allMenuItems=i,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&e.kind==="action"}hide(e){this._delegate.onHide(e),this.cts.cancel(),this._contextViewService.hideContextView()}layout(e){const t=this._allMenuItems.filter(l=>l.kind==="header").length,s=this._allMenuItems.length*this._actionLineHeight+t*this._headerLineHeight-t*this._actionLineHeight;this._list.layout(s);let o=e;if(this._allMenuItems.length>=50)o=380;else{const l=this._allMenuItems.map((c,d)=>{const u=this.domNode.ownerDocument.getElementById(this._list.getElementID(d));if(u){u.style.width="auto";const h=u.getBoundingClientRect().width;return u.style.width="",h}return 0});o=Math.max(...l,e)}const a=Math.min(s,this.domNode.ownerDocument.body.clientHeight*.7);return this._list.layout(a,o),this.domNode.style.height=`${a}px`,this._list.domFocus(),o}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){const t=this._list.getFocus();if(t.length===0)return;const i=t[0],s=this._list.element(i);if(!this.focusCondition(s))return;const o=e?new fne:new DGe;this._list.setSelection([i],o)}onListSelection(e){if(!e.elements.length)return;const t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof fne):this._list.setSelection([])}onFocus(){var s,o;const e=this._list.getFocus();if(e.length===0)return;const t=e[0],i=this._list.element(t);(o=(s=this._delegate).onFocus)==null||o.call(s,i.item)}async onListHover(e){const t=e.element;if(t&&t.item&&this.focusCondition(t)){if(this._delegate.onHover&&!t.disabled&&t.kind==="action"){const i=await this._delegate.onHover(t.item,this.cts.token);t.canPreview=i?i.canPreview:void 0}e.index&&this._list.splice(e.index,1,[t])}this._list.setFocus(typeof e.index=="number"?[e.index]:[])}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}};PV=$_e([RV(4,Df),RV(5,ei)],PV);function G_e(n){return n.replace(/\r\n|\r|\n/g," ")}var RGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},AB=function(n,e){return function(t,i){e(t,i,n)}};P("actionBar.toggledBackground",II,_("actionBar.toggledBackground","Background color for toggled action items in action bar."));const Tv={Visible:new we("codeActionMenuVisible",!1,_("codeActionMenuVisible","Whether the action widget list is visible"))},s0=kt("actionWidgetService");let Rv=class extends G{get isVisible(){return Tv.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,i){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=i,this._list=this._register(new es)}show(e,t,i,s,o,r,a){const l=Tv.Visible.bindTo(this._contextKeyService),c=this._instantiationService.createInstance(PV,e,t,i,s);this._contextViewService.showContextView({getAnchor:()=>o,render:d=>(l.set(!0),this._renderWidget(d,c,a??[])),onHide:d=>{l.reset(),this._onWidgetClosed(d)}},r,!1)}acceptSelected(e){var t;(t=this._list.value)==null||t.acceptSelected(e)}focusPrevious(){var e,t;(t=(e=this._list)==null?void 0:e.value)==null||t.focusPrevious()}focusNext(){var e,t;(t=(e=this._list)==null?void 0:e.value)==null||t.focusNext()}hide(e){var t;(t=this._list.value)==null||t.hide(e),this._list.clear()}_renderWidget(e,t,i){var f;const s=document.createElement("div");if(s.classList.add("action-widget"),e.appendChild(s),this._list.value=t,this._list.value)s.appendChild(this._list.value.domNode);else throw new Error("List has no value");const o=new ne,r=document.createElement("div"),a=e.appendChild(r);a.classList.add("context-view-block"),o.add(Q(a,fe.MOUSE_DOWN,m=>m.stopPropagation()));const l=document.createElement("div"),c=e.appendChild(l);c.classList.add("context-view-pointerBlock"),o.add(Q(c,fe.POINTER_MOVE,()=>c.remove())),o.add(Q(c,fe.MOUSE_DOWN,()=>c.remove()));let d=0;if(i.length){const m=this._createActionBar(".action-widget-action-bar",i);m&&(s.appendChild(m.getContainer().parentElement),o.add(m),d=m.getContainer().offsetWidth)}const u=(f=this._list.value)==null?void 0:f.layout(d);s.style.width=`${u}px`;const h=o.add(ld(e));return o.add(h.onDidBlur(()=>this.hide(!0))),o}_createActionBar(e,t){if(!t.length)return;const i=ge(e),s=new Ea(i);return s.push(t,{icon:!1,label:!0}),s}_onWidgetClosed(e){var t;(t=this._list.value)==null||t.hide(e)}};Rv=RGe([AB(0,Df),AB(1,qe),AB(2,Ae)],Rv);Tt(s0,Rv,1);const XI=1100;vi(class extends Bo{constructor(){super({id:"hideCodeActionWidget",title:Ze("hideCodeActionWidget.title","Hide action widget"),precondition:Tv.Visible,keybinding:{weight:XI,primary:9,secondary:[1033]}})}run(n){n.get(s0).hide(!0)}});vi(class extends Bo{constructor(){super({id:"selectPrevCodeAction",title:Ze("selectPrevCodeAction.title","Select previous action"),precondition:Tv.Visible,keybinding:{weight:XI,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(n){const e=n.get(s0);e instanceof Rv&&e.focusPrevious()}});vi(class extends Bo{constructor(){super({id:"selectNextCodeAction",title:Ze("selectNextCodeAction.title","Select next action"),precondition:Tv.Visible,keybinding:{weight:XI,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(n){const e=n.get(s0);e instanceof Rv&&e.focusNext()}});vi(class extends Bo{constructor(){super({id:K_e,title:Ze("acceptSelected.title","Accept selected action"),precondition:Tv.Visible,keybinding:{weight:XI,primary:3,secondary:[2137]}})}run(n){const e=n.get(s0);e instanceof Rv&&e.acceptSelected()}});vi(class extends Bo{constructor(){super({id:q_e,title:Ze("previewSelected.title","Preview selected action"),precondition:Tv.Visible,keybinding:{weight:XI,primary:2051}})}run(n){const e=n.get(s0);e instanceof Rv&&e.acceptSelected(!0)}});const Z_e=new we("supportedCodeAction",""),gne="_typescript.applyFixAllCodeAction";class MGe extends G{constructor(e,t,i,s=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=s,this._autoTriggerTimer=this._register(new oc),this._register(this._markerService.onMarkerChanged(o=>this._onMarkerChanges(o))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(i=>qk(i,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:Ur.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getSelection();if(e.type===1)return t;const i=this._editor.getOption(65).enabled;if(i!==Ml.Off){{if(i===Ml.On)return t;if(i===Ml.OnCode){if(!t.isEmpty())return t;const o=this._editor.getModel(),{lineNumber:r,column:a}=t.getPosition(),l=o.getLineContent(r);if(l.length===0)return;if(a===1){if(/\s/.test(l[0]))return}else if(a===o.getLineMaxColumn(r)){if(/\s/.test(l[l.length-1]))return}else if(/\s/.test(l[a-2])&&/\s/.test(l[a-1]))return}}return t}}}var u_;(function(n){n.Empty={type:0};class e{constructor(i,s,o){this.trigger=i,this.position=s,this._cancellablePromise=o,this.type=1,this.actions=o.catch(r=>{if(wl(r))return Y_e;throw r})}cancel(){this._cancellablePromise.cancel()}}n.Triggered=e})(u_||(u_={}));const Y_e=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1});class PGe extends G{constructor(e,t,i,s,o,r,a){super(),this._editor=e,this._registry=t,this._markerService=i,this._progressService=o,this._configurationService=r,this._telemetryService=a,this._codeActionOracle=this._register(new es),this._state=u_.Empty,this._onDidChangeState=this._register(new $),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=Z_e.bindTo(s),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._register(this._editor.onDidChangeConfiguration(l=>{l.hasChanged(65)&&this._update()})),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(u_.Empty,!0))}_settingEnabledNearbyQuickfixes(){var t;const e=(t=this._editor)==null?void 0:t.getModel();return this._configurationService?this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:e==null?void 0:e.uri}):!1}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(u_.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(92)){const t=this._registry.all(e).flatMap(i=>i.providedCodeActionKinds??[]);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new MGe(this._editor,this._markerService,i=>{var l;if(!i){this.setState(u_.Empty);return}const s=i.selection.getStartPosition(),o=Xn(async c=>{var d,u,h,f,m,p,b,v,w,y;if(this._settingEnabledNearbyQuickfixes()&&i.trigger.type===1&&(i.trigger.triggerAction===Ur.QuickFix||(u=(d=i.trigger.filter)==null?void 0:d.include)!=null&&u.contains(Mi.QuickFix))){const C=await Lw(this._registry,e,i.selection,i.trigger,jc.None,c),S=[...C.allActions];if(c.isCancellationRequested)return Y_e;const x=(h=C.validActions)==null?void 0:h.some(N=>N.action.kind?Mi.QuickFix.contains(new Hi(N.action.kind)):!1),k=this._markerService.read({resource:e.uri});if(x){for(const N of C.validActions)(m=(f=N.action.command)==null?void 0:f.arguments)!=null&&m.some(E=>typeof E=="string"&&E.includes(gne))&&(N.action.diagnostics=[...k.filter(E=>E.relatedInformation)]);return{validActions:C.validActions,allActions:S,documentation:C.documentation,hasAutoFix:C.hasAutoFix,hasAIFix:C.hasAIFix,allAIFixes:C.allAIFixes,dispose:()=>{C.dispose()}}}else if(!x&&k.length>0){const N=i.selection.getPosition();let E=N,B=Number.MAX_VALUE;const A=[...C.validActions];for(const W of k){const T=W.endColumn,M=W.endLineNumber,z=W.startLineNumber;if(M===N.lineNumber||z===N.lineNumber){E=new U(M,T);const ee={type:i.trigger.type,triggerAction:i.trigger.triggerAction,filter:{include:(p=i.trigger.filter)!=null&&p.include?(b=i.trigger.filter)==null?void 0:b.include:Mi.QuickFix},autoApply:i.trigger.autoApply,context:{notAvailableMessage:((v=i.trigger.context)==null?void 0:v.notAvailableMessage)||"",position:E}},q=new Ie(E.lineNumber,E.column,E.lineNumber,E.column),Z=await Lw(this._registry,e,q,ee,jc.None,c);if(Z.validActions.length!==0){for(const V of Z.validActions)(y=(w=V.action.command)==null?void 0:w.arguments)!=null&&y.some(le=>typeof le=="string"&&le.includes(gne))&&(V.action.diagnostics=[...k.filter(le=>le.relatedInformation)]);C.allActions.length===0&&S.push(...Z.allActions),Math.abs(N.column-T)<B?A.unshift(...Z.validActions):A.push(...Z.validActions)}B=Math.abs(N.column-T)}}const O=A.filter((W,T,M)=>M.findIndex(z=>z.action.title===W.action.title)===T);return O.sort((W,T)=>W.action.isPreferred&&!T.action.isPreferred?-1:!W.action.isPreferred&&T.action.isPreferred||W.action.isAI&&!T.action.isAI?1:!W.action.isAI&&T.action.isAI?-1:0),{validActions:O,allActions:S,documentation:C.documentation,hasAutoFix:C.hasAutoFix,hasAIFix:C.hasAIFix,allAIFixes:C.allAIFixes,dispose:()=>{C.dispose()}}}}if(i.trigger.type===1){const C=new ds,S=await Lw(this._registry,e,i.selection,i.trigger,jc.None,c);return this._telemetryService&&this._telemetryService.publicLog2("codeAction.invokedDurations",{codeActions:S.validActions.length,duration:C.elapsed()}),S}return Lw(this._registry,e,i.selection,i.trigger,jc.None,c)});i.trigger.type===1&&((l=this._progressService)==null||l.showWhile(o,250));const r=new u_.Triggered(i.trigger,s,o);let a=!1;this._state.type===1&&(a=this._state.trigger.type===1&&r.type===1&&r.trigger.type===2&&this._state.position!==r.position),a?setTimeout(()=>{this.setState(r)},500):this.setState(r)},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:Ur.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)==null||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!this._disposed&&this._onDidChangeState.fire(e))}}var AGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Id=function(n,e){return function(t,i){e(t,i,n)}},U0;const OGe="quickfix-edit-highlight";var pm;let GC=(pm=class extends G{static get(e){return e.getContribution(U0.ID)}constructor(e,t,i,s,o,r,a,l,c,d,u){super(),this._commandService=a,this._configurationService=l,this._actionWidgetService=c,this._instantiationService=d,this._telemetryService=u,this._activeCodeActions=this._register(new es),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new PGe(this._editor,o.codeActionProvider,t,i,r,l,this._telemetryService)),this._register(this._model.onDidChangeState(h=>this.update(h))),this._lightBulbWidget=new ad(()=>{const h=this._editor.getContribution(IN.ID);return h&&this._register(h.onClick(f=>this.showCodeActionsFromLightbulb(f.actions,f))),h}),this._resolver=s.createInstance(TV),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(e,t){if(e.allAIFixes&&e.validActions.length===1){const i=e.validActions[0],s=i.action.command;s&&s.id==="inlineChat.start"&&s.arguments&&s.arguments.length>=1&&(s.arguments[0]={...s.arguments[0],autoSend:!1}),await this._applyCodeAction(i,!1,!1,E_.FromAILightbulb);return}await this.showCodeActionList(e,t,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(e,t,i){return this.showCodeActionList(t,i,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,i,s){var r;if(!this._editor.hasModel())return;(r=Br.get(this._editor))==null||r.closeMessage();const o=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:i,autoApply:s,context:{notAvailableMessage:e,position:o}})}_trigger(e){return this._model.trigger(e)}async _applyCodeAction(e,t,i,s){try{await this._instantiationService.invokeFunction(yGe,e,s,{preview:i,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:Ur.QuickFix,filter:{}})}}hideLightBulbWidget(){var e,t;(e=this._lightBulbWidget.rawValue)==null||e.hide(),(t=this._lightBulbWidget.rawValue)==null||t.gutterHide()}async update(e){var s,o,r,a,l;if(e.type!==1){this.hideLightBulbWidget();return}let t;try{t=await e.actions}catch(c){et(c);return}if(this._disposed)return;const i=this._editor.getSelection();if((i==null?void 0:i.startLineNumber)===e.position.lineNumber)if((s=this._lightBulbWidget.value)==null||s.update(t,e.trigger,e.position),e.trigger.type===1){if((o=e.trigger.filter)!=null&&o.include){const d=this.tryGetValidActionToApply(e.trigger,t);if(d){try{this.hideLightBulbWidget(),await this._applyCodeAction(d,!1,!1,E_.FromCodeActions)}finally{t.dispose()}return}if(e.trigger.context){const u=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,t);if(u&&u.action.disabled){(r=Br.get(this._editor))==null||r.showMessage(u.action.disabled,e.trigger.context.position),t.dispose();return}}}const c=!!((a=e.trigger.filter)!=null&&a.include);if(e.trigger.context&&(!t.allActions.length||!c&&!t.validActions.length)){(l=Br.get(this._editor))==null||l.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=t,t.dispose();return}this._activeCodeActions.value=t,this.showCodeActionList(t,this.toCoords(e.position),{includeDisabledActions:c,fromLightbulb:!1})}else this._actionWidgetService.isVisible?t.dispose():this._activeCodeActions.value=t}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:i})=>i.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}async showCodeActionList(e,t,i){const s=this._editor.createDecorationsCollection(),o=this._editor.getDomNode();if(!o)return;const r=i.includeDisabledActions&&(this._showDisabled||e.validActions.length===0)?e.allActions:e.validActions;if(!r.length)return;const a=U.isIPosition(t)?this.toCoords(t):t,l={onSelect:async(c,d)=>{this._applyCodeAction(c,!0,!!d,i.fromLightbulb?E_.FromAILightbulb:E_.FromCodeActions),this._actionWidgetService.hide(!1),s.clear()},onHide:c=>{var d;(d=this._editor)==null||d.focus(),s.clear()},onHover:async(c,d)=>{var f;if(d.isCancellationRequested)return;let u=!1;const h=c.action.kind;if(h){const m=new Hi(h);u=[Mi.RefactorExtract,Mi.RefactorInline,Mi.RefactorRewrite,Mi.RefactorMove,Mi.Source].some(b=>b.contains(m))}return{canPreview:u||!!((f=c.action.edit)!=null&&f.edits.length)}},onFocus:c=>{var d,u;if(c&&c.action){const h=c.action.ranges,f=c.action.diagnostics;if(s.clear(),h&&h.length>0){const m=f&&(f==null?void 0:f.length)>1?f.map(p=>({range:p,options:U0.DECORATION})):h.map(p=>({range:p,options:U0.DECORATION}));s.set(m)}else if(f&&f.length>0){const m=f.map(b=>({range:b,options:U0.DECORATION}));s.set(m);const p=f[0];if(p.startLineNumber&&p.startColumn){const b=(u=(d=this._editor.getModel())==null?void 0:d.getWordAtPosition({lineNumber:p.startLineNumber,column:p.startColumn}))==null?void 0:u.word;Tu(_("editingNewSelection","Context: {0} at line {1} and column {2}.",b,p.startLineNumber,p.startColumn))}}}else s.clear()}};this._actionWidgetService.show("codeActionWidget",!0,kGe(r,this._shouldShowHeaders(),this._resolver.getResolver()),l,a,o,this._getActionBarActions(e,t,i))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=un(this._editor.getDomNode()),s=i.left+t.left,o=i.top+t.top+t.height;return{x:s,y:o}}_shouldShowHeaders(){var t;const e=(t=this._editor)==null?void 0:t.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:e==null?void 0:e.uri})}_getActionBarActions(e,t,i){if(i.fromLightbulb)return[];const s=e.documentation.map(o=>({id:o.id,label:o.title,tooltip:o.tooltip??"",class:void 0,enabled:!0,run:()=>this._commandService.executeCommand(o.id,...o.arguments??[])}));return i.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&s.push(this._showDisabled?{id:"hideMoreActions",label:_("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,i))}:{id:"showMoreActions",label:_("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,i))}),s}},U0=pm,pm.ID="editor.contrib.codeActionController",pm.DECORATION=rt.register({description:"quickfix-highlight",className:OGe}),pm);GC=U0=AGe([Id(1,zu),Id(2,qe),Id(3,Ae),Id(4,xe),Id(5,fp),Id(6,Ci),Id(7,_t),Id(8,s0),Id(9,Ae),Id(10,Zs)],GC);yl((n,e)=>{((s,o)=>{o&&e.addRule(`.monaco-editor ${s} { background-color: ${o}; }`)})(".quickfix-edit-highlight",n.getColor(Fh));const i=n.getColor(Hg);i&&e.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${Qc(n.type)?"dotted":"solid"} ${i}; box-sizing: border-box; }`)});function QI(n){return se.regex(Z_e.keys()[0],new RegExp("(\\s|^)"+Da(n.value)+"\\b"))}const sZ={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:_("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:_("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[_("args.schema.apply.first","Always apply the first returned code action."),_("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),_("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:_("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function o0(n,e,t,i,s=Ur.Default){if(n.hasModel()){const o=GC.get(n);o==null||o.manualTriggerAtCurrentPosition(e,s,t,i)}}class FGe extends Ce{constructor(){super({id:nZ,label:_("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:se.and(R.writable,R.hasCodeActionsProvider),kbOpts:{kbExpr:R.textInputFocus,primary:2137,weight:100}})}run(e,t){return o0(t,_("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,Ur.QuickFix)}}class BGe extends Hn{constructor(){super({id:H_e,precondition:se.and(R.writable,R.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:sZ}]}})}runEditorCommand(e,t,i){const s=ou.fromUser(i,{kind:Hi.Empty,apply:"ifSingle"});return o0(t,typeof(i==null?void 0:i.kind)=="string"?s.preferred?_("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",i.kind):_("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",i.kind):s.preferred?_("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):_("editor.action.codeAction.noneMessage","No code actions available"),{include:s.kind,includeSourceActions:!0,onlyIncludePreferredActions:s.preferred},s.apply)}}class WGe extends Ce{constructor(){super({id:j_e,label:_("refactor.label","Refactor..."),alias:"Refactor...",precondition:se.and(R.writable,R.hasCodeActionsProvider),kbOpts:{kbExpr:R.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:se.and(R.writable,QI(Mi.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:sZ}]}})}run(e,t,i){const s=ou.fromUser(i,{kind:Mi.Refactor,apply:"never"});return o0(t,typeof(i==null?void 0:i.kind)=="string"?s.preferred?_("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",i.kind):_("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",i.kind):s.preferred?_("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):_("editor.action.refactor.noneMessage","No refactorings available"),{include:Mi.Refactor.contains(s.kind)?s.kind:Hi.None,onlyIncludePreferredActions:s.preferred},s.apply,Ur.Refactor)}}class HGe extends Ce{constructor(){super({id:z_e,label:_("source.label","Source Action..."),alias:"Source Action...",precondition:se.and(R.writable,R.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:se.and(R.writable,QI(Mi.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:sZ}]}})}run(e,t,i){const s=ou.fromUser(i,{kind:Mi.Source,apply:"never"});return o0(t,typeof(i==null?void 0:i.kind)=="string"?s.preferred?_("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",i.kind):_("editor.action.source.noneMessage.kind","No source actions for '{0}' available",i.kind):s.preferred?_("editor.action.source.noneMessage.preferred","No preferred source actions available"):_("editor.action.source.noneMessage","No source actions available"),{include:Mi.Source.contains(s.kind)?s.kind:Hi.None,includeSourceActions:!0,onlyIncludePreferredActions:s.preferred},s.apply,Ur.SourceAction)}}class VGe extends Ce{constructor(){super({id:IV,label:_("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:se.and(R.writable,QI(Mi.SourceOrganizeImports)),kbOpts:{kbExpr:R.textInputFocus,primary:1581,weight:100}})}run(e,t){return o0(t,_("editor.action.organize.noneMessage","No organize imports action available"),{include:Mi.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",Ur.OrganizeImports)}}class jGe extends Ce{constructor(){super({id:EV,label:_("fixAll.label","Fix All"),alias:"Fix All",precondition:se.and(R.writable,QI(Mi.SourceFixAll))})}run(e,t){return o0(t,_("fixAll.noneMessage","No fix all action available"),{include:Mi.SourceFixAll,includeSourceActions:!0},"ifSingle",Ur.FixAll)}}class zGe extends Ce{constructor(){super({id:V_e,label:_("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:se.and(R.writable,QI(Mi.QuickFix)),kbOpts:{kbExpr:R.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return o0(t,_("editor.action.autoFix.noneMessage","No auto fixes available"),{include:Mi.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",Ur.AutoFix)}}Ot(GC.ID,GC,3);Ot(IN.ID,IN,4);de(FGe);de(WGe);de(HGe);de(VGe);de(zGe);de(jGe);_e(new BGe);Zi.as(rc.Configuration).registerConfiguration({...MI,properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:_("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}});Zi.as(rc.Configuration).registerConfiguration({...MI,properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:_("includeNearbyQuickFixes","Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}});Zi.as(rc.Configuration).registerConfiguration({...MI,properties:{"editor.codeActions.triggerOnFocusChange":{type:"boolean",scope:5,markdownDescription:_("triggerOnFocusChange","Enable triggering {0} when {1} is set to {2}. Code Actions must be set to {3} to be triggered for window and focus changes.","`#editor.codeActionsOnSave#`","`#files.autoSave#`","`afterDelay`","`always`"),default:!1}}});class AV{constructor(){this.lenses=[],this._disposables=new ne}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const i of e.lenses)this.lenses.push({symbol:i,provider:t})}}async function X_e(n,e,t){const i=n.ordered(e),s=new Map,o=new AV,r=i.map(async(a,l)=>{s.set(a,l);try{const c=await Promise.resolve(a.provideCodeLenses(e,t));c&&o.add(c,a)}catch(c){fn(c)}});return await Promise.all(r),o.lenses=o.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:s.get(a.provider)<s.get(l.provider)?-1:s.get(a.provider)>s.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),o}Mt.registerCommand("_executeCodeLensProvider",function(n,...e){let[t,i]=e;zt(Be.isUri(t)),zt(typeof i=="number"||!i);const{codeLensProvider:s}=n.get(xe),o=n.get(Ei).getModel(t);if(!o)throw al();const r=[],a=new ne;return X_e(s,o,ht.None).then(l=>{a.add(l);const c=[];for(const d of l.lenses)i==null||d.symbol.command?r.push(d.symbol):i-- >0&&d.provider.resolveCodeLens&&c.push(Promise.resolve(d.provider.resolveCodeLens(o,d.symbol,ht.None)).then(u=>r.push(u||d.symbol)));return Promise.all(c)}).then(()=>r).finally(()=>{setTimeout(()=>a.dispose(),100)})});var UGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},$Ge=function(n,e){return function(t,i){e(t,i,n)}};const Q_e=kt("ICodeLensCache");class mne{constructor(e,t){this.lineCount=e,this.data=t}}let OV=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new Hu(20,.75);const t="codelens/cache";GS(ui,()=>e.remove(t,1));const i="codelens/cache2",s=e.get(i,1,"{}");this._deserialize(s);const o=pe.filter(e.onWillSaveState,r=>r.reason===Jk.SHUTDOWN);pe.once(o)(r=>{e.store(i,this._serialize(),1,1)})}put(e,t){const i=t.lenses.map(r=>{var a;return{range:r.symbol.range,command:r.symbol.command&&{id:"",title:(a=r.symbol.command)==null?void 0:a.title}}}),s=new AV;s.add({lenses:i,dispose:()=>{}},this._fakeProvider);const o=new mne(e.getLineCount(),s);this._cache.set(e.uri.toString(),o)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,i]of this._cache){const s=new Set;for(const o of i.data.lenses)s.add(o.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...s.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const i in t){const s=t[i],o=[];for(const a of s.lines)o.push({range:new D(a,1,a,11)});const r=new AV;r.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(i,new mne(s.lineCount,r))}}catch{}}};OV=UGe([$Ge(0,ac)],OV);Tt(Q_e,OV,1);class KGe{constructor(e,t,i){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}const RL=class RL{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${RL._idPool++}`,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const i=[];let s=!1;for(let o=0;o<e.length;o++){const r=e[o];if(r&&(s=!0,r.command)){const a=lm(r.command.title.trim());if(r.command.id){const l=`c${RL._idPool++}`;i.push(ge("a",{id:l,title:r.command.tooltip,role:"button"},...a)),this._commands.set(l,r.command)}else i.push(ge("span",{title:r.command.tooltip},...a));o+1<e.length&&i.push(ge("span",void 0," | "))}}s?(ys(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):ys(this._domNode,ge("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}};RL._idPool=0;let FV=RL;class OB{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let i=0,s=t.length;i<s;i++)this._addDecorationsCallbacks[i](t[i])}}const pne=rt.register({collapseOnReplaceEdit:!0,description:"codelens"});class _ne{constructor(e,t,i,s,o,r){this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let a;const l=[];this._data.forEach((c,d)=>{c.symbol.command&&l.push(c.symbol),i.addDecoration({range:c.symbol.range,options:pne},u=>this._decorationIds[d]=u),a?a=D.plusRange(a,c.symbol.range):a=D.lift(c.symbol.range)}),this._viewZone=new KGe(a.startLineNumber-1,o,r),this._viewZoneId=s.addZone(this._viewZone),l.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(l,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new FV(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t==null||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const i=this._editor.getModel().getDecorationRange(e),s=this._data[t].symbol;return!!(i&&D.isEmpty(s.range)===i.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((i,s)=>{t.addDecoration({range:i.symbol.range,options:pne},o=>this._decorationIds[s]=o)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const i=e[t];if(i){const{symbol:s}=this._data[t];s.command=i.command||s.command}}}getCommand(e){var t;return(t=this._contentWidget)==null?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var qGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},PS=function(n,e){return function(t,i){e(t,i,n)}},Yy;let EN=(Yy=class{constructor(e,t,i,s,o,r){this._editor=e,this._languageFeaturesService=t,this._commandService=s,this._notificationService=o,this._codeLensCache=r,this._disposables=new ne,this._localToDispose=new ne,this._lenses=[],this._oldCodeLensModels=new ne,this._provideCodeLensDebounce=i.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=i.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new li(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(50)||a.hasChanged(19)||a.hasChanged(18))&&this._updateLensStyle(),a.hasChanged(17)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)==null||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52));let t=this._editor.getOption(19);return(!t||t<5)&&(t=this._editor.getOption(52)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(18),s=this._editor.getOption(50),{style:o}=this._editor.getContainerDomNode();o.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),o.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),o.setProperty("--vscode-editorCodeLens-fontFeatureSettings",s.fontFeatureSettings),i&&(o.setProperty("--vscode-editorCodeLens-fontFamily",i),o.setProperty("--vscode-editorCodeLens-fontFamilyDefault",Eo.fontFamily)),this._editor.changeViewZones(r=>{for(const a of this._lenses)a.updateHeight(e,r)})}_localDispose(){var e,t,i;(e=this._getCodeLensModelPromise)==null||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)==null||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(i=this._currentCodeLensModel)==null||i.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(17)||e.isTooLargeForTokenization())return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&Km(()=>{const s=this._codeLensCache.get(e);t===s&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3,this._localToDispose);return}for(const s of this._languageFeaturesService.codeLensProvider.all(e))if(typeof s.onDidChange=="function"){const o=s.onDidChange(()=>i.schedule());this._localToDispose.add(o)}const i=new li(()=>{var o;const s=Date.now();(o=this._getCodeLensModelPromise)==null||o.cancel(),this._getCodeLensModelPromise=Xn(r=>X_e(this._languageFeaturesService.codeLensProvider,e,r)),this._getCodeLensModelPromise.then(r=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=r,this._codeLensCache.put(e,r);const a=this._provideCodeLensDebounce.update(e,Date.now()-s);i.delay=a,this._renderCodeLensSymbols(r),this._resolveCodeLensesInViewportSoon()},et)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(i),this._localToDispose.add(Pe(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{var s;this._editor.changeDecorations(o=>{this._editor.changeViewZones(r=>{const a=[];let l=-1;this._lenses.forEach(d=>{!d.isValid()||l===d.getLineNumber()?a.push(d):(d.update(r),l=d.getLineNumber())});const c=new OB;a.forEach(d=>{d.dispose(c,r),this._lenses.splice(this._lenses.indexOf(d),1)}),c.commit(o)})}),i.schedule(),this._resolveCodeLensesScheduler.cancel(),(s=this._resolveCodeLensesPromise)==null||s.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorText(()=>{i.schedule()})),this._localToDispose.add(this._editor.onDidBlurEditorText(()=>{i.cancel()})),this._localToDispose.add(this._editor.onDidScrollChange(s=>{s.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(Pe(()=>{if(this._editor.getModel()){const s=fd.capture(this._editor);this._editor.changeDecorations(o=>{this._editor.changeViewZones(r=>{this._disposeAllLenses(o,r)})}),s.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(s=>{if(s.target.type!==9)return;let o=s.target.element;if((o==null?void 0:o.tagName)==="SPAN"&&(o=o.parentElement),(o==null?void 0:o.tagName)==="A")for(const r of this._lenses){const a=r.getCommand(o);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),i.schedule()}_disposeAllLenses(e,t){const i=new OB;for(const s of this._lenses)s.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),i=[];let s;for(const a of e.lenses){const l=a.symbol.range.startLineNumber;l<1||l>t||(s&&s[s.length-1].symbol.range.startLineNumber===l?s.push(a):(s=[a],i.push(s)))}if(!i.length&&!this._lenses.length)return;const o=fd.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const c=new OB;let d=0,u=0;for(;u<i.length&&d<this._lenses.length;){const h=i[u][0].symbol.range.startLineNumber,f=this._lenses[d].getLineNumber();f<h?(this._lenses[d].dispose(c,l),this._lenses.splice(d,1)):f===h?(this._lenses[d].updateCodeLensSymbols(i[u],c),u++,d++):(this._lenses.splice(d,0,new _ne(i[u],this._editor,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++,u++)}for(;d<this._lenses.length;)this._lenses[d].dispose(c,l),this._lenses.splice(d,1);for(;u<i.length;)this._lenses.push(new _ne(i[u],this._editor,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),u++;c.commit(a)})}),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var r;(r=this._resolveCodeLensesPromise)==null||r.cancel(),this._resolveCodeLensesPromise=void 0;const e=this._editor.getModel();if(!e)return;const t=[],i=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(e);l&&(t.push(l),i.push(a))}),t.length===0)return;const s=Date.now(),o=Xn(a=>{const l=t.map((c,d)=>{const u=new Array(c.length),h=c.map((f,m)=>!f.symbol.command&&typeof f.provider.resolveCodeLens=="function"?Promise.resolve(f.provider.resolveCodeLens(e,f.symbol,a)).then(p=>{u[m]=p},fn):(u[m]=f.symbol,Promise.resolve(void 0)));return Promise.all(h).then(()=>{!a.isCancellationRequested&&!i[d].isDisposed()&&i[d].updateCommands(u)})});return Promise.all(l)});this._resolveCodeLensesPromise=o,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(e,Date.now()-s);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(e,this._currentCodeLensModel),this._oldCodeLensModels.clear(),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{et(a),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}async getModel(){var e;return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,(e=this._currentCodeLensModel)!=null&&e.isDisposed?void 0:this._currentCodeLensModel}},Yy.ID="css.editor.codeLens",Yy);EN=qGe([PS(1,xe),PS(2,Fa),PS(3,Ci),PS(4,wn),PS(5,Q_e)],EN);Ot(EN.ID,EN,1);de(class extends Ce{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:R.hasCodeLensProvider,label:_("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(e,t){if(!t.hasModel())return;const i=e.get(Cl),s=e.get(Ci),o=e.get(wn),r=t.getSelection().positionLineNumber,a=t.getContribution(EN.ID);if(!a)return;const l=await a.getModel();if(!l)return;const c=[];for(const h of l.lenses)h.symbol.command&&h.symbol.range.startLineNumber===r&&c.push({label:h.symbol.command.title,command:h.symbol.command});if(c.length===0)return;const d=await i.pick(c,{canPickMany:!1,placeHolder:_("placeHolder","Select a command")});if(!d)return;let u=d.command;if(l.isDisposed){const h=await a.getModel(),f=h==null?void 0:h.lenses.find(m=>{var p;return m.symbol.range.startLineNumber===r&&((p=m.symbol.command)==null?void 0:p.title)===u.title});if(!f||!f.symbol.command)return;u=f.symbol.command}try{await s.executeCommand(u.id,...u.arguments||[])}catch(h){o.error(h)}}});var J_e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},BV=function(n,e){return function(t,i){e(t,i,n)}};let DN=class{constructor(e){this._editorWorkerService=e}async provideDocumentColors(e,t){return this._editorWorkerService.computeDefaultDocumentColors(e.uri)}provideColorPresentations(e,t,i){const s=t.range,o=t.color,r=o.alpha,a=new oe(new Wt(Math.round(255*o.red),Math.round(255*o.green),Math.round(255*o.blue),r)),l=r?oe.Format.CSS.formatRGB(a):oe.Format.CSS.formatRGBA(a),c=r?oe.Format.CSS.formatHSL(a):oe.Format.CSS.formatHSLA(a),d=r?oe.Format.CSS.formatHex(a):oe.Format.CSS.formatHexA(a),u=[];return u.push({label:l,textEdit:{range:s,text:l}}),u.push({label:c,textEdit:{range:s,text:c}}),u.push({label:d,textEdit:{range:s,text:d}}),u}};DN=J_e([BV(0,fr)],DN);let WV=class extends G{constructor(e,t){super(),this._register(e.colorProvider.register("*",new DN(t)))}};WV=J_e([BV(0,xe),BV(1,fr)],WV);H1(WV);async function ebe(n,e,t,i=!0){return oZ(new GGe,n,e,t,i)}function tbe(n,e,t,i){return Promise.resolve(t.provideColorPresentations(n,e,i))}class GGe{constructor(){}async compute(e,t,i,s){const o=await e.provideDocumentColors(t,i);if(Array.isArray(o))for(const r of o)s.push({colorInfo:r,provider:e});return Array.isArray(o)}}class ZGe{constructor(){}async compute(e,t,i,s){const o=await e.provideDocumentColors(t,i);if(Array.isArray(o))for(const r of o)s.push({range:r.range,color:[r.color.red,r.color.green,r.color.blue,r.color.alpha]});return Array.isArray(o)}}class YGe{constructor(e){this.colorInfo=e}async compute(e,t,i,s){const o=await e.provideColorPresentations(t,this.colorInfo,ht.None);return Array.isArray(o)&&s.push(...o),Array.isArray(o)}}async function oZ(n,e,t,i,s){let o=!1,r;const a=[],l=e.ordered(t);for(let c=l.length-1;c>=0;c--){const d=l[c];if(d instanceof DN)r=d;else try{await n.compute(d,t,i,a)&&(o=!0)}catch(u){fn(u)}}return o?a:r&&s?(await n.compute(r,t,i,a),a):[]}function ibe(n,e){const{colorProvider:t}=n.get(xe),i=n.get(Ei).getModel(e);if(!i)throw al();const s=n.get(_t).getValue("editor.defaultColorDecorators",{resource:e});return{model:i,colorProviderRegistry:t,isDefaultColorDecoratorsEnabled:s}}Mt.registerCommand("_executeDocumentColorProvider",function(n,...e){const[t]=e;if(!(t instanceof Be))throw al();const{model:i,colorProviderRegistry:s,isDefaultColorDecoratorsEnabled:o}=ibe(n,t);return oZ(new ZGe,s,i,ht.None,o)});Mt.registerCommand("_executeColorPresentationProvider",function(n,...e){const[t,i]=e,{uri:s,range:o}=i;if(!(s instanceof Be)||!Array.isArray(t)||t.length!==4||!D.isIRange(o))throw al();const{model:r,colorProviderRegistry:a,isDefaultColorDecoratorsEnabled:l}=ibe(n,s),[c,d,u,h]=t;return oZ(new YGe({range:o,color:{red:c,green:d,blue:u,alpha:h}}),a,r,ht.None,l)});var XGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},FB=function(n,e){return function(t,i){e(t,i,n)}},HV;const nbe=Object.create({});var _m;let ZC=(_m=class extends G{constructor(e,t,i,s){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=i,this._localToDispose=this._register(new ne),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new xM(this._editor),this._decoratorLimitReporter=new QGe,this._colorDecorationClassRefs=this._register(new ne),this._debounceInformation=s.for(i.colorProvider,"Document Colors",{min:HV.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(e.onDidChangeModelLanguage(()=>this.updateColors())),this._register(i.colorProvider.onDidChange(()=>this.updateColors())),this._register(e.onDidChangeConfiguration(o=>{const r=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148);const a=r!==this._isColorDecoratorsEnabled||o.hasChanged(21),l=o.hasChanged(148);(a||l)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&typeof i=="object"){const s=i.colorDecorators;if(s&&s.enable!==void 0&&!s.enable)return s.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new oc,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}async beginCompute(){this._computePromise=Xn(async e=>{const t=this._editor.getModel();if(!t)return[];const i=new ds(!1),s=await ebe(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,i.elapsed()),s});try{const e=await this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){et(e)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(i=>({range:{startLineNumber:i.colorInfo.range.startLineNumber,startColumn:i.colorInfo.range.startColumn,endLineNumber:i.colorInfo.range.endLineNumber,endColumn:i.colorInfo.range.endColumn},options:rt.EMPTY}));this._editor.changeDecorations(i=>{this._decorationsIds=i.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((s,o)=>this._colorDatas.set(s,e[o]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],i=this._editor.getOption(21);for(let o=0;o<e.length&&t.length<i;o++){const{red:r,green:a,blue:l,alpha:c}=e[o].colorInfo.color,d=new Wt(Math.round(r*255),Math.round(a*255),Math.round(l*255),c),u=`rgba(${d.r}, ${d.g}, ${d.b}, ${d.a})`,h=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:u}));t.push({range:{startLineNumber:e[o].colorInfo.range.startLineNumber,startColumn:e[o].colorInfo.range.startColumn,endLineNumber:e[o].colorInfo.range.endLineNumber,endColumn:e[o].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:Que,inlineClassName:`${h.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:nbe}}})}const s=i<e.length?i:!1;this._decoratorLimitReporter.update(e.length,s),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const i=t.getDecorationsInRange(D.fromPositions(e,e)).filter(s=>this._colorDatas.has(s.id));return i.length===0?null:this._colorDatas.get(i[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}},HV=_m,_m.ID="editor.contrib.colorDetector",_m.RECOMPUTE_TIME=1e3,_m);ZC=HV=XGe([FB(1,_t),FB(2,xe),FB(3,Fa)],ZC);class QGe{constructor(){this._onDidChange=new $,this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}Ot(ZC.ID,ZC,1);class JGe{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new $,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new $,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new $,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let i=-1;for(let s=0;s<this.colorPresentations.length;s++)if(t.toLowerCase()===this.colorPresentations[s].label){i=s;break}if(i===-1){const s=t.split("(")[0].toLowerCase();for(let o=0;o<this.colorPresentations.length;o++)if(this.colorPresentations[o].label.toLowerCase().startsWith(s)){i=o;break}}i!==-1&&i!==this.presentationIndex&&(this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}const _a=ge;class eZe extends G{constructor(e,t,i,s=!1){super(),this.model=t,this.showingStandaloneColorPicker=s,this._closeButton=null,this._domNode=_a(".colorpicker-header"),ae(e,this._domNode),this._pickedColorNode=ae(this._domNode,_a(".picked-color")),ae(this._pickedColorNode,_a("span.codicon.codicon-color-mode")),this._pickedColorPresentation=ae(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const o=_("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",o),this._originalColorNode=ae(this._domNode,_a(".original-color")),this._originalColorNode.style.backgroundColor=oe.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(E2)||oe.white,this._register(i.onDidColorThemeChange(r=>{this.backgroundColor=r.getColor(E2)||oe.white})),this._register(Q(this._pickedColorNode,fe.CLICK,()=>this.model.selectNextColorPresentation())),this._register(Q(this._originalColorNode,fe.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=oe.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new tZe(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=oe.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class tZe extends G{constructor(e){super(),this._onClicked=this._register(new $),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),ae(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),ae(this._button,t),ae(t,_a(".button"+Ke.asCSSSelector(Di("color-picker-close",he.close,_("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._register(Q(this._button,fe.CLICK,()=>{this._onClicked.fire()}))}}class iZe extends G{constructor(e,t,i,s=!1){super(),this.model=t,this.pixelRatio=i,this._insertButton=null,this._domNode=_a(".colorpicker-body"),ae(e,this._domNode),this._saturationBox=new nZe(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new sZe(this._domNode,this.model,s),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new oZe(this._domNode,this.model,s),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),s&&(this._insertButton=this._register(new rZe(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const i=this.model.color.hsva;this.model.color=new oe(new cu(i.h,e,t,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new oe(new cu(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,i=(1-e)*360;this.model.color=new oe(new cu(i===360?0:i,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class nZe extends G{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new $,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new $,this.onColorFlushed=this._onColorFlushed.event,this._domNode=_a(".saturation-wrap"),ae(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",ae(this._domNode,this._canvas),this.selection=_a(".saturation-selection"),ae(this._domNode,this.selection),this.layout(),this._register(Q(this._domNode,fe.POINTER_DOWN,s=>this.onPointerDown(s))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new D1);const t=un(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>this.onDidChangePosition(s.pageX-t.left,s.pageY-t.top),()=>null);const i=Q(e.target.ownerDocument,fe.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const i=Math.max(0,Math.min(1,e/this.width)),s=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,s),this._onDidChange.fire({s:i,v:s})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new oe(new cu(e.h,1,1,1)),i=this._canvas.getContext("2d"),s=i.createLinearGradient(0,0,this._canvas.width,0);s.addColorStop(0,"rgba(255, 255, 255, 1)"),s.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),s.addColorStop(1,"rgba(255, 255, 255, 0)");const o=i.createLinearGradient(0,0,0,this._canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this._canvas.width,this._canvas.height),i.fillStyle=oe.Format.CSS.format(t),i.fill(),i.fillStyle=s,i.fill(),i.fillStyle=o,i.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}}class sbe extends G{constructor(e,t,i=!1){super(),this.model=t,this._onDidChange=new $,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new $,this.onColorFlushed=this._onColorFlushed.event,i?(this.domNode=ae(e,_a(".standalone-strip")),this.overlay=ae(this.domNode,_a(".standalone-overlay"))):(this.domNode=ae(e,_a(".strip")),this.overlay=ae(this.domNode,_a(".overlay"))),this.slider=ae(this.domNode,_a(".slider")),this.slider.style.top="0px",this._register(Q(this.domNode,fe.POINTER_DOWN,s=>this.onPointerDown(s))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new D1),i=un(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,o=>this.onDidChangeTop(o.pageY-i.top),()=>null);const s=Q(e.target.ownerDocument,fe.POINTER_UP,()=>{this._onColorFlushed.fire(),s.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class sZe extends sbe{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:i,b:s}=e.rgba,o=new oe(new Wt(t,i,s,1)),r=new oe(new Wt(t,i,s,0));this.overlay.style.background=`linear-gradient(to bottom, ${o} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}}class oZe extends sbe{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class rZe extends G{constructor(e){super(),this._onClicked=this._register(new $),this.onClicked=this._onClicked.event,this._button=ae(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register(Q(this._button,fe.CLICK,()=>{this._onClicked.fire()}))}get button(){return this._button}}class aZe extends Ba{constructor(e,t,i,s,o=!1){super(),this.model=t,this.pixelRatio=i,this._register(Dk.getInstance(je(e)).onDidChange(()=>this.layout())),this._domNode=_a(".colorpicker-widget"),e.appendChild(this._domNode),this.header=this._register(new eZe(this._domNode,this.model,s,o)),this.body=this._register(new iZe(this._domNode,this.model,this.pixelRatio,o))}layout(){this.body.layout()}get domNode(){return this._domNode}}class BB{constructor(e,t,i,s){this.priority=e,this.range=t,this.initialMousePosX=i,this.initialMousePosY=s,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class KT{constructor(e,t,i,s,o,r){this.priority=e,this.owner=t,this.range=i,this.initialMousePosX=s,this.initialMousePosY=o,this.supportsMarkerHover=r,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}class Mv{constructor(e){this.renderedHoverParts=e}dispose(){for(const e of this.renderedHoverParts)e.dispose()}}const r0=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}};var obe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},rbe=function(n,e){return function(t,i){e(t,i,n)}};class lZe{constructor(e,t,i,s){this.owner=e,this.range=t,this.model=i,this.provider=s,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let TN=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,i){return ya.fromPromise(this._computeAsync(e,t,i))}async _computeAsync(e,t,i){if(!this._editor.hasModel())return[];const s=ZC.get(this._editor);if(!s)return[];for(const o of t){if(!s.isColorDecoration(o))continue;const r=s.getColorData(o.range.getStartPosition());if(r)return[await abe(this,this._editor.getModel(),r.colorInfo,r.provider)]}return[]}renderHoverParts(e,t){const i=lbe(this,this._editor,this._themeService,t,e);if(!i)return new Mv([]);this._colorPicker=i.colorPicker;const s={hoverPart:i.hoverPart,hoverElement:this._colorPicker.domNode,dispose(){i.disposables.dispose()}};return new Mv([s])}handleResize(){var e;(e=this._colorPicker)==null||e.layout()}isColorPickerVisible(){return!!this._colorPicker}};TN=obe([rbe(1,Vn)],TN);class cZe{constructor(e,t,i,s){this.owner=e,this.range=t,this.model=i,this.provider=s}}let RN=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}async createColorHover(e,t,i){if(!this._editor.hasModel()||!ZC.get(this._editor))return null;const o=await ebe(i,this._editor.getModel(),ht.None);let r=null,a=null;for(const u of o){const h=u.colorInfo;D.containsRange(h.range,e.range)&&(r=h,a=u.provider)}const l=r??e,c=a??t,d=!!r;return{colorHover:await abe(this,this._editor.getModel(),l,c),foundInEditor:d}}async updateEditorModel(e){if(!this._editor.hasModel())return;const t=e.model;let i=new D(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(await qT(this._editor.getModel(),t,this._color,i,e),i=cbe(this._editor,i,t))}renderHoverParts(e,t){return lbe(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};RN=obe([rbe(1,Vn)],RN);async function abe(n,e,t,i){const s=e.getValueInRange(t.range),{red:o,green:r,blue:a,alpha:l}=t.color,c=new Wt(Math.round(o*255),Math.round(r*255),Math.round(a*255),l),d=new oe(c),u=await tbe(e,t,i,ht.None),h=new JGe(d,[],0);return h.colorPresentations=u||[],h.guessColorPresentation(d,s),n instanceof TN?new lZe(n,D.lift(t.range),h,i):new cZe(n,D.lift(t.range),h,i)}function lbe(n,e,t,i,s){if(i.length===0||!e.hasModel())return;if(s.setMinimumDimensions){const h=e.getOption(67)+8;s.setMinimumDimensions(new ni(302,h))}const o=new ne,r=i[0],a=e.getModel(),l=r.model,c=o.add(new aZe(s.fragment,l,e.getOption(144),t,n instanceof RN));let d=!1,u=new D(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);if(n instanceof RN){const h=r.model.color;n.color=h,qT(a,l,h,u,r),o.add(l.onColorFlushed(f=>{n.color=f}))}else o.add(l.onColorFlushed(async h=>{await qT(a,l,h,u,r),d=!0,u=cbe(e,u,l)}));return o.add(l.onDidChangeColor(h=>{qT(a,l,h,u,r)})),o.add(e.onDidChangeModelContent(h=>{d?d=!1:(s.hide(),e.focus())})),{hoverPart:r,colorPicker:c,disposables:o}}function cbe(n,e,t){const i=[],s=t.presentation.textEdit??{range:e,text:t.presentation.label,forceMoveMarkers:!1};i.push(s),t.presentation.additionalTextEdits&&i.push(...t.presentation.additionalTextEdits);const o=D.lift(s.range),r=n.getModel()._setTrackedRange(null,o,3);return n.executeEdits("colorpicker",i),n.pushUndoStop(),n.getModel()._getTrackedRange(r)??o}async function qT(n,e,t,i,s){const o=await tbe(n,{range:i,color:{red:t.rgba.r/255,green:t.rgba.g/255,blue:t.rgba.b/255,alpha:t.rgba.a}},s.provider,ht.None);e.colorPresentations=o||[]}const dbe="editor.action.showHover",dZe="editor.action.showDefinitionPreviewHover",uZe="editor.action.scrollUpHover",hZe="editor.action.scrollDownHover",fZe="editor.action.scrollLeftHover",gZe="editor.action.scrollRightHover",mZe="editor.action.pageUpHover",pZe="editor.action.pageDownHover",_Ze="editor.action.goToTopHover",bZe="editor.action.goToBottomHover",PF="editor.action.increaseHoverVerbosityLevel",vZe=_({key:"increaseHoverVerbosityLevel",comment:["Label for action that will increase the hover verbosity level."]},"Increase Hover Verbosity Level"),AF="editor.action.decreaseHoverVerbosityLevel",wZe=_({key:"decreaseHoverVerbosityLevel",comment:["Label for action that will decrease the hover verbosity level."]},"Decrease Hover Verbosity Level"),ube="editor.action.inlineSuggest.commit",hbe="editor.action.inlineSuggest.showPrevious",fbe="editor.action.inlineSuggest.showNext";var rZ=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Bl=function(n,e){return function(t,i){e(t,i,n)}},GT;let VV=class extends G{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=ii(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).showToolbar==="always"),this.sessionPosition=void 0,this.position=Te(this,s=>{var l,c;const o=(l=this.model.read(s))==null?void 0:l.primaryGhostText.read(s);if(!this.alwaysShowToolbar.read(s)||!o||o.parts.length===0)return this.sessionPosition=void 0,null;const r=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);const a=new U(o.lineNumber,Math.min(r,((c=this.sessionPosition)==null?void 0:c.column)??Number.MAX_SAFE_INTEGER));return this.sessionPosition=a,a}),this._register(nr((s,o)=>{const r=this.model.read(s);if(!r||!this.alwaysShowToolbar.read(s))return;const a=gp((c,d)=>{const u=d.add(this.instantiationService.createInstance(YC,this.editor,!0,this.position,r.selectedInlineCompletionIndex,r.inlineCompletionsCount,r.activeCommands));return e.addContentWidget(u),d.add(Pe(()=>e.removeContentWidget(u))),d.add(Je(h=>{this.position.read(h)&&r.lastTriggerKind.read(h)!==Yc.Explicit&&r.triggerExplicitly()})),u}),l=FI(this,(c,d)=>!!this.position.read(c)||!!d);o.add(Je(c=>{l.read(c)&&a.read(c)}))}))}};VV=rZ([Bl(2,Ae)],VV);const yZe=Di("inline-suggestion-hints-next",he.chevronRight,_("parameterHintsNextIcon","Icon for show next parameter hint.")),CZe=Di("inline-suggestion-hints-previous",he.chevronLeft,_("parameterHintsPreviousIcon","Icon for show previous parameter hint."));var bm;let YC=(bm=class extends G{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,i){const s=new Or(e,t,i,!0,()=>this._commandService.executeCommand(e)),o=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let r=t;return o&&(r=_({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,o.getLabel())),s.tooltip=r,s}constructor(e,t,i,s,o,r,a,l,c,d,u){super(),this.editor=e,this.withBorder=t,this._position=i,this._currentSuggestionIdx=s,this._suggestionCount=o,this._extraCommands=r,this._commandService=a,this.keybindingService=c,this._contextKeyService=d,this._menuService=u,this.id=`InlineSuggestionHintsContentWidget${GT.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=Ct("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[Ct("div@toolBar")]),this.previousAction=this.createCommandAction(hbe,_("previous","Previous"),Ke.asClassName(CZe)),this.availableSuggestionCountAction=new Or("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(fbe,_("next","Next"),Ke.asClassName(yZe)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(Ne.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new li(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new li(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.toolBar=this._register(l.createInstance(jV,this.nodes.toolBar,Ne.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:h=>h.startsWith("primary")},actionViewItemProvider:(h,f)=>{if(h instanceof Fr)return l.createInstance(xZe,h,void 0);if(h===this.availableSuggestionCountAction){const m=new SZe(void 0,h,{label:!0,icon:!1});return m.setClass("availableSuggestionCount"),m}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(h=>{GT._dropDownVisible=h})),this._register(Je(h=>{this._position.read(h),this.editor.layoutContentWidget(this)})),this._register(Je(h=>{const f=this._suggestionCount.read(h),m=this._currentSuggestionIdx.read(h);f!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${m+1}/${f}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),f!==void 0&&f>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register(Je(h=>{const m=this._extraCommands.read(h).map(p=>({class:void 0,id:p.id,enabled:!0,tooltip:p.tooltip||"",label:p.title,run:b=>this._commandService.executeCommand(p.id)}));for(const[p,b]of this.inlineCompletionsActionsMenus.getActions())for(const v of b)v instanceof Fr&&m.push(v);m.length>0&&m.unshift(new Ss),this.toolBar.setAdditionalSecondaryActions(m)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}},GT=bm,bm._dropDownVisible=!1,bm.id=0,bm);YC=GT=rZ([Bl(6,Ci),Bl(7,Ae),Bl(8,ei),Bl(9,qe),Bl(10,Oa)],YC);class SZe extends FC{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}updateTooltip(){}}let xZe=class extends Xm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=Ct("div.keybinding").root;this._register(new B1(t,Mr,{disableTitle:!0,...Bme})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}updateTooltip(){}},jV=class extends yN{constructor(e,t,i,s,o,r,a,l,c){super(e,{resetMenu:t,...i},s,o,r,a,l,c),this.menuId=t,this.options2=i,this.menuService=s,this.contextKeyService=o,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var i,s,o,r,a,l,c;const e=[],t=[];rF(this.menu,(i=this.options2)==null?void 0:i.menuOptions,{primary:e,secondary:t},(o=(s=this.options2)==null?void 0:s.toolbarOptions)==null?void 0:o.primaryGroup,(a=(r=this.options2)==null?void 0:r.toolbarOptions)==null?void 0:a.shouldInlineSubmenu,(c=(l=this.options2)==null?void 0:l.toolbarOptions)==null?void 0:c.useSeparatorsInPrimaryActions),t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),this.setActions(e,t)}setPrependedPrimaryActions(e){Vi(this.prependedPrimaryActions,e,(t,i)=>t===i)||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){Vi(this.additionalActions,e,(t,i)=>t===i)||(this.additionalActions=e,this.updateToolbar())}};jV=rZ([Bl(3,Oa),Bl(4,qe),Bl(5,Zr),Bl(6,ei),Bl(7,Ci),Bl(8,Zs)],jV);function OF(n,e,t){const i=un(n);return!(e<i.left||e>i.left+i.width||t<i.top||t>i.top+i.height)}let LZe=class{constructor(e,t,i){this.value=e,this.isComplete=t,this.hasLoadingMessage=i}};class gbe extends G{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new $),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new li(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new li(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new li(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=f2e(e=>this._computer.computeAsync(e)),(async()=>{try{for await(const e of this._asyncIterable)e&&(this._result.push(e),this._fireResult());this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(e){et(e)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new LZe(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}class aZ{constructor(){this._onDidWillResize=new $,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new $,this.onDidResize=this._onDidResize.event,this._sashListener=new ne,this._size=new ni(0,0),this._minSize=new ni(0,0),this._maxSize=new ni(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Hs(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Hs(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Hs(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:sM.North}),this._southSash=new Hs(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:sM.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,i=0;this._sashListener.add(pe.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,i=0)})),this._sashListener.add(pe.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,i=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(s=>{e&&(i=s.currentX-s.startX,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(s=>{e&&(i=-(s.currentX-s.startX),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(s=>{e&&(t=-(s.currentY-s.startY),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(s=>{e&&(t=s.currentY-s.startY,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(pe.any(this._eastSash.onDidReset,this._westSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(pe.any(this._northSash.onDidReset,this._southSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,i,s){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=i?3:0,this._westSash.state=s?3:0}layout(e=this.size.height,t=this.size.width){const{height:i,width:s}=this._minSize,{height:o,width:r}=this._maxSize;e=Math.max(i,Math.min(o,e)),t=Math.max(s,Math.min(r,t));const a=new ni(t,e);ni.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}const kZe=30,NZe=24;class IZe extends G{constructor(e,t=new ni(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new aZ),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=ni.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(i=>{this._resize(new ni(i.dimension.width,i.dimension.height)),i.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var e;return(e=this._contentPosition)!=null&&e.position?U.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);return!t||!i?void 0:un(t).top+i.top-kZe}_availableVerticalSpaceBelow(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);if(!t||!i)return;const s=un(t),o=qm(t.ownerDocument.body),r=s.top+i.top+i.height;return o.height-r-NZe}_findPositionPreference(e,t){const i=Math.min(this._availableVerticalSpaceBelow(t)??1/0,e),s=Math.min(this._availableVerticalSpaceAbove(t)??1/0,e),o=Math.min(Math.max(s,i),e),r=Math.min(e,o);let a;return this._editor.getOption(60).above?a=r<=s?1:2:a=r<=i?2:1,a===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),a}_resize(e){this._resizableNode.layout(e.height,e.width)}}var EZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ND=function(n,e){return function(t,i){e(t,i,n)}},Pd;const bne=30,DZe=6;var vm;let zV=(vm=class extends IZe{get isVisibleFromKeyboard(){var e;return((e=this._renderedHover)==null?void 0:e.source)===1}get isVisible(){return this._hoverVisibleKey.get()??!1}get isFocused(){return this._hoverFocusedKey.get()??!1}constructor(e,t,i,s,o){const r=e.getOption(67)+8,a=150,l=new ni(a,r);super(e,l),this._configurationService=i,this._accessibilityService=s,this._keybindingService=o,this._hover=this._register(new oq),this._onDidResize=this._register(new $),this.onDidResize=this._onDidResize.event,this._minimumSize=l,this._hoverVisibleKey=R.hoverVisible.bindTo(t),this._hoverFocusedKey=R.hoverFocused.bindTo(t),ae(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange(()=>{this.isVisible&&this._updateMaxDimensions()})),this._register(this._editor.onDidChangeConfiguration(d=>{d.hasChanged(50)&&this._updateFont()}));const c=this._register(ld(this._resizableNode.domNode));this._register(c.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(c.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._setRenderedHover(void 0),this._editor.addContentWidget(this)}dispose(){var e;super.dispose(),(e=this._renderedHover)==null||e.dispose(),this._editor.removeContentWidget(this)}getId(){return Pd.ID}static _applyDimensions(e,t,i){const s=typeof t=="number"?`${t}px`:t,o=typeof i=="number"?`${i}px`:i;e.style.width=s,e.style.height=o}_setContentsDomNodeDimensions(e,t){const i=this._hover.contentsDomNode;return Pd._applyDimensions(i,e,t)}_setContainerDomNodeDimensions(e,t){const i=this._hover.containerDomNode;return Pd._applyDimensions(i,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,i){const s=typeof t=="number"?`${t}px`:t,o=typeof i=="number"?`${i}px`:i;e.style.maxWidth=s,e.style.maxHeight=o}_setHoverWidgetMaxDimensions(e,t){Pd._applyMaxDimensions(this._hover.contentsDomNode,e,t),Pd._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof e=="number"?`${e}px`:e),this._layoutContentWidget()}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");const t=e.width,i=e.height;this._setHoverWidgetDimensions(t,i)}_updateResizableNodeMaxDimensions(){const e=this._findMaximumRenderingWidth()??1/0,t=this._findMaximumRenderingHeight()??1/0;this._resizableNode.maxSize=new ni(e,t),this._setHoverWidgetMaxDimensions(e,t)}_resize(e){Pd._lastDimensions=new ni(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),this._onDidResize.fire()}_findAvailableSpaceVertically(){var t;const e=(t=this._renderedHover)==null?void 0:t.showAtPosition;if(e)return this._positionPreference===1?this._availableVerticalSpaceAbove(e):this._availableVerticalSpaceBelow(e)}_findMaximumRenderingHeight(){const e=this._findAvailableSpaceVertically();if(!e)return;let t=DZe;return Array.from(this._hover.contentsDomNode.children).forEach(i=>{t+=i.clientHeight}),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const e=Array.from(this._hover.contentsDomNode.children).some(t=>t.scrollWidth>t.clientWidth);return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const e=this._isHoverTextOverflowing(),t=typeof this._contentWidth>"u"?0:this._contentWidth-2;return e||this._hover.containerDomNode.clientWidth<t?qm(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(e,t){if(!this._renderedHover)return!1;if(this._renderedHover.initialMousePosX===void 0||this._renderedHover.initialMousePosY===void 0)return this._renderedHover.initialMousePosX=e,this._renderedHover.initialMousePosY=t,!1;const i=un(this.getDomNode());this._renderedHover.closestMouseDistance===void 0&&(this._renderedHover.closestMouseDistance=vne(this._renderedHover.initialMousePosX,this._renderedHover.initialMousePosY,i.left,i.top,i.width,i.height));const s=vne(e,t,i.left,i.top,i.width,i.height);return s>this._renderedHover.closestMouseDistance+4?!1:(this._renderedHover.closestMouseDistance=Math.min(this._renderedHover.closestMouseDistance,s),!0)}_setRenderedHover(e){var t;(t=this._renderedHover)==null||t.dispose(),this._renderedHover=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_updateFont(){const{fontSize:e,lineHeight:t}=this._editor.getOption(50),i=this._hover.contentsDomNode;i.style.fontSize=`${e}px`,i.style.lineHeight=`${t/e}`,Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(o=>this._editor.applyFontInfo(o))}_updateContent(e){const t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const e=Math.max(this._editor.getLayoutInfo().height/4,250,Pd._lastDimensions.height),t=Math.max(this._editor.getLayoutInfo().width*.66,500,Pd._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e){this._setRenderedHover(e),this._updateFont(),this._updateContent(e.domNode),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){return this._renderedHover?{position:this._renderedHover.showAtPosition,secondaryPosition:this._renderedHover.showAtSecondaryPosition,positionAffinity:this._renderedHover.shouldAppearBeforeContent?3:void 0,preference:[this._positionPreference??1]}:null}show(e){var r;if(!this._editor||!this._editor.hasModel())return;this._render(e);const t=Ph(this._hover.containerDomNode),i=e.showAtPosition;this._positionPreference=this._findPositionPreference(t,i)??1,this.onContentsChanged(),e.shouldFocus&&this._hover.containerDomNode.focus(),this._onDidResize.fire();const o=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&jfe(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),((r=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:r.getAriaLabel())??"");o&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+o)}hide(){if(!this._renderedHover)return;const e=this._renderedHover.shouldFocus||this._hoverFocusedKey.get();this._setRenderedHover(void 0),this._resizableNode.maxSize=new ni(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){const e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}setMinimumDimensions(e){this._minimumSize=new ni(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const e=typeof this._contentWidth>"u"?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new ni(e,this._minimumSize.height)}onContentsChanged(){var s;this._removeConstraintsRenderNormally();const e=this._hover.containerDomNode;let t=Ph(e),i=xr(e);if(this._resizableNode.layout(t,i),this._setHoverWidgetDimensions(i,t),t=Ph(e),i=xr(e),this._contentWidth=i,this._updateMinimumWidth(),this._resizableNode.layout(t,i),(s=this._renderedHover)!=null&&s.showAtPosition){const o=Ph(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(o,this._renderedHover.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-bne})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+bne})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}},Pd=vm,vm.ID="editor.contrib.resizableContentHoverWidget",vm._lastDimensions=new ni(0,0),vm);zV=Pd=EZe([ND(1,qe),ND(2,_t),ND(3,Yr),ND(4,ei)],zV);function vne(n,e,t,i,s,o){const r=t+s/2,a=i+o/2,l=Math.max(Math.abs(n-r)-s/2,0),c=Math.max(Math.abs(e-a)-o/2,0);return Math.sqrt(l*l+c*c)}class JM{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(t.type!==1&&!t.supportsMarkerHover)return[];const i=e.getModel(),s=t.range.startLineNumber;if(s>i.getLineCount())return[];const o=i.getLineMaxColumn(s);return e.getLineDecorations(s).filter(r=>{if(r.options.isWholeLine)return!0;const a=r.range.startLineNumber===s?r.range.startColumn:1,l=r.range.endLineNumber===s?r.range.endColumn:o;if(r.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return ya.EMPTY;const i=JM._getLineDecorations(this._editor,t);return ya.merge(this._participants.map(s=>s.computeAsync?s.computeAsync(t,i,e):ya.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=JM._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return Yl(t)}}class mbe{constructor(e,t,i){this.anchor=e,this.hoverParts=t,this.isComplete=i}filter(e){const t=this.hoverParts.filter(i=>i.isValidForHoverAnchor(e));return t.length===this.hoverParts.length?this:new TZe(this,this.anchor,t,this.isComplete)}}class TZe extends mbe{constructor(e,t,i,s){super(t,i,s),this.original=e}filter(e){return this.original.filter(e)}}var RZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},MZe=function(n,e){return function(t,i){e(t,i,n)}};const wne=ge;let eP=class extends G{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this.actions=[],this._hasContent=!1,this.hoverElement=wne("div.hover-row.status-bar"),this.hoverElement.tabIndex=0,this.actionsElement=ae(this.hoverElement,wne("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;this._hasContent=!0;const s=this._register(G4.render(this.actionsElement,e,i));return this.actions.push(s),s}append(e){const t=ae(this.actionsElement,e);return this._hasContent=!0,t}};eP=RZe([MZe(0,ei)],eP);class PZe{constructor(e,t,i){this.provider=e,this.hover=t,this.ordinal=i}}async function AZe(n,e,t,i,s){const o=await Promise.resolve(n.provideHover(t,i,s)).catch(fn);if(!(!o||!OZe(o)))return new PZe(n,o,e)}function lZ(n,e,t,i,s=!1){const r=n.ordered(e,s).map((a,l)=>AZe(a,l,e,t,i));return ya.fromPromises(r).coalesce()}function pbe(n,e,t,i,s=!1){return lZ(n,e,t,i,s).map(o=>o.hover).toPromise()}ur("_executeHoverProvider",(n,e,t)=>{const i=n.get(xe);return pbe(i.hoverProvider,e,t,ht.None)});ur("_executeHoverProvider_recursive",(n,e,t)=>{const i=n.get(xe);return pbe(i.hoverProvider,e,t,ht.None,!0)});function OZe(n){const e=typeof n.range<"u",t=typeof n.contents<"u"&&n.contents&&n.contents.length>0;return e&&t}var FZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ap=function(n,e){return function(t,i){e(t,i,n)}};const kw=ge,BZe=Di("hover-increase-verbosity",he.add,_("increaseHoverVerbosity","Icon for increaseing hover verbosity.")),WZe=Di("hover-decrease-verbosity",he.remove,_("decreaseHoverVerbosity","Icon for decreasing hover verbosity."));class Wl{constructor(e,t,i,s,o,r=void 0){this.owner=e,this.range=t,this.contents=i,this.isBeforeContent=s,this.ordinal=o,this.source=r}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}class _be{constructor(e,t,i){this.hover=e,this.hoverProvider=t,this.hoverPosition=i}supportsVerbosityAction(e){switch(e){case Er.Increase:return this.hover.canIncreaseVerbosity??!1;case Er.Decrease:return this.hover.canDecreaseVerbosity??!1}}}let MN=class{constructor(e,t,i,s,o,r,a,l){this._editor=e,this._languageService=t,this._openerService=i,this._configurationService=s,this._languageFeaturesService=o,this._keybindingService=r,this._hoverService=a,this._commandService=l,this.hoverOrdinal=3}createLoadingMessage(e){return new Wl(this,e.range,[new Us().appendText(_("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),s=e.range.startLineNumber,o=i.getLineMaxColumn(s),r=[];let a=1e3;const l=i.getLineLength(s),c=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),d=this._editor.getOption(118),u=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:c});let h=!1;d>=0&&l>d&&e.range.startColumn>=d&&(h=!0,r.push(new Wl(this,e.range,[{value:_("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,a++))),!h&&typeof u=="number"&&l>=u&&r.push(new Wl(this,e.range,[{value:_("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,a++));let f=!1;for(const m of t){const p=m.range.startLineNumber===s?m.range.startColumn:1,b=m.range.endLineNumber===s?m.range.endColumn:o,v=m.options.hoverMessage;if(!v||RC(v))continue;m.options.beforeContentClassName&&(f=!0);const w=new D(e.range.startLineNumber,p,e.range.startLineNumber,b);r.push(new Wl(this,w,sK(v),f,a++))}return r}computeAsync(e,t,i){if(!this._editor.hasModel()||e.type!==1)return ya.EMPTY;const s=this._editor.getModel(),o=this._languageFeaturesService.hoverProvider;return o.has(s)?this._getMarkdownHovers(o,s,e,i):ya.EMPTY}_getMarkdownHovers(e,t,i,s){const o=i.range.getStartPosition();return lZ(e,t,o,s).filter(l=>!RC(l.hover.contents)).map(l=>{const c=l.hover.range?D.lift(l.hover.range):i.range,d=new _be(l.hover,l.provider,o);return new Wl(this,c,l.hover.contents,!1,l.ordinal,d)})}renderHoverParts(e,t){return this._renderedHoverParts=new HZe(t,e.fragment,this,this._editor,this._languageService,this._openerService,this._commandService,this._keybindingService,this._hoverService,this._configurationService,e.onContentsChanged),this._renderedHoverParts}updateMarkdownHoverVerbosityLevel(e,t,i){var s;return Promise.resolve((s=this._renderedHoverParts)==null?void 0:s.updateMarkdownHoverPartVerbosityLevel(e,t,i))}};MN=FZe([Ap(1,ji),Ap(2,hr),Ap(3,_t),Ap(4,xe),Ap(5,ei),Ap(6,ju),Ap(7,Ci)],MN);class ID{constructor(e,t,i){this.hoverPart=e,this.hoverElement=t,this.disposables=i}dispose(){this.disposables.dispose()}}class HZe{constructor(e,t,i,s,o,r,a,l,c,d,u){this._hoverParticipant=i,this._editor=s,this._languageService=o,this._openerService=r,this._commandService=a,this._keybindingService=l,this._hoverService=c,this._configurationService=d,this._onFinishedRendering=u,this._ongoingHoverOperations=new Map,this._disposables=new ne,this.renderedHoverParts=this._renderHoverParts(e,t,this._onFinishedRendering),this._disposables.add(Pe(()=>{this.renderedHoverParts.forEach(h=>{h.dispose()}),this._ongoingHoverOperations.forEach(h=>{h.tokenSource.dispose(!0)})}))}_renderHoverParts(e,t,i){return e.sort(Io(s=>s.ordinal,Kl)),e.map(s=>{const o=this._renderHoverPart(s,i);return t.appendChild(o.hoverElement),o})}_renderHoverPart(e,t){const i=this._renderMarkdownHover(e,t),s=i.hoverElement,o=e.source,r=new ne;if(r.add(i),!o)return new ID(e,s,r);const a=o.supportsVerbosityAction(Er.Increase),l=o.supportsVerbosityAction(Er.Decrease);if(!a&&!l)return new ID(e,s,r);const c=kw("div.verbosity-actions");return s.prepend(c),r.add(this._renderHoverExpansionAction(c,Er.Increase,a)),r.add(this._renderHoverExpansionAction(c,Er.Decrease,l)),new ID(e,s,r)}_renderMarkdownHover(e,t){return bbe(this._editor,e,this._languageService,this._openerService,t)}_renderHoverExpansionAction(e,t,i){const s=new ne,o=t===Er.Increase,r=ae(e,kw(Ke.asCSSSelector(o?BZe:WZe)));r.tabIndex=0;const a=new EC("mouse",!1,{target:e,position:{hoverPosition:0}},this._configurationService,this._hoverService);if(s.add(this._hoverService.setupManagedHover(a,r,jZe(this._keybindingService,t))),!i)return r.classList.add("disabled"),s;r.classList.add("enabled");const l=()=>this._commandService.executeCommand(t===Er.Increase?PF:AF);return s.add(new zfe(r,l)),s.add(new Ufe(r,l,[3,10])),s}async updateMarkdownHoverPartVerbosityLevel(e,t,i=!0){const s=this._editor.getModel();if(!s)return;const o=this._getRenderedHoverPartAtIndex(t),r=o==null?void 0:o.hoverPart.source;if(!o||!(r!=null&&r.supportsVerbosityAction(e)))return;const a=await this._fetchHover(r,s,e);if(!a)return;const l=new _be(a,r.hoverProvider,r.hoverPosition),c=o.hoverPart,d=new Wl(this._hoverParticipant,c.range,a.contents,c.isBeforeContent,c.ordinal,l),u=this._renderHoverPart(d,this._onFinishedRendering);return this._replaceRenderedHoverPartAtIndex(t,u,d),i&&this._focusOnHoverPartWithIndex(t),{hoverPart:d,hoverElement:u.hoverElement}}async _fetchHover(e,t,i){let s=i===Er.Increase?1:-1;const o=e.hoverProvider,r=this._ongoingHoverOperations.get(o);r&&(r.tokenSource.cancel(),s+=r.verbosityDelta);const a=new Gi;this._ongoingHoverOperations.set(o,{verbosityDelta:s,tokenSource:a});const l={verbosityRequest:{verbosityDelta:s,previousHover:e.hover}};let c;try{c=await Promise.resolve(o.provideHover(t,e.hoverPosition,a.token,l))}catch(d){fn(d)}return a.dispose(),this._ongoingHoverOperations.delete(o),c}_replaceRenderedHoverPartAtIndex(e,t,i){if(e>=this.renderedHoverParts.length||e<0)return;const s=this.renderedHoverParts[e],o=s.hoverElement,r=t.hoverElement,a=Array.from(r.children);o.replaceChildren(...a);const l=new ID(i,o,t.disposables);o.focus(),s.dispose(),this.renderedHoverParts[e]=l}_focusOnHoverPartWithIndex(e){this.renderedHoverParts[e].hoverElement.focus()}_getRenderedHoverPartAtIndex(e){return this.renderedHoverParts[e]}dispose(){this._disposables.dispose()}}function VZe(n,e,t,i,s){e.sort(Io(r=>r.ordinal,Kl));const o=[];for(const r of e)o.push(bbe(t,r,i,s,n.onContentsChanged));return new Mv(o)}function bbe(n,e,t,i,s){const o=new ne,r=kw("div.hover-row"),a=kw("div.hover-row-contents");r.appendChild(a);const l=e.contents;for(const d of l){if(RC(d))continue;const u=kw("div.markdown-hover"),h=ae(u,kw("div.hover-contents")),f=o.add(new wf({editor:n},t,i));o.add(f.onDidRenderAsync(()=>{h.className="hover-contents code-hover-contents",s()}));const m=o.add(f.render(d));h.appendChild(m.element),a.appendChild(u)}return{hoverPart:e,hoverElement:r,dispose(){o.dispose()}}}function jZe(n,e){switch(e){case Er.Increase:{const t=n.lookupKeybinding(PF);return t?_("increaseVerbosityWithKb","Increase Hover Verbosity ({0})",t.getLabel()):_("increaseVerbosity","Increase Hover Verbosity")}case Er.Decrease:{const t=n.lookupKeybinding(AF);return t?_("decreaseVerbosityWithKb","Decrease Hover Verbosity ({0})",t.getLabel()):_("decreaseVerbosity","Decrease Hover Verbosity")}}}function UV(n,e){return!!n[e]}class WB{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=UV(e.event,t.triggerModifier),this.hasSideBySideModifier=UV(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class yne{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=UV(e,t.triggerModifier)}}class ED{constructor(e,t,i,s){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=s}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function Cne(n){return n==="altKey"?Lt?new ED(57,"metaKey",6,"altKey"):new ED(5,"ctrlKey",6,"altKey"):Lt?new ED(6,"altKey",57,"metaKey"):new ED(6,"altKey",5,"ctrlKey")}class FF extends G{constructor(e,t){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new $),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new $),this.onExecute=this._onExecute.event,this._onCancel=this._register(new $),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=(t==null?void 0:t.extractLineNumberFromMouseEvent)??(i=>i.target.position?i.target.position.lineNumber:0),this._opts=Cne(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(i=>{if(i.hasChanged(78)){const s=Cne(this._editor.getOption(78));if(this._opts.equals(s))return;this._opts=s,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(i=>this._onEditorMouseMove(new WB(i,this._opts)))),this._register(this._editor.onMouseDown(i=>this._onEditorMouseDown(new WB(i,this._opts)))),this._register(this._editor.onMouseUp(i=>this._onEditorMouseUp(new WB(i,this._opts)))),this._register(this._editor.onKeyDown(i=>this._onEditorKeyDown(new yne(i,this._opts)))),this._register(this._editor.onKeyUp(i=>this._onEditorKeyUp(new yne(i,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(i=>this._onDidChangeCursorSelection(i))),this._register(this._editor.onDidChangeModel(i=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(i=>{(i.scrollTopChanged||i.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){const t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}class vbe{constructor(e,t){this.range=e,this.direction=t}}class cZ{constructor(e,t,i){this.hint=e,this.anchor=t,this.provider=i,this._isResolved=!1}with(e){const t=new cZ(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}async resolve(e){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return await this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),await this._currentResolve}}async _doResolve(e){try{const t=await Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t==null?void 0:t.tooltip)??this.hint.tooltip,this.hint.label=(t==null?void 0:t.label)??this.hint.label,this.hint.textEdits=(t==null?void 0:t.textEdits)??this.hint.textEdits,this._isResolved=!0}catch(t){fn(t),this._isResolved=!1}}}const zw=class zw{static async create(e,t,i,s){const o=[],r=e.ordered(t).reverse().map(a=>i.map(async l=>{try{const c=await a.provideInlayHints(t,l,s);(c!=null&&c.hints.length||a.onDidChangeInlayHints)&&o.push([c??zw._emptyInlayHintList,a])}catch(c){fn(c)}}));if(await Promise.all(r.flat()),s.isCancellationRequested||t.isDisposed())throw new Xl;return new zw(i,o,t)}constructor(e,t,i){this._disposables=new ne,this.ranges=e,this.provider=new Set;const s=[];for(const[o,r]of t){this._disposables.add(o),this.provider.add(r);for(const a of o.hints){const l=i.validatePosition(a.position);let c="before";const d=zw._getRangeAtPosition(i,l);let u;d.getStartPosition().isBefore(l)?(u=D.fromPositions(d.getStartPosition(),l),c="after"):(u=D.fromPositions(l,d.getEndPosition()),c="before"),s.push(new cZ(a,new vbe(u,c),r))}}this.items=s.sort((o,r)=>U.compare(o.hint.position,r.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const i=t.lineNumber,s=e.getWordAtPosition(t);if(s)return new D(i,s.startColumn,i,s.endColumn);e.tokenization.tokenizeIfCheap(i);const o=e.tokenization.getLineTokens(i),r=t.column-1,a=o.findTokenIndexAtOffset(r);let l=o.getStartOffset(a),c=o.getEndOffset(a);return c-l===1&&(l===r&&a>1?(l=o.getStartOffset(a-1),c=o.getEndOffset(a-1)):c===r&&a<o.getCount()-1&&(l=o.getStartOffset(a+1),c=o.getEndOffset(a+1))),new D(i,l+1,i,c+1)}};zw._emptyInlayHintList=Object.freeze({dispose(){},hints:[]});let tP=zw;function zZe(n){return Be.from({scheme:tt.command,path:n.id,query:n.arguments&&encodeURIComponent(JSON.stringify(n.arguments))}).toString()}var UZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ju=function(n,e){return function(t,i){e(t,i,n)}};let nc=class extends bN{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f){super(e,{...s.getRawOptions(),overflowWidgetsDomNode:s.getOverflowWidgetsDomNode()},i,o,r,a,l,c,d,u,h,f),this._parentEditor=s,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(s.onDidChangeConfiguration(m=>this._onParentConfigurationChanged(m)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){f4(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};nc=UZe([Ju(4,Ae),Ju(5,Ut),Ju(6,Ci),Ju(7,qe),Ju(8,Vn),Ju(9,wn),Ju(10,Yr),Ju(11,Yi),Ju(12,xe)],nc);const Sne=new oe(new Wt(0,122,204)),$Ze={showArrow:!0,showFrame:!0,className:"",frameColor:Sne,arrowColor:Sne,keepEditorSelection:!1},KZe="vs.editor.contrib.zoneWidget";class qZe{constructor(e,t,i,s,o,r,a,l){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=i,this.heightInLines=s,this.showInHiddenAreas=a,this.ordinal=l,this._onDomNodeTop=o,this._onComputedHeight=r}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class GZe{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}const KA=class KA{constructor(e){this._editor=e,this._ruleName=KA._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),eW(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){eW(this._ruleName),h2(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:D.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}};KA._IdGenerator=new gq(".arrow-decoration-");let $V=KA;class ZZe{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new ne,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=vh(t),f4(this.options,$Ze,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(i=>{const s=this._getWidth(i);this.domNode.style.width=s+"px",this.domNode.style.left=this._getLeft(i)+"px",this._onWidth(s)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new $V(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){var t;if(this.domNode.style.height=`${e}px`,this.container){const i=e-this._decoratingElementsHeight();this.container.style.height=`${i}px`;const s=this.editor.getLayoutInfo();this._doLayout(i,this._getWidth(s))}(t=this._resizeSash)==null||t.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){const i=D.isIRange(e)?D.lift(e):D.fromPositions(e);this._isShowing=!0,this._showImpl(i,t),this._isShowing=!1,this._positionMarkerId.set([{range:i,options:rt.EMPTY}])}hide(){var e;this._viewZone&&(this.editor.changeViewZones(t=>{this._viewZone&&t.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(e=this._arrow)==null||e.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){const e=this.editor.getOption(67);let t=0;if(this.options.showArrow){const i=Math.round(e/3);t+=2*i}if(this.options.showFrame){const i=Math.round(e/9);t+=2*i}return t}_showImpl(e,t){const i=e.getStartPosition(),s=this.editor.getLayoutInfo(),o=this._getWidth(s);this.domNode.style.width=`${o}px`,this.domNode.style.left=this._getLeft(s)+"px";const r=document.createElement("div");r.style.overflow="hidden";const a=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){const h=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,h)}let l=0,c=0;if(this._arrow&&this.options.showArrow&&(l=Math.round(a/3),this._arrow.height=l,this._arrow.show(i)),this.options.showFrame&&(c=Math.round(a/9)),this.editor.changeViewZones(h=>{this._viewZone&&h.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new qZe(r,i.lineNumber,i.column,t,f=>this._onViewZoneTop(f),f=>this._onViewZoneHeight(f),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=h.addZone(this._viewZone),this._overlayWidget=new GZe(KZe+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const h=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=h+"px",this.container.style.borderBottomWidth=h+"px"}const d=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=l+"px",this.container.style.height=d+"px",this.container.style.overflow="hidden"),this._doLayout(d,o),this.options.keepEditorSelection||this.editor.setSelection(e);const u=this.editor.getModel();if(u){const h=u.validateRange(new D(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(h,h.startLineNumber===u.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Hs(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const i=(t.currentY-e.startY)/this.editor.getOption(67),s=i<0?Math.ceil(i):Math.floor(i),o=e.heightInLines+s;o>5&&o<35&&this._relayout(o)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}var wbe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ybe=function(n,e){return function(t,i){e(t,i,n)}};const Cbe=kt("IPeekViewService");Tt(Cbe,class{constructor(){this._widgets=new Map}addExclusiveWidget(n,e){const t=this._widgets.get(n);t&&(t.listener.dispose(),t.widget.dispose());const i=()=>{const s=this._widgets.get(n);s&&s.widget===e&&(s.listener.dispose(),this._widgets.delete(n))};this._widgets.set(n,{widget:e,listener:e.onDidClose(i)})}},1);var lr;(function(n){n.inPeekEditor=new we("inReferenceSearchEditor",!0,_("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),n.notInPeekEditor=n.inPeekEditor.toNegated()})(lr||(lr={}));var Xy;let iP=(Xy=class{constructor(e,t){e instanceof nc&&lr.inPeekEditor.bindTo(t)}dispose(){}},Xy.ID="editor.contrib.referenceController",Xy);iP=wbe([ybe(1,qe)],iP);Ot(iP.ID,iP,0);function YZe(n){const e=n.get(Ut).getFocusedCodeEditor();return e instanceof nc?e.getParentEditor():e}const XZe={headerBackgroundColor:oe.white,primaryHeadingColor:oe.fromHex("#333333"),secondaryHeadingColor:oe.fromHex("#6c6c6cb3")};let nP=class extends ZZe{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new $,this.onDidClose=this._onDidClose.event,f4(this.options,XZe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=ge(".head"),this._bodyElement=ge(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=ge(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),Ji(this._titleElement,"click",o=>this._onTitleClick(o))),ae(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=ge("span.filename"),this._secondaryHeading=ge("span.dirname"),this._metaHeading=ge("span.meta"),ae(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=ge(".peekview-actions");ae(this._headElement,i);const s=this._getActionBarOptions();this._actionbarWidget=new Ea(i,s),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new Or("peekview.close",_("label.close","Close"),Ke.asClassName(he.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:Ege.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:ws(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Dr(this._metaHeading)):wo(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const i=Math.ceil(this.editor.getOption(67)*1.2),s=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(s,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};nP=wbe([ybe(2,Ae)],nP);const QZe=P("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:oe.black,hcLight:oe.white},_("peekViewTitleBackground","Background color of the peek view title area.")),Sbe=P("peekViewTitleLabel.foreground",{dark:oe.white,light:oe.black,hcDark:oe.white,hcLight:Vu},_("peekViewTitleForeground","Color of the peek view title.")),xbe=P("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},_("peekViewTitleInfoForeground","Color of the peek view title info.")),JZe=P("peekView.border",{dark:Du,light:Du,hcDark:At,hcLight:At},_("peekViewBorder","Color of the peek view borders and arrow.")),eYe=P("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:oe.black,hcLight:oe.white},_("peekViewResultsBackground","Background color of the peek view result list."));P("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:oe.white,hcLight:Vu},_("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));P("peekViewResult.fileForeground",{dark:oe.white,light:"#1E1E1E",hcDark:oe.white,hcLight:Vu},_("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));P("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},_("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));P("peekViewResult.selectionForeground",{dark:oe.white,light:"#6C6C6C",hcDark:oe.white,hcLight:Vu},_("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const Lbe=P("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:oe.black,hcLight:oe.white},_("peekViewEditorBackground","Background color of the peek view editor."));P("peekViewEditorGutter.background",Lbe,_("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));P("peekViewEditorStickyScroll.background",Lbe,_("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor."));P("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},_("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));P("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},_("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));P("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:Ai,hcLight:Ai},_("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));class sp{constructor(e,t,i,s){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=s,this.id=UW.nextId()}get uri(){return this.link.uri}get range(){return this._range??this.link.targetSelectionRange??this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var t;const e=(t=this.parent.getPreview(this))==null?void 0:t.preview(this.range);return e?_({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",e.value,ml(this.uri),this.range.startLineNumber,this.range.startColumn):_("aria.oneReference","in {0} on line {1} at column {2}",ml(this.uri),this.range.startLineNumber,this.range.startColumn)}}class tYe{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:s,startColumn:o,endLineNumber:r,endColumn:a}=e,l=i.getWordUntilPosition({lineNumber:s,column:o-t}),c=new D(s,l.startColumn,s,o),d=new D(r,a,r,1073741824),u=i.getValueInRange(c).replace(/^\s+/,""),h=i.getValueInRange(e),f=i.getValueInRange(d).replace(/\s+$/,"");return{value:u+h+f,highlight:{start:u.length,end:u.length+h.length}}}}class PN{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new cs}dispose(){gi(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?_("aria.fileReferences.1","1 symbol in {0}, full path {1}",ml(this.uri),this.uri.fsPath):_("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,ml(this.uri),this.uri.fsPath)}async resolve(e){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const i=await e.createModelReference(t.uri);this._previews.set(t.uri,new tYe(i))}catch(i){et(i)}return this}}class Wr{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new $,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;e.sort(Wr._compareReferences);let s;for(const o of e)if((!s||!Oi.isEqual(s.uri,o.uri,!0))&&(s=new PN(this,o.uri),this.groups.push(s)),s.children.length===0||Wr._compareReferences(o,s.children[s.children.length-1])!==0){const r=new sp(i===o,s,o,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(r),s.children.push(r)}}dispose(){gi(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Wr(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?_("aria.result.0","No results found"):this.references.length===1?_("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?_("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):_("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:i}=e;let s=i.children.indexOf(e);const o=i.children.length,r=i.parent.groups.length;return r===1||t&&s+1<o||!t&&s>0?(t?s=(s+1)%o:s=(s+o-1)%o,i.children[s]):(s=i.parent.groups.indexOf(i),t?(s=(s+1)%r,i.parent.groups[s].children[0]):(s=(s+r-1)%r,i.parent.groups[s].children[i.parent.groups[s].children.length-1]))}nearestReference(e,t){const i=this.references.map((s,o)=>({idx:o,prefixLen:Um(s.uri.toString(),e.toString()),offsetDist:Math.abs(s.range.startLineNumber-t.lineNumber)*100+Math.abs(s.range.startColumn-t.column)})).sort((s,o)=>s.prefixLen>o.prefixLen?-1:s.prefixLen<o.prefixLen?1:s.offsetDist<o.offsetDist?-1:s.offsetDist>o.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&D.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Oi.compare(e.uri,t.uri)||D.compareRangesUsingStarts(e.range,t.range)}}var BF=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},WF=function(n,e){return function(t,i){e(t,i,n)}},KV;let qV=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Wr||e instanceof PN}getChildren(e){if(e instanceof Wr)return e.groups;if(e instanceof PN)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};qV=BF([WF(0,dr)],qV);class iYe{getHeight(){return 23}getTemplateId(e){return e instanceof PN?sP.id:oP.id}}let GV=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof sp){const i=(t=e.parent.getPreview(e))==null?void 0:t.preview(e.range);if(i)return i.value}return ml(e.uri)}};GV=BF([WF(0,ei)],GV);class nYe{getId(e){return e instanceof sp?e.id:e.uri}}let ZV=class extends G{constructor(e,t){super(),this._labelService=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new fM(i,{supportHighlights:!0})),this.badge=new z6(ae(i,ge(".count")),{},Nge),e.appendChild(i)}set(e,t){const i=Y4(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(i,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const s=e.children.length;this.badge.setCount(s),s>1?this.badge.setTitleFormat(_("referencesCount","{0} references",s)):this.badge.setTitleFormat(_("referenceCount","{0} reference",s))}};ZV=BF([WF(1,PC)],ZV);var mb;let sP=(mb=class{constructor(e){this._instantiationService=e,this.templateId=KV.id}renderTemplate(e){return this._instantiationService.createInstance(ZV,e)}renderElement(e,t,i){i.set(e.element,DI(e.filterData))}disposeTemplate(e){e.dispose()}},KV=mb,mb.id="FileReferencesRenderer",mb);sP=KV=BF([WF(0,Ae)],sP);class sYe extends G{constructor(e){super(),this.label=this._register(new um(e))}set(e,t){var s;const i=(s=e.parent.getPreview(e))==null?void 0:s.preview(e.range);if(!i||!i.value)this.label.set(`${ml(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:o,highlight:r}=i;t&&!ed.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(o,DI(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(o,[r]))}}}const qA=class qA{constructor(){this.templateId=qA.id}renderTemplate(e){return new sYe(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(e){e.dispose()}};qA.id="OneReferenceRenderer";let oP=qA;class oYe{getWidgetAriaLabel(){return _("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var rYe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},E0=function(n,e){return function(t,i){e(t,i,n)}};const GA=class GA{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new ne,this._callOnModelChange=new ne,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],i=[];for(let s=0,o=e.children.length;s<o;s++){const r=e.children[s];this._decorationIgnoreSet.has(r.id)||r.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:r.range,options:GA.DecorationOptions}),i.push(s))}this._editor.changeDecorations(s=>{const o=s.deltaDecorations([],t);for(let r=0;r<o.length;r++)this._decorations.set(o[r],e.children[i[r]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[i,s]of this._decorations){const o=t.getDecorationRange(i);if(!o)continue;let r=!1;if(!D.equalsRange(o,s.range)){if(D.spansMultipleLines(o))r=!0;else{const a=s.range.endColumn-s.range.startColumn,l=o.endColumn-o.startColumn;a!==l&&(r=!0)}r?(this._decorationIgnoreSet.add(s.id),e.push(i)):s.range=o}}for(let i=0,s=e.length;i<s;i++)this._decorations.delete(e[i]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}};GA.DecorationOptions=rt.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});let YV=GA;class aYe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const s=JSON.parse(e);t=s.ratio,i=s.heightInLines}catch{}return{ratio:t||.7,heightInLines:i||18}}}class lYe extends X6{}let XV=class extends nP{constructor(e,t,i,s,o,r,a,l,c){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=o,this._instantiationService=r,this._peekViewService=a,this._uriLabel=l,this._keybindingService=c,this._disposeOnNewModel=new ne,this._callOnDispose=new ne,this._onDidSelectReference=new $,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new ni(0,0),this._isClosing=!1,this._applyTheme(s.getColorTheme()),this._callOnDispose.add(s.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}get isClosing(){return this._isClosing}dispose(){this._isClosing=!0,this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),gi(this._preview),gi(this._previewNotAvailableMessage),gi(this._tree),gi(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(JZe)||oe.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(QZe)||oe.transparent,primaryHeadingColor:e.getColor(Sbe),secondaryHeadingColor:e.getColor(xbe)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=ae(e,ge("div.messages")),wo(this._messageContainer),this._splitView=new vme(e,{orientation:1}),this._previewContainer=ae(e,ge("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(nc,this._previewContainer,t,{},this.editor),wo(this._previewContainer),this._previewNotAvailableMessage=this._instantiationService.createInstance(zc,_("missingPreviewMessage","no preview available"),Do,zc.DEFAULT_CREATION_OPTIONS,null),this._treeContainer=ae(e,ge("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new oYe,keyboardNavigationLabelProvider:this._instantiationService.createInstance(GV),identityProvider:new nYe,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:eYe}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Ji(this._treeContainer,"keydown",o=>{o.equals(9)&&(this._keybindingService.dispatchEvent(o,o.target),o.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(lYe,"ReferencesWidget",this._treeContainer,new iYe,[this._instantiationService.createInstance(sP),this._instantiationService.createInstance(oP)],this._instantiationService.createInstance(qV),i),this._splitView.addView({onDidChange:pe.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:o=>{this._preview.layout({height:this._dim.height,width:o})}},rM.Distribute),this._splitView.addView({onDidChange:pe.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:o=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${o}px`,this._tree.layout(this._dim.height,o)}},rM.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const s=(o,r)=>{o instanceof sp&&(r==="show"&&this._revealReference(o,!1),this._onDidSelectReference.fire({element:o,kind:r,source:"tree"}))};this._disposables.add(this._tree.onDidOpen(o=>{o.sideBySide?s(o.element,"side"):o.editorOptions.pinned?s(o.element,"goto"):s(o.element,"show")})),wo(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new ni(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=_("noResults","No results"),Dr(this._messageContainer),Promise.resolve(void 0)):(wo(this._messageContainer),this._decorationsManager=new YV(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:i}=e;if(t.detail!==2)return;const s=this._getFocusedReference();s&&this._onDidSelectReference.fire({element:{uri:s.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Dr(this._treeContainer),Dr(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof sp)return e;if(e instanceof PN&&e.children.length>0)return e.children[0]}async revealReference(e){await this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}async _revealReference(e,t){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==tt.inMemory?this.setTitle(p5e(e.uri),this._uriLabel.getUriLabel(Y4(e.uri))):this.setTitle(_("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),await this._tree.expand(e.parent),this._tree.reveal(e));const s=await i;if(!this._model){s.dispose();return}gi(this._previewModelReference);const o=s.object;if(o){const r=this._preview.getModel()===o.textEditorModel?0:1,a=D.lift(e.range).collapseToStart();this._previewModelReference=s,this._preview.setModel(o.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,r)}else this._preview.setModel(this._previewNotAvailableMessage),s.dispose()}};XV=rYe([E0(3,Vn),E0(4,dr),E0(5,Ae),E0(6,Cbe),E0(7,PC),E0(8,ei)],XV);var cYe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},D0=function(n,e){return function(t,i){e(t,i,n)}},ZT;const a0=new we("referenceSearchVisible",!1,_("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));var pb;let Pv=(pb=class{static get(e){return e.getContribution(ZT.ID)}constructor(e,t,i,s,o,r,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=s,this._notificationService=o,this._instantiationService=r,this._storageService=a,this._configurationService=l,this._disposables=new ne,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=a0.bindTo(i)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)==null||e.dispose(),(t=this._model)==null||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let s;if(this._widget&&(s=this._widget.position),this.closeWidget(),s&&e.containsPosition(s))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const o="peekViewLayout",r=aYe.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(XV,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(_("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget?(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget.isClosing||this.closeWidget(),this._widget=void 0):this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{const{element:c,kind:d}=l;if(c)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":i?this._gotoReference(c,!0):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)==null||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(_("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const d=this._editor.getModel().uri,u=new U(e.startLineNumber,e.startColumn),h=this._model.nearestReference(d,u);if(h)return this._widget.setSelection(h).then(()=>{this._widget&&this._editor.getOption(87)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(e){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const s=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();await this._widget.setSelection(s),await this._gotoReference(s,!1),o?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()}async revealReference(e){!this._editor.hasModel()||!this._model||!this._widget||await this._widget.revealReference(e)}closeWidget(e=!0){var t,i;(t=this._widget)==null||t.dispose(),(i=this._model)==null||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var s;(s=this._widget)==null||s.hide(),this._ignoreModelChangeEvent=!0;const i=D.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:i,selectionSource:"code.jump",pinned:t}},this._editor).then(o=>{if(this._ignoreModelChangeEvent=!1,!o||!this._widget){this.closeWidget();return}if(this._editor===o)this._widget.show(i),this._widget.focusOnReferenceTree();else{const r=ZT.get(o),a=this._model.clone();this.closeWidget(),o.focus(),r==null||r.toggleWidget(i,Xn(l=>Promise.resolve(a)),this._peekMode??!1)}},o=>{this._ignoreModelChangeEvent=!1,et(o)})}openReference(e,t,i){t||this.closeWidget();const{uri:s,range:o}=e;this._editorService.openCodeEditor({resource:s,options:{selection:o,selectionSource:"code.jump",pinned:i}},this._editor,t)}},ZT=pb,pb.ID="editor.contrib.referencesController",pb);Pv=ZT=cYe([D0(2,qe),D0(3,Ut),D0(4,wn),D0(5,Ae),D0(6,ac),D0(7,_t)],Pv);function l0(n,e){const t=YZe(n);if(!t)return;const i=Pv.get(t);i&&e(i)}Ao.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Mn(2089,60),when:se.or(a0,lr.inPeekEditor),handler(n){l0(n,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Ao.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:se.or(a0,lr.inPeekEditor),handler(n){l0(n,e=>{e.goToNextOrPreviousReference(!0)})}});Ao.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:se.or(a0,lr.inPeekEditor),handler(n){l0(n,e=>{e.goToNextOrPreviousReference(!1)})}});Mt.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Mt.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Mt.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Mt.registerCommand("closeReferenceSearch",n=>l0(n,e=>e.closeWidget()));Ao.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:se.and(lr.inPeekEditor,se.not("config.editor.stablePeek"))});Ao.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:se.and(a0,se.not("config.editor.stablePeek"),se.or(R.editorTextFocus,Eme.negate()))});Ao.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:se.and(a0,Rme,Xq.negate(),Qq.negate()),handler(n){var i;const t=(i=n.get(Sl).lastFocusedList)==null?void 0:i.getFocus();Array.isArray(t)&&t[0]instanceof sp&&l0(n,s=>s.revealReference(t[0]))}});Ao.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:se.and(a0,Rme,Xq.negate(),Qq.negate()),handler(n){var i;const t=(i=n.get(Sl).lastFocusedList)==null?void 0:i.getFocus();Array.isArray(t)&&t[0]instanceof sp&&l0(n,s=>s.openReference(t[0],!0,!0))}});Mt.registerCommand("openReference",n=>{var i;const t=(i=n.get(Sl).lastFocusedList)==null?void 0:i.getFocus();Array.isArray(t)&&t[0]instanceof sp&&l0(n,s=>s.openReference(t[0],!1,!0))});var kbe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ax=function(n,e){return function(t,i){e(t,i,n)}};const dZ=new we("hasSymbols",!1,_("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),HF=kt("ISymbolNavigationService");let QV=class{constructor(e,t,i,s){this._editorService=t,this._notificationService=i,this._keybindingService=s,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=dZ.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)==null||e.dispose(),(t=this._currentMessage)==null||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new JV(this._editorService),s=i.onDidChange(o=>{if(this._ignoreEditorChange)return;const r=this._editorService.getActiveCodeEditor();if(!r)return;const a=r.getModel(),l=r.getPosition();if(!a||!l)return;let c=!1,d=!1;for(const u of t.references)if(qk(u.uri,a.uri))c=!0,d=d||D.containsPosition(u.range,l);else if(c)break;(!c||!d)&&this.reset()});this._currentState=ql(i,s)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:D.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var i;(i=this._currentMessage)==null||i.dispose();const e=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),t=e?_("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,e.getLabel()):_("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(t)}};QV=kbe([ax(0,qe),ax(1,Ut),ax(2,wn),ax(3,ei)],QV);Tt(HF,QV,1);_e(new class extends Hn{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:dZ,kbOpts:{weight:100,primary:70}})}runEditorCommand(n,e){return n.get(HF).revealNext(e)}});Ao.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:dZ,primary:9,handler(n){n.get(HF).reset()}});let JV=class{constructor(e){this._listener=new Map,this._disposables=new ne,this._onDidChange=new $,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),gi(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,ql(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))==null||t.dispose(),this._listener.delete(e)}};JV=kbe([ax(0,Ut)],JV);function ej(n,e){return e.uri.scheme===n.uri.scheme?!0:!Y8(e.uri,tt.walkThroughSnippet,tt.vscodeChatCodeBlock,tt.vscodeChatCodeCompareBlock)}async function JI(n,e,t,i,s){const r=t.ordered(n,i).map(l=>Promise.resolve(s(l,n,e)).then(void 0,c=>{fn(c)})),a=await Promise.all(r);return Yl(a.flat()).filter(l=>ej(n,l))}function eE(n,e,t,i,s){return JI(e,t,n,i,(o,r,a)=>o.provideDefinition(r,a,s))}function uZ(n,e,t,i,s){return JI(e,t,n,i,(o,r,a)=>o.provideDeclaration(r,a,s))}function hZ(n,e,t,i,s){return JI(e,t,n,i,(o,r,a)=>o.provideImplementation(r,a,s))}function fZ(n,e,t,i,s){return JI(e,t,n,i,(o,r,a)=>o.provideTypeDefinition(r,a,s))}function tE(n,e,t,i,s,o){return JI(e,t,n,s,async(r,a,l)=>{var u,h;const c=(u=await r.provideReferences(a,l,{includeDeclaration:!0},o))==null?void 0:u.filter(f=>ej(a,f));if(!i||!c||c.length!==2)return c;const d=(h=await r.provideReferences(a,l,{includeDeclaration:!1},o))==null?void 0:h.filter(f=>ej(a,f));return d&&d.length===1?d:c})}async function $u(n){const e=await n(),t=new Wr(e,""),i=t.references.map(s=>s.link);return t.dispose(),i}ur("_executeDefinitionProvider",(n,e,t)=>{const i=n.get(xe),s=eE(i.definitionProvider,e,t,!1,ht.None);return $u(()=>s)});ur("_executeDefinitionProvider_recursive",(n,e,t)=>{const i=n.get(xe),s=eE(i.definitionProvider,e,t,!0,ht.None);return $u(()=>s)});ur("_executeTypeDefinitionProvider",(n,e,t)=>{const i=n.get(xe),s=fZ(i.typeDefinitionProvider,e,t,!1,ht.None);return $u(()=>s)});ur("_executeTypeDefinitionProvider_recursive",(n,e,t)=>{const i=n.get(xe),s=fZ(i.typeDefinitionProvider,e,t,!0,ht.None);return $u(()=>s)});ur("_executeDeclarationProvider",(n,e,t)=>{const i=n.get(xe),s=uZ(i.declarationProvider,e,t,!1,ht.None);return $u(()=>s)});ur("_executeDeclarationProvider_recursive",(n,e,t)=>{const i=n.get(xe),s=uZ(i.declarationProvider,e,t,!0,ht.None);return $u(()=>s)});ur("_executeReferenceProvider",(n,e,t)=>{const i=n.get(xe),s=tE(i.referenceProvider,e,t,!1,!1,ht.None);return $u(()=>s)});ur("_executeReferenceProvider_recursive",(n,e,t)=>{const i=n.get(xe),s=tE(i.referenceProvider,e,t,!1,!0,ht.None);return $u(()=>s)});ur("_executeImplementationProvider",(n,e,t)=>{const i=n.get(xe),s=hZ(i.implementationProvider,e,t,!1,ht.None);return $u(()=>s)});ur("_executeImplementationProvider_recursive",(n,e,t)=>{const i=n.get(xe),s=hZ(i.implementationProvider,e,t,!0,ht.None);return $u(()=>s)});ls.appendMenuItem(Ne.EditorContext,{submenu:Ne.EditorContextPeek,title:_("peek.submenu","Peek"),group:"navigation",order:100});class XC{static is(e){return!e||typeof e!="object"?!1:!!(e instanceof XC||U.isIPosition(e.position)&&e.model)}constructor(e,t){this.model=e,this.position=t}}const El=class El extends pd{static all(){return El._allSymbolNavigationCommands.values()}static _patchConfig(e){const t={...e,f1:!0};if(t.menu)for(const i of Rt.wrap(t.menu))(i.id===Ne.EditorContext||i.id===Ne.EditorContextPeek)&&(i.when=se.and(e.precondition,i.when));return t}constructor(e,t){super(El._patchConfig(t)),this.configuration=e,El._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,i,s){if(!t.hasModel())return Promise.resolve(void 0);const o=e.get(wn),r=e.get(Ut),a=e.get(fp),l=e.get(HF),c=e.get(xe),d=e.get(Ae),u=t.getModel(),h=t.getPosition(),f=XC.is(i)?i:new XC(u,h),m=new ip(t,5),p=xI(this._getLocationModel(c,f.model,f.position,m.token),m.token).then(async b=>{var y;if(!b||m.token.isCancellationRequested)return;Oo(b.ariaMessage);let v;if(b.referenceAt(u.uri,h)){const C=this._getAlternativeCommand(t);!El._activeAlternativeCommands.has(C)&&El._allSymbolNavigationCommands.has(C)&&(v=El._allSymbolNavigationCommands.get(C))}const w=b.references.length;if(w===0){if(!this.configuration.muteMessage){const C=u.getWordAtPosition(h);(y=Br.get(t))==null||y.showMessage(this._getNoResultFoundMessage(C),h)}}else if(w===1&&v)El._activeAlternativeCommands.add(this.desc.id),d.invokeFunction(C=>v.runEditorCommand(C,t,i,s).finally(()=>{El._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(r,l,t,b,s)},b=>{o.error(b)}).finally(()=>{m.dispose()});return a.showWhile(p,250),p}async _onResult(e,t,i,s,o){const r=this._getGoToPreference(i);if(!(i instanceof nc)&&(this.configuration.openInPeek||r==="peek"&&s.references.length>1))this._openInPeek(i,s,o);else{const a=s.firstReference(),l=s.references.length>1&&r==="gotoAndPeek",c=await this._openReference(i,e,a,this.configuration.openToSide,!l);l&&c?this._openInPeek(c,s,o):s.dispose(),r==="goto"&&t.put(a)}}async _openReference(e,t,i,s,o){let r;if(NRe(i)&&(r=i.targetSelectionRange),r||(r=i.range),!r)return;const a=await t.openCodeEditor({resource:i.uri,options:{selection:D.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,s);if(a){if(o){const l=a.getModel(),c=a.createDecorationsCollection([{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&c.clear()},350)}return a}}_openInPeek(e,t,i){const s=Pv.get(e);s&&e.hasModel()?s.toggleWidget(i??e.getSelection(),Xn(o=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}};El._allSymbolNavigationCommands=new Map,El._activeAlternativeCommands=new Set;let xf=El;class iE extends xf{async _getLocationModel(e,t,i,s){return new Wr(await eE(e.definitionProvider,t,i,!1,s),_("def.title","Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?_("noResultWord","No definition found for '{0}'",e.word):_("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleDefinitions}}var wm;vi((wm=class extends iE{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:wm.id,title:{...Ze("actions.goToDecl.label","Go to Definition"),mnemonicTitle:_({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:R.hasDefinitionProvider,keybinding:[{when:R.editorTextFocus,primary:70,weight:100},{when:se.and(R.editorTextFocus,Nme),primary:2118,weight:100}],menu:[{id:Ne.EditorContext,group:"navigation",order:1.1},{id:Ne.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),Mt.registerCommandAlias("editor.action.goToDeclaration",wm.id)}},wm.id="editor.action.revealDefinition",wm));var ym;vi((ym=class extends iE{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:ym.id,title:Ze("actions.goToDeclToSide.label","Open Definition to the Side"),precondition:se.and(R.hasDefinitionProvider,R.isInEmbeddedEditor.toNegated()),keybinding:[{when:R.editorTextFocus,primary:Mn(2089,70),weight:100},{when:se.and(R.editorTextFocus,Nme),primary:Mn(2089,2118),weight:100}]}),Mt.registerCommandAlias("editor.action.openDeclarationToTheSide",ym.id)}},ym.id="editor.action.revealDefinitionAside",ym));var Cm;vi((Cm=class extends iE{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Cm.id,title:Ze("actions.previewDecl.label","Peek Definition"),precondition:se.and(R.hasDefinitionProvider,lr.notInPeekEditor,R.isInEmbeddedEditor.toNegated()),keybinding:{when:R.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:Ne.EditorContextPeek,group:"peek",order:2}}),Mt.registerCommandAlias("editor.action.previewDeclaration",Cm.id)}},Cm.id="editor.action.peekDefinition",Cm));class Nbe extends xf{async _getLocationModel(e,t,i,s){return new Wr(await uZ(e.declarationProvider,t,i,!1,s),_("decl.title","Declarations"))}_getNoResultFoundMessage(e){return e&&e.word?_("decl.noResultWord","No declaration found for '{0}'",e.word):_("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(58).multipleDeclarations}}var _b;vi((_b=class extends Nbe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:_b.id,title:{...Ze("actions.goToDeclaration.label","Go to Declaration"),mnemonicTitle:_({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:se.and(R.hasDeclarationProvider,R.isInEmbeddedEditor.toNegated()),menu:[{id:Ne.EditorContext,group:"navigation",order:1.3},{id:Ne.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?_("decl.noResultWord","No declaration found for '{0}'",e.word):_("decl.generic.noResults","No declaration found")}},_b.id="editor.action.revealDeclaration",_b));vi(class extends Nbe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:Ze("actions.peekDecl.label","Peek Declaration"),precondition:se.and(R.hasDeclarationProvider,lr.notInPeekEditor,R.isInEmbeddedEditor.toNegated()),menu:{id:Ne.EditorContextPeek,group:"peek",order:3}})}});class Ibe extends xf{async _getLocationModel(e,t,i,s){return new Wr(await fZ(e.typeDefinitionProvider,t,i,!1,s),_("typedef.title","Type Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?_("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):_("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleTypeDefinitions}}var bb;vi((bb=class extends Ibe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:bb.ID,title:{...Ze("actions.goToTypeDefinition.label","Go to Type Definition"),mnemonicTitle:_({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:R.hasTypeDefinitionProvider,keybinding:{when:R.editorTextFocus,primary:0,weight:100},menu:[{id:Ne.EditorContext,group:"navigation",order:1.4},{id:Ne.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}},bb.ID="editor.action.goToTypeDefinition",bb));var vb;vi((vb=class extends Ibe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:vb.ID,title:Ze("actions.peekTypeDefinition.label","Peek Type Definition"),precondition:se.and(R.hasTypeDefinitionProvider,lr.notInPeekEditor,R.isInEmbeddedEditor.toNegated()),menu:{id:Ne.EditorContextPeek,group:"peek",order:4}})}},vb.ID="editor.action.peekTypeDefinition",vb));class Ebe extends xf{async _getLocationModel(e,t,i,s){return new Wr(await hZ(e.implementationProvider,t,i,!1,s),_("impl.title","Implementations"))}_getNoResultFoundMessage(e){return e&&e.word?_("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):_("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(58).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(58).multipleImplementations}}var wb;vi((wb=class extends Ebe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:wb.ID,title:{...Ze("actions.goToImplementation.label","Go to Implementations"),mnemonicTitle:_({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:R.hasImplementationProvider,keybinding:{when:R.editorTextFocus,primary:2118,weight:100},menu:[{id:Ne.EditorContext,group:"navigation",order:1.45},{id:Ne.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}},wb.ID="editor.action.goToImplementation",wb));var yb;vi((yb=class extends Ebe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:yb.ID,title:Ze("actions.peekImplementation.label","Peek Implementations"),precondition:se.and(R.hasImplementationProvider,lr.notInPeekEditor,R.isInEmbeddedEditor.toNegated()),keybinding:{when:R.editorTextFocus,primary:3142,weight:100},menu:{id:Ne.EditorContextPeek,group:"peek",order:5}})}},yb.ID="editor.action.peekImplementation",yb));class Dbe extends xf{_getNoResultFoundMessage(e){return e?_("references.no","No references found for '{0}'",e.word):_("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(58).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(58).multipleReferences}}vi(class extends Dbe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{...Ze("goToReferences.label","Go to References"),mnemonicTitle:_({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:se.and(R.hasReferenceProvider,lr.notInPeekEditor,R.isInEmbeddedEditor.toNegated()),keybinding:{when:R.editorTextFocus,primary:1094,weight:100},menu:[{id:Ne.EditorContext,group:"navigation",order:1.45},{id:Ne.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}async _getLocationModel(e,t,i,s){return new Wr(await tE(e.referenceProvider,t,i,!0,!1,s),_("ref.title","References"))}});vi(class extends Dbe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:Ze("references.action.label","Peek References"),precondition:se.and(R.hasReferenceProvider,lr.notInPeekEditor,R.isInEmbeddedEditor.toNegated()),menu:{id:Ne.EditorContextPeek,group:"peek",order:6}})}async _getLocationModel(e,t,i,s){return new Wr(await tE(e.referenceProvider,t,i,!1,!1,s),_("ref.title","References"))}});class dYe extends xf{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",title:Ze("label.generic","Go to Any Symbol"),precondition:se.and(lr.notInPeekEditor,R.isInEmbeddedEditor.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}async _getLocationModel(e,t,i,s){return new Wr(this._references,_("generic.title","Locations"))}_getNoResultFoundMessage(e){return e&&_("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){return this._gotoMultipleBehaviour??e.getOption(58).multipleReferences}_getAlternativeCommand(){return""}}Mt.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Be},{name:"position",description:"The position at which to start",constraint:U.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:async(n,e,t,i,s,o,r)=>{zt(Be.isUri(e)),zt(U.isIPosition(t)),zt(Array.isArray(i)),zt(typeof s>"u"||typeof s=="string"),zt(typeof r>"u"||typeof r=="boolean");const a=n.get(Ut),l=await a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(Ou(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const d=new class extends dYe{_getNoResultFoundMessage(u){return o||super._getNoResultFoundMessage(u)}}({muteMessage:!o,openInPeek:!!r,openToSide:!1},i,s);c.get(Ae).invokeFunction(d.run.bind(d),l)})}});Mt.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Be},{name:"position",description:"The position at which to start",constraint:U.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(n,e,t,i,s)=>{n.get(Ci).executeCommand("editor.action.goToLocations",e,t,i,s,void 0,!0)}});Mt.registerCommand({id:"editor.action.findReferences",handler:(n,e,t)=>{zt(Be.isUri(e)),zt(U.isIPosition(t));const i=n.get(xe),s=n.get(Ut);return s.openCodeEditor({resource:e},s.getFocusedCodeEditor()).then(o=>{if(!Ou(o)||!o.hasModel())return;const r=Pv.get(o);if(!r)return;const a=Xn(c=>tE(i.referenceProvider,o.getModel(),U.lift(t),!1,!1,c).then(d=>new Wr(d,_("ref.title","References")))),l=new D(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(l,a,!1))})}});Mt.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");async function uYe(n,e,t,i){const s=n.get(dr),o=n.get(Zr),r=n.get(Ci),a=n.get(Ae),l=n.get(wn);if(await i.item.resolve(ht.None),!i.part.location)return;const c=i.part.location,d=[],u=new Set(ls.getMenuItems(Ne.EditorContext).map(f=>hy(f)?f.command.id:RF()));for(const f of xf.all())u.has(f.desc.id)&&d.push(new Or(f.desc.id,Fr.label(f.desc,{renderShortTitle:!0}),void 0,!0,async()=>{const m=await s.createModelReference(c.uri);try{const p=new XC(m.object.textEditorModel,D.getStartPosition(c.range)),b=i.item.anchor.range;await a.invokeFunction(f.runEditorCommand.bind(f),e,p,b)}finally{m.dispose()}}));if(i.part.command){const{command:f}=i.part;d.push(new Ss),d.push(new Or(f.id,f.title,void 0,!0,async()=>{try{await r.executeCommand(f.id,...f.arguments??[])}catch(m){l.notify({severity:B4.Error,source:i.item.provider.displayName,message:m})}}))}const h=e.getOption(128);o.showContextMenu({domForShadowRoot:h?e.getDomNode()??void 0:void 0,getAnchor:()=>{const f=un(t);return{x:f.left,y:f.top+f.height+8}},getActions:()=>d,onHide:()=>{e.focus()},autoSelectFirstItem:!0})}async function Tbe(n,e,t,i){const o=await n.get(dr).createModelReference(i.uri);await t.invokeWithinContext(async r=>{const a=e.hasSideBySideModifier,l=r.get(qe),c=lr.inPeekEditor.getValue(l),d=!a&&t.getOption(89)&&!c;return new iE({openToSide:a,openInPeek:d,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(r,new XC(o.object.textEditorModel,D.getStartPosition(i.range)),D.lift(i.range))}),o.dispose()}var hYe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},T0=function(n,e){return function(t,i){e(t,i,n)}},$0;class rP{constructor(){this._entries=new Hu(50)}get(e){const t=rP._key(e);return this._entries.get(t)}set(e,t){const i=rP._key(e);this._entries.set(i,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const Rbe=kt("IInlayHintsCache");Tt(Rbe,rP,1);class tj{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}class fYe{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}var Kh;let AN=(Kh=class{static get(e){return e.getContribution($0.ID)??void 0}constructor(e,t,i,s,o,r,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=s,this._commandService=o,this._notificationService=r,this._instaService=a,this._disposables=new ne,this._sessionDisposables=new ne,this._decorationsMetadata=new Map,this._ruleFactory=new xM(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(142)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(142);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;if(e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(Ah.getInstance().event(c=>{if(!this._editor.hasModel())return;const d=c.altKey&&c.ctrlKey&&!(c.shiftKey||c.metaKey)?l:a;if(d!==this._activeRenderMode){this._activeRenderMode=d;const u=this._editor.getModel(),h=this._copyInlayHintsWithCurrentAnchor(u);this._updateHintsDecorators([u.getFullModelRange()],h),r.schedule(0)}}))}const i=this._inlayHintsCache.get(t);i&&this._updateHintsDecorators([t.getFullModelRange()],i),this._sessionDisposables.add(Pe(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let s;const o=new Set,r=new li(async()=>{const a=Date.now();s==null||s.dispose(!0),s=new Gi;const l=t.onWillDispose(()=>s==null?void 0:s.cancel());try{const c=s.token,d=await tP.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),c);if(r.delay=this._debounceInfo.update(t,Date.now()-a),c.isCancellationRequested){d.dispose();return}for(const u of d.provider)typeof u.onDidChangeInlayHints=="function"&&!o.has(u)&&(o.add(u),this._sessionDisposables.add(u.onDidChangeInlayHints(()=>{r.isScheduled()||r.schedule()})));this._sessionDisposables.add(d),this._updateHintsDecorators(d.ranges,d.items),this._cacheHintsForFastRestore(t)}catch(c){et(c)}finally{s.dispose(),l.dispose()}},this._debounceInfo.get(t));this._sessionDisposables.add(r),this._sessionDisposables.add(Pe(()=>s==null?void 0:s.dispose(!0))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!r.isScheduled())&&r.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{s==null||s.cancel();const l=Math.max(r.delay,1250);r.schedule(l)})),this._sessionDisposables.add(this._installDblClickGesture(()=>r.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new ne,t=e.add(new FF(this._editor)),i=new ne;return e.add(i),e.add(t.onMouseMoveOrRelevantKeyDown(s=>{const[o]=s,r=this._getInlayHintLabelPart(o),a=this._editor.getModel();if(!r||!a){i.clear();return}const l=new Gi;i.add(Pe(()=>l.dispose(!0))),r.item.resolve(l.token),this._activeInlayHintPart=r.part.command||r.part.location?new fYe(r,o.hasTriggerModifier):void 0;const c=a.validatePosition(r.item.hint.position).lineNumber,d=new D(c,1,c,a.getLineMaxColumn(c)),u=this._getInlineHintsForRange(d);this._updateHintsDecorators([d],u),i.add(Pe(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([d],u)}))})),e.add(t.onCancel(()=>i.clear())),e.add(t.onExecute(async s=>{const o=this._getInlayHintLabelPart(s);if(o){const r=o.part;r.location?this._instaService.invokeFunction(Tbe,s,this._editor,r.location):Z9.is(r.command)&&await this._invokeCommand(r.command,o.item)}})),e}_getInlineHintsForRange(e){const t=new Set;for(const i of this._decorationsMetadata.values())e.containsRange(i.item.anchor.range)&&t.add(i.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(async t=>{if(t.event.detail!==2)return;const i=this._getInlayHintLabelPart(t);if(i&&(t.event.preventDefault(),await i.item.resolve(ht.None),ho(i.item.hint.textEdits))){const s=i.item.hint.textEdits.map(o=>Ki.replace(D.lift(o.range),o.text));this._editor.executeEdits("inlayHint.default",s),e()}})}_installContextMenu(){return this._editor.onContextMenu(async e=>{if(!Qn(e.event.target))return;const t=this._getInlayHintLabelPart(e);t&&await this._instaService.invokeFunction(uYe,this._editor,e.event.target,t)})}_getInlayHintLabelPart(e){var i;if(e.target.type!==6)return;const t=(i=e.target.detail.injectedText)==null?void 0:i.options;if(t instanceof Jm&&(t==null?void 0:t.attachedData)instanceof tj)return t.attachedData}async _invokeCommand(e,t){try{await this._commandService.executeCommand(e.id,...e.arguments??[])}catch(i){this._notificationService.notify({severity:B4.Error,source:t.provider.displayName,message:i})}}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[i,s]of this._decorationsMetadata){if(t.has(s.item))continue;const o=e.getDecorationRange(i);if(o){const r=new vbe(o,s.item.anchor.direction),a=s.item.with({anchor:r});t.set(s.item,a)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),i=this._editor.getVisibleRangesPlusViewportAboveBelow(),s=[];for(const o of i.sort(D.compareRangesUsingStarts)){const r=t.validateRange(new D(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));s.length===0||!D.areIntersectingOrTouching(s[s.length-1],r)?s.push(r):s[s.length-1]=D.plusRange(s[s.length-1],r)}return s}_updateHintsDecorators(e,t){var m,p;const i=[],s=(b,v,w,y,C)=>{const S={content:w,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:v.className,cursorStops:y,attachedData:C};i.push({item:b,classNameRef:v,decoration:{range:b.anchor.range,options:{description:"InlayHint",showIfCollapsed:b.anchor.range.isEmpty(),collapseOnReplaceEdit:!b.anchor.range.isEmpty(),stickiness:0,[b.anchor.direction]:this._activeRenderMode===0?S:void 0}}})},o=(b,v)=>{const w=this._ruleFactory.createClassNameRef({width:`${r/3|0}px`,display:"inline-block"});s(b,w," ",v?jl.Right:jl.None)},{fontSize:r,fontFamily:a,padding:l,isUniform:c}=this._getLayoutInfo(),d="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(d,a);let u={line:0,totalLen:0};for(const b of t){if(u.line!==b.anchor.range.startLineNumber&&(u={line:b.anchor.range.startLineNumber,totalLen:0}),u.totalLen>$0._MAX_LABEL_LEN)continue;b.hint.paddingLeft&&o(b,!1);const v=typeof b.hint.label=="string"?[{label:b.hint.label}]:b.hint.label;for(let w=0;w<v.length;w++){const y=v[w],C=w===0,S=w===v.length-1,x={fontSize:`${r}px`,fontFamily:`var(${d}), ${Eo.fontFamily}`,verticalAlign:c?"baseline":"middle",unicodeBidi:"isolate"};ho(b.hint.textEdits)&&(x.cursor="default"),this._fillInColors(x,b.hint),(y.command||y.location)&&((m=this._activeInlayHintPart)==null?void 0:m.part.item)===b&&this._activeInlayHintPart.part.index===w&&(x.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(x.color=sn(GOe),x.cursor="pointer")),l&&(C&&S?(x.padding=`1px ${Math.max(1,r/4)|0}px`,x.borderRadius=`${r/4|0}px`):C?(x.padding=`1px 0 1px ${Math.max(1,r/4)|0}px`,x.borderRadius=`${r/4|0}px 0 0 ${r/4|0}px`):S?(x.padding=`1px ${Math.max(1,r/4)|0}px 1px 0`,x.borderRadius=`0 ${r/4|0}px ${r/4|0}px 0`):x.padding="1px 0 1px 0");let k=y.label;u.totalLen+=k.length;let N=!1;const E=u.totalLen-$0._MAX_LABEL_LEN;if(E>0&&(k=k.slice(0,-E)+"…",N=!0),s(b,this._ruleFactory.createClassNameRef(x),gYe(k),S&&!b.hint.paddingRight?jl.Right:jl.None,new tj(b,w)),N)break}if(b.hint.paddingRight&&o(b,!0),i.length>$0._MAX_DECORATORS)break}const h=[];for(const[b,v]of this._decorationsMetadata){const w=(p=this._editor.getModel())==null?void 0:p.getDecorationRange(b);w&&e.some(y=>y.containsRange(w))&&(h.push(b),v.classNameRef.dispose(),this._decorationsMetadata.delete(b))}const f=fd.capture(this._editor);this._editor.changeDecorations(b=>{const v=b.deltaDecorations(h,i.map(w=>w.decoration));for(let w=0;w<v.length;w++){const y=i[w];this._decorationsMetadata.set(v[w],y)}}),f.restore(this._editor)}_fillInColors(e,t){t.kind===n2.Parameter?(e.backgroundColor=sn(i4e),e.color=sn(t4e)):t.kind===n2.Type?(e.backgroundColor=sn(e4e),e.color=sn(JOe)):(e.backgroundColor=sn(JK),e.color=sn(QK))}_getLayoutInfo(){const e=this._editor.getOption(142),t=e.padding,i=this._editor.getOption(52),s=this._editor.getOption(49);let o=e.fontSize;(!o||o<5||o>i)&&(o=i);const r=e.fontFamily||s;return{fontSize:o,fontFamily:r,padding:t,isUniform:!t&&r===s&&o===i}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}},$0=Kh,Kh.ID="editor.contrib.InlayHints",Kh._MAX_DECORATORS=1500,Kh._MAX_LABEL_LEN=43,Kh);AN=$0=hYe([T0(1,xe),T0(2,Fa),T0(3,Rbe),T0(4,Ci),T0(5,wn),T0(6,Ae)],AN);function gYe(n){return n.replace(/[ \t]/g," ")}Mt.registerCommand("_executeInlayHintProvider",async(n,...e)=>{const[t,i]=e;zt(Be.isUri(t)),zt(D.isIRange(i));const{inlayHintsProvider:s}=n.get(xe),o=await n.get(dr).createModelReference(t);try{const r=await tP.create(s,o.object.textEditorModel,[D.lift(i)],ht.None),a=r.items.map(l=>l.hint);return setTimeout(()=>r.dispose(),0),a}finally{o.dispose()}});var mYe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Uf=function(n,e){return function(t,i){e(t,i,n)}};class xne extends KT{constructor(e,t,i,s){super(10,t,e.item.anchor.range,i,s,!0),this.part=e}}let aP=class extends MN{constructor(e,t,i,s,o,r,a,l,c){super(e,t,i,r,l,s,o,c),this._resolverService=a,this.hoverOrdinal=6}suggestHoverAnchor(e){var s;if(!AN.get(this._editor)||e.target.type!==6)return null;const i=(s=e.target.detail.injectedText)==null?void 0:s.options;return i instanceof Jm&&i.attachedData instanceof tj?new xne(i.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,i){return e instanceof xne?new ya(async s=>{const{part:o}=e;if(await o.item.resolve(i),i.isCancellationRequested)return;let r;typeof o.item.hint.tooltip=="string"?r=new Us().appendText(o.item.hint.tooltip):o.item.hint.tooltip&&(r=o.item.hint.tooltip),r&&s.emitOne(new Wl(this,e.range,[r],!1,0)),ho(o.item.hint.textEdits)&&s.emitOne(new Wl(this,e.range,[new Us().appendText(_("hint.dbl","Double-click to insert"))],!1,10001));let a;if(typeof o.part.tooltip=="string"?a=new Us().appendText(o.part.tooltip):o.part.tooltip&&(a=o.part.tooltip),a&&s.emitOne(new Wl(this,e.range,[a],!1,1)),o.part.location||o.part.command){let c;const u=this._editor.getOption(78)==="altKey"?Lt?_("links.navigate.kb.meta.mac","cmd + click"):_("links.navigate.kb.meta","ctrl + click"):Lt?_("links.navigate.kb.alt.mac","option + click"):_("links.navigate.kb.alt","alt + click");o.part.location&&o.part.command?c=new Us().appendText(_("hint.defAndCommand","Go to Definition ({0}), right click for more",u)):o.part.location?c=new Us().appendText(_("hint.def","Go to Definition ({0})",u)):o.part.command&&(c=new Us(`[${_("hint.cmd","Execute Command")}](${zZe(o.part.command)} "${o.part.command.title}") (${u})`,{isTrusted:!0})),c&&s.emitOne(new Wl(this,e.range,[c],!1,1e4))}const l=await this._resolveInlayHintLabelPartHover(o,i);for await(const c of l)s.emitOne(c)}):ya.EMPTY}async _resolveInlayHintLabelPartHover(e,t){if(!e.part.location)return ya.EMPTY;const{uri:i,range:s}=e.part.location,o=await this._resolverService.createModelReference(i);try{const r=o.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(r)?lZ(this._languageFeaturesService.hoverProvider,r,new U(s.startLineNumber,s.startColumn),t).filter(a=>!RC(a.hover.contents)).map(a=>new Wl(this,e.item.anchor.range,a.hover.contents,!1,2+a.ordinal)):ya.EMPTY}finally{o.dispose()}}};aP=mYe([Uf(1,ji),Uf(2,hr),Uf(3,ei),Uf(4,ju),Uf(5,_t),Uf(6,dr),Uf(7,xe),Uf(8,Ci)],aP);class gZ extends G{constructor(e,t,i,s,o,r){super();const a=t.anchor,l=t.hoverParts;this._renderedHoverParts=this._register(new ij(e,i,l,r,o));const{showAtPosition:c,showAtSecondaryPosition:d}=gZ.computeHoverPositions(e,a.range,l);this.shouldAppearBeforeContent=l.some(u=>u.isBeforeContent),this.showAtPosition=c,this.showAtSecondaryPosition=d,this.initialMousePosX=a.initialMousePosX,this.initialMousePosY=a.initialMousePosY,this.shouldFocus=s.shouldFocus,this.source=s.source}get domNode(){return this._renderedHoverParts.domNode}get domNodeHasChildren(){return this._renderedHoverParts.domNodeHasChildren}get focusedHoverPartIndex(){return this._renderedHoverParts.focusedHoverPartIndex}async updateHoverVerbosityLevel(e,t,i){this._renderedHoverParts.updateHoverVerbosityLevel(e,t,i)}isColorPickerVisible(){return this._renderedHoverParts.isColorPickerVisible()}static computeHoverPositions(e,t,i){let s=1;if(e.hasModel()){const d=e._getViewModel(),u=d.coordinatesConverter,h=u.convertModelRangeToViewRange(t),f=d.getLineMinColumn(h.startLineNumber),m=new U(h.startLineNumber,f);s=u.convertViewPositionToModelPosition(m).column}const o=t.startLineNumber;let r=t.startColumn,a;for(const d of i){const u=d.range,h=u.startLineNumber===o,f=u.endLineNumber===o;if(h&&f){const p=u.startColumn,b=Math.min(r,p);r=Math.max(b,s)}d.forceShowAtRange&&(a=u)}let l,c;if(a){const d=a.getStartPosition();l=d,c=d}else l=t.getStartPosition(),c=new U(o,r);return{showAtPosition:l,showAtSecondaryPosition:c}}}class pYe{constructor(e,t){this._statusBar=t,e.appendChild(this._statusBar.hoverElement)}get hoverElement(){return this._statusBar.hoverElement}get actions(){return this._statusBar.actions}dispose(){this._statusBar.dispose()}}const ZA=class ZA extends G{constructor(e,t,i,s,o){super(),this._renderedParts=[],this._focusedHoverPartIndex=-1,this._context=o,this._fragment=document.createDocumentFragment(),this._register(this._renderParts(t,i,o,s)),this._register(this._registerListenersOnRenderedParts()),this._register(this._createEditorDecorations(e,i)),this._updateMarkdownAndColorParticipantInfo(t)}_createEditorDecorations(e,t){if(t.length===0)return G.None;let i=t[0].range;for(const o of t){const r=o.range;i=D.plusRange(i,r)}const s=e.createDecorationsCollection();return s.set([{range:i,options:ZA._DECORATION_OPTIONS}]),Pe(()=>{s.clear()})}_renderParts(e,t,i,s){const o=new eP(s),r={fragment:this._fragment,statusBar:o,...i},a=new ne;for(const c of e){const d=this._renderHoverPartsForParticipant(t,c,r);a.add(d);for(const u of d.renderedHoverParts)this._renderedParts.push({type:"hoverPart",participant:c,hoverPart:u.hoverPart,hoverElement:u.hoverElement})}const l=this._renderStatusBar(this._fragment,o);return l&&(a.add(l),this._renderedParts.push({type:"statusBar",hoverElement:l.hoverElement,actions:l.actions})),Pe(()=>{a.dispose()})}_renderHoverPartsForParticipant(e,t,i){const s=e.filter(r=>r.owner===t);return s.length>0?t.renderHoverParts(i,s):new Mv([])}_renderStatusBar(e,t){if(t.hasContent)return new pYe(e,t)}_registerListenersOnRenderedParts(){const e=new ne;return this._renderedParts.forEach((t,i)=>{const s=t.hoverElement;s.tabIndex=0,e.add(Q(s,fe.FOCUS_IN,o=>{o.stopPropagation(),this._focusedHoverPartIndex=i})),e.add(Q(s,fe.FOCUS_OUT,o=>{o.stopPropagation(),this._focusedHoverPartIndex=-1}))}),e}_updateMarkdownAndColorParticipantInfo(e){const t=e.find(i=>i instanceof MN&&!(i instanceof aP));t&&(this._markdownHoverParticipant=t),this._colorHoverParticipant=e.find(i=>i instanceof TN)}async updateHoverVerbosityLevel(e,t,i){if(!this._markdownHoverParticipant)return;const s=this._normalizedIndexToMarkdownHoverIndexRange(this._markdownHoverParticipant,t);if(s===void 0)return;const o=await this._markdownHoverParticipant.updateMarkdownHoverVerbosityLevel(e,s,i);o&&(this._renderedParts[t]={type:"hoverPart",participant:this._markdownHoverParticipant,hoverPart:o.hoverPart,hoverElement:o.hoverElement},this._context.onContentsChanged())}isColorPickerVisible(){var e;return((e=this._colorHoverParticipant)==null?void 0:e.isColorPickerVisible())??!1}_normalizedIndexToMarkdownHoverIndexRange(e,t){const i=this._renderedParts[t];if(!i||i.type!=="hoverPart"||!(i.participant===e))return;const o=this._renderedParts.findIndex(r=>r.type==="hoverPart"&&r.participant===e);if(o===-1)throw new Zt;return t-o}get domNode(){return this._fragment}get domNodeHasChildren(){return this._fragment.hasChildNodes()}get focusedHoverPartIndex(){return this._focusedHoverPartIndex}};ZA._DECORATION_OPTIONS=rt.register({description:"content-hover-highlight",className:"hoverHighlight"});let ij=ZA;var _Ye=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Lne=function(n,e){return function(t,i){e(t,i,n)}};let nj=class extends G{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._currentResult=null,this._onContentsChanged=this._register(new $),this.onContentsChanged=this._onContentsChanged.event,this._contentHoverWidget=this._register(this._instantiationService.createInstance(zV,this._editor)),this._participants=this._initializeHoverParticipants(),this._computer=new JM(this._editor,this._participants),this._hoverOperation=this._register(new gbe(this._editor,this._computer)),this._registerListeners()}_initializeHoverParticipants(){const e=[];for(const t of r0.getAll()){const i=this._instantiationService.createInstance(t,this._editor);e.push(i)}return e.sort((t,i)=>t.hoverOrdinal-i.hoverOrdinal),this._register(this._contentHoverWidget.onDidResize(()=>{this._participants.forEach(t=>{var i;return(i=t.handleResize)==null?void 0:i.call(t)})})),e}_registerListeners(){this._register(this._hoverOperation.onResult(t=>{if(!this._computer.anchor)return;const i=t.hasLoadingMessage?this._addLoadingMessage(t.value):t.value;this._withResult(new mbe(this._computer.anchor,i,t.isComplete))}));const e=this._contentHoverWidget.getDomNode();this._register(Ji(e,"keydown",t=>{t.equals(9)&&this.hide()})),this._register(Ji(e,"mouseleave",t=>{this._onMouseLeave(t)})),this._register(nn.onDidChange(()=>{this._contentHoverWidget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)}))}_startShowingOrUpdateHover(e,t,i,s,o){if(!(this._contentHoverWidget.position&&this._currentResult))return e?(this._startHoverOperationIfNecessary(e,t,i,s,!1),!0):!1;const a=this._editor.getOption(60).sticky,l=o&&this._contentHoverWidget.isMouseGettingCloser(o.event.posx,o.event.posy);return a&&l?(e&&this._startHoverOperationIfNecessary(e,t,i,s,!0),!0):e?this._currentResult.anchor.equals(e)?!0:e.canAdoptVisibleHover(this._currentResult.anchor,this._contentHoverWidget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,i,s,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,i,s,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,i,s,o){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=s,this._computer.source=i,this._computer.insistOnKeepingHoverVisible=o,this._hoverOperation.start(t))}_setCurrentResult(e){let t=e;if(this._currentResult===t)return;t&&t.hoverParts.length===0&&(t=null),this._currentResult=t,this._currentResult?this._showHover(this._currentResult):this._hideHover()}_addLoadingMessage(e){if(!this._computer.anchor)return e;for(const t of this._participants){if(!t.createLoadingMessage)continue;const i=t.createLoadingMessage(this._computer.anchor);if(i)return e.slice(0).concat([i])}return e}_withResult(e){if(this._contentHoverWidget.position&&this._currentResult&&this._currentResult.isComplete||this._setCurrentResult(e),!e.isComplete)return;const s=e.hoverParts.length===0,o=this._computer.insistOnKeepingHoverVisible;s&&o||this._setCurrentResult(e)}_showHover(e){const t=this._getHoverContext();this._renderedContentHover=new gZ(this._editor,e,this._participants,this._computer,t,this._keybindingService),this._renderedContentHover.domNodeHasChildren?this._contentHoverWidget.show(this._renderedContentHover):this._renderedContentHover.dispose()}_hideHover(){this._contentHoverWidget.hide()}_getHoverContext(){return{hide:()=>{this.hide()},onContentsChanged:()=>{this._onContentsChanged.fire(),this._contentHoverWidget.onContentsChanged()},setMinimumDimensions:s=>{this._contentHoverWidget.setMinimumDimensions(s)}}}showsOrWillShow(e){if(this._contentHoverWidget.isResizing)return!0;const i=this._findHoverAnchorCandidates(e);if(!(i.length>0))return this._startShowingOrUpdateHover(null,0,0,!1,e);const o=i[0];return this._startShowingOrUpdateHover(o,0,0,!1,e)}_findHoverAnchorCandidates(e){const t=[];for(const s of this._participants){if(!s.suggestHoverAnchor)continue;const o=s.suggestHoverAnchor(e);o&&t.push(o)}const i=e.target;switch(i.type){case 6:{t.push(new BB(0,i.range,e.event.posx,e.event.posy));break}case 7:{const s=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;if(!(!i.detail.isAfterLines&&typeof i.detail.horizontalDistanceToText=="number"&&i.detail.horizontalDistanceToText<s))break;t.push(new BB(0,i.range,e.event.posx,e.event.posy));break}}return t.sort((s,o)=>o.priority-s.priority),t}_onMouseLeave(e){const t=this._editor.getDomNode();(!t||!OF(t,e.x,e.y))&&this.hide()}startShowingAtRange(e,t,i,s){this._startShowingOrUpdateHover(new BB(0,e,void 0,void 0),t,i,s,null)}async updateHoverVerbosityLevel(e,t,i){var s;(s=this._renderedContentHover)==null||s.updateHoverVerbosityLevel(e,t,i)}focusedHoverPartIndex(){var e;return((e=this._renderedContentHover)==null?void 0:e.focusedHoverPartIndex)??-1}containsNode(e){return e?this._contentHoverWidget.getDomNode().contains(e):!1}focus(){this._contentHoverWidget.focus()}scrollUp(){this._contentHoverWidget.scrollUp()}scrollDown(){this._contentHoverWidget.scrollDown()}scrollLeft(){this._contentHoverWidget.scrollLeft()}scrollRight(){this._contentHoverWidget.scrollRight()}pageUp(){this._contentHoverWidget.pageUp()}pageDown(){this._contentHoverWidget.pageDown()}goToTop(){this._contentHoverWidget.goToTop()}goToBottom(){this._contentHoverWidget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}getDomNode(){return this._contentHoverWidget.getDomNode()}get isColorPickerVisible(){var e;return((e=this._renderedContentHover)==null?void 0:e.isColorPickerVisible())??!1}get isVisibleFromKeyboard(){return this._contentHoverWidget.isVisibleFromKeyboard}get isVisible(){return this._contentHoverWidget.isVisible}get isFocused(){return this._contentHoverWidget.isFocused}get isResizing(){return this._contentHoverWidget.isResizing}get widget(){return this._contentHoverWidget}};nj=_Ye([Lne(1,Ae),Lne(2,ei)],nj);var bYe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},kne=function(n,e){return function(t,i){e(t,i,n)}},sj;const vYe=!1;var Cb;let go=(Cb=class extends G{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._onHoverContentsChanged=this._register(new $),this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new ne,this._hoverState={mouseDown:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new li(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}static get(e){return e.getContribution(sj.ID)}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._shouldNotHideCurrentHoverWidget(e)&&this._hideWidgets()}_shouldNotHideCurrentHoverWidget(e){return this._isMouseOnContentHoverWidget(e)||this._isContentWidgetResizing()}_isMouseOnContentHoverWidget(e){var i;const t=(i=this._contentWidget)==null?void 0:i.getDomNode();return t?OF(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._shouldNotHideCurrentHoverWidget(e))||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky,i=(r,a)=>{const l=this._isMouseOnContentHoverWidget(r);return a&&l},s=r=>{var c;const a=this._isMouseOnContentHoverWidget(r),l=((c=this._contentWidget)==null?void 0:c.isColorPickerVisible)??!1;return a&&l},o=(r,a)=>{var l,c,d,u;return(a&&((c=this._contentWidget)==null?void 0:c.containsNode((l=r.event.browserEvent.view)==null?void 0:l.document.activeElement))&&!((u=(d=r.event.browserEvent.view)==null?void 0:d.getSelection())!=null&&u.isCollapsed))??!1};return i(e,t)||s(e)||o(e,t)}_onEditorMouseMove(e){var a,l,c,d;if(this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._mouseMoveEvent=e,(a=this._contentWidget)!=null&&a.isFocused||(l=this._contentWidget)!=null&&l.isResizing))return;const t=this._hoverSettings.sticky;if(t&&((c=this._contentWidget)!=null&&c.isVisibleFromKeyboard))return;if(this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}const s=this._hoverSettings.hidingDelay;if(((d=this._contentWidget)==null?void 0:d.isVisible)&&t&&s>0){this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(s);return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){var l;if(!e)return;const i=(l=e.target.element)==null?void 0:l.classList.contains("colorpicker-color-decoration"),s=this._editor.getOption(149),o=this._hoverSettings.enabled,r=this._hoverState.activatedByDecoratorClick;if(i&&(s==="click"&&!r||s==="hover"&&!o&&!vYe||s==="clickAndHover"&&!o&&!r)||!i&&!o&&!r){this._hideWidgets();return}this._tryShowHoverWidget(e)||this._hideWidgets()}_tryShowHoverWidget(e){return this._getOrCreateContentWidget().showsOrWillShow(e)}_onKeyDown(e){var s;if(!this._editor.hasModel())return;const t=this._keybindingService.softDispatch(e,this._editor.getDomNode()),i=t.kind===1||t.kind===2&&(t.commandId===dbe||t.commandId===PF||t.commandId===AF)&&((s=this._contentWidget)==null?void 0:s.isVisible);e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||i||this._hideWidgets()}_hideWidgets(){var e,t;this._hoverState.mouseDown&&((e=this._contentWidget)!=null&&e.isColorPickerVisible)||YC.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,(t=this._contentWidget)==null||t.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(nj,this._editor),this._listenersStore.add(this._contentWidget.onContentsChanged(()=>this._onHoverContentsChanged.fire()))),this._contentWidget}showContentHover(e,t,i,s,o=!1){this._hoverState.activatedByDecoratorClick=o,this._getOrCreateContentWidget().startShowingAtRange(e,t,i,s)}_isContentWidgetResizing(){var e;return((e=this._contentWidget)==null?void 0:e.widget.isResizing)||!1}focusedHoverPartIndex(){return this._getOrCreateContentWidget().focusedHoverPartIndex()}updateHoverVerbosityLevel(e,t,i){this._getOrCreateContentWidget().updateHoverVerbosityLevel(e,t,i)}focus(){var e;(e=this._contentWidget)==null||e.focus()}scrollUp(){var e;(e=this._contentWidget)==null||e.scrollUp()}scrollDown(){var e;(e=this._contentWidget)==null||e.scrollDown()}scrollLeft(){var e;(e=this._contentWidget)==null||e.scrollLeft()}scrollRight(){var e;(e=this._contentWidget)==null||e.scrollRight()}pageUp(){var e;(e=this._contentWidget)==null||e.pageUp()}pageDown(){var e;(e=this._contentWidget)==null||e.pageDown()}goToTop(){var e;(e=this._contentWidget)==null||e.goToTop()}goToBottom(){var e;(e=this._contentWidget)==null||e.goToBottom()}get isColorPickerVisible(){var e;return(e=this._contentWidget)==null?void 0:e.isColorPickerVisible}get isHoverVisible(){var e;return(e=this._contentWidget)==null?void 0:e.isVisible}dispose(){var e;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(e=this._contentWidget)==null||e.dispose()}},sj=Cb,Cb.ID="editor.contrib.contentHover",Cb);go=sj=bYe([kne(1,Ae),kne(2,ei)],go);const eY=class eY extends G{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(149);if(t!=="click"&&t!=="clickAndHover")return;const i=e.target;if(i.type!==6||!i.detail.injectedText||i.detail.injectedText.options.attachedData!==nbe||!i.range)return;const s=this._editor.getContribution(go.ID);if(s&&!s.isColorPickerVisible){const o=new D(i.range.startLineNumber,i.range.startColumn+1,i.range.endLineNumber,i.range.endColumn+1);s.showContentHover(o,1,0,!1,!0)}}};eY.ID="editor.contrib.colorContribution";let lP=eY;Ot(lP.ID,lP,2);r0.register(TN);var Mbe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Nw=function(n,e){return function(t,i){e(t,i,n)}},oj,rj,Sb;let Av=(Sb=class extends G{constructor(e,t,i){super(),this._editor=e,this._instantiationService=i,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=R.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=R.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||(e=this._standaloneColorPickerWidget)==null||e.focus():this._standaloneColorPickerWidget=this._instantiationService.createInstance(aj,this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),(e=this._standaloneColorPickerWidget)==null||e.hide(),this._editor.focus()}insertColor(){var e;(e=this._standaloneColorPickerWidget)==null||e.updateEditor(),this.hide()}static get(e){return e.getContribution(oj.ID)}},oj=Sb,Sb.ID="editor.contrib.standaloneColorPickerController",Sb);Av=oj=Mbe([Nw(1,qe),Nw(2,Ae)],Av);Ot(Av.ID,Av,1);const Nne=8,wYe=22;var xb;let aj=(xb=class extends G{constructor(e,t,i,s,o,r,a){var u;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=i,this._keybindingService=o,this._languageFeaturesService=r,this._editorWorkerService=a,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new $),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=s.createInstance(RN,this._editor),this._position=(u=this._editor._getViewModel())==null?void 0:u.getPrimaryCursorState().modelState.position;const l=this._editor.getSelection(),c=l?{startLineNumber:l.startLineNumber,startColumn:l.startColumn,endLineNumber:l.endLineNumber,endColumn:l.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},d=this._register(ld(this._body));this._register(d.onDidBlur(h=>{this.hide()})),this._register(d.onDidFocus(h=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(h=>{var m;const f=(m=h.target.element)==null?void 0:m.classList;f&&f.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(h=>{this._render(h.value,h.foundInEditor)})),this._start(c),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return rj.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(e){const t=await this._computeAsync(e);t&&this._onResult.fire(new yYe(t.result,t.foundInEditor))}async _computeAsync(e){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},i=await this._standaloneColorPickerParticipant.createColorHover(t,new DN(this._editorWorkerService),this._languageFeaturesService.colorProvider);return i?{result:i.colorHover,foundInEditor:i.foundInEditor}:null}_render(e,t){const i=document.createDocumentFragment(),s=this._register(new eP(this._keybindingService)),o={fragment:i,statusBar:s,onContentsChanged:()=>{},hide:()=>this.hide()};this._colorHover=e;const r=this._standaloneColorPickerParticipant.renderHoverParts(o,[e]);if(!r)return;this._register(r.disposables);const a=r.colorPicker;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+"px",this._body.tabIndex=0,this._body.appendChild(i),a.layout();const l=a.body,c=l.saturationBox.domNode.clientWidth,d=l.domNode.clientWidth-c-wYe-Nne,u=a.body.enterButton;u==null||u.onClicked(()=>{this.updateEditor(),this.hide()});const h=a.header,f=h.pickedColorNode;f.style.width=c+Nne+"px";const m=h.originalColorNode;m.style.width=d+"px";const p=a.header.closeButton;p==null||p.onClicked(()=>{this.hide()}),t&&(u&&(u.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}},rj=xb,xb.ID="editor.contrib.standaloneColorPickerWidget",xb);aj=rj=Mbe([Nw(3,Ae),Nw(4,ei),Nw(5,xe),Nw(6,fr)],aj);class yYe{constructor(e,t){this.value=e,this.foundInEditor=t}}class CYe extends pd{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{...Ze("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:_({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker")},precondition:void 0,menu:[{id:Ne.CommandPalette}],metadata:{description:Ze("showOrFocusStandaloneColorPickerDescription","Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.")}})}runEditorCommand(e,t){var i;(i=Av.get(t))==null||i.showOrFocus()}}class SYe extends Ce{constructor(){super({id:"editor.action.hideColorPicker",label:_({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:R.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100},metadata:{description:Ze("hideColorPickerDescription","Hide the standalone color picker.")}})}run(e,t){var i;(i=Av.get(t))==null||i.hide()}}class xYe extends Ce{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:_({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:R.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100},metadata:{description:Ze("insertColorWithStandaloneColorPickerDescription","Insert hex/rgb/hsl colors with the focused standalone color picker.")}})}run(e,t){var i;(i=Av.get(t))==null||i.insertColor()}}de(SYe);de(xYe);vi(CYe);class Gg{constructor(e,t,i){this.languageConfigurationService=i,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;const s=t.length,o=e.length;if(i+s>o)return!1;for(let r=0;r<s;r++){const a=e.charCodeAt(i+r),l=t.charCodeAt(r);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,i,s,o,r){const a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,d=e.endColumn,u=o.getLineContent(a),h=o.getLineContent(c);let f=u.lastIndexOf(t,l-1+t.length),m=h.indexOf(i,d-1-i.length);if(f!==-1&&m!==-1)if(a===c)u.substring(f+t.length,m).indexOf(i)>=0&&(f=-1,m=-1);else{const b=u.substring(f+t.length),v=h.substring(0,m);(b.indexOf(i)>=0||v.indexOf(i)>=0)&&(f=-1,m=-1)}let p;f!==-1&&m!==-1?(s&&f+t.length<u.length&&u.charCodeAt(f+t.length)===32&&(t=t+" "),s&&m>0&&h.charCodeAt(m-1)===32&&(i=" "+i,m-=1),p=Gg._createRemoveBlockCommentOperations(new D(a,f+t.length+1,c,m+1),t,i)):(p=Gg._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=p.length===1?i:null);for(const b of p)r.addTrackedEditOperation(b.range,b.text)}static _createRemoveBlockCommentOperations(e,t,i){const s=[];return D.isEmpty(e)?s.push(Ki.delete(new D(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(s.push(Ki.delete(new D(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),s.push(Ki.delete(new D(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),s}static _createAddBlockCommentOperations(e,t,i,s){const o=[];return D.isEmpty(e)?o.push(Ki.replace(new D(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(o.push(Ki.insert(new U(e.startLineNumber,e.startColumn),t+(s?" ":""))),o.push(Ki.insert(new U(e.endLineNumber,e.endColumn),(s?" ":"")+i))),o}getEditOperations(e,t){const i=this._selection.startLineNumber,s=this._selection.startColumn;e.tokenization.tokenizeIfCheap(i);const o=e.getLanguageIdAtPosition(i,s),r=this.languageConfigurationService.getLanguageConfiguration(o).comments;!r||!r.blockCommentStartToken||!r.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length===2){const s=i[0],o=i[1];return new Ie(s.range.endLineNumber,s.range.endColumn,o.range.startLineNumber,o.range.startColumn)}else{const s=i[0].range,o=this._usedEndToken?-this._usedEndToken.length-1:0;return new Ie(s.endLineNumber,s.endColumn+o,s.endLineNumber,s.endColumn+o)}}}class dh{constructor(e,t,i,s,o,r,a){this.languageConfigurationService=e,this._selection=t,this._indentSize=i,this._type=s,this._insertSpace=o,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,i,s){e.tokenization.tokenizeIfCheap(t);const o=e.getLanguageIdAtPosition(t,1),r=s.getLanguageConfiguration(o).comments,a=r?r.lineCommentToken:null;if(!a)return null;const l=[];for(let c=0,d=i-t+1;c<d;c++)l[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,i,s,o,r,a,l){let c=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let u=0,h=s.length;u<h;u++){const f=s[u],m=o+u;if(m===o&&a){f.ignore=!0;continue}const p=i.getLineContent(m),b=fo(p);if(b===-1){f.ignore=r,f.commentStrOffset=p.length;continue}if(c=!1,f.ignore=!1,f.commentStrOffset=b,d&&!Gg._haystackHasNeedleAtOffset(p,f.commentStr,b)&&(e===0?d=!1:e===1||(f.ignore=!0)),d&&t){const v=b+f.commentStrLength;v<p.length&&p.charCodeAt(v)===32&&(f.commentStrLength+=1)}}if(e===0&&c){d=!1;for(let u=0,h=s.length;u<h;u++)s[u].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:s}}static _gatherPreflightData(e,t,i,s,o,r,a,l){const c=dh._gatherPreflightCommentStrings(i,s,o,l);return c===null?{supported:!1}:dh._analyzeLines(e,t,i,c,s,r,a,l)}_executeLineComments(e,t,i,s){let o;i.shouldRemoveComments?o=dh._createRemoveLineCommentsOperations(i.lines,s.startLineNumber):(dh._normalizeInsertionPoint(e,i.lines,s.startLineNumber,this._indentSize),o=this._createAddLineCommentsOperations(i.lines,s.startLineNumber));const r=new U(s.positionLineNumber,s.positionColumn);for(let a=0,l=o.length;a<l;a++)t.addEditOperation(o[a].range,o[a].text),D.isEmpty(o[a].range)&&D.getStartPosition(o[a].range).equals(r)&&e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(o[a].text||"").length);this._selectionId=t.trackSelection(s)}_attemptRemoveBlockComment(e,t,i,s){let o=t.startLineNumber,r=t.endLineNumber;const a=s.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(o).lastIndexOf(i,a-1),c=e.getLineContent(r).indexOf(s,t.endColumn-1-i.length);return l!==-1&&c===-1&&(c=e.getLineContent(o).indexOf(s,l+i.length),r=o),l===-1&&c!==-1&&(l=e.getLineContent(r).lastIndexOf(i,c),o=r),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(o).indexOf(i),l!==-1&&(c=e.getLineContent(o).indexOf(s,l+i.length))),l!==-1&&e.getLineContent(o).charCodeAt(l+i.length)===32&&(i+=" "),c!==-1&&e.getLineContent(r).charCodeAt(c-1)===32&&(s=" "+s,c-=1),l!==-1&&c!==-1?Gg._createRemoveBlockCommentOperations(new D(o,l+i.length+1,r,c+1),i,s):null}_executeBlockComment(e,t,i){e.tokenization.tokenizeIfCheap(i.startLineNumber);const s=e.getLanguageIdAtPosition(i.startLineNumber,1),o=this.languageConfigurationService.getLanguageConfiguration(s).comments;if(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)return;const r=o.blockCommentStartToken,a=o.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,i,r,a);if(!l){if(i.isEmpty()){const c=e.getLineContent(i.startLineNumber);let d=fo(c);d===-1&&(d=c.length),l=Gg._createAddBlockCommentOperations(new D(i.startLineNumber,d+1,i.startLineNumber,c.length+1),r,a,this._insertSpace)}else l=Gg._createAddBlockCommentOperations(new D(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),r,a,this._insertSpace);l.length===1&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(i);for(const c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new D(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(i);return}i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const s=dh._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return s.supported?this._executeLineComments(e,t,s,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new Ie(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const i=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];r.ignore||i.push(Ki.delete(new D(t+s,r.commentStrOffset+1,t+s,r.commentStrOffset+r.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){const i=[],s=this._insertSpace?" ":"";for(let o=0,r=e.length;o<r;o++){const a=e[o];a.ignore||i.push(Ki.insert(new U(t+o,a.commentStrOffset+1),a.commentStr+s))}return i}static nextVisibleColumn(e,t,i,s){return i?e+(t-e%t):e+s}static _normalizeInsertionPoint(e,t,i,s){let o=1073741824,r,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(i+l);let u=0;for(let h=0,f=t[l].commentStrOffset;u<o&&h<f;h++)u=dh.nextVisibleColumn(u,s,d.charCodeAt(h)===9,1);u<o&&(o=u)}o=Math.floor(o/s)*s;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(i+l);let u=0;for(r=0,a=t[l].commentStrOffset;u<o&&r<a;r++)u=dh.nextVisibleColumn(u,s,d.charCodeAt(r)===9,1);u>o?t[l].commentStrOffset=r-1:t[l].commentStrOffset=r}}}class mZ extends Ce{constructor(e,t){super(t),this._type=e}run(e,t){const i=e.get(Yi);if(!t.hasModel())return;const s=t.getModel(),o=[],r=s.getOptions(),a=t.getOption(23),l=t.getSelections().map((d,u)=>({selection:d,index:u,ignoreFirstLine:!1}));l.sort((d,u)=>D.compareRangesUsingStarts(d.selection,u.selection));let c=l[0];for(let d=1;d<l.length;d++){const u=l[d];c.selection.endLineNumber===u.selection.startLineNumber&&(c.index<u.index?u.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=u))}for(const d of l)o.push(new dh(i,d.selection,r.indentSize,this._type,a.insertSpace,a.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class LYe extends mZ{constructor(){super(0,{id:"editor.action.commentLine",label:_("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:Ne.MenubarEditMenu,group:"5_insert",title:_({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class kYe extends mZ{constructor(){super(1,{id:"editor.action.addCommentLine",label:_("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2081),weight:100}})}}class NYe extends mZ{constructor(){super(2,{id:"editor.action.removeCommentLine",label:_("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2099),weight:100}})}}class IYe extends Ce{constructor(){super({id:"editor.action.blockComment",label:_("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:Ne.MenubarEditMenu,group:"5_insert",title:_({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const i=e.get(Yi);if(!t.hasModel())return;const s=t.getOption(23),o=[],r=t.getSelections();for(const a of r)o.push(new Gg(a,s.insertSpace,i));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}de(LYe);de(kYe);de(NYe);de(IYe);var EYe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Op=function(n,e){return function(t,i){e(t,i,n)}},lj,Lb;let QC=(Lb=class{static get(e){return e.getContribution(lj.ID)}constructor(e,t,i,s,o,r,a,l){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=s,this._keybindingService=o,this._menuService=r,this._configurationService=a,this._workspaceContextService=l,this._toDispose=new ne,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(c=>this._onContextMenu(c))),this._toDispose.add(this._editor.onMouseWheel(c=>{if(this._contextMenuIsBeingShownCount>0){const d=this._contextViewService.getContextViewElement(),u=c.srcElement;u.shadowRoot&&mv(d)===u.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(c=>{this._editor.getOption(24)&&c.keyCode===58&&(c.preventDefault(),c.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu(e.event);if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let i=!1;for(const s of this._editor.getSelections())if(s.containsPosition(e.target.position)){i=!0;break}i||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const i=[],s=this._menuService.getMenuActions(t,this._contextKeyService,{arg:e.uri});for(const o of s){const[,r]=o;let a=0;for(const l of r)if(l instanceof fy){const c=this._getMenuActions(e,l.item.submenu);c.length>0&&(i.push(new SC(l.id,l.label,c)),a++)}else i.push(l),a++;a&&i.push(new Ss)}return i.length&&i.pop(),i}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const i=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let s=t;if(!s){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const r=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),a=un(this._editor.getDomNode()),l=a.left+r.left,c=a.top+r.top+r.height;s={x:l,y:c}}const o=this._editor.getOption(128)&&!rd;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:o?this._editor.getOverflowWidgetsDomNode()??this._editor.getDomNode():void 0,getAnchor:()=>s,getActions:()=>e,getActionViewItem:r=>{const a=this._keybindingFor(r);if(a)return new FC(r,r,{label:!0,keybinding:a.getLabel(),isMenu:!0});const l=r;return typeof l.getActionViewItem=="function"?l.getActionViewItem():new FC(r,r,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:r=>this._keybindingFor(r),onHide:r=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:i})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||H3e(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(73);let i=0;const s=c=>({id:`menu-action-${++i}`,label:c.label,tooltip:"",class:void 0,enabled:typeof c.enabled>"u"?!0:c.enabled,checked:c.checked,run:c.run}),o=(c,d)=>new SC(`menu-action-${++i}`,c,d,void 0),r=(c,d,u,h,f)=>{if(!d)return s({label:c,enabled:d,run:()=>{}});const m=b=>()=>{this._configurationService.updateValue(u,b)},p=[];for(const b of f)p.push(s({label:b.label,checked:h===b.value,run:m(b.value)}));return o(c,p)},a=[];a.push(s({label:_("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new Ss),a.push(s({label:_("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(r(_("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:_("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:_("context.minimap.size.fill","Fill"),value:"fill"},{label:_("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(r(_("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:_("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:_("context.minimap.slider.always","Always"),value:"always"}]));const l=this._editor.getOption(128)&&!rd;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:c=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}},lj=Lb,Lb.ID="editor.contrib.contextmenu",Lb);QC=lj=EYe([Op(1,Zr),Op(2,Df),Op(3,qe),Op(4,ei),Op(5,Oa),Op(6,_t),Op(7,yv)],QC);class DYe extends Ce{constructor(){super({id:"editor.action.showContextMenu",label:_("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:R.textInputFocus,primary:1092,weight:100}})}run(e,t){var i;(i=QC.get(t))==null||i.showContextMenu()}}Ot(QC.ID,QC,2);de(DYe);class HB{constructor(e){this.selections=e}equals(e){const t=this.selections.length,i=e.selections.length;if(t!==i)return!1;for(let s=0;s<t;s++)if(!this.selections[s].equalsSelection(e.selections[s]))return!1;return!0}}class VB{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}}const YA=class YA extends G{static get(e){return e.getContribution(YA.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const i=new HB(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i)||(this._undoStack.push(new VB(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new VB(new HB(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new VB(new HB(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}};YA.ID="editor.contrib.cursorUndoRedoController";let JC=YA;class TYe extends Ce{constructor(){super({id:"cursorUndo",label:_("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:R.textInputFocus,primary:2099,weight:100}})}run(e,t,i){var s;(s=JC.get(t))==null||s.cursorUndo()}}class RYe extends Ce{constructor(){super({id:"cursorRedo",label:_("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,i){var s;(s=JC.get(t))==null||s.cursorRedo()}}Ot(JC.ID,JC,0);de(TYe);de(RYe);class MYe{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){const i=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new D(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new Ie(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new Ie(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new Ie(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new Ie(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new Ie(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function R0(n){return Lt?n.altKey:n.ctrlKey}const ag=class ag extends G{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(35)||this._editor.getOption(22)||(R0(e)&&(this._modifierPressed=!0),this._mouseDown&&R0(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(35)||this._editor.getOption(22)||(R0(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===ag.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const s=(this._editor.getSelections()||[]).filter(o=>t.position&&o.containsPosition(t.position));if(s.length===1)this._dragSelection=s[0];else return}R0(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new U(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let i=null;if(e.event.shiftKey){const s=this._editor.getSelection();if(s){const{selectionStartLineNumber:o,selectionStartColumn:r}=s;i=[new Ie(o,r,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map(s=>s.containsPosition(t)?new Ie(t.lineNumber,t.column,t.lineNumber,t.column):s);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(R0(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(ag.ID,new MYe(this._dragSelection,t,R0(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new D(e.lineNumber,e.column,e.lineNumber,e.column),options:ag._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}};ag.ID="editor.contrib.dragAndDrop",ag.TRIGGER_KEY_VALUE=Lt?6:5,ag._DECORATION_OPTIONS=rt.register({description:"dnd-target",className:"dnd-target"});let cP=ag;Ot(cP.ID,cP,2);Ot(Sf.ID,Sf,0);H1(SV);_e(new class extends Hn{constructor(){super({id:O_e,precondition:tZ,kbOpts:{weight:100,primary:2137}})}runEditorCommand(n,e){var t;return(t=Sf.get(e))==null?void 0:t.changePasteType()}});_e(new class extends Hn{constructor(){super({id:"editor.hidePasteWidget",precondition:tZ,kbOpts:{weight:100,primary:9}})}runEditorCommand(n,e){var t;(t=Sf.get(e))==null||t.clearWidgets()}});var kb;de((kb=class extends Ce{constructor(){super({id:"editor.action.pasteAs",label:_("pasteAs","Paste As..."),alias:"Paste As...",precondition:R.writable,metadata:{description:"Paste as",args:[{name:"args",schema:kb.argsSchema}]}})}run(e,t,i){var o;let s=typeof(i==null?void 0:i.kind)=="string"?i.kind:void 0;return!s&&i&&(s=typeof i.id=="string"?i.id:void 0),(o=Sf.get(t))==null?void 0:o.pasteAs(s?new Hi(s):void 0)}},kb.argsSchema={type:"object",properties:{kind:{type:"string",description:_("pasteAs.kind","The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}},kb));de(class extends Ce{constructor(){super({id:"editor.action.pasteAsText",label:_("pasteAsText","Paste as Text"),alias:"Paste as Text",precondition:R.writable})}run(n,e){var t;return(t=Sf.get(e))==null?void 0:t.pasteAs({providerId:Iv.id})}});class PYe{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}}class Ine{constructor(e){this.identifier=e}}const Pbe=kt("treeViewsDndService");Tt(Pbe,PYe,1);var AYe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},DD=function(n,e){return function(t,i){e(t,i,n)}},cj;const Abe="editor.experimental.dropIntoEditor.defaultProvider",Obe="editor.changeDropType",pZ=new we("dropWidgetVisible",!1,_("dropWidgetVisible","Whether the drop widget is showing"));var Nb;let e1=(Nb=class extends G{static get(e){return e.getContribution(cj.ID)}constructor(e,t,i,s,o){super(),this._configService=i,this._languageFeaturesService=s,this._treeViewsDragAndDropService=o,this.treeItemsTransfer=yV.getInstance(),this._dropProgressManager=this._register(t.createInstance(YM,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(QM,"dropIntoEditor",e,pZ,{id:Obe,label:_("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor(r=>this.onDropIntoEditor(e,r.position,r.event)))}clearWidgets(){this._postDropWidgetManager.clear()}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(e,t,i){var o;if(!i.dataTransfer||!e.hasModel())return;(o=this._currentOperation)==null||o.cancel(),e.focus(),e.setPosition(t);const s=Xn(async r=>{const a=new ne,l=a.add(new ip(e,1,void 0,r));try{const c=await this.extractDataTransferData(i);if(c.size===0||l.token.isCancellationRequested)return;const d=e.getModel();if(!d)return;const u=this._languageFeaturesService.documentDropEditProvider.ordered(d).filter(f=>f.dropMimeTypes?f.dropMimeTypes.some(m=>c.matches(m)):!0),h=a.add(await this.getDropEdits(u,d,t,c,l));if(l.token.isCancellationRequested)return;if(h.edits.length){const f=this.getInitialActiveEditIndex(d,h.edits),m=e.getOption(36).showDropSelector==="afterDrop";await this._postDropWidgetManager.applyEditAndShowIfNeeded([D.fromPositions(t)],{activeEditIndex:f,allEdits:h.edits},m,async p=>p,r)}}finally{a.dispose(),this._currentOperation===s&&(this._currentOperation=void 0)}});this._dropProgressManager.showWhile(t,_("dropIntoEditorProgress","Running drop handlers. Click to cancel"),s,{cancel:()=>s.cancel()}),this._currentOperation=s}async getDropEdits(e,t,i,s,o){const r=new ne,a=await xI(Promise.all(e.map(async c=>{try{const d=await c.provideDocumentDropEdits(t,i,s,o.token);return d&&r.add(d),d==null?void 0:d.edits.map(u=>({...u,providerId:c.id}))}catch(d){console.error(d)}})),o.token),l=Yl(a??[]).flat();return{edits:P_e(l),dispose:()=>r.dispose()}}getInitialActiveEditIndex(e,t){const i=this._configService.getValue(Abe,{resource:e.uri});for(const[s,o]of Object.entries(i)){const r=new Hi(o),a=t.findIndex(l=>r.value===l.providerId&&l.handledMimeType&&k_e(s,[l.handledMimeType]));if(a>=0)return a}return 0}async extractDataTransferData(e){if(!e.dataTransfer)return new L_e;const t=E_e(e.dataTransfer);if(this.treeItemsTransfer.hasData(Ine.prototype)){const i=this.treeItemsTransfer.getData(Ine.prototype);if(Array.isArray(i))for(const s of i){const o=await this._treeViewsDragAndDropService.removeDragOperationTransfer(s.identifier);if(o)for(const[r,a]of o)t.replace(r,a)}}return t}},cj=Nb,Nb.ID="editor.contrib.dropIntoEditorController",Nb);e1=cj=AYe([DD(1,Ae),DD(2,_t),DD(3,xe),DD(4,Pbe)],e1);Ot(e1.ID,e1,2);H1(CV);_e(new class extends Hn{constructor(){super({id:Obe,precondition:pZ,kbOpts:{weight:100,primary:2137}})}runEditorCommand(n,e,t){var i;(i=e1.get(e))==null||i.changeDropType()}});_e(new class extends Hn{constructor(){super({id:"editor.hideDropWidget",precondition:pZ,kbOpts:{weight:100,primary:9}})}runEditorCommand(n,e,t){var i;(i=e1.get(e))==null||i.clearWidgets()}});Zi.as(rc.Configuration).registerConfiguration({...MI,properties:{[Abe]:{type:"object",scope:5,description:_("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}});const Js=class Js{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){const t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const s=i.options;if(s===Js._FIND_MATCH_DECORATION||s===Js._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let s=0,o=this._decorations.length;s<o;s++){const r=this._editor.getModel().getDecorationRange(this._decorations[s]);if(e.equalsRange(r)){t=this._decorations[s],i=s+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(s=>{if(this._highlightedDecorationId!==null&&(s.changeDecorationOptions(this._highlightedDecorationId,Js._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,s.changeDecorationOptions(this._highlightedDecorationId,Js._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(s.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let o=this._editor.getModel().getDecorationRange(t);if(o.startLineNumber!==o.endLineNumber&&o.endColumn===1){const r=o.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(r);o=new D(o.startLineNumber,o.startColumn,r,a)}this._rangeHighlightDecorationId=s.addDecoration(o,Js._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let s=Js._FIND_MATCH_DECORATION;const o=[];if(e.length>1e3){s=Js._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/c));let u=e[0].range.startLineNumber,h=e[0].range.endLineNumber;for(let f=1,m=e.length;f<m;f++){const p=e[f].range;h+d>=p.startLineNumber?p.endLineNumber>h&&(h=p.endLineNumber):(o.push({range:new D(u,1,h,1),options:Js._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=p.startLineNumber,h=p.endLineNumber)}o.push({range:new D(u,1,h,1),options:Js._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const r=new Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]={range:e[a].range,options:s};this._decorations=i.deltaDecorations(this._decorations,r),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>i.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>i.addDecoration(a,Js._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(!(!s||s.endLineNumber>e.lineNumber)){if(s.endLineNumber<e.lineNumber)return s;if(!(s.endColumn>e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,i=this._decorations.length;t<i;t++){const s=this._decorations[t],o=this._editor.getModel().getDecorationRange(s);if(!(!o||o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}};Js._CURRENT_FIND_MATCH_DECORATION=rt.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",inlineClassName:"currentFindMatchInline",showIfCollapsed:!0,overviewRuler:{color:sn(F3),position:Na.Center},minimap:{color:sn(OW),position:1}}),Js._FIND_MATCH_DECORATION=rt.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",inlineClassName:"findMatchInline",showIfCollapsed:!0,overviewRuler:{color:sn(F3),position:Na.Center},minimap:{color:sn(OW),position:1}}),Js._FIND_MATCH_NO_OVERVIEW_DECORATION=rt.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),Js._FIND_MATCH_ONLY_OVERVIEW_DECORATION=rt.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:sn(F3),position:Na.Center}}),Js._RANGE_HIGHLIGHT_DECORATION=rt.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),Js._FIND_SCOPE_DECORATION=rt.register({description:"find-scope",className:"findScope",isWholeLine:!0});let dj=Js;class OYe{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const i=[];for(let r=0;r<this._ranges.length;r++)i.push({range:this._ranges[r],text:this._replaceStrings[r]});i.sort((r,a)=>D.compareRangesUsingStarts(r.range,a.range));const s=[];let o=i[0];for(let r=1;r<i.length;r++)o.range.endLineNumber===i[r].range.startLineNumber&&o.range.endColumn===i[r].range.startColumn?(o.range=o.range.plusRange(i[r].range),o.text=o.text+i[r].text):(s.push(o),o=i[r]);s.push(o);for(const r of s)t.addEditOperation(r.range,r.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function Fbe(n,e){if(n&&n[0]!==""){const t=Ene(n,e,"-"),i=Ene(n,e,"_");return t&&!i?Dne(n,e,"-"):!t&&i?Dne(n,e,"_"):n[0].toUpperCase()===n[0]?e.toUpperCase():n[0].toLowerCase()===n[0]?e.toLowerCase():KRe(n[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):n[0][0].toUpperCase()!==n[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function Ene(n,e,t){return n[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&n[0].split(t).length===e.split(t).length}function Dne(n,e,t){const i=e.split(t),s=n[0].split(t);let o="";return i.forEach((r,a)=>{o+=Fbe([s[a]],r)+t}),o.slice(0,-1)}class Tne{constructor(e){this.staticValue=e,this.kind=0}}class FYe{constructor(e){this.pieces=e,this.kind=1}}class t1{static fromStaticValue(e){return new t1([J_.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new Tne(""):e.length===1&&e[0].staticValue!==null?this._state=new Tne(e[0].staticValue):this._state=new FYe(e)}buildReplaceString(e,t){if(this._state.kind===0)return t?Fbe(e,this._state.staticValue):this._state.staticValue;let i="";for(let s=0,o=this._state.pieces.length;s<o;s++){const r=this._state.pieces[s];if(r.staticValue!==null){i+=r.staticValue;continue}let a=t1._substitute(r.matchIndex,e);if(r.caseOps!==null&&r.caseOps.length>0){const l=[],c=r.caseOps.length;let d=0;for(let u=0,h=a.length;u<h;u++){if(d>=c){l.push(a.slice(u));break}switch(r.caseOps[d]){case"U":l.push(a[u].toUpperCase());break;case"u":l.push(a[u].toUpperCase()),d++;break;case"L":l.push(a[u].toLowerCase());break;case"l":l.push(a[u].toLowerCase()),d++;break;default:l.push(a[u])}}a=l.join("")}i+=a}return i}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let i="";for(;e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class J_{static staticValue(e){return new J_(e,-1,null)}static caseOps(e,t){return new J_(null,e,t)}constructor(e,t,i){this.staticValue=e,this.matchIndex=t,!i||i.length===0?this.caseOps=null:this.caseOps=i.slice(0)}}class BYe{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=J_.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=J_.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=J_.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new t1(this._result)}}function WYe(n){if(!n||n.length===0)return new t1(null);const e=[],t=new BYe(n);for(let i=0,s=n.length;i<s;i++){const o=n.charCodeAt(i);if(o===92){if(i++,i>=s)break;const r=n.charCodeAt(i);switch(r){case 92:t.emitUnchanged(i-1),t.emitStatic("\\",i+1);break;case 110:t.emitUnchanged(i-1),t.emitStatic(`
`,i+1);break;case 116:t.emitUnchanged(i-1),t.emitStatic("	",i+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(i-1),t.emitStatic("",i+1),e.push(String.fromCharCode(r));break}continue}if(o===36){if(i++,i>=s)break;const r=n.charCodeAt(i);if(r===36){t.emitUnchanged(i-1),t.emitStatic("$",i+1);continue}if(r===48||r===38){t.emitUnchanged(i-1),t.emitMatchIndex(0,i+1,e),e.length=0;continue}if(49<=r&&r<=57){let a=r-48;if(i+1<s){const l=n.charCodeAt(i+1);if(48<=l&&l<=57){i++,a=a*10+(l-48),t.emitUnchanged(i-2),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}t.emitUnchanged(i-1),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}}return t.finalize()}const Pf=new we("findWidgetVisible",!1);Pf.toNegated();const VF=new we("findInputFocussed",!1),_Z=new we("replaceInputFocussed",!1),TD={primary:545,mac:{primary:2593}},RD={primary:565,mac:{primary:2613}},MD={primary:560,mac:{primary:2608}},PD={primary:554,mac:{primary:2602}},AD={primary:558,mac:{primary:2606}},ki={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Zg=19999,HYe=240;class lL{constructor(e,t){this._toDispose=new ne,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new oc,this._decorations=new dj(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new li(()=>{if(this._editor.hasModel())return this.research(!1)},100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(i=>{(i.reason===3||i.reason===5||i.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(i=>{this._ignoreModelContentChanged||(i.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(i=>this._onStateChanged(i))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,gi(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},HYe)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;typeof t<"u"?t!==null&&(Array.isArray(t)?i=t:i=[t]):i=this._decorations.getFindScopes(),i!==null&&(i=i.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new D(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const s=this._findMatches(i,!1,Zg);this._decorations.set(s,i);const o=this._editor.getSelection();let r=this._decorations.getCurrentMatchesPosition(o);if(r===0&&s.length>0){const a=Ak(s.map(l=>l.range),l=>D.compareRangesUsingStarts(l,o)>=0);r=a>0?a-1+1:r}this._state.changeMatchInfo(r,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:s}=e;const o=this._editor.getModel();return t||s===1?(i===1?i=o.getLineCount():i--,s=o.getLineMaxColumn(i)):s--,new U(i,s)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<Zg){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;const i=this._decorations.getFindScope(),s=lL._getSearchRange(this._editor.getModel(),i);s.getEndPosition().isBefore(e)&&(e=s.getEndPosition()),e.isBefore(s.getStartPosition())&&(e=s.getEndPosition());const{lineNumber:o,column:r}=e,a=this._editor.getModel();let l=new U(o,r),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1)),!!c){if(!t&&!s.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:s}=e;const o=this._editor.getModel();return t||s===o.getLineMaxColumn(i)?(i===o.getLineCount()?i=1:i++,s=1):s++,new U(i,s)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const i=this._decorations.matchBeforePosition(e);i&&this._setCurrentFindMatch(i);return}if(this._decorations.getCount()<Zg){let i=this._decorations.matchAfterPosition(e);i&&i.isEmpty()&&i.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),i=this._decorations.matchAfterPosition(e)),i&&this._setCurrentFindMatch(i);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,s=!1){if(this._cannotFind())return null;const o=this._decorations.getFindScope(),r=lL._getSearchRange(this._editor.getModel(),o);r.getEndPosition().isBefore(e)&&(e=r.getStartPosition()),e.isBefore(r.getStartPosition())&&(e=r.getStartPosition());const{lineNumber:a,column:l}=e,c=this._editor.getModel();let d=new U(a,l),u=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t);return i&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),u=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t)),u?!s&&!r.containsRange(u.range)?this._getNextMatch(u.range.getEndPosition(),t,i,!0):u:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){const t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?WYe(this._state.replaceString):t1.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){const s=e.buildReplaceString(i.matches,this._state.preserveCase),o=new Rs(t,s);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new U(t.startLineNumber,t.startColumn+s.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const s=(e||[null]).map(o=>lL._getSearchRange(this._editor.getModel(),o));return this._editor.getModel().findMatches(this._state.searchString,s,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=Zg?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new Up(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null).parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let u="mu";i.ignoreCase&&(u+="i"),i.global&&(u+="g"),i=new RegExp(i.source,u)}const s=this._editor.getModel(),o=s.getValue(1),r=s.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=o.replace(i,function(){return a.buildReplaceString(arguments,c)}):l=o.replace(i,a.buildReplaceString(null,c));const d=new hG(r,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),s=[];for(let r=0,a=i.length;r<a;r++)s[r]=t.buildReplaceString(i[r].matches,this._state.preserveCase);const o=new OYe(this._editor.getSelection(),i.map(r=>r.range),s);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let i=this._findMatches(e,!1,1073741824).map(o=>new Ie(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn));const s=this._editor.getSelection();for(let o=0,r=i.length;o<r;o++)if(i[o].equalsRange(s)){i=[s].concat(i.slice(0,o)).concat(i.slice(o+1));break}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const XA=class XA extends Ba{constructor(e,t,i){super(),this._hideSoon=this._register(new li(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s={inputActiveOptionBorder:ye(U4),inputActiveOptionForeground:ye($4),inputActiveOptionBackground:ye(II)},o=this._register(OC());this.caseSensitive=this._register(new fme({appendTitle:this._keybindingLabelFor(ki.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,hoverDelegate:o,...s})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new gme({appendTitle:this._keybindingLabelFor(ki.ToggleWholeWordCommand),isChecked:this._state.wholeWord,hoverDelegate:o,...s})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new mme({appendTitle:this._keybindingLabelFor(ki.ToggleRegexCommand),isChecked:this._state.isRegex,hoverDelegate:o,...s})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(r=>{let a=!1;r.isRegex&&(this.regex.checked=this._state.isRegex,a=!0),r.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,a=!0),r.matchCase&&(this.caseSensitive.checked=this._state.matchCase,a=!0),!this._state.isRevealed&&a&&this._revealTemporarily()})),this._register(Q(this._domNode,fe.MOUSE_LEAVE,r=>this._onMouseLeave())),this._register(Q(this._domNode,"mouseover",r=>this._onMouseOver()))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return XA.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}};XA.ID="editor.contrib.findOptionsWidget";let uj=XA;function OD(n,e){return n===1?!0:n===2?!1:e}class VYe extends G{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return OD(this._isRegexOverride,this._isRegex)}get wholeWord(){return OD(this._wholeWordOverride,this._wholeWord)}get matchCase(){return OD(this._matchCaseOverride,this._matchCase)}get preserveCase(){return OD(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new $),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,i){const s={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,s.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,s.matchesCount=!0,o=!0),typeof i<"u"&&(D.equalsRange(this._currentMatch,i)||(this._currentMatch=i,s.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(s)}change(e,t,i=!0){var d;const s={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;const r=this.isRegex,a=this.wholeWord,l=this.matchCase,c=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&((d=e.searchScope)!=null&&d.every(u=>{var h;return(h=this._searchScope)==null?void 0:h.some(f=>!D.equalsRange(f,u))})||(this._searchScope=e.searchScope,s.searchScope=!0,o=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,o=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,s.isSearching=!0,o=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,s.filters=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,r!==this.isRegex&&(o=!0,s.isRegex=!0),a!==this.wholeWord&&(o=!0,s.wholeWord=!0),l!==this.matchCase&&(o=!0,s.matchCase=!0),c!==this.preserveCase&&(o=!0,s.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Zg}}const jYe=_("defaultLabel","input"),zYe=_("label.preserveCaseToggle","Preserve Case");class UYe extends O1{constructor(e){super({icon:he.preserveCase,title:zYe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Wo("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class $Ye extends Ba{constructor(e,t,i,s){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new $),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new $),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new $),this._onInput=this._register(new $),this._onKeyUp=this._register(new $),this._onPreserveCaseKeyDown=this._register(new $),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||jYe;const o=s.appendPreserveCaseLabel||"",r=s.history||[],a=!!s.flexibleHeight,l=!!s.flexibleWidth,c=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new pme(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:r,showHistoryHint:s.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:s.inputBoxStyles})),this.preserveCase=this._register(new UYe({appendTitle:o,isChecked:!1,...s.toggleStyles})),this._register(this.preserveCase.onChange(h=>{this._onDidOptionChange.fire(h),!h&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(h=>{this._onPreserveCaseKeyDown.fire(h)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const d=[this.preserveCase.domNode];this.onkeydown(this.domNode,h=>{if(h.equals(15)||h.equals(17)||h.equals(9)){const f=d.indexOf(this.domNode.ownerDocument.activeElement);if(f>=0){let m=-1;h.equals(17)?m=(f+1)%d.length:h.equals(15)&&(f===0?m=d.length-1:m=f-1),h.equals(9)?(d[f].blur(),this.inputBox.focus()):m>=0&&d[m].focus(),Dt.stop(h,!0)}}});const u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),e==null||e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){var e;(e=this.inputBox)==null||e.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var Bbe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Wbe=function(n,e){return function(t,i){e(t,i,n)}};const bZ=new we("suggestWidgetVisible",!1,_("suggestWidgetVisible","Whether suggestion are visible")),vZ="historyNavigationWidgetFocus",Hbe="historyNavigationForwardsEnabled",Vbe="historyNavigationBackwardsEnabled";let Jh;const FD=[];function jbe(n,e){if(FD.includes(e))throw new Error("Cannot register the same widget multiple times");FD.push(e);const t=new ne,i=new we(vZ,!1).bindTo(n),s=new we(Hbe,!0).bindTo(n),o=new we(Vbe,!0).bindTo(n),r=()=>{i.set(!0),Jh=e},a=()=>{i.set(!1),Jh===e&&(Jh=void 0)};return S4(e.element)&&r(),t.add(e.onDidFocus(()=>r())),t.add(e.onDidBlur(()=>a())),t.add(Pe(()=>{FD.splice(FD.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:s,historyNavigationBackwardsEnablement:o,dispose(){t.dispose()}}}let hj=class extends _me{constructor(e,t,i,s){super(e,t,i);const o=this._register(s.createScoped(this.inputBox.element));this._register(jbe(o,this.inputBox))}};hj=Bbe([Wbe(3,qe)],hj);let fj=class extends $Ye{constructor(e,t,i,s,o=!1){super(e,t,o,i);const r=this._register(s.createScoped(this.inputBox.element));this._register(jbe(r,this.inputBox))}};fj=Bbe([Wbe(3,qe)],fj);Ao.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:se.and(se.has(vZ),se.equals(Vbe,!0),se.not("isComposing"),bZ.isEqualTo(!1)),primary:16,secondary:[528],handler:n=>{Jh==null||Jh.showPreviousValue()}});Ao.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:se.and(se.has(vZ),se.equals(Hbe,!0),se.not("isComposing"),bZ.isEqualTo(!1)),primary:18,secondary:[530],handler:n=>{Jh==null||Jh.showNextValue()}});function Rne(n){var e,t;return((e=n.lookupKeybinding("history.showPrevious"))==null?void 0:e.getElectronAccelerator())==="Up"&&((t=n.lookupKeybinding("history.showNext"))==null?void 0:t.getElectronAccelerator())==="Down"}const Mne=Di("find-collapsed",he.chevronRight,_("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Pne=Di("find-expanded",he.chevronDown,_("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),KYe=Di("find-selection",he.selection,_("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),qYe=Di("find-replace",he.replace,_("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),GYe=Di("find-replace-all",he.replaceAll,_("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),ZYe=Di("find-previous-match",he.arrowUp,_("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),YYe=Di("find-next-match",he.arrowDown,_("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),XYe=_("label.findDialog","Find / Replace"),QYe=_("label.find","Find"),JYe=_("placeholder.find","Find"),eXe=_("label.previousMatchButton","Previous Match"),tXe=_("label.nextMatchButton","Next Match"),iXe=_("label.toggleSelectionFind","Find in Selection"),nXe=_("label.closeButton","Close"),sXe=_("label.replace","Replace"),oXe=_("placeholder.replace","Replace"),rXe=_("label.replaceButton","Replace"),aXe=_("label.replaceAllButton","Replace All"),lXe=_("label.toggleReplaceButton","Toggle Replace"),cXe=_("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Zg),dXe=_("label.matchesLocation","{0} of {1}"),Ane=_("label.noResults","No results"),Ed=419,uXe=275,hXe=uXe-54;let AS=69;const fXe=33,One="ctrlEnterReplaceAll.windows.donotask",Fne=Lt?256:2048;class jB{constructor(e){this.afterLineNumber=e,this.heightInPx=fXe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Bne(n,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionStart>0){n.stopPropagation();return}}function Wne(n,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionEnd<t.value.length){n.stopPropagation();return}}const QA=class QA extends Ba{constructor(e,t,i,s,o,r,a,l,c,d){super(),this._hoverService=d,this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=s,this._keybindingService=o,this._contextKeyService=r,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(One,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new hl(500),this._register(Pe(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(u=>this._onStateChanged(u))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(u=>{if(u.hasChanged(92)&&(this._codeEditor.getOption(92)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),u.hasChanged(146)&&this._tryUpdateWidgetWidth(),u.hasChanged(2)&&this.updateAccessibilitySupport(),u.hasChanged(41)){const h=this._codeEditor.getOption(41).loop;this._state.change({loop:h},!1);const f=this._codeEditor.getOption(41).addExtraSpaceOnTop;f&&!this._viewZone&&(this._viewZone=new jB(0),this._showViewZone()),!f&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(async()=>{if(this._isVisible){const u=await this._controller.getGlobalBufferTerm();u&&u!==this._state.searchString&&(this._state.change({searchString:u},!1),this._findInput.select())}})),this._findInputFocused=VF.bindTo(r),this._findFocusTracker=this._register(ld(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=_Z.bindTo(r),this._replaceFocusTracker=this._register(ld(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new jB(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(u=>{if(u.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return QA.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(92)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=xr(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,et)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){var t;this._matchesCount.style.minWidth=AS+"px",this._state.matchesCount>=Zg?this._matchesCount.title=cXe:this._matchesCount.title="",(t=this._matchesCount.firstChild)==null||t.remove();let e;if(this._state.matchesCount>0){let i=String(this._state.matchesCount);this._state.matchesCount>=Zg&&(i+="+");let s=String(this._state.matchesPosition);s==="0"&&(s="?"),e=hv(dXe,s,i)}else e=Ane;this._matchesCount.appendChild(document.createTextNode(e)),Oo(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),AS=Math.max(AS,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===Ane)return i===""?_("ariaSearchNoResultEmpty","{0} found",e):_("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const s=_("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();return o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1?`${o.getLineContent(t.startLineNumber)}, ${s}`:s}return _("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const i=!this._codeEditor.getOption(92);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const i=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=i;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const s=un(i),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),r=s.left+(o?o.left:0),a=o?o.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=phe(this._domNode).left;r>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());s.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const i=this._viewZone;this._viewZoneId!==void 0||!i||this._codeEditor.changeViewZones(s=>{i.heightInPx=this._getHeight(),this._viewZoneId=s.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new jB(0));const i=this._viewZone;this._codeEditor.changeViewZones(s=>{if(this._viewZoneId!==void 0){const o=this._getHeight();if(o===i.heightInPx)return;const r=o-i.heightInPx;i.heightInPx=o,s.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r);return}else{let o=this._getHeight();if(o-=this._codeEditor.getOption(84).top,o<=0)return;i.heightInPx=o,this._viewZoneId=s.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=e.width,s=e.minimap.minimapWidth;let o=!1,r=!1,a=!1;if(this._resized&&xr(this._domNode)>Ed){this._domNode.style.maxWidth=`${i-28-s-15}px`,this._replaceInput.width=xr(this._findInput.domNode);return}if(Ed+28+s>=i&&(r=!0),Ed+28+s-AS>=i&&(a=!0),Ed+28+s-AS>=i+50&&(o=!0),this._domNode.classList.toggle("collapsed-find-widget",o),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",r),!a&&!o&&(this._domNode.style.maxWidth=`${i-28-s-15}px`),this._findInput.layout({collapsedFindWidget:o,narrowFindWidget:a,reducedFindWidget:r}),this._resized){const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=xr(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const i=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!D.equalsRange(t,i)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(Fne|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Bne(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return Wne(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(Fne|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{As&&Gc&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(_("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(One,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Bne(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return Wne(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new hj(null,this._contextViewProvider,{width:hXe,label:QYe,placeholder:JYe,appendCaseSensitiveLabel:this._keybindingLabelFor(ki.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(ki.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(ki.ToggleRegexCommand),validation:d=>{if(d.length===0||!this._findInput.getRegex())return null;try{return new RegExp(d,"gu"),null}catch(u){return{content:u.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>Rne(this._keybindingService),inputBoxStyles:$2,toggleStyles:U2},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(d=>this._onFindInputKeyDown(d))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(d=>{d.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),d.preventDefault())})),this._register(this._findInput.onRegexKeyDown(d=>{d.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),d.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(d=>{this._tryUpdateHeight()&&this._showViewZone()})),Mo&&this._register(this._findInput.onMouseDown(d=>this._onFindInputMouseDown(d))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();const i=this._register(OC());this._prevBtn=this._register(new M0({label:eXe+this._keybindingLabelFor(ki.PreviousMatchFindAction),icon:ZYe,hoverDelegate:i,onTrigger:()=>{Fg(this._codeEditor.getAction(ki.PreviousMatchFindAction)).run().then(void 0,et)}},this._hoverService)),this._nextBtn=this._register(new M0({label:tXe+this._keybindingLabelFor(ki.NextMatchFindAction),icon:YYe,hoverDelegate:i,onTrigger:()=>{Fg(this._codeEditor.getAction(ki.NextMatchFindAction)).run().then(void 0,et)}},this._hoverService));const s=document.createElement("div");s.className="find-part",s.appendChild(this._findInput.domNode);const o=document.createElement("div");o.className="find-actions",s.appendChild(o),o.appendChild(this._matchesCount),o.appendChild(this._prevBtn.domNode),o.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new O1({icon:KYe,title:iXe+this._keybindingLabelFor(ki.ToggleSearchScopeCommand),isChecked:!1,hoverDelegate:i,inputActiveOptionBackground:ye(II),inputActiveOptionBorder:ye(U4),inputActiveOptionForeground:ye($4)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let d=this._codeEditor.getSelections();d=d.map(u=>(u.endColumn===1&&u.endLineNumber>u.startLineNumber&&(u=u.setEndPosition(u.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(u.endLineNumber-1))),u.isEmpty()?null:u)).filter(u=>!!u),d.length&&this._state.change({searchScope:d},!0)}}else this._state.change({searchScope:null},!0)})),o.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new M0({label:nXe+this._keybindingLabelFor(ki.CloseFindWidgetCommand),icon:qme,hoverDelegate:i,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:d=>{d.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),d.preventDefault())}},this._hoverService)),this._replaceInput=this._register(new fj(null,void 0,{label:sXe,placeholder:oXe,appendPreserveCaseLabel:this._keybindingLabelFor(ki.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Rne(this._keybindingService),inputBoxStyles:$2,toggleStyles:U2},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(d=>this._onReplaceInputKeyDown(d))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(d=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(d=>{d.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),d.preventDefault())}));const r=this._register(OC());this._replaceBtn=this._register(new M0({label:rXe+this._keybindingLabelFor(ki.ReplaceOneAction),icon:qYe,hoverDelegate:r,onTrigger:()=>{this._controller.replace()},onKeyDown:d=>{d.equals(1026)&&(this._closeBtn.focus(),d.preventDefault())}},this._hoverService)),this._replaceAllBtn=this._register(new M0({label:aXe+this._keybindingLabelFor(ki.ReplaceAllAction),icon:GYe,hoverDelegate:r,onTrigger:()=>{this._controller.replaceAll()}},this._hoverService));const a=document.createElement("div");a.className="replace-part",a.appendChild(this._replaceInput.domNode);const l=document.createElement("div");l.className="replace-actions",a.appendChild(l),l.appendChild(this._replaceBtn.domNode),l.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new M0({label:lXe,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=xr(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}},this._hoverService)),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=XYe,this._domNode.role="dialog",this._domNode.style.width=`${Ed}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(s),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(a),this._resizeSash=this._register(new Hs(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let c=Ed;this._register(this._resizeSash.onDidStart(()=>{c=xr(this._domNode)})),this._register(this._resizeSash.onDidChange(d=>{this._resized=!0;const u=c+d.startX-d.currentX;if(u<Ed)return;const h=parseFloat(C4(this._domNode).maxWidth)||0;u>h||(this._domNode.style.width=`${u}px`,this._isReplaceVisible&&(this._replaceInput.width=xr(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const d=xr(this._domNode);if(d<Ed)return;let u=Ed;if(!this._resized||d===Ed){const h=this._codeEditor.getLayoutInfo();u=h.width-28-h.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${u}px`,this._isReplaceVisible&&(this._replaceInput.width=xr(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}};QA.ID="editor.contrib.findWidget";let gj=QA;class M0 extends Ba{constructor(e,t){super(),this._opts=e;let i="button";this._opts.className&&(i=i+" "+this._opts.className),this._opts.icon&&(i=i+" "+Ke.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.tabIndex=0,this._domNode.className=i,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this._register(t.setupManagedHover(e.hoverDelegate??Wo("element"),this._domNode,this._opts.label)),this.onclick(this._domNode,s=>{this._opts.onTrigger(),s.preventDefault()}),this.onkeydown(this._domNode,s=>{var o,r;if(s.equals(10)||s.equals(3)){this._opts.onTrigger(),s.preventDefault();return}(r=(o=this._opts).onKeyDown)==null||r.call(o,s)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...Ke.asClassNameArray(Mne)),this._domNode.classList.add(...Ke.asClassNameArray(Pne))):(this._domNode.classList.remove(...Ke.asClassNameArray(Pne)),this._domNode.classList.add(...Ke.asClassNameArray(Mne)))}}yl((n,e)=>{const t=n.getColor(Hg);t&&e.addRule(`.monaco-editor .findMatch { border: 1px ${Qc(n.type)?"dotted":"solid"} ${t}; box-sizing: border-box; }`);const i=n.getColor(QOe);i&&e.addRule(`.monaco-editor .findScope { border: 1px ${Qc(n.type)?"dashed":"solid"} ${i}; }`);const s=n.getColor(At);s&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${s}; }`);const o=n.getColor(YOe);o&&e.addRule(`.monaco-editor .findMatchInline { color: ${o}; }`);const r=n.getColor(XOe);r&&e.addRule(`.monaco-editor .currentFindMatchInline { color: ${r}; }`)});var zbe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ga=function(n,e){return function(t,i){e(t,i,n)}},mj;const gXe=524288;function pj(n,e="single",t=!1){if(!n.hasModel())return null;const i=n.getSelection();if(e==="single"&&i.startLineNumber===i.endLineNumber||e==="multiple"){if(i.isEmpty()){const s=n.getConfiguredWordAtPosition(i.getStartPosition());if(s&&t===!1)return s.word}else if(n.getModel().getValueLengthInRange(i)<gXe)return n.getModel().getValueInRange(i)}return null}var Ib;let cr=(Ib=class extends G{get editor(){return this._editor}static get(e){return e.getContribution(mj.ID)}constructor(e,t,i,s,o,r){super(),this._editor=e,this._findWidgetVisible=Pf.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=s,this._notificationService=o,this._hoverService=r,this._updateHistoryDelayer=new hl(500),this._state=this._register(new VYe),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(a=>this._onStateChanged(a))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const a=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),a&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!VF.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e=e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Da(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}async _start(e,t){if(this.disposeModel(),!this._editor.hasModel())return;const i={...t,isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){const s=pj(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);s&&(this._state.isRegex?i.searchString=Da(s):i.searchString=s)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const s=pj(this._editor,e.seedSearchStringFromSelection);s&&(i.searchString=s)}if(!i.searchString&&e.seedSearchStringFromGlobalClipboard){const s=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;s&&(i.searchString=s)}if(e.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope){const s=this._editor.getSelections();s.some(o=>!o.isEmpty())&&(i.searchScope=s)}i.loop=e.loop,this._state.change(i,!1),this._model||(this._model=new lL(this._editor,this._state))}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){var e;return this._model?(e=this._editor.getModel())!=null&&e.isTooLargeForHeapOperation()?(this._notificationService.warn(_("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}async getGlobalBufferTerm(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}setGlobalBufferTerm(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}},mj=Ib,Ib.ID="editor.contrib.findController",Ib);cr=mj=zbe([Ga(1,qe),Ga(2,ac),Ga(3,Mf),Ga(4,wn),Ga(5,ju)],cr);let _j=class extends cr{constructor(e,t,i,s,o,r,a,l,c){super(e,i,a,l,r,c),this._contextViewService=t,this._keybindingService=s,this._themeService=o,this._widget=null,this._findOptionsWidget=null}async _start(e,t){this._widget||this._createFindWidget();const i=this._editor.getSelection();let s=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":{s=!!i&&i.startLineNumber!==i.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||s,await super._start(e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new gj(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService,this._hoverService)),this._findOptionsWidget=this._register(new uj(this._editor,this._state,this._keybindingService))}};_j=zbe([Ga(1,Df),Ga(2,qe),Ga(3,ei),Ga(4,Vn),Ga(5,wn),Ga(6,ac),Ga(7,Mf),Ga(8,ju)],_j);const mXe=Mhe(new Rhe({id:ki.StartFindAction,label:_("startFindAction","Find"),alias:"Find",precondition:se.or(R.focus,se.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Ne.MenubarEditMenu,group:"3_find",title:_({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));mXe.addImplementation(0,(n,e,t)=>{const i=cr.get(e);return i?i.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop}):!1});const pXe={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]};class _Xe extends Ce{constructor(){super({id:ki.StartFindWithArgs,label:_("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:pXe})}async run(e,t,i){const s=cr.get(t);if(s){const o=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:i.replaceString!==void 0,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{};await s.start({forceRevealReplace:!1,seedSearchStringFromSelection:s.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(i==null?void 0:i.findInSelection)||!1,loop:t.getOption(41).loop},o),s.setGlobalBufferTerm(s.getState().searchString)}}}class bXe extends Ce{constructor(){super({id:ki.StartFindWithSelection,label:_("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(e,t){const i=cr.get(t);i&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),i.setGlobalBufferTerm(i.getState().searchString))}}class Ube extends Ce{async run(e,t){const i=cr.get(t);i&&!this._run(i)&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class vXe extends Ube{constructor(){super({id:ki.NextMatchFindAction,label:_("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:R.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:se.and(R.focus,VF),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class wXe extends Ube{constructor(){super({id:ki.PreviousMatchFindAction,label:_("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:R.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:se.and(R.focus,VF),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class yXe extends Ce{constructor(){super({id:ki.GoToMatchFindAction,label:_("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:Pf}),this._highlightDecorations=[]}run(e,t,i){const s=cr.get(t);if(!s)return;const o=s.getState().matchesCount;if(o<1){e.get(wn).notify({severity:B4.Warning,message:_("findMatchAction.noResults","No matches. Try searching for something else.")});return}const r=e.get(Cl),a=new ne,l=a.add(r.createInputBox());l.placeholder=_("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",o);const c=u=>{const h=parseInt(u);if(isNaN(h))return;const f=s.getState().matchesCount;if(h>0&&h<=f)return h-1;if(h<0&&h>=-f)return f+h},d=u=>{const h=c(u);if(typeof h=="number"){l.validationMessage=void 0,s.goToMatch(h);const f=s.getState().currentMatch;f&&this.addDecorations(t,f)}else l.validationMessage=_("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",s.getState().matchesCount),this.clearDecorations(t)};a.add(l.onDidChangeValue(u=>{d(u)})),a.add(l.onDidAccept(()=>{const u=c(l.value);typeof u=="number"?(s.goToMatch(u),l.hide()):l.validationMessage=_("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",s.getState().matchesCount)})),a.add(l.onDidHide(()=>{this.clearDecorations(t),a.dispose()})),l.show()}clearDecorations(e){e.changeDecorations(t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(i=>{this._highlightDecorations=i.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:sn(Pge),position:Na.Full}}}])})}}class $be extends Ce{async run(e,t){const i=cr.get(t);if(!i)return;const s=pj(t,"single",!1);s&&i.setSearchString(s),this._run(i)||(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class CXe extends $be{constructor(){super({id:ki.NextSelectionMatchFindAction,label:_("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:R.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class SXe extends $be{constructor(){super({id:ki.PreviousSelectionMatchFindAction,label:_("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:R.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const xXe=Mhe(new Rhe({id:ki.StartFindReplaceAction,label:_("startReplace","Replace"),alias:"Replace",precondition:se.or(R.focus,se.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Ne.MenubarEditMenu,group:"3_find",title:_({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));xXe.addImplementation(0,(n,e,t)=>{if(!e.hasModel()||e.getOption(92))return!1;const i=cr.get(e);if(!i)return!1;const s=e.getSelection(),o=i.isFindInputFocused(),r=!s.isEmpty()&&s.startLineNumber===s.endLineNumber&&e.getOption(41).seedSearchStringFromSelection!=="never"&&!o,a=o||r?2:1;return i.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop})});Ot(cr.ID,_j,0);de(_Xe);de(bXe);de(vXe);de(wXe);de(yXe);de(CXe);de(SXe);const vd=Hn.bindToContribution(cr.get);_e(new vd({id:ki.CloseFindWidgetCommand,precondition:Pf,handler:n=>n.closeFindWidget(),kbOpts:{weight:105,kbExpr:se.and(R.focus,se.not("isComposing")),primary:9,secondary:[1033]}}));_e(new vd({id:ki.ToggleCaseSensitiveCommand,precondition:void 0,handler:n=>n.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:R.focus,primary:TD.primary,mac:TD.mac,win:TD.win,linux:TD.linux}}));_e(new vd({id:ki.ToggleWholeWordCommand,precondition:void 0,handler:n=>n.toggleWholeWords(),kbOpts:{weight:105,kbExpr:R.focus,primary:RD.primary,mac:RD.mac,win:RD.win,linux:RD.linux}}));_e(new vd({id:ki.ToggleRegexCommand,precondition:void 0,handler:n=>n.toggleRegex(),kbOpts:{weight:105,kbExpr:R.focus,primary:MD.primary,mac:MD.mac,win:MD.win,linux:MD.linux}}));_e(new vd({id:ki.ToggleSearchScopeCommand,precondition:void 0,handler:n=>n.toggleSearchScope(),kbOpts:{weight:105,kbExpr:R.focus,primary:PD.primary,mac:PD.mac,win:PD.win,linux:PD.linux}}));_e(new vd({id:ki.TogglePreserveCaseCommand,precondition:void 0,handler:n=>n.togglePreserveCase(),kbOpts:{weight:105,kbExpr:R.focus,primary:AD.primary,mac:AD.mac,win:AD.win,linux:AD.linux}}));_e(new vd({id:ki.ReplaceOneAction,precondition:Pf,handler:n=>n.replace(),kbOpts:{weight:105,kbExpr:R.focus,primary:3094}}));_e(new vd({id:ki.ReplaceOneAction,precondition:Pf,handler:n=>n.replace(),kbOpts:{weight:105,kbExpr:se.and(R.focus,_Z),primary:3}}));_e(new vd({id:ki.ReplaceAllAction,precondition:Pf,handler:n=>n.replaceAll(),kbOpts:{weight:105,kbExpr:R.focus,primary:2563}}));_e(new vd({id:ki.ReplaceAllAction,precondition:Pf,handler:n=>n.replaceAll(),kbOpts:{weight:105,kbExpr:se.and(R.focus,_Z),primary:void 0,mac:{primary:2051}}}));_e(new vd({id:ki.SelectAllMatchesAction,precondition:Pf,handler:n=>n.selectAllMatches(),kbOpts:{weight:105,kbExpr:R.focus,primary:515}}));const LXe={0:" ",1:"u",2:"r"},Hne=65535,Dc=16777215,Vne=4278190080;class zB{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,i=e%32;return(this._states[t]&1<<i)!==0}set(e,t){const i=e/32|0,s=e%32,o=this._states[i];t?this._states[i]=o|1<<s:this._states[i]=o&~(1<<s)}}class fa{constructor(e,t,i){if(e.length!==t.length||e.length>Hne)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new zB(e.length),this._userDefinedStates=new zB(e.length),this._recoveredStates=new zB(e.length),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(i,s)=>{const o=e[e.length-1];return this.getStartLineNumber(o)<=i&&this.getEndLineNumber(o)>=s};for(let i=0,s=this._startIndexes.length;i<s;i++){const o=this._startIndexes[i],r=this._endIndexes[i];if(o>Dc||r>Dc)throw new Error("startLineNumber or endLineNumber must not exceed "+Dc);for(;e.length>0&&!t(o,r);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=o+((a&255)<<24),this._endIndexes[i]=r+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&Dc}getEndLineNumber(e){return this._endIndexes[e]&Dc}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let s=0;s<this._types.length;s++)this._types[s]===e&&(this.setCollapsed(s,t),i=!0);return i}toRegion(e){return new kXe(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&Vne)>>>24)+((this._endIndexes[e]&Vne)>>>16);return t===Hne?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(i===0)return-1;for(;t<i;){const s=Math.floor((t+i)/2);e<this.getStartLineNumber(s)?i=s:t=s+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${LXe[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&Dc,endLineNumber:this._endIndexes[e]&Dc,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,i=new Uint32Array(t),s=new Uint32Array(t);let o=[],r=!1;for(let l=0;l<t;l++){const c=e[l];i[l]=c.startLineNumber,s[l]=c.endLineNumber,o.push(c.type),c.type&&(r=!0)}r||(o=void 0);const a=new fa(i,s,o);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,i,s){i=i??Number.MAX_VALUE;const o=(b,v)=>Array.isArray(b)?w=>w<v?b[w]:void 0:w=>w<v?b.toFoldRange(w):void 0,r=o(e,e.length),a=o(t,t.length);let l=0,c=0,d=r(0),u=a(0);const h=[];let f,m=0;const p=[];for(;d||u;){let b;if(u&&(!d||d.startLineNumber>=u.startLineNumber))d&&d.startLineNumber===u.startLineNumber?(u.source===1?b=u:(b=d,b.isCollapsed=u.isCollapsed&&(d.endLineNumber===u.endLineNumber||!(s!=null&&s.startsInside(d.startLineNumber+1,d.endLineNumber+1))),b.source=0),d=r(++l)):(b=u,u.isCollapsed&&u.source===0&&(b.source=2)),u=a(++c);else{let v=c,w=u;for(;;){if(!w||w.startLineNumber>d.endLineNumber){b=d;break}if(w.source===1&&w.endLineNumber>d.endLineNumber)break;w=a(++v)}d=r(++l)}if(b){for(;f&&f.endLineNumber<b.startLineNumber;)f=h.pop();b.endLineNumber>b.startLineNumber&&b.startLineNumber>m&&b.endLineNumber<=i&&(!f||f.endLineNumber>=b.endLineNumber)&&(p.push(b),m=b.startLineNumber,f&&h.push(f),f=b)}}return p}}class kXe{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class NXe{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new $,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new fa(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((i,s)=>i.regionIndex-s.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let s=0,o=-1,r=-1;const a=l=>{for(;s<l;){const c=this._regions.getEndLineNumber(s),d=this._regions.isCollapsed(s);if(c<=o){const u=this.regions.getSource(s)!==0;i.changeDecorationOptions(this._editorDecorationIds[s],this._decorationProvider.getDecorationOption(d,c<=r,u))}d&&c>r&&(r=c),s++}};for(const l of e){const c=l.regionIndex,d=this._editorDecorationIds[c];if(d&&!t[d]){t[d]=!0,a(c);const u=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,u),o=Math.max(o,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,i=s=>{for(const o of e)if(!(o.startLineNumber>s.endLineNumber||s.startLineNumber>o.endLineNumber))return!0;return!1};for(let s=0;s<this._regions.length;s++){const o=this._regions.toFoldRange(s);(o.source===0||!i(o))&&t.push(o)}this.updatePost(fa.fromFoldRanges(t))}update(e,t){const i=this._currentFoldedOrManualRanges(t),s=fa.sanitizeAndMerge(e,i,this._textModel.getLineCount(),t);this.updatePost(fa.fromFoldRanges(s))}updatePost(e){const t=[];let i=-1;for(let s=0,o=e.length;s<o;s++){const r=e.getStartLineNumber(s),a=e.getEndLineNumber(s),l=e.isCollapsed(s),c=e.getSource(s)!==0,d={startLineNumber:r,startColumn:this._textModel.getLineMaxColumn(r),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(l,a<=i,c)}),l&&a>i&&(i=a)}this._decorationProvider.changeDecorations(s=>this._editorDecorationIds=s.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e){const t=[];for(let i=0,s=this._regions.length;i<s;i++){let o=this.regions.isCollapsed(i);const r=this.regions.getSource(i);if(o||r!==0){const a=this._regions.toFoldRange(i),l=this._textModel.getDecorationRange(this._editorDecorationIds[i]);l&&(o&&(e!=null&&e.startsInside(l.startLineNumber+1,l.endLineNumber))&&(o=!1),t.push({startLineNumber:l.startLineNumber,endLineNumber:l.endLineNumber,type:a.type,isCollapsed:o,source:r}))}}return t}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],i=this._textModel.getLineCount();for(let s=0,o=e.length;s<o;s++){const r=e[s];if(r.startLineNumber>=r.endLineNumber||r.startLineNumber<1||r.endLineNumber>i)continue;const a=this._getLinesChecksum(r.startLineNumber+1,r.endLineNumber);t.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,isCollapsed:r.isCollapsed,source:r.source,checksum:a})}return t.length>0?t:void 0}applyMemento(e){if(!Array.isArray(e))return;const t=[],i=this._textModel.getLineCount();for(const o of e){if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>i)continue;const r=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);(!o.checksum||r===o.checksum)&&t.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,type:void 0,isCollapsed:o.isCollapsed??!0,source:o.source??0})}const s=fa.sanitizeAndMerge(this._regions,t,i);this.updatePost(fa.fromFoldRanges(s))}_getLinesChecksum(e,t){return v4(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const i=[];if(this._regions){let s=this._regions.findRange(e),o=1;for(;s>=0;){const r=this._regions.toRegion(s);(!t||t(r,o))&&i.push(r),o++,s=r.parentIndex}}return i}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const i=[],s=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const r=[];for(let a=s,l=this._regions.length;a<l;a++){const c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<o){for(;r.length>0&&!c.containedBy(r[r.length-1]);)r.pop();r.push(c),t(c,r.length)&&i.push(c)}else break}}else for(let r=s,a=this._regions.length;r<a;r++){const l=this._regions.toRegion(r);if(this._regions.getStartLineNumber(r)<o)(!t||t(l))&&i.push(l);else break}return i}}function wZ(n,e,t){const i=[];for(const s of t){const o=n.getRegionAtLine(s);if(o){const r=!o.isCollapsed;if(i.push(o),e>1){const a=n.getRegionsInside(o,(l,c)=>l.isCollapsed!==r&&c<e);i.push(...a)}}}n.toggleCollapseState(i)}function K1(n,e,t=Number.MAX_VALUE,i){const s=[];if(i&&i.length>0)for(const o of i){const r=n.getRegionAtLine(o);if(r&&(r.isCollapsed!==e&&s.push(r),t>1)){const a=n.getRegionsInside(r,(l,c)=>l.isCollapsed!==e&&c<t);s.push(...a)}}else{const o=n.getRegionsInside(null,(r,a)=>r.isCollapsed!==e&&a<t);s.push(...o)}n.toggleCollapseState(s)}function Kbe(n,e,t,i){const s=[];for(const o of i){const r=n.getAllRegionsAtLine(o,(a,l)=>a.isCollapsed!==e&&l<=t);s.push(...r)}n.toggleCollapseState(s)}function IXe(n,e,t){const i=[];for(const s of t){const o=n.getAllRegionsAtLine(s,r=>r.isCollapsed!==e);o.length>0&&i.push(o[0])}n.toggleCollapseState(i)}function EXe(n,e,t,i){const s=(r,a)=>a===e&&r.isCollapsed!==t&&!i.some(l=>r.containsLine(l)),o=n.getRegionsInside(null,s);n.toggleCollapseState(o)}function qbe(n,e,t){const i=[];for(const r of t){const a=n.getAllRegionsAtLine(r,void 0);a.length>0&&i.push(a[0])}const s=r=>i.every(a=>!a.containedBy(r)&&!r.containedBy(a))&&r.isCollapsed!==e,o=n.getRegionsInside(null,s);n.toggleCollapseState(o)}function yZ(n,e,t){const i=n.textModel,s=n.regions,o=[];for(let r=s.length-1;r>=0;r--)if(t!==s.isCollapsed(r)){const a=s.getStartLineNumber(r);e.test(i.getLineContent(a))&&o.push(s.toRegion(r))}n.toggleCollapseState(o)}function CZ(n,e,t){const i=n.regions,s=[];for(let o=i.length-1;o>=0;o--)t!==i.isCollapsed(o)&&e===i.getType(o)&&s.push(i.toRegion(o));n.toggleCollapseState(s)}function DXe(n,e){let t=null;const i=e.getRegionAtLine(n);if(i!==null&&(t=i.startLineNumber,n===t)){const s=i.parentIndex;s!==-1?t=e.regions.getStartLineNumber(s):t=null}return t}function TXe(n,e){let t=e.getRegionAtLine(n);if(t!==null&&t.startLineNumber===n){if(n!==t.startLineNumber)return t.startLineNumber;{const i=t.parentIndex;let s=0;for(i!==-1&&(s=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=s)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<n)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function RXe(n,e){let t=e.getRegionAtLine(n);if(t!==null&&t.startLineNumber===n){const i=t.parentIndex;let s=0;if(i!==-1)s=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;s=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=s)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>n)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class MXe{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new $,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||Zm(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let i=0,s=0,o=Number.MAX_VALUE,r=-1;const a=this._foldingModel.regions;for(;i<a.length;i++){if(!a.isCollapsed(i))continue;const l=a.getStartLineNumber(i)+1,c=a.getEndLineNumber(i);o<=l&&c<=r||(!e&&s<this._hiddenRanges.length&&this._hiddenRanges[s].startLineNumber===l&&this._hiddenRanges[s].endLineNumber===c?(t.push(this._hiddenRanges[s]),s++):(e=!0,t.push(new D(l,1,c,1))),o=l,r=c)}(this._hasLineChanges||e||s<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return jne(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const i=this._foldingModel.textModel;let s=null;const o=r=>((!s||!PXe(r,s))&&(s=jne(this._hiddenRanges,r)),s?s.startLineNumber-1:null);for(let r=0,a=e.length;r<a;r++){let l=e[r];const c=o(l.startLineNumber);c&&(l=l.setStartPosition(c,i.getLineMaxColumn(c)),t=!0);const d=o(l.endLineNumber);d&&(l=l.setEndPosition(d,i.getLineMaxColumn(d)),t=!0),e[r]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function PXe(n,e){return n>=e.startLineNumber&&n<=e.endLineNumber}function jne(n,e){const t=Ak(n,i=>e<i.startLineNumber)-1;return t>=0&&n[t].endLineNumber>=e?n[t]:null}const AXe=5e3,OXe="indent";class SZ{constructor(e,t,i){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=i,this.id=OXe}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=t&&!!t.offSide,s=t&&t.markers;return Promise.resolve(WXe(this.editorModel,i,s,this.foldingRangesLimit))}}let FXe=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>Dc||t>Dc)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const i=new Uint32Array(this._length),s=new Uint32Array(this._length);for(let o=this._length-1,r=0;o>=0;o--,r++)i[r]=this._startIndexes[o],s[r]=this._endIndexes[o];return new fa(i,s)}else{this._foldingRangesLimit.update(this._length,t);let i=0,s=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const c=this._indentOccurrences[l];if(c){if(c+i>t){s=l;break}i+=c}}const o=e.getOptions().tabSize,r=new Uint32Array(t),a=new Uint32Array(t);for(let l=this._length-1,c=0;l>=0;l--){const d=this._startIndexes[l],u=e.getLineContent(d),h=lF(u,o);(h<s||h===s&&i++<t)&&(r[c]=d,a[c]=this._endIndexes[l],c++)}return new fa(r,a)}}};const BXe={limit:AXe,update:()=>{}};function WXe(n,e,t,i=BXe){const s=n.getOptions().tabSize,o=new FXe(i);let r;t&&(r=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const a=[],l=n.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=n.getLineCount();c>0;c--){const d=n.getLineContent(c),u=lF(d,s);let h=a[a.length-1];if(u===-1){e&&(h.endAbove=c);continue}let f;if(r&&(f=d.match(r)))if(f[1]){let m=a.length-1;for(;m>0&&a[m].indent!==-2;)m--;if(m>0){a.length=m+1,h=a[m],o.insertFirst(c,h.line,u),h.line=c,h.indent=u,h.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(h.indent>u){do a.pop(),h=a[a.length-1];while(h.indent>u);const m=h.endAbove-1;m-c>=1&&o.insertFirst(c,m,u)}h.indent===u?h.endAbove=c:a.push({indent:u,endAbove:c,line:c})}return o.toIndentRanges(n)}const HXe=P("editor.foldBackground",{light:gt(Wg,.3),dark:gt(Wg,.3),hcDark:null,hcLight:null},_("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.foldPlaceholderForeground",{light:"#808080",dark:"#808080",hcDark:null,hcLight:null},_("collapsedTextColor","Color of the collapsed text after the first line of a folded range."));P("editorGutter.foldingControlForeground",I2,_("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const dP=Di("folding-expanded",he.chevronDown,_("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),uP=Di("folding-collapsed",he.chevronRight,_("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),zne=Di("folding-manual-collapsed",uP,_("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),Une=Di("folding-manual-expanded",dP,_("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),UB={color:sn(HXe),position:1},P0=_("linesCollapsed","Click to expand the range."),BD=_("linesExpanded","Click to collapse the range."),In=class In{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,i){return t?In.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?e?this.showFoldingHighlights?In.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:In.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:In.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?i?this.showFoldingHighlights?In.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:In.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?In.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:In.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?i?In.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:In.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i?In.MANUALLY_EXPANDED_VISUAL_DECORATION:In.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}};In.COLLAPSED_VISUAL_DECORATION=rt.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:P0,firstLineDecorationClassName:Ke.asClassName(uP)}),In.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=rt.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:UB,isWholeLine:!0,linesDecorationsTooltip:P0,firstLineDecorationClassName:Ke.asClassName(uP)}),In.MANUALLY_COLLAPSED_VISUAL_DECORATION=rt.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:P0,firstLineDecorationClassName:Ke.asClassName(zne)}),In.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=rt.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:UB,isWholeLine:!0,linesDecorationsTooltip:P0,firstLineDecorationClassName:Ke.asClassName(zne)}),In.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=rt.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:P0}),In.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=rt.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:UB,isWholeLine:!0,linesDecorationsTooltip:P0}),In.EXPANDED_VISUAL_DECORATION=rt.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Ke.asClassName(dP),linesDecorationsTooltip:BD}),In.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=rt.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:Ke.asClassName(dP),linesDecorationsTooltip:BD}),In.MANUALLY_EXPANDED_VISUAL_DECORATION=rt.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Ke.asClassName(Une),linesDecorationsTooltip:BD}),In.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=rt.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:Ke.asClassName(Une),linesDecorationsTooltip:BD}),In.NO_CONTROLS_EXPANDED_RANGE_DECORATION=rt.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),In.HIDDEN_RANGE_DECORATION=rt.register({description:"folding-hidden-range-decoration",stickiness:1});let bj=In;const VXe={},jXe="syntax";class xZ{constructor(e,t,i,s,o){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=i,this.foldingRangesLimit=s,this.fallbackRangeProvider=o,this.id=jXe,this.disposables=new ne,o&&this.disposables.add(o);for(const r of t)typeof r.onDidChange=="function"&&this.disposables.add(r.onDidChange(i))}compute(e){return zXe(this.providers,this.editorModel,e).then(t=>{var i;return t?$Xe(t,this.foldingRangesLimit):((i=this.fallbackRangeProvider)==null?void 0:i.compute(e))??null})}dispose(){this.disposables.dispose()}}function zXe(n,e,t){let i=null;const s=n.map((o,r)=>Promise.resolve(o.provideFoldingRanges(e,VXe,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(i)||(i=[]);const l=e.getLineCount();for(const c of a)c.start>0&&c.end>c.start&&c.end<=l&&i.push({start:c.start,end:c.end,rank:r,kind:c.kind})}},fn));return Promise.all(s).then(o=>i)}class UXe{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,s){if(e>Dc||t>Dc)return;const o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=s,this._types[o]=i,this._length++,s<30&&(this._nestingLevelCounts[s]=(this._nestingLevelCounts[s]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let s=0;s<this._length;s++)t[s]=this._startIndexes[s],i[s]=this._endIndexes[s];return new fa(t,i,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,i=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>e){i=a;break}t+=l}}const s=new Uint32Array(e),o=new Uint32Array(e),r=[];for(let a=0,l=0;a<this._length;a++){const c=this._nestingLevels[a];(c<i||c===i&&t++<e)&&(s[l]=this._startIndexes[a],o[l]=this._endIndexes[a],r[l]=this._types[a],l++)}return new fa(s,o,r)}}}function $Xe(n,e){const t=n.sort((r,a)=>{let l=r.start-a.start;return l===0&&(l=r.rank-a.rank),l}),i=new UXe(e);let s;const o=[];for(const r of t)if(!s)s=r,i.add(r.start,r.end,r.kind&&r.kind.value,o.length);else if(r.start>s.start)if(r.end<=s.end)o.push(s),s=r,i.add(r.start,r.end,r.kind&&r.kind.value,o.length);else{if(r.start>s.end){do s=o.pop();while(s&&r.start>s.end);s&&o.push(s),s=r}i.add(r.start,r.end,r.kind&&r.kind.value,o.length)}return i.toIndentRanges()}var KXe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},OS=function(n,e){return function(t,i){e(t,i,n)}},Xp;const Fs=new we("foldingEnabled",!1);var Eb;let op=(Eb=class extends G{static get(e){return e.getContribution(Xp.ID)}static getFoldingRangeProviders(e,t){var s;const i=e.foldingRangeProvider.ordered(t);return((s=Xp._foldingRangeSelector)==null?void 0:s.call(Xp,i,t))??i}constructor(e,t,i,s,o,r){super(),this.contextKeyService=t,this.languageConfigurationService=i,this.languageFeaturesService=r,this.localToDispose=this._register(new ne),this.editor=e,this._foldingLimitReporter=new Gbe(e);const a=this.editor.getOptions();this._isEnabled=a.get(43),this._useFoldingProviders=a.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(46),this.updateDebounceInfo=o.for(r.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new bj(e),this.foldingDecorationProvider.showFoldingControls=a.get(111),this.foldingDecorationProvider.showFoldingHighlights=a.get(45),this.foldingEnabled=Fs.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(47)&&this.onModelChanged(),l.hasChanged(111)||l.hasChanged(45)){const c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(111),this.foldingDecorationProvider.showFoldingHighlights=c.get(45),this.triggerFoldingModelChanged()}l.hasChanged(44)&&(this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),l.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))})),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new NXe(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new MXe(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new hl(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new li(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{var t,i;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(t=this.updateScheduler)==null||t.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(i=this.rangeProvider)==null||i.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;(e=this.rangeProvider)==null||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new SZ(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const i=Xp.getFoldingRangeProviders(this.languageFeaturesService,e);i.length>0&&(this.rangeProvider=new xZ(e,i,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)==null||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new ds,i=this.getRangeProvider(e.textModel),s=this.foldingRegionPromise=Xn(o=>i.compute(o));return s.then(o=>{if(o&&s===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const c=o.setCollapsedAllOfType(zm.Imports.value,!0);c&&(r=fd.capture(this.editor),this._currentModelHasFoldedImports=c)}const a=this.editor.getSelections();e.update(o,qXe(a)),r==null||r.restore(this.editor);const l=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=l)}return e})}).then(void 0,e=>(et(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const i=this.editor.getSelections();if(i&&i.length>0){const s=[];for(const o of i){const r=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(r)&&s.push(...t.getAllRegionsAtLine(r,a=>a.isCollapsed&&r>a.startLineNumber))}s.length&&(t.toggleCollapseState(s),this.reveal(i[0].getPosition()))}}}).then(void 0,et)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:{const s=e.target.detail,o=e.target.element.offsetLeft;if(s.offsetX-o<4)return;i=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const s=this.editor.getModel();if(s&&t.startColumn===s.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const i=this.mouseDownInfo.lineNumber,s=this.mouseDownInfo.iconClicked,o=e.target.range;if(!o||o.startLineNumber!==i)return;if(s){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||o.startColumn!==a.getLineMaxColumn(i))return}const r=t.getRegionAtLine(i);if(r&&r.startLineNumber===i){const a=r.isCollapsed;if(s||a){const l=e.event.altKey;let c=[];if(l){const d=h=>!h.containedBy(r)&&!r.containedBy(h),u=t.getRegionsInside(null,d);for(const h of u)h.isCollapsed&&c.push(h);c.length===0&&(c=u)}else{const d=e.event.middleButton||e.event.shiftKey;if(d)for(const u of t.getRegionsInside(r))u.isCollapsed===a&&c.push(u);(a||!d||c.length===0)&&c.push(r)}t.toggleCollapseState(c),this.reveal({lineNumber:i,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}},Xp=Eb,Eb.ID="editor.contrib.folding",Eb);op=Xp=KXe([OS(1,qe),OS(2,Yi),OS(3,wn),OS(4,Fa),OS(5,xe)],op);class Gbe{constructor(e){this.editor=e,this._onDidChange=new $,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}class Xs extends Ce{runEditorCommand(e,t,i){const s=e.get(Yi),o=op.get(t);if(!o)return;const r=o.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(a=>{if(a){this.invoke(o,a,t,i,s);const l=t.getSelection();l&&o.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(i=>i.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(i=>i+1):this.getSelectedLines(t)}run(e,t){}}function qXe(n){return!n||n.length===0?{startsInside:()=>!1}:{startsInside(e,t){for(const i of n){const s=i.startLineNumber;if(s>=e&&s<=t)return!0}return!1}}}function Zbe(n){if(!co(n)){if(!as(n))return!1;const e=n;if(!co(e.levels)&&!Hm(e.levels)||!co(e.direction)&&!ir(e.direction)||!co(e.selectionLines)&&(!Array.isArray(e.selectionLines)||!e.selectionLines.every(Hm)))return!1}return!0}class GXe extends Xs{constructor(){super({id:"editor.unfold",label:_("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:Zbe,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,s){const o=s&&s.levels||1,r=this.getLineNumbers(s,i);s&&s.direction==="up"?Kbe(t,!1,o,r):K1(t,!1,o,r)}}class ZXe extends Xs{constructor(){super({id:"editor.unfoldRecursively",label:_("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2142),weight:100}})}invoke(e,t,i,s){K1(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class YXe extends Xs{constructor(){super({id:"editor.fold",label:_("foldAction.label","Fold"),alias:"Fold",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:Zbe,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,s){const o=this.getLineNumbers(s,i),r=s&&s.levels,a=s&&s.direction;typeof r!="number"&&typeof a!="string"?IXe(t,!0,o):a==="up"?Kbe(t,!0,r||1,o):K1(t,!0,r||1,o)}}class XXe extends Xs{constructor(){super({id:"editor.toggleFold",label:_("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2090),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);wZ(t,1,s)}}class QXe extends Xs{constructor(){super({id:"editor.foldRecursively",label:_("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2140),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);K1(t,!0,Number.MAX_VALUE,s)}}class JXe extends Xs{constructor(){super({id:"editor.toggleFoldRecursively",label:_("toggleFoldRecursivelyAction.label","Toggle Fold Recursively"),alias:"Toggle Fold Recursively",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,3114),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);wZ(t,Number.MAX_VALUE,s)}}class eQe extends Xs{constructor(){super({id:"editor.foldAllBlockComments",label:_("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2138),weight:100}})}invoke(e,t,i,s,o){if(t.regions.hasTypes())CZ(t,zm.Comment.value,!0);else{const r=i.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+Da(a.blockCommentStartToken));yZ(t,l,!0)}}}}class tQe extends Xs{constructor(){super({id:"editor.foldAllMarkerRegions",label:_("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2077),weight:100}})}invoke(e,t,i,s,o){if(t.regions.hasTypes())CZ(t,zm.Region.value,!0);else{const r=i.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);yZ(t,l,!0)}}}}class iQe extends Xs{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:_("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2078),weight:100}})}invoke(e,t,i,s,o){if(t.regions.hasTypes())CZ(t,zm.Region.value,!1);else{const r=i.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);yZ(t,l,!1)}}}}class nQe extends Xs{constructor(){super({id:"editor.foldAllExcept",label:_("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2136),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);qbe(t,!0,s)}}class sQe extends Xs{constructor(){super({id:"editor.unfoldAllExcept",label:_("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2134),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);qbe(t,!1,s)}}class oQe extends Xs{constructor(){super({id:"editor.foldAll",label:_("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2069),weight:100}})}invoke(e,t,i){K1(t,!0)}}class rQe extends Xs{constructor(){super({id:"editor.unfoldAll",label:_("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2088),weight:100}})}invoke(e,t,i){K1(t,!1)}}const Uw=class Uw extends Xs{getFoldingLevel(){return parseInt(this.id.substr(Uw.ID_PREFIX.length))}invoke(e,t,i){EXe(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}};Uw.ID_PREFIX="editor.foldLevel",Uw.ID=e=>Uw.ID_PREFIX+e;let hP=Uw;class aQe extends Xs{constructor(){super({id:"editor.gotoParentFold",label:_("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const o=DXe(s[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class lQe extends Xs{constructor(){super({id:"editor.gotoPreviousFold",label:_("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const o=TXe(s[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class cQe extends Xs{constructor(){super({id:"editor.gotoNextFold",label:_("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const o=RXe(s[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class dQe extends Xs{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:_("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2135),weight:100}})}invoke(e,t,i){var r;const s=[],o=i.getSelections();if(o){for(const a of o){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(s.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),i.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(s.length>0){s.sort((l,c)=>l.startLineNumber-c.startLineNumber);const a=fa.sanitizeAndMerge(t.regions,s,(r=i.getModel())==null?void 0:r.getLineCount());t.updatePost(fa.fromFoldRanges(a))}}}}class uQe extends Xs{constructor(){super({id:"editor.removeManualFoldingRanges",label:_("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2137),weight:100}})}invoke(e,t,i){const s=i.getSelections();if(s){const o=[];for(const r of s){const{startLineNumber:a,endLineNumber:l}=r;o.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(o),e.triggerFoldingModelChanged()}}}Ot(op.ID,op,0);de(GXe);de(ZXe);de(YXe);de(QXe);de(JXe);de(oQe);de(rQe);de(eQe);de(tQe);de(iQe);de(nQe);de(sQe);de(XXe);de(aQe);de(lQe);de(cQe);de(dQe);de(uQe);for(let n=1;n<=7;n++)jMe(new hP({id:hP.ID(n),label:_("foldLevelAction.label","Fold Level {0}",n),alias:`Fold Level ${n}`,precondition:Fs,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2048|21+n),weight:100}}));Mt.registerCommand("_executeFoldingRangeProvider",async function(n,...e){const[t]=e;if(!(t instanceof Be))throw al();const i=n.get(xe),s=n.get(Ei).getModel(t);if(!s)throw al();const o=n.get(_t);if(!o.getValue("editor.folding",{resource:t}))return[];const r=n.get(Yi),a=o.getValue("editor.foldingStrategy",{resource:t}),l={get limit(){return o.getValue("editor.foldingMaximumRegions",{resource:t})},update:(f,m)=>{}},c=new SZ(s,r,l);let d=c;if(a!=="indentation"){const f=op.getFoldingRangeProviders(i,s);f.length&&(d=new xZ(s,f,()=>{},l,c))}const u=await d.compute(ht.None),h=[];try{if(u)for(let f=0;f<u.length;f++){const m=u.getType(f);h.push({start:u.getStartLineNumber(f),end:u.getEndLineNumber(f),kind:m?zm.fromValue(m):void 0})}return h}finally{d.dispose()}});class hQe extends Ce{constructor(){super({id:"editor.action.fontZoomIn",label:_("EditorFontZoomIn.label","Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})}run(e,t){Qa.setZoomLevel(Qa.getZoomLevel()+1)}}class fQe extends Ce{constructor(){super({id:"editor.action.fontZoomOut",label:_("EditorFontZoomOut.label","Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})}run(e,t){Qa.setZoomLevel(Qa.getZoomLevel()-1)}}class gQe extends Ce{constructor(){super({id:"editor.action.fontZoomReset",label:_("EditorFontZoomReset.label","Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})}run(e,t){Qa.setZoomLevel(0)}}de(hQe);de(fQe);de(gQe);var Ybe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},cL=function(n,e){return function(t,i){e(t,i,n)}},Qy;let fP=(Qy=class{constructor(e,t,i,s){this._editor=e,this._languageFeaturesService=t,this._workerService=i,this._accessibilitySignalService=s,this._disposables=new ne,this._sessionDisposables=new ne,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(o=>{o.hasChanged(56)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const i=new b2;for(const s of t.autoFormatTriggerCharacters)i.add(s.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(s=>{const o=s.charCodeAt(s.length-1);i.has(o)&&this._trigger(String.fromCharCode(o))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition(),s=new Gi,o=this._editor.onDidChangeModelContent(r=>{if(r.isFlush){s.cancel(),o.dispose();return}for(let a=0,l=r.changes.length;a<l;a++)if(r.changes[a].range.endLineNumber<=i.lineNumber){s.cancel(),o.dispose();return}});Kpe(this._workerService,this._languageFeaturesService,t,i,e,t.getFormattingOptions(),s.token).then(r=>{s.token.isCancellationRequested||ho(r)&&(this._accessibilitySignalService.playSignal(ha.format,{userGesture:!1}),$C.execute(this._editor,r,!0))}).finally(()=>{o.dispose()})}},Qy.ID="editor.contrib.autoFormat",Qy);fP=Ybe([cL(1,xe),cL(2,fr),cL(3,pp)],fP);var Jy;let gP=(Jy=class{constructor(e,t,i){this.editor=e,this._languageFeaturesService=t,this._instantiationService=i,this._callOnDispose=new ne,this._callOnModel=new ne,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction($pe,this.editor,e,2,jc.None,ht.None,!1).catch(et))}},Jy.ID="editor.contrib.formatOnPaste",Jy);gP=Ybe([cL(1,xe),cL(2,Ae)],gP);class mQe extends Ce{constructor(){super({id:"editor.action.formatDocument",label:_("formatDocument.label","Format Document"),alias:"Format Document",precondition:se.and(R.notInCompositeEditor,R.writable,R.hasDocumentFormattingProvider),kbOpts:{kbExpr:R.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(e,t){if(t.hasModel()){const i=e.get(Ae);await e.get(fp).showWhile(i.invokeFunction(AKe,t,1,jc.None,ht.None,!0),250)}}}class pQe extends Ce{constructor(){super({id:"editor.action.formatSelection",label:_("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:se.and(R.writable,R.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2084),weight:100},contextMenuOpts:{when:R.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(e,t){if(!t.hasModel())return;const i=e.get(Ae),s=t.getModel(),o=t.getSelections().map(a=>a.isEmpty()?new D(a.startLineNumber,1,a.startLineNumber,s.getLineMaxColumn(a.startLineNumber)):a);await e.get(fp).showWhile(i.invokeFunction($pe,t,o,1,jc.None,ht.None,!0),250)}}Ot(fP.ID,fP,2);Ot(gP.ID,gP,2);de(mQe);de(pQe);Mt.registerCommand("editor.action.format",async n=>{const e=n.get(Ut).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=n.get(Ci);e.getSelection().isEmpty()?await t.executeCommand("editor.action.formatDocument"):await t.executeCommand("editor.action.formatSelection")});var _Qe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},$B=function(n,e){return function(t,i){e(t,i,n)}};class Iw{remove(){var e;(e=this.parent)==null||e.children.delete(this.id)}static findId(e,t){let i;typeof e=="string"?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,t.children.get(i)!==void 0&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let s=i;for(let o=0;t.children.get(s)!==void 0;o++)s=`${i}_${o}`;return s}static empty(e){return e.children.size===0}}class vj extends Iw{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class Xbe extends Iw{constructor(e,t,i,s){super(),this.id=e,this.parent=t,this.label=i,this.order=s,this.children=new Map}}class Sh extends Iw{static create(e,t,i){const s=new Gi(i),o=new Sh(t.uri),r=e.ordered(t),a=r.map((c,d)=>{const u=Iw.findId(`provider_${d}`,o),h=new Xbe(u,o,c.displayName??"Unknown Outline Provider",d);return Promise.resolve(c.provideDocumentSymbols(t,s.token)).then(f=>{for(const m of f||[])Sh._makeOutlineElement(m,h);return h},f=>(fn(f),h)).then(f=>{Iw.empty(f)?f.remove():o._groups.set(u,f)})}),l=e.onDidChange(()=>{const c=e.ordered(t);Vi(c,r)||s.cancel()});return Promise.all(a).then(()=>s.token.isCancellationRequested&&!i.isCancellationRequested?Sh.create(e,t,i):o._compact()).finally(()=>{s.dispose(),l.dispose(),s.dispose()})}static _makeOutlineElement(e,t){const i=Iw.findId(e,t),s=new vj(i,t,e);if(e.children)for(const o of e.children)Sh._makeOutlineElement(o,s);t.children.set(s.id,s)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,i]of this._groups)i.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=Rt.first(this._groups.values());for(const[,i]of t.children)i.parent=this,this.children.set(i.id,i)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof vj?e.push(t.symbol):e.push(...Rt.map(t.children.values(),i=>i.symbol));return e.sort((t,i)=>D.compareRangesUsingStarts(t.range,i.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Sh._flattenDocumentSymbols(t,e,""),t.sort((i,s)=>U.compare(D.getStartPosition(i.range),D.getStartPosition(s.range))||U.compare(D.getEndPosition(s.range),D.getEndPosition(i.range)))}static _flattenDocumentSymbols(e,t,i){for(const s of t)e.push({kind:s.kind,tags:s.tags,name:s.name,detail:s.detail,containerName:s.containerName||i,range:s.range,selectionRange:s.selectionRange,children:void 0}),s.children&&Sh._flattenDocumentSymbols(e,s.children,s.name)}}const nE=kt("IOutlineModelService");let wj=class{constructor(e,t,i){this._languageFeaturesService=e,this._disposables=new ne,this._cache=new Hu(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved(s=>{this._cache.delete(s.id)}))}dispose(){this._disposables.dispose()}async getOrCreate(e,t){const i=this._languageFeaturesService.documentSymbolProvider,s=i.ordered(e);let o=this._cache.get(e.id);if(!o||o.versionId!==e.getVersionId()||!Vi(o.provider,s)){const a=new Gi;o={versionId:e.getVersionId(),provider:s,promiseCnt:0,source:a,promise:Sh.create(i,e,a.token),model:void 0},this._cache.set(e.id,o);const l=Date.now();o.promise.then(c=>{o.model=c,this._debounceInformation.update(e,Date.now()-l)}).catch(c=>{this._cache.delete(e.id)})}if(o.model)return o.model;o.promiseCnt+=1;const r=t.onCancellationRequested(()=>{--o.promiseCnt===0&&(o.source.cancel(),this._cache.delete(e.id))});try{return await o.promise}finally{r.dispose()}}};wj=_Qe([$B(0,xe),$B(1,Fa),$B(2,Ei)],wj);Tt(nE,wj,1);Mt.registerCommand("_executeDocumentSymbolProvider",async function(n,...e){const[t]=e;zt(Be.isUri(t));const i=n.get(nE),o=await n.get(dr).createModelReference(t);try{return(await i.getOrCreate(o.object.textEditorModel,ht.None)).getTopLevelSymbols()}finally{o.dispose()}});const Vd=class Vd extends G{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=Vd.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=Vd.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=Vd.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=Vd.suppressSuggestions.bindTo(this.contextKeyService),this._register(Je(i=>{const s=this.model.read(i),o=s==null?void 0:s.state.read(i),r=!!(o!=null&&o.inlineCompletion)&&(o==null?void 0:o.primaryGhostText)!==void 0&&!(o!=null&&o.primaryGhostText.isEmpty());this.inlineCompletionVisible.set(r),o!=null&&o.primaryGhostText&&(o!=null&&o.inlineCompletion)&&this.suppressSuggestions.set(o.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register(Je(i=>{const s=this.model.read(i);let o=!1,r=!0;const a=s==null?void 0:s.primaryGhostText.read(i);if(s!=null&&s.selectedSuggestItem&&a&&a.parts.length>0){const{column:l,lines:c}=a.parts[0],d=c[0],u=s.textModel.getLineIndentColumn(a.lineNumber);if(l<=u){let f=fo(d);f===-1&&(f=d.length-1),o=f>0;const m=s.textModel.getOptions().tabSize;r=Bn.visibleColumnFromColumn(d,f+1,m)<m}}this.inlineCompletionSuggestsIndentation.set(o),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(r)}))}};Vd.inlineSuggestionVisible=new we("inlineSuggestionVisible",!1,_("inlineSuggestionVisible","Whether an inline suggestion is visible")),Vd.inlineSuggestionHasIndentation=new we("inlineSuggestionHasIndentation",!1,_("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),Vd.inlineSuggestionHasIndentationLessThanTabSize=new we("inlineSuggestionHasIndentationLessThanTabSize",!0,_("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),Vd.suppressSuggestions=new we("inlineSuggestionSuppressSuggestions",void 0,_("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));let Hr=Vd;function bQe(n){const e=new ne,t=e.add(whe());return e.add(Je(i=>{t.setStyle(n.read(i))})),e}class ON{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,i)=>t.equals(e.parts[i]))}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1);return new VK([...this.parts.map(o=>new Iu(D.fromPositions(new U(1,o.column)),o.lines.join(`
`)))]).applyToString(i).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}}class mP{constructor(e,t,i){this.column=e,this.text=t,this.preview=i,this.lines=Bu(this.text)}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,i)=>t===e.lines[i])}}class yj{constructor(e,t,i,s=0){this.lineNumber=e,this.columnRange=t,this.text=i,this.additionalReservedLineCount=s,this.parts=[new mP(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=Bu(this.text)}renderForScreenReader(e){return this.newLines.join(`
`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>e.lines.length===0)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,i)=>t===e.newLines[i])&&this.additionalReservedLineCount===e.additionalReservedLineCount}}function $ne(n,e){return Vi(n,e,Qbe)}function Qbe(n,e){return n===e?!0:!n||!e?!1:n instanceof ON&&e instanceof ON||n instanceof yj&&e instanceof yj?n.equals(e):!1}const vQe=[];function wQe(){return vQe}class Jbe{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new Zt(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new D(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}}function eve(n,e){const t=new ne,i=n.createDecorationsCollection();return t.add(AI({debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const o=e.read(s);i.set(o)})),t.add({dispose:()=>{i.clear()}}),t}function yQe(n,e){return new U(n.lineNumber+e.lineNumber-1,e.lineNumber===1?n.column+e.column-1:e.column)}function Kne(n,e){return new U(n.lineNumber-e.lineNumber+1,n.lineNumber-e.lineNumber===0?n.column-e.column+1:n.column)}var CQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},SQe=function(n,e){return function(t,i){e(t,i,n)}};const qne="ghost-text";let Cj=class extends G{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=pt(this,!1),this.currentTextModel=ii(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=Te(this,s=>{if(this.isDisposed.read(s))return;const o=this.currentTextModel.read(s);if(o!==this.model.targetTextModel.read(s))return;const r=this.model.ghostText.read(s);if(!r)return;const a=r instanceof yj?r.columnRange:void 0,l=[],c=[];function d(p,b){if(c.length>0){const v=c[c.length-1];b&&v.decorations.push(new Lo(v.content.length+1,v.content.length+1+p[0].length,b,0)),v.content+=p[0],p=p.slice(1)}for(const v of p)c.push({content:v,decorations:b?[new Lo(1,v.length+1,b,0)]:[]})}const u=o.getLineContent(r.lineNumber);let h,f=0;for(const p of r.parts){let b=p.lines;h===void 0?(l.push({column:p.column,text:b[0],preview:p.preview}),b=b.slice(1)):d([u.substring(f,p.column-1)],void 0),b.length>0&&(d(b,qne),h===void 0&&p.column<=u.length&&(h=p.column)),f=p.column-1}h!==void 0&&d([u.substring(f)],void 0);const m=h!==void 0?new Jbe(h,u.length+1):void 0;return{replacedRange:a,inlineTexts:l,additionalLines:c,hiddenRange:m,lineNumber:r.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(s),targetTextModel:o}}),this.decorations=Te(this,s=>{const o=this.uiState.read(s);if(!o)return[];const r=[];o.replacedRange&&r.push({range:o.replacedRange.toRange(o.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),o.hiddenRange&&r.push({range:o.hiddenRange.toRange(o.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const a of o.inlineTexts)r.push({range:D.fromPositions(new U(o.lineNumber,a.column)),options:{description:qne,after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:jl.Left},showIfCollapsed:!0}});return r}),this.additionalLinesWidget=this._register(new xQe(this.editor,this.languageService.languageIdCodec,Te(s=>{const o=this.uiState.read(s);return o?{lineNumber:o.lineNumber,additionalLines:o.additionalLines,minReservedLineCount:o.additionalReservedLineCount,targetTextModel:o.targetTextModel}:void 0}))),this._register(Pe(()=>{this.isDisposed.set(!0,void 0)})),this._register(eve(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};Cj=CQe([SQe(2,ji)],Cj);class xQe extends G{get viewZoneId(){return this._viewZoneId}constructor(e,t,i){super(),this.editor=e,this.languageIdCodec=t,this.lines=i,this._viewZoneId=void 0,this.editorOptionsChanged=Ts("editorOptionChanged",pe.filter(this.editor.onDidChangeConfiguration,s=>s.hasChanged(33)||s.hasChanged(118)||s.hasChanged(100)||s.hasChanged(95)||s.hasChanged(51)||s.hasChanged(50)||s.hasChanged(67))),this._register(Je(s=>{const o=this.lines.read(s);this.editorOptionsChanged.read(s),o?this.updateLines(o.lineNumber,o.additionalLines,o.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,i){const s=this.editor.getModel();if(!s)return;const{tabSize:o}=s.getOptions();this.editor.changeViewZones(r=>{this._viewZoneId&&(r.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,i);if(a>0){const l=document.createElement("div");LQe(l,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}}function LQe(n,e,t,i,s){const o=i.get(33),r=i.get(118),a="none",l=i.get(95),c=i.get(51),d=i.get(50),u=i.get(67),h=new N1(1e4);h.appendString('<div class="suggest-preview-text">');for(let p=0,b=t.length;p<b;p++){const v=t[p],w=v.content;h.appendString('<div class="view-line'),h.appendString('" style="top:'),h.appendString(String(p*u)),h.appendString('px;width:1000000px;">');const y=CI(w),C=CC(w),S=us.createEmpty(w,s);UI(new _p(d.isMonospace&&!o,d.canUseHalfwidthRightwardsArrow,w,!1,y,C,0,S,v.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,r,a,l,c!==Vm.OFF,null),h),h.appendString("</div>")}h.appendString("</div>"),Cs(n,d);const f=h.build(),m=Gne?Gne.createHTML(f):f;n.innerHTML=m}const Gne=Ef("editorGhostText",{createHTML:n=>n});function kQe(n,e){const t=new jge,i=new Uge(t,c=>e.getLanguageConfiguration(c)),s=new zge(new NQe([n]),i),o=E6(s,[],void 0,!0);let r="";const a=n.getLineContent();function l(c,d){if(c.kind===2)if(l(c.openingBracket,d),d=rn(d,c.openingBracket.length),c.child&&(l(c.child,d),d=rn(d,c.child.length)),c.closingBracket)l(c.closingBracket,d),d=rn(d,c.closingBracket.length);else{const h=i.getSingleLanguageBracketTokens(c.openingBracket.languageId).findClosingTokenText(c.openingBracket.bracketIds);r+=h}else if(c.kind!==3){if(c.kind===0||c.kind===1)r+=a.substring(d,rn(d,c.length));else if(c.kind===4)for(const u of c.children)l(u,d),d=rn(d,u.length)}}return l(o,xo),r}class NQe{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}async function tve(n,e,t,i,s=ht.None,o){const r=e instanceof U?DQe(e,t):e,a=n.all(t),l=new OK;for(const v of a)v.groupId&&l.add(v.groupId,v);function c(v){if(!v.yieldsToGroupIds)return[];const w=[];for(const y of v.yieldsToGroupIds||[]){const C=l.get(y);for(const S of C)w.push(S)}return w}const d=new Map,u=new Set;function h(v,w){if(w=[...w,v],u.has(v))return w;u.add(v);try{const y=c(v);for(const C of y){const S=h(C,w);if(S)return S}}finally{u.delete(v)}}function f(v){const w=d.get(v);if(w)return w;const y=h(v,[]);y&&fn(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${y.map(S=>S.toString?S.toString():""+S).join(" -> ")}`));const C=new S1;return d.set(v,C.p),(async()=>{var S;if(!y){const x=c(v);for(const k of x){const N=await f(k);if(N&&N.items.length>0)return}}try{return e instanceof U?await v.provideInlineCompletions(t,e,i,s):await((S=v.provideInlineEdits)==null?void 0:S.call(v,t,e,i,s))}catch(x){fn(x);return}})().then(S=>C.complete(S),S=>C.error(S)),C.p}const m=await Promise.all(a.map(async v=>({provider:v,completions:await f(v)}))),p=new Map,b=[];for(const v of m){const w=v.completions;if(!w)continue;const y=new EQe(w,v.provider);b.push(y);for(const C of w.items){const S=pP.from(C,y,r,t,o);p.set(S.hash(),S)}}return new IQe(Array.from(p.values()),new Set(p.keys()),b)}class IQe{constructor(e,t,i){this.completions=e,this.hashs=t,this.providerResults=i}has(e){return this.hashs.has(e.hash())}dispose(){for(const e of this.providerResults)e.removeRef()}}class EQe{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class pP{static from(e,t,i,s,o){let r,a,l=e.range?D.lift(e.range):i;if(typeof e.insertText=="string"){if(r=e.insertText,o&&e.completeBracketPairs){r=Zne(r,l.getStartPosition(),s,o);const c=r.length-e.insertText.length;c!==0&&(l=new D(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+c))}a=void 0}else if("snippet"in e.insertText){const c=e.insertText.snippet.length;if(o&&e.completeBracketPairs){e.insertText.snippet=Zne(e.insertText.snippet,l.getStartPosition(),s,o);const u=e.insertText.snippet.length-c;u!==0&&(l=new D(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+u))}const d=new Ev().parse(e.insertText.snippet);d.children.length===1&&d.children[0]instanceof Co?(r=d.children[0].value,a=void 0):(r=d.toString(),a={snippet:e.insertText.snippet,range:l})}else R4(e.insertText);return new pP(r,e.command,l,r,a,e.additionalTextEdits||wQe(),e,t)}constructor(e,t,i,s,o,r,a,l){this.filterText=e,this.command=t,this.range=i,this.insertText=s,this.snippetInfo=o,this.additionalTextEdits=r,this.sourceInlineCompletion=a,this.source=l,e=e.replace(/\r\n|\r/g,`
`),s=e.replace(/\r\n|\r/g,`
`)}withRange(e){return new pP(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}toSingleTextEdit(){return new Iu(this.range,this.insertText)}}function DQe(n,e){const t=e.getWordAtPosition(n),i=e.getLineMaxColumn(n.lineNumber);return t?new D(n.lineNumber,t.startColumn,n.lineNumber,i):D.fromPositions(n,n.with(void 0,i))}function Zne(n,e,t,i){const o=t.getLineContent(e.lineNumber).substring(0,e.column-1)+n,r=t.tokenization.tokenizeLineWithEdit(e,o.length-(e.column-1),n),a=r==null?void 0:r.sliceAndInflate(e.column-1,o.length,0);return a?kQe(a,i):n}function eb(n,e,t){const i=t?n.range.intersectRanges(t):n.range;if(!i)return n;const s=e.getValueInRange(i,1),o=Um(s,n.text),r=ec.ofText(s.substring(0,o)).addToPosition(n.range.getStartPosition()),a=n.text.substring(o),l=D.fromPositions(r,n.range.getEndPosition());return new Iu(l,a)}function ive(n,e){return n.text.startsWith(e.text)&&TQe(n.range,e.range)}function Yne(n,e,t,i,s=0){let o=eb(n,e);if(o.range.endLineNumber!==o.range.startLineNumber)return;const r=e.getLineContent(o.range.startLineNumber),a=fi(r).length;if(o.range.startColumn-1<=a){const m=fi(o.text).length,p=r.substring(o.range.startColumn-1,a),[b,v]=[o.range.getStartPosition(),o.range.getEndPosition()],w=b.column+p.length<=v.column?b.delta(0,p.length):v,y=D.fromPositions(w,v),C=o.text.startsWith(p)?o.text.substring(p.length):o.text.substring(m);o=new Iu(y,C)}const c=e.getValueInRange(o.range),d=RQe(c,o.text);if(!d)return;const u=o.range.startLineNumber,h=new Array;if(t==="prefix"){const m=d.filter(p=>p.originalLength===0);if(m.length>1||m.length===1&&m[0].originalStart!==c.length)return}const f=o.text.length-s;for(const m of d){const p=o.range.startColumn+m.originalStart+m.originalLength;if(t==="subwordSmart"&&i&&i.lineNumber===o.range.startLineNumber&&p<i.column||m.originalLength>0)return;if(m.modifiedLength===0)continue;const b=m.modifiedStart+m.modifiedLength,v=Math.max(m.modifiedStart,Math.min(b,f)),w=o.text.substring(m.modifiedStart,v),y=o.text.substring(v,Math.max(m.modifiedStart,b));w.length>0&&h.push(new mP(p,w,!1)),y.length>0&&h.push(new mP(p,y,!0))}return new ON(u,h)}function TQe(n,e){return e.getStartPosition().equals(n.getStartPosition())&&e.getEndPosition().isBeforeOrEqual(n.getEndPosition())}let Dd;function RQe(n,e){if((Dd==null?void 0:Dd.originalValue)===n&&(Dd==null?void 0:Dd.newValue)===e)return Dd==null?void 0:Dd.changes;{let t=Qne(n,e,!0);if(t){const i=Xne(t);if(i>0){const s=Qne(n,e,!1);s&&Xne(s)<i&&(t=s)}}return Dd={originalValue:n,newValue:e,changes:t},t}}function Xne(n){let e=0;for(const t of n)e+=t.originalLength;return e}function Qne(n,e,t){if(n.length>5e3||e.length>5e3)return;function i(c){let d=0;for(let u=0,h=c.length;u<h;u++){const f=c.charCodeAt(u);f>d&&(d=f)}return d}const s=Math.max(i(n),i(e));function o(c){if(c<0)throw new Error("unexpected");return s+c+1}function r(c){let d=0,u=0;const h=new Int32Array(c.length);for(let f=0,m=c.length;f<m;f++)if(t&&c[f]==="("){const p=u*100+d;h[f]=o(2*p),d++}else if(t&&c[f]===")"){d=Math.max(d-1,0);const p=u*100+d;h[f]=o(2*p+1),d===0&&u++}else h[f]=c.charCodeAt(f);return h}const a=r(n),l=r(e);return new nu({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}var MQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Jne=function(n,e){return function(t,i){e(t,i,n)}};let Sj=class extends G{constructor(e,t,i,s,o){super(),this.textModel=e,this.versionId=t,this._debounceValue=i,this.languageFeaturesService=s,this.languageConfigurationService=o,this._updateOperation=this._register(new es),this.inlineCompletions=Yk("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=Yk("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}fetch(e,t,i){var d,u;const s=new AQe(e,t,this.textModel.getVersionId()),o=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if((d=this._updateOperation.value)!=null&&d.request.satisfies(s))return this._updateOperation.value.promise;if((u=o.get())!=null&&u.request.satisfies(s))return Promise.resolve(!0);const r=!!this._updateOperation.value;this._updateOperation.clear();const a=new Gi,l=(async()=>{if((r||t.triggerKind===Yc.Automatic)&&await PQe(this._debounceValue.get(this.textModel),a.token),a.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==s.versionId)return!1;const f=new Date,m=await tve(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,a.token,this.languageConfigurationService);if(a.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==s.versionId)return!1;const p=new Date;this._debounceValue.update(this.textModel,p.getTime()-f.getTime());const b=new FQe(m,s,this.textModel,this.versionId);if(i){const v=i.toInlineCompletion(void 0);i.canBeReused(this.textModel,e)&&!m.has(v)&&b.prepend(i.inlineCompletion,v.range,!0)}return this._updateOperation.clear(),qi(v=>{o.set(b,v)}),!0})(),c=new OQe(s,a,l);return this._updateOperation.value=c,l}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;(t=this._updateOperation.value)!=null&&t.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};Sj=MQe([Jne(3,xe),Jne(4,Yi)],Sj);function PQe(n,e){return new Promise(t=>{let i;const s=setTimeout(()=>{i&&i.dispose(),t()},n);e&&(i=e.onCancellationRequested(()=>{clearTimeout(s),i&&i.dispose(),t()}))})}class AQe{constructor(e,t,i){this.position=e,this.context=t,this.versionId=i}satisfies(e){return this.position.equals(e.position)&&c6(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,G3e())&&(e.context.triggerKind===Yc.Automatic||this.context.triggerKind===Yc.Explicit)&&this.versionId===e.versionId}}class OQe{constructor(e,t,i){this.request=e,this.cancellationTokenSource=t,this.promise=i}dispose(){this.cancellationTokenSource.cancel()}}class FQe{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,i,s){this.inlineCompletionProviderResult=e,this.request=t,this._textModel=i,this._versionId=s,this._refCount=1,this._prependedInlineCompletionItems=[];const o=i.deltaDecorations([],e.completions.map(r=>({range:r.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=e.completions.map((r,a)=>new ese(r,o[a],this._textModel,this._versionId))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout(()=>{this._textModel.isDisposed()||this._textModel.deltaDecorations(this._inlineCompletions.map(e=>e.decorationId),[])},0),this.inlineCompletionProviderResult.dispose();for(const e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,i){i&&e.source.addRef();const s=this._textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new ese(e,s,this._textModel,this._versionId)),this._prependedInlineCompletionItems.push(e)}}class ese{get forwardStable(){return this.inlineCompletion.source.inlineCompletions.enableForwardStability??!1}constructor(e,t,i,s){this.inlineCompletion=e,this.decorationId=t,this._textModel=i,this._modelVersion=s,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._updatedRange=ma({owner:this,equalsFn:D.equalsRange},o=>(this._modelVersion.read(o),this._textModel.getDecorationRange(this.decorationId)))}toInlineCompletion(e){return this.inlineCompletion.withRange(this._updatedRange.read(e)??KB)}toSingleTextEdit(e){return new Iu(this._updatedRange.read(e)??KB,this.inlineCompletion.insertText)}isVisible(e,t,i){const s=eb(this._toFilterTextReplacement(i),e),o=this._updatedRange.read(i);if(!o||!this.inlineCompletion.range.getStartPosition().equals(o.getStartPosition())||t.lineNumber!==s.range.startLineNumber)return!1;const r=e.getValueInRange(s.range,1),a=s.text,l=Math.max(0,t.column-s.range.startColumn);let c=a.substring(0,l),d=a.substring(l),u=r.substring(0,l),h=r.substring(l);const f=e.getLineIndentColumn(s.range.startLineNumber);return s.range.startColumn<=f&&(u=u.trimStart(),u.length===0&&(h=h.trimStart()),c=c.trimStart(),c.length===0&&(d=d.trimStart())),c.startsWith(u)&&!!Gfe(h,d)}canBeReused(e,t){const i=this._updatedRange.read(void 0);return!!i&&i.containsPosition(t)&&this.isVisible(e,t,void 0)&&ec.ofRange(i).isGreaterThanOrEqualTo(ec.ofRange(this.inlineCompletion.range))}_toFilterTextReplacement(e){return new Iu(this._updatedRange.read(e)??KB,this.inlineCompletion.filterText)}}const KB=new D(1,1,1,1),ft={Visible:bZ,HasFocusedSuggestion:new we("suggestWidgetHasFocusedSuggestion",!1,_("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new we("suggestWidgetDetailsVisible",!1,_("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new we("suggestWidgetMultipleSuggestions",!1,_("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new we("suggestionMakesTextEdit",!0,_("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new we("acceptSuggestionOnEnter",!0,_("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new we("suggestionHasInsertAndReplaceRange",!1,_("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new we("suggestionInsertMode",void 0,{type:"string",description:_("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new we("suggestionCanResolve",!1,_("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},hm=new Ne("suggestWidgetStatusBar");class BQe{constructor(e,t,i,s){var o;this.position=e,this.completion=t,this.container=i,this.provider=s,this.isInvalid=!1,this.score=ed.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:(o=t.label)==null?void 0:o.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,D.isIRange(t.range)?(this.editStart=new U(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new U(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new U(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||D.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new U(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new U(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new U(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||D.spansMultipleLines(t.range.insert)||D.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof s.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}async resolve(e){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),i=new ds(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(s=>{Object.assign(this.completion,s),this._resolveDuration=i.elapsed()},s=>{wl(s)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{t.dispose()})}return this._resolveCache}}const JA=class JA{constructor(e=2,t=new Set,i=new Set,s=new Map,o=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.providerItemsToReuse=s,this.showDeprecated=o}};JA.default=new JA;let FN=JA;class WQe{constructor(e,t,i,s){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=s}}async function LZ(n,e,t,i=FN.default,s={triggerKind:0},o=ht.None){const r=new ds;t=t.clone();const a=e.getWordAtPosition(t),l=a?new D(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):D.fromPositions(t),c={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},d=[],u=new ne,h=[];let f=!1;const m=(b,v,w)=>{var C;let y=!1;if(!v)return y;for(const S of v.suggestions)if(!i.kindFilter.has(S.kind)){if(!i.showDeprecated&&((C=S==null?void 0:S.tags)!=null&&C.includes(1)))continue;S.range||(S.range=c),S.sortText||(S.sortText=typeof S.label=="string"?S.label:S.label.label),!f&&S.insertTextRules&&S.insertTextRules&4&&(f=Ev.guessNeedsClipboard(S.insertText)),d.push(new BQe(t,S,v,b)),y=!0}return m4(v)&&u.add(v),h.push({providerName:b._debugDisplayName??"unknown_provider",elapsedProvider:v.duration??-1,elapsedOverall:w.elapsed()}),y},p=(async()=>{})();for(const b of n.orderedGroups(e)){let v=!1;if(await Promise.all(b.map(async w=>{if(i.providerItemsToReuse.has(w)){const y=i.providerItemsToReuse.get(w);y.forEach(C=>d.push(C)),v=v||y.length>0;return}if(!(i.providerFilter.size>0&&!i.providerFilter.has(w)))try{const y=new ds,C=await w.provideCompletionItems(e,t,s,o);v=m(w,C,y)||v}catch(y){fn(y)}})),v||o.isCancellationRequested)break}return await p,o.isCancellationRequested?(u.dispose(),Promise.reject(new Xl)):new WQe(d.sort(jQe(i.snippetSortOrder)),f,{entries:h,elapsed:r.elapsed()},u)}function kZ(n,e){if(n.sortTextLow&&e.sortTextLow){if(n.sortTextLow<e.sortTextLow)return-1;if(n.sortTextLow>e.sortTextLow)return 1}return n.textLabel<e.textLabel?-1:n.textLabel>e.textLabel?1:n.completion.kind-e.completion.kind}function HQe(n,e){if(n.completion.kind!==e.completion.kind){if(n.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return kZ(n,e)}function VQe(n,e){if(n.completion.kind!==e.completion.kind){if(n.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return kZ(n,e)}const jF=new Map;jF.set(0,HQe);jF.set(2,VQe);jF.set(1,kZ);function jQe(n){return jF.get(n)}Mt.registerCommand("_executeCompletionItemProvider",async(n,...e)=>{const[t,i,s,o]=e;zt(Be.isUri(t)),zt(U.isIPosition(i)),zt(typeof s=="string"||!s),zt(typeof o=="number"||!o);const{completionProvider:r}=n.get(xe),a=await n.get(dr).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},c=[],d=a.object.textEditorModel.validatePosition(i),u=await LZ(r,a.object.textEditorModel,d,void 0,{triggerCharacter:s??void 0,triggerKind:s?1:0});for(const h of u.items)c.length<(o??0)&&c.push(h.resolve(ht.None)),l.incomplete=l.incomplete||h.container.incomplete,l.suggestions.push(h.completion);try{return await Promise.all(c),l}finally{setTimeout(()=>u.disposable.dispose(),100)}}finally{a.dispose()}});function zQe(n,e){var t;(t=n.getContribution("editor.contrib.suggestController"))==null||t.triggerSuggest(new Set().add(e),void 0,!0)}class Ew{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}function tse(n,e=As){return vOe(n,e)?n.charAt(0).toUpperCase()+n.slice(1):n}var UQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},$Qe=function(n,e){return function(t,i){e(t,i,n)}};class ise{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const i=t.resolve(e);if(i!==void 0)return i}}}class nse{constructor(e,t,i,s){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=s}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let i=this._model.getValueInRange(this._selection)||void 0,s=this._selection.startLineNumber!==this._selection.endLineNumber;if(!i&&this._overtypingCapturer){const o=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);o&&(i=o.value,s=o.multiline)}if(i&&s&&e.snippet){const o=this._model.getLineContent(this._selection.startLineNumber),r=fi(o,0,this._selection.startColumn-1);let a=r;e.snippet.walk(c=>c===e?!1:(c instanceof Co&&(a=fi(Bu(c.value).pop())),!0));const l=Um(a,r);i=i.replace(/(\r\n|\r|\n)(.*)/g,(c,d,u)=>`${d}${a.substr(l)}${u}`)}return i}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const i=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return i&&i.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}class sse{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return rm(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const i=rm(this._model.uri.fsPath),s=i.lastIndexOf(".");return s<=0?i:i.slice(0,s)}else{if(t==="TM_DIRECTORY")return Oue(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(Y4(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class ose{constructor(e,t,i,s){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=s}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const i=t.split(/\r\n|\n|\r/).filter(s=>!$ue(s));if(i.length===this._selectionCount)return i[this._selectionIdx]}return t}}}let _P=class{constructor(e,t,i){this._model=e,this._selection=t,this._languageConfigurationService=i}resolve(e){const{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),s=this._languageConfigurationService.getLanguageConfiguration(i).comments;if(s){if(t==="LINE_COMMENT")return s.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return s.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return s.blockCommentEndToken||void 0}}};_P=UQe([$Qe(2,Yi)],_P);const jd=class jd{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return jd.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return jd.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return jd.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return jd.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(t==="CURRENT_TIMEZONE_OFFSET"){const i=this._date.getTimezoneOffset(),s=i>0?"-":"+",o=Math.trunc(Math.abs(i/60)),r=o<10?"0"+o:o,a=Math.abs(i)-o*60,l=a<10?"0"+a:a;return s+r+":"+l}}};jd.dayNames=[_("Sunday","Sunday"),_("Monday","Monday"),_("Tuesday","Tuesday"),_("Wednesday","Wednesday"),_("Thursday","Thursday"),_("Friday","Friday"),_("Saturday","Saturday")],jd.dayNamesShort=[_("SundayShort","Sun"),_("MondayShort","Mon"),_("TuesdayShort","Tue"),_("WednesdayShort","Wed"),_("ThursdayShort","Thu"),_("FridayShort","Fri"),_("SaturdayShort","Sat")],jd.monthNames=[_("January","January"),_("February","February"),_("March","March"),_("April","April"),_("May","May"),_("June","June"),_("July","July"),_("August","August"),_("September","September"),_("October","October"),_("November","November"),_("December","December")],jd.monthNamesShort=[_("JanuaryShort","Jan"),_("FebruaryShort","Feb"),_("MarchShort","Mar"),_("AprilShort","Apr"),_("MayShort","May"),_("JuneShort","Jun"),_("JulyShort","Jul"),_("AugustShort","Aug"),_("SeptemberShort","Sep"),_("OctoberShort","Oct"),_("NovemberShort","Nov"),_("DecemberShort","Dec")];let bP=jd;class rse{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=F3e(this._workspaceService.getWorkspace());if(!A3e(t)){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(t6(e))return rm(e.uri.path);let t=rm(e.configPath.path);return t.endsWith(i6)&&(t=t.substr(0,t.length-i6.length-1)),t}_resoveWorkspacePath(e){if(t6(e))return tse(e.uri.fsPath);const t=rm(e.configPath.path);let i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?tse(i):"/"}}class ase{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return RF()}}var KQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},qQe=function(n,e){return function(t,i){e(t,i,n)}},_c;const Dl=class Dl{constructor(e,t,i){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=i,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=mQ(t.placeholders,Xa.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const i of this._snippet.placeholders){const s=this._snippet.offset(i),o=this._snippet.fullLen(i),r=D.fromPositions(e.getPositionAt(this._offset+s),e.getPositionAt(this._offset+s+o)),a=i.isFinalTabstop?Dl._decor.inactiveFinal:Dl._decor.inactive,l=t.addDecoration(r,a);this._placeholderDecorations.set(i,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const s=[];for(const o of this._placeholderGroups[this._placeholderGroupsIdx])if(o.transform){const r=this._placeholderDecorations.get(o),a=this._editor.getModel().getDecorationRange(r),l=this._editor.getModel().getValueInRange(a),c=o.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<c.length;d++)c[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[d]);s.push(Ki.replace(a,c.join(this._editor.getModel().getEOL())))}s.length>0&&this._editor.executeEdits("snippet.placeholderTransform",s)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const i=this._editor.getModel().changeDecorations(s=>{const o=new Set,r=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);r.push(new Ie(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),s.changeDecorationOptions(l,a.isFinalTabstop?Dl._decor.activeFinal:Dl._decor.active),o.add(a);for(const d of this._snippet.enclosingPlaceholders(a)){const u=this._placeholderDecorations.get(d);s.changeDecorationOptions(u,d.isFinalTabstop?Dl._decor.activeFinal:Dl._decor.active),o.add(d)}}for(const[a,l]of this._placeholderDecorations)o.has(a)||s.changeDecorationOptions(l,a.isFinalTabstop?Dl._decor.inactiveFinal:Dl._decor.inactive);return r});return t?this.move(e):i??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Xa){const i=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(i).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){const[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let i;for(const s of t){if(s.isFinalTabstop)break;i||(i=[],e.set(s.index,i));const o=this._placeholderDecorations.get(s),r=this._editor.getModel().getDecorationRange(o);if(!r){e.delete(s.index);break}i.push(r)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(e!=null&&e.choice))return;const t=this._placeholderDecorations.get(e);if(!t)return;const i=this._editor.getModel().getDecorationRange(t);if(i)return{range:i,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof $1,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(i=>{for(const s of this._placeholderGroups[this._placeholderGroupsIdx]){const o=e.shift();console.assert(o._offset!==-1),console.assert(!o._placeholderDecorations);const r=o._snippet.placeholderInfo.last.index;for(const l of o._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=s.index+(r+1)/this._nestingLevel:l.index=s.index+l.index/this._nestingLevel;this._snippet.replace(s,o._snippet.children);const a=this._placeholderDecorations.get(s);i.removeDecoration(a),this._placeholderDecorations.delete(s);for(const l of o._snippet.placeholders){const c=o._snippet.offset(l),d=o._snippet.fullLen(l),u=D.fromPositions(t.getPositionAt(o._offset+c),t.getPositionAt(o._offset+c+d)),h=i.addDecoration(u,Dl._decor.inactive);this._placeholderDecorations.set(l,h)}}this._placeholderGroups=mQ(this._snippet.placeholders,Xa.compareByIndex)})}};Dl._decor={active:rt.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:rt.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:rt.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:rt.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};let vP=Dl;const lse={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let wP=_c=class{static adjustWhitespace(e,t,i,s,o){const r=e.getLineContent(t.lineNumber),a=fi(r,0,t.column-1);let l;return s.walk(c=>{if(!(c instanceof Co)||c.parent instanceof $1||o&&!o.has(c))return!0;const d=c.value.split(/\r\n|\r|\n/);if(i){const h=s.offset(c);if(h===0)d[0]=e.normalizeIndentation(d[0]);else{l=l??s.toString();const f=l.charCodeAt(h-1);(f===10||f===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let f=1;f<d.length;f++)d[f]=e.normalizeIndentation(a+d[f])}const u=d.join(e.getEOL());return u!==c.value&&(c.parent.replace(c,[new Co(u)]),l=void 0),!0}),a}static adjustSelection(e,t,i,s){if(i!==0||s!==0){const{positionLineNumber:o,positionColumn:r}=t,a=r-i,l=r+s,c=e.validateRange({startLineNumber:o,startColumn:a,endLineNumber:o,endColumn:l});t=Ie.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,i,s,o,r,a,l,c){const d=[],u=[];if(!e.hasModel())return{edits:d,snippets:u};const h=e.getModel(),f=e.invokeWithinContext(C=>C.get(yv)),m=e.invokeWithinContext(C=>new sse(C.get(PC),h)),p=()=>a,b=h.getValueInRange(_c.adjustSelection(h,e.getSelection(),i,0)),v=h.getValueInRange(_c.adjustSelection(h,e.getSelection(),0,s)),w=h.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),y=e.getSelections().map((C,S)=>({selection:C,idx:S})).sort((C,S)=>D.compareRangesUsingStarts(C.selection,S.selection));for(const{selection:C,idx:S}of y){let x=_c.adjustSelection(h,C,i,0),k=_c.adjustSelection(h,C,0,s);b!==h.getValueInRange(x)&&(x=C),v!==h.getValueInRange(k)&&(k=C);const N=C.setStartPosition(x.startLineNumber,x.startColumn).setEndPosition(k.endLineNumber,k.endColumn),E=new Ev().parse(t,!0,o),B=N.getStartPosition(),A=_c.adjustWhitespace(h,B,r||S>0&&w!==h.getLineFirstNonWhitespaceColumn(C.positionLineNumber),E);E.resolveVariables(new ise([m,new ose(p,S,y.length,e.getOption(79)==="spread"),new nse(h,C,S,l),new _P(h,C,c),new bP,new rse(f),new ase])),d[S]=Ki.replace(N,E.toString()),d[S].identifier={major:S,minor:0},d[S]._isTracked=!0,u[S]=new vP(e,E,A)}return{edits:d,snippets:u}}static createEditsAndSnippetsFromEdits(e,t,i,s,o,r,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const l=[],c=e.getModel(),d=new Ev,u=new YI,h=new ise([e.invokeWithinContext(m=>new sse(m.get(PC),c)),new ose(()=>o,0,e.getSelections().length,e.getOption(79)==="spread"),new nse(c,e.getSelection(),0,r),new _P(c,e.getSelection(),a),new bP,new rse(e.invokeWithinContext(m=>m.get(yv))),new ase]);t=t.sort((m,p)=>D.compareRangesUsingStarts(m.range,p.range));let f=0;for(let m=0;m<t.length;m++){const{range:p,template:b}=t[m];if(m>0){const S=t[m-1].range,x=D.fromPositions(S.getEndPosition(),p.getStartPosition()),k=new Co(c.getValueInRange(x));u.appendChild(k),f+=k.value.length}const v=d.parseFragment(b,u);_c.adjustWhitespace(c,p.getStartPosition(),!0,u,new Set(v)),u.resolveVariables(h);const w=u.toString(),y=w.slice(f);f=w.length;const C=Ki.replace(p,y);C.identifier={major:m,minor:0},C._isTracked=!0,l.push(C)}return d.ensureFinalTabstop(u,i,!0),{edits:l,snippets:[new vP(e,u,"")]}}constructor(e,t,i=lse,s){this._editor=e,this._template=t,this._options=i,this._languageConfigurationService=s,this._templateMerges=[],this._snippets=[]}dispose(){gi(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?_c.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):_c.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,i=>{const s=i.filter(o=>!!o.identifier);for(let o=0;o<t.length;o++)t[o].initialize(s[o].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):s.map(o=>Ie.fromPositions(o.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=lse){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:i,snippets:s}=_c.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",i,o=>{const r=o.filter(l=>!!l.identifier);for(let l=0;l<s.length;l++)s[l].initialize(r[l].textChange);const a=s[0].isTrivialSnippet;if(!a){for(const l of this._snippets)l.merge(s);console.assert(s.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):r.map(l=>Ie.fromPositions(l.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const i of this._snippets){const s=i.move(e);t.push(...s)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const i of this._snippets){const s=i.computePossibleSelections();if(t.size===0)for(const[o,r]of s){r.sort(D.compareRangesUsingStarts);for(const a of e)if(r[0].containsRange(a)){t.set(o,[]);break}}if(t.size===0)return!1;t.forEach((o,r)=>{o.push(...s.get(r))})}e.sort(D.compareRangesUsingStarts);for(const[i,s]of t){if(s.length!==e.length){t.delete(i);continue}s.sort(D.compareRangesUsingStarts);for(let o=0;o<s.length;o++)if(!s[o].containsRange(e[o])){t.delete(i);continue}}return t.size>0}};wP=_c=KQe([qQe(3,Yi)],wP);var GQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},WD=function(n,e){return function(t,i){e(t,i,n)}},K0;const cse={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};var au;let Fo=(au=class{static get(e){return e.getContribution(K0.ID)}constructor(e,t,i,s,o){this._editor=e,this._logService=t,this._languageFeaturesService=i,this._languageConfigurationService=o,this._snippetListener=new ne,this._modelVersionId=-1,this._inSnippet=K0.InSnippetMode.bindTo(s),this._hasNextTabstop=K0.HasNextTabstop.bindTo(s),this._hasPrevTabstop=K0.HasPrevTabstop.bindTo(s)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)==null||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?cse:{...cse,...t})}catch(i){this.cancel(),this._logService.error(i),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var i;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(zt(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new wP(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),(i=this._session)!=null&&i.hasChoice){const s={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(d,u)=>{if(!this._session||d!==this._editor.getModel()||!U.equals(this._editor.getPosition(),u))return;const{activeChoice:h}=this._session;if(!h||h.choice.options.length===0)return;const f=d.getValueInRange(h.range),m=!!h.choice.options.find(b=>b.value===f),p=[];for(let b=0;b<h.choice.options.length;b++){const v=h.choice.options[b];p.push({kind:13,label:v.value,insertText:v.value,sortText:"a".repeat(b+1),range:h.range,filterText:m?`${f}_${v.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:_("next","Go to next placeholder...")}})}return{suggestions:p}}},o=this._editor.getModel();let r,a=!1;const l=()=>{r==null||r.dispose(),a=!1},c=()=>{a||(r=this._languageFeaturesService.completionProvider.register({language:o.getLanguageId(),pattern:o.uri.fsPath,scheme:o.uri.scheme,exclusive:!0},s),this._snippetListener.add(r),a=!0)};this._choiceCompletions={provider:s,enable:c,disable:l}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(s=>s.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){var t;if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:e}=this._session;if(!e||!this._choiceCompletions){(t=this._choiceCompletions)==null||t.disable(),this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{zQe(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)==null||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){var e;(e=this._session)==null||e.prev(),this._updateState()}next(){var e;(e=this._session)==null||e.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}},K0=au,au.ID="snippetController2",au.InSnippetMode=new we("inSnippetMode",!1,_("inSnippetMode","Whether the editor in current in snippet mode")),au.HasNextTabstop=new we("hasNextTabstop",!1,_("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),au.HasPrevTabstop=new we("hasPrevTabstop",!1,_("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),au);Fo=K0=GQe([WD(1,Os),WD(2,xe),WD(3,qe),WD(4,Yi)],Fo);Ot(Fo.ID,Fo,4);const zF=Hn.bindToContribution(Fo.get);_e(new zF({id:"jumpToNextSnippetPlaceholder",precondition:se.and(Fo.InSnippetMode,Fo.HasNextTabstop),handler:n=>n.next(),kbOpts:{weight:130,kbExpr:R.textInputFocus,primary:2}}));_e(new zF({id:"jumpToPrevSnippetPlaceholder",precondition:se.and(Fo.InSnippetMode,Fo.HasPrevTabstop),handler:n=>n.prev(),kbOpts:{weight:130,kbExpr:R.textInputFocus,primary:1026}}));_e(new zF({id:"leaveSnippet",precondition:Fo.InSnippetMode,handler:n=>n.cancel(!0),kbOpts:{weight:130,kbExpr:R.textInputFocus,primary:9,secondary:[1033]}}));_e(new zF({id:"acceptSnippet",precondition:Fo.InSnippetMode,handler:n=>n.finish()}));var ZQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},qB=function(n,e){return function(t,i){e(t,i,n)}};let xj=class extends G{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,i,s,o,r,a,l,c,d,u,h){super(),this.textModel=e,this.selectedSuggestItem=t,this._textModelVersionId=i,this._positions=s,this._debounceValue=o,this._suggestPreviewEnabled=r,this._suggestPreviewMode=a,this._inlineSuggestMode=l,this._enabled=c,this._instantiationService=d,this._commandService=u,this._languageConfigurationService=h,this._source=this._register(this._instantiationService.createInstance(Sj,this.textModel,this._textModelVersionId,this._debounceValue)),this._isActive=pt(this,!1),this._forceUpdateExplicitlySignal=P1(this),this._selectedInlineCompletionId=pt(this,void 0),this._primaryPosition=Te(this,m=>this._positions.read(m)[0]??new U(1,1)),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([uh.Redo,uh.Undo,uh.AcceptWord]),this._fetchInlineCompletionsPromise=pge({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:Yc.Automatic}),handleChange:(m,p)=>(m.didChange(this._textModelVersionId)&&this._preserveCurrentCompletionReasons.has(this._getReason(m.change))?p.preserveCurrentCompletion=!0:m.didChange(this._forceUpdateExplicitlySignal)&&(p.inlineCompletionTriggerKind=Yc.Explicit),!0)},(m,p)=>{if(this._forceUpdateExplicitlySignal.read(m),!(this._enabled.read(m)&&this.selectedSuggestItem.read(m)||this._isActive.read(m))){this._source.cancelUpdate();return}this._textModelVersionId.read(m);const v=this._source.suggestWidgetInlineCompletions.get(),w=this.selectedSuggestItem.read(m);if(v&&!w){const k=this._source.inlineCompletions.get();qi(N=>{(!k||v.request.versionId>k.request.versionId)&&this._source.inlineCompletions.set(v.clone(),N),this._source.clearSuggestWidgetInlineCompletions(N)})}const y=this._primaryPosition.read(m),C={triggerKind:p.inlineCompletionTriggerKind,selectedSuggestionInfo:w==null?void 0:w.toSelectedSuggestionInfo()},S=this.selectedInlineCompletion.get(),x=p.preserveCurrentCompletion||S!=null&&S.forwardStable?S:void 0;return this._source.fetch(y,C,x)}),this._filteredInlineCompletionItems=ma({owner:this,equalsFn:H2()},m=>{const p=this._source.inlineCompletions.read(m);if(!p)return[];const b=this._primaryPosition.read(m);return p.inlineCompletions.filter(w=>w.isVisible(this.textModel,b,m))}),this.selectedInlineCompletionIndex=Te(this,m=>{const p=this._selectedInlineCompletionId.read(m),b=this._filteredInlineCompletionItems.read(m),v=this._selectedInlineCompletionId===void 0?-1:b.findIndex(w=>w.semanticId===p);return v===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):v}),this.selectedInlineCompletion=Te(this,m=>{const p=this._filteredInlineCompletionItems.read(m),b=this.selectedInlineCompletionIndex.read(m);return p[b]}),this.activeCommands=ma({owner:this,equalsFn:H2()},m=>{var p;return((p=this.selectedInlineCompletion.read(m))==null?void 0:p.inlineCompletion.source.inlineCompletions.commands)??[]}),this.lastTriggerKind=this._source.inlineCompletions.map(this,m=>m==null?void 0:m.request.context.triggerKind),this.inlineCompletionsCount=Te(this,m=>{if(this.lastTriggerKind.read(m)===Yc.Explicit)return this._filteredInlineCompletionItems.read(m).length}),this.state=ma({owner:this,equalsFn:(m,p)=>!m||!p?m===p:$ne(m.ghostTexts,p.ghostTexts)&&m.inlineCompletion===p.inlineCompletion&&m.suggestItem===p.suggestItem},m=>{const p=this.textModel,b=this.selectedSuggestItem.read(m);if(b){const v=eb(b.toSingleTextEdit(),p),w=this._computeAugmentation(v,m);if(!this._suggestPreviewEnabled.read(m)&&!w)return;const C=(w==null?void 0:w.edit)??v,S=w?w.edit.text.length-v.text.length:0,x=this._suggestPreviewMode.read(m),k=this._positions.read(m),N=[C,...GB(this.textModel,k,C)],E=N.map((A,O)=>Yne(A,p,x,k[O],S)).filter(mu),B=E[0]??new ON(C.range.endLineNumber,[]);return{edits:N,primaryGhostText:B,ghostTexts:E,inlineCompletion:w==null?void 0:w.completion,suggestItem:b}}else{if(!this._isActive.read(m))return;const v=this.selectedInlineCompletion.read(m);if(!v)return;const w=v.toSingleTextEdit(m),y=this._inlineSuggestMode.read(m),C=this._positions.read(m),S=[w,...GB(this.textModel,C,w)],x=S.map((k,N)=>Yne(k,p,y,C[N],0)).filter(mu);return x[0]?{edits:S,primaryGhostText:x[0],ghostTexts:x,inlineCompletion:v,suggestItem:void 0}:void 0}}),this.ghostTexts=ma({owner:this,equalsFn:$ne},m=>{const p=this.state.read(m);if(p)return p.ghostTexts}),this.primaryGhostText=ma({owner:this,equalsFn:Qbe},m=>{const p=this.state.read(m);if(p)return p==null?void 0:p.primaryGhostText}),this._register(A1(this._fetchInlineCompletionsPromise));let f;this._register(Je(m=>{var v,w;const p=this.state.read(m),b=p==null?void 0:p.inlineCompletion;if((b==null?void 0:b.semanticId)!==(f==null?void 0:f.semanticId)&&(f=b,b)){const y=b.inlineCompletion,C=y.source;(w=(v=C.provider).handleItemDidShow)==null||w.call(v,C.inlineCompletions,y.sourceInlineCompletion,y.insertText)}}))}_getReason(e){return e!=null&&e.isUndoing?uh.Undo:e!=null&&e.isRedoing?uh.Redo:this.isAcceptingPartially?uh.AcceptWord:uh.Other}async trigger(e){this._isActive.set(!0,e),await this._fetchInlineCompletionsPromise.get()}async triggerExplicitly(e){Cv(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineCompletionsPromise.get()}stop(e){Cv(e,t=>{this._isActive.set(!1,t),this._source.clear(t)})}_computeAugmentation(e,t){const i=this.textModel,s=this._source.suggestWidgetInlineCompletions.read(t),o=s?s.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(mu);return gAe(o,a=>{let l=a.toSingleTextEdit(t);return l=eb(l,i,D.fromPositions(l.range.getStartPosition(),e.range.getEndPosition())),ive(l,e)?{completion:a,edit:l}:void 0})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){var s;if(e.getModel()!==this.textModel)throw new Zt;const t=this.state.get();if(!t||t.primaryGhostText.isEmpty()||!t.inlineCompletion)return;const i=t.inlineCompletion.toInlineCompletion(void 0);if(i.command&&i.source.addRef(),e.pushUndoStop(),i.snippetInfo)e.executeEdits("inlineSuggestion.accept",[Ki.replace(i.range,""),...i.additionalTextEdits]),e.setPosition(i.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),(s=Fo.get(e))==null||s.insert(i.snippetInfo.snippet,{undoStopBefore:!1});else{const o=t.edits,r=dse(o).map(a=>Ie.fromPositions(a));e.executeEdits("inlineSuggestion.accept",[...o.map(a=>Ki.replace(a.range,a.text)),...i.additionalTextEdits]),e.setSelections(r,"inlineCompletionAccept")}this.stop(),i.command&&(await this._commandService.executeCommand(i.command.id,...i.command.arguments||[]).then(void 0,fn),i.source.removeRef())}async acceptNextWord(e){await this._acceptNext(e,(t,i)=>{const s=this.textModel.getLanguageIdAtPosition(t.lineNumber,t.column),o=this._languageConfigurationService.getLanguageConfiguration(s),r=new RegExp(o.wordDefinition.source,o.wordDefinition.flags.replace("g","")),a=i.match(r);let l=0;a&&a.index!==void 0?a.index===0?l=a[0].length:l=a.index:l=i.length;const d=/\s+/g.exec(i);return d&&d.index!==void 0&&d.index+d[0].length<l&&(l=d.index+d[0].length),l},0)}async acceptNextLine(e){await this._acceptNext(e,(t,i)=>{const s=i.match(/\n/);return s&&s.index!==void 0?s.index+1:i.length},1)}async _acceptNext(e,t,i){if(e.getModel()!==this.textModel)throw new Zt;const s=this.state.get();if(!s||s.primaryGhostText.isEmpty()||!s.inlineCompletion)return;const o=s.primaryGhostText,r=s.inlineCompletion.toInlineCompletion(void 0);if(r.snippetInfo||r.filterText!==r.insertText){await this.accept(e);return}const a=o.parts[0],l=new U(o.lineNumber,a.column),c=a.text,d=t(l,c);if(d===c.length&&o.parts.length===1){this.accept(e);return}const u=c.substring(0,d),h=this._positions.get(),f=h[0];r.source.addRef();try{this._isAcceptingPartially=!0;try{e.pushUndoStop();const m=D.fromPositions(f,l),p=e.getModel().getValueInRange(m)+u,b=new Iu(m,p),v=[b,...GB(this.textModel,h,b)],w=dse(v).map(y=>Ie.fromPositions(y));e.executeEdits("inlineSuggestion.accept",v.map(y=>Ki.replace(y.range,y.text))),e.setSelections(w,"inlineCompletionPartialAccept"),e.revealPositionInCenterIfOutsideViewport(e.getPosition(),1)}finally{this._isAcceptingPartially=!1}if(r.source.provider.handlePartialAccept){const m=D.fromPositions(r.range.getStartPosition(),ec.ofText(u).addToPosition(l)),p=e.getModel().getValueInRange(m,1);r.source.provider.handlePartialAccept(r.source.inlineCompletions,r.sourceInlineCompletion,p.length,{kind:i})}}finally{r.source.removeRef()}}handleSuggestAccepted(e){var o,r;const t=eb(e.toSingleTextEdit(),this.textModel),i=this._computeAugmentation(t,void 0);if(!i)return;const s=i.completion.inlineCompletion;(r=(o=s.source.provider).handlePartialAccept)==null||r.call(o,s.source.inlineCompletions,s.sourceInlineCompletion,t.text.length,{kind:2})}};xj=ZQe([qB(9,Ae),qB(10,Ci),qB(11,Yi)],xj);var uh;(function(n){n[n.Undo=0]="Undo",n[n.Redo=1]="Redo",n[n.AcceptWord=2]="AcceptWord",n[n.Other=3]="Other"})(uh||(uh={}));function GB(n,e,t){if(e.length===1)return[];const i=e[0],s=e.slice(1),o=t.range.getStartPosition(),r=t.range.getEndPosition(),a=n.getValueInRange(D.fromPositions(i,r)),l=Kne(i,o);if(l.lineNumber<1)return et(new Zt(`positionWithinTextEdit line number should be bigger than 0.
			Invalid subtraction between ${i.toString()} and ${o.toString()}`)),[];const c=YQe(t.text,l);return s.map(d=>{const u=yQe(Kne(d,o),r),h=n.getValueInRange(D.fromPositions(d,u)),f=Um(a,h),m=D.fromPositions(d,d.delta(0,f));return new Iu(m,c)})}function YQe(n,e){let t="";const i=HRe(n);for(let s=e.lineNumber-1;s<i.length;s++)t+=i[s].substring(s===e.lineNumber-1?e.column-1:0);return t}function dse(n){const e=KR.createSortPermutation(n,Io(o=>o.range,D.compareRangesUsingStarts)),i=new VK(e.apply(n)).getNewRanges();return e.inverse().apply(i).map(o=>o.getEndPosition())}var XQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},use=function(n,e){return function(t,i){e(t,i,n)}},lx;class NZ{constructor(e){this.name=e}select(e,t,i){if(i.length===0)return 0;const s=i[0].score[0];for(let o=0;o<i.length;o++){const{score:r,completion:a}=i[o];if(r[0]!==s)break;if(a.preselect)return o}return 0}}class hse extends NZ{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}}class QQe extends NZ{constructor(){super("recentlyUsed"),this._cache=new Hu(300,.66),this._seq=0}memorize(e,t,i){const s=`${e.getLanguageId()}/${i.textLabel}`;this._cache.set(s,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(i.length===0)return 0;const s=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(s))return super.select(e,t,i);const o=i[0].score[0];let r=-1,a=-1,l=-1;for(let c=0;c<i.length&&i[c].score[0]===o;c++){const d=`${e.getLanguageId()}/${i[c].textLabel}`,u=this._cache.peek(d);if(u&&u.touch>l&&u.type===i[c].completion.kind&&u.insertText===i[c].completion.insertText&&(l=u.touch,a=c),i[c].completion.preselect&&r===-1)return r=c}return a!==-1?a:r!==-1?r:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[i,s]of e)s.touch=t,s.type=typeof s.type=="number"?s.type:xk.fromString(s.type),this._cache.set(i,s);this._seq=this._cache.size}}class JQe extends NZ{constructor(){super("recentlyUsedByPrefix"),this._trie=_y.forStrings(),this._seq=0}memorize(e,t,i){const{word:s}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${s}`;this._trie.set(o,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){const{word:s}=e.getWordUntilPosition(t);if(!s)return super.select(e,t,i);const o=`${e.getLanguageId()}/${s}`;let r=this._trie.get(o);if(r||(r=this._trie.findSubstr(o)),r)for(let a=0;a<i.length;a++){const{kind:l,insertText:c}=i[a].completion;if(l===r.type&&c===r.insertText)return a}return super.select(e,t,i)}toJSON(){const e=[];return this._trie.forEach((t,i)=>e.push([i,t])),e.sort((t,i)=>-(t[1].touch-i[1].touch)).forEach((t,i)=>t[1].touch=i),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,i]of e)i.type=typeof i.type=="number"?i.type:xk.fromString(i.type),this._trie.set(t,i)}}}var Sm;let Lj=(Sm=class{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new ne,this._persistSoon=new li(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(i=>{i.reason===Jk.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(e,t){var s;const i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((s=this._strategy)==null?void 0:s.name)!==i){this._saveState();const o=lx._strategyCtors.get(i)||hse;this._strategy=new o;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${lx._storagePrefix}/${i}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${lx._storagePrefix}/${this._strategy.name}`,i,t,1)}}},lx=Sm,Sm._strategyCtors=new Map([["recentlyUsedByPrefix",JQe],["recentlyUsed",QQe],["first",hse]]),Sm._storagePrefix="suggest/memories",Sm);Lj=lx=XQe([use(0,ac),use(1,_t)],Lj);const UF=kt("ISuggestMemories");Tt(UF,Lj,1);var eJe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},tJe=function(n,e){return function(t,i){e(t,i,n)}},kj,Db;let yP=(Db=class{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=kj.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(i=>i.hasChanged(124)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)==null||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(124)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const i=this._editor.getModel(),s=this._editor.getSelection(),o=i.getWordAtPosition(s.getStartPosition());if(!o){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(o.endColumn===s.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}},kj=Db,Db.AtEnd=new we("atEndOfWord",!1),Db);yP=kj=eJe([tJe(1,qe)],yP);var iJe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},nJe=function(n,e){return function(t,i){e(t,i,n)}},cx,Tb;let i1=(Tb=class{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=cx.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)==null||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},i){if(e.items.length===0){this.reset();return}if(cx._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=i,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,i){let s=i;for(let o=t.items.length;o>0&&(s=(s+t.items.length+(e?1:-1))%t.items.length,!(s===i||!t.items[s].completion.additionalTextEdits));o--);return s}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=cx._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}},cx=Tb,Tb.OtherSuggestions=new we("hasOtherSuggestions",!1),Tb);i1=cx=iJe([nJe(1,qe)],i1);class sJe{constructor(e,t,i,s){this._disposables=new ne,this._disposables.add(i.onDidSuggest(o=>{o.completionModel.items.length===0&&this.reset()})),this._disposables.add(i.onDidCancel(o=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(o=>{if(this._active&&!t.isFrozen()&&i.state!==0){const r=o.charCodeAt(o.length-1);this._active.acceptCharacters.has(r)&&e.getOption(0)&&s(this._active.item)}}))}_onItem(e){if(!e||!ho(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new b2;for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}const $a=class $a{async provideSelectionRanges(e,t){const i=[];for(const s of t){const o=[];i.push(o);const r=new Map;await new Promise(a=>$a._bracketsRightYield(a,0,e,s,r)),await new Promise(a=>$a._bracketsLeftYield(a,0,e,s,r,o))}return i}static _bracketsRightYield(e,t,i,s,o){const r=new Map,a=Date.now();for(;;){if(t>=$a._maxRounds){e();break}if(!s){e();break}const l=i.bracketPairs.findNextBracket(s);if(!l){e();break}if(Date.now()-a>$a._maxDuration){setTimeout(()=>$a._bracketsRightYield(e,t+1,i,s,o));break}if(l.bracketInfo.isOpeningBracket){const d=l.bracketInfo.bracketText,u=r.has(d)?r.get(d):0;r.set(d,u+1)}else{const d=l.bracketInfo.getOpeningBrackets()[0].bracketText;let u=r.has(d)?r.get(d):0;if(u-=1,r.set(d,Math.max(0,u)),u<0){let h=o.get(d);h||(h=new So,o.set(d,h)),h.push(l.range)}}s=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,s,o,r){const a=new Map,l=Date.now();for(;;){if(t>=$a._maxRounds&&o.size===0){e();break}if(!s){e();break}const c=i.bracketPairs.findPrevBracket(s);if(!c){e();break}if(Date.now()-l>$a._maxDuration){setTimeout(()=>$a._bracketsLeftYield(e,t+1,i,s,o,r));break}if(c.bracketInfo.isOpeningBracket){const u=c.bracketInfo.bracketText;let h=a.has(u)?a.get(u):0;if(h-=1,a.set(u,Math.max(0,h)),h<0){const f=o.get(u);if(f){const m=f.shift();f.size===0&&o.delete(u);const p=D.fromPositions(c.range.getEndPosition(),m.getStartPosition()),b=D.fromPositions(c.range.getStartPosition(),m.getEndPosition());r.push({range:p}),r.push({range:b}),$a._addBracketLeading(i,b,r)}}}else{const u=c.bracketInfo.getOpeningBrackets()[0].bracketText,h=a.has(u)?a.get(u):0;a.set(u,h+1)}s=c.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;const s=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(s);o!==0&&o!==t.startColumn&&(i.push({range:D.fromPositions(new U(s,o),t.getEndPosition())}),i.push({range:D.fromPositions(new U(s,1),t.getEndPosition())}));const r=s-1;if(r>0){const a=e.getLineFirstNonWhitespaceColumn(r);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(r)&&(i.push({range:D.fromPositions(new U(r,a),t.getEndPosition())}),i.push({range:D.fromPositions(new U(r,1),t.getEndPosition())}))}}};$a._maxDuration=30,$a._maxRounds=2;let CP=$a;const zd=class zd{static async create(e,t){if(!t.getOption(119).localityBonus||!t.hasModel())return zd.None;const i=t.getModel(),s=t.getPosition();if(!e.canComputeWordRanges(i.uri))return zd.None;const[o]=await new CP().provideSelectionRanges(i,[s]);if(o.length===0)return zd.None;const r=await e.computeWordRanges(i.uri,o[0].range);if(!r)return zd.None;const a=i.getWordUntilPosition(s);return delete r[a.word],new class extends zd{distance(l,c){if(!s.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;const d=typeof c.label=="string"?c.label:c.label.label,u=r[d];if(uue(u))return 2<<20;const h=bk(u,D.fromPositions(l),D.compareRangesUsingStarts),f=h>=0?u[h]:u[Math.max(0,~h-1)];let m=o.length;for(const p of o){if(!D.containsRange(p.range,f))break;m-=1}return m}}}};zd.None=new class extends zd{distance(){return 0}};let SP=zd,fse=class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}};class _g{constructor(e,t,i,s,o,r,a=Kk.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=_g._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=s,this._options=o,this._refilterKind=1,this._lineContext=i,this._fuzzyScoreOptions=a,r==="top"?this._snippetCompareFn=_g._compareCompletionItemsSnippetsUp:r==="bottom"&&(this._snippetCompareFn=_g._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const e=new Set;for(const[t,i]of this.getItemsByProvider())i.length>0&&i[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext;let s="",o="";const r=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||r.length>2e3?wv:o5e;for(let c=0;c<r.length;c++){const d=r[c];if(d.isInvalid)continue;const u=this._itemsByProvider.get(d.provider);u?u.push(d):this._itemsByProvider.set(d.provider,[d]);const h=d.position.column-d.editStart.column,f=h+i-(d.position.column-this._column);if(s.length!==f&&(s=f===0?"":t.slice(-f),o=s.toLowerCase()),d.word=s,f===0)d.score=ed.Default;else{let m=0;for(;m<h;){const p=s.charCodeAt(m);if(p===32||p===9)m+=1;else break}if(m>=f)d.score=ed.Default;else if(typeof d.completion.filterText=="string"){const p=l(s,o,m,d.completion.filterText,d.filterTextLow,0,this._fuzzyScoreOptions);if(!p)continue;z8(d.completion.filterText,d.textLabel)===0?d.score=p:(d.score=t5e(s,o,m,d.textLabel,d.labelLow,0),d.score[0]=p[0])}else{const p=l(s,o,m,d.textLabel,d.labelLow,0,this._fuzzyScoreOptions);if(!p)continue;d.score=p}}d.idx=c,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?P9(e.length-.85,e,(c,d)=>c-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return _g._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return _g._compareCompletionItems(e,t)}}var oJe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},$f=function(n,e){return function(t,i){e(t,i,n)}},Nj;class Fp{static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),i=e.getPosition();t.tokenization.tokenizeIfCheap(i.lineNumber);const s=t.getWordAtPosition(i);return!(!s||s.endColumn!==i.column&&s.startColumn+1!==i.column||!isNaN(Number(s.word)))}constructor(e,t,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=i}}function rJe(n,e,t){if(!e.getContextKeyValue(Hr.inlineSuggestionVisible.key))return!0;const i=e.getContextKeyValue(Hr.suppressSuggestions.key);return i!==void 0?!i:!n.getOption(62).suppressSuggestions}function aJe(n,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const i=e.getContextKeyValue(Hr.suppressSuggestions.key);return i!==void 0?!i:!n.getOption(62).suppressSuggestions}let xP=Nj=class{constructor(e,t,i,s,o,r,a,l,c){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=s,this._logService=o,this._contextKeyService=r,this._configurationService=a,this._languageFeaturesService=l,this._envService=c,this._toDispose=new ne,this._triggerCharacterListener=new ne,this._triggerQuickSuggest=new oc,this._triggerState=void 0,this._completionDisposables=new ne,this._onDidCancel=new $,this._onDidTrigger=new $,this._onDidSuggest=new $,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Ie(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let d=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{d=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{d=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(u=>{d||this._onCursorChange(u)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!d&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){gi(this._triggerCharacterListener),gi([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(92)||!this._editor.hasModel()||!this._editor.getOption(122))return;const e=new Map;for(const i of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const s of i.triggerCharacters||[]){let o=e.get(s);o||(o=new Set,e.set(s,o)),o.add(i)}const t=i=>{var r;if(!aJe(this._editor,this._contextKeyService,this._configurationService)||Fp.shouldAutoTrigger(this._editor))return;if(!i){const a=this._editor.getPosition();i=this._editor.getModel().getLineContent(a.lineNumber).substr(0,a.column-1)}let s="";fv(i.charCodeAt(i.length-1))?qn(i.charCodeAt(i.length-2))&&(s=i.substr(i.length-2)):s=i.charAt(i.length-1);const o=e.get(s);if(o){const a=new Map;if(this._completionModel)for(const[l,c]of this._completionModel.getItemsByProvider())o.has(l)||a.set(l,c);this.trigger({auto:!0,triggerKind:1,triggerCharacter:s,retrigger:!!this._completionModel,clipboardText:(r=this._completionModel)==null?void 0:r.clipboardText,completionOptions:{providerFilter:o,providerItemsToReuse:a}})}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){var t;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)==null||t.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;Ew.isAllOff(this._editor.getOption(90))||this._editor.getOption(119).snippetsPreventQuickSuggestions&&((e=Fo.get(this._editor))!=null&&e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!Fp.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),i=this._editor.getPosition(),s=this._editor.getOption(90);if(!Ew.isAllOff(s)){if(!Ew.isAllOn(s)){t.tokenization.tokenizeIfCheap(i.lineNumber);const o=t.tokenization.getLineTokens(i.lineNumber),r=o.getStandardTokenType(o.findTokenIndexAtOffset(Math.max(i.column-1-1,0)));if(Ew.valueFor(s,r)!=="on")return}rJe(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0})}},this._editor.getOption(91)))}_refilterCompletionItems(){zt(this._editor.hasModel()),zt(this._triggerState!==void 0);const e=this._editor.getModel(),t=this._editor.getPosition(),i=new Fp(e,t,{...this._triggerState,refilter:!0});this._onNewContext(i)}trigger(e){var h,f,m;if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=new Fp(t,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:e.shy??!1,position:this._editor.getPosition()}),this._context=i;let s={triggerKind:e.triggerKind??0};e.triggerCharacter&&(s={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new Gi;const o=this._editor.getOption(113);let r=1;switch(o){case"top":r=0;break;case"bottom":r=2;break}const{itemKind:a,showDeprecated:l}=Nj.createSuggestFilter(this._editor),c=new FN(r,((h=e.completionOptions)==null?void 0:h.kindFilter)??a,(f=e.completionOptions)==null?void 0:f.providerFilter,(m=e.completionOptions)==null?void 0:m.providerItemsToReuse,l),d=SP.create(this._editorWorkerService,this._editor),u=LZ(this._languageFeaturesService.completionProvider,t,this._editor.getPosition(),c,s,this._requestToken.token);Promise.all([u,d]).then(async([p,b])=>{var S;if((S=this._requestToken)==null||S.dispose(),!this._editor.hasModel())return;let v=e==null?void 0:e.clipboardText;if(!v&&p.needsClipboard&&(v=await this._clipboardService.readText()),this._triggerState===void 0)return;const w=this._editor.getModel(),y=new Fp(w,this._editor.getPosition(),e),C={...Kk.default,firstMatchCanBeWeak:!this._editor.getOption(119).matchOnWordStartOnly};if(this._completionModel=new _g(p.items,this._context.column,{leadingLineContent:y.leadingLineContent,characterCountDelta:y.column-this._context.column},b,this._editor.getOption(119),this._editor.getOption(113),C,v),this._completionDisposables.add(p.disposable),this._onNewContext(y),this._reportDurationsTelemetry(p.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(const x of p.items)x.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${x.provider._debugDisplayName}`,x.completion)}).catch(et)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static createSuggestFilter(e){const t=new Set;e.getOption(113)==="none"&&t.add(27);const s=e.getOption(119);return s.showMethods||t.add(0),s.showFunctions||t.add(1),s.showConstructors||t.add(2),s.showFields||t.add(3),s.showVariables||t.add(4),s.showClasses||t.add(5),s.showStructs||t.add(6),s.showInterfaces||t.add(7),s.showModules||t.add(8),s.showProperties||t.add(9),s.showEvents||t.add(10),s.showOperators||t.add(11),s.showUnits||t.add(12),s.showValues||t.add(13),s.showConstants||t.add(14),s.showEnums||t.add(15),s.showEnumMembers||t.add(16),s.showKeywords||t.add(17),s.showWords||t.add(18),s.showColors||t.add(19),s.showFiles||t.add(20),s.showReferences||t.add(21),s.showColors||t.add(22),s.showFolders||t.add(23),s.showTypeParameters||t.add(24),s.showSnippets||t.add(27),s.showUsers||t.add(25),s.showIssues||t.add(26),{itemKind:t,showDeprecated:s.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(fi(e.leadingLineContent)!==fi(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(Fp.shouldAutoTrigger(this._editor)&&this._context){const i=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:i}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){const t=new Map,i=new Set;for(const[s,o]of this._completionModel.getItemsByProvider())o.length>0&&o[0].container.incomplete?i.add(s):t.set(s,o);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:i,providerItemsToReuse:t}})}else{const t=this._completionModel.lineContext;let i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){const s=Fp.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(s&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,i=this._completionModel.items.length>0,i&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:i})}}}}};xP=Nj=oJe([$f(1,fr),$f(2,Mf),$f(3,Zs),$f(4,Os),$f(5,qe),$f(6,_t),$f(7,xe),$f(8,$K)],xP);const eO=class eO{constructor(e,t){this._disposables=new ne,this._lastOvertyped=[],this._locked=!1,this._disposables.add(e.onWillType(()=>{if(this._locked||!e.hasModel())return;const i=e.getSelections(),s=i.length;let o=!1;for(let a=0;a<s;a++)if(!i[a].isEmpty()){o=!0;break}if(!o){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];const r=e.getModel();for(let a=0;a<s;a++){const l=i[a];if(r.getValueLengthInRange(l)>eO._maxSelectionLength)return;this._lastOvertyped[a]={value:r.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}})),this._disposables.add(t.onDidTrigger(i=>{this._locked=!0})),this._disposables.add(t.onDidCancel(i=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}};eO._maxSelectionLength=51200;let Ij=eO;var lJe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ZB=function(n,e){return function(t,i){e(t,i,n)}};let Ej=class{constructor(e,t,i,s,o){this._menuId=t,this._menuService=s,this._contextKeyService=o,this._menuDisposables=new ne,this.element=ae(e,ge(".suggest-status-bar"));const r=a=>a instanceof Fr?i.createInstance(Sq,a,{useComma:!0}):void 0;this._leftActions=new Ea(this.element,{actionViewItemProvider:r}),this._rightActions=new Ea(this.element,{actionViewItemProvider:r}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=()=>{const i=[],s=[];for(const[o,r]of e.getActions())o==="left"?i.push(...r):s.push(...r);this._leftActions.clear(),this._leftActions.push(i),this._rightActions.clear(),this._rightActions.push(s)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};Ej=lJe([ZB(2,Ae),ZB(3,Oa),ZB(4,qe)],Ej);var cJe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},dJe=function(n,e){return function(t,i){e(t,i,n)}};function IZ(n){return!!n&&!!(n.completion.documentation||n.completion.detail&&n.completion.detail!==n.completion.label)}let Dj=class{constructor(e,t){this._editor=e,this._onDidClose=new $,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new $,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new ne,this._renderDisposeable=new ne,this._borderWidth=1,this._size=new ni(330,0),this.domNode=ge(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(wf,{editor:e}),this._body=ge(".body"),this._scrollbar=new EI(this._body,{alwaysConsumeMouseWheel:!0}),ae(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=ae(this._body,ge(".header")),this._close=ae(this._header,ge("span"+Ke.asCSSSelector(he.close))),this._close.title=_("details.close","Close"),this._type=ae(this._header,ge("p.type")),this._docs=ae(this._body,ge("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(50)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(50),i=t.getMassagedFontFamily(),s=e.get(120)||t.fontSize,o=e.get(121)||t.lineHeight,r=t.fontWeight,a=`${s}px`,l=`${o}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${o/s}`,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(121)||this._editor.getOption(50).lineHeight,t=this._borderWidth,i=t*2;return{lineHeight:e,borderWidth:t,borderHeight:i,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=_("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var o;this._renderDisposeable.clear();let{detail:i,documentation:s}=e.completion;if(t){let r="";r+=`score: ${e.score[0]}
`,r+=`prefix: ${e.word??"(no prefix)"}
`,r+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,r+=`distance: ${e.distance} (localityBonus-setting)
`,r+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,r+=`commit_chars: ${(o=e.completion.commitCharacters)==null?void 0:o.join("")}
`,s=new Us().appendCodeblock("empty",r),i=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!IZ(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),i){const r=i.length>1e5?`${i.substr(0,1e5)}…`:i;this._type.textContent=r,this._type.title=r,Dr(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(r))}else ws(this._type),this._type.title="",wo(this._type),this.domNode.classList.add("no-type");if(ws(this._docs),typeof s=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=s;else if(s){this._docs.classList.add("markdown-docs"),ws(this._docs);const r=this._markdownRenderer.render(s);this._docs.appendChild(r.element),this._renderDisposeable.add(r),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=r=>{r.preventDefault(),r.stopPropagation()},this._close.onclick=r=>{r.preventDefault(),r.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(e,t){const i=new ni(e,t);ni.equals(i,this._size)||(this._size=i,q2e(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};Dj=cJe([dJe(1,Ae)],Dj);class uJe{constructor(e,t){this.widget=e,this._editor=t,this.allowEditorOverflow=!0,this._disposables=new ne,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new aZ,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let i,s,o=0,r=0;this._disposables.add(this._resizable.onDidWillResize(()=>{i=this._topLeft,s=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(i&&s){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(r=s.width-a.dimension.width,l=!0),a.north&&(o=s.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:i.top+o,left:i.left+r})}a.done&&(i=void 0,s=void 0,o=0,r=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{this._anchorBox&&this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){const i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,t)}_placeAtAnchor(e,t,i){const s=qm(this.getDomNode().ownerDocument.body),o=this.widget.getLayoutInfo(),r=new ni(220,2*o.lineHeight),a=e.top,l=function(){const S=s.width-(e.left+e.width+o.borderWidth+o.horizontalPadding),x=-o.borderWidth+e.left+e.width,k=new ni(S,s.height-e.top-o.borderHeight-o.verticalPadding),N=k.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:a,left:x,fit:S-t.width,maxSizeTop:k,maxSizeBottom:N,minSize:r.with(Math.min(S,r.width))}}(),c=function(){const S=e.left-o.borderWidth-o.horizontalPadding,x=Math.max(o.horizontalPadding,e.left-t.width-o.borderWidth),k=new ni(S,s.height-e.top-o.borderHeight-o.verticalPadding),N=k.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:a,left:x,fit:S-t.width,maxSizeTop:k,maxSizeBottom:N,minSize:r.with(Math.min(S,r.width))}}(),d=function(){const S=e.left,x=-o.borderWidth+e.top+e.height,k=new ni(e.width-o.borderHeight,s.height-e.top-e.height-o.verticalPadding);return{top:x,left:S,fit:k.height-t.height,maxSizeBottom:k,maxSizeTop:k,minSize:r.with(k.width)}}(),u=[l,c,d],h=u.find(S=>S.fit>=0)??u.sort((S,x)=>x.fit-S.fit)[0],f=e.top+e.height-o.borderHeight;let m,p=t.height;const b=Math.max(h.maxSizeTop.height,h.maxSizeBottom.height);p>b&&(p=b);let v;i?p<=h.maxSizeTop.height?(m=!0,v=h.maxSizeTop):(m=!1,v=h.maxSizeBottom):p<=h.maxSizeBottom.height?(m=!1,v=h.maxSizeBottom):(m=!0,v=h.maxSizeTop);let{top:w,left:y}=h;!m&&p>e.height&&(w=f-p);const C=this._editor.getDomNode();if(C){const S=C.getBoundingClientRect();w-=S.top,y-=S.left}this._applyTopLeft({left:y,top:w}),this._resizable.enableSashes(!m,h===l,m,h!==l),this._resizable.minSize=h.minSize,this._resizable.maxSize=v,this._resizable.layout(p,Math.min(v.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}}var du;(function(n){n[n.FILE=0]="FILE",n[n.FOLDER=1]="FOLDER",n[n.ROOT_FOLDER=2]="ROOT_FOLDER"})(du||(du={}));const hJe=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function HD(n,e,t,i,s){if(Ke.isThemeIcon(s))return[`codicon-${s.id}`,"predefined-file-icon"];if(Be.isUri(s))return[];const o=i===du.ROOT_FOLDER?["rootfolder-icon"]:i===du.FOLDER?["folder-icon"]:["file-icon"];if(t){let r;if(t.scheme===tt.data)r=Ym.parseMetaData(t).get(Ym.META_DATA_LABEL);else{const a=t.path.match(hJe);a?(r=VD(a[2].toLowerCase()),a[1]&&o.push(`${VD(a[1].toLowerCase())}-name-dir-icon`)):r=VD(t.authority.toLowerCase())}if(i===du.ROOT_FOLDER)o.push(`${r}-root-name-folder-icon`);else if(i===du.FOLDER)o.push(`${r}-name-folder-icon`);else{if(r){if(o.push(`${r}-name-file-icon`),o.push("name-file-icon"),r.length<=255){const l=r.split(".");for(let c=1;c<l.length;c++)o.push(`${l.slice(c).join(".")}-ext-file-icon`)}o.push("ext-file-icon")}const a=fJe(n,e,t);a&&o.push(`${VD(a)}-lang-file-icon`)}}return o}function fJe(n,e,t){if(!t)return null;let i=null;if(t.scheme===tt.data){const o=Ym.parseMetaData(t).get(Ym.META_DATA_MIME);o&&(i=e.getLanguageIdByMimeType(o))}else{const s=n.getModel(t);s&&(i=s.getLanguageId())}return i&&i!==Do?i:e.guessLanguageIdByFilepathOrFirstLine(t)}function VD(n){return n.replace(/[\s]/g,"/")}var gJe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},YB=function(n,e){return function(t,i){e(t,i,n)}};function nve(n){return`suggest-aria-id:${n}`}const mJe=Di("suggest-more-info",he.chevronRight,_("suggestMoreInfoIcon","Icon for more information in the suggest widget."));var Oc;const pJe=new(Oc=class{extract(e,t){if(e.textLabel.match(Oc._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(Oc._regexStrict))return t[0]=e.completion.detail,!0;if(e.completion.documentation){const i=typeof e.completion.documentation=="string"?e.completion.documentation:e.completion.documentation.value,s=Oc._regexRelaxed.exec(i);if(s&&(s.index===0||s.index+s[0].length===i.length))return t[0]=s[0],!0}return!1}},Oc._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,Oc._regexStrict=new RegExp(`^${Oc._regexRelaxed.source}$`,"i"),Oc);let Tj=class{constructor(e,t,i,s){this._editor=e,this._modelService=t,this._languageService=i,this._themeService=s,this._onDidToggleDetails=new $,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=new ne,i=e;i.classList.add("show-file-icons");const s=ae(e,ge(".icon")),o=ae(s,ge("span.colorspan")),r=ae(e,ge(".contents")),a=ae(r,ge(".main")),l=ae(a,ge(".icon-label.codicon")),c=ae(a,ge("span.left")),d=ae(a,ge("span.right")),u=new fM(c,{supportHighlights:!0,supportIcons:!0});t.add(u);const h=ae(c,ge("span.signature-label")),f=ae(c,ge("span.qualifier-label")),m=ae(d,ge("span.details-label")),p=ae(d,ge("span.readMore"+Ke.asCSSSelector(mJe)));return p.title=_("readMore","Read More"),{root:i,left:c,right:d,icon:s,colorspan:o,iconLabel:u,iconContainer:l,parametersLabel:h,qualifierLabel:f,detailsLabel:m,readMore:p,disposables:t,configureFont:()=>{const v=this._editor.getOptions(),w=v.get(50),y=w.getMassagedFontFamily(),C=w.fontFeatureSettings,S=v.get(120)||w.fontSize,x=v.get(121)||w.lineHeight,k=w.fontWeight,N=w.letterSpacing,E=`${S}px`,B=`${x}px`,A=`${N}px`;i.style.fontSize=E,i.style.fontWeight=k,i.style.letterSpacing=A,a.style.fontFamily=y,a.style.fontFeatureSettings=C,a.style.lineHeight=B,s.style.height=B,s.style.width=B,p.style.height=B,p.style.width=B}}}renderElement(e,t,i){i.configureFont();const{completion:s}=e;i.root.id=nve(t),i.colorspan.style.backgroundColor="";const o={labelEscapeNewLines:!0,matches:DI(e.score)},r=[];if(s.kind===19&&pJe.extract(e,r))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=r[0];else if(s.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";const a=HD(this._modelService,this._languageService,Be.from({scheme:"fake",path:e.textLabel}),du.FILE),l=HD(this._modelService,this._languageService,Be.from({scheme:"fake",path:s.detail}),du.FILE);o.extraClasses=a.length>l.length?a:l}else s.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",o.extraClasses=[HD(this._modelService,this._languageService,Be.from({scheme:"fake",path:e.textLabel}),du.FOLDER),HD(this._modelService,this._languageService,Be.from({scheme:"fake",path:s.detail}),du.FOLDER)].flat()):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...Ke.asClassNameArray(xk.toIcon(s.kind))));s.tags&&s.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,o),typeof s.label=="string"?(i.parametersLabel.textContent="",i.detailsLabel.textContent=XB(s.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=XB(s.label.detail||""),i.detailsLabel.textContent=XB(s.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(119).showInlineDetails?Dr(i.detailsLabel):wo(i.detailsLabel),IZ(e)?(i.right.classList.add("can-expand-details"),Dr(i.readMore),i.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},i.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),wo(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};Tj=gJe([YB(1,Ei),YB(2,ji),YB(3,Vn)],Tj);function XB(n){return n.replace(/\r\n|\r|\n/g,"")}var _Je=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},jD=function(n,e){return function(t,i){e(t,i,n)}},q0;P("editorSuggestWidget.background",Ca,_("editorSuggestWidgetBackground","Background color of the suggest widget."));P("editorSuggestWidget.border",YK,_("editorSuggestWidgetBorder","Border color of the suggest widget."));const bJe=P("editorSuggestWidget.foreground",Vu,_("editorSuggestWidgetForeground","Foreground color of the suggest widget."));P("editorSuggestWidget.selectedForeground",jk,_("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));P("editorSuggestWidget.selectedIconForeground",nq,_("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const vJe=P("editorSuggestWidget.selectedBackground",zk,_("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));P("editorSuggestWidget.highlightForeground",fw,_("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));P("editorSuggestWidget.focusHighlightForeground",oFe,_("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));P("editorSuggestWidgetStatus.foreground",gt(bJe,.5),_("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class wJe{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof nc}`}restore(){const e=this._service.get(this._key,0)??"";try{const t=JSON.parse(e);if(ni.is(t))return ni.lift(t)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}var xm;let Rj=(xm=class{constructor(e,t,i,s,o){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new es,this._pendingShowDetails=new es,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new oc,this._disposables=new ne,this._onDidSelect=new uv,this._onDidFocus=new uv,this._onDidHide=new $,this._onDidShow=new $,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new $,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new aZ,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new yJe(this,e),this._persistedSize=new wJe(t,e);class r{constructor(f,m,p=!1,b=!1){this.persistedSize=f,this.currentSize=m,this.persistHeight=p,this.persistWidth=b}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new r(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(h=>{var f,m;if(this._resize(h.dimension.width,h.dimension.height),a&&(a.persistHeight=a.persistHeight||!!h.north||!!h.south,a.persistWidth=a.persistWidth||!!h.east||!!h.west),!!h.done){if(a){const{itemHeight:p,defaultSize:b}=this.getLayoutInfo(),v=Math.round(p/2);let{width:w,height:y}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-y)<=v)&&(y=((f=a.persistedSize)==null?void 0:f.height)??b.height),(!a.persistWidth||Math.abs(a.currentSize.width-w)<=v)&&(w=((m=a.persistedSize)==null?void 0:m.width)??b.width),this._persistedSize.store(new ni(w,y))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=ae(this.element.domNode,ge(".message")),this._listElement=ae(this.element.domNode,ge(".tree"));const l=this._disposables.add(o.createInstance(Dj,this.editor));l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new uJe(l,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(119).showIcons);c();const d=o.createInstance(Tj,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Wa("SuggestWidget",this._listElement,{getHeight:h=>this.getLayoutInfo().itemHeight,getTemplateId:h=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>_("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:h=>{let f=h.textLabel;if(typeof h.completion.label!="string"){const{detail:v,description:w}=h.completion.label;v&&w?f=_("label.full","{0} {1}, {2}",f,v,w):v?f=_("label.detail","{0} {1}",f,v):w&&(f=_("label.desc","{0}, {1}",f,w))}if(!h.isResolved||!this._isDetailsVisible())return f;const{documentation:m,detail:p}=h.completion,b=hv("{0}{1}",p||"",m?typeof m=="string"?m:m.value:"");return _("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",f,b)}}}),this._list.style(Qv({listInactiveFocusBackground:vJe,listInactiveFocusOutline:Ai})),this._status=o.createInstance(Ej,this.element.domNode,hm);const u=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(119).showStatusBar);u(),this._disposables.add(s.onDidColorThemeChange(h=>this._onThemeChange(h))),this._onThemeChange(s.getColorTheme()),this._disposables.add(this._list.onMouseDown(h=>this._onListMouseDownOrTap(h))),this._disposables.add(this._list.onTap(h=>this._onListMouseDownOrTap(h))),this._disposables.add(this._list.onDidChangeSelection(h=>this._onListSelection(h))),this._disposables.add(this._list.onDidChangeFocus(h=>this._onListFocus(h))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(h=>{h.hasChanged(119)&&(u(),c()),this._completionModel&&(h.hasChanged(50)||h.hasChanged(120)||h.hasChanged(121))&&this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=ft.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=ft.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=ft.MultipleSuggestions.bindTo(i),this._ctxSuggestWidgetHasFocusedSuggestion=ft.HasFocusedSuggestion.bindTo(i),this._disposables.add(Ji(this._details.widget.domNode,"keydown",h=>{this._onDetailsKeydown.fire(h)})),this._disposables.add(this.editor.onMouseDown(h=>this._onEditorMouseDown(h)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)==null||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=Qc(e.type)?2:1}_onListFocus(e){var s;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const t=e.elements[0],i=e.indexes[0];t!==this._focusedItem&&((s=this._currentSuggestionDetails)==null||s.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=t,this._list.reveal(i),this._currentSuggestionDetails=Xn(async o=>{const r=Km(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=o.onCancellationRequested(()=>r.dispose());try{return await t.resolve(o)}finally{r.dispose(),a.dispose()}}),this._currentSuggestionDetails.then(()=>{i>=this._list.length||t!==this._list.element(i)||(this._ignoreFocusEvents=!0,this._list.splice(i,1,[t]),this._list.setFocus([i]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:nve(i)}))}).catch(et)),this._onDidFocus.fire({item:t,index:i,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:wo(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=q0.LOADING_MESSAGE,wo(this._listElement,this._status.element),Dr(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Tu(q0.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=q0.NO_SUGGESTIONS_MESSAGE,wo(this._listElement,this._status.element),Dr(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Tu(q0.NO_SUGGESTIONS_MESSAGE);break;case 3:wo(this._messageElement),Dr(this._listElement,this._status.element),this._show();break;case 4:wo(this._messageElement),Dr(this._listElement,this._status.element),this._show();break;case 5:wo(this._messageElement),Dr(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=Km(()=>this._setState(1),t)))}showSuggestions(e,t,i,s,o){var l,c;if(this._contentWidget.setPosition(this.editor.getPosition()),(l=this._loadingTimeout)==null||l.dispose(),(c=this._currentSuggestionDetails)==null||c.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&this._state!==2&&this._state!==0){this._setState(4);return}const r=this._completionModel.items.length,a=r===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(r>1),a){this._setState(s?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus(o?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=d2(je(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(IZ(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=d2(je(this.element.domNode),()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details")),this.editor.focus()})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var i;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(i=this._loadingTimeout)==null||i.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const e=this._persistedSize.restore(),t=Math.ceil(this.getLayoutInfo().itemHeight*4.3);e&&e.height<t&&this._persistedSize.store(e.with(void 0,t))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails())}_layout(e){var r,a;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const t=qm(this.element.domNode.ownerDocument.body),i=this.getLayoutInfo();e||(e=i.defaultSize);let s=e.height,o=e.width;if(this._status.element.style.height=`${i.itemHeight}px`,this._state===2||this._state===1)s=i.itemHeight+i.borderHeight,o=i.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new ni(o,s),this._contentWidget.setPreference(2);else{const l=t.width-i.borderHeight-2*i.horizontalPadding;o>l&&(o=l);const c=this._completionModel?this._completionModel.stats.pLabelLen*i.typicalHalfwidthCharacterWidth:o,d=i.statusBarHeight+this._list.contentHeight+i.borderHeight,u=i.itemHeight+i.statusBarHeight,h=un(this.editor.getDomNode()),f=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),m=h.top+f.top+f.height,p=Math.min(t.height-m-i.verticalPadding,d),b=h.top+f.top-i.verticalPadding,v=Math.min(b,d);let w=Math.min(Math.max(v,p)+i.borderHeight,d);s===((r=this._cappedHeight)==null?void 0:r.capped)&&(s=this._cappedHeight.wanted),s<u&&(s=u),s>w&&(s=w),s>p||this._forceRenderingAbove&&b>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),w=v):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),w=p),this.element.preferredSize=new ni(c,i.defaultSize.height),this.element.maxSize=new ni(l,w),this.element.minSize=new ni(220,u),this._cappedHeight=s===d?{wanted:((a=this._cappedHeight)==null?void 0:a.wanted)??e.height,capped:s}:void 0}this._resize(o,s)}_resize(e,t){const{width:i,height:s}=this.element.maxSize;e=Math.min(i,e),t=Math.min(s,t);const{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=`${t-o}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())==null?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(50),t=vo(this.editor.getOption(121)||e.lineHeight,8,1e3),i=!this.editor.getOption(119).showStatusBar||this._state===2||this._state===1?0:t,s=this._details.widget.borderWidth,o=2*s;return{itemHeight:t,statusBarHeight:i,borderWidth:s,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new ni(430,i+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}},q0=xm,xm.LOADING_MESSAGE=_("suggestWidget.loading","Loading..."),xm.NO_SUGGESTIONS_MESSAGE=_("suggestWidget.noSuggestions","No suggestions."),xm);Rj=q0=_Je([jD(1,ac),jD(2,qe),jD(3,Vn),jD(4,Ae)],Rj);class yJe{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:s}=this._widget.getLayoutInfo();return new ni(t+2*i+s,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var CJe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},A0=function(n,e){return function(t,i){e(t,i,n)}},Mj;class SJe{constructor(e,t){if(this._model=e,this._position=t,this._decorationOptions=rt.register({description:"suggest-line-suffix",stickiness:1}),e.getLineMaxColumn(t.lineNumber)!==t.column){const s=e.getOffsetAt(t),o=e.getPositionAt(s+1);e.changeDecorations(r=>{this._marker&&r.removeDecoration(this._marker),this._marker=r.addDecoration(D.fromPositions(t,o),this._decorationOptions)})}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations(e=>{e.removeDecoration(this._marker),this._marker=void 0})}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}var Rb;let zl=(Rb=class{static get(e){return e.getContribution(Mj.ID)}constructor(e,t,i,s,o,r,a){this._memoryService=t,this._commandService=i,this._contextKeyService=s,this._instantiationService=o,this._logService=r,this._telemetryService=a,this._lineSuffix=new es,this._toDispose=new ne,this._selectors=new xJe(u=>u.priority),this._onWillInsertSuggestItem=new $,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=e,this.model=o.createInstance(xP,this.editor),this._selectors.register({priority:0,select:(u,h,f)=>this._memoryService.select(u,h,f)});const l=ft.InsertMode.bindTo(s);l.set(e.getOption(119).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>l.set(e.getOption(119).insertMode))),this.widget=this._toDispose.add(new g3(je(e.getDomNode()),()=>{const u=this._instantiationService.createInstance(Rj,this.editor);this._toDispose.add(u),this._toDispose.add(u.onDidSelect(b=>this._insertSuggestion(b,0),this));const h=new sJe(this.editor,u,this.model,b=>this._insertSuggestion(b,2));this._toDispose.add(h);const f=ft.MakesTextEdit.bindTo(this._contextKeyService),m=ft.HasInsertAndReplaceRange.bindTo(this._contextKeyService),p=ft.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Pe(()=>{f.reset(),m.reset(),p.reset()})),this._toDispose.add(u.onDidFocus(({item:b})=>{const v=this.editor.getPosition(),w=b.editStart.column,y=v.column;let C=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!b.completion.additionalTextEdits&&!(b.completion.insertTextRules&4)&&y-w===b.completion.insertText.length&&(C=this.editor.getModel().getValueInRange({startLineNumber:v.lineNumber,startColumn:w,endLineNumber:v.lineNumber,endColumn:y})!==b.completion.insertText),f.set(C),m.set(!U.equals(b.editInsertEnd,b.editReplaceEnd)),p.set(!!b.provider.resolveCompletionItem||!!b.completion.documentation||b.completion.detail!==b.completion.label)})),this._toDispose.add(u.onDetailsKeyDown(b=>{if(b.toKeyCodeChord().equals(new pf(!0,!1,!1,!1,33))||Lt&&b.toKeyCodeChord().equals(new pf(!1,!1,!1,!0,33))){b.stopPropagation();return}b.toKeyCodeChord().isModifierKey()||this.editor.focus()})),u})),this._overtypingCapturer=this._toDispose.add(new g3(je(e.getDomNode()),()=>this._toDispose.add(new Ij(this.editor,this.model)))),this._alternatives=this._toDispose.add(new g3(je(e.getDomNode()),()=>this._toDispose.add(new i1(this.editor,this._contextKeyService)))),this._toDispose.add(o.createInstance(yP,e)),this._toDispose.add(this.model.onDidTrigger(u=>{this.widget.value.showTriggered(u.auto,u.shy?250:50),this._lineSuffix.value=new SJe(this.editor.getModel(),u.position)})),this._toDispose.add(this.model.onDidSuggest(u=>{if(u.triggerOptions.shy)return;let h=-1;for(const m of this._selectors.itemsOrderedByPriorityDesc)if(h=m.select(this.editor.getModel(),this.editor.getPosition(),u.completionModel.items),h!==-1)break;if(h===-1&&(h=0),this.model.state===0)return;let f=!1;if(u.triggerOptions.auto){const m=this.editor.getOption(119);m.selectionMode==="never"||m.selectionMode==="always"?f=m.selectionMode==="never":m.selectionMode==="whenTriggerCharacter"?f=u.triggerOptions.triggerKind!==1:m.selectionMode==="whenQuickSuggestion"&&(f=u.triggerOptions.triggerKind===1&&!u.triggerOptions.refilter)}this.widget.value.showSuggestions(u.completionModel,h,u.isFrozen,u.triggerOptions.auto,f)})),this._toDispose.add(this.model.onDidCancel(u=>{u.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));const c=ft.AcceptSuggestionsOnEnter.bindTo(s),d=()=>{const u=this.editor.getOption(1);c.set(u==="on"||u==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>d())),d()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const i=Fo.get(this.editor);if(!i)return;this._onWillInsertSuggestItem.fire({item:e.item});const s=this.editor.getModel(),o=s.getAlternativeVersionId(),{item:r}=e,a=[],l=new Gi;t&1||this.editor.pushUndoStop();const c=this.getOverwriteInfo(r,!!(t&8));this._memoryService.memorize(s,this.editor.getPosition(),r);const d=r.isResolved;let u=-1,h=-1;if(Array.isArray(r.completion.additionalTextEdits)){this.model.cancel();const m=fd.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(p=>{let b=D.lift(p.range);if(b.startLineNumber===r.position.lineNumber&&b.startColumn>r.position.column){const v=this.editor.getPosition().column-r.position.column,w=v,y=D.spansMultipleLines(b)?0:v;b=new D(b.startLineNumber,b.startColumn+w,b.endLineNumber,b.endColumn+y)}return Ki.replaceMove(b,p.text)})),m.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!d){const m=new ds;let p;const b=s.onDidChangeContent(C=>{if(C.isFlush){l.cancel(),b.dispose();return}for(const S of C.changes){const x=D.getEndPosition(S.range);(!p||U.isBefore(x,p))&&(p=x)}}),v=t;t|=2;let w=!1;const y=this.editor.onWillType(()=>{y.dispose(),w=!0,v&2||this.editor.pushUndoStop()});a.push(r.resolve(l.token).then(()=>{if(!r.completion.additionalTextEdits||l.token.isCancellationRequested)return;if(p&&r.completion.additionalTextEdits.some(S=>U.isBefore(p,D.getStartPosition(S.range))))return!1;w&&this.editor.pushUndoStop();const C=fd.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(S=>Ki.replaceMove(D.lift(S.range),S.text))),C.restoreRelativeVerticalPositionOfCursor(this.editor),(w||!(v&2))&&this.editor.pushUndoStop(),!0}).then(C=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",m.elapsed(),C),h=C===!0?1:C===!1?0:-2}).finally(()=>{b.dispose(),y.dispose()}))}let{insertText:f}=r.completion;if(r.completion.insertTextRules&4||(f=Ev.escape(f)),this.model.cancel(),i.insert(f,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command)if(r.completion.command.id===LP.id)this.model.trigger({auto:!0,retrigger:!0});else{const m=new ds;a.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(p=>{r.completion.extensionId?fn(p):et(p)}).finally(()=>{u=m.elapsed()}))}t&4&&this._alternatives.value.set(e,m=>{for(l.cancel();s.canUndo();){o!==s.getAlternativeVersionId()&&s.undo(),this._insertSuggestion(m,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(r,s,d,u,h,e.index,e.model.items),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,i,s,o,r,a){var h;if(Math.floor(Math.random()*100)===0)return;const l=new Map;for(let f=0;f<Math.min(30,a.length);f++){const m=a[f].textLabel;l.has(m)?l.get(m).push(f):l.set(m,[f])}const c=l.get(e.textLabel),u=c&&c.length>1?c[0]:-1;this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:((h=e.extensionId)==null?void 0:h.value)??"unknown",providerId:e.provider._debugDisplayName??"unknown",kind:e.completion.kind,basenameHash:v4(ml(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:_5e(t.uri),resolveInfo:e.provider.resolveCompletionItem?i?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:s,additionalEditsAsync:o,index:r,firstIndex:u})}getOverwriteInfo(e,t){zt(this.editor.hasModel());let i=this.editor.getOption(119).insertMode==="replace";t&&(i=!i);const s=e.position.column-e.editStart.column,o=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,r=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:s+r,overwriteAfter:o+a}}_alertCompletionItem(e){if(ho(e.completion.additionalTextEdits)){const t=_("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);Oo(t)}}triggerSuggest(e,t,i){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:i?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},s=o=>{if(o.completion.insertTextRules&4||o.completion.additionalTextEdits)return!0;const r=this.editor.getPosition(),a=o.editStart.column,l=r.column;return l-a!==o.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:r.lineNumber,startColumn:a,endLineNumber:r.lineNumber,endColumn:l})!==o.completion.insertText};pe.once(this.model.onDidTrigger)(o=>{const r=[];pe.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{gi(r),i()},void 0,r),this.model.onDidSuggest(({completionModel:a})=>{if(gi(r),a.items.length===0){i();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!s(c)){i();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,r)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let s=0;e&&(s|=4),t&&(s|=8),this._insertSuggestion(i,s)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}},Mj=Rb,Rb.ID="editor.contrib.suggestController",Rb);zl=Mj=CJe([A0(1,UF),A0(2,Ci),A0(3,qe),A0(4,Ae),A0(5,Os),A0(6,Zs)],zl);class xJe{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,i)=>this.prioritySelector(i)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}const tO=class tO extends Ce{constructor(){super({id:tO.id,label:_("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:se.and(R.writable,R.hasCompletionItemProvider,ft.Visible.toNegated()),kbOpts:{kbExpr:R.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,i){const s=zl.get(t);if(!s)return;let o;i&&typeof i=="object"&&i.auto===!0&&(o=!0),s.triggerSuggest(void 0,o,void 0)}};tO.id="editor.action.triggerSuggest";let LP=tO;Ot(zl.ID,zl,2);de(LP);const Pa=190,Vo=Hn.bindToContribution(zl.get);_e(new Vo({id:"acceptSelectedSuggestion",precondition:se.and(ft.Visible,ft.HasFocusedSuggestion),handler(n){n.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:se.and(ft.Visible,R.textInputFocus),weight:Pa},{primary:3,kbExpr:se.and(ft.Visible,R.textInputFocus,ft.AcceptSuggestionsOnEnter,ft.MakesTextEdit),weight:Pa}],menuOpts:[{menuId:hm,title:_("accept.insert","Insert"),group:"left",order:1,when:ft.HasInsertAndReplaceRange.toNegated()},{menuId:hm,title:_("accept.insert","Insert"),group:"left",order:1,when:se.and(ft.HasInsertAndReplaceRange,ft.InsertMode.isEqualTo("insert"))},{menuId:hm,title:_("accept.replace","Replace"),group:"left",order:1,when:se.and(ft.HasInsertAndReplaceRange,ft.InsertMode.isEqualTo("replace"))}]}));_e(new Vo({id:"acceptAlternativeSelectedSuggestion",precondition:se.and(ft.Visible,R.textInputFocus,ft.HasFocusedSuggestion),kbOpts:{weight:Pa,kbExpr:R.textInputFocus,primary:1027,secondary:[1026]},handler(n){n.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:hm,group:"left",order:2,when:se.and(ft.HasInsertAndReplaceRange,ft.InsertMode.isEqualTo("insert")),title:_("accept.replace","Replace")},{menuId:hm,group:"left",order:2,when:se.and(ft.HasInsertAndReplaceRange,ft.InsertMode.isEqualTo("replace")),title:_("accept.insert","Insert")}]}));Mt.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");_e(new Vo({id:"hideSuggestWidget",precondition:ft.Visible,handler:n=>n.cancelSuggestWidget(),kbOpts:{weight:Pa,kbExpr:R.textInputFocus,primary:9,secondary:[1033]}}));_e(new Vo({id:"selectNextSuggestion",precondition:se.and(ft.Visible,se.or(ft.MultipleSuggestions,ft.HasFocusedSuggestion.negate())),handler:n=>n.selectNextSuggestion(),kbOpts:{weight:Pa,kbExpr:R.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));_e(new Vo({id:"selectNextPageSuggestion",precondition:se.and(ft.Visible,se.or(ft.MultipleSuggestions,ft.HasFocusedSuggestion.negate())),handler:n=>n.selectNextPageSuggestion(),kbOpts:{weight:Pa,kbExpr:R.textInputFocus,primary:12,secondary:[2060]}}));_e(new Vo({id:"selectLastSuggestion",precondition:se.and(ft.Visible,se.or(ft.MultipleSuggestions,ft.HasFocusedSuggestion.negate())),handler:n=>n.selectLastSuggestion()}));_e(new Vo({id:"selectPrevSuggestion",precondition:se.and(ft.Visible,se.or(ft.MultipleSuggestions,ft.HasFocusedSuggestion.negate())),handler:n=>n.selectPrevSuggestion(),kbOpts:{weight:Pa,kbExpr:R.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));_e(new Vo({id:"selectPrevPageSuggestion",precondition:se.and(ft.Visible,se.or(ft.MultipleSuggestions,ft.HasFocusedSuggestion.negate())),handler:n=>n.selectPrevPageSuggestion(),kbOpts:{weight:Pa,kbExpr:R.textInputFocus,primary:11,secondary:[2059]}}));_e(new Vo({id:"selectFirstSuggestion",precondition:se.and(ft.Visible,se.or(ft.MultipleSuggestions,ft.HasFocusedSuggestion.negate())),handler:n=>n.selectFirstSuggestion()}));_e(new Vo({id:"focusSuggestion",precondition:se.and(ft.Visible,ft.HasFocusedSuggestion.negate()),handler:n=>n.focusSuggestion(),kbOpts:{weight:Pa,kbExpr:R.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}}));_e(new Vo({id:"focusAndAcceptSuggestion",precondition:se.and(ft.Visible,ft.HasFocusedSuggestion.negate()),handler:n=>{n.focusSuggestion(),n.acceptSelectedSuggestion(!0,!1)}}));_e(new Vo({id:"toggleSuggestionDetails",precondition:se.and(ft.Visible,ft.HasFocusedSuggestion),handler:n=>n.toggleSuggestionDetails(),kbOpts:{weight:Pa,kbExpr:R.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:hm,group:"right",order:1,when:se.and(ft.DetailsVisible,ft.CanResolve),title:_("detail.more","Show Less")},{menuId:hm,group:"right",order:1,when:se.and(ft.DetailsVisible.toNegated(),ft.CanResolve),title:_("detail.less","Show More")}]}));_e(new Vo({id:"toggleExplainMode",precondition:ft.Visible,handler:n=>n.toggleExplainMode(),kbOpts:{weight:100,primary:2138}}));_e(new Vo({id:"toggleSuggestionFocus",precondition:ft.Visible,handler:n=>n.toggleSuggestionFocus(),kbOpts:{weight:Pa,kbExpr:R.textInputFocus,primary:2570,mac:{primary:778}}}));_e(new Vo({id:"insertBestCompletion",precondition:se.and(R.textInputFocus,se.equals("config.editor.tabCompletion","on"),yP.AtEnd,ft.Visible.toNegated(),i1.OtherSuggestions.toNegated(),Fo.InSnippetMode.toNegated()),handler:(n,e)=>{n.triggerSuggestAndAcceptBest(as(e)?{fallback:"tab",...e}:{fallback:"tab"})},kbOpts:{weight:Pa,primary:2}}));_e(new Vo({id:"insertNextSuggestion",precondition:se.and(R.textInputFocus,se.equals("config.editor.tabCompletion","on"),i1.OtherSuggestions,ft.Visible.toNegated(),Fo.InSnippetMode.toNegated()),handler:n=>n.acceptNextSuggestion(),kbOpts:{weight:Pa,kbExpr:R.textInputFocus,primary:2}}));_e(new Vo({id:"insertPrevSuggestion",precondition:se.and(R.textInputFocus,se.equals("config.editor.tabCompletion","on"),i1.OtherSuggestions,ft.Visible.toNegated(),Fo.InSnippetMode.toNegated()),handler:n=>n.acceptPrevSuggestion(),kbOpts:{weight:Pa,kbExpr:R.textInputFocus,primary:1026}}));de(class extends Ce{constructor(){super({id:"editor.action.resetSuggestSize",label:_("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(n,e){var t;(t=zl.get(e))==null||t.resetWidgetSize()}});class LJe extends G{get selectedItem(){return this._currentSuggestItemInfo}constructor(e,t,i){super(),this.editor=e,this.suggestControllerPreselector=t,this.onWillAccept=i,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._onDidSelectedItemChange=this._register(new $),this.onDidSelectedItemChange=this._onDidSelectedItemChange.event,this._register(e.onKeyDown(o=>{o.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(o=>{o.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const s=zl.get(this.editor);if(s){this._register(s.registerSelector({priority:100,select:(a,l,c)=>{const d=this.editor.getModel();if(!d)return-1;const u=this.suggestControllerPreselector(),h=u?eb(u,d):void 0;if(!h)return-1;const f=U.lift(l),m=c.map((b,v)=>{const w=dL.fromSuggestion(s,d,f,b,this.isShiftKeyPressed),y=eb(w.toSingleTextEdit(),d),C=ive(h,y);return{index:v,valid:C,prefixLength:y.text.length,suggestItem:b}}).filter(b=>b&&b.valid&&b.prefixLength>0),p=HK(m,Io(b=>b.prefixLength,Kl));return p?p.index:-1}}));let o=!1;const r=()=>{o||(o=!0,this._register(s.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(s.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(s.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(pe.once(s.model.onDidTrigger)(a=>{r()})),this._register(s.onWillInsertSuggestItem(a=>{const l=this.editor.getPosition(),c=this.editor.getModel();if(!l||!c)return;const d=dL.fromSuggestion(s,c,l,a.item,this.isShiftKeyPressed);this.onWillAccept(d)}))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();(this._isActive!==e||!kJe(this._currentSuggestItemInfo,t))&&(this._isActive=e,this._currentSuggestItemInfo=t,this._onDidSelectedItemChange.fire())}getSuggestItemInfo(){const e=zl.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem(),i=this.editor.getPosition(),s=this.editor.getModel();if(!(!t||!i||!s))return dL.fromSuggestion(e,s,i,t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=zl.get(this.editor);e==null||e.stopForceRenderingAbove()}forceRenderingAbove(){const e=zl.get(this.editor);e==null||e.forceRenderingAbove()}}class dL{static fromSuggestion(e,t,i,s,o){let{insertText:r}=s.completion,a=!1;if(s.completion.insertTextRules&4){const c=new Ev().parse(r);c.children.length<100&&wP.adjustWhitespace(t,i,!0,c),r=c.toString(),a=!0}const l=e.getOverwriteInfo(s,o);return new dL(D.fromPositions(i.delta(0,-l.overwriteBefore),i.delta(0,Math.max(l.overwriteAfter,0))),r,s.completion.kind,a)}constructor(e,t,i,s){this.range=e,this.insertText=t,this.completionItemKind=i,this.isSnippetText=s}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new jue(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new Iu(this.range,this.insertText)}}function kJe(n,e){return n===e?!0:!n||!e?!1:n.equals(e)}var NJe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},eh=function(n,e){return function(t,i){e(t,i,n)}},Pj,Mb;let _l=(Mb=class extends G{static get(e){return e.getContribution(Pj.ID)}constructor(e,t,i,s,o,r,a,l,c,d){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._configurationService=s,this._commandService=o,this._debounceService=r,this._languageFeaturesService=a,this._accessibilitySignalService=l,this._keybindingService=c,this._accessibilityService=d,this._editorObs=Rr(this.editor),this._positions=Te(this,h=>{var f;return((f=this._editorObs.selections.read(h))==null?void 0:f.map(m=>m.getEndPosition()))??[new U(1,1)]}),this._suggestWidgetAdaptor=this._register(new LJe(this.editor,()=>{var h,f;return this._editorObs.forceUpdate(),(f=(h=this.model.get())==null?void 0:h.selectedInlineCompletion.get())==null?void 0:f.toSingleTextEdit(void 0)},h=>this._editorObs.forceUpdate(f=>{var m;(m=this.model.get())==null||m.handleSuggestAccepted(h)}))),this._suggestWidgetSelectedItem=ii(this,h=>this._suggestWidgetAdaptor.onDidSelectedItemChange(()=>{this._editorObs.forceUpdate(f=>h(void 0))}),()=>this._suggestWidgetAdaptor.selectedItem),this._enabledInConfig=ii(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).enabled),this._isScreenReaderEnabled=ii(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this._editorDictationInProgress=ii(this,this._contextKeyService.onDidChangeContext,()=>this._contextKeyService.getContext(this.editor.getDomNode()).getValue("editorDictation.inProgress")===!0),this._enabled=Te(this,h=>this._enabledInConfig.read(h)&&(!this._isScreenReaderEnabled.read(h)||!this._editorDictationInProgress.read(h))),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this.model=oo(this,h=>{if(this._editorObs.isReadonly.read(h))return;const f=this._editorObs.model.read(h);return f?this._instantiationService.createInstance(xj,f,this._suggestWidgetSelectedItem,this._editorObs.versionId,this._positions,this._debounceValue,ii(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).preview),ii(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).previewMode),ii(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).mode),this._enabled):void 0}).recomputeInitiallyAndOnChange(this._store),this._ghostTexts=Te(this,h=>{const f=this.model.read(h);return(f==null?void 0:f.ghostTexts.read(h))??[]}),this._stablizedGhostTexts=IJe(this._ghostTexts,this._store),this._ghostTextWidgets=uBe(this,this._stablizedGhostTexts,(h,f)=>f.add(this._instantiationService.createInstance(Cj,this.editor,{ghostText:h,minReservedLineCount:nl(0),targetTextModel:this.model.map(m=>m==null?void 0:m.textModel)}))).recomputeInitiallyAndOnChange(this._store),this._playAccessibilitySignal=P1(this),this._fontFamily=ii(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).fontFamily),this._register(new Hr(this._contextKeyService,this.model)),this._register(lV(this._editorObs.onDidType,(h,f)=>{var m;this._enabled.get()&&((m=this.model.get())==null||m.trigger())})),this._register(this._commandService.onDidExecuteCommand(h=>{new Set([Ey.Tab.id,Ey.DeleteLeft.id,Ey.DeleteRight.id,ube,"acceptSelectedSuggestion"]).has(h.commandId)&&e.hasTextFocus()&&this._enabled.get()&&this._editorObs.forceUpdate(m=>{var p;(p=this.model.get())==null||p.trigger(m)})})),this._register(lV(this._editorObs.selections,(h,f)=>{var m;f.some(p=>p.reason===3||p.source==="api")&&((m=this.model.get())==null||m.stop())})),this._register(this.editor.onDidBlurEditorWidget(()=>{this._contextKeyService.getContextKeyValue("accessibleViewIsShown")||this._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||YC.dropDownVisible||qi(h=>{var f;(f=this.model.get())==null||f.stop(h)})})),this._register(Je(h=>{var m;const f=(m=this.model.read(h))==null?void 0:m.state.read(h);f!=null&&f.suggestItem?f.primaryGhostText.lineCount>=2&&this._suggestWidgetAdaptor.forceRenderingAbove():this._suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register(Pe(()=>{this._suggestWidgetAdaptor.stopForceRenderingAbove()}));const u=FI(this,(h,f)=>{var b;const m=this.model.read(h),p=m==null?void 0:m.state.read(h);return this._suggestWidgetSelectedItem.get()?f:(b=p==null?void 0:p.inlineCompletion)==null?void 0:b.semanticId});this._register(OUe(Te(h=>(this._playAccessibilitySignal.read(h),u.read(h),{})),async(h,f,m)=>{const p=this.model.get(),b=p==null?void 0:p.state.get();if(!b||!p)return;const v=p.textModel.getLineContent(b.primaryGhostText.lineNumber);await _f(50,V9(m)),await bge(this._suggestWidgetSelectedItem,co,()=>!1,V9(m)),await this._accessibilitySignalService.playSignal(ha.inlineSuggestion),this.editor.getOption(8)&&this._provideScreenReaderUpdate(b.primaryGhostText.renderForScreenReader(v))})),this._register(new VV(this.editor,this.model,this._instantiationService)),this._register(bQe(Te(h=>{const f=this._fontFamily.read(h);return f===""||f==="default"?"":`
.monaco-editor .ghost-text-decoration,
.monaco-editor .ghost-text-decoration-preview,
.monaco-editor .ghost-text {
	font-family: ${f};
}`}))),this._register(this._configurationService.onDidChangeConfiguration(h=>{h.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}playAccessibilitySignal(e){this._playAccessibilitySignal.trigger(e)}_provideScreenReaderUpdate(e){const t=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),i=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let s;!t&&i&&this.editor.getOption(150)&&(s=_("showAccessibleViewHint","Inspect this in the accessible view ({0})",i.getAriaLabel())),Oo(s?e+", "+s:e)}shouldShowHoverAt(e){var i;const t=(i=this.model.get())==null?void 0:i.primaryGhostText.get();return t?t.parts.some(s=>e.containsPosition(new U(t.lineNumber,s.column))):!1}shouldShowHoverAtViewZone(e){var t;return((t=this._ghostTextWidgets.get()[0])==null?void 0:t.ownsViewZone(e))??!1}},Pj=Mb,Mb.ID="editor.contrib.inlineCompletionsController",Mb);_l=Pj=NJe([eh(1,Ae),eh(2,qe),eh(3,_t),eh(4,Ci),eh(5,Fa),eh(6,xe),eh(7,pp),eh(8,ei),eh(9,Yr)],_l);function IJe(n,e){const t=pt("result",[]),i=[];return e.add(Je(s=>{const o=n.read(s);qi(r=>{if(o.length!==i.length){i.length=o.length;for(let a=0;a<i.length;a++)i[a]||(i[a]=pt("item",o[a]));t.set([...i],r)}i.forEach((a,l)=>a.set(o[l],r))})})),t}const iO=class iO extends Ce{constructor(){super({id:iO.ID,label:_("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:se.and(R.writable,Hr.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(e,t){var s;const i=_l.get(t);(s=i==null?void 0:i.model.get())==null||s.next()}};iO.ID=fbe;let Aj=iO;const nO=class nO extends Ce{constructor(){super({id:nO.ID,label:_("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:se.and(R.writable,Hr.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(e,t){var s;const i=_l.get(t);(s=i==null?void 0:i.model.get())==null||s.previous()}};nO.ID=hbe;let Oj=nO;class EJe extends Ce{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:_("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:R.writable})}async run(e,t){const i=_l.get(t);await mge(async s=>{var o;await((o=i==null?void 0:i.model.get())==null?void 0:o.triggerExplicitly(s)),i==null||i.playAccessibilitySignal(s)})}}class DJe extends Ce{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:_("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:se.and(R.writable,Hr.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:se.and(R.writable,Hr.inlineSuggestionVisible)},menuOpts:[{menuId:Ne.InlineSuggestionToolbar,title:_("acceptWord","Accept Word"),group:"primary",order:2}]})}async run(e,t){var s;const i=_l.get(t);await((s=i==null?void 0:i.model.get())==null?void 0:s.acceptNextWord(i.editor))}}class TJe extends Ce{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:_("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:se.and(R.writable,Hr.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:Ne.InlineSuggestionToolbar,title:_("acceptLine","Accept Line"),group:"secondary",order:2}]})}async run(e,t){var s;const i=_l.get(t);await((s=i==null?void 0:i.model.get())==null?void 0:s.acceptNextLine(i.editor))}}class RJe extends Ce{constructor(){super({id:ube,label:_("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:Hr.inlineSuggestionVisible,menuOpts:[{menuId:Ne.InlineSuggestionToolbar,title:_("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:se.and(Hr.inlineSuggestionVisible,R.tabMovesFocus.toNegated(),Hr.inlineSuggestionHasIndentationLessThanTabSize,ft.Visible.toNegated(),R.hoverFocused.toNegated())}})}async run(e,t){var s;const i=_l.get(t);i&&((s=i.model.get())==null||s.accept(i.editor),i.editor.focus())}}const sO=class sO extends Ce{constructor(){super({id:sO.ID,label:_("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:Hr.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}async run(e,t){const i=_l.get(t);qi(s=>{var o;(o=i==null?void 0:i.model.get())==null||o.stop(s)})}};sO.ID="editor.action.inlineSuggest.hide";let Fj=sO;const oO=class oO extends Bo{constructor(){super({id:oO.ID,title:_("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:Ne.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:se.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(e,t){const i=e.get(_t),o=i.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";i.updateValue("editor.inlineSuggest.showToolbar",o)}};oO.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";let Bj=oO;var MJe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},FS=function(n,e){return function(t,i){e(t,i,n)}};class PJe{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let Wj=class{constructor(e,t,i,s,o,r){this._editor=e,this._languageService=t,this._openerService=i,this.accessibilityService=s,this._instantiationService=o,this._telemetryService=r,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=_l.get(this._editor);if(!t)return null;const i=e.target;if(i.type===8){const s=i.detail;if(t.shouldShowHoverAtViewZone(s.viewZoneId))return new KT(1e3,this,D.fromPositions(this._editor.getModel().validatePosition(s.positionBefore||s.position)),e.event.posx,e.event.posy,!1)}return i.type===7&&t.shouldShowHoverAt(i.range)?new KT(1e3,this,i.range,e.event.posx,e.event.posy,!1):i.type===6&&i.detail.mightBeForeignElement&&t.shouldShowHoverAt(i.range)?new KT(1e3,this,i.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(62).showToolbar!=="onHover")return[];const i=_l.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new PJe(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new ne,s=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&i.add(this.renderScreenReaderText(e,s));const o=s.controller.model.get(),r=this._instantiationService.createInstance(YC,this._editor,!1,nl(null),o.selectedInlineCompletionIndex,o.inlineCompletionsCount,o.activeCommands),a=r.getDomNode();e.fragment.appendChild(a),o.triggerExplicitly(),i.add(r);const l={hoverPart:s,hoverElement:a,dispose(){i.dispose()}};return new Mv([l])}renderScreenReaderText(e,t){const i=new ne,s=ge,o=s("div.hover-row.markdown-hover"),r=ae(o,s("div.hover-contents",{"aria-live":"assertive"})),a=i.add(new wf({editor:this._editor},this._languageService,this._openerService)),l=c=>{i.add(a.onDidRenderAsync(()=>{r.className="hover-contents code-hover-contents",e.onContentsChanged()}));const d=_("inlineSuggestionFollows","Suggestion:"),u=i.add(a.render(new Us().appendText(d).appendCodeblock("text",c)));r.replaceChildren(u.element)};return i.add(Je(c=>{var u;const d=(u=t.controller.model.read(c))==null?void 0:u.primaryGhostText.read(c);if(d){const h=this._editor.getModel().getLineContent(d.lineNumber);l(d.renderForScreenReader(h))}else ys(r)})),e.fragment.appendChild(o),i}};Wj=MJe([FS(1,ji),FS(2,hr),FS(3,Yr),FS(4,Ae),FS(5,Zs)],Wj);class AJe{}const $F=new class{constructor(){this._implementations=[]}register(e){return this._implementations.push(e),{dispose:()=>{const t=this._implementations.indexOf(e);t!==-1&&this._implementations.splice(t,1)}}}getImplementations(){return this._implementations}};Ot(_l.ID,_l,3);de(EJe);de(Aj);de(Oj);de(DJe);de(TJe);de(RJe);de(Fj);vi(Bj);r0.register(Wj);$F.register(new AJe);var OJe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},QB=function(n,e){return function(t,i){e(t,i,n)}},dx,Lm;let BN=(Lm=class{constructor(e,t,i,s){this.textModelResolverService=t,this.languageService=i,this.languageFeaturesService=s,this.toUnhook=new ne,this.toUnhookForKeyboard=new ne,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const o=new FF(e);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown(([r,a])=>{this.startFindDefinitionFromMouse(r,a??void 0)})),this.toUnhook.add(o.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).catch(a=>{et(a)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(o.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(dx.ID)}async startFindDefinitionFromCursor(e){await this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const i=e.target.position;this.startFindDefinition(i)}async startFindDefinition(e){var r;this.toUnhookForKeyboard.clear();const t=e?(r=this.editor.getModel())==null?void 0:r.getWordAtPosition(e):null;if(!t){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===t.startColumn&&this.currentWordAtPosition.endColumn===t.endColumn&&this.currentWordAtPosition.word===t.word)return;this.currentWordAtPosition=t;const i=new jpe(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Xn(a=>this.findDefinition(e,a));let s;try{s=await this.previousPromise}catch(a){et(a);return}if(!s||!s.length||!i.validate(this.editor)){this.removeLinkDecorations();return}const o=s[0].originSelectionRange?D.lift(s[0].originSelectionRange):new D(e.lineNumber,t.startColumn,e.lineNumber,t.endColumn);if(s.length>1){let a=o;for(const{originSelectionRange:l}of s)l&&(a=D.plusRange(a,l));this.addDecoration(a,new Us().appendText(_("multipleResults","Click to show {0} definitions.",s.length)))}else{const a=s[0];if(!a.uri)return;this.textModelResolverService.createModelReference(a.uri).then(l=>{if(!l.object||!l.object.textEditorModel){l.dispose();return}const{object:{textEditorModel:c}}=l,{startLineNumber:d}=a.range;if(d<1||d>c.getLineCount()){l.dispose();return}const u=this.getPreviewValue(c,d,a),h=this.languageService.guessLanguageIdByFilepathOrFirstLine(c.uri);this.addDecoration(o,u?new Us().appendCodeblock(h||"",u):void 0),l.dispose()})}}getPreviewValue(e,t,i){let s=i.range;return s.endLineNumber-s.startLineNumber>=dx.MAX_SOURCE_PREVIEW_LINES&&(s=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,s)}stripIndentationFromPreviewRange(e,t,i){let o=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<i.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);o=Math.min(o,l)}return e.getValueInRange(i).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const i=e.getLineFirstNonWhitespaceColumn(t),s=Math.min(e.getLineCount(),t+dx.MAX_SOURCE_PREVIEW_LINES);let o=t+1;for(;o<s;o++){const r=e.getLineFirstNonWhitespaceColumn(o);if(i===r)break}return new D(t,1,o+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([i])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var i;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&e.target.type===6&&!(((i=e.target.detail.injectedText)==null?void 0:i.options)instanceof Jm)&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?eE(this.languageFeaturesService.definitionProvider,i,e,!1,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(i=>{const s=!t&&this.editor.getOption(89)&&!this.isInPeekEditor(i);return new iE({openToSide:t,openInPeek:s,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(i)})}isInPeekEditor(e){const t=e.get(qe);return lr.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}},dx=Lm,Lm.ID="editor.contrib.gotodefinitionatposition",Lm.MAX_SOURCE_PREVIEW_LINES=8,Lm);BN=dx=OJe([QB(1,dr),QB(2,ji),QB(3,xe)],BN);Ot(BN.ID,BN,2);var sve=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},kP=function(n,e){return function(t,i){e(t,i,n)}};class gse{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let Hj=class{constructor(e,t,i){this._markerService=t,this._configService=i,this._onDidChange=new $,this.onDidChange=this._onDidChange.event,this._dispoables=new ne,this._markers=[],this._nextIdx=-1,Be.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const s=this._configService.getValue("problems.sortOrder"),o=(a,l)=>{let c=Nk(a.resource.toString(),l.resource.toString());return c===0&&(s==="position"?c=D.compareRangesUsingStarts(a,l)||on.compare(a.severity,l.severity):c=on.compare(a.severity,l.severity)||D.compareRangesUsingStarts(a,l)),c},r=()=>{this._markers=this._markerService.read({resource:Be.isUri(e)?e:void 0,severities:on.Error|on.Warning|on.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(o)};r(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(r(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new gse(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let s=!1,o=this._markers.findIndex(r=>r.resource.toString()===e.uri.toString());o<0&&(o=bk(this._markers,{resource:e.uri},(r,a)=>Nk(r.resource.toString(),a.resource.toString())),o<0&&(o=~o));for(let r=o;r<this._markers.length;r++){let a=D.lift(this._markers[r]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new D(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=r,s=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}s||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(this._markers.length===0)return!1;const s=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),s!==this._nextIdx}find(e,t){let i=this._markers.findIndex(s=>s.resource.toString()===e.toString());if(!(i<0)){for(;i<this._markers.length;i++)if(D.containsPosition(this._markers[i],t))return new gse(this._markers[i],i+1,this._markers.length)}}};Hj=sve([kP(1,zu),kP(2,_t)],Hj);const ove=kt("IMarkerNavigationService");let Vj=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new So}getMarkerList(e){for(const t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new Hj(e,this._markerService,this._configService)}};Vj=sve([kP(0,zu),kP(1,_t)],Vj);Tt(ove,Vj,1);var jj;(function(n){function e(t){switch(t){case vn.Ignore:return"severity-ignore "+Ke.asClassName(he.info);case vn.Info:return Ke.asClassName(he.info);case vn.Warning:return Ke.asClassName(he.warning);case vn.Error:return Ke.asClassName(he.error);default:return""}}n.className=e})(jj||(jj={}));var FJe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},O0=function(n,e){return function(t,i){e(t,i,n)}},zj;class BJe{constructor(e,t,i,s,o){this._openerService=s,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new ne,this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(Ji(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&i(l)})),this._scrollable=new Vfe(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{r.style.left=`-${a.scrollLeft}px`,r.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){gi(this._disposables)}update(e){const{source:t,message:i,relatedInformation:s,code:o}=e;let r=((t==null?void 0:t.length)||0)+2;o&&(typeof o=="string"?r+=o.length:r+=o.value.length);const a=Bu(i);this._lines=a.length,this._longestLineLength=0;for(const h of a)this._longestLineLength=Math.max(h.length+r,this._longestLineLength);ws(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const h of a)l=document.createElement("div"),l.innerText=h,h===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||o){const h=document.createElement("span");if(h.classList.add("details"),l.appendChild(h),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),h.appendChild(f)}if(o)if(typeof o=="string"){const f=document.createElement("span");f.innerText=`(${o})`,f.classList.add("code"),h.appendChild(f)}else{this._codeLink=ge("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=m=>{this._openerService.open(o.target,{allowCommands:!0}),m.preventDefault(),m.stopPropagation()};const f=ae(this._codeLink,ge("span"));f.innerText=o.value,h.appendChild(this._codeLink)}}if(ws(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),ho(s)){const h=this._relatedBlock.appendChild(document.createElement("div"));h.style.paddingTop=`${Math.floor(this._editor.getOption(67)*.66)}px`,this._lines+=1;for(const f of s){const m=document.createElement("div"),p=document.createElement("a");p.classList.add("filename"),p.innerText=`${this._labelService.getUriBasenameLabel(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,p.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(p,f);const b=document.createElement("span");b.innerText=f.message,m.appendChild(p),m.appendChild(b),this._lines+=1,h.appendChild(m)}}const c=this._editor.getOption(50),d=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),u=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:u})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case on.Error:t=_("Error","Error");break;case on.Warning:t=_("Warning","Warning");break;case on.Info:t=_("Info","Info");break;case on.Hint:t=_("Hint","Hint");break}let i=_("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const s=this._editor.getModel();return s&&e.startLineNumber<=s.getLineCount()&&e.startLineNumber>=1&&(i=`${s.getLineContent(e.startLineNumber)}, ${i}`),i}}var Pb;let WN=(Pb=class extends nP{constructor(e,t,i,s,o,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o),this._themeService=t,this._openerService=i,this._menuService=s,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new ne,this._onDidSelectRelatedInformation=new $,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=on.Warning,this._backgroundColor=oe.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(jJe);let t=Uj,i=WJe;this._severity===on.Warning?(t=YT,i=HJe):this._severity===on.Info&&(t=$j,i=VJe);const s=e.getColor(t),o=e.getColor(i);this.style({arrowColor:s,frameColor:s,headerBackgroundColor:o,primaryHeadingColor:e.getColor(Sbe),secondaryHeadingColor:e.getColor(xbe)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(s=>this.editor.focus()));const t=[],i=this._menuService.getMenuActions(zj.TitleMenu,this._contextKeyService);rF(i,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0})}_fillTitleIcon(e){this._icon=ae(e,ge(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new BJe(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const s=D.lift(e),o=this.editor.getPosition(),r=o&&s.containsPosition(o)?o:s.getStartPosition();super.show(r,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=i>1?_("problems","{0} of {1} problems",t,i):_("change","{0} of {1} problem",t,i);this.setTitle(ml(a.uri),l)}this._icon.className=`codicon ${jj.className(on.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}},zj=Pb,Pb.TitleMenu=new Ne("gotoErrorTitleMenu"),Pb);WN=zj=FJe([O0(1,Vn),O0(2,hr),O0(3,Oa),O0(4,Ae),O0(5,qe),O0(6,PC)],WN);const mse=Bk(j4,$Oe),pse=Bk(vf,Wk),_se=Bk(Du,Hk),Uj=P("editorMarkerNavigationError.background",{dark:mse,light:mse,hcDark:At,hcLight:At},_("editorMarkerNavigationError","Editor marker navigation widget error color.")),WJe=P("editorMarkerNavigationError.headerBackground",{dark:gt(Uj,.1),light:gt(Uj,.1),hcDark:null,hcLight:null},_("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),YT=P("editorMarkerNavigationWarning.background",{dark:pse,light:pse,hcDark:At,hcLight:At},_("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),HJe=P("editorMarkerNavigationWarning.headerBackground",{dark:gt(YT,.1),light:gt(YT,.1),hcDark:"#0C141F",hcLight:gt(YT,.2)},_("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),$j=P("editorMarkerNavigationInfo.background",{dark:_se,light:_se,hcDark:At,hcLight:At},_("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),VJe=P("editorMarkerNavigationInfo.headerBackground",{dark:gt($j,.1),light:gt($j,.1),hcDark:null,hcLight:null},_("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),jJe=P("editorMarkerNavigation.background",tc,_("editorMarkerNavigationBackground","Editor marker navigation widget background."));var zJe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},zD=function(n,e){return function(t,i){e(t,i,n)}},ux,Ab;let Ov=(Ab=class{static get(e){return e.getContribution(ux.ID)}constructor(e,t,i,s,o){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=s,this._instantiationService=o,this._sessionDispoables=new ne,this._editor=e,this._widgetVisible=rve.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(WN,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(i=>{var s,o,r;(!((s=this._model)!=null&&s.selected)||!D.containsPosition((o=this._model)==null?void 0:o.selected.marker,i.position))&&((r=this._model)==null||r.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const i=this._model.find(this._editor.getModel().uri,this._widget.position);i?this._widget.updateMarker(i.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(i=>{this._editorService.openCodeEditor({resource:i.resource,options:{pinned:!0,revealIfOpened:!0,selection:D.lift(i).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new U(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}async nagivate(e,t){var i,s;if(this._editor.hasModel()){const o=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(o.move(e,this._editor.getModel(),this._editor.getPosition()),!o.selected)return;if(o.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=await this._editorService.openCodeEditor({resource:o.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:o.selected.marker}},this._editor);r&&((i=ux.get(r))==null||i.close(),(s=ux.get(r))==null||s.nagivate(e,t))}else this._widget.showAtMarker(o.selected.marker,o.selected.index,o.selected.total)}}},ux=Ab,Ab.ID="editor.contrib.markerController",Ab);Ov=ux=zJe([zD(1,ove),zD(2,qe),zD(3,Ut),zD(4,Ae)],Ov);class KF extends Ce{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}async run(e,t){var i;t.hasModel()&&((i=Ov.get(t))==null||i.nagivate(this._next,this._multiFile))}}const __=class __ extends KF{constructor(){super(!0,!1,{id:__.ID,label:__.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:R.focus,primary:578,weight:100},menuOpts:{menuId:WN.TitleMenu,title:__.LABEL,icon:Di("marker-navigation-next",he.arrowDown,_("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}};__.ID="editor.action.marker.next",__.LABEL=_("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");let NP=__;const b_=class b_ extends KF{constructor(){super(!1,!1,{id:b_.ID,label:b_.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:R.focus,primary:1602,weight:100},menuOpts:{menuId:WN.TitleMenu,title:b_.LABEL,icon:Di("marker-navigation-previous",he.arrowUp,_("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}};b_.ID="editor.action.marker.prev",b_.LABEL=_("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");let Kj=b_;class UJe extends KF{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:_("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:R.focus,primary:66,weight:100},menuOpts:{menuId:Ne.MenubarGoMenu,title:_({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class $Je extends KF{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:_("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:R.focus,primary:1090,weight:100},menuOpts:{menuId:Ne.MenubarGoMenu,title:_({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}Ot(Ov.ID,Ov,4);de(NP);de(Kj);de(UJe);de($Je);const rve=new we("markersNavigationVisible",!1),KJe=Hn.bindToContribution(Ov.get);_e(new KJe({id:"closeMarkersNavigation",precondition:rve,handler:n=>n.close(),kbOpts:{weight:150,kbExpr:R.focus,primary:9,secondary:[1033]}}));var yc;(function(n){n.NoAutoFocus="noAutoFocus",n.FocusIfVisible="focusIfVisible",n.AutoFocusImmediately="autoFocusImmediately"})(yc||(yc={}));class qJe extends Ce{constructor(){super({id:dbe,label:_({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse."]},"Show or Focus Hover"),metadata:{description:Ze("showOrFocusHoverDescription","Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position."),args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[yc.NoAutoFocus,yc.FocusIfVisible,yc.AutoFocusImmediately],enumDescriptions:[_("showOrFocusHover.focus.noAutoFocus","The hover will not automatically take focus."),_("showOrFocusHover.focus.focusIfVisible","The hover will take focus only if it is already visible."),_("showOrFocusHover.focus.autoFocusImmediately","The hover will automatically take focus when it appears.")],default:yc.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2087),weight:100}})}run(e,t,i){if(!t.hasModel())return;const s=go.get(t);if(!s)return;const o=i==null?void 0:i.focus;let r=yc.FocusIfVisible;Object.values(yc).includes(o)?r=o:typeof o=="boolean"&&o&&(r=yc.AutoFocusImmediately);const a=c=>{const d=t.getPosition(),u=new D(d.lineNumber,d.column,d.lineNumber,d.column);s.showContentHover(u,1,1,c)},l=t.getOption(2)===2;s.isHoverVisible?r!==yc.NoAutoFocus?s.focus():a(l):a(l||r===yc.AutoFocusImmediately)}}class GJe extends Ce{constructor(){super({id:dZe,label:_({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0,metadata:{description:Ze("showDefinitionPreviewHoverDescription","Show the definition preview hover in the editor.")}})}run(e,t){const i=go.get(t);if(!i)return;const s=t.getPosition();if(!s)return;const o=new D(s.lineNumber,s.column,s.lineNumber,s.column),r=BN.get(t);if(!r)return;r.startFindDefinitionFromCursor(s).then(()=>{i.showContentHover(o,1,1,!0)})}}class ZJe extends Ce{constructor(){super({id:uZe,label:_({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:R.hoverFocused,kbOpts:{kbExpr:R.hoverFocused,primary:16,weight:100},metadata:{description:Ze("scrollUpHoverDescription","Scroll up the editor hover.")}})}run(e,t){const i=go.get(t);i&&i.scrollUp()}}class YJe extends Ce{constructor(){super({id:hZe,label:_({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:R.hoverFocused,kbOpts:{kbExpr:R.hoverFocused,primary:18,weight:100},metadata:{description:Ze("scrollDownHoverDescription","Scroll down the editor hover.")}})}run(e,t){const i=go.get(t);i&&i.scrollDown()}}class XJe extends Ce{constructor(){super({id:fZe,label:_({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:R.hoverFocused,kbOpts:{kbExpr:R.hoverFocused,primary:15,weight:100},metadata:{description:Ze("scrollLeftHoverDescription","Scroll left the editor hover.")}})}run(e,t){const i=go.get(t);i&&i.scrollLeft()}}class QJe extends Ce{constructor(){super({id:gZe,label:_({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:R.hoverFocused,kbOpts:{kbExpr:R.hoverFocused,primary:17,weight:100},metadata:{description:Ze("scrollRightHoverDescription","Scroll right the editor hover.")}})}run(e,t){const i=go.get(t);i&&i.scrollRight()}}class JJe extends Ce{constructor(){super({id:mZe,label:_({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:R.hoverFocused,kbOpts:{kbExpr:R.hoverFocused,primary:11,secondary:[528],weight:100},metadata:{description:Ze("pageUpHoverDescription","Page up the editor hover.")}})}run(e,t){const i=go.get(t);i&&i.pageUp()}}class eet extends Ce{constructor(){super({id:pZe,label:_({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:R.hoverFocused,kbOpts:{kbExpr:R.hoverFocused,primary:12,secondary:[530],weight:100},metadata:{description:Ze("pageDownHoverDescription","Page down the editor hover.")}})}run(e,t){const i=go.get(t);i&&i.pageDown()}}class tet extends Ce{constructor(){super({id:_Ze,label:_({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:R.hoverFocused,kbOpts:{kbExpr:R.hoverFocused,primary:14,secondary:[2064],weight:100},metadata:{description:Ze("goToTopHoverDescription","Go to the top of the editor hover.")}})}run(e,t){const i=go.get(t);i&&i.goToTop()}}class iet extends Ce{constructor(){super({id:bZe,label:_({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:R.hoverFocused,kbOpts:{kbExpr:R.hoverFocused,primary:13,secondary:[2066],weight:100},metadata:{description:Ze("goToBottomHoverDescription","Go to the bottom of the editor hover.")}})}run(e,t){const i=go.get(t);i&&i.goToBottom()}}class net extends Ce{constructor(){super({id:PF,label:vZe,alias:"Increase Hover Verbosity Level",precondition:R.hoverVisible})}run(e,t,i){const s=go.get(t);if(!s)return;const o=(i==null?void 0:i.index)!==void 0?i.index:s.focusedHoverPartIndex();s.updateHoverVerbosityLevel(Er.Increase,o,i==null?void 0:i.focus)}}class set extends Ce{constructor(){super({id:AF,label:wZe,alias:"Decrease Hover Verbosity Level",precondition:R.hoverVisible})}run(e,t,i){var r;const s=go.get(t);if(!s)return;const o=(i==null?void 0:i.index)!==void 0?i.index:s.focusedHoverPartIndex();(r=go.get(t))==null||r.updateHoverVerbosityLevel(Er.Decrease,o,i==null?void 0:i.focus)}}var oet=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},JB=function(n,e){return function(t,i){e(t,i,n)}};const xl=ge;class ret{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const bse={type:1,filter:{include:Mi.QuickFix},triggerAction:Ur.QuickFixHover};let qj=class{constructor(e,t,i,s){this._editor=e,this._markerDecorationsService=t,this._openerService=i,this._languageFeaturesService=s,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1&&!e.supportsMarkerHover)return[];const i=this._editor.getModel(),s=e.range.startLineNumber,o=i.getLineMaxColumn(s),r=[];for(const a of t){const l=a.range.startLineNumber===s?a.range.startColumn:1,c=a.range.endLineNumber===s?a.range.endColumn:o,d=this._markerDecorationsService.getMarker(i.uri,a);if(!d)continue;const u=new D(e.range.startLineNumber,l,e.range.startLineNumber,c);r.push(new ret(this,u,d))}return r}renderHoverParts(e,t){if(!t.length)return new Mv([]);const i=new ne,s=[];t.forEach(r=>{const a=this._renderMarkerHover(r);e.fragment.appendChild(a.hoverElement),s.push(a)});const o=t.length===1?t[0]:t.sort((r,a)=>on.compare(r.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(e,o,i),new Mv(s)}_renderMarkerHover(e){const t=new ne,i=xl("div.hover-row"),s=ae(i,xl("div.marker.hover-contents")),{source:o,message:r,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(s);const c=ae(s,xl("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=r,o||a)if(a&&typeof a!="string"){const u=xl("span");if(o){const p=ae(u,xl("span"));p.innerText=o}const h=ae(u,xl("a.code-link"));h.setAttribute("href",a.target.toString()),t.add(Q(h,"click",p=>{this._openerService.open(a.target,{allowCommands:!0}),p.preventDefault(),p.stopPropagation()}));const f=ae(h,xl("span"));f.innerText=a.value;const m=ae(s,u);m.style.opacity="0.6",m.style.paddingLeft="6px"}else{const u=ae(s,xl("span"));u.style.opacity="0.6",u.style.paddingLeft="6px",u.innerText=o&&a?`${o}(${a})`:o||`(${a})`}if(ho(l))for(const{message:u,resource:h,startLineNumber:f,startColumn:m}of l){const p=ae(s,xl("div"));p.style.marginTop="8px";const b=ae(p,xl("a"));b.innerText=`${ml(h)}(${f}, ${m}): `,b.style.cursor="pointer",t.add(Q(b,"click",w=>{if(w.stopPropagation(),w.preventDefault(),this._openerService){const y={selection:{startLineNumber:f,startColumn:m}};this._openerService.open(h,{fromUserGesture:!0,editorOptions:y}).catch(et)}}));const v=ae(p,xl("span"));v.innerText=u,this._editor.applyFontInfo(v)}return{hoverPart:e,hoverElement:i,dispose:()=>t.dispose()}}renderMarkerStatusbar(e,t,i){if(t.marker.severity===on.Error||t.marker.severity===on.Warning||t.marker.severity===on.Info){const s=Ov.get(this._editor);s&&e.statusBar.addAction({label:_("view problem","View Problem"),commandId:NP.ID,run:()=>{e.hide(),s.showAtMarker(t.marker),this._editor.focus()}})}if(!this._editor.getOption(92)){const s=e.statusBar.append(xl("div"));this.recentMarkerCodeActionsInfo&&(Z2.makeKey(this.recentMarkerCodeActionsInfo.marker)===Z2.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(s.textContent=_("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?G.None:Km(()=>s.textContent=_("checkingForQuickFixes","Checking for quick fixes..."),200,i);s.textContent||(s.textContent=" ");const r=this.getCodeActions(t.marker);i.add(Pe(()=>r.cancel())),r.then(a=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),s.textContent=_("noQuickFixes","No quick fixes available");return}s.style.display="none";let l=!1;i.add(Pe(()=>{l||a.dispose()})),e.statusBar.addAction({label:_("quick fixes","Quick Fix..."),commandId:nZ,run:c=>{l=!0;const d=GC.get(this._editor),u=un(c);e.hide(),d==null||d.showCodeActions(bse,a,{x:u.left,y:u.top,width:u.width,height:u.height})}})},et)}}getCodeActions(e){return Xn(t=>Lw(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new D(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),bse,jc.None,t))}};qj=oet([JB(1,Nq),JB(2,hr),JB(3,xe)],qj);class aet{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}get lane(){return this._laneOrLine}set lane(e){this._laneOrLine=e}constructor(e){this._editor=e,this._lineNumber=-1,this._laneOrLine=Jl.Center}computeSync(){var o;const e=r=>({value:r}),t=this._editor.getLineDecorations(this._lineNumber),i=[],s=this._laneOrLine==="lineNo";if(!t)return i;for(const r of t){const a=((o=r.options.glyphMargin)==null?void 0:o.position)??Jl.Center;if(!s&&a!==this._laneOrLine)continue;const l=s?r.options.lineNumberHoverMessage:r.options.glyphMarginHoverMessage;!l||RC(l)||i.push(...sK(l).map(e))}return i}}var cet=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},vse=function(n,e){return function(t,i){e(t,i,n)}},Gj;const wse=ge;var Ob;let Zj=(Ob=class extends G{constructor(e,t,i){super(),this._renderDisposeables=this._register(new ne),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new oq),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new wf({editor:this._editor},t,i)),this._computer=new aet(this._editor),this._hoverOperation=this._register(new gbe(this._editor,this._computer)),this._register(this._hoverOperation.onResult(s=>{this._withResult(s.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(50)&&this._updateFont()})),this._register(Ji(this._hover.containerDomNode,"mouseleave",s=>{this._onMouseLeave(s)})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Gj.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}showsOrWillShow(e){const t=e.target;return t.type===2&&t.detail.glyphMarginLane?(this._startShowingAt(t.position.lineNumber,t.detail.glyphMarginLane),!0):t.type===3?(this._startShowingAt(t.position.lineNumber,"lineNo"),!0):!1}_startShowingAt(e,t){this._computer.lineNumber===e&&this._computer.lane===t||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._computer.lane=t,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const s of t){const o=wse("div.hover-row.markdown-hover"),r=ae(o,wse("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(s.value));r.appendChild(a.element),i.appendChild(o)}this._updateContents(i),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),s=this._editor.getScrollTop(),o=this._editor.getOption(67),r=this._hover.containerDomNode.clientHeight,a=i-s-(r-o)/2,l=t.glyphMarginLeft+t.glyphMarginWidth+(this._computer.lane==="lineNo"?t.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${l}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_onMouseLeave(e){const t=this._editor.getDomNode();(!t||!OF(t,e.x,e.y))&&this.hide()}},Gj=Ob,Ob.ID="editor.contrib.modesGlyphHoverWidget",Ob);Zj=Gj=cet([vse(1,ji),vse(2,hr)],Zj);var det=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},uet=function(n,e){return function(t,i){e(t,i,n)}},eC;let IP=(eC=class extends G{constructor(e,t){super(),this._editor=e,this._instantiationService=t,this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new ne,this._hoverState={mouseDown:!1},this._reactToEditorMouseMoveRunner=this._register(new li(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._isMouseOnMarginHoverWidget(e)&&this._hideWidgets()}_isMouseOnMarginHoverWidget(e){var i;const t=(i=this._glyphWidget)==null?void 0:i.getDomNode();return t?OF(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._isMouseOnMarginHoverWidget(e))||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky,i=this._isMouseOnMarginHoverWidget(e);return t&&i}_onEditorMouseMove(e){if(this.shouldKeepOpenOnEditorMouseMoveOrLeave)return;if(this._mouseMoveEvent=e,this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){!e||this._tryShowHoverWidget(e)||this._hideWidgets()}_tryShowHoverWidget(e){return this._getOrCreateGlyphWidget().showsOrWillShow(e)}_onKeyDown(e){this._editor.hasModel()&&(e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||this._hideWidgets())}_hideWidgets(){var e;(e=this._glyphWidget)==null||e.hide()}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=this._instantiationService.createInstance(Zj,this._editor)),this._glyphWidget}dispose(){var e;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(e=this._glyphWidget)==null||e.dispose()}},eC.ID="editor.contrib.marginHover",eC);IP=det([uet(1,Ae)],IP);class het{}class fet{}class get{}Ot(go.ID,go,2);Ot(IP.ID,IP,2);de(qJe);de(GJe);de(ZJe);de(YJe);de(XJe);de(QJe);de(JJe);de(eet);de(tet);de(iet);de(net);de(set);r0.register(MN);r0.register(qj);yl((n,e)=>{const t=n.getColor(Ife);t&&(e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${t.transparent(.5)}; }`))});$F.register(new het);$F.register(new fet);$F.register(new get);function Cr(n,e){let t=0;for(let i=0;i<n.length;i++)n.charAt(i)==="	"?t+=e:t++;return t}function uL(n,e,t){n=n<0?0:n;let i="";if(!t){const s=Math.floor(n/e);n=n%e;for(let o=0;o<s;o++)i+="	"}for(let s=0;s<n;s++)i+=" ";return i}function ave(n,e,t,i){if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return[];const s=e.getLanguageConfiguration(n.getLanguageId()).indentRulesSupport;if(!s)return[];const o=new fG(n,s,e);for(i=Math.min(i,n.getLineCount());t<=i&&o.shouldIgnore(t);)t++;if(t>i-1)return[];const{tabSize:r,indentSize:a,insertSpaces:l}=n.getOptions(),c=(p,b)=>(b=b||1,pl.shiftIndent(p,p.length+b,r,a,l)),d=(p,b)=>(b=b||1,pl.unshiftIndent(p,p.length+b,r,a,l)),u=[],h=n.getLineContent(t);let f=fi(h),m=f;o.shouldIncrease(t)?(m=c(m),f=c(f)):o.shouldIndentNextLine(t)&&(m=c(m)),t++;for(let p=t;p<=i;p++){if(met(n,p))continue;const b=n.getLineContent(p),v=fi(b),w=m;o.shouldDecrease(p,w)&&(m=d(m),f=d(f)),v!==m&&u.push(Ki.replaceMove(new Ie(p,1,p,v.length+1),Iq(m,a,l))),!o.shouldIgnore(p)&&(o.shouldIncrease(p,w)?(f=c(f),m=f):o.shouldIndentNextLine(p,w)?m=c(m):m=f)}return u}function met(n,e){return n.tokenization.isCheapToTokenize(e)?n.tokenization.getLineTokens(e).getStandardTokenType(0)===2:!1}var pet=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},_et=function(n,e){return function(t,i){e(t,i,n)}};const rO=class rO extends Ce{constructor(){super({id:rO.ID,label:_("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:R.writable,metadata:{description:Ze("indentationToSpacesDescription","Convert the tab indentation to spaces.")}})}run(e,t){const i=t.getModel();if(!i)return;const s=i.getOptions(),o=t.getSelection();if(!o)return;const r=new Cet(o,s.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}};rO.ID="editor.action.indentationToSpaces";let Yj=rO;const aO=class aO extends Ce{constructor(){super({id:aO.ID,label:_("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:R.writable,metadata:{description:Ze("indentationToTabsDescription","Convert the spaces indentation to tabs.")}})}run(e,t){const i=t.getModel();if(!i)return;const s=i.getOptions(),o=t.getSelection();if(!o)return;const r=new xet(o,s.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}};aO.ID="editor.action.indentationToTabs";let Xj=aO;class EZ extends Ce{constructor(e,t,i){super(i),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const i=e.get(Cl),s=e.get(Ei),o=t.getModel();if(!o)return;const r=s.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),a=o.getOptions(),l=[1,2,3,4,5,6,7,8].map(d=>({id:d.toString(),label:d.toString(),description:d===r.tabSize&&d===a.tabSize?_("configuredTabSize","Configured Tab Size"):d===r.tabSize?_("defaultTabSize","Default Tab Size"):d===a.tabSize?_("currentTabSize","Current Tab Size"):void 0})),c=Math.min(o.getOptions().tabSize-1,7);setTimeout(()=>{i.pick(l,{placeHolder:_({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:l[c]}).then(d=>{if(d&&o&&!o.isDisposed()){const u=parseInt(d.label,10);this.displaySizeOnly?o.updateOptions({tabSize:u}):o.updateOptions({tabSize:u,indentSize:u,insertSpaces:this.insertSpaces})}})},50)}}const lO=class lO extends EZ{constructor(){super(!1,!1,{id:lO.ID,label:_("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0,metadata:{description:Ze("indentUsingTabsDescription","Use indentation with tabs.")}})}};lO.ID="editor.action.indentUsingTabs";let Qj=lO;const cO=class cO extends EZ{constructor(){super(!0,!1,{id:cO.ID,label:_("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0,metadata:{description:Ze("indentUsingSpacesDescription","Use indentation with spaces.")}})}};cO.ID="editor.action.indentUsingSpaces";let Jj=cO;const dO=class dO extends EZ{constructor(){super(!0,!0,{id:dO.ID,label:_("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0,metadata:{description:Ze("changeTabDisplaySizeDescription","Change the space size equivalent of the tab.")}})}};dO.ID="editor.action.changeTabDisplaySize";let ez=dO;const uO=class uO extends Ce{constructor(){super({id:uO.ID,label:_("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0,metadata:{description:Ze("detectIndentationDescription","Detect the indentation from content.")}})}run(e,t){const i=e.get(Ei),s=t.getModel();if(!s)return;const o=i.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget);s.detectIndentation(o.insertSpaces,o.tabSize)}};uO.ID="editor.action.detectIndentation";let tz=uO;class bet extends Ce{constructor(){super({id:"editor.action.reindentlines",label:_("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:R.writable,metadata:{description:Ze("editor.reindentlinesDescription","Reindent the lines of the editor.")}})}run(e,t){const i=e.get(Yi),s=t.getModel();if(!s)return;const o=ave(s,i,1,s.getLineCount());o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class vet extends Ce{constructor(){super({id:"editor.action.reindentselectedlines",label:_("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:R.writable,metadata:{description:Ze("editor.reindentselectedlinesDescription","Reindent the selected lines of the editor.")}})}run(e,t){const i=e.get(Yi),s=t.getModel();if(!s)return;const o=t.getSelections();if(o===null)return;const r=[];for(const a of o){let l=a.startLineNumber,c=a.endLineNumber;if(l!==c&&a.endColumn===1&&c--,l===1){if(l===c)continue}else l--;const d=ave(s,i,l,c);r.push(...d)}r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}class wet{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const i of e)i.range&&typeof i.text=="string"&&this._edits.push(i)}getEditOperations(e,t){for(const s of this._edits)t.addEditOperation(D.lift(s.range),s.text);let i=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}var tC;let EP=(tC=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new ne,this.callOnModel=new ne,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(12)<4||this.editor.getOption(55))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const i=this.editor.getModel();if(!i||this.rangeContainsOnlyWhitespaceCharacters(i,e)||yet(i,e)||!i.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const o=this.editor.getOption(12),{tabSize:r,indentSize:a,insertSpaces:l}=i.getOptions(),c=[],d={shiftIndent:m=>pl.shiftIndent(m,m.length+1,r,a,l),unshiftIndent:m=>pl.unshiftIndent(m,m.length+1,r,a,l)};let u=e.startLineNumber;for(;u<=e.endLineNumber;){if(this.shouldIgnoreLine(i,u)){u++;continue}break}if(u>e.endLineNumber)return;let h=i.getLineContent(u);if(!/\S/.test(h.substring(0,e.startColumn-1))){const m=Qx(o,i,i.getLanguageId(),u,d,this._languageConfigurationService);if(m!==null){const p=fi(h),b=Cr(m,r),v=Cr(p,r);if(b!==v){const w=uL(b,r,l);c.push({range:new D(u,1,u,p.length+1),text:w}),h=w+h.substring(p.length)}else{const w=fpe(i,u,this._languageConfigurationService);if(w===0||w===8)return}}}const f=u;for(;u<e.endLineNumber;){if(!/\S/.test(i.getLineContent(u+1))){u++;continue}break}if(u!==e.endLineNumber){const p=Qx(o,{tokenization:{getLineTokens:b=>i.tokenization.getLineTokens(b),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(b,v)=>i.getLanguageIdAtPosition(b,v)},getLineContent:b=>b===f?h:i.getLineContent(b)},i.getLanguageId(),u+1,d,this._languageConfigurationService);if(p!==null){const b=Cr(p,r),v=Cr(fi(i.getLineContent(u+1)),r);if(b!==v){const w=b-v;for(let y=u+1;y<=e.endLineNumber;y++){const C=i.getLineContent(y),S=fi(C),k=Cr(S,r)+w,N=uL(k,r,l);N!==S&&c.push({range:new D(y,1,y,S.length+1),text:N})}}}}if(c.length>0){this.editor.pushUndoStop();const m=new wet(c,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",m),this.editor.pushUndoStop()}}rangeContainsOnlyWhitespaceCharacters(e,t){const i=o=>o.trim().length===0;let s=!0;if(t.startLineNumber===t.endLineNumber){const r=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);s=i(r)}else for(let o=t.startLineNumber;o<=t.endLineNumber;o++){const r=e.getLineContent(o);if(o===t.startLineNumber){const a=r.substring(t.startColumn-1);s=i(a)}else if(o===t.endLineNumber){const a=r.substring(0,t.endColumn-1);s=i(a)}else s=e.getLineFirstNonWhitespaceColumn(o)===0;if(!s)break}return s}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const i=e.getLineFirstNonWhitespaceColumn(t);if(i===0)return!0;const s=e.tokenization.getLineTokens(t);if(s.getCount()>0){const o=s.findTokenIndexAtOffset(i);if(o>=0&&s.getStandardTokenType(o)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}},tC.ID="editor.contrib.autoIndentOnPaste",tC);EP=pet([_et(1,Yi)],EP);function yet(n,e){const t=i=>Q5e(n,i)===2;return t(e.getStartPosition())||t(e.getEndPosition())}function lve(n,e,t,i){if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let s="";for(let r=0;r<t;r++)s+=" ";const o=new RegExp(s,"gi");for(let r=1,a=n.getLineCount();r<=a;r++){let l=n.getLineFirstNonWhitespaceColumn(r);if(l===0&&(l=n.getLineMaxColumn(r)),l===1)continue;const c=new D(r,1,r,l),d=n.getValueInRange(c),u=i?d.replace(/\t/ig,s):d.replace(o,"	");e.addEditOperation(c,u)}}class Cet{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),lve(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class xet{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),lve(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}Ot(EP.ID,EP,2);de(Yj);de(Xj);de(Qj);de(Jj);de(ez);de(tz);de(bet);de(vet);Ot(AN.ID,AN,1);r0.register(aP);class Let{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new Ie(s.endLineNumber,Math.min(this._originalSelection.positionColumn,s.endColumn),s.endLineNumber,Math.min(this._originalSelection.positionColumn,s.endColumn)):new Ie(s.endLineNumber,s.endColumn-this._text.length,s.endLineNumber,s.endColumn)}}var ket=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Net=function(n,e){return function(t,i){e(t,i,n)}},XT,km;let n1=(km=class{static get(e){return e.getContribution(XT.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var l;(l=this.currentRequest)==null||l.cancel();const i=this.editor.getSelection(),s=this.editor.getModel();if(!s||!i)return;let o=i;if(o.startLineNumber!==o.endLineNumber)return;const r=new jpe(this.editor,5),a=s.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=Xn(c=>this.editorWorkerService.navigateValueSet(a,o,t)),this.currentRequest.then(c=>{var m;if(!c||!c.range||!c.value||!r.validate(this.editor))return;const d=D.lift(c.range);let u=c.range;const h=c.value.length-(o.endColumn-o.startColumn);u={startLineNumber:u.startLineNumber,startColumn:u.startColumn,endLineNumber:u.endLineNumber,endColumn:u.startColumn+c.value.length},h>1&&(o=new Ie(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn+h-1));const f=new Let(d,o,c.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,f),this.editor.pushUndoStop(),this.decorations.set([{range:u,options:XT.DECORATION}]),(m=this.decorationRemover)==null||m.cancel(),this.decorationRemover=_f(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(et)}).catch(et)):Promise.resolve(void 0)}},XT=km,km.ID="editor.contrib.inPlaceReplaceController",km.DECORATION=rt.register({description:"in-place-replace",className:"valueSetReplacement"}),km);n1=XT=ket([Net(1,fr)],n1);class Iet extends Ce{constructor(){super({id:"editor.action.inPlaceReplace.up",label:_("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:3159,weight:100}})}run(e,t){const i=n1.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}}class Eet extends Ce{constructor(){super({id:"editor.action.inPlaceReplace.down",label:_("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:3161,weight:100}})}run(e,t){const i=n1.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}}Ot(n1.ID,n1,4);de(Iet);de(Eet);class Det extends Ce{constructor(){super({id:"expandLineSelection",label:_("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:R.textInputFocus,primary:2090}})}run(e,t,i){if(i=i||{},!t.hasModel())return;const s=t._getViewModel();s.model.pushStackElement(),s.setCursorStates(i.source,3,ms.expandLineSelection(s,s.getCursorStates())),s.revealAllCursors(i.source,!0)}}de(Det);class Tet{constructor(e,t,i){this._selection=e,this._cursors=t,this._selectionId=null,this._trimInRegexesAndStrings=i}getEditOperations(e,t){const i=Ret(e,this._cursors,this._trimInRegexesAndStrings);for(let s=0,o=i.length;s<o;s++){const r=i[s];t.addEditOperation(r.range,r.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function Ret(n,e,t){e.sort((a,l)=>a.lineNumber===l.lineNumber?a.column-l.column:a.lineNumber-l.lineNumber);for(let a=e.length-2;a>=0;a--)e[a].lineNumber===e[a+1].lineNumber&&e.splice(a,1);const i=[];let s=0,o=0;const r=e.length;for(let a=1,l=n.getLineCount();a<=l;a++){const c=n.getLineContent(a),d=c.length+1;let u=0;if(o<r&&e[o].lineNumber===a&&(u=e[o].column,o++,u===d)||c.length===0)continue;const h=Xc(c);let f=0;if(h===-1)f=1;else if(h!==c.length-1)f=h+2;else continue;if(!t){if(!n.tokenization.hasAccurateTokensForLine(a))continue;const m=n.tokenization.getLineTokens(a),p=m.getStandardTokenType(m.findTokenIndexAtOffset(f));if(p===2||p===3)continue}f=Math.max(u,f),i[s++]=Ki.delete(new D(a,f,a,d))}return i}class cve{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const s=[];for(let r=i.startLineNumber;r<=i.endLineNumber;r++)s.push(e.getLineContent(r));const o=s.join(`
`);o===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new D(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new D(i.startLineNumber,1,i.startLineNumber,1),o+`
`):t.addEditOperation(new D(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+o),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let s=i.startLineNumber,o=i.startColumn,r=i.endLineNumber,a=i.endColumn;this._startLineNumberDelta!==0&&(s=s+this._startLineNumberDelta,o=1),this._endLineNumberDelta!==0&&(r=r+this._endLineNumberDelta,a=1),i=Ie.createWithDirection(s,o,r,a,this._selectionDirection)}return i}}var Met=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Pet=function(n,e){return function(t,i){e(t,i,n)}};let iz=class{constructor(e,t,i,s){this._languageConfigurationService=s,this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const i=()=>e.getLanguageId(),s=(u,h)=>e.getLanguageIdAtPosition(u,h),o=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===o){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let r=this._selection;r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,e.getLineMaxColumn(r.endLineNumber-1)));const{tabSize:a,indentSize:l,insertSpaces:c}=e.getOptions(),d=this.buildIndentConverter(a,l,c);if(r.startLineNumber===r.endLineNumber&&e.getLineMaxColumn(r.startLineNumber)===1){const u=r.startLineNumber,h=this._isMovingDown?u+1:u-1;e.getLineMaxColumn(h)===1?t.addEditOperation(new D(1,1,1,1),null):(t.addEditOperation(new D(u,1,u,1),e.getLineContent(h)),t.addEditOperation(new D(h,1,h,e.getLineMaxColumn(h)),null)),r=new Ie(h,1,h,1)}else{let u,h;if(this._isMovingDown){u=r.endLineNumber+1,h=e.getLineContent(u),t.addEditOperation(new D(u-1,e.getLineMaxColumn(u-1),u,e.getLineMaxColumn(u)),null);let f=h;if(this.shouldAutoIndent(e,r)){const m=this.matchEnterRule(e,d,a,u,r.startLineNumber-1);if(m!==null){const b=fi(e.getLineContent(u)),v=m+Cr(b,a);f=uL(v,a,c)+this.trimStart(h)}else{const b={tokenization:{getLineTokens:w=>w===r.startLineNumber?e.tokenization.getLineTokens(u):e.tokenization.getLineTokens(w),getLanguageId:i,getLanguageIdAtPosition:s},getLineContent:w=>w===r.startLineNumber?e.getLineContent(u):e.getLineContent(w)},v=Qx(this._autoIndent,b,e.getLanguageIdAtPosition(u,1),r.startLineNumber,d,this._languageConfigurationService);if(v!==null){const w=fi(e.getLineContent(u)),y=Cr(v,a),C=Cr(w,a);y!==C&&(f=uL(y,a,c)+this.trimStart(h))}}t.addEditOperation(new D(r.startLineNumber,1,r.startLineNumber,1),f+`
`);const p=this.matchEnterRuleMovingDown(e,d,a,r.startLineNumber,u,f);if(p!==null)p!==0&&this.getIndentEditsOfMovingBlock(e,t,r,a,c,p);else{const b={tokenization:{getLineTokens:w=>w===r.startLineNumber?e.tokenization.getLineTokens(u):w>=r.startLineNumber+1&&w<=r.endLineNumber+1?e.tokenization.getLineTokens(w-1):e.tokenization.getLineTokens(w),getLanguageId:i,getLanguageIdAtPosition:s},getLineContent:w=>w===r.startLineNumber?f:w>=r.startLineNumber+1&&w<=r.endLineNumber+1?e.getLineContent(w-1):e.getLineContent(w)},v=Qx(this._autoIndent,b,e.getLanguageIdAtPosition(u,1),r.startLineNumber+1,d,this._languageConfigurationService);if(v!==null){const w=fi(e.getLineContent(r.startLineNumber)),y=Cr(v,a),C=Cr(w,a);if(y!==C){const S=y-C;this.getIndentEditsOfMovingBlock(e,t,r,a,c,S)}}}}else t.addEditOperation(new D(r.startLineNumber,1,r.startLineNumber,1),f+`
`)}else if(u=r.startLineNumber-1,h=e.getLineContent(u),t.addEditOperation(new D(u,1,u+1,1),null),t.addEditOperation(new D(r.endLineNumber,e.getLineMaxColumn(r.endLineNumber),r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),`
`+h),this.shouldAutoIndent(e,r)){const f={tokenization:{getLineTokens:p=>p===u?e.tokenization.getLineTokens(r.startLineNumber):e.tokenization.getLineTokens(p),getLanguageId:i,getLanguageIdAtPosition:s},getLineContent:p=>p===u?e.getLineContent(r.startLineNumber):e.getLineContent(p)},m=this.matchEnterRule(e,d,a,r.startLineNumber,r.startLineNumber-2);if(m!==null)m!==0&&this.getIndentEditsOfMovingBlock(e,t,r,a,c,m);else{const p=Qx(this._autoIndent,f,e.getLanguageIdAtPosition(r.startLineNumber,1),u,d,this._languageConfigurationService);if(p!==null){const b=fi(e.getLineContent(r.startLineNumber)),v=Cr(p,a),w=Cr(b,a);if(v!==w){const y=v-w;this.getIndentEditsOfMovingBlock(e,t,r,a,c,y)}}}}}this._selectionId=t.trackSelection(r)}buildIndentConverter(e,t,i){return{shiftIndent:s=>pl.shiftIndent(s,s.length+1,e,t,i),unshiftIndent:s=>pl.unshiftIndent(s,s.length+1,e,t,i)}}parseEnterResult(e,t,i,s,o){if(o){let r=o.indentation;o.indentAction===Dn.None||o.indentAction===Dn.Indent?r=o.indentation+o.appendText:o.indentAction===Dn.IndentOutdent?r=o.indentation:o.indentAction===Dn.Outdent&&(r=t.unshiftIndent(o.indentation)+o.appendText);const a=e.getLineContent(s);if(this.trimStart(a).indexOf(this.trimStart(r))>=0){const l=fi(e.getLineContent(s));let c=fi(r);const d=fpe(e,s,this._languageConfigurationService);d!==null&&d&2&&(c=t.unshiftIndent(c));const u=Cr(c,i),h=Cr(l,i);return u-h}}return null}matchEnterRuleMovingDown(e,t,i,s,o,r){if(Xc(r)>=0){const a=e.getLineMaxColumn(o),l=Iy(this._autoIndent,e,new D(o,a,o,a),this._languageConfigurationService);return this.parseEnterResult(e,t,i,s,l)}else{let a=s-1;for(;a>=1;){const d=e.getLineContent(a);if(Xc(d)>=0)break;a--}if(a<1||s>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=Iy(this._autoIndent,e,new D(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,s,c)}}matchEnterRule(e,t,i,s,o,r){let a=o;for(;a>=1;){let d;if(a===o&&r!==void 0?d=r:d=e.getLineContent(a),Xc(d)>=0)break;a--}if(a<1||s>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=Iy(this._autoIndent,e,new D(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,s,c)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const i=e.getLanguageIdAtPosition(t.startLineNumber,1),s=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(i!==s||this._languageConfigurationService.getLanguageConfiguration(i).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,i,s,o,r){for(let a=i.startLineNumber;a<=i.endLineNumber;a++){const l=e.getLineContent(a),c=fi(l),u=Cr(c,s)+r,h=uL(u,s,o);h!==c&&(t.addEditOperation(new D(a,1,a,c.length+1),h),a===i.endLineNumber&&i.endColumn<=c.length+1&&h===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}};iz=Met([Pet(3,Yi)],iz);const $w=class $w{static getCollator(){return $w._COLLATOR||($w._COLLATOR=new Intl.Collator),$w._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const i=Aet(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(e===null)return!1;const s=dve(e,t,i);if(!s)return!1;for(let o=0,r=s.before.length;o<r;o++)if(s.before[o]!==s.after[o])return!0;return!1}};$w._COLLATOR=null;let HN=$w;function dve(n,e,t){const i=e.startLineNumber;let s=e.endLineNumber;if(e.endColumn===1&&s--,i>=s)return null;const o=[];for(let a=i;a<=s;a++)o.push(n.getLineContent(a));let r=o.slice(0);return r.sort(HN.getCollator().compare),t===!0&&(r=r.reverse()),{startLineNumber:i,endLineNumber:s,before:o,after:r}}function Aet(n,e,t){const i=dve(n,e,t);return i?Ki.replace(new D(i.startLineNumber,1,i.endLineNumber,n.getLineMaxColumn(i.endLineNumber)),i.after.join(`
`)):null}class uve extends Ce{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const i=t.getSelections().map((r,a)=>({selection:r,index:a,ignore:!1}));i.sort((r,a)=>D.compareRangesUsingStarts(r.selection,a.selection));let s=i[0];for(let r=1;r<i.length;r++){const a=i[r];s.selection.endLineNumber===a.selection.startLineNumber&&(s.index<a.index?a.ignore=!0:(s.ignore=!0,s=a))}const o=[];for(const r of i)o.push(new cve(r.selection,this.down,r.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class Oet extends uve{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:_("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"2_line",title:_({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class Fet extends uve{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:_("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"2_line",title:_({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class Bet extends Ce{constructor(){super({id:"editor.action.duplicateSelection",label:_("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:R.writable,menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"2_line",title:_({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;const s=[],o=t.getSelections(),r=t.getModel();for(const a of o)if(a.isEmpty())s.push(new cve(a,!0));else{const l=new Ie(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);s.push(new RVe(l,r.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class hve extends Ce{constructor(e,t){super(t),this.down=e}run(e,t){const i=e.get(Yi),s=[],o=t.getSelections()||[],r=t.getOption(12);for(const a of o)s.push(new iz(a,this.down,r,i));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class Wet extends hve{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:_("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"2_line",title:_({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class Het extends hve{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:_("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"2_line",title:_({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class fve extends Ce{constructor(e,t){super(t),this.descending=e}run(e,t){if(!t.hasModel())return;const i=t.getModel();let s=t.getSelections();s.length===1&&s[0].isEmpty()&&(s=[new Ie(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))]);for(const r of s)if(!HN.canRun(t.getModel(),r,this.descending))return;const o=[];for(let r=0,a=s.length;r<a;r++)o[r]=new HN(s[r],this.descending);t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class Vet extends fve{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:_("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:R.writable})}}class jet extends fve{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:_("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:R.writable})}}class zet extends Ce{constructor(){super({id:"editor.action.removeDuplicateLines",label:_("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:R.writable})}run(e,t){if(!t.hasModel())return;const i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;const s=[],o=[];let r=0,a=!0,l=t.getSelections();l.length===1&&l[0].isEmpty()&&(l=[new Ie(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))],a=!1);for(const c of l){const d=new Set,u=[];for(let p=c.startLineNumber;p<=c.endLineNumber;p++){const b=i.getLineContent(p);d.has(b)||(u.push(b),d.add(b))}const h=new Ie(c.startLineNumber,1,c.endLineNumber,i.getLineMaxColumn(c.endLineNumber)),f=c.startLineNumber-r,m=new Ie(f,1,f+u.length-1,u[u.length-1].length);s.push(Ki.replace(h,u.join(`
`))),o.push(m),r+=c.endLineNumber-c.startLineNumber+1-u.length}t.pushUndoStop(),t.executeEdits(this.id,s,a?o:void 0),t.pushUndoStop()}}const hO=class hO extends Ce{constructor(){super({id:hO.ID,label:_("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:Mn(2089,2102),weight:100}})}run(e,t,i){let s=[];i.reason==="auto-save"&&(s=(t.getSelections()||[]).map(d=>new U(d.positionLineNumber,d.positionColumn)));const o=t.getSelection();if(o===null)return;const r=e.get(_t),a=t.getModel(),l=r.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:a==null?void 0:a.getLanguageId(),resource:a==null?void 0:a.uri}),c=new Tet(o,s,l);t.pushUndoStop(),t.executeCommands(this.id,[c]),t.pushUndoStop()}};hO.ID="editor.action.trimTrailingWhitespace";let nz=hO;class Uet extends Ce{constructor(){super({id:"editor.action.deleteLines",label:_("lines.delete","Delete Line"),alias:"Delete Line",precondition:R.writable,kbOpts:{kbExpr:R.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const i=this._getLinesToRemove(t),s=t.getModel();if(s.getLineCount()===1&&s.getLineMaxColumn(1)===1)return;let o=0;const r=[],a=[];for(let l=0,c=i.length;l<c;l++){const d=i[l];let u=d.startLineNumber,h=d.endLineNumber,f=1,m=s.getLineMaxColumn(h);h<s.getLineCount()?(h+=1,m=1):u>1&&(u-=1,f=s.getLineMaxColumn(u)),r.push(Ki.replace(new Ie(u,f,h,m),"")),a.push(new Ie(u-o,d.positionColumn,u-o,d.positionColumn)),o+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,a),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(o=>{let r=o.endLineNumber;return o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(r-=1),{startLineNumber:o.startLineNumber,selectionStartColumn:o.selectionStartColumn,endLineNumber:r,positionColumn:o.positionColumn}});t.sort((o,r)=>o.startLineNumber===r.startLineNumber?o.endLineNumber-r.endLineNumber:o.startLineNumber-r.startLineNumber);const i=[];let s=t[0];for(let o=1;o<t.length;o++)s.endLineNumber+1>=t[o].startLineNumber?s.endLineNumber=t[o].endLineNumber:(i.push(s),s=t[o]);return i.push(s),i}}class $et extends Ce{constructor(){super({id:"editor.action.indentLines",label:_("lines.indent","Indent Line"),alias:"Indent Line",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:2142,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,pg.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class Ket extends Ce{constructor(){super({id:"editor.action.outdentLines",label:_("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:2140,weight:100}})}run(e,t){Ey.Outdent.runEditorCommand(e,t,null)}}class qet extends Ce{constructor(){super({id:"editor.action.insertLineBefore",label:_("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:3075,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,yF.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}}class Get extends Ce{constructor(){super({id:"editor.action.insertLineAfter",label:_("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:2051,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,yF.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}}class gve extends Ce{run(e,t){if(!t.hasModel())return;const i=t.getSelection(),s=this._getRangesToDelete(t),o=[];for(let l=0,c=s.length-1;l<c;l++){const d=s[l],u=s[l+1];D.intersectRanges(d,u)===null?o.push(d):s[l+1]=D.plusRange(d,u)}o.push(s[s.length-1]);const r=this._getEndCursorState(i,o),a=o.map(l=>Ki.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,r),t.pushUndoStop()}}class Zet extends gve{constructor(){super({id:"deleteAllLeft",label:_("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:R.writable,kbOpts:{kbExpr:R.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null;const s=[];let o=0;return t.forEach(r=>{let a;if(r.endColumn===1&&o>0){const l=r.startLineNumber-o;a=new Ie(l,r.startColumn,l,r.startColumn)}else a=new Ie(r.startLineNumber,r.startColumn,r.startLineNumber,r.startColumn);o+=r.endLineNumber-r.startLineNumber,r.intersectRanges(e)?i=a:s.push(a)}),i&&s.unshift(i),s}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let i=t;const s=e.getModel();return s===null?[]:(i.sort(D.compareRangesUsingStarts),i=i.map(o=>{if(o.isEmpty())if(o.startColumn===1){const r=Math.max(1,o.startLineNumber-1),a=o.startLineNumber===1?1:s.getLineLength(r)+1;return new D(r,a,o.startLineNumber,1)}else return new D(o.startLineNumber,1,o.startLineNumber,o.startColumn);else return new D(o.startLineNumber,1,o.endLineNumber,o.endColumn)}),i)}}class Yet extends gve{constructor(){super({id:"deleteAllRight",label:_("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:R.writable,kbOpts:{kbExpr:R.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null;const s=[];for(let o=0,r=t.length,a=0;o<r;o++){const l=t[o],c=new Ie(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?i=c:s.push(c)}return i&&s.unshift(i),s}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const i=e.getSelections();if(i===null)return[];const s=i.map(o=>{if(o.isEmpty()){const r=t.getLineMaxColumn(o.startLineNumber);return o.startColumn===r?new D(o.startLineNumber,o.startColumn,o.startLineNumber+1,1):new D(o.startLineNumber,o.startColumn,o.startLineNumber,r)}return o});return s.sort(D.compareRangesUsingStarts),s}}class Xet extends Ce{constructor(){super({id:"editor.action.joinLines",label:_("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:R.writable,kbOpts:{kbExpr:R.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const i=t.getSelections();if(i===null)return;let s=t.getSelection();if(s===null)return;i.sort(D.compareRangesUsingStarts);const o=[],r=i.reduce((h,f)=>h.isEmpty()?h.endLineNumber===f.startLineNumber?(s.equalsSelection(h)&&(s=f),f):f.startLineNumber>h.endLineNumber+1?(o.push(h),f):new Ie(h.startLineNumber,h.startColumn,f.endLineNumber,f.endColumn):f.startLineNumber>h.endLineNumber?(o.push(h),f):new Ie(h.startLineNumber,h.startColumn,f.endLineNumber,f.endColumn));o.push(r);const a=t.getModel();if(a===null)return;const l=[],c=[];let d=s,u=0;for(let h=0,f=o.length;h<f;h++){const m=o[h],p=m.startLineNumber,b=1;let v=0,w,y;const C=a.getLineLength(m.endLineNumber)-m.endColumn;if(m.isEmpty()||m.startLineNumber===m.endLineNumber){const k=m.getStartPosition();k.lineNumber<a.getLineCount()?(w=p+1,y=a.getLineMaxColumn(w)):(w=k.lineNumber,y=a.getLineMaxColumn(k.lineNumber))}else w=m.endLineNumber,y=a.getLineMaxColumn(w);let S=a.getLineContent(p);for(let k=p+1;k<=w;k++){const N=a.getLineContent(k),E=a.getLineFirstNonWhitespaceColumn(k);if(E>=1){let B=!0;S===""&&(B=!1),B&&(S.charAt(S.length-1)===" "||S.charAt(S.length-1)==="	")&&(B=!1,S=S.replace(/[\s\uFEFF\xA0]+$/g," "));const A=N.substr(E-1);S+=(B?" ":"")+A,B?v=A.length+1:v=A.length}else v=0}const x=new D(p,b,w,y);if(!x.isEmpty()){let k;m.isEmpty()?(l.push(Ki.replace(x,S)),k=new Ie(x.startLineNumber-u,S.length-v+1,p-u,S.length-v+1)):m.startLineNumber===m.endLineNumber?(l.push(Ki.replace(x,S)),k=new Ie(m.startLineNumber-u,m.startColumn,m.endLineNumber-u,m.endColumn)):(l.push(Ki.replace(x,S)),k=new Ie(m.startLineNumber-u,m.startColumn,m.startLineNumber-u,S.length-C)),D.intersectRanges(x,s)!==null?d=k:c.push(k)}u+=x.endLineNumber-x.startLineNumber}c.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}}class Qet extends Ce{constructor(){super({id:"editor.action.transpose",label:_("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:R.writable})}run(e,t){const i=t.getSelections();if(i===null)return;const s=t.getModel();if(s===null)return;const o=[];for(let r=0,a=i.length;r<a;r++){const l=i[r];if(!l.isEmpty())continue;const c=l.getStartPosition(),d=s.getLineMaxColumn(c.lineNumber);if(c.column>=d){if(c.lineNumber===s.getLineCount())continue;const u=new D(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),h=s.getValueInRange(u).split("").reverse().join("");o.push(new Rs(new Ie(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),h))}else{const u=new D(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),h=s.getValueInRange(u).split("").reverse().join("");o.push(new hG(u,h,new Ie(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class c0 extends Ce{run(e,t){const i=t.getSelections();if(i===null)return;const s=t.getModel();if(s===null)return;const o=t.getOption(132),r=[];for(const a of i)if(a.isEmpty()){const l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;const d=new D(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),u=s.getValueInRange(d);r.push(Ki.replace(d,this._modifyText(u,o)))}else{const l=s.getValueInRange(a);r.push(Ki.replace(a,this._modifyText(l,o)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}}class Jet extends c0{constructor(){super({id:"editor.action.transformToUppercase",label:_("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:R.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class ett extends c0{constructor(){super({id:"editor.action.transformToLowercase",label:_("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:R.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class ef{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}const fO=class fO extends c0{constructor(){super({id:"editor.action.transformToTitlecase",label:_("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:R.writable})}_modifyText(e,t){const i=fO.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,s=>s.toLocaleUpperCase()):e}};fO.titleBoundary=new ef("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");let DP=fO;const Kw=class Kw extends c0{constructor(){super({id:"editor.action.transformToSnakecase",label:_("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:R.writable})}_modifyText(e,t){const i=Kw.caseBoundary.get(),s=Kw.singleLetters.get();return!i||!s?e:e.replace(i,"$1_$2").replace(s,"$1_$2$3").toLocaleLowerCase()}};Kw.caseBoundary=new ef("(\\p{Ll})(\\p{Lu})","gmu"),Kw.singleLetters=new ef("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");let hL=Kw;const gO=class gO extends c0{constructor(){super({id:"editor.action.transformToCamelcase",label:_("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:R.writable})}_modifyText(e,t){const i=gO.wordBoundary.get();if(!i)return e;const s=e.split(i);return s.shift()+s.map(r=>r.substring(0,1).toLocaleUpperCase()+r.substring(1)).join("")}};gO.wordBoundary=new ef("[_\\s-]","gm");let TP=gO;const qw=class qw extends c0{constructor(){super({id:"editor.action.transformToPascalcase",label:_("editor.transformToPascalcase","Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:R.writable})}_modifyText(e,t){const i=qw.wordBoundary.get(),s=qw.wordBoundaryToMaintain.get();return!i||!s?e:e.split(s).map(a=>a.split(i)).flat().map(a=>a.substring(0,1).toLocaleUpperCase()+a.substring(1)).join("")}};qw.wordBoundary=new ef("[_\\s-]","gm"),qw.wordBoundaryToMaintain=new ef("(?<=\\.)","gm");let RP=qw;const lg=class lg extends c0{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}constructor(){super({id:"editor.action.transformToKebabcase",label:_("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:R.writable})}_modifyText(e,t){const i=lg.caseBoundary.get(),s=lg.singleLetters.get(),o=lg.underscoreBoundary.get();return!i||!s||!o?e:e.replace(o,"$1-$3").replace(i,"$1-$2").replace(s,"$1-$2").toLocaleLowerCase()}};lg.caseBoundary=new ef("(\\p{Ll})(\\p{Lu})","gmu"),lg.singleLetters=new ef("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),lg.underscoreBoundary=new ef("(\\S)(_)(\\S)","gm");let MP=lg;de(Oet);de(Fet);de(Bet);de(Wet);de(Het);de(Vet);de(jet);de(zet);de(nz);de(Uet);de($et);de(Ket);de(qet);de(Get);de(Zet);de(Yet);de(Xet);de(Qet);de(Jet);de(ett);hL.caseBoundary.isSupported()&&hL.singleLetters.isSupported()&&de(hL);TP.wordBoundary.isSupported()&&de(TP);RP.wordBoundary.isSupported()&&de(RP);DP.titleBoundary.isSupported()&&de(DP);MP.isSupported()&&de(MP);var ttt=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},UD=function(n,e){return function(t,i){e(t,i,n)}},QT;const mve=new we("LinkedEditingInputVisible",!1),itt="linked-editing-decoration";var Nm;let s1=(Nm=class extends G{static get(e){return e.getContribution(QT.ID)}constructor(e,t,i,s,o){super(),this.languageConfigurationService=s,this._syncRangesToken=0,this._localToDispose=this._register(new ne),this._editor=e,this._providers=i.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=mve.bindTo(t),this._debounceInformation=o.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new ne),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(70)||r.hasChanged(94))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),i=t!==null&&(this._editor.getOption(70)||this._editor.getOption(94))&&this._providers.has(t);if(i===this._enabled&&!e||(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||t===null))return;this._localToDispose.add(pe.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const s=new hl(this._debounceInformation.get(t)),o=()=>{this._rangeUpdateTriggerPromise=s.trigger(()=>this.updateRanges(),this._debounceDuration??this._debounceInformation.get(t))},r=new hl(0),a=l=>{this._rangeSyncTriggerPromise=r.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{o()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const c=this._currentDecorations.getRange(0);if(c&&l.changes.every(d=>c.intersectRanges(d.range))){a(this._syncRangesToken);return}}o()})),this._localToDispose.add({dispose:()=>{s.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),i=this._currentDecorations.getRange(0);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const s=t.getValueInRange(i);if(this._currentWordPattern){const r=s.match(this._currentWordPattern);if((r?r[0].length:0)!==s.length)return this.clearRanges()}const o=[];for(let r=1,a=this._currentDecorations.length;r<a;r++){const l=this._currentDecorations.getRange(r);if(l)if(l.startLineNumber!==l.endLineNumber)o.push({range:l,text:s});else{let c=t.getValueInRange(l),d=s,u=l.startColumn,h=l.endColumn;const f=Um(c,d);u+=f,c=c.substr(f),d=d.substr(f);const m=o2(c,d);h-=m,c=c.substr(0,c.length-m),d=d.substr(0,d.length-m),(u!==h||d.length!==0)&&o.push({range:new D(l.startLineNumber,u,l.endLineNumber,h),text:d})}}if(o.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const r=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(r)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(e=!1){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const i=this._editor.getModel(),s=i.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===s){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const r=this._currentDecorations.getRange(0);if(r&&r.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=s;const o=this._currentRequestCts=new Gi;try{const r=new ds(!1),a=await pve(this._providers,i,t,o.token);if(this._debounceInformation.update(i,r.elapsed()),o!==this._currentRequestCts||(this._currentRequestCts=null,s!==i.getVersionId()))return;let l=[];a!=null&&a.ranges&&(l=a.ranges),this._currentWordPattern=(a==null?void 0:a.wordPattern)||this._languageWordPattern;let c=!1;for(let u=0,h=l.length;u<h;u++)if(D.containsPosition(l[u],t)){if(c=!0,u!==0){const f=l[u];l.splice(u,1),l.unshift(f)}break}if(!c){this.clearRanges();return}const d=l.map(u=>({range:u,options:QT.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(d),this._syncRangesToken++}catch(r){wl(r)||et(r),(this._currentRequestCts===o||!this._currentRequestCts)&&this.clearRanges()}}},QT=Nm,Nm.ID="editor.contrib.linkedEditing",Nm.DECORATION=rt.register({description:"linked-editing",stickiness:0,className:itt}),Nm);s1=QT=ttt([UD(1,qe),UD(2,xe),UD(3,Yi),UD(4,Fa)],s1);class ntt extends Ce{constructor(){super({id:"editor.action.linkedEditing",label:_("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:se.and(R.writable,R.hasRenameProvider),kbOpts:{kbExpr:R.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const i=e.get(Ut),[s,o]=Array.isArray(t)&&t||[void 0,void 0];return Be.isUri(s)&&U.isIPosition(o)?i.openCodeEditor({resource:s},i.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(o),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},et):super.runCommand(e,t)}run(e,t){const i=s1.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}}const stt=Hn.bindToContribution(s1.get);_e(new stt({id:"cancelLinkedEditingInput",precondition:mve,handler:n=>n.clearRanges(),kbOpts:{kbExpr:R.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));function pve(n,e,t,i){const s=n.ordered(e);return xK(s.map(o=>async()=>{try{return await o.provideLinkedEditingRanges(e,t,i)}catch(r){fn(r);return}}),o=>!!o&&ho(o==null?void 0:o.ranges))}P("editor.linkedEditingBackground",{dark:oe.fromHex("#f00").transparent(.3),light:oe.fromHex("#f00").transparent(.3),hcDark:oe.fromHex("#f00").transparent(.3),hcLight:oe.white},_("editorLinkedEditingBackground","Background color when the editor auto renames on type."));ur("_executeLinkedEditingProvider",(n,e,t)=>{const{linkedEditingRangeProvider:i}=n.get(xe);return pve(i,e,t,ht.None)});Ot(s1.ID,s1,1);de(ntt);let ott=class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(e){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))}};class PP{constructor(e){this._disposables=new ne;let t=[];for(const[i,s]of e){const o=i.links.map(r=>new ott(r,s));t=PP._union(t,o),m4(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const i=[];let s,o,r,a;for(s=0,r=0,o=e.length,a=t.length;s<o&&r<a;){const l=e[s],c=t[r];if(D.areIntersectingOrTouching(l.range,c.range)){s++;continue}D.compareRangesUsingStarts(l.range,c.range)<0?(i.push(l),s++):(i.push(c),r++)}for(;s<o;s++)i.push(e[s]);for(;r<a;r++)i.push(t[r]);return i}}function _ve(n,e,t){const i=[],s=n.ordered(e).reverse().map((o,r)=>Promise.resolve(o.provideLinks(e,t)).then(a=>{a&&(i[r]=[a,o])},fn));return Promise.all(s).then(()=>{const o=new PP(Yl(i));return t.isCancellationRequested?(o.dispose(),new PP([])):o})}Mt.registerCommand("_executeLinkProvider",async(n,...e)=>{let[t,i]=e;zt(t instanceof Be),typeof i!="number"&&(i=0);const{linkProvider:s}=n.get(xe),o=n.get(Ei).getModel(t);if(!o)return[];const r=await _ve(s,o,ht.None);if(!r)return[];for(let l=0;l<Math.min(i,r.links.length);l++)await r.links[l].resolve(ht.None);const a=r.links.slice(0);return r.dispose(),a});var rtt=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},$D=function(n,e){return function(t,i){e(t,i,n)}},sz,Fb;let VN=(Fb=class extends G{static get(e){return e.getContribution(sz.ID)}constructor(e,t,i,s,o){super(),this.editor=e,this.openerService=t,this.notificationService=i,this.languageFeaturesService=s,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=o.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new li(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const r=this._register(new FF(e));this._register(r.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(r.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(r.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;const e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Xn(t=>_ve(this.providers,e,t));try{const t=new ds(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){et(t)}finally{this.computePromise=null}}}updateDecorations(e){const t=this.editor.getOption(78)==="altKey",i=[],s=Object.keys(this.currentOccurrences);for(const r of s){const a=this.currentOccurrences[r];i.push(a.decorationId)}const o=[];if(e)for(const r of e)o.push(My.decoration(r,t));this.editor.changeDecorations(r=>{const a=r.deltaDecorations(i,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){const d=new My(e[l],a[l]);this.currentOccurrences[d.decorationId]=d}})}_onEditorMouseMove(e,t){const i=this.editor.getOption(78)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const s=this.getLinkOccurrence(e.target.position);s&&this.editor.changeDecorations(o=>{s.activate(o,i),this.activeLinkDecorationId=s.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(78)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(i=>{t.deactivate(i,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;const{link:s}=e;s.resolve(ht.None).then(o=>{if(typeof o=="string"&&this.editor.hasModel()){const r=this.editor.getModel().uri;if(r.scheme===tt.file&&o.startsWith(`${tt.file}:`)){const a=Be.parse(o);if(a.scheme===tt.file){const l=Md(a);let c=null;l.startsWith("/./")||l.startsWith("\\.\\")?c=`.${l.substr(1)}`:(l.startsWith("//./")||l.startsWith("\\\\.\\"))&&(c=`.${l.substr(2)}`),c&&(o=b5e(r,c))}}}return this.openerService.open(o,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},o=>{const r=o instanceof Error?o.message:o;r==="invalid"?this.notificationService.warn(_("invalid.url","Failed to open this link because it is not well-formed: {0}",s.url.toString())):r==="missing"?this.notificationService.warn(_("missing.url","Failed to open this link because its target is missing.")):et(o)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const i of t){const s=this.currentOccurrences[i.id];if(s)return s}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)==null||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}},sz=Fb,Fb.ID="editor.linkDetector",Fb);VN=sz=rtt([$D(1,hr),$D(2,wn),$D(3,xe),$D(4,Fa)],VN);const yse={general:rt.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:rt.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class My{static decoration(e,t){return{range:e.range,options:My._getOptions(e,t,!1)}}static _getOptions(e,t,i){const s={...i?yse.active:yse.general};return s.hoverMessage=att(e,t),s}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,My._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,My._getOptions(this.link,t,!1))}}function att(n,e){const t=n.url&&/^command:/i.test(n.url.toString()),i=n.tooltip?n.tooltip:t?_("links.navigate.executeCmd","Execute command"):_("links.navigate.follow","Follow link"),s=e?Lt?_("links.navigate.kb.meta.mac","cmd + click"):_("links.navigate.kb.meta","ctrl + click"):Lt?_("links.navigate.kb.alt.mac","option + click"):_("links.navigate.kb.alt","alt + click");if(n.url){let o="";if(/^command:/i.test(n.url.toString())){const a=n.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];o=_("tooltip.explanation","Execute command {0}",l)}}return new Us("",!0).appendLink(n.url.toString(!0).replace(/ /g,"%20"),i,o).appendMarkdown(` (${s})`)}else return new Us().appendText(`${i} (${s})`)}class ltt extends Ce{constructor(){super({id:"editor.action.openLink",label:_("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const i=VN.get(t);if(!i||!t.hasModel())return;const s=t.getSelections();for(const o of s){const r=i.getLinkOccurrence(o.getEndPosition());r&&i.openLinkOccurrence(r,!1)}}}Ot(VN.ID,VN,1);de(ltt);const tY=class tY extends G{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>{const i=this._editor.getOption(118);i>=0&&t.target.type===6&&t.target.position.column>=i&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}};tY.ID="editor.contrib.longLinesHelper";let AP=tY;Ot(AP.ID,AP,2);const ctt=P("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},_("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},_("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0);P("editor.wordHighlightTextBackground",ctt,_("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const dtt=P("editor.wordHighlightBorder",{light:null,dark:null,hcDark:Ai,hcLight:Ai},_("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));P("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:Ai,hcLight:Ai},_("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable."));P("editor.wordHighlightTextBorder",dtt,_("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));const utt=P("editorOverviewRuler.wordHighlightForeground","#A0A0A0CC",_("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),htt=P("editorOverviewRuler.wordHighlightStrongForeground","#C0A0C0CC",_("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ftt=P("editorOverviewRuler.wordHighlightTextForeground",Tfe,_("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),gtt=rt.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:sn(htt),position:Na.Center},minimap:{color:sn(z4),position:1}}),mtt=rt.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:sn(ftt),position:Na.Center},minimap:{color:sn(z4),position:1}}),ptt=rt.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:sn(Tfe),position:Na.Center},minimap:{color:sn(z4),position:1}}),_tt=rt.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),btt=rt.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:sn(utt),position:Na.Center},minimap:{color:sn(z4),position:1}});function vtt(n){return n===yC.Write?gtt:n===yC.Text?mtt:btt}function wtt(n){return n?_tt:ptt}yl((n,e)=>{const t=n.getColor(XK);t&&e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`)});var ytt=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ctt=function(n,e){return function(t,i){e(t,i,n)}},oz;function bp(n,e){const t=e.filter(i=>!n.find(s=>s.equals(i)));if(t.length>=1){const i=t.map(o=>`line ${o.viewState.position.lineNumber} column ${o.viewState.position.column}`).join(", "),s=t.length===1?_("cursorAdded","Cursor added: {0}",i):_("cursorsAdded","Cursors added: {0}",i);Tu(s)}}class Stt extends Ce{constructor(){super({id:"editor.action.insertCursorAbove",label:_("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:R.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"3_multi",title:_({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let s=!0;i&&i.logicalLine===!1&&(s=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const r=o.getCursorStates();o.setCursorStates(i.source,3,ms.addCursorUp(o,r,s)),o.revealTopMostCursor(i.source),bp(r,o.getCursorStates())}}class xtt extends Ce{constructor(){super({id:"editor.action.insertCursorBelow",label:_("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:R.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"3_multi",title:_({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let s=!0;i&&i.logicalLine===!1&&(s=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const r=o.getCursorStates();o.setCursorStates(i.source,3,ms.addCursorDown(o,r,s)),o.revealBottomMostCursor(i.source),bp(r,o.getCursorStates())}}class Ltt extends Ce{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:_("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:R.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"3_multi",title:_({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let s=e.startLineNumber;s<e.endLineNumber;s++){const o=t.getLineMaxColumn(s);i.push(new Ie(s,o,s,o))}e.endColumn>1&&i.push(new Ie(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),s=t.getSelections(),o=t._getViewModel(),r=o.getCursorStates(),a=[];s.forEach(l=>this.getCursorsForSelection(l,i,a)),a.length>0&&t.setSelections(a),bp(r,o.getCursorStates())}}class ktt extends Ce{constructor(){super({id:"editor.action.addCursorsToBottom",label:_("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),s=t.getModel().getLineCount(),o=[];for(let l=i[0].startLineNumber;l<=s;l++)o.push(new Ie(l,i[0].startColumn,l,i[0].endColumn));const r=t._getViewModel(),a=r.getCursorStates();o.length>0&&t.setSelections(o),bp(a,r.getCursorStates())}}class Ntt extends Ce{constructor(){super({id:"editor.action.addCursorsToTop",label:_("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),s=[];for(let a=i[0].startLineNumber;a>=1;a--)s.push(new Ie(a,i[0].startColumn,a,i[0].endColumn));const o=t._getViewModel(),r=o.getCursorStates();s.length>0&&t.setSelections(s),bp(r,o.getCursorStates())}}class KD{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class jN{static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new jN(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let s=!1,o,r;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(s=!0,o=!0,r=!0):(o=i.wholeWord,r=i.matchCase);const l=e.getSelection();let c,d=null;if(l.isEmpty()){const u=e.getConfiguredWordAtPosition(l.getStartPosition());if(!u)return null;c=u.word,d=new Ie(l.startLineNumber,u.startColumn,l.startLineNumber,u.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new jN(e,t,s,c,o,r,d)}constructor(e,t,i,s,o,r,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=s,this.wholeWord=o,this.matchCase=r,this.currentMatch=a}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new KD(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new KD(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return i?new Ie(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new KD(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new KD(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return i?new Ie(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824)}}const mO=class mO extends G{static get(e){return e.getContribution(mO.ID)}constructor(e){super(),this._sessionDispose=this._register(new ne),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=jN.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(s=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(s=>{(s.matchCase||s.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new Ie(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const s=e.getState().matchCase;if(!bve(this._editor.getModel(),t,s)){const r=this._editor.getModel(),a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(r,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){const s=this._editor.getModel();i.searchScope?t=s.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(132):null,!1,1073741824):t=s.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(132):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){const s=this._editor.getSelection();for(let o=0,r=t.length;o<r;o++){const a=t[o];if(a.range.intersectRanges(s)){t[o]=t[0],t[0]=a;break}}this._setSelections(t.map(o=>new Ie(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)))}}};mO.ID="editor.contrib.multiCursorController";let o1=mO;class q1 extends Ce{run(e,t){const i=o1.get(t);if(!i)return;const s=t._getViewModel();if(s){const o=s.getCursorStates(),r=cr.get(t);if(r)this._run(i,r);else{const a=e.get(Ae).createInstance(cr,t);this._run(i,a),a.dispose()}bp(o,s.getCursorStates())}}}class Itt extends q1{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:_("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:R.focus,primary:2082,weight:100},menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"3_multi",title:_({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class Ett extends q1{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:_("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"3_multi",title:_({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class Dtt extends q1{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:_("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:R.focus,primary:Mn(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class Ttt extends q1{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:_("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class Rtt extends q1{constructor(){super({id:"editor.action.selectHighlights",label:_("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:R.focus,primary:3114,weight:100},menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"3_multi",title:_({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class Mtt extends q1{constructor(){super({id:"editor.action.changeAll",label:_("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:se.and(R.writable,R.editorTextFocus),kbOpts:{kbExpr:R.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class Ptt{constructor(e,t,i,s,o){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=s,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(D.compareRangesUsingStarts)),this._cachedFindMatches}}var Bb;let OP=(Bb=class extends G{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(109),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new li(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(s=>{this._isEnabled=e.getOption(109)})),this._register(e.onDidChangeCursorSelection(s=>{this._isEnabled&&(s.selection.isEmpty()?s.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(s=>{this._setState(null)})),this._register(e.onDidChangeModelContent(s=>{this._isEnabled&&this.updateSoon.schedule()}));const i=cr.get(e);i&&this._register(i.getState().onFindReplaceStateChange(s=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(oz._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t||!i.hasModel())return null;const s=i.getSelection();if(s.startLineNumber!==s.endLineNumber)return null;const o=o1.get(i);if(!o)return null;const r=cr.get(i);if(!r)return null;let a=o.getSession(r);if(!a){const d=i.getSelections();if(d.length>1){const h=r.getState().matchCase;if(!bve(i.getModel(),d,h))return null}a=jN.create(i,r)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=r.getState(),c=l.matchCase;if(l.isRevealed){let d=l.searchString;c||(d=d.toLowerCase());let u=a.searchText;if(c||(u=u.toLowerCase()),d===u&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new Ptt(i.getModel(),a.searchText,a.matchCase,a.wholeWord?i.getOption(132):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=this.state.findMatches(),s=this.editor.getSelections();s.sort(D.compareRangesUsingStarts);const o=[];for(let c=0,d=0,u=i.length,h=s.length;c<u;){const f=i[c];if(d>=h)o.push(f),c++;else{const m=D.compareRangesUsingStarts(f,s[d]);m<0?((s[d].isEmpty()||!D.areIntersecting(f,s[d]))&&o.push(f),c++):(m>0||c++,d++)}}const r=this.editor.getOption(81)!=="off",a=this._languageFeaturesService.documentHighlightProvider.has(t)&&r,l=o.map(c=>({range:c,options:wtt(a)}));this._decorations.set(l)}dispose(){this._setState(null),super.dispose()}},oz=Bb,Bb.ID="editor.contrib.selectionHighlighter",Bb);OP=oz=ytt([Ctt(1,xe)],OP);function bve(n,e,t){const i=Cse(n,e[0],!t);for(let s=1,o=e.length;s<o;s++){const r=e[s];if(r.isEmpty())return!1;const a=Cse(n,r,!t);if(i!==a)return!1}return!0}function Cse(n,e,t){const i=n.getValueInRange(e);return t?i.toLowerCase():i}class Att extends Ce{constructor(){super({id:"editor.action.focusNextCursor",label:_("mutlicursor.focusNextCursor","Focus Next Cursor"),metadata:{description:_("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const o=Array.from(s.getCursorStates()),r=o.shift();r&&(o.push(r),s.setCursorStates(i.source,3,o),s.revealPrimaryCursor(i.source,!0),bp(o,s.getCursorStates()))}}class Ott extends Ce{constructor(){super({id:"editor.action.focusPreviousCursor",label:_("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),metadata:{description:_("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const o=Array.from(s.getCursorStates()),r=o.pop();r&&(o.unshift(r),s.setCursorStates(i.source,3,o),s.revealPrimaryCursor(i.source,!0),bp(o,s.getCursorStates()))}}Ot(o1.ID,o1,4);Ot(OP.ID,OP,1);de(Stt);de(xtt);de(Ltt);de(Itt);de(Ett);de(Dtt);de(Ttt);de(Rtt);de(Mtt);de(ktt);de(Ntt);de(Att);de(Ott);const Ftt="editor.action.inlineEdit.accept",Btt="editor.action.inlineEdit.reject",Wtt="editor.action.inlineEdit.jumpTo",Htt="editor.action.inlineEdit.jumpBack";var Vtt=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},jtt=function(n,e){return function(t,i){e(t,i,n)}};const e7="inline-edit";let rz=class extends G{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=pt(this,!1),this.currentTextModel=ii(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=Te(this,s=>{var w;if(this.isDisposed.read(s))return;const o=this.currentTextModel.read(s);if(o!==this.model.targetTextModel.read(s))return;const r=this.model.ghostText.read(s);if(!r)return;let a=(w=this.model.range)==null?void 0:w.read(s);a&&a.startLineNumber===a.endLineNumber&&a.startColumn===a.endColumn&&(a=void 0);const l=(a?a.startLineNumber===a.endLineNumber:!0)&&r.parts.length===1&&r.parts[0].lines.length===1,c=r.parts.length===1&&r.parts[0].lines.every(y=>y.length===0),d=[],u=[];function h(y,C){if(u.length>0){const S=u[u.length-1];C&&S.decorations.push(new Lo(S.content.length+1,S.content.length+1+y[0].length,C,0)),S.content+=y[0],y=y.slice(1)}for(const S of y)u.push({content:S,decorations:C?[new Lo(1,S.length+1,C,0)]:[]})}const f=o.getLineContent(r.lineNumber);let m,p=0;if(!c&&(l||!a)){for(const y of r.parts){let C=y.lines;a&&!l&&(h(C,e7),C=[]),m===void 0?(d.push({column:y.column,text:C[0],preview:y.preview}),C=C.slice(1)):h([f.substring(p,y.column-1)],void 0),C.length>0&&(h(C,e7),m===void 0&&y.column<=f.length&&(m=y.column)),p=y.column-1}m!==void 0&&h([f.substring(p)],void 0)}const b=m!==void 0?new Jbe(m,f.length+1):void 0,v=l||!a?r.lineNumber:a.endLineNumber-1;return{inlineTexts:d,additionalLines:u,hiddenRange:b,lineNumber:v,additionalReservedLineCount:this.model.minReservedLineCount.read(s),targetTextModel:o,range:a,isSingleLine:l,isPureRemove:c}}),this.decorations=Te(this,s=>{const o=this.uiState.read(s);if(!o)return[];const r=[];if(o.hiddenRange&&r.push({range:o.hiddenRange.toRange(o.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),o.range){const a=[];if(o.isSingleLine)a.push(o.range);else if(!o.isPureRemove){const l=o.range.endLineNumber-o.range.startLineNumber;for(let c=0;c<l;c++){const d=o.range.startLineNumber+c,u=o.targetTextModel.getLineFirstNonWhitespaceColumn(d),h=o.targetTextModel.getLineLastNonWhitespaceColumn(d),f=new D(d,u,d,h);a.push(f)}}for(const l of a)r.push({range:l,options:UC})}if(o.range&&!o.isSingleLine&&o.isPureRemove){const a=new D(o.range.startLineNumber,1,o.range.endLineNumber-1,1);r.push({range:a,options:vN})}for(const a of o.inlineTexts)r.push({range:D.fromPositions(new U(o.lineNumber,a.column)),options:{description:e7,after:{content:a.text,inlineClassName:a.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:jl.Left},showIfCollapsed:!0}});return r}),this._register(Pe(()=>{this.isDisposed.set(!0,void 0)})),this._register(eve(this.editor,this.decorations))}};rz=Vtt([jtt(2,ji)],rz);var DZ=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Jd=function(n,e){return function(t,i){e(t,i,n)}},JT;let az=class extends G{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=ii(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).showToolbar==="always"),this.sessionPosition=void 0,this.position=Te(this,s=>{var l,c;const o=(l=this.model.read(s))==null?void 0:l.model.ghostText.read(s);if(!this.alwaysShowToolbar.read(s)||!o||o.parts.length===0)return this.sessionPosition=void 0,null;const r=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);const a=new U(o.lineNumber,Math.min(r,((c=this.sessionPosition)==null?void 0:c.column)??Number.MAX_SAFE_INTEGER));return this.sessionPosition=a,a}),this._register(nr((s,o)=>{if(!this.model.read(s)||!this.alwaysShowToolbar.read(s))return;const a=o.add(this.instantiationService.createInstance(lz,this.editor,!0,this.position));e.addContentWidget(a),o.add(Pe(()=>e.removeContentWidget(a)))}))}};az=DZ([Jd(2,Ae)],az);var Im;let lz=(Im=class extends G{constructor(e,t,i,s,o,r){super(),this.editor=e,this.withBorder=t,this._position=i,this._contextKeyService=o,this._menuService=r,this.id=`InlineEditHintsContentWidget${JT.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=Ct("div.inlineEditHints",{className:this.withBorder?".withBorder":""},[Ct("div@toolBar")]),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(Ne.InlineEditActions,this._contextKeyService)),this.toolBar=this._register(s.createInstance(cz,this.nodes.toolBar,this.editor,Ne.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:a=>a.startsWith("primary")},actionViewItemProvider:(a,l)=>{if(a instanceof Fr)return s.createInstance(ztt,a,void 0)},telemetrySource:"InlineEditToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility(a=>{JT._dropDownVisible=a})),this._register(Je(a=>{this._position.read(a),this.editor.layoutContentWidget(this)})),this._register(Je(a=>{const l=[];for(const[c,d]of this.inlineCompletionsActionsMenus.getActions())for(const u of d)u instanceof Fr&&l.push(u);l.length>0&&l.unshift(new Ss),this.toolBar.setAdditionalSecondaryActions(l)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}},JT=Im,Im._dropDownVisible=!1,Im.id=0,Im);lz=JT=DZ([Jd(3,Ae),Jd(4,qe),Jd(5,Oa)],lz);class ztt extends Xm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=Ct("div.keybinding").root;this._register(new B1(t,Mr,{disableTitle:!0,...Bme})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineEditStatusBarItemLabel")}}updateTooltip(){}}let cz=class extends yN{constructor(e,t,i,s,o,r,a,l,c,d){super(e,{resetMenu:i,...s},o,r,a,l,c,d),this.editor=t,this.menuId=i,this.options2=s,this.menuService=o,this.contextKeyService=r,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this._store.add(this.editor.onDidChangeCursorPosition(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var i,s,o,r,a,l,c;const e=[],t=[];rF(this.menu,(i=this.options2)==null?void 0:i.menuOptions,{primary:e,secondary:t},(o=(s=this.options2)==null?void 0:s.toolbarOptions)==null?void 0:o.primaryGroup,(a=(r=this.options2)==null?void 0:r.toolbarOptions)==null?void 0:a.shouldInlineSubmenu,(c=(l=this.options2)==null?void 0:l.toolbarOptions)==null?void 0:c.useSeparatorsInPrimaryActions),t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),this.setActions(e,t)}setAdditionalSecondaryActions(e){Vi(this.additionalActions,e,(t,i)=>t===i)||(this.additionalActions=e,this.updateToolbar())}};cz=DZ([Jd(4,Oa),Jd(5,qe),Jd(6,Zr),Jd(7,ei),Jd(8,Ci),Jd(9,Zs)],cz);var vve=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},eR=function(n,e){return function(t,i){e(t,i,n)}},hx,dz;function*Utt(n,e,t=1){e===void 0&&([e,n]=[n,0]);for(let i=n;i<e;i+=t)yield i}function t7(n){var i;const e=((i=n[0].match(/^\s*/))==null?void 0:i[0])??"",t=e.length;return{text:n.map(s=>s.replace(new RegExp("^"+e),"")),shift:t}}var Wb;let uz=(Wb=class extends G{static _createUniqueUri(){return Be.from({scheme:"inline-edit-widget",path:new Date().toString()+String(hx._modelId++)})}constructor(e,t,i,s,o){super(),this._editor=e,this._model=t,this._instantiationService=i,this._diffProviderFactoryService=s,this._modelService=o,this._position=Te(this,r=>{const a=this._model.read(r);if(!a||a.text.length===0||a.range.startLineNumber===a.range.endLineNumber&&!(a.range.startColumn===a.range.endColumn&&a.range.startColumn===1))return null;const l=this._editor.getModel();if(!l)return null;const c=Array.from(Utt(a.range.startLineNumber,a.range.endLineNumber+1)),d=c.map(p=>l.getLineLastNonWhitespaceColumn(p)),u=Math.max(...d),h=c[d.indexOf(u)],f=new U(h,u);return{top:a.range.startLineNumber,left:f}}),this._text=Te(this,r=>{const a=this._model.read(r);if(!a)return{text:"",shift:0};const l=t7(a.text.split(`
`));return{text:l.text.join(`
`),shift:l.shift}}),this._originalModel=oo(()=>this._modelService.createModel("",null,hx._createUniqueUri())).keepObserved(this._store),this._modifiedModel=oo(()=>this._modelService.createModel("",null,hx._createUniqueUri())).keepObserved(this._store),this._diff=Te(this,r=>{var a,l;return(l=(a=this._diffPromise.read(r))==null?void 0:a.promiseResult.read(r))==null?void 0:l.data}),this._diffPromise=Te(this,r=>{const a=this._model.read(r);if(!a)return;const l=this._editor.getModel();if(!l)return;const c=t7(l.getValueInRange(a.range).split(`
`)).text.join(`
`),d=t7(a.text.split(`
`)).text.join(`
`);this._originalModel.get().setValue(c),this._modifiedModel.get().setValue(d);const u=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return nF.fromFn(async()=>{const h=await u.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},ht.None);if(!h.identical)return h.changes})}),this._register(nr((r,a)=>{if(!this._model.read(r)||this._position.get()===null)return;const c=a.add(this._instantiationService.createInstance(hz,this._editor,this._position,this._text.map(d=>d.text),this._text.map(d=>d.shift),this._diff));e.addOverlayWidget(c),a.add(Pe(()=>e.removeOverlayWidget(c)))}))}},hx=Wb,Wb._modelId=0,Wb);uz=hx=vve([eR(2,Ae),eR(3,KI),eR(4,Ei)],uz);var Hb;let hz=(Hb=class extends G{constructor(e,t,i,s,o,r){var a;super(),this._editor=e,this._position=t,this._text=i,this._shift=s,this._diff=o,this._instantiationService=r,this.id=`InlineEditSideBySideContentWidget${dz.id++}`,this.allowEditorOverflow=!1,this._nodes=ge("div.inlineEditSideBySide",void 0),this._scrollChanged=Ts("editor.onDidScrollChange",this._editor.onDidScrollChange),this._previewEditor=this._register(this._instantiationService.createInstance(nc,this._nodes,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollbar:{vertical:"hidden",horizontal:"hidden",alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},readOnly:!0,wordWrap:"off",wordWrapOverride1:"off",wordWrapOverride2:"off",wrappingIndent:"none",wrappingStrategy:void 0},{contributions:[],isSimpleWidget:!0},this._editor)),this._previewEditorObs=Rr(this._previewEditor),this._editorObs=Rr(this._editor),this._previewTextModel=this._register(this._instantiationService.createInstance(zc,"",((a=this._editor.getModel())==null?void 0:a.getLanguageId())??Do,zc.DEFAULT_CREATION_OPTIONS,null)),this._setText=Te(l=>{const c=this._text.read(l);c&&this._previewTextModel.setValue(c)}).recomputeInitiallyAndOnChange(this._store),this._decorations=Te(this,l=>{this._setText.read(l);const c=this._position.read(l);if(!c)return{org:[],mod:[]};const d=this._diff.read(l);if(!d)return{org:[],mod:[]};const u=[],h=[];if(d.length===1&&d[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return{org:[],mod:[]};const f=this._shift.get(),m=p=>new D(p.startLineNumber+c.top-1,p.startColumn+f,p.endLineNumber+c.top-1,p.endColumn+f);for(const p of d)if(p.original.isEmpty||u.push({range:m(p.original.toInclusiveRange()),options:vN}),p.modified.isEmpty||h.push({range:p.modified.toInclusiveRange(),options:HM}),p.modified.isEmpty||p.original.isEmpty)p.original.isEmpty||u.push({range:m(p.original.toInclusiveRange()),options:PG}),p.modified.isEmpty||h.push({range:p.modified.toInclusiveRange(),options:RG});else for(const b of p.innerChanges||[])p.original.contains(b.originalRange.startLineNumber)&&u.push({range:m(b.originalRange),options:b.originalRange.isEmpty()?AG:UC}),p.modified.contains(b.modifiedRange.startLineNumber)&&h.push({range:b.modifiedRange,options:b.modifiedRange.isEmpty()?MG:VM});return{org:u,mod:h}}),this._originalDecorations=Te(this,l=>this._decorations.read(l).org),this._modifiedDecorations=Te(this,l=>this._decorations.read(l).mod),this._previewEditor.setModel(this._previewTextModel),this._register(this._editorObs.setDecorations(this._originalDecorations)),this._register(this._previewEditorObs.setDecorations(this._modifiedDecorations)),this._register(Je(l=>{const c=this._previewEditorObs.contentWidth.read(l),d=this._text.read(l).split(`
`).length-1,u=this._editor.getOption(67)*d;c<=0||this._previewEditor.layout({height:u,width:c})})),this._register(Je(l=>{this._position.read(l),this._editor.layoutOverlayWidget(this)})),this._register(Je(l=>{this._scrollChanged.read(l),this._position.read(l)&&this._editor.layoutOverlayWidget(this)}))}getId(){return this.id}getDomNode(){return this._nodes}getPosition(){const e=this._position.get();if(!e)return null;const t=this._editor.getLayoutInfo(),i=this._editor.getScrolledVisiblePosition(new U(e.top,1));if(!i)return null;const s=i.top-1,o=this._editor.getOffsetForColumn(e.left.lineNumber,e.left.column);return{preference:{left:t.contentLeft+o+10,top:s}}}},dz=Hb,Hb.id=0,Hb);hz=dz=vve([eR(5,Ae)],hz);var $tt=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Bp=function(n,e){return function(t,i){e(t,i,n)}},fx,Za;let ko=(Za=class extends G{static get(e){return e.getContribution(fx.ID)}constructor(e,t,i,s,o,r,a,l){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.languageFeaturesService=s,this._commandService=o,this._configurationService=r,this._diffProviderFactoryService=a,this._modelService=l,this._isVisibleContext=fx.inlineEditVisibleContext.bindTo(this.contextKeyService),this._isCursorAtInlineEditContext=fx.cursorAtInlineEditContext.bindTo(this.contextKeyService),this._currentEdit=pt(this,void 0),this._currentWidget=oo(this._currentEdit,m=>{const p=this._currentEdit.read(m);if(!p)return;const b=p.range.endLineNumber,v=p.range.endColumn,w=p.text.endsWith(`
`)&&!(p.range.startLineNumber===p.range.endLineNumber&&p.range.startColumn===p.range.endColumn)?p.text.slice(0,-1):p.text,y=new ON(b,[new mP(v,w,!1)]),C=p.range.startLineNumber===p.range.endLineNumber&&y.parts.length===1&&y.parts[0].lines.length===1,S=p.text==="";return!C&&!S?void 0:this.instantiationService.createInstance(rz,this.editor,{ghostText:nl(y),minReservedLineCount:nl(0),targetTextModel:nl(this.editor.getModel()??void 0),range:nl(p.range)})}),this._isAccepting=pt(this,!1),this._enabled=ii(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).enabled),this._fontFamily=ii(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).fontFamily);const c=Ts("InlineEditController.modelContentChangedSignal",e.onDidChangeModelContent);this._register(Je(m=>{this._enabled.read(m)&&(c.read(m),!this._isAccepting.read(m)&&this.getInlineEdit(e,!0))}));const d=ii(this,e.onDidChangeCursorPosition,()=>e.getPosition());this._register(Je(m=>{if(!this._enabled.read(m))return;const p=d.read(m);p&&this.checkCursorPosition(p)})),this._register(Je(m=>{const p=this._currentEdit.read(m);if(this._isCursorAtInlineEditContext.set(!1),!p){this._isVisibleContext.set(!1);return}this._isVisibleContext.set(!0);const b=e.getPosition();b&&this.checkCursorPosition(b)}));const u=Ts("InlineEditController.editorBlurSignal",e.onDidBlurEditorWidget);this._register(Je(async m=>{var p;this._enabled.read(m)&&(u.read(m),!(this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||e.getOption(63).keepOnBlur)&&((p=this._currentRequestCts)==null||p.dispose(!0),this._currentRequestCts=void 0,await this.clear(!1)))}));const h=Ts("InlineEditController.editorFocusSignal",e.onDidFocusEditorText);this._register(Je(m=>{this._enabled.read(m)&&(h.read(m),this.getInlineEdit(e,!0))}));const f=this._register(whe());this._register(Je(m=>{const p=this._fontFamily.read(m);f.setStyle(p===""||p==="default"?"":`
.monaco-editor .inline-edit-decoration,
.monaco-editor .inline-edit-decoration-preview,
.monaco-editor .inline-edit {
	font-family: ${p};
}`)})),this._register(new az(this.editor,this._currentWidget,this.instantiationService)),this._register(new uz(this.editor,this._currentEdit,this.instantiationService,this._diffProviderFactoryService,this._modelService))}checkCursorPosition(e){if(!this._currentEdit){this._isCursorAtInlineEditContext.set(!1);return}const t=this._currentEdit.get();if(!t){this._isCursorAtInlineEditContext.set(!1);return}this._isCursorAtInlineEditContext.set(D.containsPosition(t.range,e))}validateInlineEdit(e,t){var i;if(t.text.includes(`
`)&&t.range.startLineNumber!==t.range.endLineNumber&&t.range.startColumn!==t.range.endColumn){if(t.range.startColumn!==1)return!1;const o=t.range.endLineNumber,r=t.range.endColumn,a=((i=e.getModel())==null?void 0:i.getLineLength(o))??0;if(r!==a+1)return!1}return!0}async fetchInlineEdit(e,t){this._currentRequestCts&&this._currentRequestCts.dispose(!0);const i=e.getModel();if(!i)return;const s=i.getVersionId(),o=this.languageFeaturesService.inlineEditProvider.all(i);if(o.length===0)return;const r=o[0];this._currentRequestCts=new Gi;const a=this._currentRequestCts.token,l=t?s2.Automatic:s2.Invoke;if(t&&await Ktt(50,a),a.isCancellationRequested||i.isDisposed()||i.getVersionId()!==s)return;const d=await r.provideInlineEdit(i,{triggerKind:l},a);if(d&&!(a.isCancellationRequested||i.isDisposed()||i.getVersionId()!==s)&&this.validateInlineEdit(e,d))return d}async getInlineEdit(e,t){this._isCursorAtInlineEditContext.set(!1),await this.clear();const i=await this.fetchInlineEdit(e,t);i&&this._currentEdit.set(i,void 0)}async trigger(){await this.getInlineEdit(this.editor,!1)}async jumpBack(){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition))}async accept(){this._isAccepting.set(!0,void 0);const e=this._currentEdit.get();if(!e)return;let t=e.text;e.text.startsWith(`
`)&&(t=e.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[Ki.replace(D.lift(e.range),t)]),e.accepted&&await this._commandService.executeCommand(e.accepted.id,...e.accepted.arguments||[]).then(void 0,fn),this.freeEdit(e),qi(i=>{this._currentEdit.set(void 0,i),this._isAccepting.set(!1,i)})}jumpToCurrent(){var i;this._jumpBackPosition=(i=this.editor.getSelection())==null?void 0:i.getStartPosition();const e=this._currentEdit.get();if(!e)return;const t=U.lift({lineNumber:e.range.startLineNumber,column:e.range.startColumn});this.editor.setPosition(t),this.editor.revealPositionInCenterIfOutsideViewport(t)}async clear(e=!0){const t=this._currentEdit.get();t&&(t!=null&&t.rejected)&&e&&await this._commandService.executeCommand(t.rejected.id,...t.rejected.arguments||[]).then(void 0,fn),t&&this.freeEdit(t),this._currentEdit.set(void 0,void 0)}freeEdit(e){const t=this.editor.getModel();if(!t)return;const i=this.languageFeaturesService.inlineEditProvider.all(t);i.length!==0&&i[0].freeInlineEdit(e)}},fx=Za,Za.ID="editor.contrib.inlineEditController",Za.inlineEditVisibleKey="inlineEditVisible",Za.inlineEditVisibleContext=new we(Za.inlineEditVisibleKey,!1),Za.cursorAtInlineEditKey="cursorAtInlineEdit",Za.cursorAtInlineEditContext=new we(Za.cursorAtInlineEditKey,!1),Za);ko=fx=$tt([Bp(1,Ae),Bp(2,qe),Bp(3,xe),Bp(4,Ci),Bp(5,_t),Bp(6,KI),Bp(7,Ei)],ko);function Ktt(n,e){return new Promise(t=>{let i;const s=setTimeout(()=>{i&&i.dispose(),t()},n);e&&(i=e.onCancellationRequested(()=>{clearTimeout(s),i&&i.dispose(),t()}))})}let qtt=class extends Ce{constructor(){super({id:Ftt,label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:se.and(R.writable,ko.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:se.and(R.writable,ko.inlineEditVisibleContext,ko.cursorAtInlineEditContext)}],menuOpts:[{menuId:Ne.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})}async run(e,t){const i=ko.get(t);await(i==null?void 0:i.accept())}};class Gtt extends Ce{constructor(){const e=se.and(R.writable,se.not(ko.inlineEditVisibleKey));super({id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e}})}async run(e,t){const i=ko.get(t);i==null||i.trigger()}}class Ztt extends Ce{constructor(){const e=se.and(R.writable,ko.inlineEditVisibleContext,se.not(ko.cursorAtInlineEditKey));super({id:Wtt,label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e},menuOpts:[{menuId:Ne.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:e}]})}async run(e,t){const i=ko.get(t);i==null||i.jumpToCurrent()}}class Ytt extends Ce{constructor(){const e=se.and(R.writable,ko.cursorAtInlineEditContext);super({id:Htt,label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:e,kbOpts:{weight:110,primary:2646,kbExpr:e},menuOpts:[{menuId:Ne.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:e}]})}async run(e,t){const i=ko.get(t);i==null||i.jumpBack()}}class Xtt extends Ce{constructor(){const e=se.and(R.writable,ko.inlineEditVisibleContext);super({id:Btt,label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:e,kbOpts:{weight:100,primary:9,kbExpr:e},menuOpts:[{menuId:Ne.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})}async run(e,t){const i=ko.get(t);await(i==null?void 0:i.clear())}}de(qtt);de(Xtt);de(Ztt);de(Ytt);de(Gtt);Ot(ko.ID,ko,3);const Qtt="editor.action.inlineEdits.accept",Jtt="editor.action.inlineEdits.showPrevious",eit="editor.action.inlineEdits.showNext",r1=new we("inlineEditsVisible",!1,_("inlineEditsVisible","Whether an inline edit is visible")),tit=new we("inlineEditsIsPinned",!1,_("isPinned","Whether an inline edit is visible")),iY=class iY extends G{constructor(e){super(),this._editor=e,this._editorObs=Rr(this._editor),this._placeholderText=this._editorObs.getOption(88),this._state=ma({owner:this,equalsFn:V2},t=>{const i=this._placeholderText.read(t);if(i&&this._editorObs.valueIsEmpty.read(t))return{placeholder:i}}),this._shouldViewBeAlive=iit(this,t=>{var i;return((i=this._state.read(t))==null?void 0:i.placeholder)!==void 0}),this._view=gp((t,i)=>{if(!this._shouldViewBeAlive.read(t))return;const s=Ct("div.editorPlaceholder");i.add(Je(o=>{const r=this._state.read(o),a=(r==null?void 0:r.placeholder)!==void 0;s.root.style.display=a?"block":"none",s.root.innerText=(r==null?void 0:r.placeholder)??""})),i.add(Je(o=>{const r=this._editorObs.layoutInfo.read(o);s.root.style.left=`${r.contentLeft}px`,s.root.style.width=r.contentWidth-r.verticalScrollbarWidth+"px",s.root.style.top=`${this._editor.getTopForLineNumber(0)}px`})),i.add(Je(o=>{s.root.style.fontFamily=this._editorObs.getOption(49).read(o),s.root.style.fontSize=this._editorObs.getOption(52).read(o)+"px",s.root.style.lineHeight=this._editorObs.getOption(67).read(o)+"px"})),i.add(this._editorObs.createOverlayWidget({allowEditorOverflow:!1,minContentWidthInPx:nl(0),position:nl(null),domNode:s.root}))}),this._view.recomputeInitiallyAndOnChange(this._store)}};iY.ID="editor.contrib.placeholderText";let zN=iY;function iit(n,e){return FI(n,(t,i)=>i===!0?!0:e(t))}var nit=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},sit=function(n,e){return function(t,i){e(t,i,n)}};class oit{constructor(e,t,i){this.range=e,this.newLines=t,this.changes=i}}let fz=class extends G{constructor(e,t,i,s){super(),this._editor=e,this._edit=t,this._userPrompt=i,this._instantiationService=s,this._editorObs=Rr(this._editor),this._elements=Ct("div.inline-edits-widget",{style:{position:"absolute",overflow:"visible",top:"0px",left:"0px"}},[Ct("div@editorContainer",{style:{position:"absolute",top:"0px",left:"0px",width:"500px",height:"500px"}},[Ct("div.toolbar@toolbar",{style:{position:"absolute",top:"-25px",left:"0px"}}),Ct("div.promptEditor@promptEditor",{style:{position:"absolute",top:"-25px",left:"80px",width:"300px",height:"22px"}}),Ct("div.preview@editor",{style:{position:"absolute",top:"0px",left:"0px"}})]),b0("svg",{style:{overflow:"visible",pointerEvents:"none"}},[b0("defs",[b0("linearGradient",{id:"Gradient2",x1:"0",y1:"0",x2:"1",y2:"0"},[b0("stop",{offset:"0%",class:"gradient-stop"}),b0("stop",{offset:"100%",class:"gradient-stop"})])]),b0("path@path",{d:"",fill:"url(#Gradient2)"})])]),this._previewTextModel=this._register(this._instantiationService.createInstance(zc,"",Do,zc.DEFAULT_CREATION_OPTIONS,null)),this._setText=Te(r=>{const a=this._edit.read(r);a&&this._previewTextModel.setValue(a.newLines.join(`
`))}).recomputeInitiallyAndOnChange(this._store),this._promptTextModel=this._register(this._instantiationService.createInstance(zc,"",Do,zc.DEFAULT_CREATION_OPTIONS,null)),this._promptEditor=this._register(this._instantiationService.createInstance(nc,this._elements.promptEditor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,placeholder:"Describe the change you want...",fontFamily:ype},{contributions:K_.getSomeEditorContributions([zl.ID,zN.ID,QC.ID]),isSimpleWidget:!0},this._editor)),this._previewEditor=this._register(this._instantiationService.createInstance(nc,this._elements.editor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0},{contributions:[]},this._editor)),this._previewEditorObs=Rr(this._previewEditor),this._decorations=Te(this,r=>{var d;this._setText.read(r);const a=(d=this._edit.read(r))==null?void 0:d.changes;if(!a)return[];const l=[],c=[];if(a.length===1&&a[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return[];for(const u of a)if(u.original.isEmpty||l.push({range:u.original.toInclusiveRange(),options:vN}),u.modified.isEmpty||c.push({range:u.modified.toInclusiveRange(),options:HM}),u.modified.isEmpty||u.original.isEmpty)u.original.isEmpty||l.push({range:u.original.toInclusiveRange(),options:PG}),u.modified.isEmpty||c.push({range:u.modified.toInclusiveRange(),options:RG});else for(const h of u.innerChanges||[])u.original.contains(h.originalRange.startLineNumber)&&l.push({range:h.originalRange,options:h.originalRange.isEmpty()?AG:UC}),u.modified.contains(h.modifiedRange.startLineNumber)&&c.push({range:h.modifiedRange,options:h.modifiedRange.isEmpty()?MG:VM});return c}),this._layout1=Te(this,r=>{const a=this._editor.getModel(),l=this._edit.read(r);if(!l)return null;const c=l.range;let d=0;for(let f=c.startLineNumber;f<c.endLineNumberExclusive;f++){const m=a.getLineMaxColumn(f),p=this._editor.getOffsetForColumn(f,m);d=Math.max(d,p)}return{left:this._editor.getLayoutInfo().contentLeft+d}}),this._layout=Te(this,r=>{const a=this._edit.read(r);if(!a)return null;const l=a.range,c=this._editorObs.scrollLeft.read(r),d=this._layout1.read(r).left+20-c,u=this._editor.getTopForLineNumber(l.startLineNumber)-this._editorObs.scrollTop.read(r),h=this._editor.getTopForLineNumber(l.endLineNumberExclusive)-this._editorObs.scrollTop.read(r),f=new Dw(d,u),m=new Dw(d,h),p=h-u,b=50,v=this._editor.getOption(67)*a.newLines.length,w=p-v,y=new Dw(d+b,u+w/2),C=new Dw(d+b,h-w/2);return{topCode:f,bottomCode:m,codeHeight:p,topEdit:y,bottomEdit:C,editHeight:v}});const o=Te(this,r=>this._edit.read(r)!==void 0||this._userPrompt.read(r)!==void 0);this._register(yf(this._elements.root,{display:Te(this,r=>o.read(r)?"block":"none")})),this._register(Sw(this._editor.getDomNode(),this._elements.root)),this._register(Rr(e).createOverlayWidget({domNode:this._elements.root,position:nl(null),allowEditorOverflow:!1,minContentWidthInPx:Te(r=>{var c;const a=(c=this._layout1.read(r))==null?void 0:c.left;if(a===void 0)return 0;const l=this._previewEditorObs.contentWidth.read(r);return a+l})})),this._previewEditor.setModel(this._previewTextModel),this._register(this._previewEditorObs.setDecorations(this._decorations)),this._register(Je(r=>{const a=this._layout.read(r);if(!a)return;const{topCode:l,bottomCode:c,topEdit:d,bottomEdit:u,editHeight:h}=a,f=10,m=0,p=40,b=new ait().moveTo(l).lineTo(l.deltaX(f)).curveTo(l.deltaX(f+p),d.deltaX(-p-m),d.deltaX(-m)).lineTo(d).lineTo(u).lineTo(u.deltaX(-m)).curveTo(u.deltaX(-p-m),c.deltaX(f+p),c.deltaX(f)).lineTo(c).build();this._elements.path.setAttribute("d",b),this._elements.editorContainer.style.top=`${d.y}px`,this._elements.editorContainer.style.left=`${d.x}px`,this._elements.editorContainer.style.height=`${h}px`;const v=this._previewEditorObs.contentWidth.read(r);this._previewEditor.layout({height:h,width:v})})),this._promptEditor.setModel(this._promptTextModel),this._promptEditor.layout(),this._register(lit(rit(this._userPrompt,r=>r??"",r=>r),Rr(this._promptEditor).value)),this._register(Je(r=>{const a=Rr(this._promptEditor).isFocused.read(r);this._elements.root.classList.toggle("focused",a)}))}};fz=nit([sit(3,Ae)],fz);function rit(n,e,t){return PI(void 0,i=>e(n.read(i)),(i,s)=>n.set(t(i),s))}class Dw{constructor(e,t){this.x=e,this.y=t}deltaX(e){return new Dw(this.x+e,this.y)}}class ait{constructor(){this._data=""}moveTo(e){return this._data+=`M ${e.x} ${e.y} `,this}lineTo(e){return this._data+=`L ${e.x} ${e.y} `,this}curveTo(e,t,i){return this._data+=`C ${e.x} ${e.y} ${t.x} ${t.y} ${i.x} ${i.y} `,this}build(){return this._data}}function lit(n,e){const t=new ne;return t.add(Je(i=>{const s=n.read(i);e.set(s,void 0)})),t.add(Je(i=>{const s=e.read(i);n.set(s,void 0)})),t}var cit=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},i7=function(n,e){return function(t,i){e(t,i,n)}},gx,Vb;let gz=(Vb=class extends G{static _createUniqueUri(){return Be.from({scheme:"inline-edits",path:new Date().toString()+String(gx._modelId++)})}constructor(e,t,i,s,o,r,a){super(),this.textModel=e,this._textModelVersionId=t,this._selection=i,this._debounceValue=s,this.languageFeaturesService=o,this._diffProviderFactoryService=r,this._modelService=a,this._forceUpdateExplicitlySignal=P1(this),this._selectedInlineCompletionId=pt(this,void 0),this._isActive=pt(this,!1),this._originalModel=oo(()=>this._modelService.createModel("",null,gx._createUniqueUri())).keepObserved(this._store),this._modifiedModel=oo(()=>this._modelService.createModel("",null,gx._createUniqueUri())).keepObserved(this._store),this._pinnedRange=new uit(this.textModel,this._textModelVersionId),this.isPinned=this._pinnedRange.range.map(l=>!!l),this.userPrompt=pt(this,void 0),this.inlineEdit=Te(this,l=>{var c,d;return(d=(c=this._inlineEdit.read(l))==null?void 0:c.promiseResult.read(l))==null?void 0:d.data}),this._inlineEdit=Te(this,l=>{const c=this.selectedInlineEdit.read(l);if(!c)return;const d=c.inlineCompletion.range;if(c.inlineCompletion.insertText.trim()==="")return;let u=c.inlineCompletion.insertText.split(/\r\n|\r|\n/);function h(b){var w;const v=((w=b[0].match(/^\s*/))==null?void 0:w[0])??"";return b.map(y=>y.replace(new RegExp("^"+v),""))}u=h(u);let m=this.textModel.getValueInRange(d).split(/\r\n|\r|\n/);m=h(m),this._originalModel.get().setValue(m.join(`
`)),this._modifiedModel.get().setValue(u.join(`
`));const p=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return nF.fromFn(async()=>{const b=await p.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},ht.None);if(!b.identical)return new oit(at.fromRangeInclusive(d),h(u),b.changes)})}),this._fetchStore=this._register(new ne),this._inlineEditsFetchResult=Yk(this,void 0),this._inlineEdits=ma({owner:this,equalsFn:V2},l=>{var c;return((c=this._inlineEditsFetchResult.read(l))==null?void 0:c.completions.map(d=>new dit(d)))??[]}),this._fetchInlineEditsPromise=pge({owner:this,createEmptyChangeSummary:()=>({inlineCompletionTriggerKind:Yc.Automatic}),handleChange:(l,c)=>(l.didChange(this._forceUpdateExplicitlySignal)&&(c.inlineCompletionTriggerKind=Yc.Explicit),!0)},async(l,c)=>{this._fetchStore.clear(),this._forceUpdateExplicitlySignal.read(l),this._textModelVersionId.read(l);function d(p,b){return b(p)}const u=this._pinnedRange.range.read(l)??d(this._selection.read(l),p=>p.isEmpty()?void 0:p);if(!u){this._inlineEditsFetchResult.set(void 0,void 0),this.userPrompt.set(void 0,void 0);return}const h={triggerKind:c.inlineCompletionTriggerKind,selectedSuggestionInfo:void 0,userPrompt:this.userPrompt.read(l)},f=V9(this._fetchStore);await _f(200,f);const m=await tve(this.languageFeaturesService.inlineCompletionsProvider,u,this.textModel,h,f);f.isCancellationRequested||this._inlineEditsFetchResult.set(m,void 0)}),this._filteredInlineEditItems=ma({owner:this,equalsFn:H2()},l=>this._inlineEdits.read(l)),this.selectedInlineCompletionIndex=Te(this,l=>{const c=this._selectedInlineCompletionId.read(l),d=this._filteredInlineEditItems.read(l),u=this._selectedInlineCompletionId===void 0?-1:d.findIndex(h=>h.semanticId===c);return u===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):u}),this.selectedInlineEdit=Te(this,l=>{const c=this._filteredInlineEditItems.read(l),d=this.selectedInlineCompletionIndex.read(l);return c[d]}),this._register(A1(this._fetchInlineEditsPromise))}async triggerExplicitly(e){Cv(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineEditsPromise.get()}stop(e){Cv(e,t=>{this.userPrompt.set(void 0,t),this._isActive.set(!1,t),this._inlineEditsFetchResult.set(void 0,t),this._pinnedRange.setRange(void 0,t)})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineEditItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){if(e.getModel()!==this.textModel)throw new Zt;const t=this.selectedInlineEdit.get();t&&(e.pushUndoStop(),e.executeEdits("inlineSuggestion.accept",[t.inlineCompletion.toSingleTextEdit().toSingleEditOperation()]),this.stop())}},gx=Vb,Vb._modelId=0,Vb);gz=gx=cit([i7(4,xe),i7(5,KI),i7(6,Ei)],gz);class dit{constructor(e){this.inlineCompletion=e,this.semanticId=this.inlineCompletion.hash()}}class uit extends G{constructor(e,t){super(),this._textModel=e,this._versionId=t,this._decorations=pt(this,[]),this.range=Te(this,i=>{this._versionId.read(i);const s=this._decorations.read(i)[0];return s?this._textModel.getDecorationRange(s)??null:null}),this._register(Pe(()=>{this._textModel.deltaDecorations(this._decorations.get(),[])}))}setRange(e,t){this._decorations.set(this._textModel.deltaDecorations(this._decorations.get(),e?[{range:e,options:{description:"trackedRange"}}]:[]),t)}}var hit=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},BS=function(n,e){return function(t,i){e(t,i,n)}},mz,jb;let Lf=(jb=class extends G{static get(e){return e.getContribution(mz.ID)}constructor(e,t,i,s,o,r){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._debounceService=s,this._languageFeaturesService=o,this._configurationService=r,this._enabled=jUe("editor.inlineEdits.enabled",!1,this._configurationService),this._editorObs=Rr(this.editor),this._selection=Te(this,a=>this._editorObs.cursorSelection.read(a)??new Ie(1,1,1,1)),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineEditsDebounce",{min:50,max:50}),this.model=oo(this,a=>{if(!this._enabled.read(a)||this._editorObs.isReadonly.read(a))return;const l=this._editorObs.model.read(a);return l?this._instantiationService.createInstance(kr(gz,a),l,this._editorObs.versionId,this._selection,this._debounceValue):void 0}),this._hadInlineEdit=FI(this,(a,l)=>{var c;return l||((c=this.model.read(a))==null?void 0:c.inlineEdit.read(a))!==void 0}),this._widget=oo(this,a=>{if(this._hadInlineEdit.read(a))return this._instantiationService.createInstance(kr(fz,a),this.editor,this.model.map((l,c)=>l==null?void 0:l.inlineEdit.read(c)),fit(l=>{var c;return((c=this.model.read(l))==null?void 0:c.userPrompt)??pt("empty","")}))}),this._register(vc(r1,this._contextKeyService,a=>{var l;return!!((l=this.model.read(a))!=null&&l.inlineEdit.read(a))})),this._register(vc(tit,this._contextKeyService,a=>{var l;return!!((l=this.model.read(a))!=null&&l.isPinned.read(a))})),this.model.recomputeInitiallyAndOnChange(this._store),this._widget.recomputeInitiallyAndOnChange(this._store)}},mz=jb,jb.ID="editor.contrib.inlineEditsController",jb);Lf=mz=hit([BS(1,Ae),BS(2,qe),BS(3,Fa),BS(4,xe),BS(5,_t)],Lf);function fit(n){return PI(void 0,e=>n(e).read(e),(e,t)=>{n(void 0).set(e,t)})}function sE(n){return{label:n.value,alias:n.original}}const pO=class pO extends Ce{constructor(){super({id:pO.ID,...sE(Ze("action.inlineEdits.showNext","Show Next Inline Edit")),precondition:se.and(R.writable,r1),kbOpts:{weight:100,primary:606}})}async run(e,t){var s;const i=Lf.get(t);(s=i==null?void 0:i.model.get())==null||s.next()}};pO.ID=eit;let pz=pO;const _O=class _O extends Ce{constructor(){super({id:_O.ID,...sE(Ze("action.inlineEdits.showPrevious","Show Previous Inline Edit")),precondition:se.and(R.writable,r1),kbOpts:{weight:100,primary:604}})}async run(e,t){var s;const i=Lf.get(t);(s=i==null?void 0:i.model.get())==null||s.previous()}};_O.ID=Jtt;let _z=_O;class git extends Ce{constructor(){super({id:"editor.action.inlineEdits.trigger",...sE(Ze("action.inlineEdits.trigger","Trigger Inline Edit")),precondition:R.writable})}async run(e,t){const i=Lf.get(t);await mge(async s=>{var o;await((o=i==null?void 0:i.model.get())==null?void 0:o.triggerExplicitly(s))})}}class mit extends Ce{constructor(){super({id:Qtt,...sE(Ze("action.inlineEdits.accept","Accept Inline Edit")),precondition:r1,menuOpts:{menuId:Ne.InlineEditsActions,title:_("inlineEditsActions","Accept Inline Edit"),group:"primary",order:1,icon:he.check},kbOpts:{primary:2058,weight:2e4,kbExpr:r1}})}async run(e,t){var s;t instanceof nc&&(t=t.getParentEditor());const i=Lf.get(t);i&&((s=i.model.get())==null||s.accept(i.editor),i.editor.focus())}}const bO=class bO extends Ce{constructor(){super({id:bO.ID,...sE(Ze("action.inlineEdits.hide","Hide Inline Edit")),precondition:r1,kbOpts:{weight:100,primary:9}})}async run(e,t){const i=Lf.get(t);qi(s=>{var o;(o=i==null?void 0:i.model.get())==null||o.stop(s)})}};bO.ID="editor.action.inlineEdits.hide";let bz=bO;Ot(Lf.ID,Lf,3);de(git);de(pz);de(_z);de(mit);de(bz);const Fv={Visible:new we("parameterHintsVisible",!1),MultipleSignatures:new we("parameterHintsMultipleSignatures",!1)};async function wve(n,e,t,i,s){const o=n.ordered(e);for(const r of o)try{const a=await r.provideSignatureHelp(e,t,s,i);if(a)return a}catch(a){fn(a)}}Mt.registerCommand("_executeSignatureHelpProvider",async(n,...e)=>{const[t,i,s]=e;zt(Be.isUri(t)),zt(U.isIPosition(i)),zt(typeof s=="string"||!s);const o=n.get(xe),r=await n.get(dr).createModelReference(t);try{const a=await wve(o.signatureHelpProvider,r.object.textEditorModel,U.lift(i),{triggerKind:pu.Invoke,isRetrigger:!1,triggerCharacter:s},ht.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{r.dispose()}});var ig;(function(n){n.Default={type:0};class e{constructor(s,o){this.request=s,this.previouslyActiveHints=o,this.type=2}}n.Pending=e;class t{constructor(s){this.hints=s,this.type=1}}n.Active=t})(ig||(ig={}));const vO=class vO extends G{constructor(e,t,i=vO.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new $),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=ig.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new es),this.triggerChars=new b2,this.retriggerChars=new b2,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new hl(i),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(s=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(s=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(s=>this.onCursorChange(s))),this._register(this.editor.onDidChangeModelContent(s=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(s=>this.onDidType(s))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=ig.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const i=this.editor.getModel();if(!i||!this.providers.has(i))return;const s=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(s),t).catch(et)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e===e-1,s=this.editor.getOption(86).cycle;if((e<2||i)&&!s){this.cancel();return}this.updateActiveSignature(i&&s?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t===0,s=this.editor.getOption(86).cycle;if((e<2||i)&&!s){this.cancel();return}this.updateActiveSignature(i&&s?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new ig.Active({...this.state.hints,activeSignature:e}),this._onChangedHints.fire(this.state.hints))}async doTrigger(e){const t=this.state.type===1||this.state.type===2,i=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const s=this._pendingTriggers.reduce(pit);this._pendingTriggers=[];const o={triggerKind:s.triggerKind,triggerCharacter:s.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;const r=this.editor.getModel(),a=this.editor.getPosition();this.state=new ig.Pending(Xn(l=>wve(this.providers,r,a,o,l)),i);try{const l=await this.state.request;return e!==this.triggerId?(l==null||l.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l==null||l.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new ig.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=ig.Default),et(l),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const i of t.signatureHelpTriggerCharacters||[])if(i.length){const s=i.charCodeAt(0);this.triggerChars.add(s),this.retriggerChars.add(s)}for(const i of t.signatureHelpRetriggerCharacters||[])i.length&&this.retriggerChars.add(i.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:pu.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:pu.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:pu.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}};vO.DEFAULT_DELAY=120;let vz=vO;function pit(n,e){switch(e.triggerKind){case pu.Invoke:return e;case pu.ContentChange:return n;case pu.TriggerCharacter:default:return e}}var _it=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},qD=function(n,e){return function(t,i){e(t,i,n)}},wz;const ta=ge,bit=Di("parameter-hints-next",he.chevronDown,_("parameterHintsNextIcon","Icon for show next parameter hint.")),vit=Di("parameter-hints-previous",he.chevronUp,_("parameterHintsPreviousIcon","Icon for show previous parameter hint."));var zb;let yz=(zb=class extends G{constructor(e,t,i,s,o,r){super(),this.editor=e,this.model=t,this.telemetryService=r,this.renderDisposeables=this._register(new ne),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new wf({editor:e},o,s)),this.keyVisible=Fv.Visible.bindTo(i),this.keyMultipleSignatures=Fv.MultipleSignatures.bindTo(i)}createParameterHintDOMNodes(){const e=ta(".editor-widget.parameter-hints-widget"),t=ae(e,ta(".phwrapper"));t.tabIndex=-1;const i=ae(t,ta(".controls")),s=ae(i,ta(".button"+Ke.asCSSSelector(vit))),o=ae(i,ta(".overloads")),r=ae(i,ta(".button"+Ke.asCSSSelector(bit)));this._register(Q(s,"click",h=>{Dt.stop(h),this.previous()})),this._register(Q(r,"click",h=>{Dt.stop(h),this.next()}));const a=ta(".body"),l=new EI(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());const c=ae(a,ta(".signature")),d=ae(a,ta(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:o,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(h=>{this.visible&&this.editor.layoutContentWidget(this)}));const u=()=>{if(!this.domNodes)return;const h=this.editor.getOption(50),f=this.domNodes.element;f.style.fontSize=`${h.fontSize}px`,f.style.lineHeight=`${h.lineHeight/h.fontSize}`,f.style.setProperty("--vscode-parameterHintsWidget-editorFontFamily",h.fontFamily),f.style.setProperty("--vscode-parameterHintsWidget-editorFontFamilyDefault",Eo.fontFamily)};u(),this._register(pe.chain(this.editor.onDidChangeConfiguration.bind(this.editor),h=>h.filter(f=>f.hasChanged(50)))(u)),this._register(this.editor.onDidLayoutChange(h=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)==null||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)==null||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){if(this.renderDisposeables.clear(),!this.domNodes)return;const t=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",t),this.keyMultipleSignatures.set(t),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const i=e.signatures[e.activeSignature];if(!i)return;const s=ae(this.domNodes.signature,ta(".code")),o=i.parameters.length>0,r=i.activeParameter??e.activeParameter;if(o)this.renderParameters(s,i,r);else{const c=ae(s,ta("span"));c.textContent=i.label}const a=i.parameters[r];if(a!=null&&a.documentation){const c=ta("span.documentation");if(typeof a.documentation=="string")c.textContent=a.documentation;else{const d=this.renderMarkdownDocs(a.documentation);c.appendChild(d.element)}ae(this.domNodes.docs,ta("p",{},c))}if(i.documentation!==void 0)if(typeof i.documentation=="string")ae(this.domNodes.docs,ta("p",{},i.documentation));else{const c=this.renderMarkdownDocs(i.documentation);ae(this.domNodes.docs,c.element)}const l=this.hasDocs(i,a);if(this.domNodes.signature.classList.toggle("has-docs",l),this.domNodes.docs.classList.toggle("empty",!l),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,a){let c="";const d=i.parameters[r];Array.isArray(d.label)?c=i.label.substring(d.label[0],d.label[1]):c=d.label,d.documentation&&(c+=typeof d.documentation=="string"?`, ${d.documentation}`:`, ${d.documentation.value}`),i.documentation&&(c+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),this.announcedLabel!==c&&(Oo(_("hint","{0}, hint",c)),this.announcedLabel=c)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=new ds,i=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var o;(o=this.domNodes)==null||o.scrollbar.scanDomNode()}}));i.element.classList.add("markdown-docs");const s=t.elapsed();return s>300&&this.telemetryService.publicLog2("parameterHints.parseMarkdown",{renderDuration:s}),i}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&Fg(t.documentation).length>0||t&&typeof t.documentation=="object"&&Fg(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&Fg(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&Fg(e.documentation.value).length>0)}renderParameters(e,t,i){const[s,o]=this.getParameterLabelOffsets(t,i),r=document.createElement("span");r.textContent=t.label.substring(0,s);const a=document.createElement("span");a.textContent=t.label.substring(s,o),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(o),ae(e,r,a,l)}getParameterLabelOffsets(e,t){const i=e.parameters[t];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){const s=new RegExp(`(\\W|^)${Da(i.label)}(?=\\W|$)`,"g");s.test(e.label);const o=s.lastIndex-i.label.length;return o>=0?[o,s.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return wz.ID}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const i=this.domNodes.element.getElementsByClassName("phwrapper");i.length&&(i[0].style.maxHeight=t)}},wz=zb,zb.ID="editor.widget.parameterHintsWidget",zb);yz=wz=_it([qD(2,qe),qD(3,hr),qD(4,ji),qD(5,Zs)],yz);P("editorHoverWidget.highlightForeground",fw,_("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var wit=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Sse=function(n,e){return function(t,i){e(t,i,n)}},Cz,Ub;let a1=(Ub=class extends G{static get(e){return e.getContribution(Cz.ID)}constructor(e,t,i){super(),this.editor=e,this.model=this._register(new vz(e,i.signatureHelpProvider)),this._register(this.model.onChangedHints(s=>{var o;s?(this.widget.value.show(),this.widget.value.render(s)):(o=this.widget.rawValue)==null||o.hide()})),this.widget=new ad(()=>this._register(t.createInstance(yz,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){var e;(e=this.widget.rawValue)==null||e.previous()}next(){var e;(e=this.widget.rawValue)==null||e.next()}trigger(e){this.model.trigger(e,0)}},Cz=Ub,Ub.ID="editor.controller.parameterHints",Ub);a1=Cz=wit([Sse(1,Ae),Sse(2,xe)],a1);class yit extends Ce{constructor(){super({id:"editor.action.triggerParameterHints",label:_("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:R.hasSignatureHelpProvider,kbOpts:{kbExpr:R.editorTextFocus,primary:3082,weight:100}})}run(e,t){const i=a1.get(t);i==null||i.trigger({triggerKind:pu.Invoke})}}Ot(a1.ID,a1,2);de(yit);const TZ=175,RZ=Hn.bindToContribution(a1.get);_e(new RZ({id:"closeParameterHints",precondition:Fv.Visible,handler:n=>n.cancel(),kbOpts:{weight:TZ,kbExpr:R.focus,primary:9,secondary:[1033]}}));_e(new RZ({id:"showPrevParameterHint",precondition:se.and(Fv.Visible,Fv.MultipleSignatures),handler:n=>n.previous(),kbOpts:{weight:TZ,kbExpr:R.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));_e(new RZ({id:"showNextParameterHint",precondition:se.and(Fv.Visible,Fv.MultipleSignatures),handler:n=>n.next(),kbOpts:{weight:TZ,kbExpr:R.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var Cit=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Sit=function(n,e){return function(t,i){e(t,i,n)}};class xit{constructor(e){this.instantiationService=e}init(...e){}}function Lit(n,e){return class extends e{constructor(){super(...arguments),this._autorun=void 0}init(...i){this._autorun=nr((s,o)=>{const r=kr(n(),s);o.add(this.instantiationService.createInstance(r,...i))})}dispose(){var i;(i=this._autorun)==null||i.dispose()}}}function kit(n){return xF()?Lit(n,Sz):n()}let Sz=class extends xit{constructor(e,t){super(t),this.init(e)}};Sz=Cit([Sit(1,Ae)],Sz);Ot(zN.ID,kit(()=>zN),0);P("editor.placeholder.foreground",T7e,_("placeholderForeground","Foreground color of the placeholder text in the editor."));var Nit=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},GD=function(n,e){return function(t,i){e(t,i,n)}};const G1=new we("renameInputVisible",!1,_("renameInputVisible","Whether the rename input widget is visible"));new we("renameInputFocused",!1,_("renameInputFocused","Whether the rename input widget is focused"));let xz=class{constructor(e,t,i,s,o,r){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=s,this._logService=r,this.allowEditorOverflow=!0,this._disposables=new ne,this._visibleContextKey=G1.bindTo(o),this._isEditingRenameCandidate=!1,this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,this._candidates=new Set,this._beforeFirstInputFieldEditSW=new ds,this._inputWithButton=new Iit,this._disposables.add(this._inputWithButton),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{a.hasChanged(50)&&this._updateFont()})),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputWithButton.domNode),this._renameCandidateListView=this._disposables.add(new MZ(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:e=>{this._inputWithButton.input.value=e,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._inputWithButton.onDidInputChange(()=>{var e,t,i;((e=this._renameCandidateListView)==null?void 0:e.focusedCandidate)!==void 0&&(this._isEditingRenameCandidate=!0),this._timeBeforeFirstInputFieldEdit??(this._timeBeforeFirstInputFieldEdit=this._beforeFirstInputFieldEditSW.elapsed()),((t=this._renameCandidateProvidersCts)==null?void 0:t.token.isCancellationRequested)===!1&&this._renameCandidateProvidersCts.cancel(),(i=this._renameCandidateListView)==null||i.clearFocus()})),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){if(!this._domNode)return;const t=e.getColor(E1),i=e.getColor(Efe);this._domNode.style.backgroundColor=String(e.getColor(Ca)??""),this._domNode.style.boxShadow=t?` 0 0 8px 2px ${t}`:"",this._domNode.style.border=i?`1px solid ${i}`:"",this._domNode.style.color=String(e.getColor(Rfe)??"");const s=e.getColor(Mfe);this._inputWithButton.domNode.style.backgroundColor=String(e.getColor(FW)??""),this._inputWithButton.input.style.backgroundColor=String(e.getColor(FW)??""),this._inputWithButton.domNode.style.borderWidth=s?"1px":"0px",this._inputWithButton.domNode.style.borderStyle=s?"solid":"none",this._inputWithButton.domNode.style.borderColor=(s==null?void 0:s.toString())??"none"}_updateFont(){if(this._domNode===void 0)return;zt(this._label!==void 0,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._inputWithButton.input);const e=this._editor.getOption(50);this._label.style.fontSize=`${this._computeLabelFontSize(e.fontSize)}px`}_computeLabelFontSize(e){return e*.8}getPosition(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;const e=qm(this.getDomNode().ownerDocument.body),t=un(this._editor.getDomNode()),i=this._getTopForPosition();this._nPxAvailableAbove=i+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;const s=this._editor.getOption(67),{totalHeight:o}=UN.getLayoutInfo({lineHeight:s}),r=this._nPxAvailableBelow>o*6?[2,1]:[1,2];return{position:this._position,preference:r}}beforeRender(){var i,s;const[e,t]=this._acceptKeybindings;return this._label.innerText=_({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(i=this._keybindingService.lookupKeybinding(e))==null?void 0:i.getLabel(),(s=this._keybindingService.lookupKeybinding(t))==null?void 0:s.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(e){if(e===null){this.cancelInput(!0,"afterRender (because position is null)");return}if(!this._editor.hasModel()||!this._editor.getDomNode())return;zt(this._renameCandidateListView),zt(this._nPxAvailableAbove!==void 0),zt(this._nPxAvailableBelow!==void 0);const t=Ph(this._inputWithButton.domNode),i=Ph(this._label);let s;e===2?s=this._nPxAvailableBelow:s=this._nPxAvailableAbove,this._renameCandidateListView.layout({height:s-i-t,width:xr(this._inputWithButton.domNode)})}acceptInput(e){var t;this._trace("invoking acceptInput"),(t=this._currentAcceptInput)==null||t.call(this,e)}cancelInput(e,t){var i;(i=this._currentCancelInput)==null||i.call(this,e)}focusNextRenameSuggestion(){var e;(e=this._renameCandidateListView)!=null&&e.focusNext()||(this._inputWithButton.input.value=this._currentName)}focusPreviousRenameSuggestion(){var e;(e=this._renameCandidateListView)!=null&&e.focusPrevious()||(this._inputWithButton.input.value=this._currentName)}getInput(e,t,i,s,o){const{start:r,end:a}=this._getSelection(e,t);this._renameCts=o;const l=new ne;this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,s===void 0?this._inputWithButton.button.style.display="none":(this._inputWithButton.button.style.display="flex",this._requestRenameCandidatesOnce=s,this._requestRenameCandidates(t,!1),l.add(Q(this._inputWithButton.button,"click",()=>this._requestRenameCandidates(t,!0))),l.add(Q(this._inputWithButton.button,fe.KEY_DOWN,d=>{const u=new _i(d);(u.equals(3)||u.equals(10))&&(u.stopPropagation(),u.preventDefault(),this._requestRenameCandidates(t,!0))}))),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",i),this._position=new U(e.startLineNumber,e.startColumn),this._currentName=t,this._inputWithButton.input.value=t,this._inputWithButton.input.setAttribute("selectionStart",r.toString()),this._inputWithButton.input.setAttribute("selectionEnd",a.toString()),this._inputWithButton.input.size=Math.max((e.endColumn-e.startColumn)*1.1,20),this._beforeFirstInputFieldEditSW.reset(),l.add(Pe(()=>{this._renameCts=void 0,o.dispose(!0)})),l.add(Pe(()=>{this._renameCandidateProvidersCts!==void 0&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)})),l.add(Pe(()=>this._candidates.clear()));const c=new S1;return c.p.finally(()=>{l.dispose(),this._hide()}),this._currentCancelInput=d=>{var u;return this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,(u=this._renameCandidateListView)==null||u.clearCandidates(),c.complete(d),!0},this._currentAcceptInput=d=>{this._trace("invoking _currentAcceptInput"),zt(this._renameCandidateListView!==void 0);const u=this._renameCandidateListView.nCandidates;let h,f;const m=this._renameCandidateListView.focusedCandidate;if(m!==void 0?(this._trace("using new name from renameSuggestion"),h=m,f={k:"renameSuggestion"}):(this._trace("using new name from inputField"),h=this._inputWithButton.input.value,f=this._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),h===t||h.trim().length===0){this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)");return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),c.complete({newName:h,wantsPreview:i&&d,stats:{source:f,nRenameSuggestions:u,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit,nRenameSuggestionsInvocations:this._nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:this._hadAutomaticRenameSuggestionsInvocation}})},l.add(o.token.onCancellationRequested(()=>this.cancelInput(!0,"cts.token.onCancellationRequested"))),l.add(this._editor.onDidBlurEditorWidget(()=>{var d;return this.cancelInput(!((d=this._domNode)!=null&&d.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")})),this._show(),c.p}_requestRenameCandidates(e,t){if(this._requestRenameCandidatesOnce!==void 0&&(this._renameCandidateProvidersCts!==void 0&&this._renameCandidateProvidersCts.dispose(!0),zt(this._renameCts),this._inputWithButton.buttonState!=="stop")){this._renameCandidateProvidersCts=new Gi;const i=t?kk.Invoke:kk.Automatic,s=this._requestRenameCandidatesOnce(i,this._renameCandidateProvidersCts.token);if(s.length===0){this._inputWithButton.setSparkleButton();return}t||(this._hadAutomaticRenameSuggestionsInvocation=!0),this._nRenameSuggestionsInvocations+=1,this._inputWithButton.setStopButton(),this._updateRenameCandidates(s,e,this._renameCts.token)}}_getSelection(e,t){zt(this._editor.hasModel());const i=this._editor.getSelection();let s=0,o=t.length;return!D.isEmpty(i)&&!D.spansMultipleLines(i)&&D.containsRange(e,i)&&(s=Math.max(0,i.startColumn-e.startColumn),o=Math.min(e.endColumn,i.endColumn)-e.startColumn),{start:s,end:o}}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._inputWithButton.input.focus(),this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute("selectionStart")),parseInt(this._inputWithButton.input.getAttribute("selectionEnd")))},100)}async _updateRenameCandidates(e,t,i){const s=(...c)=>this._trace("_updateRenameCandidates",...c);s("start");const o=await xI(Promise.allSettled(e),i);if(this._inputWithButton.setSparkleButton(),o===void 0){s("returning early - received updateRenameCandidates results - undefined");return}const r=o.flatMap(c=>c.status==="fulfilled"&&mu(c.value)?c.value:[]);s(`received updateRenameCandidates results - total (unfiltered) ${r.length} candidates.`);const a=ff(r,c=>c.newSymbolName);s(`distinct candidates - ${a.length} candidates.`);const l=a.filter(({newSymbolName:c})=>c.trim().length>0&&c!==this._inputWithButton.input.value&&c!==t&&!this._candidates.has(c));if(s(`valid distinct candidates - ${r.length} candidates.`),l.forEach(c=>this._candidates.add(c.newSymbolName)),l.length<1){s("returning early - no valid distinct candidates");return}s("setting candidates"),this._renameCandidateListView.setCandidates(l),s("asking editor to re-layout"),this._editor.layoutContentWidget(this)}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){const e=this._editor.getVisibleRanges();let t;return e.length>0?t=e[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),t=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(t)}_trace(...e){this._logService.trace("RenameWidget",...e)}};xz=Nit([GD(2,Vn),GD(3,ei),GD(4,qe),GD(5,Os)],xz);class MZ{constructor(e,t){this._disposables=new ne,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=t.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=t.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),this._listContainer.className="rename-box rename-candidate-list-container",e.appendChild(this._listContainer),this._listWidget=MZ._createListWidget(this._listContainer,this._candidateViewHeight,t.fontInfo),this._listWidget.onDidChangeFocus(i=>{i.elements.length===1&&t.onFocusChange(i.elements[0].newSymbolName)},this._disposables),this._listWidget.onDidChangeSelection(i=>{i.elements.length===1&&t.onSelectionChange()},this._disposables),this._disposables.add(this._listWidget.onDidBlur(i=>{this._listWidget.setFocus([])})),this._listWidget.style(Qv({listInactiveFocusForeground:jk,listInactiveFocusBackground:zk}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout({height:e,width:t}){this._availableHeight=e,this._minimumWidth=t}setCandidates(e){this._listWidget.splice(0,0,e);const t=this._pickListHeight(this._listWidget.length),i=this._pickListWidth(e);this._listWidget.layout(t,i),this._listContainer.style.height=`${t}px`,this._listContainer.style.width=`${i}px`,Tu(_("renameSuggestionsReceivedAria","Received {0} rename suggestions",e.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(this._listWidget.length===0)return;const e=this._listWidget.getSelectedElements()[0];if(e!==void 0)return e.newSymbolName;const t=this._listWidget.getFocusedElements()[0];if(t!==void 0)return t.newSymbolName}focusNext(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();if(e.length===0)return this._listWidget.focusFirst(),this._listWidget.reveal(0),!0;if(e[0]===this._listWidget.length-1)return this._listWidget.setFocus([]),this._listWidget.reveal(0),!1;{this._listWidget.focusNext();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}focusPrevious(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();if(e.length===0){this._listWidget.focusLast();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}else{if(e[0]===0)return this._listWidget.setFocus([]),!1;{this._listWidget.focusPrevious();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){const{totalHeight:e}=UN.getLayoutInfo({lineHeight:this._lineHeight});return e}_pickListHeight(e){const t=this._candidateViewHeight*e;return Math.min(t,this._availableHeight,this._candidateViewHeight*7)}_pickListWidth(e){const t=Math.ceil(Math.max(...e.map(s=>s.newSymbolName.length))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+t+10)}static _createListWidget(e,t,i){const s=new class{getTemplateId(r){return"candidate"}getHeight(r){return t}},o=new class{constructor(){this.templateId="candidate"}renderTemplate(r){return new UN(r,i)}renderElement(r,a,l){l.populate(r)}disposeTemplate(r){r.dispose()}};return new Wa("NewSymbolNameCandidates",e,s,[o],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}}class Iit{constructor(){this._onDidInputChange=new $,this.onDidInputChange=this._onDidInputChange.event,this._disposables=new ne}get domNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="rename-input-with-button",this._domNode.style.display="flex",this._domNode.style.flexDirection="row",this._domNode.style.alignItems="center",this._inputNode=document.createElement("input"),this._inputNode.className="rename-input",this._inputNode.type="text",this._inputNode.style.border="none",this._inputNode.setAttribute("aria-label",_("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._inputNode),this._buttonNode=document.createElement("div"),this._buttonNode.className="rename-suggestions-button",this._buttonNode.setAttribute("tabindex","0"),this._buttonGenHoverText=_("generateRenameSuggestionsButton","Generate new name suggestions"),this._buttonCancelHoverText=_("cancelRenameSuggestionsButton","Cancel"),this._buttonHover=_d().setupManagedHover(Wo("element"),this._buttonNode,this._buttonGenHoverText),this._disposables.add(this._buttonHover),this._domNode.appendChild(this._buttonNode),this._disposables.add(Q(this.input,fe.INPUT,()=>this._onDidInputChange.fire())),this._disposables.add(Q(this.input,fe.KEY_DOWN,e=>{const t=new _i(e);(t.keyCode===15||t.keyCode===17)&&this._onDidInputChange.fire()})),this._disposables.add(Q(this.input,fe.CLICK,()=>this._onDidInputChange.fire())),this._disposables.add(Q(this.input,fe.FOCUS,()=>{this.domNode.style.outlineWidth="1px",this.domNode.style.outlineStyle="solid",this.domNode.style.outlineOffset="-1px",this.domNode.style.outlineColor="var(--vscode-focusBorder)"})),this._disposables.add(Q(this.input,fe.BLUR,()=>{this.domNode.style.outline="none"}))),this._domNode}get input(){return zt(this._inputNode),this._inputNode}get button(){return zt(this._buttonNode),this._buttonNode}get buttonState(){return this._buttonState}setSparkleButton(){var e;this._buttonState="sparkle",this._sparkleIcon??(this._sparkleIcon=vv(he.sparkle)),ws(this.button),this.button.appendChild(this._sparkleIcon),this.button.setAttribute("aria-label","Generating new name suggestions"),(e=this._buttonHover)==null||e.update(this._buttonGenHoverText),this.input.focus()}setStopButton(){var e;this._buttonState="stop",this._stopIcon??(this._stopIcon=vv(he.primitiveSquare)),ws(this.button),this.button.appendChild(this._stopIcon),this.button.setAttribute("aria-label","Cancel generating new name suggestions"),(e=this._buttonHover)==null||e.update(this._buttonCancelHoverText),this.input.focus()}dispose(){this._disposables.dispose()}}const ML=class ML{constructor(e,t){this._domNode=document.createElement("div"),this._domNode.className="rename-box rename-candidate",this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height=`${t.lineHeight}px`,this._domNode.style.padding=`${ML._PADDING}px`;const i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.width=i.style.height=`${t.lineHeight*.8}px`,this._domNode.appendChild(i),this._icon=vv(he.sparkle),this._icon.style.display="none",i.appendChild(this._icon),this._label=document.createElement("div"),Cs(this._label,t),this._domNode.appendChild(this._label),e.appendChild(this._domNode)}populate(e){this._updateIcon(e),this._updateLabel(e)}_updateIcon(e){var i;const t=!!((i=e.tags)!=null&&i.includes(G9.AIGenerated));this._icon.style.display=t?"inherit":"none"}_updateLabel(e){this._label.innerText=e.newSymbolName}static getLayoutInfo({lineHeight:e}){return{totalHeight:e+ML._PADDING*2}}dispose(){}};ML._PADDING=2;let UN=ML;var Eit=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Kf=function(n,e){return function(t,i){e(t,i,n)}},Lz;class PZ{constructor(e,t,i){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=i.ordered(e)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(e){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const s=this._providers[this._providerRenameIdx];if(!s.resolveRenameLocation)break;const o=await s.resolveRenameLocation(this.model,this.position,e);if(o){if(o.rejectReason){t.push(o.rejectReason);continue}return o}}this._providerRenameIdx=0;const i=this.model.getWordAtPosition(this.position);return i?{range:new D(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:D.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}}async provideRenameEdits(e,t){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}async _provideRenameEdits(e,t,i,s){const o=this._providers[t];if(!o)return{edits:[],rejectReason:i.join(`
`)};const r=await o.provideRenameEdits(this.model,this.position,e,s);if(r){if(r.rejectReason)return this._provideRenameEdits(e,t+1,i.concat(r.rejectReason),s)}else return this._provideRenameEdits(e,t+1,i.concat(_("no result","No result.")),s);return r}}async function Dit(n,e,t,i){const s=new PZ(e,t,n),o=await s.resolveRenameLocation(ht.None);return o!=null&&o.rejectReason?{edits:[],rejectReason:o.rejectReason}:s.provideRenameEdits(i,ht.None)}var $b;let rp=($b=class{static get(e){return e.getContribution(Lz.ID)}constructor(e,t,i,s,o,r,a,l,c){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=s,this._progressService=o,this._logService=r,this._configService=a,this._languageFeaturesService=l,this._telemetryService=c,this._disposableStore=new ne,this._cts=new Gi,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(xz,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){var m,p;const e=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new Gi,!this.editor.hasModel()){e("editor has no model");return}const t=this.editor.getPosition(),i=new PZ(this.editor.getModel(),t,this._languageFeaturesService.renameProvider);if(!i.hasProvider()){e("skeleton has no provider");return}const s=new ip(this.editor,5,void 0,this._cts.token);let o;try{e("resolving rename location");const b=i.resolveRenameLocation(s.token);this._progressService.showWhile(b,250),o=await b,e("resolved rename location")}catch(b){b instanceof Xl?e("resolve rename location cancelled",JSON.stringify(b,null,"	")):(e("resolve rename location failed",b instanceof Error?b:JSON.stringify(b,null,"	")),(typeof b=="string"||td(b))&&((m=Br.get(this.editor))==null||m.showMessage(b||_("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),t)));return}finally{s.dispose()}if(!o){e("returning early - no loc");return}if(o.rejectReason){e(`returning early - rejected with reason: ${o.rejectReason}`,o.rejectReason),(p=Br.get(this.editor))==null||p.showMessage(o.rejectReason,t);return}if(s.token.isCancellationRequested){e("returning early - cts1 cancelled");return}const r=new ip(this.editor,5,o.range,this._cts.token),a=this.editor.getModel(),l=this._languageFeaturesService.newSymbolNamesProvider.all(a),c=await Promise.all(l.map(async b=>[b,await b.supportsAutomaticNewSymbolNamesTriggerKind??!1])),d=(b,v)=>{let w=c.slice();return b===kk.Automatic&&(w=w.filter(([y,C])=>C)),w.map(([y])=>y.provideNewSymbolNames(a,o.range,b,v))};e("creating rename input field and awaiting its result");const u=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),h=await this._renameWidget.getInput(o.range,o.text,u,l.length>0?d:void 0,r);if(e("received response from rename input field"),l.length>0&&this._reportTelemetry(l.length,a.getLanguageId(),h),typeof h=="boolean"){e(`returning early - rename input field response - ${h}`),h&&this.editor.focus(),r.dispose();return}this.editor.focus(),e("requesting rename edits");const f=xI(i.provideRenameEdits(h.newName,r.token),r.token).then(async b=>{if(!b){e("returning early - no rename edits result");return}if(!this.editor.hasModel()){e("returning early - no model after rename edits are provided");return}if(b.rejectReason){e(`returning early - rejected with reason: ${b.rejectReason}`),this._notificationService.info(b.rejectReason);return}this.editor.setSelection(D.fromPositions(this.editor.getSelection().getPosition())),e("applying edits"),this._bulkEditService.apply(b,{editor:this.editor,showPreview:h.wantsPreview,label:_("label","Renaming '{0}' to '{1}'",o==null?void 0:o.text,h.newName),code:"undoredo.rename",quotableLabel:_("quotableLabel","Renaming {0} to {1}",o==null?void 0:o.text,h.newName),respectAutoSaveConfig:!0}).then(v=>{e("edits applied"),v.ariaSummary&&Oo(_("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",o.text,h.newName,v.ariaSummary))}).catch(v=>{e(`error when applying edits ${JSON.stringify(v,null,"	")}`),this._notificationService.error(_("rename.failedApply","Rename failed to apply edits")),this._logService.error(v)})},b=>{e("error when providing rename edits",JSON.stringify(b,null,"	")),this._notificationService.error(_("rename.failed","Rename failed to compute edits")),this._logService.error(b)}).finally(()=>{r.dispose()});return e("returning rename operation"),this._progressService.showWhile(f,250),f}acceptRenameInput(e){this._renameWidget.acceptInput(e)}cancelRenameInput(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}_reportTelemetry(e,t,i){const s=typeof i=="boolean"?{kind:"cancelled",languageId:t,nRenameSuggestionProviders:e}:{kind:"accepted",languageId:t,nRenameSuggestionProviders:e,source:i.stats.source.k,nRenameSuggestions:i.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:i.stats.timeBeforeFirstInputFieldEdit,wantsPreview:i.wantsPreview,nRenameSuggestionsInvocations:i.stats.nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:i.stats.hadAutomaticRenameSuggestionsInvocation};this._telemetryService.publicLog2("renameInvokedEvent",s)}},Lz=$b,$b.ID="editor.contrib.renameController",$b);rp=Lz=Eit([Kf(1,Ae),Kf(2,wn),Kf(3,RI),Kf(4,fp),Kf(5,Os),Kf(6,F4),Kf(7,xe),Kf(8,Zs)],rp);class Tit extends Ce{constructor(){super({id:"editor.action.rename",label:_("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:se.and(R.writable,R.hasRenameProvider),kbOpts:{kbExpr:R.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const i=e.get(Ut),[s,o]=Array.isArray(t)&&t||[void 0,void 0];return Be.isUri(s)&&U.isIPosition(o)?i.openCodeEditor({resource:s},i.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(o),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},et):super.runCommand(e,t)}run(e,t){const i=e.get(Os),s=rp.get(t);return s?(i.trace("[RenameAction] got controller, running..."),s.run()):(i.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}}Ot(rp.ID,rp,4);de(Tit);const AZ=Hn.bindToContribution(rp.get);_e(new AZ({id:"acceptRenameInput",precondition:G1,handler:n=>n.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:se.and(R.focus,se.not("isComposing")),primary:3}}));_e(new AZ({id:"acceptRenameInputWithPreview",precondition:se.and(G1,se.has("config.editor.rename.enablePreview")),handler:n=>n.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:se.and(R.focus,se.not("isComposing")),primary:2051}}));_e(new AZ({id:"cancelRenameInput",precondition:G1,handler:n=>n.cancelRenameInput(),kbOpts:{weight:199,kbExpr:R.focus,primary:9,secondary:[1033]}}));vi(class extends Bo{constructor(){super({id:"focusNextRenameSuggestion",title:{...Ze("focusNextRenameSuggestion","Focus Next Rename Suggestion")},precondition:G1,keybinding:[{primary:18,weight:199}]})}run(e){const t=e.get(Ut).getFocusedCodeEditor();if(!t)return;const i=rp.get(t);i&&i.focusNextRenameSuggestion()}});vi(class extends Bo{constructor(){super({id:"focusPreviousRenameSuggestion",title:{...Ze("focusPreviousRenameSuggestion","Focus Previous Rename Suggestion")},precondition:G1,keybinding:[{primary:16,weight:199}]})}run(e){const t=e.get(Ut).getFocusedCodeEditor();if(!t)return;const i=rp.get(t);i&&i.focusPreviousRenameSuggestion()}});ur("_executeDocumentRenameProvider",function(n,e,t,...i){const[s]=i;zt(typeof s=="string");const{renameProvider:o}=n.get(xe);return Dit(o,e,t,s)});ur("_executePrepareRename",async function(n,e,t){const{renameProvider:i}=n.get(xe),o=await new PZ(e,t,i).resolveRenameLocation(ht.None);if(o!=null&&o.rejectReason)throw new Error(o.rejectReason);return o});Zi.as(rc.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:_("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var Rit=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},xse=function(n,e){return function(t,i){e(t,i,n)}},iC;let FP=(iC=class extends G{constructor(e,t,i){super(),this.editor=e,this.languageConfigurationService=t,this.editorWorkerService=i,this.decorations=this.editor.createDecorationsCollection(),this.options=this.createOptions(e.getOption(73)),this.computePromise=null,this.currentOccurrences={},this._register(e.onDidChangeModel(s=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(e.onDidChangeModelLanguage(s=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(t.onDidChange(s=>{var r;const o=(r=this.editor.getModel())==null?void 0:r.getLanguageId();o&&s.affects(o)&&(this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(e.onDidChangeConfiguration(s=>{this.options&&!s.hasChanged(73)||(this.options=this.createOptions(e.getOption(73)),this.updateDecorations([]),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(this.editor.onDidChangeModelContent(s=>{this.computeSectionHeaders.schedule()})),this._register(e.onDidChangeModelTokens(s=>{this.computeSectionHeaders.isScheduled()||this.computeSectionHeaders.schedule(1e3)})),this.computeSectionHeaders=this._register(new li(()=>{this.findSectionHeaders()},250)),this.computeSectionHeaders.schedule(0)}createOptions(e){if(!e||!this.editor.hasModel())return;const t=this.editor.getModel().getLanguageId();if(!t)return;const i=this.languageConfigurationService.getLanguageConfiguration(t).comments,s=this.languageConfigurationService.getLanguageConfiguration(t).foldingRules;if(!(!i&&!(s!=null&&s.markers)))return{foldingRules:s,findMarkSectionHeaders:e.showMarkSectionHeaders,findRegionSectionHeaders:e.showRegionSectionHeaders}}findSectionHeaders(){var i,s;if(!this.editor.hasModel()||!((i=this.options)!=null&&i.findMarkSectionHeaders)&&!((s=this.options)!=null&&s.findRegionSectionHeaders))return;const e=this.editor.getModel();if(e.isDisposed()||e.isTooLargeForSyncing())return;const t=e.getVersionId();this.editorWorkerService.findSectionHeaders(e.uri,this.options).then(o=>{e.isDisposed()||e.getVersionId()!==t||this.updateDecorations(o)})}updateDecorations(e){const t=this.editor.getModel();t&&(e=e.filter(o=>{if(!o.shouldBeInComments)return!0;const r=t.validateRange(o.range),a=t.tokenization.getLineTokens(r.startLineNumber),l=a.findTokenIndexAtOffset(r.startColumn-1),c=a.getStandardTokenType(l);return a.getLanguageId(l)===t.getLanguageId()&&c===1}));const i=Object.values(this.currentOccurrences).map(o=>o.decorationId),s=e.map(o=>Mit(o));this.editor.changeDecorations(o=>{const r=o.deltaDecorations(i,s);this.currentOccurrences={};for(let a=0,l=r.length;a<l;a++){const c={sectionHeader:e[a],decorationId:r[a]};this.currentOccurrences[c.decorationId]=c}})}stop(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop(),this.decorations.clear()}},iC.ID="editor.sectionHeaderDetector",iC);FP=Rit([xse(1,Yi),xse(2,fr)],FP);function Mit(n){return{range:n.range,options:rt.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:n.hasSeparatorLine?2:1,sectionHeaderText:n.text}})}}Ot(FP.ID,FP,1);function Pit(n){for(let e=0,t=n.length;e<t;e+=4){const i=n[e+0],s=n[e+1],o=n[e+2],r=n[e+3];n[e+0]=r,n[e+1]=o,n[e+2]=s,n[e+3]=i}}function Ait(n){const e=new Uint8Array(n.buffer,n.byteOffset,n.length*4);return Sue()||Pit(e),P4.wrap(e)}function yve(n){const e=new Uint32Array(Oit(n));let t=0;if(e[t++]=n.id,n.type==="full")e[t++]=1,e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length;else{e[t++]=2,e[t++]=n.deltas.length;for(const i of n.deltas)e[t++]=i.start,e[t++]=i.deleteCount,i.data?(e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length):e[t++]=0}return Ait(e)}function Oit(n){let e=0;if(e+=2,n.type==="full")e+=1+n.data.length;else{e+=1,e+=3*n.deltas.length;for(const t of n.deltas)t.data&&(e+=t.data.length)}return e}function qF(n){return n&&!!n.data}function Cve(n){return n&&Array.isArray(n.edits)}class Fit{constructor(e,t,i){this.provider=e,this.tokens=t,this.error=i}}function Sve(n,e){return n.has(e)}function Bit(n,e){const t=n.orderedGroups(e);return t.length>0?t[0]:[]}async function xve(n,e,t,i,s){const o=Bit(n,e),r=await Promise.all(o.map(async a=>{let l,c=null;try{l=await a.provideDocumentSemanticTokens(e,a===t?i:null,s)}catch(d){c=d,l=null}return(!l||!qF(l)&&!Cve(l))&&(l=null),new Fit(a,l,c)}));for(const a of r){if(a.error)throw a.error;if(a.tokens)return a}return r.length>0?r[0]:null}function Wit(n,e){const t=n.orderedGroups(e);return t.length>0?t[0]:null}class Hit{constructor(e,t){this.provider=e,this.tokens=t}}function Vit(n,e){return n.has(e)}function Lve(n,e){const t=n.orderedGroups(e);return t.length>0?t[0]:[]}async function OZ(n,e,t,i){const s=Lve(n,e),o=await Promise.all(s.map(async r=>{let a;try{a=await r.provideDocumentRangeSemanticTokens(e,t,i)}catch(l){fn(l),a=null}return(!a||!qF(a))&&(a=null),new Hit(r,a)}));for(const r of o)if(r.tokens)return r;return o.length>0?o[0]:null}Mt.registerCommand("_provideDocumentSemanticTokensLegend",async(n,...e)=>{const[t]=e;zt(t instanceof Be);const i=n.get(Ei).getModel(t);if(!i)return;const{documentSemanticTokensProvider:s}=n.get(xe),o=Wit(s,i);return o?o[0].getLegend():n.get(Ci).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)});Mt.registerCommand("_provideDocumentSemanticTokens",async(n,...e)=>{const[t]=e;zt(t instanceof Be);const i=n.get(Ei).getModel(t);if(!i)return;const{documentSemanticTokensProvider:s}=n.get(xe);if(!Sve(s,i))return n.get(Ci).executeCommand("_provideDocumentRangeSemanticTokens",t,i.getFullModelRange());const o=await xve(s,i,null,null,ht.None);if(!o)return;const{provider:r,tokens:a}=o;if(!a||!qF(a))return;const l=yve({id:0,type:"full",data:a.data});return a.resultId&&r.releaseDocumentSemanticTokens(a.resultId),l});Mt.registerCommand("_provideDocumentRangeSemanticTokensLegend",async(n,...e)=>{const[t,i]=e;zt(t instanceof Be);const s=n.get(Ei).getModel(t);if(!s)return;const{documentRangeSemanticTokensProvider:o}=n.get(xe),r=Lve(o,s);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!i||!D.isIRange(i))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const a=await OZ(o,s,D.lift(i),ht.None);if(a)return a.provider.getLegend()});Mt.registerCommand("_provideDocumentRangeSemanticTokens",async(n,...e)=>{const[t,i]=e;zt(t instanceof Be),zt(D.isIRange(i));const s=n.get(Ei).getModel(t);if(!s)return;const{documentRangeSemanticTokensProvider:o}=n.get(xe),r=await OZ(o,s,D.lift(i),ht.None);if(!(!r||!r.tokens))return yve({id:0,type:"full",data:r.tokens.data})});const FZ="editor.semanticHighlighting";function tR(n,e,t){var s;const i=(s=t.getValue(FZ,{overrideIdentifier:n.getLanguageId(),resource:n.uri}))==null?void 0:s.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}var kve=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},eu=function(n,e){return function(t,i){e(t,i,n)}},Qf;let kz=class extends G{constructor(e,t,i,s,o,r){super(),this._watchers=Object.create(null);const a=d=>{this._watchers[d.uri.toString()]=new Nz(d,e,i,o,r)},l=(d,u)=>{u.dispose(),delete this._watchers[d.uri.toString()]},c=()=>{for(const d of t.getModels()){const u=this._watchers[d.uri.toString()];tR(d,i,s)?u||a(d):u&&l(d,u)}};t.getModels().forEach(d=>{tR(d,i,s)&&a(d)}),this._register(t.onModelAdded(d=>{tR(d,i,s)&&a(d)})),this._register(t.onModelRemoved(d=>{const u=this._watchers[d.uri.toString()];u&&l(d,u)})),this._register(s.onDidChangeConfiguration(d=>{d.affectsConfiguration(FZ)&&c()})),this._register(i.onDidColorThemeChange(c))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}};kz=kve([eu(0,W4),eu(1,Ei),eu(2,Vn),eu(3,_t),eu(4,Fa),eu(5,xe)],kz);var Em;let Nz=(Em=class extends G{constructor(e,t,i,s,o){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=o.documentSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentSemanticTokens",{min:Qf.REQUEST_MIN_DELAY,max:Qf.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new li(()=>this._fetchDocumentSemanticTokensNow(),Qf.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=()=>{gi(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))};r(),this._register(this._provider.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(i.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),gi(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!Sve(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;const e=new Gi,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,i=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,s=xve(this._provider,this._model,t,i,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;const o=[],r=this._model.onDidChangeContent(l=>{o.push(l)}),a=new ds(!1);s.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,o);else{const{provider:c,tokens:d}=l,u=this._semanticTokensStylingService.getStyling(c);this._setDocumentSemanticTokens(c,d||null,u,o)}},l=>{l&&(wl(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||et(l),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),(o.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,i,s,o){o=Math.min(o,i.length-s,e.length-t);for(let r=0;r<o;r++)i[s+r]=e[t+r]}_setDocumentSemanticTokens(e,t,i,s){const o=this._currentDocumentResponse,r=()=>{(s.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!i){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),r();return}if(Cve(t)){if(!o){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:o.data};else{let a=0;for(const h of t.edits)a+=(h.data?h.data.length:0)-h.deleteCount;const l=o.data,c=new Uint32Array(l.length+a);let d=l.length,u=c.length;for(let h=t.edits.length-1;h>=0;h--){const f=t.edits[h];if(f.start>l.length){i.warnInvalidEditStart(o.resultId,t.resultId,h,f.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}const m=d-(f.start+f.deleteCount);m>0&&(Qf._copy(l,d-m,c,u-m,m),u-=m),f.data&&(Qf._copy(f.data,0,c,u-f.data.length,f.data.length),u-=f.data.length),d=f.start}d>0&&Qf._copy(l,0,c,0,d),t={resultId:t.resultId,data:c}}}if(qF(t)){this._currentDocumentResponse=new jit(e,t.resultId,t.data);const a=gfe(t,i,this._model.getLanguageId());if(s.length>0)for(const l of s)for(const c of a)for(const d of l.changes)c.applyEdit(d.range,d.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);r()}},Qf=Em,Em.REQUEST_MIN_DELAY=300,Em.REQUEST_MAX_DELAY=2e3,Em);Nz=Qf=kve([eu(1,W4),eu(2,Vn),eu(3,Fa),eu(4,xe)],Nz);class jit{constructor(e,t,i){this.provider=e,this.resultId=t,this.data=i}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}H1(kz);var zit=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},WS=function(n,e){return function(t,i){e(t,i,n)}},nC;let BP=(nC=class extends G{constructor(e,t,i,s,o,r){super(),this._semanticTokensStylingService=t,this._themeService=i,this._configurationService=s,this._editor=e,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=o.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new li(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(FZ)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()})),a()}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,i=this._outstandingRequests.length;t<i;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!tR(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!Vit(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(i=>this._requestRange(e,i)))}_requestRange(e,t){const i=e.getVersionId(),s=Xn(r=>Promise.resolve(OZ(this._provider,e,t,r))),o=new ds(!1);return s.then(r=>{if(this._debounceInformation.update(e,o.elapsed()),!r||!r.tokens||e.isDisposed()||e.getVersionId()!==i)return;const{provider:a,tokens:l}=r,c=this._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,gfe(l,c,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(s),()=>this._removeOutstandingRequest(s)),s}},nC.ID="editor.contrib.viewportSemanticTokens",nC);BP=zit([WS(1,W4),WS(2,Vn),WS(3,_t),WS(4,Fa),WS(5,xe)],BP);Ot(BP.ID,BP,1);class Uit{constructor(e=!0){this.selectSubwords=e}provideSelectionRanges(e,t){const i=[];for(const s of t){const o=[];i.push(o),this.selectSubwords&&this._addInWordRanges(o,e,s),this._addWordRanges(o,e,s),this._addWhitespaceLine(o,e,s),o.push({range:e.getFullModelRange()})}return i}_addInWordRanges(e,t,i){const s=t.getWordAtPosition(i);if(!s)return;const{word:o,startColumn:r}=s,a=i.column-r;let l=a,c=a,d=0;for(;l>=0;l--){const u=o.charCodeAt(l);if(l!==a&&(u===95||u===45))break;if(Bg(u)&&Yd(d))break;d=u}for(l+=1;c<o.length;c++){const u=o.charCodeAt(c);if(Yd(u)&&Bg(d))break;if(u===95||u===45)break;d=u}l<c&&e.push({range:new D(i.lineNumber,r+l,i.lineNumber,r+c)})}_addWordRanges(e,t,i){const s=t.getWordAtPosition(i);s&&e.push({range:new D(i.lineNumber,s.startColumn,i.lineNumber,s.endColumn)})}_addWhitespaceLine(e,t,i){t.getLineLength(i.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(i.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(i.lineNumber)===0&&e.push({range:new D(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}}var $it=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Kit=function(n,e){return function(t,i){e(t,i,n)}},Iz;class BZ{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const i=new BZ(t,this.ranges);return i.ranges[t].equalsRange(this.ranges[this.index])?i.mov(e):i}}var Kb;let $N=(Kb=class{static get(e){return e.getContribution(Iz.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){var e;(e=this._selectionListener)==null||e.dispose()}async run(e){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),i=this._editor.getModel();if(this._state||await Ive(this._languageFeaturesService.selectionRangeProvider,i,t.map(o=>o.getPosition()),this._editor.getOption(114),ht.None).then(o=>{var r;if(!(!ho(o)||o.length!==t.length)&&!(!this._editor.hasModel()||!Vi(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<o.length;a++)o[a]=o[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),o[a].unshift(t[a]);this._state=o.map(a=>new BZ(0,a)),(r=this._selectionListener)==null||r.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)==null||a.dispose(),this._state=void 0)})}}),!this._state)return;this._state=this._state.map(o=>o.mov(e));const s=this._state.map(o=>Ie.fromPositions(o.ranges[o.index].getStartPosition(),o.ranges[o.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(s)}finally{this._ignoreSelection=!1}}},Iz=Kb,Kb.ID="editor.contrib.smartSelectController",Kb);$N=Iz=$it([Kit(1,xe)],$N);class Nve extends Ce{constructor(e,t){super(t),this._forward=e}async run(e,t){const i=$N.get(t);i&&await i.run(this._forward)}}class qit extends Nve{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:_("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:R.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"1_basic",title:_({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}Mt.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class Git extends Nve{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:_("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:R.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:Ne.MenubarSelectionMenu,group:"1_basic",title:_({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}Ot($N.ID,$N,4);de(qit);de(Git);async function Ive(n,e,t,i,s){const o=n.all(e).concat(new Uit(i.selectSubwords));o.length===1&&o.unshift(new CP);const r=[],a=[];for(const l of o)r.push(Promise.resolve(l.provideSelectionRanges(e,t,s)).then(c=>{if(ho(c)&&c.length===t.length)for(let d=0;d<t.length;d++){a[d]||(a[d]=[]);for(const u of c[d])D.isIRange(u.range)&&D.containsPosition(u.range,t[d])&&a[d].push(D.lift(u.range))}},fn));return await Promise.all(r),a.map(l=>{if(l.length===0)return[];l.sort((h,f)=>U.isBefore(h.getStartPosition(),f.getStartPosition())?1:U.isBefore(f.getStartPosition(),h.getStartPosition())||U.isBefore(h.getEndPosition(),f.getEndPosition())?-1:U.isBefore(f.getEndPosition(),h.getEndPosition())?1:0);const c=[];let d;for(const h of l)(!d||D.containsRange(h,d)&&!D.equalsRange(h,d))&&(c.push(h),d=h);if(!i.selectLeadingAndTrailingWhitespace)return c;const u=[c[0]];for(let h=1;h<c.length;h++){const f=c[h-1],m=c[h];if(m.startLineNumber!==f.startLineNumber||m.endLineNumber!==f.endLineNumber){const p=new D(f.startLineNumber,e.getLineFirstNonWhitespaceColumn(f.startLineNumber),f.endLineNumber,e.getLineLastNonWhitespaceColumn(f.endLineNumber));p.containsRange(f)&&!p.equalsRange(f)&&m.containsRange(p)&&!m.equalsRange(p)&&u.push(p);const b=new D(f.startLineNumber,1,f.endLineNumber,e.getLineMaxColumn(f.endLineNumber));b.containsRange(f)&&!b.equalsRange(p)&&m.containsRange(b)&&!m.equalsRange(b)&&u.push(b)}u.push(m)}return u})}Mt.registerCommand("_executeSelectionRangeProvider",async function(n,...e){const[t,i]=e;zt(Be.isUri(t));const s=n.get(xe).selectionRangeProvider,o=await n.get(dr).createModelReference(t);try{return Ive(s,o.object.textEditorModel,i,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},ht.None)}finally{o.dispose()}});const Zit=Object.freeze({View:Ze("view","View"),Help:Ze("help","Help"),Test:Ze("test","Test"),File:Ze("file","File"),Preferences:Ze("preferences","Preferences"),Developer:Ze({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});class fL{constructor(e,t,i,s=null){this.startLineNumbers=e,this.endLineNumbers=t,this.lastLineRelativePosition=i,this.showEndForLine=s}equals(e){return!!e&&this.lastLineRelativePosition===e.lastLineRelativePosition&&this.showEndForLine===e.showEndForLine&&Vi(this.startLineNumbers,e.startLineNumbers)&&Vi(this.endLineNumbers,e.endLineNumbers)}static get Empty(){return new fL([],[],0)}}const Lse=Ef("stickyScrollViewLayer",{createHTML:n=>n}),n7="data-sticky-line-index",kse="data-sticky-is-line",Yit="data-sticky-is-line-number",Nse="data-sticky-is-folding-icon";class Xit extends G{constructor(e){super(),this._editor=e,this._foldingIconStore=new ne,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(67),this._renderedStickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",e instanceof nc),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);const t=()=>{this._linesDomNode.style.left=this._editor.getOption(116).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"};this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(116)&&t(),i.hasChanged(67)&&(this._lineHeight=this._editor.getOption(67))})),this._register(this._editor.onDidScrollChange(i=>{i.scrollLeftChanged&&t(),i.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{t(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),t(),this._register(this._editor.onDidLayoutChange(i=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getRenderedStickyLine(e){return this._renderedStickyLines.find(t=>t.lineNumber===e)}getCurrentLines(){return this._lineNumbers}setState(e,t,i){if(i===void 0&&(!this._previousState&&!e||this._previousState&&this._previousState.equals(e)))return;const s=this._isWidgetHeightZero(e),o=s?void 0:e,r=s?0:this._findLineToRebuildWidgetFrom(e,i);this._renderRootNode(o,t,r),this._previousState=e}_isWidgetHeightZero(e){if(!e)return!0;const t=e.startLineNumbers.length*this._lineHeight+e.lastLineRelativePosition;if(t>0){this._lastLineRelativePosition=e.lastLineRelativePosition;const i=[...e.startLineNumbers];e.showEndForLine!==null&&(i[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]),this._lineNumbers=i}else this._lastLineRelativePosition=0,this._lineNumbers=[];return t===0}_findLineToRebuildWidgetFrom(e,t){if(!e||!this._previousState)return 0;if(t!==void 0)return t;const i=this._previousState,s=e.startLineNumbers.findIndex(o=>!i.startLineNumbers.includes(o));return s===-1?0:s}_updateWidgetWidth(){const e=this._editor.getLayoutInfo(),t=e.contentLeft;this._lineNumbersDomNode.style.width=`${t}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",`${this._editor.getScrollWidth()-e.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${e.width-e.verticalScrollbarWidth}px`}_clearStickyLinesFromLine(e){this._foldingIconStore.clear();for(let t=e;t<this._renderedStickyLines.length;t++){const i=this._renderedStickyLines[t];i.lineNumberDomNode.remove(),i.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,e),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(e){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${e?.5:0}s`)}_setFoldingIconsVisibility(e){for(const t of this._renderedStickyLines){const i=t.foldingIcon;i&&i.setVisible(e?!0:i.isCollapsed)}}async _renderRootNode(e,t,i){if(this._clearStickyLinesFromLine(i),!e)return;for(const a of this._renderedStickyLines)this._updateTopAndZIndexOfStickyLine(a);const s=this._editor.getLayoutInfo(),o=this._lineNumbers.slice(i);for(const[a,l]of o.entries()){const c=this._renderChildNode(a+i,l,t,s);c&&(this._linesDomNode.appendChild(c.lineDomNode),this._lineNumbersDomNode.appendChild(c.lineNumberDomNode),this._renderedStickyLines.push(c))}t&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));const r=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${r}px`,this._linesDomNodeScrollable.style.height=`${r}px`,this._rootDomNode.style.height=`${r}px`,this._rootDomNode.style.marginLeft="0px",this._minContentWidthInPx=Math.max(...this._renderedStickyLines.map(a=>a.scrollWidth))+s.verticalScrollbarWidth,this._editor.layoutOverlayWidget(this)}_setFoldingHoverListeners(){this._editor.getOption(111)==="mouseover"&&(this._foldingIconStore.add(Q(this._lineNumbersDomNode,fe.MOUSE_ENTER,()=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add(Q(this._lineNumbersDomNode,fe.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(e,t,i,s){const o=this._editor._getViewModel();if(!o)return;const r=o.coordinatesConverter.convertModelPositionToViewPosition(new U(t,1)).lineNumber,a=o.getViewLineRenderingData(r),l=this._editor.getOption(68);let c;try{c=Lo.filter(a.inlineDecorations,r,a.minColumn,a.maxColumn)}catch{c=[]}const d=new _p(!0,!0,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,0,a.tokens,c,a.tabSize,a.startVisibleColumn,1,1,1,500,"none",!0,!0,null),u=new N1(2e3),h=UI(d,u);let f;Lse?f=Lse.createHTML(u.build()):f=u.build();const m=document.createElement("span");m.setAttribute(n7,String(e)),m.setAttribute(kse,""),m.setAttribute("role","listitem"),m.tabIndex=0,m.className="sticky-line-content",m.classList.add(`stickyLine${t}`),m.style.lineHeight=`${this._lineHeight}px`,m.innerHTML=f;const p=document.createElement("span");p.setAttribute(n7,String(e)),p.setAttribute(Yit,""),p.className="sticky-line-number",p.style.lineHeight=`${this._lineHeight}px`;const b=s.contentLeft;p.style.width=`${b}px`;const v=document.createElement("span");l.renderType===1||l.renderType===3&&t%10===0?v.innerText=t.toString():l.renderType===2&&(v.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),v.className="sticky-line-number-inner",v.style.lineHeight=`${this._lineHeight}px`,v.style.width=`${s.lineNumbersWidth}px`,v.style.paddingLeft=`${s.lineNumbersLeft}px`,p.appendChild(v);const w=this._renderFoldingIconForLine(i,t);w&&p.appendChild(w.domNode),this._editor.applyFontInfo(m),this._editor.applyFontInfo(v),p.style.lineHeight=`${this._lineHeight}px`,m.style.lineHeight=`${this._lineHeight}px`,p.style.height=`${this._lineHeight}px`,m.style.height=`${this._lineHeight}px`;const y=new Qit(e,t,m,p,w,h.characterMapping,m.scrollWidth);return this._updateTopAndZIndexOfStickyLine(y)}_updateTopAndZIndexOfStickyLine(e){var d;const t=e.index,i=e.lineDomNode,s=e.lineNumberDomNode,o=t===this._lineNumbers.length-1,r="0",a="1";i.style.zIndex=o?r:a,s.style.zIndex=o?r:a;const l=`${t*this._lineHeight+this._lastLineRelativePosition+((d=e.foldingIcon)!=null&&d.isCollapsed?1:0)}px`,c=`${t*this._lineHeight}px`;return i.style.top=o?l:c,s.style.top=o?l:c,e}_renderFoldingIconForLine(e,t){const i=this._editor.getOption(111);if(!e||i==="never")return;const s=e.regions,o=s.findRange(t),r=s.getStartLineNumber(o);if(!(t===r))return;const l=s.isCollapsed(o),c=new Jit(l,r,s.getEndLineNumber(o),this._lineHeight);return c.setVisible(this._isOnGlyphMargin?!0:l||i==="always"),c.domNode.setAttribute(Nse,""),c}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:2,stackOridinal:10}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(e){0<=e&&e<this._renderedStickyLines.length&&this._renderedStickyLines[e].lineDomNode.focus()}getEditorPositionFromNode(e){if(!e||e.children.length>0)return null;const t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;const i=dG(t.characterMapping,e,0);return new U(t.lineNumber,i)}getLineNumberFromChildDomNode(e){var t;return((t=this._getRenderedStickyLineFromChildDomNode(e))==null?void 0:t.lineNumber)??null}_getRenderedStickyLineFromChildDomNode(e){const t=this.getLineIndexFromChildDomNode(e);return t===null||t<0||t>=this._renderedStickyLines.length?null:this._renderedStickyLines[t]}getLineIndexFromChildDomNode(e){const t=this._getAttributeValue(e,n7);return t?parseInt(t,10):null}isInStickyLine(e){return this._getAttributeValue(e,kse)!==void 0}isInFoldingIconDomNode(e){return this._getAttributeValue(e,Nse)!==void 0}_getAttributeValue(e,t){for(;e&&e!==this._rootDomNode;){const i=e.getAttribute(t);if(i!==null)return i;e=e.parentElement}}}class Qit{constructor(e,t,i,s,o,r,a){this.index=e,this.lineNumber=t,this.lineDomNode=i,this.lineNumberDomNode=s,this.foldingIcon=o,this.characterMapping=r,this.scrollWidth=a}}class Jit{constructor(e,t,i,s){this.isCollapsed=e,this.foldingStartLine=t,this.foldingEndLine=i,this.dimension=s,this.domNode=document.createElement("div"),this.domNode.style.width=`${s}px`,this.domNode.style.height=`${s}px`,this.domNode.className=Ke.asClassName(e?uP:dP)}setVisible(e){this.domNode.style.cursor=e?"pointer":"default",this.domNode.style.opacity=e?"1":"0"}}class gL{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}}class WP{constructor(e,t,i){this.range=e,this.children=t,this.parent=i}}class Eve{constructor(e,t,i,s){this.uri=e,this.version=t,this.element=i,this.outlineProviderId=s}}var GF=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},KN=function(n,e){return function(t,i){e(t,i,n)}},mL;(function(n){n.OUTLINE_MODEL="outlineModel",n.FOLDING_PROVIDER_MODEL="foldingProviderModel",n.INDENTATION_MODEL="indentationModel"})(mL||(mL={}));var Yg;(function(n){n[n.VALID=0]="VALID",n[n.INVALID=1]="INVALID",n[n.CANCELED=2]="CANCELED"})(Yg||(Yg={}));let Ez=class extends G{constructor(e,t,i,s){switch(super(),this._editor=e,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new hl(300)),this._updateOperation=this._register(new ne),this._editor.getOption(116).defaultModel){case mL.OUTLINE_MODEL:this._modelProviders.push(new Dz(this._editor,s));case mL.FOLDING_PROVIDER_MODEL:this._modelProviders.push(new Rz(this._editor,t,s));case mL.INDENTATION_MODEL:this._modelProviders.push(new Tz(this._editor,i));break}}dispose(){this._modelProviders.forEach(e=>e.dispose()),this._updateOperation.clear(),this._cancelModelPromise(),super.dispose()}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}async update(e){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),await this._updateScheduler.trigger(async()=>{for(const t of this._modelProviders){const{statusPromise:i,modelPromise:s}=t.computeStickyModel(e);this._modelPromise=s;const o=await i;if(this._modelPromise!==s)return null;switch(o){case Yg.CANCELED:return this._updateOperation.clear(),null;case Yg.VALID:return t.stickyModel}}return null}).catch(t=>(et(t),null))}};Ez=GF([KN(2,Ae),KN(3,xe)],Ez);class Dve extends G{constructor(e){super(),this._editor=e,this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,Yg.INVALID}computeStickyModel(e){if(e.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};const t=Xn(i=>this.createModelFromProvider(i));return{statusPromise:t.then(i=>this.isModelValid(i)?e.isCancellationRequested?Yg.CANCELED:(this._stickyModel=this.createStickyModel(e,i),Yg.VALID):this._invalid()).then(void 0,i=>(et(i),Yg.CANCELED)),modelPromise:t}}isModelValid(e){return!0}isProviderValid(){return!0}}let Dz=class extends Dve{constructor(e,t){super(e),this._languageFeaturesService=t}createModelFromProvider(e){return Sh.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),e)}createStickyModel(e,t){var r;const{stickyOutlineElement:i,providerID:s}=this._stickyModelFromOutlineModel(t,(r=this._stickyModel)==null?void 0:r.outlineProviderId),o=this._editor.getModel();return new Eve(o.uri,o.getVersionId(),i,s)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let i;if(Rt.first(e.children.values())instanceof Xbe){const a=Rt.find(e.children.values(),l=>l.id===t);if(a)i=a.children;else{let l="",c=-1,d;for(const[u,h]of e.children.entries()){const f=this._findSumOfRangesOfGroup(h);f>c&&(d=h,c=f,l=h.id)}t=l,i=d.children}}else i=e.children;const s=[],o=Array.from(i.values()).sort((a,l)=>{const c=new gL(a.symbol.range.startLineNumber,a.symbol.range.endLineNumber),d=new gL(l.symbol.range.startLineNumber,l.symbol.range.endLineNumber);return this._comparator(c,d)});for(const a of o)s.push(this._stickyModelFromOutlineElement(a,a.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new WP(void 0,s,void 0),providerID:t}}_stickyModelFromOutlineElement(e,t){const i=[];for(const o of e.children.values())if(o.symbol.selectionRange.startLineNumber!==o.symbol.range.endLineNumber)if(o.symbol.selectionRange.startLineNumber!==t)i.push(this._stickyModelFromOutlineElement(o,o.symbol.selectionRange.startLineNumber));else for(const r of o.children.values())i.push(this._stickyModelFromOutlineElement(r,o.symbol.selectionRange.startLineNumber));i.sort((o,r)=>this._comparator(o.range,r.range));const s=new gL(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new WP(s,i,void 0)}_comparator(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(const i of e.children.values())t+=this._findSumOfRangesOfGroup(i);return e instanceof vj?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}};Dz=GF([KN(1,xe)],Dz);class Tve extends Dve{constructor(e){super(e),this._foldingLimitReporter=new Gbe(e)}createStickyModel(e,t){const i=this._fromFoldingRegions(t),s=this._editor.getModel();return new Eve(s.uri,s.getVersionId(),i,void 0)}isModelValid(e){return e!==null}_fromFoldingRegions(e){const t=e.length,i=[],s=new WP(void 0,[],void 0);for(let o=0;o<t;o++){const r=e.getParentIndex(o);let a;r!==-1?a=i[r]:a=s;const l=new WP(new gL(e.getStartLineNumber(o),e.getEndLineNumber(o)+1),[],a);a.children.push(l),i.push(l)}return s}}let Tz=class extends Tve{constructor(e,t){super(e),this._languageConfigurationService=t,this.provider=this._register(new SZ(e.getModel(),this._languageConfigurationService,this._foldingLimitReporter))}async createModelFromProvider(e){return this.provider.compute(e)}};Tz=GF([KN(1,Yi)],Tz);let Rz=class extends Tve{constructor(e,t,i){super(e),this._languageFeaturesService=i;const s=op.getFoldingRangeProviders(this._languageFeaturesService,e.getModel());s.length>0&&(this.provider=this._register(new xZ(e.getModel(),s,t,this._foldingLimitReporter,void 0)))}isProviderValid(){return this.provider!==void 0}async createModelFromProvider(e){var t;return((t=this.provider)==null?void 0:t.compute(e))??null}};Rz=GF([KN(2,xe)],Rz);var ent=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ise=function(n,e){return function(t,i){e(t,i,n)}};class tnt{constructor(e,t,i){this.startLineNumber=e,this.endLineNumber=t,this.nestingDepth=i}}let Mz=class extends G{constructor(e,t,i){super(),this._languageFeaturesService=t,this._languageConfigurationService=i,this._onDidChangeStickyScroll=this._register(new $),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=this._register(new ne),this._updateSoon=this._register(new li(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(116)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._sessionStore.clear(),this._editor.getOption(116).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this.updateStickyModelProvider(),this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this._sessionStore.add(Pe(()=>{var t;(t=this._stickyModelProvider)==null||t.dispose(),this._stickyModelProvider=null})),this.updateStickyModelProvider(),this.update())}getVersionId(){var e;return(e=this._model)==null?void 0:e.version}updateStickyModelProvider(){var t;(t=this._stickyModelProvider)==null||t.dispose(),this._stickyModelProvider=null;const e=this._editor;e.hasModel()&&(this._stickyModelProvider=new Ez(e,()=>this._updateSoon.schedule(),this._languageConfigurationService,this._languageFeaturesService))}async update(){var e;(e=this._cts)==null||e.dispose(!0),this._cts=new Gi,await this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()}async updateStickyModel(e){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization()){this._model=null;return}const t=await this._stickyModelProvider.update(e);e.isCancellationRequested||(this._model=t)}updateIndex(e){return e===-1?e=0:e<0&&(e=-e-2),e}getCandidateStickyLinesIntersectingFromStickyModel(e,t,i,s,o){if(t.children.length===0)return;let r=o;const a=[];for(let d=0;d<t.children.length;d++){const u=t.children[d];u.range&&a.push(u.range.startLineNumber)}const l=this.updateIndex(bk(a,e.startLineNumber,(d,u)=>d-u)),c=this.updateIndex(bk(a,e.startLineNumber+s,(d,u)=>d-u));for(let d=l;d<=c;d++){const u=t.children[d];if(!u)return;if(u.range){const h=u.range.startLineNumber,f=u.range.endLineNumber;e.startLineNumber<=f+1&&h-1<=e.endLineNumber&&h!==r&&(r=h,i.push(new tnt(h,f-1,s+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,u,i,s+1,h))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,u,i,s,o)}}getCandidateStickyLinesIntersecting(e){var s,o;if(!((s=this._model)!=null&&s.element))return[];let t=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,t,0,-1);const i=(o=this._editor._getViewModel())==null?void 0:o.getHiddenAreas();if(i)for(const r of i)t=t.filter(a=>!(a.startLineNumber>=r.startLineNumber&&a.endLineNumber<=r.endLineNumber+1));return t}};Mz=ent([Ise(1,xe),Ise(2,Yi)],Mz);var int=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},F0=function(n,e){return function(t,i){e(t,i,n)}},Pz,qb;let kf=(qb=class extends G{constructor(e,t,i,s,o,r,a){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=i,this._instaService=s,this._contextKeyService=a,this._sessionStore=new ne,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._stickyScrollWidget=new Xit(this._editor),this._stickyLineCandidateProvider=new Mz(this._editor,i,o),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=fL.Empty,this._onDidResize(),this._readConfiguration();const l=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration(d=>{this._readConfigurationChange(d)})),this._register(Q(l,fe.CONTEXT_MENU,async d=>{this._onContextMenu(je(l),d)})),this._stickyScrollFocusedContextKey=R.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=R.stickyScrollVisible.bindTo(this._contextKeyService);const c=this._register(ld(l));this._register(c.onDidBlur(d=>{this._positionRevealed===!1&&l.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(c.onDidFocus(d=>{this.focus()})),this._registerMouseListeners(),this._register(Q(l,fe.MOUSE_DOWN,d=>{this._onMouseDown=!0}))}static get(e){return e.getContribution(Pz.ID)}_disposeFocusStickyScrollStore(){var e;this._stickyScrollFocusedContextKey.set(!1),(e=this._focusDisposableStore)==null||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new ne,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){const e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._reveaInEditor(e,()=>this._editor.revealPosition(e))}_revealLineInCenterIfOutsideViewport(e){this._reveaInEditor(e,()=>this._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0))}_reveaInEditor(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(D.fromPositions(e)),this._editor.focus()}_registerMouseListeners(){const e=this._register(new ne),t=this._register(new FF(this._editor,{extractLineNumberFromMouseEvent:o=>{const r=this._stickyScrollWidget.getEditorPositionFromNode(o.target.element);return r?r.lineNumber:0}})),i=o=>{if(!this._editor.hasModel()||o.target.type!==12||o.target.detail!==this._stickyScrollWidget.getId())return null;const r=o.target.element;if(!r||r.innerText!==r.innerHTML)return null;const a=this._stickyScrollWidget.getEditorPositionFromNode(r);return a?{range:new D(a.lineNumber,a.column,a.lineNumber,a.column+r.innerText.length),textElement:r}:null},s=this._stickyScrollWidget.getDomNode();this._register(Ji(s,fe.CLICK,o=>{if(o.ctrlKey||o.altKey||o.metaKey||!o.leftButton)return;if(o.shiftKey){const c=this._stickyScrollWidget.getLineIndexFromChildDomNode(o.target);if(c===null)return;const d=new U(this._endLineNumbers[c],1);this._revealLineInCenterIfOutsideViewport(d);return}if(this._stickyScrollWidget.isInFoldingIconDomNode(o.target)){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(o.target);this._toggleFoldingRegionForLine(c);return}if(!this._stickyScrollWidget.isInStickyLine(o.target))return;let l=this._stickyScrollWidget.getEditorPositionFromNode(o.target);if(!l){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(o.target);if(c===null)return;l=new U(c,1)}this._revealPosition(l)})),this._register(Ji(s,fe.MOUSE_MOVE,o=>{if(o.shiftKey){const r=this._stickyScrollWidget.getLineIndexFromChildDomNode(o.target);if(r===null||this._showEndForLine!==null&&this._showEndForLine===r)return;this._showEndForLine=r,this._renderStickyScroll();return}this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(Q(s,fe.MOUSE_LEAVE,o=>{this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(t.onMouseMoveOrRelevantKeyDown(([o,r])=>{const a=i(o);if(!a||!o.hasTriggerModifier||!this._editor.hasModel()){e.clear();return}const{range:l,textElement:c}=a;if(!l.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=l,e.clear();else if(c.style.textDecoration==="underline")return;const d=new Gi;e.add(Pe(()=>d.dispose(!0)));let u;eE(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new U(l.startLineNumber,l.startColumn+1),!1,d.token).then(h=>{if(!d.token.isCancellationRequested)if(h.length!==0){this._candidateDefinitionsLength=h.length;const f=c;u!==f?(e.clear(),u=f,u.style.textDecoration="underline",e.add(Pe(()=>{u.style.textDecoration="none"}))):u||(u=f,u.style.textDecoration="underline",e.add(Pe(()=>{u.style.textDecoration="none"})))}else e.clear()})})),this._register(t.onCancel(()=>{e.clear()})),this._register(t.onExecute(async o=>{if(o.target.type!==12||o.target.detail!==this._stickyScrollWidget.getId())return;const r=this._stickyScrollWidget.getEditorPositionFromNode(o.target.element);r&&(!this._editor.hasModel()||!this._stickyRangeProjectedOnEditor||(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:r.lineNumber,column:1})),this._instaService.invokeFunction(Tbe,o,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})))}))}_onContextMenu(e,t){const i=new Vl(e,t);this._contextMenuService.showContextMenu({menuId:Ne.StickyScrollContext,getAnchor:()=>i})}_toggleFoldingRegionForLine(e){if(!this._foldingModel||e===null)return;const t=this._stickyScrollWidget.getRenderedStickyLine(e),i=t==null?void 0:t.foldingIcon;if(!i)return;wZ(this._foldingModel,Number.MAX_VALUE,[e]),i.isCollapsed=!i.isCollapsed;const s=(i.isCollapsed?this._editor.getTopForLineNumber(i.foldingEndLine):this._editor.getTopForLineNumber(i.foldingStartLine))-this._editor.getOption(67)*t.index+1;this._editor.setScrollTop(s),this._renderStickyScroll(e)}_readConfiguration(){const e=this._editor.getOption(116);if(e.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}else e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(i=>this._onTokensChange(i))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=void 0,this._renderStickyScroll()})),this._enabled=!0);this._editor.getOption(68).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=void 0,this._renderStickyScroll(0)}))}_readConfigurationChange(e){(e.hasChanged(116)||e.hasChanged(73)||e.hasChanged(67)||e.hasChanged(111)||e.hasChanged(68))&&this._readConfiguration(),e.hasChanged(68)&&this._renderStickyScroll(0)}_needsUpdate(e){const t=this._stickyScrollWidget.getCurrentLines();for(const i of t)for(const s of e.ranges)if(i>=s.fromLineNumber&&i<=s.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll(0)}_onDidResize(){const t=this._editor.getLayoutInfo().height/this._editor.getOption(67);this._maxStickyLines=Math.round(t*.25)}async _renderStickyScroll(e){const t=this._editor.getModel();if(!t||t.isTooLargeForTokenization()){this._resetState();return}const i=this._updateAndGetMinRebuildFromLine(e),s=this._stickyLineCandidateProvider.getVersionId();if(s===void 0||s===t.getVersionId())if(!this._focused)await this._updateState(i);else if(this._focusedStickyElementIndex===-1)await this._updateState(i),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{const r=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];await this._updateState(i),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(r)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}}_updateAndGetMinRebuildFromLine(e){if(e!==void 0){const t=this._minRebuildFromLine!==void 0?this._minRebuildFromLine:1/0;this._minRebuildFromLine=Math.min(e,t)}return this._minRebuildFromLine}async _updateState(e){var i;this._minRebuildFromLine=void 0,this._foldingModel=await((i=op.get(this._editor))==null?void 0:i.getFoldingModel())??void 0,this._widgetState=this.findScrollWidgetState();const t=this._widgetState.startLineNumbers.length>0;this._stickyScrollVisibleContextKey.set(t),this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e)}async _resetState(){this._minRebuildFromLine=void 0,this._foldingModel=void 0,this._widgetState=fL.Empty,this._stickyScrollVisibleContextKey.set(!1),this._stickyScrollWidget.setState(void 0,void 0)}findScrollWidgetState(){const e=this._editor.getOption(67),t=Math.min(this._maxStickyLines,this._editor.getOption(116).maxLineCount),i=this._editor.getScrollTop();let s=0;const o=[],r=[],a=this._editor.getVisibleRanges();if(a.length!==0){const l=new gL(a[0].startLineNumber,a[a.length-1].endLineNumber),c=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(l);for(const d of c){const u=d.startLineNumber,h=d.endLineNumber,f=d.nestingDepth;if(h-u>0){const m=(f-1)*e,p=f*e,b=this._editor.getBottomForLineNumber(u)-i,v=this._editor.getTopForLineNumber(h)-i,w=this._editor.getBottomForLineNumber(h)-i;if(m>v&&m<=w){o.push(u),r.push(h+1),s=w-p;break}else p>b&&p<=w&&(o.push(u),r.push(h+1));if(o.length===t)break}}}return this._endLineNumbers=r,new fL(o,r,s,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}},Pz=qb,qb.ID="store.contrib.stickyScrollController",qb);kf=Pz=int([F0(1,Zr),F0(2,xe),F0(3,Ae),F0(4,Yi),F0(5,Fa),F0(6,qe)],kf);class nnt extends Bo{constructor(){super({id:"editor.action.toggleStickyScroll",title:{...Ze("toggleEditorStickyScroll","Toggle Editor Sticky Scroll"),mnemonicTitle:_({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Editor Sticky Scroll")},metadata:{description:Ze("toggleEditorStickyScroll.description","Toggle/enable the editor sticky scroll which shows the nested scopes at the top of the viewport")},category:Zit.View,toggled:{condition:se.equals("config.editor.stickyScroll.enabled",!0),title:_("stickyScroll","Sticky Scroll"),mnemonicTitle:_({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:Ne.CommandPalette},{id:Ne.MenubarAppearanceMenu,group:"4_editor",order:3},{id:Ne.StickyScrollContext}]})}async run(e){const t=e.get(_t),i=!t.getValue("editor.stickyScroll.enabled");return t.updateValue("editor.stickyScroll.enabled",i)}}const ZF=100;class snt extends pd{constructor(){super({id:"editor.action.focusStickyScroll",title:{...Ze("focusStickyScroll","Focus on the editor sticky scroll"),mnemonicTitle:_({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll")},precondition:se.and(se.has("config.editor.stickyScroll.enabled"),R.stickyScrollVisible),menu:[{id:Ne.CommandPalette}]})}runEditorCommand(e,t){var i;(i=kf.get(t))==null||i.focus()}}class ont extends pd{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:Ze("selectNextStickyScrollLine.title","Select the next editor sticky scroll line"),precondition:R.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:ZF,primary:18}})}runEditorCommand(e,t){var i;(i=kf.get(t))==null||i.focusNext()}}class rnt extends pd{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:Ze("selectPreviousStickyScrollLine.title","Select the previous sticky scroll line"),precondition:R.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:ZF,primary:16}})}runEditorCommand(e,t){var i;(i=kf.get(t))==null||i.focusPrevious()}}class ant extends pd{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:Ze("goToFocusedStickyScrollLine.title","Go to the focused sticky scroll line"),precondition:R.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:ZF,primary:3}})}runEditorCommand(e,t){var i;(i=kf.get(t))==null||i.goToFocused()}}class lnt extends pd{constructor(){super({id:"editor.action.selectEditor",title:Ze("selectEditor.title","Select Editor"),precondition:R.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:ZF,primary:9}})}runEditorCommand(e,t){var i;(i=kf.get(t))==null||i.selectEditor()}}Ot(kf.ID,kf,1);vi(nnt);vi(snt);vi(rnt);vi(ont);vi(ant);vi(lnt);var Rve=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},mx=function(n,e){return function(t,i){e(t,i,n)}};class cnt{constructor(e,t,i,s,o,r){this.range=e,this.insertText=t,this.filterText=i,this.additionalTextEdits=s,this.command=o,this.completion=r}}let Az=class extends $Te{constructor(e,t,i,s,o,r){super(o.disposable),this.model=e,this.line=t,this.word=i,this.completionModel=s,this._suggestMemoryService=r}canBeReused(e,t,i){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){const e=[],{items:t}=this.completionModel,i=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},t),s=Rt.slice(t,i),o=Rt.slice(t,0,i);let r=5;for(const a of Rt.concat(s,o)){if(a.score===ed.Default)continue;const l=new D(a.editStart.lineNumber,a.editStart.column,a.editInsertEnd.lineNumber,a.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),c=a.completion.insertTextRules&&a.completion.insertTextRules&4?{snippet:a.completion.insertText}:a.completion.insertText;e.push(new cnt(l,c,a.filterTextLow??a.labelLow,a.completion.additionalTextEdits,a.completion.command,a)),r-->=0&&a.resolve(ht.None)}return e}};Az=Rve([mx(5,UF)],Az);let Oz=class extends G{constructor(e,t,i,s){super(),this._languageFeatureService=e,this._clipboardService=t,this._suggestMemoryService=i,this._editorService=s,this._store.add(e.inlineCompletionsProvider.register("*",this))}async provideInlineCompletions(e,t,i,s){var f;if(i.selectedSuggestionInfo)return;let o;for(const m of this._editorService.listCodeEditors())if(m.getModel()===e){o=m;break}if(!o)return;const r=o.getOption(90);if(Ew.isAllOff(r))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const a=e.tokenization.getLineTokens(t.lineNumber),l=a.getStandardTokenType(a.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(Ew.valueFor(r,l)!=="inline")return;let c=e.getWordAtPosition(t),d;if(c!=null&&c.word||(d=this._getTriggerCharacterInfo(e,t)),!(c!=null&&c.word)&&!d||(c||(c=e.getWordUntilPosition(t)),c.endColumn!==t.column))return;let u;const h=e.getValueInRange(new D(t.lineNumber,1,t.lineNumber,t.column));if(!d&&((f=this._lastResult)!=null&&f.canBeReused(e,t.lineNumber,c))){const m=new fse(h,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=m,this._lastResult.acquire(),u=this._lastResult}else{const m=await LZ(this._languageFeatureService.completionProvider,e,t,new FN(void 0,xP.createSuggestFilter(o).itemKind,d==null?void 0:d.providers),d&&{triggerKind:1,triggerCharacter:d.ch},s);let p;m.needsClipboard&&(p=await this._clipboardService.readText());const b=new _g(m.items,t.column,new fse(h,0),SP.None,o.getOption(119),o.getOption(113),{boostFullMatch:!1,firstMatchCanBeWeak:!1},p);u=new Az(e,t.lineNumber,c,b,m,this._suggestMemoryService)}return this._lastResult=u,u}handleItemDidShow(e,t){t.completion.resolve(ht.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var o;const i=e.getValueInRange(D.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set;for(const r of this._languageFeatureService.completionProvider.all(e))(o=r.triggerCharacters)!=null&&o.includes(i)&&s.add(r);if(s.size!==0)return{providers:s,ch:i}}};Oz=Rve([mx(0,xe),mx(1,Mf),mx(2,UF),mx(3,Ut)],Oz);H1(Oz);class dnt extends Ce{constructor(){super({id:"editor.action.forceRetokenize",label:_("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getModel();i.tokenization.resetTokenization();const s=new ds;i.tokenization.forceTokenization(i.getLineCount()),s.stop(),console.log(`tokenization took ${s.elapsed()}`)}}de(dnt);const wO=class wO extends Bo{constructor(){super({id:wO.ID,title:Ze({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},metadata:{description:Ze("tabMovesFocusDescriptions","Determines whether the tab key moves focus around the workbench or inserts the tab character in the current editor. This is also called tab trapping, tab navigation, or tab focus mode.")},f1:!0})}run(){const t=!jC.getTabFocusMode();jC.setTabFocusMode(t),Oo(t?_("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):_("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}};wO.ID="editor.action.toggleTabFocusMode";let Fz=wO;vi(Fz);var unt=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ese=function(n,e){return function(t,i){e(t,i,n)}};let Bz=class extends G{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,i={},s,o){super(),this._link=t,this._hoverService=s,this._enabled=!0,this.el=ae(e,ge("a.monaco-link",{tabIndex:t.tabIndex??0,href:t.href},t.label)),this.hoverDelegate=i.hoverDelegate??Wo("mouse"),this.setTooltip(t.title),this.el.setAttribute("role","button");const r=this._register(new It(this.el,"click")),a=this._register(new It(this.el,"keypress")),l=pe.chain(a.event,u=>u.map(h=>new _i(h)).filter(h=>h.keyCode===3)),c=this._register(new It(this.el,yi.Tap)).event;this._register(qs.addTarget(this.el));const d=pe.any(r.event,l,c);this._register(d(u=>{this.enabled&&(Dt.stop(u,!0),i!=null&&i.opener?i.opener(this._link.href):o.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}setTooltip(e){this.hoverDelegate.showNativeHover?this.el.title=e??"":!this.hover&&e?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,e)):this.hover&&this.hover.update(e)}};Bz=unt([Ese(3,ju),Ese(4,hr)],Bz);var Mve=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Pve=function(n,e){return function(t,i){e(t,i,n)}};const hnt=26;let Wz=class extends G{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(Hz))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show({...e,onClose:()=>{var t;this.hide(),(t=e.onClose)==null||t.call(e)}}),this._editor.setBanner(this.banner.element,hnt)}};Wz=Mve([Pve(1,Ae)],Wz);let Hz=class extends G{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(wf,{}),this.element=ge("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=ge("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){ws(this.element)}show(e){ws(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const i=ae(this.element,ge("div.icon-container"));i.setAttribute("aria-hidden","true"),e.icon&&i.appendChild(ge(`div${Ke.asCSSSelector(e.icon)}`));const s=ae(this.element,ge("div.message-container"));if(s.setAttribute("aria-hidden","true"),s.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=ae(this.element,ge("div.message-actions-container")),e.actions)for(const r of e.actions)this._register(this.instantiationService.createInstance(Bz,this.messageActionsContainer,{...r,tabIndex:-1},{}));const o=ae(this.element,ge("div.action-container"));this.actionBar=this._register(new Ea(o)),this.actionBar.push(this._register(new Or("banner.close","Close Banner",Ke.asClassName(qme),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};Hz=Mve([Pve(0,Ae)],Hz);var WZ=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Py=function(n,e){return function(t,i){e(t,i,n)}};const fnt=Di("extensions-warning-message",he.warning,_("warningIcon","Icon shown with a warning message in the extensions editor."));var sC;let qN=(sC=class extends G{constructor(e,t,i,s){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=i,this._highlighter=null,this._bannerClosed=!1,this._updateState=o=>{if(o&&o.hasMore){if(this._bannerClosed)return;const r=Math.max(o.ambiguousCharacterCount,o.nonBasicAsciiCharacterCount,o.invisibleCharacterCount);let a;if(o.nonBasicAsciiCharacterCount>=r)a={message:_("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new ZN};else if(o.ambiguousCharacterCount>=r)a={message:_("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new Bv};else if(o.invisibleCharacterCount>=r)a={message:_("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new GN};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:fnt,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(s.createInstance(Wz,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(126),this._register(i.onDidChangeTrust(o=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(o=>{o.hasChanged(126)&&(this._options=e.getOption(126),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=gnt(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(i=>i===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(i=>i.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(i=>i==="_os"?new Intl.NumberFormat().resolvedOptions().locale:i==="_vscode"?zDe:i)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new Vz(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new mnt(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}},sC.ID="editor.contrib.unicodeHighlighter",sC);qN=WZ([Py(1,fr),Py(2,cge),Py(3,Ae)],qN);function gnt(n,e){return{nonBasicASCII:e.nonBasicASCII===sa?!n:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===sa?!n:e.includeComments,includeStrings:e.includeStrings===sa?!n:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}let Vz=class extends G{constructor(e,t,i,s){super(),this._editor=e,this._options=t,this._updateState=i,this._editorWorkerService=s,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new li(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const i=[];if(!t.hasMore)for(const s of t.ranges)i.push({range:s,options:HP.instance.getDecorationFromOptions(this._options)});this._decorations.set(i)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!LG(t,e))return null;const i=t.getValueInRange(e.range);return{reason:Ove(i,this._options),inComment:kG(t,e),inString:NG(t,e)}}};Vz=WZ([Py(3,fr)],Vz);class mnt extends G{constructor(e,t,i){super(),this._editor=e,this._options=t,this._updateState=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new li(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],i={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const s of e){const o=BK.computeUnicodeHighlights(this._model,this._options,s);for(const r of o.ranges)i.ranges.push(r);i.ambiguousCharacterCount+=i.ambiguousCharacterCount,i.invisibleCharacterCount+=i.invisibleCharacterCount,i.nonBasicAsciiCharacterCount+=i.nonBasicAsciiCharacterCount,i.hasMore=i.hasMore||o.hasMore}if(!i.hasMore)for(const s of i.ranges)t.push({range:s,options:HP.instance.getDecorationFromOptions(this._options)});this._updateState(i),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),i=t.getValueInRange(e.range);return LG(t,e)?{reason:Ove(i,this._options),inComment:kG(t,e),inString:NG(t,e)}:null}}const Ave=_("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options");let jz=class{constructor(e,t,i){this._editor=e,this._languageService=t,this._openerService=i,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),s=this._editor.getContribution(qN.ID);if(!s)return[];const o=[],r=new Set;let a=300;for(const l of t){const c=s.getDecorationInfo(l);if(!c)continue;const u=i.getValueInRange(l.range).codePointAt(0),h=s7(u);let f;switch(c.reason.kind){case 0:{CI(c.reason.confusableWith)?f=_("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",h,s7(c.reason.confusableWith.codePointAt(0))):f=_("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",h,s7(c.reason.confusableWith.codePointAt(0)));break}case 1:f=_("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",h);break;case 2:f=_("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",h);break}if(r.has(f))continue;r.add(f);const m={codePoint:u,reason:c.reason,inComment:c.inComment,inString:c.inString},p=_("unicodeHighlight.adjustSettings","Adjust settings"),b=`command:${VP.ID}?${encodeURIComponent(JSON.stringify(m))}`,v=new Us("",!0).appendMarkdown(f).appendText(" ").appendLink(b,p,Ave);o.push(new Wl(this,l.range,[v],!1,a++))}return o}renderHoverParts(e,t){return VZe(e,t,this._editor,this._languageService,this._openerService)}};jz=WZ([Py(1,ji),Py(2,hr)],jz);function zz(n){return`U+${n.toString(16).padStart(4,"0")}`}function s7(n){let e=`\`${zz(n)}\``;return j_.isInvisibleCharacter(n)||(e+=` "${`${pnt(n)}`}"`),e}function pnt(n){return n===96?"`` ` ``":"`"+String.fromCodePoint(n)+"`"}function Ove(n,e){return BK.computeUnicodeHighlightReason(n,e)}const yO=class yO{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const i=`${e}${t}`;let s=this.map.get(i);return s||(s=rt.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(i,s)),s}};yO.instance=new yO;let HP=yO;class _nt extends Ce{constructor(){super({id:Bv.ID,label:_("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=_("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}async run(e,t,i){const s=e==null?void 0:e.get(_t);s&&this.runAction(s)}async runAction(e){await e.updateValue(Yo.includeComments,!1,2)}}class bnt extends Ce{constructor(){super({id:Bv.ID,label:_("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=_("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}async run(e,t,i){const s=e==null?void 0:e.get(_t);s&&this.runAction(s)}async runAction(e){await e.updateValue(Yo.includeStrings,!1,2)}}const CO=class CO extends Ce{constructor(){super({id:CO.ID,label:_("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=_("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}async run(e,t,i){const s=e==null?void 0:e.get(_t);s&&this.runAction(s)}async runAction(e){await e.updateValue(Yo.ambiguousCharacters,!1,2)}};CO.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";let Bv=CO;const SO=class SO extends Ce{constructor(){super({id:SO.ID,label:_("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=_("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}async run(e,t,i){const s=e==null?void 0:e.get(_t);s&&this.runAction(s)}async runAction(e){await e.updateValue(Yo.invisibleCharacters,!1,2)}};SO.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";let GN=SO;const xO=class xO extends Ce{constructor(){super({id:xO.ID,label:_("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=_("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}async run(e,t,i){const s=e==null?void 0:e.get(_t);s&&this.runAction(s)}async runAction(e){await e.updateValue(Yo.nonBasicASCII,!1,2)}};xO.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";let ZN=xO;const LO=class LO extends Ce{constructor(){super({id:LO.ID,label:_("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}async run(e,t,i){const{codePoint:s,reason:o,inString:r,inComment:a}=i,l=String.fromCodePoint(s),c=e.get(Cl),d=e.get(_t);function u(m){return j_.isInvisibleCharacter(m)?_("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",zz(m)):_("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${zz(m)} "${l}"`)}const h=[];if(o.kind===0)for(const m of o.notAmbiguousInLocales)h.push({label:_("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',m),run:async()=>{wnt(d,[m])}});if(h.push({label:u(s),run:()=>vnt(d,[s])}),a){const m=new _nt;h.push({label:m.label,run:async()=>m.runAction(d)})}else if(r){const m=new bnt;h.push({label:m.label,run:async()=>m.runAction(d)})}if(o.kind===0){const m=new Bv;h.push({label:m.label,run:async()=>m.runAction(d)})}else if(o.kind===1){const m=new GN;h.push({label:m.label,run:async()=>m.runAction(d)})}else if(o.kind===2){const m=new ZN;h.push({label:m.label,run:async()=>m.runAction(d)})}else ynt(o);const f=await c.pick(h,{title:Ave});f&&await f.run()}};LO.ID="editor.action.unicodeHighlight.showExcludeOptions";let VP=LO;async function vnt(n,e){const t=n.getValue(Yo.allowedCharacters);let i;typeof t=="object"&&t?i=t:i={};for(const s of e)i[String.fromCodePoint(s)]=!0;await n.updateValue(Yo.allowedCharacters,i,2)}async function wnt(n,e){var s;const t=(s=n.inspect(Yo.allowedLocales).user)==null?void 0:s.value;let i;typeof t=="object"&&t?i=Object.assign({},t):i={};for(const o of e)i[o]=!0;await n.updateValue(Yo.allowedLocales,i,2)}function ynt(n){throw new Error(`Unexpected value: ${n}`)}de(Bv);de(GN);de(ZN);de(VP);Ot(qN.ID,qN,1);r0.register(jz);var Cnt=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Dse=function(n,e){return function(t,i){e(t,i,n)}};const Fve="ignoreUnusualLineTerminators";function Snt(n,e,t){n.setModelProperty(e.uri,Fve,t)}function xnt(n,e){return n.getModelProperty(e.uri,Fve)}var oC;let jP=(oC=class extends G{constructor(e,t,i){super(),this._editor=e,this._dialogService=t,this._codeEditorService=i,this._isPresentingDialog=!1,this._config=this._editor.getOption(127),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(127)&&(this._config=this._editor.getOption(127),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(s=>{s.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}async _checkForUnusualLineTerminators(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||xnt(this._codeEditorService,e)===!0||this._editor.getOption(92))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let i;try{this._isPresentingDialog=!0,i=await this._dialogService.confirm({title:_("unusualLineTerminators.title","Unusual Line Terminators"),message:_("unusualLineTerminators.message","Detected unusual line terminators"),detail:_("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",ml(e.uri)),primaryButton:_({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:_("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}if(!i.confirmed){Snt(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())}},oC.ID="editor.contrib.unusualLineTerminatorsDetector",oC);jP=Cnt([Dse(1,NI),Dse(2,Ut)],jP);Ot(jP.ID,jP,1);var Lnt=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},knt=function(n,e){return function(t,i){e(t,i,n)}};class Tse{constructor(){this.selector={language:"*"}}provideDocumentHighlights(e,t,i){const s=[],o=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});return o?e.isDisposed()?void 0:e.findMatches(o.word,!0,!1,!0,YR,!1).map(a=>({range:a.range,kind:yC.Text})):Promise.resolve(s)}provideMultiDocumentHighlights(e,t,i,s){const o=new cs,r=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});if(!r)return Promise.resolve(o);for(const a of[e,...i]){if(a.isDisposed())continue;const c=a.findMatches(r.word,!0,!1,!0,YR,!1).map(d=>({range:d.range,kind:yC.Text}));c&&o.set(a.uri,c)}return o}}let Uz=class extends G{constructor(e){super(),this._register(e.documentHighlightProvider.register("*",new Tse)),this._register(e.multiDocumentHighlightProvider.register("*",new Tse))}};Uz=Lnt([knt(0,xe)],Uz);var Bve=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},iR=function(n,e){return function(t,i){e(t,i,n)}},pn,$z;const HZ=new we("hasWordHighlights",!1);function Wve(n,e,t,i){const s=n.ordered(e);return xK(s.map(o=>()=>Promise.resolve(o.provideDocumentHighlights(e,t,i)).then(void 0,fn)),o=>o!=null).then(o=>{if(o){const r=new cs;return r.set(e.uri,o),r}return new cs})}function Nnt(n,e,t,i,s,o){const r=n.ordered(e);return xK(r.map(a=>()=>{const l=o.filter(c=>Zhe(c)).filter(c=>qK(a.selector,c.uri,c.getLanguageId(),!0,void 0,void 0)>0);return Promise.resolve(a.provideMultiDocumentHighlights(e,t,l,s)).then(void 0,fn)}),a=>a!=null)}class Hve{constructor(e,t,i){this._model=e,this._selection=t,this._wordSeparators=i,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=Xn(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const i=e.getWordAtPosition(t.getPosition());return i?new D(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):null}isValid(e,t,i){const s=t.startLineNumber,o=t.startColumn,r=t.endColumn,a=this._getCurrentWordRange(e,t);let l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,d=i.length;!l&&c<d;c++){const u=i.getRange(c);u&&u.startLineNumber===s&&u.startColumn<=o&&u.endColumn>=r&&(l=!0)}return l}cancel(){this.result.cancel()}}class Int extends Hve{constructor(e,t,i,s){super(e,t,i),this._providers=s}_compute(e,t,i,s){return Wve(this._providers,e,t.getPosition(),s).then(o=>o||new cs)}}class Ent extends Hve{constructor(e,t,i,s,o){super(e,t,i),this._providers=s,this._otherModels=o}_compute(e,t,i,s){return Nnt(this._providers,e,t.getPosition(),i,s,this._otherModels).then(o=>o||new cs)}}function Dnt(n,e,t,i,s){return new Int(e,t,s,n)}function Tnt(n,e,t,i,s,o){return new Ent(e,t,s,n,o)}ur("_executeDocumentHighlights",async(n,e,t)=>{const i=n.get(xe),s=await Wve(i.documentHighlightProvider,e,t,ht.None);return s==null?void 0:s.get(e.uri)});var Dm;let Kz=(Dm=class{constructor(e,t,i,s,o){this.toUnhook=new ne,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new cs,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.runDelayer=this.toUnhook.add(new hl(50)),this.editor=e,this.providers=t,this.multiDocumentProviders=i,this.codeEditorService=o,this._hasWordHighlights=HZ.bindTo(s),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(r=>{this._ignorePositionChangeEvent||this.occurrencesHighlight!=="off"&&this.runDelayer.trigger(()=>{this._onPositionChanged(r)})})),this.toUnhook.add(e.onDidFocusEditorText(r=>{this.occurrencesHighlight!=="off"&&(this.workerRequest||this.runDelayer.trigger(()=>{this._run()}))})),this.toUnhook.add(e.onDidChangeModelContent(r=>{_4(this.model.uri,"output")||this._stopAll()})),this.toUnhook.add(e.onDidChangeModel(r=>{!r.newModelUrl&&r.oldModelUrl?this._stopSingular():pn.query&&this._run()})),this.toUnhook.add(e.onDidChangeConfiguration(r=>{var l,c;const a=this.editor.getOption(81);if(this.occurrencesHighlight!==a)switch(this.occurrencesHighlight=a,a){case"off":this._stopAll();break;case"singleFile":this._stopAll((c=(l=pn.query)==null?void 0:l.modelInfo)==null?void 0:c.model);break;case"multiFile":pn.query&&this._run(!0);break;default:console.warn("Unknown occurrencesHighlight setting value:",a);break}})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,pn.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight!=="off"&&(this.runDelayer.cancel(),this._run())}_getSortedHighlights(){return this.decorations.getRanges().sort(D.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),i=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))+1)%e.length,s=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(s.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(s);const o=this._getWord();if(o){const r=this.editor.getModel().getLineContent(s.startLineNumber);Oo(`${r}, ${i+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),i=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,s=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(s.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(s);const o=this._getWord();if(o){const r=this.editor.getModel().getLineContent(s.startLineNumber);Oo(`${r}, ${i+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;const e=pn.storedDecorationIDs.get(this.editor.getModel().uri);e&&(this.editor.removeDecorations(e),pn.storedDecorationIDs.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(e){const t=this.codeEditorService.listCodeEditors(),i=[];for(const s of t){if(!s.hasModel()||qk(s.getModel().uri,e==null?void 0:e.uri))continue;const o=pn.storedDecorationIDs.get(s.getModel().uri);if(!o)continue;s.removeDecorations(o),i.push(s.getModel().uri);const r=ap.get(s);r!=null&&r.wordHighlighter&&r.wordHighlighter.decorations.length>0&&(r.wordHighlighter.decorations.clear(),r.wordHighlighter.workerRequest=null,r.wordHighlighter._hasWordHighlights.set(!1))}for(const s of i)pn.storedDecorationIDs.delete(s)}_stopSingular(){var e,t,i,s;this._removeSingleDecorations(),this.editor.hasTextFocus()&&(((e=this.editor.getModel())==null?void 0:e.uri.scheme)!==tt.vscodeNotebookCell&&((i=(t=pn.query)==null?void 0:t.modelInfo)==null?void 0:i.model.uri.scheme)!==tt.vscodeNotebookCell?(pn.query=null,this._run()):(s=pn.query)!=null&&s.modelInfo&&(pn.query.modelInfo=null)),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_stopAll(e){this._removeAllDecorations(e),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){var t;if(this.occurrencesHighlight==="off"){this._stopAll();return}if(e.reason!==3&&((t=this.editor.getModel())==null?void 0:t.uri.scheme)!==tt.vscodeNotebookCell){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,i=e.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:t,column:i})}getOtherModelsToHighlight(e){if(!e)return[];if(e.uri.scheme===tt.vscodeNotebookCell){const o=[],r=this.codeEditorService.listCodeEditors();for(const a of r){const l=a.getModel();l&&l!==e&&l.uri.scheme===tt.vscodeNotebookCell&&o.push(l)}return o}const i=[],s=this.codeEditorService.listCodeEditors();for(const o of s){if(!UG(o))continue;const r=o.getModel();r&&e===r.modified&&i.push(r.modified)}if(i.length)return i;if(this.occurrencesHighlight==="singleFile")return[];for(const o of s){const r=o.getModel();r&&r!==e&&i.push(r)}return i}_run(e){var s,o;let t;if(this.editor.hasTextFocus()){const r=this.editor.getSelection();if(!r||r.startLineNumber!==r.endLineNumber){pn.query=null,this._stopAll();return}const a=r.startColumn,l=r.endColumn,c=this._getWord();if(!c||c.startColumn>a||c.endColumn<l){pn.query=null,this._stopAll();return}t=this.workerRequest&&this.workerRequest.isValid(this.model,r,this.decorations),pn.query={modelInfo:{model:this.model,selection:r},word:c}}else if(!pn.query){this._stopAll();return}if(this.lastCursorPositionChangeTime=new Date().getTime(),t)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else if(qk(this.editor.getModel().uri,(s=pn.query.modelInfo)==null?void 0:s.model.uri)){if(!e){const l=this.decorations.getRanges();for(const c of l)if(c.containsPosition(this.editor.getPosition()))return}this._stopAll(e?this.model:void 0);const r=++this.workerRequestTokenId;this.workerRequestCompleted=!1;const a=this.getOtherModelsToHighlight(this.editor.getModel());if(!pn.query||!pn.query.modelInfo||pn.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(pn.query.modelInfo.model,pn.query.modelInfo.selection,pn.query.word,a),(o=this.workerRequest)==null||o.result.then(l=>{r===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=l||[],this._beginRenderDecorations())},et)}}computeWithModel(e,t,i,s){return s.length?Tnt(this.multiDocumentProviders,e,t,i,this.editor.getOption(132),s):Dnt(this.providers,e,t,i,this.editor.getOption(132))}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){var t,i,s;this.renderDecorationsTimer=-1;const e=this.codeEditorService.listCodeEditors();for(const o of e){const r=ap.get(o);if(!r)continue;const a=[],l=(t=o.getModel())==null?void 0:t.uri;if(l&&this.workerRequestValue.has(l)){const c=pn.storedDecorationIDs.get(l),d=this.workerRequestValue.get(l);if(d)for(const h of d)h.range&&a.push({range:h.range,options:vtt(h.kind)});let u=[];o.changeDecorations(h=>{u=h.deltaDecorations(c??[],a)}),pn.storedDecorationIDs=pn.storedDecorationIDs.set(l,u),a.length>0&&((i=r.wordHighlighter)==null||i.decorations.set(a),(s=r.wordHighlighter)==null||s._hasWordHighlights.set(!0))}}}dispose(){this._stopSingular(),this.toUnhook.dispose()}},pn=Dm,Dm.storedDecorationIDs=new cs,Dm.query=null,Dm);Kz=pn=Bve([iR(4,Ut)],Kz);var Gb;let ap=(Gb=class extends G{static get(e){return e.getContribution($z.ID)}constructor(e,t,i,s){super(),this._wordHighlighter=null;const o=()=>{e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&(this._wordHighlighter=new Kz(e,i.documentHighlightProvider,i.multiDocumentHighlightProvider,t,s))};this._register(e.onDidChangeModel(r=>{this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),o()})),o()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!!(this._wordHighlighter&&this._wordHighlighter.hasDecorations())}moveNext(){var e;(e=this._wordHighlighter)==null||e.moveNext()}moveBack(){var e;(e=this._wordHighlighter)==null||e.moveBack()}restoreViewState(e){this._wordHighlighter&&e&&this._wordHighlighter.restore()}dispose(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),super.dispose()}},$z=Gb,Gb.ID="editor.contrib.wordHighlighter",Gb);ap=$z=Bve([iR(1,qe),iR(2,xe),iR(3,Ut)],ap);class Vve extends Ce{constructor(e,t){super(t),this._isNext=e}run(e,t){const i=ap.get(t);i&&(this._isNext?i.moveNext():i.moveBack())}}class Rnt extends Vve{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:_("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:HZ,kbOpts:{kbExpr:R.editorTextFocus,primary:65,weight:100}})}}class Mnt extends Vve{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:_("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:HZ,kbOpts:{kbExpr:R.editorTextFocus,primary:1089,weight:100}})}}class Pnt extends Ce{constructor(){super({id:"editor.action.wordHighlight.trigger",label:_("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:void 0,kbOpts:{kbExpr:R.editorTextFocus,primary:0,weight:100}})}run(e,t,i){const s=ap.get(t);s&&s.restoreViewState(!0)}}Ot(ap.ID,ap,0);de(Rnt);de(Mnt);de(Pnt);H1(Uz);class YF extends Hn{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){if(!t.hasModel())return;const s=gl(t.getOption(132),t.getOption(131)),o=t.getModel(),r=t.getSelections(),a=r.length>1,l=r.map(c=>{const d=new U(c.positionLineNumber,c.positionColumn),u=this._move(s,o,d,this._wordNavigationType,a);return this._moveTo(c,u,this._inSelectionMode)});if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,l.map(c=>jt.fromModelSelection(c))),l.length===1){const c=new U(l[0].positionLineNumber,l[0].positionColumn);t.revealPosition(c,0)}}_moveTo(e,t,i){return i?new Ie(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new Ie(t.lineNumber,t.column,t.lineNumber,t.column)}}class vp extends YF{_move(e,t,i,s,o){return Qt.moveWordLeft(e,t,i,s,o)}}class wp extends YF{_move(e,t,i,s,o){return Qt.moveWordRight(e,t,i,s)}}class Ant extends vp{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class Ont extends vp{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class Fnt extends vp{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:se.and(R.textInputFocus,(e=se.and(TI,cF))==null?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class Bnt extends vp{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class Wnt extends vp{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class Hnt extends vp{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:se.and(R.textInputFocus,(e=se.and(TI,cF))==null?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class Vnt extends vp{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,i,s,o){return super._move(gl(md.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,o)}}class jnt extends vp{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,i,s,o){return super._move(gl(md.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,o)}}class znt extends wp{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class Unt extends wp{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:se.and(R.textInputFocus,(e=se.and(TI,cF))==null?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class $nt extends wp{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class Knt extends wp{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class qnt extends wp{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:se.and(R.textInputFocus,(e=se.and(TI,cF))==null?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class Gnt extends wp{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class Znt extends wp{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,i,s,o){return super._move(gl(md.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,o)}}class Ynt extends wp{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,i,s,o){return super._move(gl(md.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,o)}}class XF extends Hn{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){const s=e.get(Yi);if(!t.hasModel())return;const o=gl(t.getOption(132),t.getOption(131)),r=t.getModel(),a=t.getSelections(),l=t.getOption(6),c=t.getOption(11),d=s.getLanguageConfiguration(r.getLanguageId()).getAutoClosingPairs(),u=t._getViewModel(),h=a.map(f=>{const m=this._delete({wordSeparators:o,model:r,selection:f,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(9),autoClosingBrackets:l,autoClosingQuotes:c,autoClosingPairs:d,autoClosedCharacters:u.getCursorAutoClosedCharacters()},this._wordNavigationType);return new Rs(m,"")});t.pushUndoStop(),t.executeCommands(this.id,h),t.pushUndoStop()}}class VZ extends XF{_delete(e,t){const i=Qt.deleteWordLeft(e,t);return i||new D(1,1,1,1)}}class jZ extends XF{_delete(e,t){const i=Qt.deleteWordRight(e,t);if(i)return i;const s=e.model.getLineCount(),o=e.model.getLineMaxColumn(s);return new D(s,o,s,o)}}class Xnt extends VZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:R.writable})}}class Qnt extends VZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:R.writable})}}class Jnt extends VZ{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:R.writable,kbOpts:{kbExpr:R.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class est extends jZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:R.writable})}}class tst extends jZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:R.writable})}}class ist extends jZ{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:R.writable,kbOpts:{kbExpr:R.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class nst extends Ce{constructor(){super({id:"deleteInsideWord",precondition:R.writable,label:_("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,i){if(!t.hasModel())return;const s=gl(t.getOption(132),t.getOption(131)),o=t.getModel(),a=t.getSelections().map(l=>{const c=Qt.deleteInsideWord(s,o,l);return new Rs(c,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}_e(new Ant);_e(new Ont);_e(new Fnt);_e(new Bnt);_e(new Wnt);_e(new Hnt);_e(new znt);_e(new Unt);_e(new $nt);_e(new Knt);_e(new qnt);_e(new Gnt);_e(new Vnt);_e(new jnt);_e(new Znt);_e(new Ynt);_e(new Xnt);_e(new Qnt);_e(new Jnt);_e(new est);_e(new tst);_e(new ist);de(nst);class sst extends XF{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:R.writable,kbOpts:{kbExpr:R.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const i=wF.deleteWordPartLeft(e);return i||new D(1,1,1,1)}}class ost extends XF{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:R.writable,kbOpts:{kbExpr:R.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const i=wF.deleteWordPartRight(e);if(i)return i;const s=e.model.getLineCount(),o=e.model.getLineMaxColumn(s);return new D(s,o,s,o)}}class jve extends YF{_move(e,t,i,s,o){return wF.moveWordPartLeft(e,t,i,o)}}class rst extends jve{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:R.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}Mt.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class ast extends jve{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:R.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}Mt.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class zve extends YF{_move(e,t,i,s,o){return wF.moveWordPartRight(e,t,i)}}class lst extends zve{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:R.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class cst extends zve{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:R.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}_e(new sst);_e(new ost);_e(new rst);_e(new ast);_e(new lst);_e(new cst);const nY=class nY extends G{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=Br.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(93);t||(this.editor.isSimpleWidget?t=new Us(_("editor.simple.readonly","Cannot edit in read-only input")):t=new Us(_("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}};nY.ID="editor.contrib.readOnlyMessageController";let zP=nY;Ot(zP.ID,zP,2);var dst=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Rse=function(n,e){return function(t,i){e(t,i,n)}};let qz=class extends G{constructor(e,t,i){super(),this._textModel=e,this._languageFeaturesService=t,this._outlineModelService=i,this._currentModel=pt(this,void 0);const s=Ts("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),o=Ts("_textModel.onDidChangeContent",pe.debounce(r=>this._textModel.onDidChangeContent(r),()=>{},100));this._register(nr(async(r,a)=>{s.read(r),o.read(r);const l=a.add(new rUe),c=await this._outlineModelService.getOrCreate(this._textModel,l.token);a.isDisposed||this._currentModel.set(c,void 0)}))}getBreadcrumbItems(e,t){const i=this._currentModel.read(t);if(!i)return[];const s=i.asListOfDocumentSymbols().filter(o=>e.contains(o.range.startLineNumber)&&!e.contains(o.range.endLineNumber));return s.sort(fue(Io(o=>o.range.endLineNumber-o.range.startLineNumber,Kl))),s.map(o=>({name:o.name,kind:o.kind,startLineNumber:o.range.startLineNumber}))}};qz=dst([Rse(1,xe),Rse(2,nE)],qz);zM.setBreadcrumbsSourceFactory((n,e)=>e.createInstance(qz,n));const sY=class sY extends G{constructor(e){super(),this.editor=e,this.widget=null,rd&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(92);!this.widget&&e?this.widget=new Gz(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}};sY.ID="editor.contrib.iPadShowKeyboard";let UP=sY;const kO=class kO extends G{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(Q(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(Q(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return kO.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}};kO.ID="editor.contrib.ShowKeyboardWidget";let Gz=kO;Ot(UP.ID,UP,3);var ust=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Mse=function(n,e){return function(t,i){e(t,i,n)}},Zz,Zb;let YN=(Zb=class extends G{static get(e){return e.getContribution(Zz.ID)}constructor(e,t,i){super(),this._editor=e,this._languageService=i,this._widget=null,this._register(this._editor.onDidChangeModel(s=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(s=>this.stop())),this._register(nn.onDidChange(s=>this.stop())),this._register(this._editor.onKeyUp(s=>s.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new Yz(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}},Zz=Zb,Zb.ID="editor.contrib.inspectTokens",Zb);YN=Zz=ust([Mse(1,Ha),Mse(2,ji)],YN);class hst extends Ce{constructor(){super({id:"editor.action.inspectTokens",label:n6.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const i=YN.get(t);i==null||i.launch()}}function fst(n){let e="";for(let t=0,i=n.length;t<i;t++){const s=n.charCodeAt(t);switch(s){case 9:e+="→";break;case 32:e+="·";break;default:e+=String.fromCharCode(s)}}return e}function gst(n,e){const t=nn.get(e);if(t)return t;const i=n.encodeLanguageId(e);return{getInitialState:()=>MC,tokenize:(s,o,r)=>pq(e,r),tokenizeEncoded:(s,o,r)=>J4(i,r)}}const NO=class NO extends G{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=gst(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(i=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return NO._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let i=0;for(let l=t.tokens1.length-1;l>=0;l--){const c=t.tokens1[l];if(e.column-1>=c.offset){i=l;break}}let s=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){s=l;break}const o=this._model.getLineContent(e.lineNumber);let r="";if(i<t.tokens1.length){const l=t.tokens1[i].offset,c=i+1<t.tokens1.length?t.tokens1[i+1].offset:o.length;r=o.substring(l,c)}ys(this._domNode,ge("h2.tm-token",void 0,fst(r),ge("span.tm-token-length",void 0,`${r.length} ${r.length===1?"char":"chars"}`))),ae(this._domNode,ge("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(s<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(s<<1)+1]):null;ae(this._domNode,ge("table.tm-metadata-table",void 0,ge("tbody",void 0,ge("tr",void 0,ge("td.tm-metadata-key",void 0,"language"),ge("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),ge("tr",void 0,ge("td.tm-metadata-key",void 0,"token type"),ge("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),ge("tr",void 0,ge("td.tm-metadata-key",void 0,"font style"),ge("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),ge("tr",void 0,ge("td.tm-metadata-key",void 0,"foreground"),ge("td.tm-metadata-value",void 0,`${a?oe.Format.CSS.formatHex(a.foreground):"-?-"}`)),ge("tr",void 0,ge("td.tm-metadata-key",void 0,"background"),ge("td.tm-metadata-value",void 0,`${a?oe.Format.CSS.formatHex(a.background):"-?-"}`))))),ae(this._domNode,ge("hr.tokens-inspect-separator")),i<t.tokens1.length&&ae(this._domNode,ge("span.tm-token-type",void 0,t.tokens1[i].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=nn.getColorMap(),i=Jo.getLanguageId(e),s=Jo.getTokenType(e),o=Jo.getFontStyle(e),r=Jo.getForeground(e),a=Jo.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(i),tokenType:s,fontStyle:o,foreground:t[r],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),i=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),s=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:i.tokens,tokens2:s.tokens,endState:i.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let i=1;i<e;i++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(i),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}};NO._ID="editor.contrib.inspectTokensWidget";let Yz=NO;Ot(YN.ID,YN,4);de(hst);var mst=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Pse=function(n,e){return function(t,i){e(t,i,n)}},px,Yb;let Xz=(Yb=class{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=Zi.as(Jv.Quickaccess)}provide(e){const t=new ne;return t.add(e.onDidAccept(()=>{const[i]=e.selectedItems;i&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(i=>{const s=this.registry.getQuickAccessProvider(i.substr(px.PREFIX.length));s&&s.prefix&&s.prefix!==px.PREFIX&&this.quickInputService.quickAccess.show(s.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(i=>i.prefix!==px.PREFIX),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((t,i)=>t.prefix.localeCompare(i.prefix)).flatMap(t=>this.createPicks(t))}createPicks(e){return e.helpEntries.map(t=>{const i=t.prefix||e.prefix,s=i||"…";return{prefix:i,label:s,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:_("helpPickAriaLabel","{0}, {1}",s,t.description),description:t.description}})}},px=Yb,Yb.PREFIX="?",Yb);Xz=px=mst([Pse(0,Cl),Pse(1,ei)],Xz);Zi.as(Jv.Quickaccess).registerQuickAccessProvider({ctor:Xz,prefix:"",helpEntries:[{description:s6.helpQuickAccessActionLabel}]});class Uve{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t,i){var r;const s=new ne;e.canAcceptInBackground=!!((r=this.options)!=null&&r.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const o=s.add(new es);return o.value=this.doProvide(e,t,i),s.add(this.onDidActiveTextEditorControlChange(()=>{o.value=void 0,o.value=this.doProvide(e,t)})),s}doProvide(e,t,i){const s=new ne,o=this.activeTextEditorControl;if(o&&this.canProvideWithTextEditor(o)){const r={editor:o},a=zpe(o);if(a){let l=o.saveViewState()??void 0;s.add(a.onDidChangeCursorPosition(()=>{l=o.saveViewState()??void 0})),r.restoreViewState=()=>{l&&o===this.activeTextEditorControl&&o.restoreViewState(l)},s.add(jm(t.onCancellationRequested)(()=>{var c;return(c=r.restoreViewState)==null?void 0:c.call(r)}))}s.add(Pe(()=>this.clearDecorations(o))),s.add(this.provideWithTextEditor(r,e,t,i))}else s.add(this.provideWithoutTextEditor(e,t));return s}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range,"code.jump"),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus();const i=e.getModel();i&&"getLineContent"in i&&Tu(`${i.getLineContent(t.range.startLineNumber)}`)}getModel(e){var t;return UG(e)?(t=e.getModel())==null?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(i=>{const s=[];this.rangeHighlightDecorationId&&(s.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),s.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const o=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:sn(Pge),position:Na.Full}}}],[r,a]=i.deltaDecorations(s,o);this.rangeHighlightDecorationId={rangeHighlightId:r,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(i=>{i.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}const IO=class IO extends Uve{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=_("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,G.None}provideWithTextEditor(e,t,i){const s=e.editor,o=new ne;o.add(t.onDidAccept(l=>{const[c]=t.selectedItems;if(c){if(!this.isValidLineNumber(s,c.lineNumber))return;this.gotoLocation(e,{range:this.toRange(c.lineNumber,c.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const r=()=>{const l=this.parsePosition(s,t.value.trim().substr(IO.PREFIX.length)),c=this.getPickLabel(s,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:c}],t.ariaLabel=c,!this.isValidLineNumber(s,l.lineNumber)){this.clearDecorations(s);return}const d=this.toRange(l.lineNumber,l.column);s.revealRangeInCenter(d,0),this.addDecorations(s,d)};r(),o.add(t.onDidChangeValue(()=>r()));const a=zpe(s);return a&&a.getOptions().get(68).renderType===2&&(a.updateOptions({lineNumbers:"on"}),o.add(Pe(()=>a.updateOptions({lineNumbers:"relative"})))),o}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const i=t.split(/,|:|#/).map(o=>parseInt(o,10)).filter(o=>!isNaN(o)),s=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:s+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?_("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):_("gotoLineLabel","Go to line {0}.",t);const s=e.getPosition()||{lineNumber:1,column:1},o=this.lineCount(e);return o>1?_("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",s.lineNumber,s.column,o):_("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",s.lineNumber,s.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,i){if(!i||typeof i!="number")return!1;const s=this.getModel(e);if(!s)return!1;const o={lineNumber:t,column:i};return s.validatePosition(o).equals(o)}lineCount(e){var t;return((t=this.getModel(e))==null?void 0:t.getLineCount())??0}};IO.PREFIX=":";let Qz=IO;var pst=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},_st=function(n,e){return function(t,i){e(t,i,n)}};let XN=class extends Qz{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=pe.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};XN=pst([_st(0,Ut)],XN);var Xb;let $ve=(Xb=class extends Ce{constructor(){super({id:Xb.ID,label:B2.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:R.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Cl).quickAccess.show(XN.PREFIX)}},Xb.ID="editor.action.gotoLine",Xb);de($ve);Zi.as(Jv.Quickaccess).registerQuickAccessProvider({ctor:XN,prefix:XN.PREFIX,helpEntries:[{description:B2.gotoLineActionLabel,commandId:$ve.ID}]});const Kve=[void 0,[]];function o7(n,e,t=0,i=0){const s=e;return s.values&&s.values.length>1?bst(n,s.values,t,i):qve(n,e,t,i)}function bst(n,e,t,i){let s=0;const o=[];for(const r of e){const[a,l]=qve(n,r,t,i);if(typeof a!="number")return Kve;s+=a,o.push(...l)}return[s,vst(o)]}function qve(n,e,t,i){const s=wv(e.original,e.originalLowercase,t,n,n.toLowerCase(),i,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return s?[s[0],DI(s)]:Kve}function vst(n){const e=n.sort((s,o)=>s.start-o.start),t=[];let i;for(const s of e)!i||!wst(i,s)?(i=s,t.push(s)):(i.start=Math.min(i.start,s.start),i.end=Math.max(i.end,s.end));return t}function wst(n,e){return!(n.end<e.start||e.end<n.start)}function Ase(n){return n.startsWith('"')&&n.endsWith('"')}const Gve=" ";function Jz(n){typeof n!="string"&&(n="");const e=n.toLowerCase(),{pathNormalized:t,normalized:i,normalizedLowercase:s}=Ose(n),o=t.indexOf(Zc)>=0,r=Ase(n);let a;const l=n.split(Gve);if(l.length>1)for(const c of l){const d=Ase(c),{pathNormalized:u,normalized:h,normalizedLowercase:f}=Ose(c);h&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:u,normalized:h,normalizedLowercase:f,expectContiguousMatch:d}))}return{original:n,originalLowercase:e,pathNormalized:t,normalized:i,normalizedLowercase:s,values:a,containsPathSeparator:o,expectContiguousMatch:r}}function Ose(n){let e;As?e=n.replace(/\//g,Zc):e=n.replace(/\\/g,Zc);const t=BRe(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function Fse(n){return Array.isArray(n)?Jz(n.map(e=>e.original).join(Gve)):Jz(n.original)}var yst=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Bse=function(n,e){return function(t,i){e(t,i,n)}},nR,Fc;let tb=(Fc=class extends Uve{constructor(e,t,i=Object.create(null)){super(i),this._languageFeaturesService=e,this._outlineModelService=t,this.options=i,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,_("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),G.None}provideWithTextEditor(e,t,i,s){const o=e.editor,r=this.getModel(o);return r?this._languageFeaturesService.documentSymbolProvider.has(r)?this.doProvideWithEditorSymbols(e,r,t,i,s):this.doProvideWithoutEditorSymbols(e,r,t,i):G.None}doProvideWithoutEditorSymbols(e,t,i,s){const o=new ne;return this.provideLabelPick(i,_("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(async()=>!await this.waitForLanguageSymbolRegistry(t,o)||s.isCancellationRequested||o.add(this.doProvideWithEditorSymbols(e,t,i,s)))(),o}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}async waitForLanguageSymbolRegistry(e,t){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const i=new S1,s=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(s.dispose(),i.complete(!0))}));return t.add(Pe(()=>i.complete(!1))),i.p}doProvideWithEditorSymbols(e,t,i,s,o){var u;const r=e.editor,a=new ne;a.add(i.onDidAccept(h=>{var m;const[f]=i.selectedItems;f&&f.range&&(this.gotoLocation(e,{range:f.range.selection,keyMods:i.keyMods,preserveFocus:h.inBackground}),(m=o==null?void 0:o.handleAccept)==null||m.call(o,f),h.inBackground||i.hide())})),a.add(i.onDidTriggerItemButton(({item:h})=>{h&&h.range&&(this.gotoLocation(e,{range:h.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())}));const l=this.getDocumentSymbols(t,s);let c;const d=async h=>{c==null||c.dispose(!0),i.busy=!1,c=new Gi(s),i.busy=!0;try{const f=Jz(i.value.substr(nR.PREFIX.length).trim()),m=await this.doGetSymbolPicks(l,f,void 0,c.token,t);if(s.isCancellationRequested)return;if(m.length>0){if(i.items=m,h&&f.original.length===0){const p=Mk(m,b=>!!(b.type!=="separator"&&b.range&&D.containsPosition(b.range.decoration,h)));p&&(i.activeItems=[p])}}else f.original.length>0?this.provideLabelPick(i,_("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,_("noSymbolResults","No editor symbols"))}finally{s.isCancellationRequested||(i.busy=!1)}};return a.add(i.onDidChangeValue(()=>d(void 0))),d((u=r.getSelection())==null?void 0:u.getPosition()),a.add(i.onDidChangeActive(()=>{const[h]=i.activeItems;h&&h.range&&(r.revealRangeInCenter(h.range.selection,0),this.addDecorations(r,h.range.decoration))})),a}async doGetSymbolPicks(e,t,i,s,o){var b,v;const r=await e;if(s.isCancellationRequested)return[];const a=t.original.indexOf(nR.SCOPE_PREFIX)===0,l=a?1:0;let c,d;t.values&&t.values.length>1?(c=Fse(t.values[0]),d=Fse(t.values.slice(1))):c=t;let u;const h=(v=(b=this.options)==null?void 0:b.openSideBySideDirection)==null?void 0:v.call(b);h&&(u=[{iconClass:h==="right"?Ke.asClassName(he.splitHorizontal):Ke.asClassName(he.splitVertical),tooltip:h==="right"?_("openToSide","Open to the Side"):_("openToBottom","Open to the Bottom")}]);const f=[];for(let w=0;w<r.length;w++){const y=r[w],C=ORe(y.name),S=`$(${i2.toIcon(y.kind).id}) ${C}`,x=S.length-C.length;let k=y.containerName;i!=null&&i.extraContainerLabel&&(k?k=`${i.extraContainerLabel} • ${k}`:k=i.extraContainerLabel);let N,E,B,A;if(t.original.length>l){let W=!1;if(c!==t&&([N,E]=o7(S,{...t,values:void 0},l,x),typeof N=="number"&&(W=!0)),typeof N!="number"&&([N,E]=o7(S,c,l,x),typeof N!="number"))continue;if(!W&&d){if(k&&d.original.length>0&&([B,A]=o7(k,d)),typeof B!="number")continue;typeof N=="number"&&(N+=B)}}const O=y.tags&&y.tags.indexOf(1)>=0;f.push({index:w,kind:y.kind,score:N,label:S,ariaLabel:ERe(y.name,y.kind),description:k,highlights:O?void 0:{label:E,description:A},range:{selection:D.collapseToStart(y.selectionRange),decoration:y.range},uri:o.uri,symbolName:C,strikethrough:O,buttons:u})}const m=f.sort((w,y)=>a?this.compareByKindAndScore(w,y):this.compareByScore(w,y));let p=[];if(a){let S=function(){y&&typeof w=="number"&&C>0&&(y.label=hv(a7[w]||r7,C))},w,y,C=0;for(const x of m)w!==x.kind?(S(),w=x.kind,C=1,y={type:"separator"},p.push(y)):C++,p.push(x);S()}else m.length>0&&(p=[{label:_("symbols","symbols ({0})",f.length),type:"separator"},...m]);return p}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const i=a7[e.kind]||r7,s=a7[t.kind]||r7,o=i.localeCompare(s);return o===0?this.compareByScore(e,t):o}async getDocumentSymbols(e,t){const i=await this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()}},nR=Fc,Fc.PREFIX="@",Fc.SCOPE_PREFIX=":",Fc.PREFIX_BY_CATEGORY=`${Fc.PREFIX}${Fc.SCOPE_PREFIX}`,Fc);tb=nR=yst([Bse(0,xe),Bse(1,nE)],tb);const r7=_("property","properties ({0})"),a7={5:_("method","methods ({0})"),11:_("function","functions ({0})"),8:_("_constructor","constructors ({0})"),12:_("variable","variables ({0})"),4:_("class","classes ({0})"),22:_("struct","structs ({0})"),23:_("event","events ({0})"),24:_("operator","operators ({0})"),10:_("interface","interfaces ({0})"),2:_("namespace","namespaces ({0})"),3:_("package","packages ({0})"),25:_("typeParameter","type parameters ({0})"),1:_("modules","modules ({0})"),6:_("property","properties ({0})"),9:_("enum","enumerations ({0})"),21:_("enumMember","enumeration members ({0})"),14:_("string","strings ({0})"),0:_("file","files ({0})"),17:_("array","arrays ({0})"),15:_("number","numbers ({0})"),16:_("boolean","booleans ({0})"),18:_("object","objects ({0})"),19:_("key","keys ({0})"),7:_("field","fields ({0})"),13:_("constant","constants ({0})")};var Cst=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},l7=function(n,e){return function(t,i){e(t,i,n)}};let eU=class extends tb{constructor(e,t,i){super(t,i),this.editorService=e,this.onDidActiveTextEditorControlChange=pe.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};eU=Cst([l7(0,Ut),l7(1,xe),l7(2,nE)],eU);const EO=class EO extends Ce{constructor(){super({id:EO.ID,label:Zk.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:R.hasDocumentSymbolProvider,kbOpts:{kbExpr:R.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(Cl).quickAccess.show(tb.PREFIX,{itemActivation:Ic.NONE})}};EO.ID="editor.action.quickOutline";let $P=EO;de($P);Zi.as(Jv.Quickaccess).registerQuickAccessProvider({ctor:eU,prefix:tb.PREFIX,helpEntries:[{description:Zk.quickOutlineActionLabel,prefix:tb.PREFIX,commandId:$P.ID},{description:Zk.quickOutlineByCategoryActionLabel,prefix:tb.PREFIX_BY_CATEGORY}]});function Sst(n){const e=new Map;for(const t of n)e.set(t,(e.get(t)??0)+1);return e}class pL{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(e,t){const i=this.computeEmbedding(e),s=new Map,o=[];for(const[r,a]of this.documents){if(t.isCancellationRequested)return[];for(const l of a.chunks){const c=this.computeSimilarityScore(l,i,s);c>0&&o.push({key:r,score:c})}}return o}static termFrequencies(e){return Sst(pL.splitTerms(e))}static*splitTerms(e){const t=i=>i.toLowerCase();for(const[i]of e.matchAll(new RegExp("\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b","gu"))){yield t(i);const s=i.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g);if(s.length>1)for(const o of s)o.length>2&&new RegExp("\\p{Letter}{3,}","gu").test(o)&&(yield t(o))}}updateDocuments(e){for(const{key:t}of e)this.deleteDocument(t);for(const t of e){const i=[];for(const s of t.textChunks){const o=pL.termFrequencies(s);for(const r of o.keys())this.chunkOccurrences.set(r,(this.chunkOccurrences.get(r)??0)+1);i.push({text:s,tf:o})}this.chunkCount+=i.length,this.documents.set(t.key,{chunks:i})}return this}deleteDocument(e){const t=this.documents.get(e);if(t){this.documents.delete(e),this.chunkCount-=t.chunks.length;for(const i of t.chunks)for(const s of i.tf.keys()){const o=this.chunkOccurrences.get(s);if(typeof o=="number"){const r=o-1;r<=0?this.chunkOccurrences.delete(s):this.chunkOccurrences.set(s,r)}}}}computeSimilarityScore(e,t,i){let s=0;for(const[o,r]of Object.entries(t)){const a=e.tf.get(o);if(!a)continue;let l=i.get(o);typeof l!="number"&&(l=this.computeIdf(o),i.set(o,l));const c=a*l;s+=c*r}return s}computeEmbedding(e){const t=pL.termFrequencies(e);return this.computeTfidf(t)}computeIdf(e){const t=this.chunkOccurrences.get(e)??0;return t>0?Math.log((this.chunkCount+1)/t):0}computeTfidf(e){const t=Object.create(null);for(const[i,s]of e){const o=this.computeIdf(i);o>0&&(t[i]=s*o)}return t}}function xst(n){var i;const e=n.slice(0);e.sort((s,o)=>o.score-s.score);const t=((i=e[0])==null?void 0:i.score)??0;if(t>0)for(const s of e)s.score/=t;return e}var Tw;(function(n){n[n.NO_ACTION=0]="NO_ACTION",n[n.CLOSE_PICKER=1]="CLOSE_PICKER",n[n.REFRESH_PICKER=2]="REFRESH_PICKER",n[n.REMOVE_ITEM=3]="REMOVE_ITEM"})(Tw||(Tw={}));function c7(n){const e=n;return Array.isArray(e.items)}function Wse(n){const e=n;return!!e.picks&&e.additionalPicks instanceof Promise}class Lst extends G{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,i){var c;const s=new ne;e.canAcceptInBackground=!!((c=this.options)!=null&&c.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let o;const r=s.add(new es),a=async()=>{var b;const d=r.value=new ne;o==null||o.dispose(!0),e.busy=!1,o=new Gi(t);const u=o.token;let h=e.value.substring(this.prefix.length);(b=this.options)!=null&&b.shouldSkipTrimPickFilter||(h=h.trim());const f=this._getPicks(h,d,u,i),m=(v,w)=>{var S;let y,C;if(c7(v)?(y=v.items,C=v.active):y=v,y.length===0){if(w)return!1;(h.length>0||e.hideInput)&&((S=this.options)!=null&&S.noResultsPick)&&(wk(this.options.noResultsPick)?y=[this.options.noResultsPick(h)]:y=[this.options.noResultsPick])}return e.items=y,C&&(e.activeItems=[C]),!0},p=async v=>{let w=!1,y=!1;await Promise.all([(async()=>{typeof v.mergeDelay=="number"&&(await _f(v.mergeDelay),u.isCancellationRequested)||y||(w=m(v.picks,!0))})(),(async()=>{e.busy=!0;try{const C=await v.additionalPicks;if(u.isCancellationRequested)return;let S,x;c7(v.picks)?(S=v.picks.items,x=v.picks.active):S=v.picks;let k,N;if(c7(C)?(k=C.items,N=C.active):k=C,k.length>0||!w){let E;if(!x&&!N){const B=e.activeItems[0];B&&S.indexOf(B)!==-1&&(E=B)}m({items:[...S,...k],active:x||N||E})}}finally{u.isCancellationRequested||(e.busy=!1),y=!0}})()])};if(f!==null)if(Wse(f))await p(f);else if(!(f instanceof Promise))m(f);else{e.busy=!0;try{const v=await f;if(u.isCancellationRequested)return;Wse(v)?await p(v):m(v)}finally{u.isCancellationRequested||(e.busy=!1)}}};s.add(e.onDidChangeValue(()=>a())),a(),s.add(e.onDidAccept(d=>{var h;if(i!=null&&i.handleAccept){d.inBackground||e.hide(),(h=i.handleAccept)==null||h.call(i,e.activeItems[0]);return}const[u]=e.selectedItems;typeof(u==null?void 0:u.accept)=="function"&&(d.inBackground||e.hide(),u.accept(e.keyMods,d))}));const l=async(d,u)=>{var f;if(typeof u.trigger!="function")return;const h=((f=u.buttons)==null?void 0:f.indexOf(d))??-1;if(h>=0){const m=u.trigger(h,e.keyMods),p=typeof m=="number"?m:await m;if(t.isCancellationRequested)return;switch(p){case Tw.NO_ACTION:break;case Tw.CLOSE_PICKER:e.hide();break;case Tw.REFRESH_PICKER:a();break;case Tw.REMOVE_ITEM:{const b=e.items.indexOf(u);if(b!==-1){const v=e.items.slice(),w=v.splice(b,1),y=e.activeItems.filter(S=>S!==w[0]),C=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=v,y&&(e.activeItems=y),e.keepScrollPosition=C}break}}}};return s.add(e.onDidTriggerItemButton(({button:d,item:u})=>l(d,u))),s.add(e.onDidTriggerSeparatorButton(({button:d,separator:u})=>l(d,u))),s}}var Zve=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},bg=function(n,e){return function(t,i){e(t,i,n)}},Qp,On,lu;let tU=(lu=class extends Lst{constructor(e,t,i,s,o,r){super(Qp.PREFIX,e),this.instantiationService=t,this.keybindingService=i,this.commandService=s,this.telemetryService=o,this.dialogService=r,this.commandsHistory=this._register(this.instantiationService.createInstance(iU)),this.options=e}async _getPicks(e,t,i,s){var f,m;const o=await this.getCommandPicks(i);if(i.isCancellationRequested)return[];const r=jm(()=>{const p=new pL;p.updateDocuments(o.map(v=>({key:v.commandId,textChunks:[this.getTfIdfChunk(v)]})));const b=p.calculateScores(e,i);return xst(b).filter(v=>v.score>Qp.TFIDF_THRESHOLD).slice(0,Qp.TFIDF_MAX_RESULTS)}),a=[];for(const p of o){const b=Qp.WORD_FILTER(e,p.label)??void 0,v=p.commandAlias?Qp.WORD_FILTER(e,p.commandAlias)??void 0:void 0;if(b||v)p.highlights={label:b,detail:this.options.showAlias?v:void 0},a.push(p);else if(e===p.commandId)a.push(p);else if(e.length>=3){const w=r();if(i.isCancellationRequested)return[];const y=w.find(C=>C.key===p.commandId);y&&(p.tfIdfScore=y.score,a.push(p))}}const l=new Map;for(const p of a){const b=l.get(p.label);b?(p.description=p.commandId,b.description=b.commandId):l.set(p.label,p)}a.sort((p,b)=>{if(p.tfIdfScore&&b.tfIdfScore)return p.tfIdfScore===b.tfIdfScore?p.label.localeCompare(b.label):b.tfIdfScore-p.tfIdfScore;if(p.tfIdfScore)return 1;if(b.tfIdfScore)return-1;const v=this.commandsHistory.peek(p.commandId),w=this.commandsHistory.peek(b.commandId);if(v&&w)return v>w?-1:1;if(v)return-1;if(w)return 1;if(this.options.suggestedCommandIds){const y=this.options.suggestedCommandIds.has(p.commandId),C=this.options.suggestedCommandIds.has(b.commandId);if(y&&C)return 0;if(y)return-1;if(C)return 1}return p.label.localeCompare(b.label)});const c=[];let d=!1,u=!0,h=!!this.options.suggestedCommandIds;for(let p=0;p<a.length;p++){const b=a[p];p===0&&this.commandsHistory.peek(b.commandId)&&(c.push({type:"separator",label:_("recentlyUsed","recently used")}),d=!0),u&&b.tfIdfScore!==void 0&&(c.push({type:"separator",label:_("suggested","similar commands")}),u=!1),h&&b.tfIdfScore===void 0&&!this.commandsHistory.peek(b.commandId)&&((f=this.options.suggestedCommandIds)!=null&&f.has(b.commandId))&&(c.push({type:"separator",label:_("commonlyUsed","commonly used")}),d=!0,h=!1),d&&b.tfIdfScore===void 0&&!this.commandsHistory.peek(b.commandId)&&!((m=this.options.suggestedCommandIds)!=null&&m.has(b.commandId))&&(c.push({type:"separator",label:_("morecCommands","other commands")}),d=!1),c.push(this.toCommandPick(b,s))}return this.hasAdditionalCommandPicks(e,i)?{picks:c,additionalPicks:(async()=>{var v;const p=await this.getAdditionalCommandPicks(o,a,e,i);if(i.isCancellationRequested)return[];const b=p.map(w=>this.toCommandPick(w,s));return u&&((v=b[0])==null?void 0:v.type)!=="separator"&&b.unshift({type:"separator",label:_("suggested","similar commands")}),b})()}:c}toCommandPick(e,t){if(e.type==="separator")return e;const i=this.keybindingService.lookupKeybinding(e.commandId),s=i?_("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,i.getAriaLabel()):e.label;return{...e,ariaLabel:s,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:i,accept:async()=>{var o;this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:(t==null?void 0:t.from)??"quick open"});try{(o=e.args)!=null&&o.length?await this.commandService.executeCommand(e.commandId,...e.args):await this.commandService.executeCommand(e.commandId)}catch(r){wl(r)||this.dialogService.error(_("canNotRun","Command '{0}' resulted in an error",e.label),XM(r))}}}}getTfIdfChunk({label:e,commandAlias:t,commandDescription:i}){let s=e;return t&&t!==e&&(s+=` - ${t}`),i&&i.value!==e&&(s+=` - ${i.value===i.original?i.value:`${i.value} (${i.original})`}`),s}},Qp=lu,lu.PREFIX=">",lu.TFIDF_THRESHOLD=.5,lu.TFIDF_MAX_RESULTS=5,lu.WORD_FILTER=aq($k,XFe,qfe),lu);tU=Qp=Zve([bg(1,Ae),bg(2,ei),bg(3,Ci),bg(4,Zs),bg(5,NI)],tU);var Bc;let iU=(Bc=class extends G{constructor(e,t,i){super(),this.storageService=e,this.configurationService=t,this.logService=i,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e))),this._register(this.storageService.onWillSaveState(e=>{e.reason===Jk.SHUTDOWN&&this.saveState()}))}updateConfiguration(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=On.getConfiguredCommandHistoryLength(this.configurationService),On.cache&&On.cache.limit!==this.configuredCommandsHistoryLength&&(On.cache.limit=this.configuredCommandsHistoryLength,On.hasChanges=!0))}load(){const e=this.storageService.get(On.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch(s){this.logService.error(`[CommandsHistory] invalid data: ${s}`)}const i=On.cache=new Hu(this.configuredCommandsHistoryLength,1);if(t){let s;t.usesLRU?s=t.entries:s=t.entries.sort((o,r)=>o.value-r.value),s.forEach(o=>i.set(o.key,o.value))}On.counter=this.storageService.getNumber(On.PREF_KEY_COUNTER,0,On.counter)}push(e){On.cache&&(On.cache.set(e,On.counter++),On.hasChanges=!0)}peek(e){var t;return(t=On.cache)==null?void 0:t.peek(e)}saveState(){if(!On.cache||!On.hasChanges)return;const e={usesLRU:!0,entries:[]};On.cache.forEach((t,i)=>e.entries.push({key:i,value:t})),this.storageService.store(On.PREF_KEY_CACHE,JSON.stringify(e),0,0),this.storageService.store(On.PREF_KEY_COUNTER,On.counter,0,0),On.hasChanges=!1}static getConfiguredCommandHistoryLength(e){var s,o;const i=(o=(s=e.getValue().workbench)==null?void 0:s.commandPalette)==null?void 0:o.history;return typeof i=="number"?i:On.DEFAULT_COMMANDS_HISTORY_LENGTH}},On=Bc,Bc.DEFAULT_COMMANDS_HISTORY_LENGTH=50,Bc.PREF_KEY_CACHE="commandPalette.mru.cache",Bc.PREF_KEY_COUNTER="commandPalette.mru.counter",Bc.counter=1,Bc.hasChanges=!1,Bc);iU=On=Zve([bg(0,ac),bg(1,_t),bg(2,Os)],iU);class kst extends tU{constructor(e,t,i,s,o,r){super(e,t,i,s,o,r)}getCodeEditorCommandPicks(){var i;const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const s of e.getSupportedActions()){let o;(i=s.metadata)!=null&&i.description&&(ZBe(s.metadata.description)?o=s.metadata.description:o={original:s.metadata.description,value:s.metadata.description}),t.push({commandId:s.id,commandAlias:s.alias,commandDescription:o,label:fq(s.label)||s.id})}return t}}var Nst=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},B0=function(n,e){return function(t,i){e(t,i,n)}};let QN=class extends kst{get activeTextEditorControl(){return this.codeEditorService.getFocusedCodeEditor()??void 0}constructor(e,t,i,s,o,r){super({showAlias:!1},e,i,s,o,r),this.codeEditorService=t}async getCommandPicks(){return this.getCodeEditorCommandPicks()}hasAdditionalCommandPicks(){return!1}async getAdditionalCommandPicks(){return[]}};QN=Nst([B0(0,Ae),B0(1,Ut),B0(2,ei),B0(3,Ci),B0(4,Zs),B0(5,NI)],QN);const DO=class DO extends Ce{constructor(){super({id:DO.ID,label:W2.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:R.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(Cl).quickAccess.show(QN.PREFIX)}};DO.ID="editor.action.quickCommand";let KP=DO;de(KP);Zi.as(Jv.Quickaccess).registerQuickAccessProvider({ctor:QN,prefix:QN.PREFIX,helpEntries:[{description:W2.quickCommandHelp,commandId:KP.ID}]});var Ist=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},W0=function(n,e){return function(t,i){e(t,i,n)}};let nU=class extends Pv{constructor(e,t,i,s,o,r,a){super(!0,e,t,i,s,o,r,a)}};nU=Ist([W0(1,qe),W0(2,Ut),W0(3,wn),W0(4,Ae),W0(5,ac),W0(6,_t)],nU);Ot(Pv.ID,nU,4);class Est extends Ce{constructor(){super({id:"editor.action.toggleHighContrast",label:r6.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const i=e.get(Ha),s=i.getColorTheme();Qc(s.type)?(i.setTheme(this._originalThemeName||(kC(s.type)?xy:Eh)),this._originalThemeName=null):(i.setTheme(kC(s.type)?Y_:X_),this._originalThemeName=s.themeName)}}de(Est);const Yve=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:qpe,Emitter:Gpe,KeyCode:$G,KeyMod:KG,MarkerSeverity:Qpe,MarkerTag:Jpe,Position:Zpe,Range:LF,Selection:Ype,SelectionDirection:Xpe,Token:t_e,Uri:e_e,editor:KC,languages:Gt},Symbol.toStringTag,{value:"Module"}));function Xve(){KC.defineTheme("minecraft-dark",{base:"vs-dark",inherit:!0,rules:[{token:"keyword",foreground:"#cc7832",fontStyle:"bold"},{token:"comment",foreground:"#808080",fontStyle:"italic"},{token:"string",foreground:"#6a8759"},{token:"number",foreground:"#6897bb"},{token:"type",foreground:"#afb42b"},{token:"annotation",foreground:"#bbb529"},{token:"field",foreground:"#9876aa"}],colors:{"editor.background":"#1e1e1e","editor.foreground":"#d4d4d4","editorCursor.foreground":"#a5a5a5","editor.lineHighlightBackground":"#2f2f2f","editorLineNumber.foreground":"#5a5a5a","editor.selectionBackground":"#214283","editor.inactiveSelectionBackground":"#3a3d41"}}),KC.setTheme("minecraft-dark"),Dst()}function Dst(){Gt.registerCompletionItemProvider("java",{triggerCharacters:[".","@"],provideCompletionItems:(n,e)=>{const t=n.getValueInRange({startLineNumber:e.lineNumber,startColumn:1,endLineNumber:e.lineNumber,endColumn:e.column}),i=n.getWordUntilPosition(e),s={startLineNumber:e.lineNumber,endLineNumber:e.lineNumber,startColumn:i.startColumn,endColumn:i.endColumn},o=[];return(t.trim().startsWith("import")||t.includes("import net."))&&o.push({label:"net.minecraft.core.component.DataComponents",kind:Gt.CompletionItemKind.Reference,insertText:"net.minecraft.core.component.DataComponents",range:s},{label:"net.minecraft.world.item.Item",kind:Gt.CompletionItemKind.Reference,insertText:"net.minecraft.world.item.Item",range:s},{label:"net.minecraft.world.item.component.Weapon",kind:Gt.CompletionItemKind.Reference,insertText:"net.minecraft.world.item.component.Weapon",range:s},{label:"net.neoforged.neoforge.registries.DeferredRegister",kind:Gt.CompletionItemKind.Reference,insertText:"net.neoforged.neoforge.registries.DeferredRegister",range:s},{label:"net.neoforged.neoforge.registries.RegistryObject",kind:Gt.CompletionItemKind.Reference,insertText:"net.neoforged.neoforge.registries.RegistryObject",range:s}),t.includes("DataComponents.")&&o.push({label:"WEAPON",kind:Gt.CompletionItemKind.Field,insertText:"WEAPON",detail:"DataComponents.WEAPON - For weapon items",range:s},{label:"TOOL",kind:Gt.CompletionItemKind.Field,insertText:"TOOL",detail:"DataComponents.TOOL - For tool items",range:s},{label:"ARMOR",kind:Gt.CompletionItemKind.Field,insertText:"ARMOR",detail:"DataComponents.ARMOR - For armor items",range:s},{label:"BLOCKS_ATTACKS",kind:Gt.CompletionItemKind.Field,insertText:"BLOCKS_ATTACKS",detail:"DataComponents.BLOCKS_ATTACKS - For shields",range:s}),(t.includes("new Item.Properties()")||t.includes("Properties()."))&&o.push({label:"sword",kind:Gt.CompletionItemKind.Method,insertText:"sword()",detail:"Configures this item as a sword",range:s},{label:"axe",kind:Gt.CompletionItemKind.Method,insertText:"axe()",detail:"Configures this item as an axe",range:s},{label:"pickaxe",kind:Gt.CompletionItemKind.Method,insertText:"pickaxe()",detail:"Configures this item as a pickaxe",range:s},{label:"shovel",kind:Gt.CompletionItemKind.Method,insertText:"shovel()",detail:"Configures this item as a shovel",range:s},{label:"hoe",kind:Gt.CompletionItemKind.Method,insertText:"hoe()",detail:"Configures this item as a hoe",range:s},{label:"durability",kind:Gt.CompletionItemKind.Method,insertText:"durability(${1:1000})",insertTextRules:Gt.CompletionItemInsertTextRule.InsertAsSnippet,detail:"Sets item durability",range:s},{label:"stacksTo",kind:Gt.CompletionItemKind.Method,insertText:"stacksTo(${1:64})",insertTextRules:Gt.CompletionItemInsertTextRule.InsertAsSnippet,detail:"Sets item stack size",range:s},{label:"add",kind:Gt.CompletionItemKind.Method,insertText:"add(${1:DataComponents}, ${2:component})",insertTextRules:Gt.CompletionItemInsertTextRule.InsertAsSnippet,detail:"Adds a data component to the item",range:s}),(t.includes("BlockBehaviour.Properties")||t.includes("Properties."))&&o.push({label:"of",kind:Gt.CompletionItemKind.Method,insertText:"of(${1:BlockSetType})",insertTextRules:Gt.CompletionItemInsertTextRule.InsertAsSnippet,detail:"Creates new block properties",range:s},{label:"strength",kind:Gt.CompletionItemKind.Method,insertText:"strength(${1:1.5f}, ${2:6.0f})",insertTextRules:Gt.CompletionItemInsertTextRule.InsertAsSnippet,detail:"Sets hardness and resistance",range:s},{label:"requiresCorrectToolForDrops",kind:Gt.CompletionItemKind.Method,insertText:"requiresCorrectToolForDrops()",detail:"Makes block require the correct tool",range:s},{label:"sound",kind:Gt.CompletionItemKind.Method,insertText:"sound(${1:SoundType})",insertTextRules:Gt.CompletionItemInsertTextRule.InsertAsSnippet,detail:"Sets the block sound",range:s}),{suggestions:o}}})}function JN(n,[e,t]){return Math.min(t,Math.max(e,n))}function Tst(n,e){return L.useReducer((t,i)=>e[t][i]??t,n)}var zZ="ScrollArea",[Qve,mdt]=sc(zZ),[Rst,lc]=Qve(zZ),Jve=L.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:i="hover",dir:s,scrollHideDelay:o=600,...r}=n,[a,l]=L.useState(null),[c,d]=L.useState(null),[u,h]=L.useState(null),[f,m]=L.useState(null),[p,b]=L.useState(null),[v,w]=L.useState(0),[y,C]=L.useState(0),[S,x]=L.useState(!1),[k,N]=L.useState(!1),E=oi(e,A=>l(A)),B=_1(s);return g.jsx(Rst,{scope:t,type:i,dir:B,scrollHideDelay:o,scrollArea:a,viewport:c,onViewportChange:d,content:u,onContentChange:h,scrollbarX:f,onScrollbarXChange:m,scrollbarXEnabled:S,onScrollbarXEnabledChange:x,scrollbarY:p,onScrollbarYChange:b,scrollbarYEnabled:k,onScrollbarYEnabledChange:N,onCornerWidthChange:w,onCornerHeightChange:C,children:g.jsx(Et.div,{dir:B,...r,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":y+"px",...n.style}})})});Jve.displayName=zZ;var e0e="ScrollAreaViewport",t0e=L.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:i,nonce:s,...o}=n,r=lc(e0e,t),a=L.useRef(null),l=oi(e,a,r.onViewportChange);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),g.jsx(Et.div,{"data-radix-scroll-area-viewport":"",...o,ref:l,style:{overflowX:r.scrollbarXEnabled?"scroll":"hidden",overflowY:r.scrollbarYEnabled?"scroll":"hidden",...n.style},children:g.jsx("div",{ref:r.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});t0e.displayName=e0e;var Ku="ScrollAreaScrollbar",UZ=L.forwardRef((n,e)=>{const{forceMount:t,...i}=n,s=lc(Ku,n.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:r}=s,a=n.orientation==="horizontal";return L.useEffect(()=>(a?o(!0):r(!0),()=>{a?o(!1):r(!1)}),[a,o,r]),s.type==="hover"?g.jsx(Mst,{...i,ref:e,forceMount:t}):s.type==="scroll"?g.jsx(Pst,{...i,ref:e,forceMount:t}):s.type==="auto"?g.jsx(i0e,{...i,ref:e,forceMount:t}):s.type==="always"?g.jsx($Z,{...i,ref:e}):null});UZ.displayName=Ku;var Mst=L.forwardRef((n,e)=>{const{forceMount:t,...i}=n,s=lc(Ku,n.__scopeScrollArea),[o,r]=L.useState(!1);return L.useEffect(()=>{const a=s.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),r(!0)},d=()=>{l=window.setTimeout(()=>r(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),g.jsx(qr,{present:t||o,children:g.jsx(i0e,{"data-state":o?"visible":"hidden",...i,ref:e})})}),Pst=L.forwardRef((n,e)=>{const{forceMount:t,...i}=n,s=lc(Ku,n.__scopeScrollArea),o=n.orientation==="horizontal",r=JF(()=>l("SCROLL_END"),100),[a,l]=Tst("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return L.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,s.scrollHideDelay,l]),L.useEffect(()=>{const c=s.viewport,d=o?"scrollLeft":"scrollTop";if(c){let u=c[d];const h=()=>{const f=c[d];u!==f&&(l("SCROLL"),r()),u=f};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[s.viewport,o,l,r]),g.jsx(qr,{present:t||a!=="hidden",children:g.jsx($Z,{"data-state":a==="hidden"?"hidden":"visible",...i,ref:e,onPointerEnter:$e(n.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:$e(n.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),i0e=L.forwardRef((n,e)=>{const t=lc(Ku,n.__scopeScrollArea),{forceMount:i,...s}=n,[o,r]=L.useState(!1),a=n.orientation==="horizontal",l=JF(()=>{if(t.viewport){const c=t.viewport.offsetWidth<t.viewport.scrollWidth,d=t.viewport.offsetHeight<t.viewport.scrollHeight;r(a?c:d)}},10);return l1(t.viewport,l),l1(t.content,l),g.jsx(qr,{present:i||o,children:g.jsx($Z,{"data-state":o?"visible":"hidden",...s,ref:e})})}),$Z=L.forwardRef((n,e)=>{const{orientation:t="vertical",...i}=n,s=lc(Ku,n.__scopeScrollArea),o=L.useRef(null),r=L.useRef(0),[a,l]=L.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=a0e(a.viewport,a.content),d={...i,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>r.current=0,onThumbPointerDown:h=>r.current=h};function u(h,f){return Hst(h,r.current,a,f)}return t==="horizontal"?g.jsx(Ast,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,f=Hse(h,a,s.dir);o.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=u(h,s.dir))}}):t==="vertical"?g.jsx(Ost,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,f=Hse(h,a);o.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=u(h))}}):null}),Ast=L.forwardRef((n,e)=>{const{sizes:t,onSizesChange:i,...s}=n,o=lc(Ku,n.__scopeScrollArea),[r,a]=L.useState(),l=L.useRef(null),c=oi(e,l,o.onScrollbarXChange);return L.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),g.jsx(s0e,{"data-orientation":"horizontal",...s,ref:c,sizes:t,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":QF(t)+"px",...n.style},onThumbPointerDown:d=>n.onThumbPointerDown(d.x),onDragScroll:d=>n.onDragScroll(d.x),onWheelScroll:(d,u)=>{if(o.viewport){const h=o.viewport.scrollLeft+d.deltaX;n.onWheelScroll(h),c0e(h,u)&&d.preventDefault()}},onResize:()=>{l.current&&o.viewport&&r&&i({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:GP(r.paddingLeft),paddingEnd:GP(r.paddingRight)}})}})}),Ost=L.forwardRef((n,e)=>{const{sizes:t,onSizesChange:i,...s}=n,o=lc(Ku,n.__scopeScrollArea),[r,a]=L.useState(),l=L.useRef(null),c=oi(e,l,o.onScrollbarYChange);return L.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),g.jsx(s0e,{"data-orientation":"vertical",...s,ref:c,sizes:t,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":QF(t)+"px",...n.style},onThumbPointerDown:d=>n.onThumbPointerDown(d.y),onDragScroll:d=>n.onDragScroll(d.y),onWheelScroll:(d,u)=>{if(o.viewport){const h=o.viewport.scrollTop+d.deltaY;n.onWheelScroll(h),c0e(h,u)&&d.preventDefault()}},onResize:()=>{l.current&&o.viewport&&r&&i({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:GP(r.paddingTop),paddingEnd:GP(r.paddingBottom)}})}})}),[Fst,n0e]=Qve(Ku),s0e=L.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:i,hasThumb:s,onThumbChange:o,onThumbPointerUp:r,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:u,...h}=n,f=lc(Ku,t),[m,p]=L.useState(null),b=oi(e,E=>p(E)),v=L.useRef(null),w=L.useRef(""),y=f.viewport,C=i.content-i.viewport,S=Gn(d),x=Gn(l),k=JF(u,10);function N(E){if(v.current){const B=E.clientX-v.current.left,A=E.clientY-v.current.top;c({x:B,y:A})}}return L.useEffect(()=>{const E=B=>{const A=B.target;(m==null?void 0:m.contains(A))&&S(B,C)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[y,m,C,S]),L.useEffect(x,[i,x]),l1(m,k),l1(f.content,k),g.jsx(Fst,{scope:t,scrollbar:m,hasThumb:s,onThumbChange:Gn(o),onThumbPointerUp:Gn(r),onThumbPositionChange:x,onThumbPointerDown:Gn(a),children:g.jsx(Et.div,{...h,ref:b,style:{position:"absolute",...h.style},onPointerDown:$e(n.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),v.current=m.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),N(E))}),onPointerMove:$e(n.onPointerMove,N),onPointerUp:$e(n.onPointerUp,E=>{const B=E.target;B.hasPointerCapture(E.pointerId)&&B.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=w.current,f.viewport&&(f.viewport.style.scrollBehavior=""),v.current=null})})})}),qP="ScrollAreaThumb",o0e=L.forwardRef((n,e)=>{const{forceMount:t,...i}=n,s=n0e(qP,n.__scopeScrollArea);return g.jsx(qr,{present:t||s.hasThumb,children:g.jsx(Bst,{ref:e,...i})})}),Bst=L.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:i,...s}=n,o=lc(qP,t),r=n0e(qP,t),{onThumbPositionChange:a}=r,l=oi(e,u=>r.onThumbChange(u)),c=L.useRef(void 0),d=JF(()=>{c.current&&(c.current(),c.current=void 0)},100);return L.useEffect(()=>{const u=o.viewport;if(u){const h=()=>{if(d(),!c.current){const f=Vst(u,a);c.current=f,a()}};return a(),u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[o.viewport,d,a]),g.jsx(Et.div,{"data-state":r.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:$e(n.onPointerDownCapture,u=>{const f=u.target.getBoundingClientRect(),m=u.clientX-f.left,p=u.clientY-f.top;r.onThumbPointerDown({x:m,y:p})}),onPointerUp:$e(n.onPointerUp,r.onThumbPointerUp)})});o0e.displayName=qP;var KZ="ScrollAreaCorner",r0e=L.forwardRef((n,e)=>{const t=lc(KZ,n.__scopeScrollArea),i=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&i?g.jsx(Wst,{...n,ref:e}):null});r0e.displayName=KZ;var Wst=L.forwardRef((n,e)=>{const{__scopeScrollArea:t,...i}=n,s=lc(KZ,t),[o,r]=L.useState(0),[a,l]=L.useState(0),c=!!(o&&a);return l1(s.scrollbarX,()=>{var u;const d=((u=s.scrollbarX)==null?void 0:u.offsetHeight)||0;s.onCornerHeightChange(d),l(d)}),l1(s.scrollbarY,()=>{var u;const d=((u=s.scrollbarY)==null?void 0:u.offsetWidth)||0;s.onCornerWidthChange(d),r(d)}),c?g.jsx(Et.div,{...i,ref:e,style:{width:o,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function GP(n){return n?parseInt(n,10):0}function a0e(n,e){const t=n/e;return isNaN(t)?0:t}function QF(n){const e=a0e(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,i=(n.scrollbar.size-t)*e;return Math.max(i,18)}function Hst(n,e,t,i="ltr"){const s=QF(t),o=s/2,r=e||o,a=s-r,l=t.scrollbar.paddingStart+r,c=t.scrollbar.size-t.scrollbar.paddingEnd-a,d=t.content-t.viewport,u=i==="ltr"?[0,d]:[d*-1,0];return l0e([l,c],u)(n)}function Hse(n,e,t="ltr"){const i=QF(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,r=e.content-e.viewport,a=o-i,l=t==="ltr"?[0,r]:[r*-1,0],c=JN(n,l);return l0e([0,r],[0,a])(c)}function l0e(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(n[1]-n[0]);return e[0]+i*(t-n[0])}}function c0e(n,e){return n>0&&n<e}var Vst=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},i=0;return function s(){const o={left:n.scrollLeft,top:n.scrollTop},r=t.left!==o.left,a=t.top!==o.top;(r||a)&&e(),t=o,i=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(i)};function JF(n,e){const t=Gn(n),i=L.useRef(0);return L.useEffect(()=>()=>window.clearTimeout(i.current),[]),L.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(t,e)},[t,e])}function l1(n,e){const t=Gn(e);Ro(()=>{let i=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(i),s.unobserve(n)}}},[n,t])}var d0e=Jve,jst=t0e,zst=r0e;const u0e=L.forwardRef(({className:n,children:e,...t},i)=>g.jsxs(d0e,{ref:i,className:Yt("relative overflow-hidden",n),...t,children:[g.jsx(jst,{className:"h-full w-full rounded-[inherit]",children:e}),g.jsx(h0e,{}),g.jsx(zst,{})]}));u0e.displayName=d0e.displayName;const h0e=L.forwardRef(({className:n,orientation:e="vertical",...t},i)=>g.jsx(UZ,{ref:i,orientation:e,className:Yt("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 border-t border-t-transparent p-[1px]",n),...t,children:g.jsx(o0e,{className:"relative flex-1 rounded-full bg-border"})}));h0e.displayName=UZ.displayName;async function Ust(n,e=!1){try{return(await(await sy("POST","/api/chat",{messages:n.map(s=>({role:s.role,content:s.content})),isVoiceMode:e})).json()).message}catch(t){return console.error("Error getting chat response:",t),{role:"assistant",content:"I encountered an error processing your request. Please try again."}}}function $st({projectId:n,projectName:e,files:t,currentFile:i,onApplySuggestion:s}){const[o,r]=L.useState(""),[a,l]=L.useState([]),[c,d]=L.useState(!0),[u,h]=L.useState(!1),[f,m]=L.useState(!1),[p,b]=L.useState(!1),v=L.useRef(null),w=L.useRef(null),{toast:y}=Aa();L.useEffect(()=>{var W;(W=w.current)==null||W.scrollIntoView({behavior:"smooth"})},[a]);const C=()=>{window.speechSynthesis&&(window.speechSynthesis.cancel(),m(!1))},S=W=>{console.log("Starting speech synthesis...");const T=W.replace(/```[\s\S]*?```/g,"Code block omitted for speech.");if(!window.speechSynthesis){console.error("Speech synthesis not available in this browser"),y({title:"Speech Error",description:"Speech synthesis not supported in this browser",variant:"destructive"});return}C(),y({title:"Speaking...",description:"Text-to-speech activated",duration:3e3});const M=new SpeechSynthesisUtterance(T);M.rate=1,M.volume=1,M.onstart=()=>{console.log("Speech started"),m(!0)},M.onend=()=>{console.log("Speech ended"),m(!1)},M.onerror=z=>{console.error("Speech error occurred:",z),m(!1)};try{window.speechSynthesis.speak(M),console.log("Speaking request sent")}catch(z){console.error("Error speaking:",z),m(!1)}};L.useEffect(()=>{if(a.length>0){const W=a[a.length-1];W.role==="assistant"&&!f&&S(W.content)}c&&f&&C()},[a,c,f]);const x=()=>{if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){const W=window.SpeechRecognition||window.webkitSpeechRecognition,T=new W;T.continuous=!1,T.interimResults=!1,T.lang="en-US",T.onstart=()=>{b(!0),y({title:"Voice Recognition Active",description:"Speak now..."})},T.onresult=M=>{const z=M.results[0][0].transcript;r(z),setTimeout(()=>{N()},500)},T.onerror=M=>{console.error("Speech recognition error",M.error),b(!1),y({title:"Voice Recognition Error",description:M.error,variant:"destructive"})},T.onend=()=>{b(!1)},T.start()}else y({title:"Voice Recognition Not Supported",description:"Your browser doesn't support the Speech Recognition API.",variant:"destructive"})},k=W=>{const T=/```([a-zA-Z0-9_]+)?\n([\s\S]*?)```/g,M=[];let z;for(;(z=T.exec(W))!==null;){const ee=z[1]||"java",q=z[2].trim();q.length<10||M.push({code:q,language:ee,description:`Generated ${ee} code`,suggestedCode:q,originalCode:(i==null?void 0:i.content)||"",fileId:i==null?void 0:i.path})}return M},N=async()=>{if(!o.trim())return;const W={role:"user",content:o};i&&(W.content+=`

Context: I'm currently working on the file ${i.path} with content:
\`\`\`${A(i.name)}
${i.content}
\`\`\``),l(T=>[...T,W]),r(""),h(!0);try{const T=!c,M=await Ust([...a,W],T);l(z=>[...z,M]),h(!1),!c&&!f&&S(M.content)}catch(T){console.error("Error communicating with Claude:",T),y({title:"Claude Error",description:"There was a problem connecting to Claude. Please try again.",variant:"destructive"}),h(!1)}},E=W=>{s&&(s(W),y({title:"Code Applied",description:"The code suggestion has been applied to the editor."}))},B=()=>{d(!c)},A=W=>{var M;const T=(M=W.split(".").pop())==null?void 0:M.toLowerCase();if(!T)return"text";switch(T){case"java":return"java";case"json":return"json";case"xml":return"xml";case"properties":return"properties";case"txt":return"text";case"md":return"markdown";case"gradle":return"groovy";case"toml":return"toml";default:return"text"}},O=(W,T)=>{const M=W.role==="assistant"?k(W.content):[],z=W.content.replace(/```([a-zA-Z0-9_]+)?\n([\s\S]*?)```/g,(ee,q,Z)=>'<div class="code-block-placeholder"></div>');return g.jsx("div",{className:`flex ${W.role==="user"?"justify-end":"justify-start"} mb-4`,children:g.jsxs("div",{className:`rounded-lg p-3 max-w-[85%] ${W.role==="user"?"bg-blue-600/30 text-blue-50":"bg-gray-800/70 text-gray-200"}`,children:[g.jsx("div",{className:"text-sm whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:z.split('<div class="code-block-placeholder"></div>').map(ee=>ee.replace(/\n/g,"<br/>")).join('<div class="code-block-placeholder"></div>')}}),M.map((ee,q)=>g.jsxs(Bt,{className:"mt-3 bg-gray-900/70 border-gray-700 overflow-hidden",children:[g.jsxs("div",{className:"flex justify-between items-center px-3 py-1.5 bg-gray-800/90 border-b border-gray-700",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(f$,{className:"h-3.5 w-3.5 text-blue-400"}),g.jsx("span",{className:"text-xs text-gray-300",children:ee.language||"code"})]}),g.jsxs("div",{className:"flex items-center space-x-1",children:[g.jsx(Se,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>E(ee),children:g.jsx(zn,{className:"h-3.5 w-3.5 text-green-400"})}),g.jsx(Se,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>navigator.clipboard.writeText(ee.code),children:g.jsx(QL,{className:"h-3.5 w-3.5 text-gray-400"})})]})]}),g.jsx("pre",{className:"p-3 text-xs overflow-x-auto text-gray-300",children:g.jsx("code",{children:ee.code})})]},q))]})},T)};return g.jsxs("div",{className:"border-b border-gray-700 bg-gray-800/30 flex flex-col transition-all duration-300",children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5 border-b border-gray-700 bg-gray-800/50",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"flex-shrink-0 bg-blue-600/20 rounded-full p-1.5",children:g.jsx(IR,{className:"h-4 w-4 text-blue-400"})}),g.jsx("h3",{className:"text-sm font-medium text-gray-200",children:"Claude Code Assistant"}),!c&&g.jsx(kce,{variant:"secondary",className:"ml-2 text-xs",children:a.length>0?`${a.length} messages`:"AI Assistant"})]}),g.jsx(Se,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:B,children:c?g.jsx(XO,{className:"h-4 w-4 text-gray-400"}):g.jsx(Uae,{className:"h-4 w-4 text-gray-400"})})]}),c?g.jsxs(g.Fragment,{children:[g.jsx(u0e,{className:"flex-grow overflow-y-auto",children:g.jsxs("div",{className:"p-4",children:[a.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[g.jsx("div",{className:"rounded-full bg-blue-600/20 p-3 mb-3",children:g.jsx(dT,{className:"h-6 w-6 text-blue-400"})}),g.jsx("h3",{className:"text-sm font-medium text-gray-200 mb-1",children:"Claude Code Assistant"}),g.jsx("p",{className:"text-xs text-gray-400 max-w-[260px] mb-4",children:"Trained on NeoForge 1.21.5 modding API and best practices."}),g.jsxs("div",{className:"text-xs text-left text-gray-300 bg-gray-800/50 p-3 rounded-md mb-2 max-w-[300px]",children:[g.jsx("p",{className:"font-medium mb-2",children:"Try asking:"}),g.jsxs("ul",{className:"space-y-2",children:[g.jsx("li",{children:"• How do I register a custom item?"}),g.jsx("li",{children:"• Explain how entity pathfinding works"}),g.jsx("li",{children:"• Example of custom ore generation"})]})]})]}):g.jsxs(g.Fragment,{children:[!p&&g.jsxs("div",{className:"flex flex-col items-end gap-2 mb-4",children:[g.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-800/70 px-2 py-1 rounded text-xs text-gray-400",children:[g.jsx(W_,{className:"h-3 w-3"}),g.jsx("span",{children:"Voice mode disabled in expanded view"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Se,{variant:f?"secondary":"outline",size:"sm",className:`h-7 w-7 p-0 ${f?"bg-blue-600/50 border-blue-500":"border-gray-600"}`,onClick:f?C:()=>{const W=[...a].reverse().find(T=>T.role==="assistant");W&&S(W.content)},title:f?"Stop speaking":"Play last response",children:f?g.jsx(NX,{className:"h-3.5 w-3.5 text-white"}):g.jsx(V5,{className:"h-3.5 w-3.5 text-blue-400"})}),g.jsxs(Se,{variant:"default",size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white h-6 px-2 flex items-center gap-1 text-xs rounded-sm",onClick:()=>{const W=[...a].reverse().find(T=>T.role==="assistant");W&&S(W.content)},title:"Replay last response",disabled:f,children:[g.jsx(kX,{className:"h-3 w-3"}),g.jsx("span",{className:"text-xs",children:"Replay"})]})]})]}),a.map((W,T)=>O(W,T))]}),g.jsx("div",{ref:w})]})}),g.jsxs("div",{className:"p-3 bg-gray-800/30 border-t border-gray-700",children:[g.jsxs("div",{className:"relative",children:[g.jsx(zv,{ref:v,value:o,onChange:W=>r(W.target.value),placeholder:"Ask about NeoForge 1.21.5...",className:"min-h-[60px] resize-none pr-[70px] bg-gray-900/60 border-gray-700 text-sm",onKeyDown:W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),N())},disabled:u}),g.jsx("div",{className:"absolute bottom-2 right-2",children:g.jsx(Se,{variant:"ghost",size:"sm",disabled:u||!o.trim(),onClick:N,className:"h-8 w-8 p-0",children:u?g.jsx("div",{className:"h-4 w-4 border-2 border-t-transparent border-blue-500 rounded-full animate-spin"}):g.jsx(wSe,{className:"h-4 w-4"})})})]}),g.jsx("div",{className:"mt-2 text-xs text-gray-500 text-right",children:i&&g.jsxs("span",{children:["Working with: ",g.jsx("span",{className:"text-blue-400",children:i.name})]})})]})]}):g.jsxs("div",{className:"p-3 flex items-center justify-between bg-gray-800/60 border-t border-gray-700",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"flex-shrink-0 bg-blue-600/30 rounded-full p-1.5",children:g.jsx(V5,{className:"h-4 w-4 text-blue-400"})}),g.jsx("div",{className:"flex-grow",children:a.length>0?g.jsxs("div",{className:"text-sm text-gray-300 truncate max-w-[200px]",children:[g.jsx("span",{className:"text-xs font-medium text-blue-400",children:"Voice mode:"})," ",a[a.length-1].content.replace(/```[\s\S]*?```/g,"[code]").substring(0,50),a[a.length-1].content.length>50&&"..."]}):g.jsxs("div",{className:"text-sm text-gray-300",children:[g.jsx("span",{className:"text-xs font-medium text-blue-400",children:"Voice mode active"})," - Ready for commands"]})})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Se,{variant:f?"secondary":"outline",size:"sm",className:`h-8 w-8 p-0 ${f?"bg-blue-600/50 border-blue-500":"border-gray-600"}`,onClick:f?C:()=>{a.length>0?S(a[a.length-1].content):S("Hello, I'm Claude, your AI assistant for NeoForge modding. How can I help you today?")},title:f?"Stop speaking":"Play last response",children:f?g.jsx(NX,{className:"h-4 w-4 text-white"}):g.jsx(V5,{className:"h-4 w-4 text-blue-400"})}),a.length>0&&g.jsxs(Se,{variant:"default",size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white h-6 px-2 flex items-center gap-1 text-xs rounded-sm",onClick:()=>{a.length>0&&S(a[a.length-1].content)},title:"Replay last response",disabled:f,children:[g.jsx(kX,{className:"h-3 w-3"}),g.jsx("span",{className:"text-xs",children:"Replay"})]}),g.jsx(Se,{variant:p?"secondary":"outline",size:"sm",className:`h-8 w-8 p-0 ${p?"bg-green-600/50 border-green-500":"border-gray-600"}`,onClick:x,disabled:p||u,title:"Voice input",children:g.jsx(mSe,{className:`h-4 w-4 ${p?"text-white":"text-green-400"}`})}),u&&g.jsx("div",{className:"h-5 w-5 ml-1 border-2 border-t-transparent border-blue-500 rounded-full animate-spin"})]})]})]})}const Kst={projectName:"",setProjectName:()=>{},projectStructure:[],setProjectStructure:()=>{},selectedFile:null,selectFile:()=>{},updateFileContent:()=>{},consoleOutput:[],addConsoleEntry:()=>{},clearConsole:()=>{},chatMessages:[],addUserMessage:()=>{},isClaudeThinking:!1,continueDevelopment:()=>{},fixError:()=>{},resetChat:()=>{},buildMod:()=>{},runMod:()=>{},saveMod:()=>{}},qst=L.createContext(Kst);function Gst(){const n=L.useContext(qst);if(n===void 0)throw new Error("useAppContext must be used within an AppProvider");return n}Xve();function Zst({initialContent:n="",language:e="java",fileId:t,fileName:i="Untitled.java",onSave:s,isReadOnly:o=!1,onFileSelect:r,projectStructure:a=[]}){const[l,c]=L.useState(null),[d,u]=L.useState(n),[h,f]=L.useState(!1),[m,p]=L.useState([]),[b,v]=L.useState(!1),[w,y]=L.useState(""),[C,S]=L.useState(!1),{toast:x}=Aa(),{selectFile:k}=Gst();L.useEffect(()=>{if(typeof window>"u")return;const T=document.getElementById("monaco-editor-container");if(!T)return;l&&l.dispose();const M=KC.create(T,{value:n,language:e,theme:"vs-dark",automaticLayout:!0,minimap:{enabled:!0},readOnly:o,scrollBeyondLastLine:!1,fontSize:14,lineNumbers:"on",wordWrap:"on",renderLineHighlight:"all",roundedSelection:!0,cursorBlinking:"smooth"});c(M);const z=M.getModel();if(z){const ee=z.onDidChangeContent(()=>{u(M.getValue())});return()=>{ee.dispose(),M.dispose()}}return()=>{M.dispose()}},[n,e,o]),L.useEffect(()=>{const T=()=>{l&&l.layout()};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[l]);const N=L.useCallback(()=>{s&&(s(d),x({title:"File saved",description:`${i} has been saved successfully.`}))},[d,i,s,x]);L.useEffect(()=>{const T=M=>{(M.ctrlKey||M.metaKey)&&M.key==="s"&&(M.preventDefault(),N())};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[N]);const E=T=>{if(!l||!t||T.fileId!==t)return;const M=l.getModel();if(M){if(T.startLine!==void 0&&T.endLine!==void 0){const z={lineNumber:T.startLine,column:1},ee={lineNumber:T.endLine+1,column:1};l.executeEdits("suggestion",[{range:new LF(z.lineNumber,z.column,ee.lineNumber,ee.column),text:T.suggestedCode}])}else if(T.originalCode){const z=M.getValue(),ee=z.replace(T.originalCode,T.suggestedCode);z!==ee?l.setValue(ee):l.setValue(z+`

`+T.suggestedCode)}else{const z=M.getValue();l.setValue(z+`

`+T.suggestedCode)}x({title:"Code applied",description:T.description||"Suggested code has been applied."}),p(m.filter(z=>z!==T))}},B=T=>{var M;return((M=T.split(".").pop())==null?void 0:M.toLowerCase())||""},A=T=>{const M=B(T);return["java","js","ts","jsx","tsx","py","c","cpp","cs"].includes(M)?g.jsx(f$,{className:"h-4 w-4 mr-1"}):["json","xml","yml","yaml","toml","md","txt"].includes(M)?g.jsx(cT,{className:"h-4 w-4 mr-1"}):g.jsx(cT,{className:"h-4 w-4 mr-1"})},O=T=>{let M=[];const z=ee=>{for(const q of ee)q.type==="file"?M.push(q):q.type==="folder"&&q.children&&z(q.children)};return z(T),M},W=()=>{const T=O(a);if(!w)return T;const M=w.toLowerCase();return T.filter(z=>z.name.toLowerCase().includes(M)||z.path.toLowerCase().includes(M))};return L.useEffect(()=>{const T=M=>{const z=M;z.detail&&t&&z.detail.fileId===t&&(p(ee=>[...ee,z.detail]),x({title:"New code suggestion",description:"Claude has suggested code changes for this file."}))};return window.addEventListener("codeSuggestion",T),()=>window.removeEventListener("codeSuggestion",T)},[t,x]),g.jsxs("div",{className:`flex flex-col ${h?"fixed inset-0 z-50 bg-gray-900":"h-full"}`,children:[g.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-800 border-b border-gray-700",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsxs(Se,{size:"sm",variant:"ghost",onClick:()=>v(!b),className:"h-8 text-xs text-gray-300 flex items-center mr-2 hover:bg-gray-700",children:[g.jsx(cT,{className:"h-4 w-4 mr-1"})," Open Files"]}),g.jsx("div",{className:"text-sm font-mono text-gray-300",children:i})]}),g.jsxs("div",{className:"flex gap-2",children:[!o&&g.jsx(Se,{size:"sm",variant:"outline",onClick:N,className:"h-8 text-xs bg-gray-700 hover:bg-gray-600",children:"Save"}),g.jsx(Se,{size:"sm",variant:"ghost",onClick:()=>f(!h),className:"h-8 w-8 p-0",children:h?g.jsx(pSe,{className:"h-4 w-4"}):g.jsx(gSe,{className:"h-4 w-4"})})]})]}),b&&g.jsxs("div",{className:"absolute top-10 left-0 z-30 w-64 bg-gray-800 border border-gray-700 shadow-lg rounded-md",children:[g.jsxs("div",{className:"flex items-center p-1 border-b border-gray-700",children:[g.jsx(Se,{size:"sm",variant:"ghost",onClick:()=>S(!C),className:"h-8 w-8 mr-1 flex items-center justify-center",children:g.jsx(m$,{className:"h-4 w-4"})}),C&&g.jsxs("div",{className:"flex-1 flex items-center",children:[g.jsx(va,{type:"text",value:w,onChange:T=>y(T.target.value),placeholder:"Search files...",className:"h-8 text-sm bg-gray-900 border-gray-700"}),w&&g.jsx(Se,{size:"sm",variant:"ghost",onClick:()=>y(""),className:"h-8 w-8 ml-1",children:g.jsx(g1,{className:"h-4 w-4"})})]})]}),g.jsx("div",{className:"max-h-60 overflow-y-auto p-1",children:g.jsxs("div",{className:"flex flex-col gap-1",children:[W().map((T,M)=>g.jsxs(Se,{variant:"ghost",size:"sm",onClick:()=>{r?r(T):k(T),v(!1)},className:`h-8 justify-start text-xs flex items-center whitespace-nowrap 
                    ${t===T.path?"bg-gray-700 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[A(T.name),g.jsx("span",{className:"truncate",children:T.name})]},M)),W().length===0&&g.jsx("div",{className:"text-xs text-gray-400 py-1 px-2",children:"No files match your search"})]})})]}),g.jsx("div",{className:"relative flex-1",children:g.jsx("div",{id:"monaco-editor-container",className:"absolute inset-0"})}),m.length>0&&g.jsxs("div",{className:"p-2 bg-gray-800 border-t border-gray-700 max-h-40 overflow-y-auto",children:[g.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Code Suggestions"}),g.jsx("div",{className:"space-y-2",children:m.map((T,M)=>g.jsx(Bt,{className:"p-2 bg-gray-700",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("div",{className:"text-xs text-gray-300",children:T.description||"Code suggestion"}),g.jsxs(Se,{size:"sm",variant:"outline",onClick:()=>E(T),className:"h-7 text-xs bg-emerald-800 hover:bg-emerald-700 border-emerald-700",children:[g.jsx(zn,{className:"h-3 w-3 mr-1"})," Apply"]})]})},M))})]})]})}var Yst={};function Xst({open:n,onOpenChange:e,editor:t,file:i}){const{toast:s}=Aa(),[o,r]=L.useState(!1),[a,l]=L.useState(!0),[c,d]=L.useState([]),[u,h]=L.useState(null);L.useEffect(()=>{if(!Yve||!t)return;const w=(()=>{var S;if(!i)return"java";const C=(S=i.name.split(".").pop())==null?void 0:S.toLowerCase();if(!C)return"java";switch(C){case"java":return"java";case"json":return"json";case"xml":return"xml";case"properties":return"properties";case"txt":return"text";case"md":return"markdown";case"gradle":return"groovy";case"toml":return"toml";default:return"java"}})(),y=Gt.registerCompletionItemProvider(w,{triggerCharacters:[".","@","#","(","{","[","<"," ",`
`],provideCompletionItems:async(C,S)=>{if(!a)return{suggestions:[]};try{const x=C.getWordUntilPosition(S),k={startLineNumber:S.lineNumber,startColumn:x.startColumn,endLineNumber:S.lineNumber,endColumn:x.endColumn},N=C.getLineContent(S.lineNumber),E=[];for(let B=Math.max(1,S.lineNumber-10);B<S.lineNumber;B++)E.push(C.getLineContent(B));if(await new Promise(B=>setTimeout(B,300)),Yst.ANTHROPIC_API_KEY){r(!0);const B=f(N,E.join(`
`),i,w,k);return d(B),r(!1),{suggestions:B.map(A=>({label:A.displayText,kind:A.kind,insertText:A.text,range:A.range,detail:A.detail,documentation:A.documentation,insertTextRules:A.insertTextRules}))}}}catch(x){console.error("Error in completion provider:",x),r(!1)}return{suggestions:[]}}});return()=>{y.dispose()}},[t,i,a]);const f=(v,w,y,C,S)=>{if(C==="java")return v.includes("Block")||w.includes("Block")?[{text:"registerDefaultState(this.stateDefinition.any().setValue(BlockStateProperties.FACING, Direction.NORTH));",displayText:"Register default block state with FACING property",range:S,kind:Gt.CompletionItemKind.Snippet,detail:"Initialize block with default state (NeoForge 1.21)",documentation:"Sets up a block with a default state using the FACING property. Common for directional blocks like furnaces, hoppers, etc."},{text:["@Override","public void animateTick(BlockState state, Level level, BlockPos pos, RandomSource random) {","    // Add particle effects here","    if (random.nextInt(5) == 0) {","        level.addParticle(","            ParticleTypes.FLAME,","            pos.getX() + 0.5D + random.nextDouble() * 0.4D - 0.2D,","            pos.getY() + 0.5D + random.nextDouble() * 0.4D - 0.2D,","            pos.getZ() + 0.5D + random.nextDouble() * 0.4D - 0.2D,","            0.0D, 0.0D, 0.0D);","    }","}"].join(`
`),displayText:"Override animateTick() method for particle effects",range:S,kind:Gt.CompletionItemKind.Snippet,detail:"Add particle effects to your block",documentation:"Implements the animateTick method which is called randomly to create particle effects for a block."}]:v.includes("Item")||w.includes("Item")?[{text:["public class ${1:CustomItem} extends Item {","    public ${1:CustomItem}() {","        super(new Item.Properties().stacksTo(1));","    }","    ","    @Override","    public InteractionResultHolder<ItemStack> use(Level level, Player player, InteractionHand hand) {","        ItemStack stack = player.getItemInHand(hand);","        // Add custom behavior here","        return InteractionResultHolder.success(stack);","    }","}"].join(`
`),displayText:"Create a custom item with use() override",range:S,kind:Gt.CompletionItemKind.Snippet,detail:"Template for a custom item with use action",documentation:"Creates a new item class with an overridden use method for handling right-click actions. This is a modern NeoForge 1.21 implementation.",insertTextRules:Gt.CompletionItemInsertTextRule.InsertAsSnippet},{text:'registry.register(registration -> registration.register(ITEMS, new ResourceLocation(MOD_ID, "${1:item_name}"), () -> new Item(new Item.Properties())));',displayText:"Register a new item with the Item Registry",range:S,kind:Gt.CompletionItemKind.Snippet,detail:"NeoForge 1.21 item registration",documentation:"Registers a new item using the modern NeoForge 1.21 registry system.",insertTextRules:Gt.CompletionItemInsertTextRule.InsertAsSnippet}]:v.includes("Entity")||w.includes("Entity")?[{text:["@Override","public void tick() {","    super.tick();","    // Add custom entity behavior here","    if (!this.level.isClientSide) {","        // Server-side logic","    } else {","        // Client-side effects","    }","}"].join(`
`),displayText:"Override entity tick() method with client/server logic",range:S,kind:Gt.CompletionItemKind.Snippet,detail:"Entity update logic for both client and server",documentation:"Implements the tick method with separated client and server-side logic. The tick method is called every game tick (20 times per second)."}]:[{text:["/**"," * ${1:Description}"," * "," * @param ${2:param} ${3:description}"," * @return ${4:description}"," */","public ${5:ReturnType} ${6:methodName}(${7:Parameters}) {","    ${0}","}"].join(`
`),displayText:"Create a new method with Javadoc",range:S,kind:Gt.CompletionItemKind.Snippet,detail:"Method with documentation",documentation:"Creates a new method with properly formatted Javadoc comments.",insertTextRules:Gt.CompletionItemInsertTextRule.InsertAsSnippet}];if(C==="json"){if(y.name.includes("model")||y.path.includes("models"))return[{text:["{",'  "parent": "minecraft:block/cube",','  "textures": {','    "particle": "${1:modid}:block/${2:block_name}",','    "north": "${1:modid}:block/${2:block_name}",','    "south": "${1:modid}:block/${2:block_name}",','    "east": "${1:modid}:block/${2:block_name}",','    "west": "${1:modid}:block/${2:block_name}",','    "up": "${1:modid}:block/${2:block_name}_top",','    "down": "${1:modid}:block/${2:block_name}_bottom"',"  }","}"].join(`
`),displayText:"Block model with different top/bottom textures",range:S,kind:Gt.CompletionItemKind.Snippet,detail:"Minecraft block model JSON",documentation:"Creates a block model that uses the cube parent with different textures for top and bottom faces.",insertTextRules:Gt.CompletionItemInsertTextRule.InsertAsSnippet}];if(y.name.includes("blockstate")||y.path.includes("blockstates"))return[{text:["{",'  "variants": {','    "facing=north": { "model": "${1:modid}:block/${2:block_name}" },','    "facing=east": { "model": "${1:modid}:block/${2:block_name}", "y": 90 },','    "facing=south": { "model": "${1:modid}:block/${2:block_name}", "y": 180 },','    "facing=west": { "model": "${1:modid}:block/${2:block_name}", "y": 270 }',"  }","}"].join(`
`),displayText:"Blockstate with facing variants",range:S,kind:Gt.CompletionItemKind.Snippet,detail:"Minecraft blockstate definition with facing",documentation:"Creates blockstate definitions for a block with a 'facing' property, rotating the model appropriately.",insertTextRules:Gt.CompletionItemInsertTextRule.InsertAsSnippet}];if(y.name.includes("recipe")||y.path.includes("recipes"))return[{text:["{",'  "type": "minecraft:crafting_shaped",','  "pattern": [','    "XXX",','    "XYX",','    "XXX"',"  ],",'  "key": {','    "X": {','      "item": "minecraft:iron_ingot"',"    },",'    "Y": {','      "tag": "forge:gems/diamond"',"    }","  },",'  "result": {','    "item": "${1:modid}:${2:item_name}",','    "count": 1',"  }","}"].join(`
`),displayText:"Shaped crafting recipe template",range:S,kind:Gt.CompletionItemKind.Snippet,detail:"Minecraft crafting recipe",documentation:"Creates a shaped crafting recipe with a 3x3 pattern using iron ingots and a diamond.",insertTextRules:Gt.CompletionItemInsertTextRule.InsertAsSnippet}]}return[{text:"// TODO: Implement this method",displayText:"TODO: Implement this method",range:S,kind:Gt.CompletionItemKind.Snippet,detail:"Add a TODO comment",documentation:"Adds a TODO reminder to implement a method."}]},m=v=>{h(v)},p=()=>{if(!t||!u)return;const v=u.text,w=u.range;t.executeEdits("suggestion",[{range:{startLineNumber:w.startLineNumber,startColumn:w.startColumn,endLineNumber:w.endLineNumber,endColumn:w.endColumn},text:v}]),s({title:"Suggestion Applied",description:"The code suggestion has been applied to your file."}),e(!1)},b=()=>{l(!a),s({title:a?"Autocomplete Disabled":"Autocomplete Enabled",description:a?"NeoForge intelligent code completion has been turned off.":"NeoForge intelligent code completion is now active."})};return g.jsx(g.Fragment,{children:g.jsx(cf,{open:n,onOpenChange:e,children:g.jsxs(yu,{className:"max-w-4xl bg-gray-900 border-gray-700 text-white",children:[g.jsxs(Cu,{children:[g.jsxs(Su,{className:"text-xl text-white flex items-center",children:[g.jsx(g$,{className:"h-6 w-6 mr-2 text-amber-400"}),"Intelligent Code Completion"]}),g.jsx(xu,{className:"text-gray-400",children:"Claude-powered NeoForge 1.21.5 context-aware code suggestions"})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4",children:[g.jsxs("div",{className:"col-span-2 border border-gray-700 rounded-md overflow-hidden",children:[g.jsxs("div",{className:"bg-gray-800 px-3 py-2 border-b border-gray-700 flex justify-between items-center",children:[g.jsx("h3",{className:"font-medium text-sm text-gray-300",children:"Available Suggestions"}),g.jsx(Se,{variant:a?"default":"outline",size:"sm",onClick:b,className:"h-7 text-xs",children:a?"Enabled":"Disabled"})]}),g.jsx("div",{className:"p-2 space-y-2 max-h-80 overflow-y-auto",children:o?g.jsx("div",{className:"flex justify-center items-center h-20",children:g.jsx(Qi,{className:"h-6 w-6 animate-spin text-blue-400"})}):c.length>0?c.map((v,w)=>g.jsxs("div",{className:`p-2 rounded cursor-pointer transition-colors ${u===v?"bg-blue-900/30 text-blue-300":"hover:bg-gray-800 text-gray-300"}`,onClick:()=>m(v),children:[g.jsx("div",{className:"font-medium text-sm truncate",children:v.displayText}),g.jsx("div",{className:"text-xs text-gray-500 mt-1 truncate",children:v.detail})]},w)):g.jsx("div",{className:"text-center text-gray-500 py-4",children:"No suggestions available for this context"})})]}),g.jsxs("div",{className:"col-span-3 border border-gray-700 rounded-md overflow-hidden",children:[g.jsx("div",{className:"bg-gray-800 px-3 py-2 border-b border-gray-700",children:g.jsx("h3",{className:"font-medium text-sm text-gray-300",children:"Suggestion Preview"})}),g.jsx("div",{className:"p-4",children:u?g.jsxs(g.Fragment,{children:[g.jsx("h4",{className:"text-white font-medium mb-2",children:u.displayText}),g.jsx("div",{className:"text-gray-400 text-sm mb-4",children:u.documentation}),g.jsx("div",{className:"bg-gray-950 rounded-md p-3 mb-4 overflow-x-auto",children:g.jsx("pre",{className:"text-sm text-green-400 font-mono",children:u.text})}),g.jsxs("div",{className:"flex justify-end",children:[g.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>e(!1),className:"mr-2",children:[g.jsx(g1,{className:"h-4 w-4 mr-1"}),"Cancel"]}),g.jsxs(Se,{onClick:p,children:[g.jsx(zn,{className:"h-4 w-4 mr-1"}),"Apply Suggestion"]})]})]}):g.jsx("div",{className:"text-center text-gray-500 py-10",children:"Select a suggestion to see details and preview"})})]})]})]})})})}var Qst="Separator",Vse="horizontal",Jst=["horizontal","vertical"],f0e=L.forwardRef((n,e)=>{const{decorative:t,orientation:i=Vse,...s}=n,o=eot(i)?i:Vse,a=t?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return g.jsx(Et.div,{"data-orientation":o,...a,...s,ref:e})});f0e.displayName=Qst;function eot(n){return Jst.includes(n)}var g0e=f0e;const m0e=L.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...i},s)=>g.jsx(g0e,{ref:s,decorative:t,orientation:e,className:Yt("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...i}));m0e.displayName=g0e.displayName;function tot({projectId:n}){const{toast:e}=Aa(),[t,i]=L.useState(!1),[s,o]=L.useState("1.20.4"),[r,a]=L.useState(""),[l,c]=L.useState(""),[d,u]=L.useState(1),[h,f]=L.useState(!1),[m,p]=L.useState([]),[b,v]=L.useState("overview"),w=()=>{i(!0)},y=()=>{o("1.20.4"),a(""),c(""),u(1),f(!1),p([]),v("overview")},C=()=>{f(!0),setTimeout(()=>{p([{name:"Update Item Registration",description:"Replace DeferredRegister with new ComponentRegistry",status:"complete",before:`public static final DeferredRegister<Item> ITEMS = DeferredRegister.create(ForgeRegistries.ITEMS, MODID);
public static final RegistryObject<Item> EXAMPLE_ITEM = ITEMS.register("example_item", () -> new Item(new Item.Properties()));`,after:`// NeoForge 1.21 uses components instead of inheritance
private static final ComponentKey<DataComponentType<FoodComponent, ItemStack>> FOOD_COMPONENT = ComponentKey.get(ResourceLocation.fromNamespaceAndPath("forge", "food"), DataComponentType.class);

// In your registration method
public static void registerItems(ComponentRegistry registry) {
    registry.register(registration -> {
        registration.register(ITEMS, new ResourceLocation(MODID, "example_item"), () -> new Item());
    });
}`},{name:"Update SwordItem Implementation",description:"Replace SwordItem inheritance with DataComponents",status:"complete",before:`public class CustomSword extends SwordItem {
    public CustomSword() {
        super(Tiers.IRON, 3, -2.4F, new Item.Properties());
    }
}`,after:`public class CustomSword extends Item {
    public CustomSword() {
        super(new Item.Properties());
    }
    
    // During registration:
    registry.register(reg -> {
        reg.register(ITEMS, new ResourceLocation(MODID, "custom_sword"), 
            () -> new CustomSword().setData(ItemComponentsKeys.DURABILITY, new Item.DurabilityComponent(Tiers.IRON.getUses()))
                .setData(ItemComponentsKeys.MELEE_WEAPON, new Item.MeleeWeaponComponent(3.0f, Tiers.IRON.getAttackDamageBonus() + 3, -2.4f))
        );
    });
}`},{name:"Update BlockItem Registration",description:"Update BlockItem to use component-based registry",status:"pending",before:`public static final RegistryObject<Block> EXAMPLE_BLOCK = BLOCKS.register("example_block", 
    () -> new Block(BlockBehaviour.Properties.of().mapColor(MapColor.STONE)));

public static final RegistryObject<Item> EXAMPLE_BLOCK_ITEM = ITEMS.register("example_block",
    () -> new BlockItem(EXAMPLE_BLOCK.get(), new Item.Properties()));`,after:""},{name:"Update Entity Registration",description:"Migrate to EntityRegistry with component-based entities",status:"in_progress",before:`public static final DeferredRegister<EntityType<?>> ENTITIES = DeferredRegister.create(ForgeRegistries.ENTITY_TYPES, MODID);
          
public static final RegistryObject<EntityType<CustomEntity>> CUSTOM_ENTITY = ENTITIES.register("custom_entity",
    () -> EntityType.Builder.of(CustomEntity::new, MobCategory.CREATURE)
        .sized(0.9F, 1.3F)
        .build(new ResourceLocation(MODID, "custom_entity").toString()));`,after:"// Work in progress - NeoForge 1.21 uses a component-based entity system"},{name:"Update Creative Tab",description:"Migrate to new CreativeTabRegistry format",status:"error",details:"Unable to automatically convert custom CreativeModeTab implementation",before:`public static final RegistryObject<CreativeModeTab> EXAMPLE_TAB = CREATIVE_MODE_TABS.register("example_tab", 
    () -> CreativeModeTab.builder()
        .title(Component.translatable("itemGroup." + MODID + ".example_tab"))
        .icon(() -> new ItemStack(EXAMPLE_ITEM.get()))
        .displayItems((parameters, output) -> {
            output.accept(EXAMPLE_ITEM.get());
            // Add more items here
        })
        .build());`,after:""}]),f(!1),u(2)},3e3)},S=()=>{e({title:"Migration Applied",description:"The migration changes have been applied to your project."}),u(3)},x=()=>g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"source-version",children:"Source Minecraft Version"}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:["1.20.1","1.20.2","1.20.4","1.21.1"].map(E=>g.jsx(Se,{variant:s===E?"default":"outline",onClick:()=>o(E),className:`${s===E?"border-blue-500":"border-gray-700"}`,children:E},E))})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"source-code",children:"Source Code"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"source-url",className:"text-sm text-gray-400",children:"GitHub Repository URL (Optional)"}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx(va,{id:"source-url",placeholder:"https://github.com/username/repo",value:r,onChange:E=>a(E.target.value),className:"bg-gray-800 border-gray-700"}),g.jsx(Se,{variant:"outline",disabled:!0,children:"Import"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"source-code-paste",className:"text-sm text-gray-400",children:"Or paste code samples to migrate"}),g.jsx(zv,{id:"source-code-paste",placeholder:"Paste your mod's code here...",value:l,onChange:E=>c(E.target.value),className:"min-h-[200px] bg-gray-800 border-gray-700"})]})]})]}),g.jsx("div",{className:"flex justify-end pt-4",children:g.jsxs(Se,{onClick:C,disabled:h,children:[h&&g.jsx(Qi,{className:"mr-2 h-4 w-4 animate-spin"}),h?"Analyzing...":"Start Migration Analysis"]})})]}),k=()=>g.jsx("div",{className:"space-y-6",children:g.jsxs(hf,{value:b,onValueChange:v,className:"w-full",children:[g.jsxs(ku,{className:"grid grid-cols-2 w-full",children:[g.jsx(Tn,{value:"overview",children:"Migration Overview"}),g.jsx(Tn,{value:"details",children:"Code Changes"})]}),g.jsxs(Rn,{value:"overview",className:"space-y-4 pt-4",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"border border-gray-700 rounded-lg overflow-hidden",children:[g.jsx("div",{className:"bg-gray-800 px-4 py-3 border-b border-gray-700",children:g.jsx("h3",{className:"font-medium text-white",children:"Migration Tasks"})}),g.jsx("div",{className:"divide-y divide-gray-700",children:m.map((E,B)=>g.jsxs("div",{className:"p-4 flex items-center",children:[g.jsxs("div",{className:"mr-3",children:[E.status==="complete"&&g.jsx(zn,{className:"h-5 w-5 text-green-500"}),E.status==="in_progress"&&g.jsx(Qi,{className:"h-5 w-5 text-amber-500 animate-spin"}),E.status==="pending"&&g.jsx(W_,{className:"h-5 w-5 text-blue-500"}),E.status==="error"&&g.jsx(Rg,{className:"h-5 w-5 text-red-500"})]}),g.jsxs("div",{className:"flex-grow",children:[g.jsx("h4",{className:"font-medium text-white",children:E.name}),g.jsx("p",{className:"text-sm text-gray-400",children:E.description}),E.details&&g.jsx("p",{className:"text-sm text-red-400 mt-1",children:E.details})]}),g.jsx("div",{children:g.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>{v("details")},children:"View Changes"})})]},B))})]}),g.jsx("div",{className:"bg-amber-950/20 border border-amber-900/50 rounded-lg p-4",children:g.jsxs("div",{className:"flex",children:[g.jsx(W_,{className:"h-5 w-5 text-amber-500 mr-2 flex-shrink-0 mt-0.5"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-medium text-amber-400",children:"Migration Summary"}),g.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["This migration will update your mod from NeoForge ",s," to 1.21.5, making the following key changes:"]}),g.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 mt-2 space-y-1",children:[g.jsx("li",{children:"Replace inheritance-based items with component-based system"}),g.jsx("li",{children:"Update registration from DeferredRegister to ComponentRegistry"}),g.jsx("li",{children:"Migrate SwordItem implementation to use DataComponents"}),g.jsx("li",{children:"Update entity registration system"}),g.jsx("li",{children:"Update creative tab registration"})]})]})]})})]}),g.jsxs("div",{className:"flex justify-end pt-4",children:[g.jsx(Se,{variant:"outline",onClick:()=>u(1),className:"mr-2",children:"Back"}),g.jsx(Se,{onClick:S,children:"Apply Migrations"})]})]}),g.jsxs(Rn,{value:"details",className:"pt-4",children:[g.jsx("div",{className:"space-y-4",children:m.map((E,B)=>g.jsx(Bt,{className:"bg-gray-800/50 border-gray-700",children:g.jsxs("div",{className:"p-4",children:[g.jsxs("div",{className:"flex items-center mb-3",children:[E.status==="complete"&&g.jsx(zn,{className:"h-5 w-5 text-green-500 mr-2"}),E.status==="in_progress"&&g.jsx(Qi,{className:"h-5 w-5 text-amber-500 animate-spin mr-2"}),E.status==="pending"&&g.jsx(W_,{className:"h-5 w-5 text-blue-500 mr-2"}),E.status==="error"&&g.jsx(Rg,{className:"h-5 w-5 text-red-500 mr-2"}),g.jsx("h3",{className:"font-medium text-white",children:E.name})]}),g.jsx("p",{className:"text-sm text-gray-400 mb-4",children:E.description}),E.before&&E.after&&g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"bg-gray-900 p-2 rounded-t-md text-sm text-gray-400 border-t border-l border-r border-gray-700",children:["Before (",s,")"]}),g.jsx("div",{className:"bg-red-950/20 border border-red-900/40 rounded-b-md p-3",children:g.jsx("pre",{className:"text-xs text-red-300 font-mono overflow-x-auto whitespace-pre-wrap",children:E.before})})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"bg-gray-900 p-2 rounded-t-md text-sm text-gray-400 border-t border-l border-r border-gray-700 flex items-center",children:[g.jsx(X1e,{className:"h-4 w-4 mr-1 text-green-500"}),"After (1.21.5)"]}),g.jsx("div",{className:"bg-green-950/20 border border-green-900/40 rounded-b-md p-3",children:g.jsx("pre",{className:"text-xs text-green-300 font-mono overflow-x-auto whitespace-pre-wrap",children:E.after||"No changes required"})})]})]}),E.status==="error"&&g.jsx("div",{className:"mt-4 bg-red-950/20 border border-red-900/40 rounded-md p-3",children:g.jsx("p",{className:"text-sm text-red-400",children:E.details})})]})},B))}),g.jsxs("div",{className:"flex justify-end pt-4",children:[g.jsx(Se,{variant:"outline",onClick:()=>v("overview"),className:"mr-2",children:"Back to Overview"}),g.jsx(Se,{onClick:S,children:"Apply Migrations"})]})]})]})}),N=()=>g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"rounded-lg bg-green-900/20 border border-green-800 p-6 text-center",children:[g.jsx("div",{className:"h-12 w-12 rounded-full bg-green-900/50 flex items-center justify-center mx-auto mb-4",children:g.jsx(zn,{className:"h-6 w-6 text-green-400"})}),g.jsx("h3",{className:"text-xl font-medium text-green-400 mb-2",children:"Migration Complete!"}),g.jsx("p",{className:"text-gray-300",children:"Your mod has been successfully migrated to NeoForge 1.21.5."})]}),g.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4",children:[g.jsx("h4",{className:"font-medium text-white mb-2",children:"Next Steps"}),g.jsxs("ul",{className:"space-y-2",children:[g.jsxs("li",{className:"flex",children:[g.jsx(zn,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0"}),g.jsx("span",{className:"text-gray-300",children:"Test your mod to ensure all functionality works as expected"})]}),g.jsxs("li",{className:"flex",children:[g.jsx(zn,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0"}),g.jsx("span",{className:"text-gray-300",children:"Review the manual migration tasks that need attention"})]}),g.jsxs("li",{className:"flex",children:[g.jsx(zn,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0"}),g.jsx("span",{className:"text-gray-300",children:"Check for any warnings or errors in the console during runtime"})]})]})]}),g.jsx("div",{className:"flex justify-end pt-4",children:g.jsx(Se,{onClick:()=>{i(!1),y()},children:"Close"})})]});return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsxs("div",{className:"bg-gray-800/30 px-4 py-3 border-b border-gray-700 flex justify-between items-center",children:[g.jsx("h2",{className:"text-lg font-medium text-white",children:"Mod Migration Wizard"}),g.jsxs(Se,{onClick:w,children:[g.jsx(Tg,{className:"h-4 w-4 mr-2"}),"Start Migration"]})]}),g.jsxs("div",{className:"flex-grow p-4 overflow-auto",children:[g.jsxs("div",{className:"rounded-lg bg-gray-800/50 border border-gray-700 p-6 text-center",children:[g.jsx("div",{className:"rounded-full bg-blue-900/20 p-3 inline-flex mb-4",children:g.jsx(Tg,{className:"h-8 w-8 text-blue-400"})}),g.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"Migrate Your Minecraft Mod"}),g.jsx("p",{className:"text-gray-400 mb-6 max-w-md mx-auto",children:"Automatically update your mod from previous versions to NeoForge 1.21.5 using Claude-powered code transformation."}),g.jsxs(Se,{onClick:w,children:[g.jsx(Tg,{className:"h-4 w-4 mr-2"}),"Start Migration Wizard"]})]}),g.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs(Bt,{className:"bg-gray-800/30 border-gray-700 p-4",children:[g.jsx("h4",{className:"font-medium text-white mb-2",children:"Key Migration Features"}),g.jsxs("ul",{className:"space-y-2 text-sm",children:[g.jsxs("li",{className:"flex",children:[g.jsx(zn,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),g.jsx("span",{className:"text-gray-300",children:"Automatic code transformation for NeoForge 1.21.5"})]}),g.jsxs("li",{className:"flex",children:[g.jsx(zn,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),g.jsx("span",{className:"text-gray-300",children:"Migration from inheritance to component-based systems"})]}),g.jsxs("li",{className:"flex",children:[g.jsx(zn,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),g.jsx("span",{className:"text-gray-300",children:"Updates to registry and registration methods"})]}),g.jsxs("li",{className:"flex",children:[g.jsx(zn,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),g.jsx("span",{className:"text-gray-300",children:"Step-by-step wizard with detailed explanations"})]})]})]}),g.jsxs(Bt,{className:"bg-gray-800/30 border-gray-700 p-4",children:[g.jsx("h4",{className:"font-medium text-white mb-2",children:"Supported Versions"}),g.jsxs("div",{className:"space-y-3 text-sm",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-gray-400 mb-1",children:"Source Versions:"}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsx("span",{className:"px-2 py-1 bg-gray-700 rounded text-blue-300",children:"1.20.1"}),g.jsx("span",{className:"px-2 py-1 bg-gray-700 rounded text-blue-300",children:"1.20.2"}),g.jsx("span",{className:"px-2 py-1 bg-green-900/30 rounded text-green-400 border border-green-900/50",children:"1.20.4"}),g.jsx("span",{className:"px-2 py-1 bg-gray-700 rounded text-blue-300",children:"1.21.1"})]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-gray-400 mb-1",children:"Target Version:"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:g.jsx("span",{className:"px-2 py-1 bg-green-900/30 rounded text-green-400 border border-green-900/50",children:"NeoForge 1.21.5"})})]})]})]})]})]})]}),g.jsx(cf,{open:t,onOpenChange:i,children:g.jsxs(yu,{className:"max-w-4xl bg-gray-900 border-gray-700 text-white",children:[g.jsxs(Cu,{children:[g.jsxs(Su,{className:"text-xl text-white flex items-center",children:[g.jsx(Tg,{className:"h-6 w-6 mr-2 text-blue-400"}),"Mod Migration Wizard"]}),g.jsxs(xu,{className:"text-gray-400",children:["Update your mod from ",s," to NeoForge 1.21.5"]})]}),g.jsxs("div",{className:"w-full flex items-center mb-6",children:[g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"relative flex items-center justify-center",children:[g.jsx("div",{className:`z-10 flex items-center justify-center w-8 h-8 rounded-full ${d>=1?"bg-blue-600":"bg-gray-700"}`,children:d>1?g.jsx(zn,{className:"h-5 w-5 text-white"}):g.jsx("span",{className:"text-white text-sm",children:"1"})}),g.jsx("div",{className:"absolute top-4 -left-1/2 right-1/2 h-0.5 bg-gray-700 z-0",children:g.jsx("div",{className:"h-full bg-blue-600 transition-all",style:{width:d>1?"100%":"0%"}})}),g.jsx("div",{className:"absolute top-4 -right-1/2 left-1/2 h-0.5 bg-gray-700 z-0",children:g.jsx("div",{className:"h-full bg-blue-600 transition-all",style:{width:d>1?"100%":"0%"}})})]}),g.jsx("div",{className:"text-center mt-2",children:g.jsx("span",{className:`text-sm ${d===1?"text-white font-medium":"text-gray-400"}`,children:"Source Code"})})]}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"relative flex items-center justify-center",children:[g.jsx("div",{className:`z-10 flex items-center justify-center w-8 h-8 rounded-full ${d>=2?"bg-blue-600":"bg-gray-700"}`,children:d>2?g.jsx(zn,{className:"h-5 w-5 text-white"}):g.jsx("span",{className:"text-white text-sm",children:"2"})}),g.jsx("div",{className:"absolute top-4 -left-1/2 right-1/2 h-0.5 bg-gray-700 z-0",children:g.jsx("div",{className:"h-full bg-blue-600 transition-all",style:{width:d>2?"100%":"0%"}})}),g.jsx("div",{className:"absolute top-4 -right-1/2 left-1/2 h-0.5 bg-gray-700 z-0",children:g.jsx("div",{className:"h-full bg-blue-600 transition-all",style:{width:d>2?"100%":"0%"}})})]}),g.jsx("div",{className:"text-center mt-2",children:g.jsx("span",{className:`text-sm ${d===2?"text-white font-medium":"text-gray-400"}`,children:"Migration Plan"})})]}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"relative flex items-center justify-center",children:[g.jsx("div",{className:`z-10 flex items-center justify-center w-8 h-8 rounded-full ${d>=3?"bg-blue-600":"bg-gray-700"}`,children:g.jsx("span",{className:"text-white text-sm",children:"3"})}),g.jsx("div",{className:"absolute top-4 -left-1/2 right-1/2 h-0.5 bg-gray-700 z-0",children:g.jsx("div",{className:"h-full bg-blue-600 transition-all",style:{width:d>3?"100%":"0%"}})})]}),g.jsx("div",{className:"text-center mt-2",children:g.jsx("span",{className:`text-sm ${d===3?"text-white font-medium":"text-gray-400"}`,children:"Complete"})})]})]}),g.jsx(m0e,{className:"bg-gray-700"}),g.jsxs("div",{className:"mt-4",children:[d===1&&x(),d===2&&k(),d===3&&N()]})]})})]})}function p0e(n){const e=L.useRef({value:n,previous:n});return L.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var iot=[" ","Enter","ArrowUp","ArrowDown"],not=[" ","Enter"],oE="Select",[e5,t5,sot]=cI(oE),[Z1,pdt]=sc(oE,[sot,w1]),i5=w1(),[oot,yp]=Z1(oE),[rot,aot]=Z1(oE),_0e=n=>{const{__scopeSelect:e,children:t,open:i,defaultOpen:s,onOpenChange:o,value:r,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:h,required:f,form:m}=n,p=i5(e),[b,v]=L.useState(null),[w,y]=L.useState(null),[C,S]=L.useState(!1),x=_1(c),[k=!1,N]=af({prop:i,defaultProp:s,onChange:o}),[E,B]=af({prop:r,defaultProp:a,onChange:l}),A=L.useRef(null),O=b?m||!!b.closest("form"):!0,[W,T]=L.useState(new Set),M=Array.from(W).map(z=>z.props.value).join(";");return g.jsx(j$,{...p,children:g.jsxs(oot,{required:f,scope:e,trigger:b,onTriggerChange:v,valueNode:w,onValueNodeChange:y,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:qc(),value:E,onValueChange:B,open:k,onOpenChange:N,dir:x,triggerPointerDownPosRef:A,disabled:h,children:[g.jsx(e5.Provider,{scope:e,children:g.jsx(rot,{scope:n.__scopeSelect,onNativeOptionAdd:L.useCallback(z=>{T(ee=>new Set(ee).add(z))},[]),onNativeOptionRemove:L.useCallback(z=>{T(ee=>{const q=new Set(ee);return q.delete(z),q})},[]),children:t})}),O?g.jsxs(j0e,{"aria-hidden":!0,required:f,tabIndex:-1,name:d,autoComplete:u,value:E,onChange:z=>B(z.target.value),disabled:h,form:m,children:[E===void 0?g.jsx("option",{value:""}):null,Array.from(W)]},M):null]})})};_0e.displayName=oE;var b0e="SelectTrigger",v0e=L.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:i=!1,...s}=n,o=i5(t),r=yp(b0e,t),a=r.disabled||i,l=oi(e,r.onTriggerChange),c=t5(t),d=L.useRef("touch"),[u,h,f]=z0e(p=>{const b=c().filter(y=>!y.disabled),v=b.find(y=>y.value===r.value),w=U0e(b,p,v);w!==void 0&&r.onValueChange(w.value)}),m=p=>{a||(r.onOpenChange(!0),f()),p&&(r.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return g.jsx(z$,{asChild:!0,...o,children:g.jsx(Et.button,{type:"button",role:"combobox","aria-controls":r.contentId,"aria-expanded":r.open,"aria-required":r.required,"aria-autocomplete":"none",dir:r.dir,"data-state":r.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":V0e(r.value)?"":void 0,...s,ref:l,onClick:$e(s.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&m(p)}),onPointerDown:$e(s.onPointerDown,p=>{d.current=p.pointerType;const b=p.target;b.hasPointerCapture(p.pointerId)&&b.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(m(p),p.preventDefault())}),onKeyDown:$e(s.onKeyDown,p=>{const b=u.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(b&&p.key===" ")&&iot.includes(p.key)&&(m(),p.preventDefault())})})})});v0e.displayName=b0e;var w0e="SelectValue",y0e=L.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:s,children:o,placeholder:r="",...a}=n,l=yp(w0e,t),{onValueNodeHasChildrenChange:c}=l,d=o!==void 0,u=oi(e,l.onValueNodeChange);return Ro(()=>{c(d)},[c,d]),g.jsx(Et.span,{...a,ref:u,style:{pointerEvents:"none"},children:V0e(l.value)?g.jsx(g.Fragment,{children:r}):o})});y0e.displayName=w0e;var lot="SelectIcon",C0e=L.forwardRef((n,e)=>{const{__scopeSelect:t,children:i,...s}=n;return g.jsx(Et.span,{"aria-hidden":!0,...s,ref:e,children:i||"▼"})});C0e.displayName=lot;var cot="SelectPortal",S0e=n=>g.jsx(dI,{asChild:!0,...n});S0e.displayName=cot;var Wv="SelectContent",x0e=L.forwardRef((n,e)=>{const t=yp(Wv,n.__scopeSelect),[i,s]=L.useState();if(Ro(()=>{s(new DocumentFragment)},[]),!t.open){const o=i;return o?jv.createPortal(g.jsx(L0e,{scope:n.__scopeSelect,children:g.jsx(e5.Slot,{scope:n.__scopeSelect,children:g.jsx("div",{children:n.children})})}),o):null}return g.jsx(k0e,{...n,ref:e})});x0e.displayName=Wv;var Cc=10,[L0e,Cp]=Z1(Wv),dot="SelectContentImpl",uot=nv("SelectContent.RemoveScroll"),k0e=L.forwardRef((n,e)=>{const{__scopeSelect:t,position:i="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:r,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:f,sticky:m,hideWhenDetached:p,avoidCollisions:b,...v}=n,w=yp(Wv,t),[y,C]=L.useState(null),[S,x]=L.useState(null),k=oi(e,Ee=>C(Ee)),[N,E]=L.useState(null),[B,A]=L.useState(null),O=t5(t),[W,T]=L.useState(!1),M=L.useRef(!1);L.useEffect(()=>{if(y)return I$(y)},[y]),N$();const z=L.useCallback(Ee=>{const[it,...Ge]=O().map(ve=>ve.ref.current),[J]=Ge.slice(-1),Le=document.activeElement;for(const ve of Ee)if(ve===Le||(ve==null||ve.scrollIntoView({block:"nearest"}),ve===it&&S&&(S.scrollTop=0),ve===J&&S&&(S.scrollTop=S.scrollHeight),ve==null||ve.focus(),document.activeElement!==Le))return},[O,S]),ee=L.useCallback(()=>z([N,y]),[z,N,y]);L.useEffect(()=>{W&&ee()},[W,ee]);const{onOpenChange:q,triggerPointerDownPosRef:Z}=w;L.useEffect(()=>{if(y){let Ee={x:0,y:0};const it=J=>{var Le,ve;Ee={x:Math.abs(Math.round(J.pageX)-(((Le=Z.current)==null?void 0:Le.x)??0)),y:Math.abs(Math.round(J.pageY)-(((ve=Z.current)==null?void 0:ve.y)??0))}},Ge=J=>{Ee.x<=10&&Ee.y<=10?J.preventDefault():y.contains(J.target)||q(!1),document.removeEventListener("pointermove",it),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",it),document.addEventListener("pointerup",Ge,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",it),document.removeEventListener("pointerup",Ge,{capture:!0})}}},[y,q,Z]),L.useEffect(()=>{const Ee=()=>q(!1);return window.addEventListener("blur",Ee),window.addEventListener("resize",Ee),()=>{window.removeEventListener("blur",Ee),window.removeEventListener("resize",Ee)}},[q]);const[V,le]=z0e(Ee=>{const it=O().filter(Le=>!Le.disabled),Ge=it.find(Le=>Le.ref.current===document.activeElement),J=U0e(it,Ee,Ge);J&&setTimeout(()=>J.ref.current.focus())}),Fe=L.useCallback((Ee,it,Ge)=>{const J=!M.current&&!Ge;(w.value!==void 0&&w.value===it||J)&&(E(Ee),J&&(M.current=!0))},[w.value]),ke=L.useCallback(()=>y==null?void 0:y.focus(),[y]),De=L.useCallback((Ee,it,Ge)=>{const J=!M.current&&!Ge;(w.value!==void 0&&w.value===it||J)&&A(Ee)},[w.value]),ce=i==="popper"?sU:N0e,Re=ce===sU?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:f,sticky:m,hideWhenDetached:p,avoidCollisions:b}:{};return g.jsx(L0e,{scope:t,content:y,viewport:S,onViewportChange:x,itemRefCallback:Fe,selectedItem:N,onItemLeave:ke,itemTextRefCallback:De,focusSelectedItem:ee,selectedItemText:B,position:i,isPositioned:W,searchRef:V,children:g.jsx(s4,{as:uot,allowPinchZoom:!0,children:g.jsx(i4,{asChild:!0,trapped:w.open,onMountAutoFocus:Ee=>{Ee.preventDefault()},onUnmountAutoFocus:$e(s,Ee=>{var it;(it=w.trigger)==null||it.focus({preventScroll:!0}),Ee.preventDefault()}),children:g.jsx(f1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:Ee=>Ee.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:g.jsx(ce,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Ee=>Ee.preventDefault(),...v,...Re,onPlaced:()=>T(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:$e(v.onKeyDown,Ee=>{const it=Ee.ctrlKey||Ee.altKey||Ee.metaKey;if(Ee.key==="Tab"&&Ee.preventDefault(),!it&&Ee.key.length===1&&le(Ee.key),["ArrowUp","ArrowDown","Home","End"].includes(Ee.key)){let J=O().filter(Le=>!Le.disabled).map(Le=>Le.ref.current);if(["ArrowUp","End"].includes(Ee.key)&&(J=J.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ee.key)){const Le=Ee.target,ve=J.indexOf(Le);J=J.slice(ve+1)}setTimeout(()=>z(J)),Ee.preventDefault()}})})})})})})});k0e.displayName=dot;var hot="SelectItemAlignedPosition",N0e=L.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:i,...s}=n,o=yp(Wv,t),r=Cp(Wv,t),[a,l]=L.useState(null),[c,d]=L.useState(null),u=oi(e,k=>d(k)),h=t5(t),f=L.useRef(!1),m=L.useRef(!0),{viewport:p,selectedItem:b,selectedItemText:v,focusSelectedItem:w}=r,y=L.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&c&&p&&b&&v){const k=o.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),E=o.valueNode.getBoundingClientRect(),B=v.getBoundingClientRect();if(o.dir!=="rtl"){const Le=B.left-N.left,ve=E.left-Le,nt=k.left-ve,St=k.width+nt,zi=Math.max(St,N.width),hs=window.innerWidth-Cc,Bs=JN(ve,[Cc,Math.max(Cc,hs-zi)]);a.style.minWidth=St+"px",a.style.left=Bs+"px"}else{const Le=N.right-B.right,ve=window.innerWidth-E.right-Le,nt=window.innerWidth-k.right-ve,St=k.width+nt,zi=Math.max(St,N.width),hs=window.innerWidth-Cc,Bs=JN(ve,[Cc,Math.max(Cc,hs-zi)]);a.style.minWidth=St+"px",a.style.right=Bs+"px"}const A=h(),O=window.innerHeight-Cc*2,W=p.scrollHeight,T=window.getComputedStyle(c),M=parseInt(T.borderTopWidth,10),z=parseInt(T.paddingTop,10),ee=parseInt(T.borderBottomWidth,10),q=parseInt(T.paddingBottom,10),Z=M+z+W+q+ee,V=Math.min(b.offsetHeight*5,Z),le=window.getComputedStyle(p),Fe=parseInt(le.paddingTop,10),ke=parseInt(le.paddingBottom,10),De=k.top+k.height/2-Cc,ce=O-De,Re=b.offsetHeight/2,Ee=b.offsetTop+Re,it=M+z+Ee,Ge=Z-it;if(it<=De){const Le=A.length>0&&b===A[A.length-1].ref.current;a.style.bottom="0px";const ve=c.clientHeight-p.offsetTop-p.offsetHeight,nt=Math.max(ce,Re+(Le?ke:0)+ve+ee),St=it+nt;a.style.height=St+"px"}else{const Le=A.length>0&&b===A[0].ref.current;a.style.top="0px";const nt=Math.max(De,M+p.offsetTop+(Le?Fe:0)+Re)+Ge;a.style.height=nt+"px",p.scrollTop=it-De+p.offsetTop}a.style.margin=`${Cc}px 0`,a.style.minHeight=V+"px",a.style.maxHeight=O+"px",i==null||i(),requestAnimationFrame(()=>f.current=!0)}},[h,o.trigger,o.valueNode,a,c,p,b,v,o.dir,i]);Ro(()=>y(),[y]);const[C,S]=L.useState();Ro(()=>{c&&S(window.getComputedStyle(c).zIndex)},[c]);const x=L.useCallback(k=>{k&&m.current===!0&&(y(),w==null||w(),m.current=!1)},[y,w]);return g.jsx(got,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:x,children:g.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:g.jsx(Et.div,{...s,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});N0e.displayName=hot;var fot="SelectPopperPosition",sU=L.forwardRef((n,e)=>{const{__scopeSelect:t,align:i="start",collisionPadding:s=Cc,...o}=n,r=i5(t);return g.jsx(U$,{...r,...o,ref:e,align:i,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});sU.displayName=fot;var[got,qZ]=Z1(Wv,{}),oU="SelectViewport",I0e=L.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:i,...s}=n,o=Cp(oU,t),r=qZ(oU,t),a=oi(e,o.onViewportChange),l=L.useRef(0);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),g.jsx(e5.Slot,{scope:t,children:g.jsx(Et.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:$e(s.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:h}=r;if(h!=null&&h.current&&u){const f=Math.abs(l.current-d.scrollTop);if(f>0){const m=window.innerHeight-Cc*2,p=parseFloat(u.style.minHeight),b=parseFloat(u.style.height),v=Math.max(p,b);if(v<m){const w=v+f,y=Math.min(m,w),C=w-y;u.style.height=y+"px",u.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,u.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});I0e.displayName=oU;var E0e="SelectGroup",[mot,pot]=Z1(E0e),_ot=L.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=qc();return g.jsx(mot,{scope:t,id:s,children:g.jsx(Et.div,{role:"group","aria-labelledby":s,...i,ref:e})})});_ot.displayName=E0e;var D0e="SelectLabel",T0e=L.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=pot(D0e,t);return g.jsx(Et.div,{id:s.id,...i,ref:e})});T0e.displayName=D0e;var ZP="SelectItem",[bot,R0e]=Z1(ZP),M0e=L.forwardRef((n,e)=>{const{__scopeSelect:t,value:i,disabled:s=!1,textValue:o,...r}=n,a=yp(ZP,t),l=Cp(ZP,t),c=a.value===i,[d,u]=L.useState(o??""),[h,f]=L.useState(!1),m=oi(e,w=>{var y;return(y=l.itemRefCallback)==null?void 0:y.call(l,w,i,s)}),p=qc(),b=L.useRef("touch"),v=()=>{s||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.jsx(bot,{scope:t,value:i,disabled:s,textId:p,isSelected:c,onItemTextChange:L.useCallback(w=>{u(y=>y||((w==null?void 0:w.textContent)??"").trim())},[]),children:g.jsx(e5.ItemSlot,{scope:t,value:i,disabled:s,textValue:d,children:g.jsx(Et.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...r,ref:m,onFocus:$e(r.onFocus,()=>f(!0)),onBlur:$e(r.onBlur,()=>f(!1)),onClick:$e(r.onClick,()=>{b.current!=="mouse"&&v()}),onPointerUp:$e(r.onPointerUp,()=>{b.current==="mouse"&&v()}),onPointerDown:$e(r.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:$e(r.onPointerMove,w=>{var y;b.current=w.pointerType,s?(y=l.onItemLeave)==null||y.call(l):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e(r.onPointerLeave,w=>{var y;w.currentTarget===document.activeElement&&((y=l.onItemLeave)==null||y.call(l))}),onKeyDown:$e(r.onKeyDown,w=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&w.key===" "||(not.includes(w.key)&&v(),w.key===" "&&w.preventDefault())})})})})});M0e.displayName=ZP;var _x="SelectItemText",P0e=L.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:s,...o}=n,r=yp(_x,t),a=Cp(_x,t),l=R0e(_x,t),c=aot(_x,t),[d,u]=L.useState(null),h=oi(e,v=>u(v),l.onItemTextChange,v=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,v,l.value,l.disabled)}),f=d==null?void 0:d.textContent,m=L.useMemo(()=>g.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:p,onNativeOptionRemove:b}=c;return Ro(()=>(p(m),()=>b(m)),[p,b,m]),g.jsxs(g.Fragment,{children:[g.jsx(Et.span,{id:l.textId,...o,ref:h}),l.isSelected&&r.valueNode&&!r.valueNodeHasChildren?jv.createPortal(o.children,r.valueNode):null]})});P0e.displayName=_x;var A0e="SelectItemIndicator",O0e=L.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return R0e(A0e,t).isSelected?g.jsx(Et.span,{"aria-hidden":!0,...i,ref:e}):null});O0e.displayName=A0e;var rU="SelectScrollUpButton",F0e=L.forwardRef((n,e)=>{const t=Cp(rU,n.__scopeSelect),i=qZ(rU,n.__scopeSelect),[s,o]=L.useState(!1),r=oi(e,i.onScrollButtonChange);return Ro(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;o(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?g.jsx(W0e,{...n,ref:r,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});F0e.displayName=rU;var aU="SelectScrollDownButton",B0e=L.forwardRef((n,e)=>{const t=Cp(aU,n.__scopeSelect),i=qZ(aU,n.__scopeSelect),[s,o]=L.useState(!1),r=oi(e,i.onScrollButtonChange);return Ro(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;o(d)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?g.jsx(W0e,{...n,ref:r,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});B0e.displayName=aU;var W0e=L.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:i,...s}=n,o=Cp("SelectScrollButton",t),r=L.useRef(null),a=t5(t),l=L.useCallback(()=>{r.current!==null&&(window.clearInterval(r.current),r.current=null)},[]);return L.useEffect(()=>()=>l(),[l]),Ro(()=>{var d;const c=a().find(u=>u.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),g.jsx(Et.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:$e(s.onPointerDown,()=>{r.current===null&&(r.current=window.setInterval(i,50))}),onPointerMove:$e(s.onPointerMove,()=>{var c;(c=o.onItemLeave)==null||c.call(o),r.current===null&&(r.current=window.setInterval(i,50))}),onPointerLeave:$e(s.onPointerLeave,()=>{l()})})}),vot="SelectSeparator",H0e=L.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return g.jsx(Et.div,{"aria-hidden":!0,...i,ref:e})});H0e.displayName=vot;var lU="SelectArrow",wot=L.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=i5(t),o=yp(lU,t),r=Cp(lU,t);return o.open&&r.position==="popper"?g.jsx($$,{...s,...i,ref:e}):null});wot.displayName=lU;function V0e(n){return n===""||n===void 0}var j0e=L.forwardRef((n,e)=>{const{value:t,...i}=n,s=L.useRef(null),o=oi(e,s),r=p0e(t);return L.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(r!==t&&d){const u=new Event("change",{bubbles:!0});d.call(a,t),a.dispatchEvent(u)}},[r,t]),g.jsx(uI,{asChild:!0,children:g.jsx("select",{...i,ref:o,defaultValue:t})})});j0e.displayName="BubbleSelect";function z0e(n){const e=Gn(n),t=L.useRef(""),i=L.useRef(0),s=L.useCallback(r=>{const a=t.current+r;e(a),function l(c){t.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),o=L.useCallback(()=>{t.current="",window.clearTimeout(i.current)},[]);return L.useEffect(()=>()=>window.clearTimeout(i.current),[]),[t,s,o]}function U0e(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let r=yot(n,Math.max(o,0));s.length===1&&(r=r.filter(c=>c!==t));const l=r.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function yot(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var Cot=_0e,$0e=v0e,Sot=y0e,xot=C0e,Lot=S0e,K0e=x0e,kot=I0e,q0e=T0e,G0e=M0e,Not=P0e,Iot=O0e,Z0e=F0e,Y0e=B0e,X0e=H0e;const Nr=Cot,Ir=Sot,Go=L.forwardRef(({className:n,children:e,...t},i)=>g.jsxs($0e,{ref:i,className:Yt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,g.jsx(xot,{asChild:!0,children:g.jsx(XO,{className:"h-4 w-4 opacity-50"})})]}));Go.displayName=$0e.displayName;const Q0e=L.forwardRef(({className:n,...e},t)=>g.jsx(Z0e,{ref:t,className:Yt("flex cursor-default items-center justify-center py-1",n),...e,children:g.jsx(Uae,{className:"h-4 w-4"})}));Q0e.displayName=Z0e.displayName;const J0e=L.forwardRef(({className:n,...e},t)=>g.jsx(Y0e,{ref:t,className:Yt("flex cursor-default items-center justify-center py-1",n),...e,children:g.jsx(XO,{className:"h-4 w-4"})}));J0e.displayName=Y0e.displayName;const Zo=L.forwardRef(({className:n,children:e,position:t="popper",...i},s)=>g.jsx(Lot,{children:g.jsxs(K0e,{ref:s,className:Yt("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...i,children:[g.jsx(Q0e,{}),g.jsx(kot,{className:Yt("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),g.jsx(J0e,{})]})}));Zo.displayName=K0e.displayName;const Eot=L.forwardRef(({className:n,...e},t)=>g.jsx(q0e,{ref:t,className:Yt("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));Eot.displayName=q0e.displayName;const Nt=L.forwardRef(({className:n,children:e,...t},i)=>g.jsxs(G0e,{ref:i,className:Yt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(Iot,{children:g.jsx(zn,{className:"h-4 w-4"})})}),g.jsx(Not,{children:e})]}));Nt.displayName=G0e.displayName;const Dot=L.forwardRef(({className:n,...e},t)=>g.jsx(X0e,{ref:t,className:Yt("-mx-1 my-1 h-px bg-muted",n),...e}));Dot.displayName=X0e.displayName;function Tot({open:n,onOpenChange:e,editor:t,file:i,projectId:s}){const{toast:o}=Aa(),[r,a]=L.useState("templates"),[l,c]=L.useState(null),[d,u]=L.useState(""),[h,f]=L.useState(""),[m,p]=L.useState(""),[b,v]=L.useState(!1),[w,y]=L.useState("intermediate"),[C,S]=L.useState("all"),x=[{id:"block-basic",name:"Basic Block",description:"Create a simple solid block with custom properties",category:"blocks",difficulty:"beginner",code:`public class MyCustomBlock extends Block {
    public MyCustomBlock() {
        super(Properties.of()
            .mapColor(MapColor.STONE)
            .requiresCorrectToolForDrops()
            .strength(3.0F, 3.0F));
    }
}

// Registration in your registry class:
public static void register(ComponentRegistry registry) {
    registry.register(registration -> {
        registration.register(ResourceKey.createRegistryKey(
            new ResourceLocation("minecraft", "block")),
            new ResourceLocation(MOD_ID, "my_custom_block"),
            () -> new MyCustomBlock());
    });
}`,explanation:"This template creates a basic solid block in NeoForge 1.21.5.\n\n## Key Components:\n1. **Block Properties**: The block uses `Properties.of()` to set its characteristics:\n   - `mapColor`: Defines the color shown on maps\n   - `requiresCorrectToolForDrops`: Makes the block only drop items when mined with the appropriate tool\n   - `strength`: Sets mining difficulty (first parameter) and blast resistance (second parameter)\n\n2. **Component-Based Registration**: NeoForge 1.21.5 uses a component-based registry system instead of the older DeferredRegister system.\n   - `ComponentRegistry` allows registration of blocks\n   - `ResourceLocation` is used to define the registry key and the block ID\n   - The block instance is created using a lambda to allow lazy initialization\n\n## How to Extend:\n- Add custom behavior by overriding methods like `use`, `onRemove`, or `animateTick`\n- Set additional properties like sound type, light level, or friction\n- Add custom block states using the `stateDefinition` method"},{id:"item-tool",name:"Custom Tool Item",description:"Create a tool item with durability and attack components",category:"items",difficulty:"intermediate",code:`public class CustomSwordItem extends Item {
    public CustomSwordItem() {
        super(new Item.Properties());
    }
    
    // Called during registration
    public static CustomSwordItem create() {
        return new CustomSwordItem()
            // Set durability component
            .setData(ItemComponentsKeys.DURABILITY, 
                new Item.DurabilityComponent(500))
            // Set attack damage component
            .setData(ItemComponentsKeys.MELEE_WEAPON, 
                new Item.MeleeWeaponComponent(3.0f, 2.0f, -2.4f));
    }
    
    @Override
    public InteractionResultHolder<ItemStack> use(Level level, Player player, InteractionHand hand) {
        ItemStack stack = player.getItemInHand(hand);
        
        // Custom behavior when right-clicked
        if (!level.isClientSide()) {
            player.getCooldowns().addCooldown(this, 20); // 1 second cooldown
            
            // Example: Applying a status effect when used
            player.addEffect(new MobEffectInstance(MobEffects.MOVEMENT_SPEED, 60, 0));
        }
        
        return InteractionResultHolder.success(stack);
    }
}

// Registration in your registry class:
public static void register(ComponentRegistry registry) {
    registry.register(registration -> {
        registration.register(ResourceKey.createRegistryKey(
            new ResourceLocation("minecraft", "item")),
            new ResourceLocation(MOD_ID, "custom_sword"),
            CustomSwordItem::create);
    });
}`,explanation:`This template creates a custom sword item using NeoForge 1.21.5's component system.

## Key Components:
1. **Component-Based Item**: Instead of extending SwordItem (inheritance), we use components:
   - \`DurabilityComponent\`: Manages the item's durability (500 uses)
   - \`MeleeWeaponComponent\`: Handles attack damage (3.0 base damage, 2.0 attack damage bonus, -2.4 attack speed)
   
2. **Static Factory Method**: The \`create()\` method serves as a factory, setting up all components.

3. **Custom Use Behavior**: The \`use\` method is overridden to:
   - Add a cooldown when used
   - Apply a speed boost effect to the player
   - Return a success result with the original item stack

4. **Modern Registration**: Uses the new component registry system with ResourceKey and ResourceLocation.

## Component System Benefits:
- More flexible than inheritance - can combine multiple behaviors
- Easier to modify stats without creating new classes
- Better separation of data from behavior
- More aligned with Minecraft's own internal systems

## How to Extend:
- Add more components like \`FoodComponent\` or custom components
- Override more methods for custom behavior
- Add texture and model references in your resource packs`},{id:"entity-basic",name:"Basic Entity",description:"Create a custom entity with basic AI and attributes",category:"entities",difficulty:"advanced",code:`public class CustomEntity extends PathfinderMob {
    public static final EntityDataAccessor<Boolean> IS_AGGRESSIVE = 
        SynchedEntityData.defineId(CustomEntity.class, EntityDataSerializers.BOOLEAN);
    
    public CustomEntity(EntityType<? extends PathfinderMob> entityType, Level level) {
        super(entityType, level);
    }
    
    @Override
    protected void defineSynchedData() {
        super.defineSynchedData();
        this.entityData.define(IS_AGGRESSIVE, false);
    }
    
    public static AttributeSupplier.Builder createAttributes() {
        return Mob.createMobAttributes()
            .add(Attributes.MAX_HEALTH, 20.0)
            .add(Attributes.MOVEMENT_SPEED, 0.3)
            .add(Attributes.ATTACK_DAMAGE, 3.0);
    }
    
    @Override
    protected void registerGoals() {
        this.goalSelector.addGoal(1, new FloatGoal(this));
        this.goalSelector.addGoal(2, new MeleeAttackGoal(this, 1.0D, true));
        this.goalSelector.addGoal(3, new WaterAvoidingRandomStrollGoal(this, 1.0D));
        this.goalSelector.addGoal(4, new LookAtPlayerGoal(this, Player.class, 8.0F));
        this.goalSelector.addGoal(5, new RandomLookAroundGoal(this));
        
        this.targetSelector.addGoal(1, new HurtByTargetGoal(this));
        this.targetSelector.addGoal(2, new NearestAttackableTargetGoal<>(this, Player.class, 
            true, entity -> this.entityData.get(IS_AGGRESSIVE)));
    }
    
    @Override
    public void aiStep() {
        super.aiStep();
        
        // Example: Become aggressive when hit
        if (this.getLastHurtByMob() != null && !this.entityData.get(IS_AGGRESSIVE)) {
            this.entityData.set(IS_AGGRESSIVE, true);
        }
    }
}

// Registration in your registry class:
public static void register(ComponentRegistry registry) {
    EntityType<CustomEntity> entityType = EntityType.Builder
        .of(CustomEntity::new, MobCategory.CREATURE)
        .sized(0.9F, 1.3F)
        .build(new ResourceLocation(MOD_ID, "custom_entity").toString());
        
    registry.register(registration -> {
        // Register entity type
        registration.register(ResourceKey.createRegistryKey(
            new ResourceLocation("minecraft", "entity_type")),
            new ResourceLocation(MOD_ID, "custom_entity"),
            () -> entityType);
            
        // Register attributes
        registration.register(ResourceKey.createRegistryKey(
            new ResourceLocation("minecraft", "attribute")),
            new ResourceLocation(MOD_ID, "custom_entity_attributes"),
            () -> CustomEntity.createAttributes().build());
    });
}`,explanation:`This template creates a custom entity with basic AI behavior in NeoForge 1.21.5.

## Key Components:
1. **Entity Class Structure**:
   - Extends \`PathfinderMob\` for basic AI capabilities
   - Constructs with an \`EntityType\` and \`Level\`
   - Uses \`EntityDataAccessor\` for synchronized data between client/server

2. **AI and Attributes**:
   - \`createAttributes()\`: Defines base stats like health, speed, and attack damage
   - \`registerGoals()\`: Sets up AI goals in priority order (lower numbers = higher priority)
     - Goal Selector: behaviors the entity wants to do
     - Target Selector: determines who to attack

3. **AI Goals Included**:
   - \`FloatGoal\`: Swim when in water
   - \`MeleeAttackGoal\`: Attack targets
   - \`WaterAvoidingRandomStrollGoal\`: Wander around, avoiding water
   - \`LookAtPlayerGoal\`: Look at nearby players
   - \`RandomLookAroundGoal\`: Occasionally look around randomly
   - \`HurtByTargetGoal\`: Target entities that hurt it
   - \`NearestAttackableTargetGoal\`: Target nearby players when aggressive

4. **Custom Behavior**:
   - Tracks aggression state using synced data
   - \`aiStep()\`: Called each tick to update AI, used to change behavior when hurt

5. **Modern Registration**:
   - Registers both the entity type and its attributes
   - Uses the component registry system with proper resource keys

## How to Extend:
- Add custom animations or sounds
- Override \`getAmbientSound()\`, \`getHurtSound()\`, and \`getDeathSound()\`
- Add more complex AI goals
- Implement custom attacks or abilities
- Add loot tables for drops`},{id:"tile-entity",name:"Block Entity (Tile Entity)",description:"Create a block with associated block entity data",category:"blocks",difficulty:"advanced",code:`// 1. The Block Class
public class CustomBlockWithEntity extends BaseEntityBlock {
    public CustomBlockWithEntity() {
        super(Properties.of()
            .mapColor(MapColor.STONE)
            .strength(3.5F)
            .requiresCorrectToolForDrops()
            .sound(SoundType.STONE));
    }
    
    @Override
    public RenderShape getRenderShape(BlockState state) {
        return RenderShape.MODEL; // Use a standard block model
    }
    
    @Override
    public void onRemove(BlockState pState, Level pLevel, BlockPos pPos, BlockState pNewState, boolean pIsMoving) {
        if (!pState.is(pNewState.getBlock())) {
            BlockEntity blockEntity = pLevel.getBlockEntity(pPos);
            if (blockEntity instanceof CustomBlockEntity) {
                // Drop inventory contents if present
                // ((CustomBlockEntity)blockEntity).dropContents();
            }
            
            super.onRemove(pState, pLevel, pPos, pNewState, pIsMoving);
        }
    }
    
    @Override
    public InteractionResult use(BlockState pState, Level pLevel, BlockPos pPos, Player pPlayer, 
                                InteractionHand pHand, BlockHitResult pHit) {
        if (!pLevel.isClientSide()) {
            BlockEntity be = pLevel.getBlockEntity(pPos);
            if (be instanceof CustomBlockEntity) {
                // Example: Open menu or perform action
                pPlayer.sendSystemMessage(Component.literal("Interacted with custom block entity!"));
            }
        }
        return InteractionResult.sidedSuccess(pLevel.isClientSide());
    }
    
    @Override
    public BlockEntity newBlockEntity(BlockPos pPos, BlockState pState) {
        return new CustomBlockEntity(pPos, pState);
    }
    
    @Override
    public <T extends BlockEntity> BlockEntityTicker<T> getTicker(Level pLevel, BlockState pState, BlockEntityType<T> pBlockEntityType) {
        return pLevel.isClientSide() ? null : 
            createTickerHelper(pBlockEntityType, ModBlockEntities.CUSTOM_BLOCK_ENTITY.get(), 
                CustomBlockEntity::serverTick);
    }
}

// 2. The Block Entity Class
public class CustomBlockEntity extends BlockEntity {
    private int counter = 0;
    
    public CustomBlockEntity(BlockPos pos, BlockState state) {
        super(ModBlockEntities.CUSTOM_BLOCK_ENTITY.get(), pos, state);
    }
    
    @Override
    protected void saveAdditional(CompoundTag tag) {
        super.saveAdditional(tag);
        tag.putInt("Counter", counter);
    }
    
    @Override
    public void load(CompoundTag tag) {
        super.load(tag);
        counter = tag.getInt("Counter");
    }
    
    public static void serverTick(Level level, BlockPos pos, BlockState state, CustomBlockEntity blockEntity) {
        blockEntity.counter++;
        
        // Example: Every 20 ticks (1 second), do something
        if (blockEntity.counter % 20 == 0) {
            level.setBlock(pos, state, 3);
            blockEntity.setChanged();
        }
    }
}

// 3. Registration in ModBlocks and ModBlockEntities classes
public class ModBlocks {
    public static void register(ComponentRegistry registry) {
        registry.register(registration -> {
            registration.register(ResourceKey.createRegistryKey(
                new ResourceLocation("minecraft", "block")),
                new ResourceLocation(MOD_ID, "custom_block"),
                () -> new CustomBlockWithEntity());
        });
    }
}

public class ModBlockEntities {
    public static final DeferredHolder<BlockEntityType<?>, BlockEntityType<CustomBlockEntity>> CUSTOM_BLOCK_ENTITY =
        registerBlockEntity("custom_block_entity", CustomBlockEntity::new, () -> ModBlocks.CUSTOM_BLOCK.get());
    
    private static <T extends BlockEntity> DeferredHolder<BlockEntityType<?>, BlockEntityType<T>> registerBlockEntity(
            String name, BlockEntityType.BlockEntitySupplier<T> factory, Supplier<Block> block) {
        return RegistryManager.BLOCK_ENTITIES.register(name, 
            () -> BlockEntityType.Builder.of(factory, block.get()).build(null));
    }
    
    public static void register() {
        // Initialize the class to register block entities
    }
}`,explanation:`This template creates a block with an associated block entity (formerly known as a tile entity) in NeoForge 1.21.5.

## Key Components:
1. **Block with Entity**:
   - Extends \`BaseEntityBlock\` which provides integration with block entities
   - \`getRenderShape\`: Determines how the block is rendered (MODEL = standard rendering)
   - \`onRemove\`: Handles cleanup when the block is broken
   - \`use\`: Handles right-click interactions with the block
   - \`newBlockEntity\`: Creates a new block entity instance
   - \`getTicker\`: Sets up periodic updates for the block entity (if needed)

2. **Block Entity Class**:
   - Extends \`BlockEntity\` to store data associated with the block
   - \`saveAdditional\`: Saves custom data to NBT
   - \`load\`: Loads custom data from NBT
   - \`serverTick\`: Static method called each tick to update the block entity

3. **Registration**:
   - Block registration using ComponentRegistry
   - Block entity registration using DeferredHolder (which persists from older versions)
   - Note how the block entity is linked to its corresponding block(s)

## Technical Aspects:
- \`setChanged()\`: Marks the block entity as changed, triggering a data save
- \`level.setBlock(pos, state, 3)\`: Updates the block state and notifies neighboring blocks
- Block entity tickers run code periodically without needing scheduled ticks

## Common Use Cases:
- Inventory storage
- Energy/fluid storage and transfer
- Complex block mechanics with state
- Blocks that need to store NBT data

## How to Extend:
- Implement \`Container\` and menu systems for GUIs
- Add inventory capabilities using \`IItemHandler\`
- Add energy or fluid capabilities
- Implement more complex tick behaviors
- Create a custom renderer for special rendering`},{id:"recipe-type",name:"Custom Recipe Type",description:"Create a new recipe type with serializer",category:"crafting",difficulty:"advanced",code:`// 1. Recipe Class
public class CustomRecipe implements Recipe<Container> {
    private final ResourceLocation id;
    private final ItemStack result;
    private final Ingredient ingredient;
    private final int processingTime;
    
    public CustomRecipe(ResourceLocation id, ItemStack result, Ingredient ingredient, int processingTime) {
        this.id = id;
        this.result = result;
        this.ingredient = ingredient;
        this.processingTime = processingTime;
    }
    
    @Override
    public boolean matches(Container container, Level level) {
        return this.ingredient.test(container.getItem(0));
    }
    
    @Override
    public ItemStack assemble(Container container, RegistryAccess registryAccess) {
        return this.result.copy();
    }
    
    @Override
    public boolean canCraftInDimensions(int width, int height) {
        return true;
    }
    
    @Override
    public ItemStack getResultItem(RegistryAccess registryAccess) {
        return this.result;
    }
    
    @Override
    public ResourceLocation getId() {
        return this.id;
    }
    
    @Override
    public RecipeSerializer<?> getSerializer() {
        return ModRecipes.CUSTOM_RECIPE_SERIALIZER.get();
    }
    
    @Override
    public RecipeType<?> getType() {
        return ModRecipes.CUSTOM_RECIPE_TYPE.get();
    }
    
    public Ingredient getIngredient() {
        return this.ingredient;
    }
    
    public int getProcessingTime() {
        return this.processingTime;
    }
}

// 2. Recipe Serializer
public class CustomRecipeSerializer implements RecipeSerializer<CustomRecipe> {
    @Override
    public CustomRecipe fromJson(ResourceLocation recipeId, JsonObject json) {
        JsonElement resultElement = GsonHelper.isArrayNode(json, "result") ? 
            GsonHelper.getAsJsonArray(json, "result") : 
            GsonHelper.getAsJsonObject(json, "result");
            
        ItemStack result = ShapedRecipe.itemStackFromJson(resultElement);
        JsonElement ingredientElement = GsonHelper.getAsJsonObject(json, "ingredient");
        Ingredient ingredient = Ingredient.fromJson(ingredientElement);
        int processingTime = GsonHelper.getAsInt(json, "processingTime", 200);
        
        return new CustomRecipe(recipeId, result, ingredient, processingTime);
    }
    
    @Override
    public CustomRecipe fromNetwork(ResourceLocation recipeId, FriendlyByteBuf buffer) {
        Ingredient ingredient = Ingredient.fromNetwork(buffer);
        ItemStack result = buffer.readItem();
        int processingTime = buffer.readVarInt();
        
        return new CustomRecipe(recipeId, result, ingredient, processingTime);
    }
    
    @Override
    public void toNetwork(FriendlyByteBuf buffer, CustomRecipe recipe) {
        recipe.getIngredient().toNetwork(buffer);
        buffer.writeItem(recipe.getResultItem(null));
        buffer.writeVarInt(recipe.getProcessingTime());
    }
}

// 3. Recipe Type
public class ModRecipes {
    public static final DeferredHolder<RecipeType<?>, RecipeType<CustomRecipe>> CUSTOM_RECIPE_TYPE = 
        registerRecipeType("custom_recipe");
        
    public static final DeferredHolder<RecipeSerializer<?>, RecipeSerializer<CustomRecipe>> CUSTOM_RECIPE_SERIALIZER = 
        RegistryManager.RECIPE_SERIALIZERS.register("custom_recipe", CustomRecipeSerializer::new);
    
    private static <T extends Recipe<?>> DeferredHolder<RecipeType<?>, RecipeType<T>> registerRecipeType(String name) {
        return RegistryManager.RECIPE_TYPES.register(name, 
            () -> new RecipeType<T>() {
                @Override
                public String toString() {
                    return name;
                }
            });
    }
    
    public static void register() {
        // Initialize the class to register recipe types and serializers
    }
}

// 4. Example JSON recipe file to be placed in resources/data/modid/recipes/custom/example.json
/*
{
  "type": "modid:custom_recipe",
  "ingredient": {
    "item": "minecraft:iron_ingot"
  },
  "result": {
    "item": "modid:custom_item",
    "count": 1
  },
  "processingTime": 200
}
*/`,explanation:`This template creates a custom recipe type for NeoForge 1.21.5, allowing you to define new crafting mechanics beyond the vanilla crafting table, furnace, etc.

## Key Components:
1. **Custom Recipe Class**:
   - Implements the \`Recipe<Container>\` interface
   - Stores recipe data: input ingredient, output result, and custom properties
   - \`matches\`: Determines if a given container's contents match this recipe
   - \`assemble\`: Creates the result stack when crafting completes
   - \`getResultItem\`: Returns the result of the recipe
   - \`getSerializer\` and \`getType\`: Connect to registration system

2. **Recipe Serializer**:
   - Handles converting between JSON, network packets, and recipe objects
   - \`fromJson\`: Parses a recipe from a JSON file in a datapack
   - \`fromNetwork\`: Reads recipe data from the network
   - \`toNetwork\`: Writes recipe data to the network

3. **Recipe Type**:
   - Defines a category of recipes (like "crafting", "smelting", etc.)
   - Used for recipe lookup and management
   - Registered using DeferredHolder

4. **JSON Recipe Format**:
   - Example of how the recipe would be defined in a datapack
   - Contains ingredients, results, and custom properties

## Technical Aspects:
- \`Ingredient\`: Versatile input matcher that can accept items, tags, or groups
- Recipe system is data-driven, allowing pack makers to add recipes without code
- Uses JSON for human-readable recipe definitions

## Use Cases:
- Custom machines with specialized processing
- Multi-step crafting processes
- Recipes with additional parameters (time, energy, etc.)
- Special crafting mechanics (e.g., infusion, assembly)

## How to Extend:
- Add support for multiple ingredients
- Create a custom container type for complex recipes
- Add more properties like energy cost or catalyst items
- Implement a special crafting block that uses these recipes`},{id:"capability-provider",name:"Capability Provider",description:"Implement capability system for enhanced item functionality",category:"items",difficulty:"advanced",code:`// 1. Custom Capability Interface
public interface IEnergySink {
    int receiveEnergy(int maxReceive, boolean simulate);
    int getEnergyStored();
    int getMaxEnergyStored();
    boolean canReceive();
}

// 2. Capability Implementation
public class EnergySinkImpl implements IEnergySink {
    private int energy;
    private final int maxEnergy;
    
    public EnergySinkImpl(int maxEnergy) {
        this.maxEnergy = maxEnergy;
        this.energy = 0;
    }
    
    @Override
    public int receiveEnergy(int maxReceive, boolean simulate) {
        int energyReceived = Math.min(maxEnergy - energy, maxReceive);
        
        if (!simulate) {
            energy += energyReceived;
        }
        
        return energyReceived;
    }
    
    @Override
    public int getEnergyStored() {
        return energy;
    }
    
    @Override
    public int getMaxEnergyStored() {
        return maxEnergy;
    }
    
    @Override
    public boolean canReceive() {
        return true;
    }
}

// 3. Capability Registration
public class ModCapabilities {
    // Define capability token
    public static final Capability<IEnergySink> ENERGY_SINK = CapabilityManager.get(
        new CapabilityToken<IEnergySink>() {});
        
    public static void register(RegisterCapabilitiesEvent event) {
        event.register(IEnergySink.class);
    }
}

// 4. Item with Capability
public class EnergyStoneItem extends Item {
    public EnergyStoneItem() {
        super(new Item.Properties().stacksTo(1));
    }
    
    @Override
    public InteractionResult useOn(UseOnContext context) {
        Level level = context.getLevel();
        BlockPos pos = context.getClickedPos();
        BlockState state = level.getBlockState(pos);
        
        // Example using capability to drain energy from a block
        if (!level.isClientSide()) {
            BlockEntity blockEntity = level.getBlockEntity(pos);
            if (blockEntity != null) {
                // Look for energy capability in the block
                blockEntity.getCapability(Capabilities.ENERGY).ifPresent(targetEnergy -> {
                    // Get our item's capability
                    context.getItemInHand().getCapability(ModCapabilities.ENERGY_SINK).ifPresent(sink -> {
                        int drained = targetEnergy.extractEnergy(100, false);
                        sink.receiveEnergy(drained, false);
                        
                        // Notify player
                        context.getPlayer().sendSystemMessage(Component.literal(
                            "Drained " + drained + " energy. Stone contains " + sink.getEnergyStored()));
                    });
                });
            }
        }
        
        return InteractionResult.sidedSuccess(level.isClientSide());
    }
    
    @Override
    public <T> LazyOptional<T> getCapability(Capability<T> cap, ItemStack stack, @Nullable CompoundTag nbt) {
        if (cap == ModCapabilities.ENERGY_SINK) {
            // Create or retrieve the capability handler for this item
            EnergySinkImpl handler = new EnergySinkImpl(10000);
            
            // If we have stored energy data, load it
            if (nbt != null && nbt.contains("Energy")) {
                deserializeNBT(handler, nbt);
            }
            
            return LazyOptional.of(() -> handler).cast();
        }
        
        return LazyOptional.empty();
    }
    
    @Override
    public @Nullable CompoundTag getShareTag(ItemStack stack) {
        CompoundTag nbt = stack.getOrCreateTag();
        
        // Get capability and serialize its data
        stack.getCapability(ModCapabilities.ENERGY_SINK).ifPresent(handler -> {
            serializeNBT(handler, nbt);
        });
        
        return nbt;
    }
    
    private void serializeNBT(IEnergySink handler, CompoundTag nbt) {
        nbt.putInt("Energy", handler.getEnergyStored());
    }
    
    private void deserializeNBT(EnergySinkImpl handler, CompoundTag nbt) {
        int energy = nbt.getInt("Energy");
        handler.receiveEnergy(energy, false);
    }
}

// 5. Registration of capability-providing item
public class ModItems {
    public static void register(ComponentRegistry registry) {
        registry.register(registration -> {
            registration.register(ResourceKey.createRegistryKey(
                new ResourceLocation("minecraft", "item")),
                new ResourceLocation(MOD_ID, "energy_stone"),
                () -> new EnergyStoneItem());
        });
    }
}

// 6. Register capability in your main mod class's event handlers
// @SubscribeEvent
// public static void registerCapabilities(RegisterCapabilitiesEvent event) {
//     ModCapabilities.register(event);
// }`,explanation:`This template implements a custom capability for an item in NeoForge 1.21.5, allowing for modular functionality.

## Key Components:
1. **Capability Interface**:
   - \`IEnergySink\`: Defines the contract for objects that can receive energy
   - Methods for receiving energy, querying storage, and checking conditions

2. **Capability Implementation**:
   - \`EnergySinkImpl\`: Concrete implementation of the capability
   - Stores energy value and handles energy input with validation

3. **Capability Registration**:
   - \`ModCapabilities\`: Registers the capability type with the CapabilityManager
   - Uses CapabilityToken for type-safe capability reference

4. **Item With Capability**:
   - \`EnergyStoneItem\`: Item that provides the energy sink capability
   - \`useOn\`: Custom behavior when using the item on blocks (extracts energy)
   - \`getCapability\`: Provides capability instances when requested
   - NBT serialization methods to persist capability data

5. **Item Registration**:
   - Uses the component registry system to register the item

## Technical Aspects:
- \`LazyOptional<T>\`: A wrapper that safely handles capability access
- Capabilities are provided on request rather than always existing
- NBT serialization ensures data persists when saving/loading
- Event-based capability registration

## Benefits of Capability System:
- **Modularity**: Add functionality without inheritance
- **Compatibility**: Different mods can interact through capability interfaces
- **Performance**: Capabilities are only created when needed
- **Flexibility**: One object can provide multiple capabilities

## Common Capability Types:
- Energy storage/transfer
- Item handlers (inventories)
- Fluid tanks
- Custom data storage
- Tool functionality

## How to Extend:
- Create additional capability types
- Make blocks provide capabilities
- Add capability to entities or world chunks
- Create adapters between different capability systems`},{id:"datagen-provider",name:"Data Generation Provider",description:"Create data assets (recipes, loot tables) programmatically",category:"tools",difficulty:"intermediate",code:`// 1. Recipe Provider
public class ModRecipeProvider extends RecipeProvider {
    public ModRecipeProvider(PackOutput output, CompletableFuture<HolderLookup.Provider> lookupProvider) {
        super(output, lookupProvider);
    }
    
    @Override
    protected void buildRecipes(Consumer<FinishedRecipe> consumer) {
        // Example shaped recipe
        ShapedRecipeBuilder.shaped(RecipeCategory.MISC, ModItems.CUSTOM_ITEM.get())
            .pattern("XXX")
            .pattern("XYX")
            .pattern("XXX")
            .define('X', Items.IRON_INGOT)
            .define('Y', Items.DIAMOND)
            .unlockedBy("has_diamond", has(Items.DIAMOND))
            .save(consumer, new ResourceLocation(MOD_ID, "custom_item"));
            
        // Example smelting recipe
        SimpleCookingRecipeBuilder.smelting(
                Ingredient.of(Items.IRON_INGOT), 
                RecipeCategory.MISC,
                ModItems.PROCESSED_ITEM.get(), 
                1.0F, 
                200)
            .unlockedBy("has_iron", has(Items.IRON_INGOT))
            .save(consumer, new ResourceLocation(MOD_ID, "smelt_processed_item"));
            
        // Example custom recipe
        new CustomRecipeBuilder(ModItems.SPECIAL_ITEM.get(), 2)
            .addIngredient(ModItems.CUSTOM_ITEM.get())
            .addIngredient(Items.REDSTONE, 4)
            .setProcessingTime(400)
            .build(consumer, new ResourceLocation(MOD_ID, "special_processing"));
    }
}

// 2. Loot Table Provider
public class ModLootTableProvider extends LootTableProvider {
    public ModLootTableProvider(PackOutput output, Set<ResourceLocation> tables, 
                             List<SubProviderEntry> subProviders) {
        super(output, tables, subProviders);
    }
    
    public static ModLootTableProvider create(PackOutput output) {
        return new ModLootTableProvider(output,
            Set.of(), // Vanilla tables to include (usually empty)
            List.of(
                new SubProviderEntry(ModBlockLootTables::new, LootContextParamSets.BLOCK),
                new SubProviderEntry(ModEntityLootTables::new, LootContextParamSets.ENTITY)
            )
        );
    }
    
    // Block loot tables subprovider
    private static class ModBlockLootTables extends BlockLootSubProvider {
        protected ModBlockLootTables() {
            super(Set.of(), FeatureFlags.REGISTRY.allFlags());
        }
        
        @Override
        protected void generate() {
            // Simple drop (block drops itself)
            dropSelf(ModBlocks.SIMPLE_BLOCK.get());
            
            // Ore with fortune support
            add(ModBlocks.CUSTOM_ORE.get(), 
                block -> createOreDrop(block, ModItems.RAW_ORE.get()));
                
            // Block with item contents
            add(ModBlocks.BLOCK_WITH_ENTITY.get(), 
                block -> createWithContents(block, ModBlocks.BLOCK_WITH_ENTITY.get()));
                
            // Conditional drops (e.g., requiring silk touch)
            add(ModBlocks.SPECIAL_BLOCK.get(), 
                block -> createSilkTouchOnlyTable(block));
        }
        
        protected LootTable.Builder createWithContents(Block block, Block entity) {
            return LootTable.lootTable()
                .withPool(LootPool.lootPool()
                    .setRolls(ConstantValue.exactly(1))
                    .add(LootItem.lootTableItem(block)
                        .apply(CopyNameFunction.copyName(CopyNameFunction.NameSource.BLOCK_ENTITY))
                        .apply(CopyNbtFunction.copyData(ContextNbtProvider.BLOCK_ENTITY)
                            .copy("Inventory", "BlockEntityTag.Inventory")
                            .copy("Energy", "BlockEntityTag.Energy"))
                    )
                );
        }
    }
    
    // Entity loot tables subprovider
    private static class ModEntityLootTables extends EntityLootSubProvider {
        protected ModEntityLootTables() {
            super(FeatureFlags.REGISTRY.allFlags());
        }
        
        @Override
        public void generate() {
            // Basic entity drops
            add(ModEntities.CUSTOM_ENTITY.get(), 
                LootTable.lootTable()
                    .withPool(LootPool.lootPool()
                        .setRolls(ConstantValue.exactly(1))
                        .add(LootItem.lootTableItem(Items.LEATHER)
                            .apply(SetItemCountFunction.setCount(UniformGenerator.between(0.0F, 2.0F)))
                            .apply(LootingEnchantFunction.lootingMultiplier(UniformGenerator.between(0.0F, 1.0F))))
                    )
                    .withPool(LootPool.lootPool()
                        .setRolls(ConstantValue.exactly(1))
                        .add(LootItem.lootTableItem(ModItems.CUSTOM_ITEM.get())
                            .when(LootItemKilledByPlayerCondition.killedByPlayer())
                            .when(LootItemRandomChanceWithLootingCondition.randomChanceAndLootingBoost(0.1F, 0.05F))
                        )
                    )
            );
        }
    }
}

// 3. Language Provider
public class ModLanguageProvider extends LanguageProvider {
    public ModLanguageProvider(PackOutput output, String locale) {
        super(output, MOD_ID, locale);
    }
    
    @Override
    protected void addTranslations() {
        // Item translations
        add(ModItems.CUSTOM_ITEM.get(), "Custom Item");
        add(ModItems.PROCESSED_ITEM.get(), "Processed Item");
        add(ModItems.SPECIAL_ITEM.get(), "Special Item");
        add(ModItems.RAW_ORE.get(), "Raw Custom Ore");
        
        // Block translations
        add(ModBlocks.SIMPLE_BLOCK.get(), "Simple Block");
        add(ModBlocks.CUSTOM_ORE.get(), "Custom Ore");
        add(ModBlocks.BLOCK_WITH_ENTITY.get(), "Special Container");
        add(ModBlocks.SPECIAL_BLOCK.get(), "Magical Block");
        
        // Entity translations
        add(ModEntities.CUSTOM_ENTITY.get(), "Fancy Creature");
        
        // Creative tab
        add("itemGroup." + MOD_ID, "My Awesome Mod");
        
        // GUI text
        add("container." + MOD_ID + ".special_container", "Special Container");
        
        // Death messages
        add("death.attack." + MOD_ID + ".special", "%1$s was destroyed by special magic");
    }
}

// 4. Registration in your mod's data generation setup
public class DataGenerators {
    public static void gatherData(GatherDataEvent event) {
        DataGenerator generator = event.getGenerator();
        PackOutput packOutput = generator.getPackOutput();
        CompletableFuture<HolderLookup.Provider> lookupProvider = event.getLookupProvider();
        
        // Add providers
        generator.addProvider(event.includeClient(), new ModLanguageProvider(packOutput, "en_us"));
        generator.addProvider(event.includeServer(), new ModRecipeProvider(packOutput, lookupProvider));
        generator.addProvider(event.includeServer(), ModLootTableProvider.create(packOutput));
        
        // Add more providers as needed (block states, models, tags, etc.)
    }
}`,explanation:`This template demonstrates data generation in NeoForge 1.21.5, which allows you to programmatically create data assets like recipes, loot tables, and translations.

## Key Components:
1. **Recipe Provider**:
   - Extends \`RecipeProvider\` to generate recipe JSON files
   - \`buildRecipes\`: Creates various recipe types including:
     - Shaped crafting recipes with patterns
     - Cooking recipes (smelting, blasting, etc.)
     - Custom mod-specific recipes

2. **Loot Table Provider**:
   - Main provider class that organizes sub-providers
   - \`ModBlockLootTables\`: Generates loot tables for blocks
     - Simple block drops
     - Ore drops with fortune support
     - Blocks with NBT data (inventories, energy)
     - Conditional drops (silk touch, etc.)
   - \`ModEntityLootTables\`: Generates loot tables for entities
     - Basic drops with random counts
     - Rare drops with conditions

3. **Language Provider**:
   - Generates localization files with translations
   - Covers various translation types:
     - Items and blocks
     - Entities and containers
     - Creative tabs
     - Death messages and UI text

4. **Data Generator Setup**:
   - \`gatherData\`: Registration point for all providers
   - Conditionally includes client or server data based on event flags

## Benefits of Data Generation:
- **Consistency**: Programmatically ensure data files follow the correct format
- **Maintainability**: Update many data files by changing a single value in code
- **Workflow**: Changes to data happen alongside code changes
- **Validation**: Errors are caught at compile time rather than runtime

## When to Use:
- Mods with many similar items, blocks, or recipes
- Complex data structures that are error-prone to write manually
- Projects requiring multiple language translations
- Better integration with source control and development workflow

## How to Extend:
- Add providers for block states and models
- Generate tag files for items, blocks, and other registries
- Create advancement providers
- Add support for additional languages
- Generate world structures or dimension settings`},{id:"network-packets",name:"Network Packet System",description:"Set up client-server network communication",category:"networking",difficulty:"intermediate",code:`// 1. Network Handler
public class ModNetworking {
    private static final String PROTOCOL_VERSION = "1";
    public static final ResourceLocation CHANNEL_ID = new ResourceLocation(MOD_ID, "main");
    
    private static SimpleChannel channel;
    
    public static void register() {
        // Create the network channel
        channel = NetworkRegistry.newSimpleChannel(
            CHANNEL_ID,
            () -> PROTOCOL_VERSION,
            PROTOCOL_VERSION::equals,
            PROTOCOL_VERSION::equals
        );
        
        // Register packets
        int id = 0;
        channel.registerMessage(id++, SyncDataPacket.class, 
            SyncDataPacket::encode, 
            SyncDataPacket::decode, 
            SyncDataPacket::handle);
            
        channel.registerMessage(id++, ButtonPressedPacket.class, 
            ButtonPressedPacket::encode, 
            ButtonPressedPacket::decode, 
            ButtonPressedPacket::handle);
    }
    
    // Send to server
    public static void sendToServer(Object packet) {
        channel.sendToServer(packet);
    }
    
    // Send to one client
    public static void sendToClient(Object packet, ServerPlayer player) {
        channel.send(PacketDistributor.PLAYER.with(() -> player), packet);
    }
    
    // Send to all clients
    public static void sendToAllClients(Object packet) {
        channel.send(PacketDistributor.ALL.noArg(), packet);
    }
    
    // Send to clients near a position
    public static void sendToNearbyPlayers(Object packet, BlockPos pos, Level level, int range) {
        channel.send(
            PacketDistributor.NEAR.with(() -> new PacketDistributor.TargetPoint(
                pos.getX(), pos.getY(), pos.getZ(), range, level.dimension()
            )),
            packet
        );
    }
}

// 2. Example Packets
// Server -> Client sync packet
public class SyncDataPacket {
    private final BlockPos pos;
    private final CompoundTag data;
    
    public SyncDataPacket(BlockPos pos, CompoundTag data) {
        this.pos = pos;
        this.data = data;
    }
    
    public static void encode(SyncDataPacket packet, FriendlyByteBuf buffer) {
        buffer.writeBlockPos(packet.pos);
        buffer.writeNbt(packet.data);
    }
    
    public static SyncDataPacket decode(FriendlyByteBuf buffer) {
        BlockPos pos = buffer.readBlockPos();
        CompoundTag data = buffer.readNbt();
        return new SyncDataPacket(pos, data);
    }
    
    public static void handle(SyncDataPacket packet, Supplier<NetworkEvent.Context> contextSupplier) {
        NetworkEvent.Context context = contextSupplier.get();
        context.enqueueWork(() -> {
            // Make sure we're on the client
            if (Minecraft.getInstance().level != null) {
                BlockEntity blockEntity = Minecraft.getInstance().level.getBlockEntity(packet.pos);
                if (blockEntity != null) {
                    // Update block entity data
                    blockEntity.load(packet.data);
                }
            }
        });
        context.setPacketHandled(true);
    }
}

// Client -> Server button packet
public class ButtonPressedPacket {
    private final BlockPos pos;
    private final int buttonId;
    
    public ButtonPressedPacket(BlockPos pos, int buttonId) {
        this.pos = pos;
        this.buttonId = buttonId;
    }
    
    public static void encode(ButtonPressedPacket packet, FriendlyByteBuf buffer) {
        buffer.writeBlockPos(packet.pos);
        buffer.writeInt(packet.buttonId);
    }
    
    public static ButtonPressedPacket decode(FriendlyByteBuf buffer) {
        BlockPos pos = buffer.readBlockPos();
        int buttonId = buffer.readInt();
        return new ButtonPressedPacket(pos, buttonId);
    }
    
    public static void handle(ButtonPressedPacket packet, Supplier<NetworkEvent.Context> contextSupplier) {
        NetworkEvent.Context context = contextSupplier.get();
        context.enqueueWork(() -> {
            // Make sure we're on the server and have a player
            ServerPlayer player = context.getSender();
            if (player != null) {
                ServerLevel level = player.serverLevel();
                BlockPos pos = packet.pos;
                
                // Validate position is loaded and in range
                if (level.isLoaded(pos) && pos.closerThan(player.blockPosition(), 8)) {
                    BlockEntity blockEntity = level.getBlockEntity(pos);
                    if (blockEntity instanceof CustomBlockEntity customBE) {
                        // Handle the button press
                        customBE.handleButtonPress(packet.buttonId, player);
                    }
                }
            }
        });
        context.setPacketHandled(true);
    }
}

// 3. Usage Examples
// Sending from server to client
public class CustomBlockEntity extends BlockEntity {
    private int counter = 0;
    
    // Update clients when counter changes
    public void incrementCounter() {
        counter++;
        syncToClient();
    }
    
    private void syncToClient() {
        if (level != null && !level.isClientSide()) {
            CompoundTag tag = new CompoundTag();
            this.saveAdditional(tag);
            
            // Send to all players tracking this chunk
            ModNetworking.sendToNearbyPlayers(
                new SyncDataPacket(this.worldPosition, tag),
                this.worldPosition,
                this.level,
                64
            );
        }
    }
    
    // Handle button press from client
    public void handleButtonPress(int buttonId, ServerPlayer player) {
        switch (buttonId) {
            case 0:
                incrementCounter();
                break;
            case 1:
                // Do something else
                break;
        }
    }
}

// Sending from client to server (e.g., in a screen class)
public class CustomScreen extends Screen {
    private final BlockPos blockPos;
    
    public CustomScreen(BlockPos pos, Component title) {
        super(title);
        this.blockPos = pos;
    }
    
    @Override
    protected void init() {
        super.init();
        
        // Add a button
        this.addRenderableWidget(Button.builder(Component.literal("Press Me"), button -> {
            // Send packet to server when clicked
            ModNetworking.sendToServer(new ButtonPressedPacket(blockPos, 0));
        }).bounds(width / 2 - 50, height / 2, 100, 20).build());
    }
}`,explanation:`This template sets up a client-server network communication system in NeoForge 1.21.5, essential for mods that need to synchronize data across the client and server.

## Key Components:
1. **Network Handler**:
   - Sets up a SimpleChannel for packet registration and sending
   - Includes protocol versioning to ensure compatibility
   - Provides helper methods for sending packets to different targets:
     - Server
     - Specific client(s)
     - All clients
     - Clients near a position

2. **Example Packets**:
   - \`SyncDataPacket\` (Server → Client): Synchronizes BlockEntity data
     - \`encode\`: Writes data to the network buffer
     - \`decode\`: Reads data from the network buffer
     - \`handle\`: Processes the packet on the receiving side
   - \`ButtonPressedPacket\` (Client → Server): Sends UI interaction to server
     - Includes safety validation to prevent cheating
     - Demonstrates proper client → server communication pattern

3. **Usage Examples**:
   - BlockEntity synchronization
   - GUI button interactions
   - Basic security validation

## Technical Aspects:
- \`FriendlyByteBuf\`: Specialized buffer for network serialization
- \`context.enqueueWork()\`: Ensures packet handling occurs on the game thread
- \`context.setPacketHandled(true)\`: Marks the packet as successfully processed
- \`PacketDistributor\`: Handles targeting of packet delivery

## Best Practices Demonstrated:
- **Security**: Validating positions and permissions on the server
- **Performance**: Sending only to clients that need the data
- **Thread Safety**: Processing packets on the correct thread
- **Clean Architecture**: Separation of packet logic from game logic

## Common Network Use Cases:
- Synchronizing TileEntity/BlockEntity data
- Sending GUI interactions
- Triggering particle effects
- Custom player actions
- Command results

## How to Extend:
- Add more packet types for different data needs
- Implement more complex data structures
- Add additional validation and security checks
- Optimize network usage for high-frequency updates`},{id:"creative-tab",name:"Custom Creative Tab",description:"Create a custom creative mode tab with your mod's items",category:"items",difficulty:"beginner",code:`// Creative Tab Registration
public class ModCreativeTabs {
    // Creative Tab for regular items
    public static final DeferredHolder<CreativeModeTab, CreativeModeTab> MOD_TAB = 
        RegistryManager.CREATIVE_MODE_TABS.register("mod_tab", () -> 
            CreativeModeTab.builder()
                .title(Component.translatable("itemGroup." + MOD_ID + ".mod_tab"))
                .icon(() -> new ItemStack(ModItems.CUSTOM_ITEM.get()))
                .displayItems((params, output) -> {
                    // Add blocks
                    output.accept(ModBlocks.CUSTOM_BLOCK.get());
                    output.accept(ModBlocks.SPECIAL_BLOCK.get());
                    
                    // Add items
                    output.accept(ModItems.CUSTOM_ITEM.get());
                    output.accept(ModItems.SPECIAL_ITEM.get());
                    
                    // Add tools
                    output.accept(ModItems.CUSTOM_SWORD.get());
                    output.accept(ModItems.CUSTOM_PICKAXE.get());
                    
                    // You can also add vanilla items if relevant to your mod
                    output.accept(Items.DIAMOND);
                })
                .build()
        );
        
    // Creative Tab with categorized items (for mods with many items)
    public static final DeferredHolder<CreativeModeTab, CreativeModeTab> CATEGORIZED_TAB = 
        RegistryManager.CREATIVE_MODE_TABS.register("categorized_tab", () -> 
            CreativeModeTab.builder()
                .title(Component.translatable("itemGroup." + MOD_ID + ".categorized_tab"))
                .icon(() -> new ItemStack(ModItems.SPECIAL_ITEM.get()))
                .displayItems((params, output) -> {
                    // Group by categories
                    
                    // Blocks section
                    output.accept(ModBlocks.CUSTOM_BLOCK.get());
                    output.accept(ModBlocks.SPECIAL_BLOCK.get());
                    
                    // Separator item
                    ItemStack separator = new ItemStack(Items.BLACK_STAINED_GLASS_PANE);
                    separator.setHoverName(Component.literal("§r§8Resources"));
                    output.accept(separator);
                    
                    // Resources section
                    output.accept(ModItems.RAW_MATERIAL.get());
                    output.accept(ModItems.PROCESSED_MATERIAL.get());
                    
                    // Another separator
                    ItemStack toolSeparator = new ItemStack(Items.BLACK_STAINED_GLASS_PANE);
                    toolSeparator.setHoverName(Component.literal("§r§8Tools & Weapons"));
                    output.accept(toolSeparator);
                    
                    // Tools section
                    output.accept(ModItems.CUSTOM_SWORD.get());
                    output.accept(ModItems.CUSTOM_PICKAXE.get());
                })
                .build()
        );
        
    // Creative Tab with searchable items (for mods with many items)
    public static final DeferredHolder<CreativeModeTab, CreativeModeTab> SEARCHABLE_TAB = 
        RegistryManager.CREATIVE_MODE_TABS.register("searchable_tab", () -> 
            CreativeModeTab.builder()
                .title(Component.translatable("itemGroup." + MOD_ID + ".searchable_tab"))
                .icon(() -> new ItemStack(ModItems.CUSTOM_ITEM.get()))
                .searchBar(40) // Width of search bar
                .displayItems((params, output) -> {
                    // Add all items from the mod
                    ModItems.ITEMS.getEntries().forEach(item -> 
                        output.accept(item.get()));
                    
                    ModBlocks.BLOCKS.getEntries().forEach(block -> 
                        output.accept(block.get()));
                })
                .build()
        );
    
    public static void register() {
        // Initialize the class to register creative tabs
        MyMod.LOGGER.info("Registering creative tabs");
    }
}

// Usage in main mod class
public class MyMod {
    public static final String MOD_ID = "mymod";
    public static final Logger LOGGER = LogUtils.getLogger();
    
    public MyMod() {
        // Register tabs
        ModCreativeTabs.register();
        
        // Other initialization code
    }
}

// Example items and blocks registration for reference
public class ModItems {
    public static final DeferredRegister<Item> ITEMS = DeferredRegister.create(ForgeRegistries.ITEMS, MOD_ID);
    
    // Example items
    public static final RegistryObject<Item> CUSTOM_ITEM = ITEMS.register("custom_item", 
        () -> new Item(new Item.Properties()));
        
    public static final RegistryObject<Item> SPECIAL_ITEM = ITEMS.register("special_item", 
        () -> new Item(new Item.Properties()));
        
    public static final RegistryObject<Item> RAW_MATERIAL = ITEMS.register("raw_material", 
        () -> new Item(new Item.Properties()));
        
    public static final RegistryObject<Item> PROCESSED_MATERIAL = ITEMS.register("processed_material", 
        () -> new Item(new Item.Properties()));
        
    public static final RegistryObject<Item> CUSTOM_SWORD = ITEMS.register("custom_sword", 
        () -> new SwordItem(Tiers.IRON, 3, -2.4F, new Item.Properties()));
        
    public static final RegistryObject<Item> CUSTOM_PICKAXE = ITEMS.register("custom_pickaxe", 
        () -> new PickaxeItem(Tiers.IRON, 1, -2.8F, new Item.Properties()));
}

public class ModBlocks {
    public static final DeferredRegister<Block> BLOCKS = DeferredRegister.create(ForgeRegistries.BLOCKS, MOD_ID);
    
    // Example blocks
    public static final RegistryObject<Block> CUSTOM_BLOCK = BLOCKS.register("custom_block", 
        () -> new Block(BlockBehaviour.Properties.of().mapColor(MapColor.STONE)));
        
    public static final RegistryObject<Block> SPECIAL_BLOCK = BLOCKS.register("special_block", 
        () -> new Block(BlockBehaviour.Properties.of().mapColor(MapColor.QUARTZ)));
}`,explanation:`This template demonstrates creating custom creative mode tabs in NeoForge 1.21.5, allowing you to organize your mod's items in the creative inventory.

## Key Components:
1. **Basic Creative Tab**:
   - \`MOD_TAB\`: A simple tab that displays all your mod's items
   - Uses \`CreativeModeTab.builder()\` to configure the tab
   - Sets a title and icon
   - \`displayItems\`: Adds items to the tab

2. **Categorized Tab**:
   - Organizes items into visual groups using separator items
   - Custom hover names on separators create section headings
   - Particularly useful for mods with many related items

3. **Searchable Tab**:
   - Includes a search bar for filtering items
   - Automatically adds all items from your mod's registries
   - Best for mods with lots of items

4. **Registration**:
   - Uses \`DeferredHolder\` from the registry system
   - Organized in a dedicated class for creative tabs

## Technical Aspects:
- \`Component.translatable\`: Creates localizable text for the tab name
- \`ItemStack\` used for both the tab icon and items
- Custom naming with formatting codes for separators
- Search bar width can be customized

## Best Practices:
- Group related items together
- Use visual separators for clarity in large item sets
- Provide meaningful organization for players
- Make your most important/commonly used items easily accessible

## How to Extend:
- Add conditional display based on game stage or player capabilities
- Create multiple tabs for different item categories
- Add tooltips or special rendering for items in the tab
- Create themed organization with custom separator items
- Add vanilla items that complement your mod items`}],k=()=>C==="all"?x.filter(O=>w==="all"?!0:O.difficulty===w):x.filter(O=>{const W=O.category===C;return w==="all"?W:W&&O.difficulty===w}),N=async()=>{if(!d.trim()){o({title:"Empty Prompt",description:"Please enter a description of the code you want to generate.",variant:"destructive"});return}v(!0);try{setTimeout(()=>{let O="",W="";d.toLowerCase().includes("block")?(O=`public class ExampleBlock extends Block {
    public ExampleBlock() {
        super(Properties.of()
            .mapColor(MapColor.STONE)
            .strength(3.0F)
            .requiresCorrectToolForDrops()
            .sound(SoundType.STONE));
    }
    
    @Override
    public InteractionResult use(BlockState state, Level level, BlockPos pos, 
                               Player player, InteractionHand hand, BlockHitResult hit) {
        if (!level.isClientSide) {
            // Server-side logic
            player.sendSystemMessage(Component.literal("You clicked on Example Block!"));
        }
        
        return InteractionResult.sidedSuccess(level.isClientSide);
    }
    
    @Override
    public void animateTick(BlockState state, Level level, BlockPos pos, RandomSource random) {
        // Client-side particle effects
        if (random.nextInt(10) == 0) {
            level.addParticle(
                ParticleTypes.FLAME,
                pos.getX() + 0.5 + random.nextDouble() * 0.4 - 0.2,
                pos.getY() + 0.5 + random.nextDouble() * 0.4 - 0.2,
                pos.getZ() + 0.5 + random.nextDouble() * 0.4 - 0.2,
                0.0, 0.0, 0.0);
        }
    }
}

// Register in your mod's registration class:
public static void register(ComponentRegistry registry) {
    registry.register(registration -> {
        registration.register(ResourceKey.createRegistryKey(
            new ResourceLocation("minecraft", "block")),
            new ResourceLocation(MOD_ID, "example_block"),
            () -> new ExampleBlock());
            
        // Don't forget to register the block item too
        registration.register(ResourceKey.createRegistryKey(
            new ResourceLocation("minecraft", "item")),
            new ResourceLocation(MOD_ID, "example_block"),
            () -> new BlockItem(ModBlocks.EXAMPLE_BLOCK.get(), new Item.Properties()));
    });
}`,W=`I've generated a custom block for NeoForge 1.21.5 with the following features:

1. **Base Properties**:
   - Medium hardness and resistance (3.0F)
   - Requires the correct tool to harvest (like a pickaxe)
   - Stone sound type when walked on or broken
   - Stone map color for minimaps

2. **Interactive Behavior**:
   - Custom behavior when right-clicked
   - Sends a message to the player (server-side only)
   - Returns appropriate interaction result for both client and server

3. **Visual Effects**:
   - \`animateTick\` method adds occasional flame particles
   - Particles appear randomly near the center of the block
   - Only runs on the client side for performance

4. **Modern Registration**:
   - Uses the component registry system
   - Registers both the block and its item form
   - Uses proper resource keys and locations

**How to Use This Code**:
1. Add this class to your mod
2. Add the registration code to your registry setup
3. Create block models, textures, and blockstates in your resource pack
4. Add a localization entry for the block name

**To Extend This Block**:
- Add custom block states for different appearances
- Implement \`onRemove\` for special behavior when broken
- Add a block entity for storing data`):d.toLowerCase().includes("entity")?(O=`public class CustomEntity extends PathfinderMob {
    private static final EntityDataAccessor<Boolean> IS_CHARGING = 
        SynchedEntityData.defineId(CustomEntity.class, EntityDataSerializers.BOOLEAN);
    
    public CustomEntity(EntityType<? extends PathfinderMob> entityType, Level level) {
        super(entityType, level);
    }
    
    public static AttributeSupplier.Builder createAttributes() {
        return Mob.createMobAttributes()
            .add(Attributes.MAX_HEALTH, 30.0)
            .add(Attributes.MOVEMENT_SPEED, 0.25)
            .add(Attributes.ATTACK_DAMAGE, 5.0)
            .add(Attributes.ARMOR, 2.0)
            .add(Attributes.FOLLOW_RANGE, 24.0);
    }
    
    @Override
    protected void defineSynchedData() {
        super.defineSynchedData();
        this.entityData.define(IS_CHARGING, false);
    }
    
    public boolean isCharging() {
        return this.entityData.get(IS_CHARGING);
    }
    
    public void setCharging(boolean charging) {
        this.entityData.set(IS_CHARGING, charging);
    }
    
    @Override
    protected void registerGoals() {
        // Basic goals
        this.goalSelector.addGoal(1, new FloatGoal(this));
        this.goalSelector.addGoal(2, new CustomChargeGoal(this, 1.5D));
        this.goalSelector.addGoal(3, new MeleeAttackGoal(this, 1.0D, true));
        this.goalSelector.addGoal(4, new WaterAvoidingRandomStrollGoal(this, 0.8D));
        this.goalSelector.addGoal(5, new LookAtPlayerGoal(this, Player.class, 8.0F));
        this.goalSelector.addGoal(6, new RandomLookAroundGoal(this));
        
        // Target goals
        this.targetSelector.addGoal(1, new HurtByTargetGoal(this));
        this.targetSelector.addGoal(2, new NearestAttackableTargetGoal<>(this, Player.class, true));
        this.targetSelector.addGoal(3, new NearestAttackableTargetGoal<>(this, Animal.class, false));
    }
    
    // Custom AI goal for charging attack
    static class CustomChargeGoal extends Goal {
        private final PathfinderMob mob;
        private final double speedModifier;
        private LivingEntity target;
        private int chargeCooldown = 0;
        
        public CustomChargeGoal(PathfinderMob mob, double speedModifier) {
            this.mob = mob;
            this.speedModifier = speedModifier;
            this.setFlags(EnumSet.of(Goal.Flag.MOVE));
        }
        
        @Override
        public boolean canUse() {
            if (chargeCooldown > 0) {
                chargeCooldown--;
                return false;
            }
            
            this.target = this.mob.getTarget();
            if (target == null) return false;
            
            double distSqr = this.mob.distanceToSqr(target);
            return distSqr >= 9.0D && distSqr <= 36.0D; // Between 3 and 6 blocks away
        }
        
        @Override
        public void start() {
            // Start charging
            this.mob.getNavigation().moveTo(target, this.speedModifier);
            ((CustomEntity)mob).setCharging(true);
        }
        
        @Override
        public void stop() {
            // Stop charging
            ((CustomEntity)mob).setCharging(false);
            chargeCooldown = 60; // 3 second cooldown
        }
        
        @Override
        public boolean canContinueToUse() {
            return !this.mob.getNavigation().isDone() && 
                  this.mob.getTarget() != null &&
                  this.mob.getTarget().isAlive();
        }
    }
    
    @Override
    public void aiStep() {
        super.aiStep();
        
        // Add particle effects when charging
        if (this.isCharging() && this.level().isClientSide()) {
            for (int i = 0; i < 2; i++) {
                this.level().addParticle(
                    ParticleTypes.FLAME,
                    this.getRandomX(0.5D),
                    this.getRandomY(),
                    this.getRandomZ(0.5D),
                    0, 0, 0);
            }
        }
    }
    
    @Override
    protected SoundEvent getAmbientSound() {
        return SoundEvents.RAVAGER_AMBIENT;
    }
    
    @Override
    protected SoundEvent getHurtSound(DamageSource damageSource) {
        return SoundEvents.RAVAGER_HURT;
    }
    
    @Override
    protected SoundEvent getDeathSound() {
        return SoundEvents.RAVAGER_DEATH;
    }
    
    @Override
    protected void playStepSound(BlockPos pos, BlockState blockState) {
        this.playSound(SoundEvents.RAVAGER_STEP, 0.15F, 1.0F);
    }
}

// Registration
public static void register(ComponentRegistry registry) {
    // Create entity type
    EntityType<CustomEntity> CUSTOM_ENTITY_TYPE = EntityType.Builder
        .of(CustomEntity::new, MobCategory.MONSTER)
        .sized(1.0F, 1.8F)
        .build(new ResourceLocation(MOD_ID, "custom_entity").toString());
        
    // Register entity type and attributes
    registry.register(registration -> {
        registration.register(ResourceKey.createRegistryKey(
            new ResourceLocation("minecraft", "entity_type")),
            new ResourceLocation(MOD_ID, "custom_entity"),
            () -> CUSTOM_ENTITY_TYPE);
            
        registration.register(ResourceKey.createRegistryKey(
            new ResourceLocation("minecraft", "attribute")),
            new ResourceLocation(MOD_ID, "custom_entity_attributes"),
            () -> CustomEntity.createAttributes().build());
    });
}`,W=`I've generated a custom mob entity for NeoForge 1.21.5 with the following features:

1. **Base Attributes**:
   - 30 health points (15 hearts)
   - Medium movement speed
   - Strong attack damage (5.0)
   - Some armor protection
   - Good detection range (24 blocks)

2. **AI Behavior System**:
   - Basic movement and looking behaviors
   - Custom charging attack with cooldown
   - Targets players and animals
   - Responds to being hurt

3. **Synced Data**:
   - Tracks charging state between client and server
   - Allows for visual effects when charging

4. **Custom AI Goal**:
   - Special charging attack that activates when the target is at the right distance
   - Increases speed during charge
   - Includes a cooldown to prevent spam

5. **Visual and Audio Effects**:
   - Flame particles when charging
   - Borrowed sound effects from Ravager (you should replace with your own)
   - Step sounds when walking

6. **Modern Registration**:
   - Properly sized hitbox (1.0 × 1.8 blocks)
   - Monster category for spawning rules
   - Registers both entity type and its attributes

**To Make This Entity Complete**:
1. Create model and texture files
2. Add entity renderer
3. Set up spawn conditions
4. Create a spawn egg item
5. Add loot tables for drops

**To Extend This Entity**:
- Add more custom attacks
- Implement ranged attacks
- Add custom animations
- Create special drops or interactions`):(O=`public class CustomItem extends Item {
    public CustomItem() {
        super(new Item.Properties().stacksTo(16));
    }
    
    @Override
    public InteractionResultHolder<ItemStack> use(Level level, Player player, InteractionHand hand) {
        ItemStack stack = player.getItemInHand(hand);
        
        if (!level.isClientSide()) {
            // Server-side effects
            player.getCooldowns().addCooldown(this, 20); // 1 second cooldown
            
            // Apply status effect to player
            player.addEffect(new MobEffectInstance(MobEffects.MOVEMENT_SPEED, 200, 1)); // Speed II for 10 seconds
            
            // Play sound
            level.playSound(null, player.getX(), player.getY(), player.getZ(), 
                SoundEvents.EXPERIENCE_ORB_PICKUP, SoundSource.PLAYERS, 0.5F, 0.4F);
                
            // Damage the item
            if (!player.getAbilities().instabuild) {
                stack.hurtAndBreak(1, player, (p) -> p.broadcastBreakEvent(hand));
            }
        } else {
            // Client-side particles
            for (int i = 0; i < 10; i++) {
                level.addParticle(
                    ParticleTypes.EFFECT,
                    player.getX() + (level.random.nextDouble() - 0.5) * 1.0,
                    player.getY() + level.random.nextDouble() * 2.0,
                    player.getZ() + (level.random.nextDouble() - 0.5) * 1.0,
                    0.0, 0.1, 0.0);
            }
        }
        
        return InteractionResultHolder.success(stack);
    }
    
    @Override
    public void appendHoverText(ItemStack stack, @Nullable Level level, List<Component> tooltip, TooltipFlag flag) {
        tooltip.add(Component.translatable("item." + MOD_ID + ".custom_item.tooltip")
            .withStyle(ChatFormatting.GRAY));
        tooltip.add(Component.literal("Right-click to activate speed boost")
            .withStyle(ChatFormatting.BLUE));
    }
}

// Registration
public static void register(ComponentRegistry registry) {
    registry.register(registration -> {
        registration.register(ResourceKey.createRegistryKey(
            new ResourceLocation("minecraft", "item")),
            new ResourceLocation(MOD_ID, "custom_item"),
            () -> new CustomItem());
    });
}`,W=`I've generated a custom item for NeoForge 1.21.5 with the following features:

1. **Basic Properties**:
   - Limited stack size (16 items per stack)
   - No other special properties by default

2. **Right-Click Functionality**:
   - Overridden \`use\` method to handle right-click in air or on blocks
   - Applies a Speed II effect to the player for 10 seconds
   - Adds a 1-second cooldown to prevent spam
   - Plays a sound effect when used
   - Creates visual particles around the player
   - Takes 1 point of damage per use (if not in creative mode)

3. **Tooltip Information**:
   - Adds descriptive text when hovering over the item
   - Includes a translatable tooltip (for localization support)
   - Adds a blue hint about right-click functionality

4. **Client-Server Split**:
   - Properly separates client and server-side code
   - Server handles gameplay effects, sounds, and durability
   - Client handles visual particles

5. **Modern Registration**:
   - Uses the component registry system
   - Properly defines resource keys and locations

**How to Complete This Item**:
1. Add an item model JSON file
2. Create a texture file
3. Add localization entries including the tooltip
4. Optional: Create a custom renderer if needed

**To Extend This Item**:
- Add durability component for limited uses
- Implement different effects based on where it's used
- Add crafting recipes to create/repair the item
- Store NBT data for more complex functionality`),f(O),p(W),v(!1)},2500)}catch(O){console.error("Error generating code:",O),v(!1),o({title:"Generation Failed",description:"There was a problem generating code. Please try again.",variant:"destructive"})}},E=O=>{if(!t||!i){o({title:"No Editor Available",description:"Please open a file to apply the template to.",variant:"destructive"});return}t.setValue(O.code),o({title:"Template Applied",description:`The ${O.name} template has been applied to ${i.name}.`}),e(!1)},B=()=>{if(!t||!i){o({title:"No Editor Available",description:"Please open a file to apply the generated code to.",variant:"destructive"});return}t.setValue(h),o({title:"Code Applied",description:`The generated code has been applied to ${i.name}.`}),e(!1)},A=O=>{navigator.clipboard.writeText(O).then(()=>{o({title:"Copied to Clipboard",description:"The code has been copied to your clipboard."})})};return g.jsx(cf,{open:n,onOpenChange:e,children:g.jsxs(yu,{className:"max-w-5xl bg-gray-900 border-gray-700 text-white",children:[g.jsxs(Cu,{children:[g.jsxs(Su,{className:"text-xl text-white flex items-center",children:[g.jsx(J1e,{className:"h-6 w-6 mr-2 text-emerald-400"}),"Educational Code Generation"]}),g.jsx(xu,{className:"text-gray-400",children:"Generate NeoForge 1.21.5 code with detailed explanations using Claude AI"})]}),g.jsxs(hf,{value:r,onValueChange:a,className:"mt-2",children:[g.jsxs(ku,{className:"bg-gray-800/70",children:[g.jsx(Tn,{value:"templates",children:"Code Templates"}),g.jsx(Tn,{value:"generation",children:"Custom Generation"})]}),g.jsxs(Rn,{value:"templates",className:"pt-4 max-h-[70vh] overflow-auto",children:[g.jsxs("div",{className:"flex mb-4 space-x-2",children:[g.jsxs("div",{children:[g.jsx(Xi,{htmlFor:"category-filter",className:"text-sm text-gray-400 mb-1.5 block",children:"Category"}),g.jsxs(Nr,{value:C,onValueChange:S,children:[g.jsx(Go,{className:"w-[140px] bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Select Category"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"all",children:"All Categories"}),g.jsx(Nt,{value:"blocks",children:"Blocks"}),g.jsx(Nt,{value:"items",children:"Items"}),g.jsx(Nt,{value:"entities",children:"Entities"}),g.jsx(Nt,{value:"crafting",children:"Crafting"}),g.jsx(Nt,{value:"networking",children:"Networking"}),g.jsx(Nt,{value:"tools",children:"Tools"})]})]})]}),g.jsxs("div",{children:[g.jsx(Xi,{htmlFor:"difficulty-filter",className:"text-sm text-gray-400 mb-1.5 block",children:"Difficulty"}),g.jsxs(Nr,{value:w,onValueChange:y,children:[g.jsx(Go,{className:"w-[140px] bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Select Difficulty"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"all",children:"All Levels"}),g.jsx(Nt,{value:"beginner",children:"Beginner"}),g.jsx(Nt,{value:"intermediate",children:"Intermediate"}),g.jsx(Nt,{value:"advanced",children:"Advanced"})]})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[k().map(O=>g.jsx(Bt,{className:"p-4 bg-gray-800/30 border-gray-700 transition-colors hover:bg-gray-800/50",children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("h3",{className:"text-lg font-medium text-white",children:O.name}),g.jsx("span",{className:`ml-2 text-xs px-2 py-0.5 rounded-full ${O.difficulty==="beginner"?"bg-green-900/20 text-green-400 border border-green-900/50":O.difficulty==="intermediate"?"bg-blue-900/20 text-blue-400 border border-blue-900/50":"bg-purple-900/20 text-purple-400 border border-purple-900/50"}`,children:O.difficulty.charAt(0).toUpperCase()+O.difficulty.slice(1)})]}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:O.description})]}),g.jsxs(Se,{onClick:()=>c(O),children:[g.jsx(XL,{className:"h-4 w-4 mr-1"}),"View"]})]})},O.id)),k().length===0&&g.jsxs("div",{className:"text-center p-8 bg-gray-800/30 border border-gray-700 rounded-md",children:[g.jsx(g$,{className:"h-8 w-8 text-gray-500 mx-auto mb-2"}),g.jsx("h3",{className:"text-lg font-medium text-white",children:"No templates found"}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try changing your category or difficulty filter."})]})]})]}),g.jsxs(Rn,{value:"generation",className:"space-y-4 pt-4 max-h-[70vh] overflow-auto",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"code-prompt",children:"Describe the code you need:"}),g.jsx(zv,{id:"code-prompt",placeholder:"E.g., Create a custom block that emits light and drops a special item when broken",value:d,onChange:O=>u(O.target.value),className:"h-24 bg-gray-800 border-gray-700 resize-none"}),g.jsx("div",{className:"flex justify-end",children:g.jsx(Se,{onClick:N,disabled:b||!d.trim(),children:b?g.jsxs(g.Fragment,{children:[g.jsx(Qi,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):g.jsxs(g.Fragment,{children:[g.jsx(Lh,{className:"h-4 w-4 mr-2"}),"Generate Code"]})})})]}),h&&g.jsxs("div",{className:"space-y-4 border-t border-gray-700 pt-4 mt-4",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("h3",{className:"text-md font-medium text-white",children:"Generated Code:"}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>A(h),children:[g.jsx(lSe,{className:"h-4 w-4 mr-1"}),"Copy"]}),g.jsxs(Se,{size:"sm",onClick:B,children:[g.jsx(zn,{className:"h-4 w-4 mr-1"}),"Apply"]})]})]}),g.jsx("div",{className:"bg-gray-950 rounded-md p-3 overflow-x-auto max-h-[300px] overflow-y-auto",children:g.jsx("pre",{className:"text-sm text-green-400 font-mono",children:h})})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-md font-medium text-white mb-2",children:"Explanation:"}),g.jsx("div",{className:"bg-gray-800/30 rounded-md p-4 text-sm text-gray-300 max-h-[300px] overflow-y-auto",children:m.split(`

`).map((O,W)=>g.jsx("p",{className:"mb-3",children:O},W))})]})]})]})]}),l&&g.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[g.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[g.jsx("h2",{className:"text-xl font-medium text-white",children:l.name}),g.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>c(null),className:"h-8 w-8 p-0 rounded-full",children:g.jsx(X,{className:"h-5 w-5"})})]}),g.jsx("div",{className:"p-4 overflow-auto",style:{maxHeight:"calc(90vh - 140px)"},children:g.jsxs(hf,{defaultValue:"code",children:[g.jsxs(ku,{className:"bg-gray-800/70",children:[g.jsx(Tn,{value:"code",children:"Code"}),g.jsx(Tn,{value:"explanation",children:"Explanation"})]}),g.jsx(Rn,{value:"code",className:"pt-4",children:g.jsx("div",{className:"bg-gray-950 rounded-md p-3 overflow-x-auto",children:g.jsx("pre",{className:"text-sm text-green-400 font-mono",children:l.code})})}),g.jsx(Rn,{value:"explanation",className:"pt-4",children:g.jsx("div",{className:"bg-gray-800/30 rounded-md p-4 text-sm text-gray-300",children:l.explanation.split(`

`).map((O,W)=>g.jsx("p",{className:"mb-3",children:O},W))})})]})}),g.jsxs("div",{className:"p-4 border-t border-gray-700 flex justify-end",children:[g.jsx(Se,{variant:"outline",onClick:()=>c(null),className:"mr-2",children:"Cancel"}),g.jsxs(Se,{variant:"default",onClick:()=>{A(l.code),c(null)},className:"mr-2",children:[g.jsx(QL,{className:"h-4 w-4 mr-1"}),"Copy Code"]}),g.jsxs(Se,{onClick:()=>{E(l),c(null)},children:[g.jsx(zn,{className:"h-4 w-4 mr-1"}),"Apply Template"]})]})]})})]})})}var[n5,_dt]=sc("Tooltip",[w1]),s5=w1(),ewe="TooltipProvider",Rot=700,cU="tooltip.open",[Mot,GZ]=n5(ewe),twe=n=>{const{__scopeTooltip:e,delayDuration:t=Rot,skipDelayDuration:i=300,disableHoverableContent:s=!1,children:o}=n,r=L.useRef(!0),a=L.useRef(!1),l=L.useRef(0);return L.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),g.jsx(Mot,{scope:e,isOpenDelayedRef:r,delayDuration:t,onOpen:L.useCallback(()=>{window.clearTimeout(l.current),r.current=!1},[]),onClose:L.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>r.current=!0,i)},[i]),isPointerInTransitRef:a,onPointerInTransitChange:L.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:o})};twe.displayName=ewe;var o5="Tooltip",[Pot,r5]=n5(o5),iwe=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:s=!1,onOpenChange:o,disableHoverableContent:r,delayDuration:a}=n,l=GZ(o5,n.__scopeTooltip),c=s5(e),[d,u]=L.useState(null),h=qc(),f=L.useRef(0),m=r??l.disableHoverableContent,p=a??l.delayDuration,b=L.useRef(!1),[v=!1,w]=af({prop:i,defaultProp:s,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(cU))):l.onClose(),o==null||o(k)}}),y=L.useMemo(()=>v?b.current?"delayed-open":"instant-open":"closed",[v]),C=L.useCallback(()=>{window.clearTimeout(f.current),f.current=0,b.current=!1,w(!0)},[w]),S=L.useCallback(()=>{window.clearTimeout(f.current),f.current=0,w(!1)},[w]),x=L.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{b.current=!0,w(!0),f.current=0},p)},[p,w]);return L.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),g.jsx(j$,{...c,children:g.jsx(Pot,{scope:e,contentId:h,open:v,stateAttribute:y,trigger:d,onTriggerChange:u,onTriggerEnter:L.useCallback(()=>{l.isOpenDelayedRef.current?x():C()},[l.isOpenDelayedRef,x,C]),onTriggerLeave:L.useCallback(()=>{m?S():(window.clearTimeout(f.current),f.current=0)},[S,m]),onOpen:C,onClose:S,disableHoverableContent:m,children:t})})};iwe.displayName=o5;var dU="TooltipTrigger",nwe=L.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,s=r5(dU,t),o=GZ(dU,t),r=s5(t),a=L.useRef(null),l=oi(e,a,s.onTriggerChange),c=L.useRef(!1),d=L.useRef(!1),u=L.useCallback(()=>c.current=!1,[]);return L.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),g.jsx(z$,{asChild:!0,...r,children:g.jsx(Et.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...i,ref:l,onPointerMove:$e(n.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:$e(n.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:$e(n.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:$e(n.onFocus,()=>{c.current||s.onOpen()}),onBlur:$e(n.onBlur,s.onClose),onClick:$e(n.onClick,s.onClose)})})});nwe.displayName=dU;var Aot="TooltipPortal",[bdt,Oot]=n5(Aot,{forceMount:void 0}),c1="TooltipContent",swe=L.forwardRef((n,e)=>{const t=Oot(c1,n.__scopeTooltip),{forceMount:i=t.forceMount,side:s="top",...o}=n,r=r5(c1,n.__scopeTooltip);return g.jsx(qr,{present:i||r.open,children:r.disableHoverableContent?g.jsx(owe,{side:s,...o,ref:e}):g.jsx(Fot,{side:s,...o,ref:e})})}),Fot=L.forwardRef((n,e)=>{const t=r5(c1,n.__scopeTooltip),i=GZ(c1,n.__scopeTooltip),s=L.useRef(null),o=oi(e,s),[r,a]=L.useState(null),{trigger:l,onClose:c}=t,d=s.current,{onPointerInTransitChange:u}=i,h=L.useCallback(()=>{a(null),u(!1)},[u]),f=L.useCallback((m,p)=>{const b=m.currentTarget,v={x:m.clientX,y:m.clientY},w=jot(v,b.getBoundingClientRect()),y=zot(v,w),C=Uot(p.getBoundingClientRect()),S=Kot([...y,...C]);a(S),u(!0)},[u]);return L.useEffect(()=>()=>h(),[h]),L.useEffect(()=>{if(l&&d){const m=b=>f(b,d),p=b=>f(b,l);return l.addEventListener("pointerleave",m),d.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",p)}}},[l,d,f,h]),L.useEffect(()=>{if(r){const m=p=>{const b=p.target,v={x:p.clientX,y:p.clientY},w=(l==null?void 0:l.contains(b))||(d==null?void 0:d.contains(b)),y=!$ot(v,r);w?h():y&&(h(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,d,r,c,h]),g.jsx(owe,{...n,ref:o})}),[Bot,Wot]=n5(o5,{isInside:!1}),Hot=l1e("TooltipContent"),owe=L.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:r,...a}=n,l=r5(c1,t),c=s5(t),{onClose:d}=l;return L.useEffect(()=>(document.addEventListener(cU,d),()=>document.removeEventListener(cU,d)),[d]),L.useEffect(()=>{if(l.trigger){const u=h=>{const f=h.target;f!=null&&f.contains(l.trigger)&&d()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[l.trigger,d]),g.jsx(f1,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:u=>u.preventDefault(),onDismiss:d,children:g.jsxs(U$,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[g.jsx(Hot,{children:i}),g.jsx(Bot,{scope:t,isInside:!0,children:g.jsx(I1e,{id:l.contentId,role:"tooltip",children:s||i})})]})})});swe.displayName=c1;var rwe="TooltipArrow",Vot=L.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,s=s5(t);return Wot(rwe,t).isInside?null:g.jsx($$,{...s,...i,ref:e})});Vot.displayName=rwe;function jot(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),o=Math.abs(e.left-n.x);switch(Math.min(t,i,s,o)){case o:return"left";case s:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function zot(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function Uot(n){const{top:e,right:t,bottom:i,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:i},{x:s,y:i}]}function $ot(n,e){const{x:t,y:i}=n;let s=!1;for(let o=0,r=e.length-1;o<e.length;r=o++){const a=e[o].x,l=e[o].y,c=e[r].x,d=e[r].y;l>i!=d>i&&t<(c-a)*(i-l)/(d-l)+a&&(s=!s)}return s}function Kot(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),qot(e)}function qot(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const s=n[i];for(;e.length>=2;){const o=e[e.length-1],r=e[e.length-2];if((o.x-r.x)*(s.y-r.y)>=(o.y-r.y)*(s.x-r.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const s=n[i];for(;t.length>=2;){const o=t[t.length-1],r=t[t.length-2];if((o.x-r.x)*(s.y-r.y)>=(o.y-r.y)*(s.x-r.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Got=twe,Zot=iwe,Yot=nwe,awe=swe;const lwe=Got,Xot=Zot,Qot=Yot,cwe=L.forwardRef(({className:n,sideOffset:e=4,...t},i)=>g.jsx(awe,{ref:i,sideOffset:e,className:Yt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));cwe.displayName=awe.displayName;function Jot({projectId:n}){var Z;const{toast:e}=Aa(),t=L.useRef(null),i=L.useRef(null),[s,o]=L.useState(!0),[r,a]=L.useState([]),[l,c]=L.useState([]),[d,u]=L.useState([]),[h,f]=L.useState(null),[m,p]=L.useState(""),[b,v]=L.useState("hierarchy"),[w,y]=L.useState(1),[C,S]=L.useState("tree");L.useState(!1);const[x,k]=L.useState(null),[N,E]=L.useState([]);L.useEffect(()=>{o(!0),setTimeout(()=>{const V=[{id:"com.example.mod",type:"package",name:"com.example.mod",isExpanded:!0,children:[{id:"com.example.mod.ExampleMod",type:"class",name:"ExampleMod",fullName:"com.example.mod.ExampleMod",dependencies:["com.example.mod.init.ModItems","com.example.mod.init.ModBlocks","com.example.mod.init.ModEntities"],file:{id:1,path:"/src/main/java/com/example/mod/ExampleMod.java",name:"ExampleMod.java"}},{id:"com.example.mod.init",type:"package",name:"init",isExpanded:!0,children:[{id:"com.example.mod.init.ModItems",type:"class",name:"ModItems",fullName:"com.example.mod.init.ModItems",dependencies:["com.example.mod.item.CustomItem","com.example.mod.item.CustomSword"],file:{id:2,path:"/src/main/java/com/example/mod/init/ModItems.java",name:"ModItems.java"}},{id:"com.example.mod.init.ModBlocks",type:"class",name:"ModBlocks",fullName:"com.example.mod.init.ModBlocks",dependencies:["com.example.mod.block.CustomBlock","com.example.mod.block.CustomBlockWithEntity"],file:{id:3,path:"/src/main/java/com/example/mod/init/ModBlocks.java",name:"ModBlocks.java"}},{id:"com.example.mod.init.ModEntities",type:"class",name:"ModEntities",fullName:"com.example.mod.init.ModEntities",dependencies:["com.example.mod.entity.CustomEntity"],file:{id:4,path:"/src/main/java/com/example/mod/init/ModEntities.java",name:"ModEntities.java"}}]},{id:"com.example.mod.item",type:"package",name:"item",children:[{id:"com.example.mod.item.CustomItem",type:"class",name:"CustomItem",fullName:"com.example.mod.item.CustomItem",file:{id:5,path:"/src/main/java/com/example/mod/item/CustomItem.java",name:"CustomItem.java"}},{id:"com.example.mod.item.CustomSword",type:"class",name:"CustomSword",fullName:"com.example.mod.item.CustomSword",dependencies:["net.minecraft.world.item.SwordItem"],file:{id:6,path:"/src/main/java/com/example/mod/item/CustomSword.java",name:"CustomSword.java"}}]},{id:"com.example.mod.block",type:"package",name:"block",children:[{id:"com.example.mod.block.CustomBlock",type:"class",name:"CustomBlock",fullName:"com.example.mod.block.CustomBlock",dependencies:["net.minecraft.world.level.block.Block"],file:{id:7,path:"/src/main/java/com/example/mod/block/CustomBlock.java",name:"CustomBlock.java"}},{id:"com.example.mod.block.CustomBlockWithEntity",type:"class",name:"CustomBlockWithEntity",fullName:"com.example.mod.block.CustomBlockWithEntity",dependencies:["net.minecraft.world.level.block.entity.BlockEntity","com.example.mod.block.entity.CustomBlockEntity"],file:{id:8,path:"/src/main/java/com/example/mod/block/CustomBlockWithEntity.java",name:"CustomBlockWithEntity.java"}},{id:"com.example.mod.block.entity",type:"package",name:"entity",children:[{id:"com.example.mod.block.entity.CustomBlockEntity",type:"class",name:"CustomBlockEntity",fullName:"com.example.mod.block.entity.CustomBlockEntity",dependencies:["net.minecraft.world.level.block.entity.BlockEntity"],file:{id:9,path:"/src/main/java/com/example/mod/block/entity/CustomBlockEntity.java",name:"CustomBlockEntity.java"}}]}]},{id:"com.example.mod.entity",type:"package",name:"entity",children:[{id:"com.example.mod.entity.CustomEntity",type:"class",name:"CustomEntity",fullName:"com.example.mod.entity.CustomEntity",dependencies:["net.minecraft.world.entity.PathfinderMob"],file:{id:10,path:"/src/main/java/com/example/mod/entity/CustomEntity.java",name:"CustomEntity.java"}}]}]}],le=[{source:"com.example.mod.ExampleMod",target:"com.example.mod.init.ModItems",type:"uses"},{source:"com.example.mod.ExampleMod",target:"com.example.mod.init.ModBlocks",type:"uses"},{source:"com.example.mod.ExampleMod",target:"com.example.mod.init.ModEntities",type:"uses"},{source:"com.example.mod.init.ModItems",target:"com.example.mod.item.CustomItem",type:"creates"},{source:"com.example.mod.init.ModItems",target:"com.example.mod.item.CustomSword",type:"creates"},{source:"com.example.mod.init.ModBlocks",target:"com.example.mod.block.CustomBlock",type:"creates"},{source:"com.example.mod.init.ModBlocks",target:"com.example.mod.block.CustomBlockWithEntity",type:"creates"},{source:"com.example.mod.init.ModEntities",target:"com.example.mod.entity.CustomEntity",type:"creates"},{source:"com.example.mod.item.CustomSword",target:"net.minecraft.world.item.SwordItem",type:"extends"},{source:"com.example.mod.block.CustomBlock",target:"net.minecraft.world.level.block.Block",type:"extends"},{source:"com.example.mod.block.CustomBlockWithEntity",target:"com.example.mod.block.entity.CustomBlockEntity",type:"uses"},{source:"com.example.mod.block.entity.CustomBlockEntity",target:"net.minecraft.world.level.block.entity.BlockEntity",type:"extends"},{source:"com.example.mod.entity.CustomEntity",target:"net.minecraft.world.entity.PathfinderMob",type:"extends"}],Fe=[{id:"issue-1",severity:"error",message:"SwordItem inheritance not compatible with NeoForge 1.21.5",details:"In NeoForge 1.21.5, the SwordItem class should not be extended directly. Instead, use the component-based system with MeleeWeaponComponent.",affectedNodes:["com.example.mod.item.CustomSword"],recommendation:"Refactor CustomSword to extend Item and use ItemComponentsKeys.MELEE_WEAPON component."},{id:"issue-2",severity:"warning",message:"Potential circular dependency",details:"There may be a circular dependency between CustomBlockWithEntity and CustomBlockEntity classes.",affectedNodes:["com.example.mod.block.CustomBlockWithEntity","com.example.mod.block.entity.CustomBlockEntity"],recommendation:"Extract common functionality to a separate interface or use a different architectural pattern."},{id:"issue-3",severity:"info",message:"Consider using DataComponent for block properties",details:"NeoForge 1.21.5 recommends using the DataComponent system for sharing behaviors between blocks.",affectedNodes:["com.example.mod.block.CustomBlock"],recommendation:"Implement appropriate DataComponents for block behaviors instead of inheritance."}];a(V),E(V),c(le),u(Fe),o(!1)},1500)},[n]),L.useEffect(()=>{if(!m.trim()){E(r);return}const V=m.toLowerCase(),le=ke=>ke.map(De=>{const ce={...De};De.children&&De.children.length>0&&(ce.children=le(De.children));const Re=De.name.toLowerCase().includes(V)||De.fullName&&De.fullName.toLowerCase().includes(V),Ee=ce.children&&ce.children.length>0;return Re||Ee?(Re&&(ce.isExpanded=!0),ce):null}).filter(Boolean),Fe=le(r);E(Fe)},[m,r]),L.useEffect(()=>{if(s||!t.current||!i.current||b!=="graph")return;const V=t.current,le=V.getContext("2d");le&&(V.width=i.current.clientWidth,V.height=Math.max(600,i.current.clientHeight),le.clearRect(0,0,V.width,V.height),le.fillStyle="#1a1e2c",le.fillRect(0,0,V.width,V.height),C==="tree"?B(le,V.width,V.height):A(le,V.width,V.height))},[b,s,N,l,C,w,h]);const B=(V,le,Fe)=>{const ke=M(N).filter(Le=>Le.type==="class"||Le.type==="interface"||Le.type==="enum"),De={},ce=60*w,Re=160*w,Ee=100*w,it=le/2-ke.length*Re/2;ke.forEach((Le,ve)=>{De[Le.id]={x:it+ve*Re,y:100}});const Ge=new Set,J=(Le,ve=1)=>{if(Ge.has(Le))return;Ge.add(Le),l.filter(St=>St.target===Le).map(St=>St.source).forEach(St=>{De[St]&&(De[St].y=100+ve*Ee,J(St,ve+1))})};ke.forEach(Le=>{J(Le.id)}),l.forEach(Le=>{const ve=De[Le.source],nt=De[Le.target];if(ve&&nt){V.beginPath(),V.moveTo(ve.x,ve.y);const St=(ve.x+nt.x)/2,zi=(ve.y+nt.y)/2+30;V.quadraticCurveTo(St,zi,nt.x,nt.y),Le.type==="extends"?(V.strokeStyle="#ec4899",V.lineWidth=2):Le.type==="implements"?(V.strokeStyle="#6366f1",V.lineWidth=2,V.setLineDash([5,5])):Le.type==="creates"?(V.strokeStyle="#2dd4bf",V.lineWidth=1.5):(V.strokeStyle="#94a3b8",V.lineWidth=1),V.stroke(),V.setLineDash([]);const hs=Math.atan2(nt.y-ve.y,nt.x-ve.x),Bs=8*w;V.beginPath(),V.moveTo(nt.x,nt.y),V.lineTo(nt.x-Bs*Math.cos(hs-Math.PI/6),nt.y-Bs*Math.sin(hs-Math.PI/6)),V.lineTo(nt.x-Bs*Math.cos(hs+Math.PI/6),nt.y-Bs*Math.sin(hs+Math.PI/6)),V.closePath(),V.fillStyle=V.strokeStyle,V.fill()}}),ke.forEach(Le=>{const ve=De[Le.id];if(!ve)return;const nt=x&&x.affectedNodes.includes(Le.id),St=h&&h.id===Le.id;V.beginPath(),V.arc(ve.x,ve.y,ce/2,0,Math.PI*2),St?V.fillStyle="#3b82f6":nt?x.severity==="error"?V.fillStyle="rgba(220, 38, 38, 0.8)":x.severity==="warning"?V.fillStyle="rgba(245, 158, 11, 0.8)":V.fillStyle="rgba(59, 130, 246, 0.8)":Le.type==="class"?V.fillStyle="#1e293b":Le.type==="interface"?V.fillStyle="#0f172a":V.fillStyle="#0c0a09",V.fill(),V.lineWidth=2,V.strokeStyle=St?"#ffffff":"#64748b",V.stroke(),V.font=`${12*w}px system-ui`,V.fillStyle="#ffffff",V.textAlign="center",V.textBaseline="middle";const zi=Le.name.length>15?Le.name.substring(0,12)+"...":Le.name;V.fillText(zi,ve.x,ve.y)})},A=(V,le,Fe)=>{const ke=M(N).filter(Ge=>Ge.type==="class"||Ge.type==="interface"||Ge.type==="enum"),De=le/2,ce=Fe/2,Re=Math.min(le,Fe)*.4*w,Ee=60*w,it={};ke.forEach((Ge,J)=>{const Le=J/ke.length*Math.PI*2;it[Ge.id]={x:De+Re*Math.cos(Le),y:ce+Re*Math.sin(Le)}}),l.forEach(Ge=>{const J=it[Ge.source],Le=it[Ge.target];if(J&&Le){V.beginPath(),V.moveTo(J.x,J.y),V.lineTo(Le.x,Le.y),Ge.type==="extends"?(V.strokeStyle="#ec4899",V.lineWidth=2):Ge.type==="implements"?(V.strokeStyle="#6366f1",V.lineWidth=2,V.setLineDash([5,5])):Ge.type==="creates"?(V.strokeStyle="#2dd4bf",V.lineWidth=1.5):(V.strokeStyle="#94a3b8",V.lineWidth=1),V.stroke(),V.setLineDash([]);const ve=Math.atan2(Le.y-J.y,Le.x-J.x),nt=8*w;V.beginPath(),V.moveTo(Le.x,Le.y),V.lineTo(Le.x-nt*Math.cos(ve-Math.PI/6),Le.y-nt*Math.sin(ve-Math.PI/6)),V.lineTo(Le.x-nt*Math.cos(ve+Math.PI/6),Le.y-nt*Math.sin(ve+Math.PI/6)),V.closePath(),V.fillStyle=V.strokeStyle,V.fill()}}),ke.forEach(Ge=>{const J=it[Ge.id];if(!J)return;const Le=x&&x.affectedNodes.includes(Ge.id),ve=h&&h.id===Ge.id;V.beginPath(),V.arc(J.x,J.y,Ee/2,0,Math.PI*2),ve?V.fillStyle="#3b82f6":Le?x.severity==="error"?V.fillStyle="rgba(220, 38, 38, 0.8)":x.severity==="warning"?V.fillStyle="rgba(245, 158, 11, 0.8)":V.fillStyle="rgba(59, 130, 246, 0.8)":Ge.type==="class"?V.fillStyle="#1e293b":Ge.type==="interface"?V.fillStyle="#0f172a":V.fillStyle="#0c0a09",V.fill(),V.lineWidth=2,V.strokeStyle=ve?"#ffffff":"#64748b",V.stroke(),V.font=`${12*w}px system-ui`,V.fillStyle="#ffffff",V.textAlign="center",V.textBaseline="middle";const nt=Ge.name.length>15?Ge.name.substring(0,12)+"...":Ge.name;V.fillText(nt,J.x,J.y)})},O=()=>{y(V=>Math.min(V+.1,2))},W=()=>{y(V=>Math.max(V-.1,.5))},T=()=>{y(1)},M=V=>V.reduce((le,Fe)=>(le.push(Fe),Fe.children&&le.push(...M(Fe.children)),le),[]),z=V=>{if(!t.current||b!=="graph")return;const le=t.current,Fe=le.getBoundingClientRect(),ke=V.clientX-Fe.left,De=V.clientY-Fe.top,ce=M(N).filter(Ge=>Ge.type==="class"||Ge.type==="interface"||Ge.type==="enum"),Re={};if(C==="tree"){const Ge=160*w,J=le.width/2-ce.length*Ge/2;ce.forEach((Le,ve)=>{Re[Le.id]={x:J+ve*Ge,y:100}})}else{const Ge=le.width/2,J=le.height/2,Le=Math.min(le.width,le.height)*.4*w;ce.forEach((ve,nt)=>{const St=nt/ce.length*Math.PI*2;Re[ve.id]={x:Ge+Le*Math.cos(St),y:J+Le*Math.sin(St)}})}const Ee=60*w,it=ce.find(Ge=>{const J=Re[Ge.id];if(!J)return!1;const Le=J.x-ke,ve=J.y-De;return Math.sqrt(Le*Le+ve*ve)<=Ee/2});f(it||null)},ee=V=>{const le=ke=>ke.map(De=>De.id===V.id?{...De,isExpanded:!De.isExpanded}:De.children?{...De,children:le(De.children)}:De),Fe=le(r);a(Fe),E(le(N))},q=(V,le=0)=>{const Fe={marginLeft:`${le*20}px`},ke=V.isExpanded,De=x&&V.id&&x.affectedNodes.includes(V.id);return g.jsxs("div",{children:[g.jsxs("div",{className:`flex items-center py-1 px-2 hover:bg-gray-800/50 rounded ${(h==null?void 0:h.id)===V.id?"bg-blue-900/30 text-blue-300":""} ${De?x.severity==="error"?"bg-red-900/20 text-red-300 border-l-2 border-red-500":x.severity==="warning"?"bg-amber-900/20 text-amber-300 border-l-2 border-amber-500":"bg-blue-900/20 text-blue-300 border-l-2 border-blue-500":""}`,style:Fe,children:[V.children&&V.children.length>0?g.jsx("button",{onClick:()=>ee(V),className:"w-4 h-4 mr-1 flex items-center justify-center text-gray-400",children:ke?"▼":"►"}):g.jsx("span",{className:"w-4 h-4 mr-1"}),g.jsxs("div",{className:"flex-grow flex items-center cursor-pointer",onClick:()=>f(V),children:[V.type==="package"?g.jsx(a9,{className:"h-4 w-4 mr-1 text-gray-400"}):V.type==="interface"?g.jsx("i",{className:"h-4 w-4 mr-1 text-blue-400",children:"I"}):V.type==="enum"?g.jsx("i",{className:"h-4 w-4 mr-1 text-purple-400",children:"E"}):g.jsx("i",{className:"h-4 w-4 mr-1 text-green-400",children:"C"}),g.jsx("span",{className:"truncate",children:V.name})]})]}),V.children&&ke&&g.jsx("div",{children:V.children.map(ce=>q(ce,le+1))})]},V.id)};return g.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[g.jsxs("div",{className:"bg-gray-800/30 px-4 py-3 border-b border-gray-700 flex justify-between items-center",children:[g.jsx("h2",{className:"text-lg font-medium text-white",children:"Mod Architecture"}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs("div",{className:"relative w-56",children:[g.jsx(va,{placeholder:"Search classes...",value:m,onChange:V=>p(V.target.value),className:"pl-8 h-8 bg-gray-800 border-gray-700"}),g.jsx(m$,{className:"absolute left-2.5 top-2 h-4 w-4 text-gray-400"})]}),g.jsxs(Nr,{value:b,onValueChange:v,children:[g.jsx(Go,{className:"w-[120px] h-8 bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"View Mode"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"hierarchy",children:"Hierarchy"}),g.jsx(Nt,{value:"graph",children:"Dependency Graph"}),g.jsx(Nt,{value:"issues",children:"Issues"})]})]})]})]}),g.jsx("div",{className:"flex-grow flex overflow-hidden",children:s?g.jsx("div",{className:"flex-grow flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx(Qi,{className:"h-8 w-8 animate-spin text-blue-500 mx-auto mb-2"}),g.jsx("p",{className:"text-gray-400",children:"Analyzing mod architecture..."})]})}):b==="hierarchy"?g.jsxs("div",{className:"flex flex-col md:flex-row w-full h-full",children:[g.jsx("div",{className:"w-full md:w-1/2 border-r border-gray-700 overflow-auto p-2",children:N.length===0?g.jsx("div",{className:"text-center p-8 text-gray-400",children:"No classes or packages found"}):N.map(V=>q(V))}),g.jsx("div",{className:"w-full md:w-1/2 p-4 overflow-auto",children:h?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:h.name}),h.fullName&&g.jsx("p",{className:"text-sm text-gray-400",children:h.fullName})]}),h.type!=="package"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Type"}),g.jsx("div",{className:"bg-gray-800/50 p-2 rounded-md",children:g.jsx("span",{className:"capitalize",children:h.type})})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"File"}),g.jsx("div",{className:"bg-gray-800/50 p-2 rounded-md",children:((Z=h.file)==null?void 0:Z.path)||"Unknown"})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Dependencies"}),h.dependencies&&h.dependencies.length>0?g.jsx("div",{className:"space-y-1",children:h.dependencies.map(V=>g.jsx("div",{className:"bg-gray-800/50 p-2 rounded-md",children:V},V))}):g.jsx("div",{className:"bg-gray-800/50 p-2 rounded-md text-gray-400",children:"No dependencies"})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Issues"}),d.filter(V=>V.affectedNodes.includes(h.id)).length>0?g.jsx("div",{className:"space-y-2",children:d.filter(V=>V.affectedNodes.includes(h.id)).map(V=>g.jsx("div",{className:`p-3 rounded-md ${V.severity==="error"?"bg-red-900/20 border border-red-900/50":V.severity==="warning"?"bg-amber-900/20 border border-amber-900/50":"bg-blue-900/20 border border-blue-900/50"}`,children:g.jsxs("div",{className:"flex items-start",children:[V.severity==="error"?g.jsx(Rg,{className:"h-5 w-5 text-red-500 mr-2 flex-shrink-0 mt-0.5"}):V.severity==="warning"?g.jsx(Rg,{className:"h-5 w-5 text-amber-500 mr-2 flex-shrink-0 mt-0.5"}):g.jsx(W_,{className:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5"}),g.jsxs("div",{children:[g.jsx("h5",{className:`font-medium ${V.severity==="error"?"text-red-400":V.severity==="warning"?"text-amber-400":"text-blue-400"}`,children:V.message}),g.jsx("p",{className:"text-sm text-gray-300 mt-1",children:V.details})]})]})},V.id))}):g.jsx("div",{className:"bg-gray-800/50 p-2 rounded-md text-gray-400",children:"No issues found"})]})]}),h.type==="package"&&g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Contents"}),h.children&&h.children.length>0?g.jsx("div",{className:"bg-gray-800/50 rounded-md overflow-hidden",children:g.jsx("div",{className:"divide-y divide-gray-700",children:h.children.map(V=>g.jsx("div",{className:"p-2 hover:bg-gray-700/50 cursor-pointer",onClick:()=>f(V),children:g.jsxs("div",{className:"flex items-center",children:[V.type==="package"?g.jsx(a9,{className:"h-4 w-4 mr-2 text-gray-400"}):V.type==="interface"?g.jsx("i",{className:"h-4 w-4 mr-2 text-blue-400",children:"I"}):V.type==="enum"?g.jsx("i",{className:"h-4 w-4 mr-2 text-purple-400",children:"E"}):g.jsx("i",{className:"h-4 w-4 mr-2 text-green-400",children:"C"}),V.name]})},V.id))})}):g.jsx("div",{className:"bg-gray-800/50 p-2 rounded-md text-gray-400",children:"Empty package"})]})]}):g.jsx("div",{className:"text-center p-8 text-gray-400",children:"Select a class or package to view details"})})]}):b==="graph"?g.jsxs("div",{className:"flex-grow overflow-hidden",ref:i,children:[g.jsxs("div",{className:"p-2 bg-gray-800/50 border-b border-gray-700 flex justify-between items-center",children:[g.jsxs("div",{className:"space-x-1",children:[g.jsx(Se,{variant:"outline",size:"sm",onClick:O,className:"h-8 w-8 p-0",children:g.jsx(xSe,{className:"h-4 w-4"})}),g.jsx(Se,{variant:"outline",size:"sm",onClick:W,className:"h-8 w-8 p-0",children:g.jsx(LSe,{className:"h-4 w-4"})}),g.jsxs(Se,{variant:"outline",size:"sm",onClick:T,className:"h-8",children:[g.jsx(fC,{className:"h-4 w-4 mr-1"}),"Reset"]})]}),g.jsx("div",{children:g.jsxs(Nr,{value:C,onValueChange:S,children:[g.jsx(Go,{className:"w-[120px] h-8 bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Layout"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"tree",children:"Tree Layout"}),g.jsx(Nt,{value:"force",children:"Force-Directed"})]})]})}),g.jsx("div",{children:g.jsx(lwe,{children:g.jsxs(Xot,{children:[g.jsx(Qot,{asChild:!0,children:g.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>{e({title:"Graph Exported",description:"The architecture diagram has been saved."})},className:"h-8",children:[g.jsx(dSe,{className:"h-4 w-4 mr-1"}),"Export"]})}),g.jsx(cwe,{children:g.jsx("p",{children:"Export diagram as PNG"})})]})})})]}),g.jsxs("div",{className:"relative h-full",children:[g.jsx("canvas",{ref:t,className:"w-full h-full",onClick:z}),g.jsxs("div",{className:"absolute bottom-4 right-4 bg-gray-900/90 p-3 rounded-md border border-gray-700 text-sm",children:[g.jsx("h4",{className:"font-medium text-white mb-2",children:"Legend"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"w-4 h-0.5 bg-pink-500 mr-2"}),g.jsx("span",{className:"text-gray-300",children:"Extends"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"w-4 h-0.5 bg-indigo-500 mr-2",style:{borderTop:"1px dashed"}}),g.jsx("span",{className:"text-gray-300",children:"Implements"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"w-4 h-0.5 bg-teal-500 mr-2"}),g.jsx("span",{className:"text-gray-300",children:"Creates"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"w-4 h-0.5 bg-slate-400 mr-2"}),g.jsx("span",{className:"text-gray-300",children:"Uses"})]})]})]}),h&&g.jsxs("div",{className:"absolute top-4 left-4 bg-gray-900/90 p-3 rounded-md border border-gray-700 max-w-xs",children:[g.jsx("h4",{className:"font-medium text-white",children:h.name}),h.fullName&&g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.fullName}),h.file&&g.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["File: ",h.file.name]})]})]})]}):g.jsxs("div",{className:"flex-grow overflow-auto p-4",children:[g.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Architecture Issues"}),d.length===0?g.jsxs("div",{className:"text-center p-8 bg-green-900/20 border border-green-900/50 rounded-md",children:[g.jsx("div",{className:"rounded-full bg-green-900/30 p-2 inline-flex mb-3",children:g.jsx(Check,{className:"h-6 w-6 text-green-500"})}),g.jsx("h4",{className:"text-lg font-medium text-green-400 mb-1",children:"No Issues Found"}),g.jsx("p",{className:"text-gray-300",children:"Your mod architecture appears to be following best practices."})]}):g.jsx("div",{className:"space-y-4",children:d.map(V=>g.jsx(Bt,{className:`p-4 ${(x==null?void 0:x.id)===V.id?"ring-2 ring-blue-500":""} ${V.severity==="error"?"bg-red-900/20 border-red-900/50":V.severity==="warning"?"bg-amber-900/20 border-amber-900/50":"bg-blue-900/20 border-blue-900/50"}`,onClick:()=>k((x==null?void 0:x.id)===V.id?null:V),children:g.jsxs("div",{className:"flex items-start",children:[V.severity==="error"?g.jsx(Rg,{className:"h-5 w-5 text-red-500 mr-3 flex-shrink-0 mt-0.5"}):V.severity==="warning"?g.jsx(Rg,{className:"h-5 w-5 text-amber-500 mr-3 flex-shrink-0 mt-0.5"}):g.jsx(W_,{className:"h-5 w-5 text-blue-500 mr-3 flex-shrink-0 mt-0.5"}),g.jsxs("div",{className:"flex-grow",children:[g.jsx("h4",{className:`font-medium ${V.severity==="error"?"text-red-400":V.severity==="warning"?"text-amber-400":"text-blue-400"}`,children:V.message}),g.jsx("p",{className:"text-sm text-gray-300 mt-1",children:V.details}),(x==null?void 0:x.id)===V.id&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"mt-3",children:[g.jsx("h5",{className:"text-sm font-medium text-gray-300 mb-1",children:"Affected Components"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:V.affectedNodes.map(le=>g.jsx("span",{className:"px-2 py-1 text-xs bg-gray-800 rounded-md text-gray-300",children:le.split(".").pop()},le))})]}),g.jsxs("div",{className:"mt-3",children:[g.jsx("h5",{className:"text-sm font-medium text-gray-300 mb-1",children:"Recommendation"}),g.jsx("p",{className:"text-sm text-gray-300 bg-gray-800/50 p-2 rounded-md",children:V.recommendation})]})]})]})]})},V.id))})]})})]})}function ert({projectId:n}){const{toast:e}=Aa(),[t,i]=L.useState([]),[s,o]=L.useState(null),[r,a]=L.useState(null),[l,c]=L.useState(!1),[d,u]=L.useState(!1),[h,f]=L.useState(!1),[m,p]=L.useState(""),[b,v]=L.useState("unit"),[w,y]=L.useState(""),[C,S]=L.useState("suites"),[x,k]=L.useState({}),[N,E]=L.useState(!1),[B,A]=L.useState(""),[O,W]=L.useState("");L.useEffect(()=>{const ce=[{id:"suite-1",name:"Core Block Tests",description:"Tests for custom block functionality",status:"passed",lastRun:new Date(Date.now()-36e5).toISOString(),coverage:87,testCases:[{id:"test-1",name:"CustomBlock - Basic Properties",type:"unit",status:"passed",filePath:"src/test/java/com/example/mod/block/CustomBlockTest.java",duration:42},{id:"test-2",name:"CustomBlock - Interaction Behavior",type:"unit",status:"passed",filePath:"src/test/java/com/example/mod/block/CustomBlockTest.java",duration:76},{id:"test-3",name:"CustomBlock - Redstone Integration",type:"integration",status:"passed",filePath:"src/test/java/com/example/mod/block/CustomBlockIntegrationTest.java",duration:128}]},{id:"suite-2",name:"Item Functionality",description:"Tests for custom items and weapons",status:"failed",lastRun:new Date(Date.now()-72e5).toISOString(),coverage:64,testCases:[{id:"test-4",name:"CustomItem - Creation",type:"unit",status:"passed",filePath:"src/test/java/com/example/mod/item/CustomItemTest.java",duration:38},{id:"test-5",name:"CustomSword - Damage Calculation",type:"unit",status:"failed",filePath:"src/test/java/com/example/mod/item/CustomSwordTest.java",duration:65,errorMessage:`java.lang.AssertionError: expected:<5.0> but was:<3.0>
at org.junit.Assert.fail(Assert.java:89)
at org.junit.Assert.failNotEquals(Assert.java:835)
at org.junit.Assert.assertEquals(Assert.java:647)
at com.example.mod.item.CustomSwordTest.testDamageCalculation(CustomSwordTest.java:42)`},{id:"test-6",name:"CustomSword - Special Effect",type:"integration",status:"passed",filePath:"src/test/java/com/example/mod/item/CustomSwordIntegrationTest.java",duration:132}]},{id:"suite-3",name:"Entity Tests",description:"Tests for custom entities and AI behavior",status:"pending",testCases:[{id:"test-7",name:"CustomEntity - Basic Properties",type:"unit",status:"pending",filePath:"src/test/java/com/example/mod/entity/CustomEntityTest.java"},{id:"test-8",name:"CustomEntity - AI Goals",type:"unit",status:"pending",filePath:"src/test/java/com/example/mod/entity/CustomEntityTest.java"}]}];i(ce),ce.length>0&&o(ce[0]),ce.length>0&&k({[ce[0].id]:!0})},[n]);const T=ce=>{k(Re=>({...Re,[ce]:!Re[ce]}))},M=ce=>{o(ce),a(null)},z=ce=>{a(ce)},ee=()=>{if(!m.trim()){e({title:"Validation Error",description:"Test name is required.",variant:"destructive"});return}const ce={id:`test-${Date.now()}`,name:m,type:b,status:"pending",filePath:`src/test/java/com/example/mod/${m.toLowerCase().replace(/\s+/g,"_")}.java`},Re={id:`suite-${Date.now()}`,name:m,description:w||`Tests for ${m}`,testCases:[ce],status:"pending"};i(Ee=>[...Ee,Re]),o(Re),f(!1),p(""),v("unit"),y(""),e({title:"Test Created",description:`New test suite "${m}" has been created.`})},q=()=>{c(!0),setTimeout(()=>{W(B==="CustomSword"?`package com.example.mod.item;

import static org.junit.jupiter.api.Assertions.*;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.DisplayName;

import net.minecraft.world.item.ItemStack;
import net.minecraft.world.entity.player.Player;
import net.minecraft.world.entity.LivingEntity;
import net.minecraft.core.registries.BuiltInRegistries;
import net.minecraft.world.level.Level;
import net.minecraft.server.level.ServerLevel;
import net.minecraft.core.BlockPos;
import net.neoforged.fml.util.ObfuscationReflectionHelper;

import com.example.mod.init.ModItems;

/**
 * Test suite for CustomSword class
 * Generated by Claude AI
 */
@DisplayName("CustomSword Tests")
public class CustomSwordTest {
    private CustomSword sword;
    private ItemStack swordStack;
    private ServerLevel mockLevel;
    private Player mockPlayer;
    
    @BeforeEach
    public void setup() {
        // Create a new CustomSword instance for each test
        sword = new CustomSword();
        swordStack = new ItemStack(sword);
        
        // Initialize mocks for testing
        // Note: In a real test, you would use a mocking framework like Mockito
        mockLevel = null; // Mock ServerLevel
        mockPlayer = null; // Mock Player
    }
    
    @Test
    @DisplayName("Test sword has correct durability")
    public void testDurability() {
        // Verify the sword uses the correct durability from component
        var durabilityComponent = swordStack.getData(ItemComponentsKeys.DURABILITY);
        assertNotNull(durabilityComponent, "Sword should have durability component");
        assertEquals(250, durabilityComponent.getMaxDurability(), 
            "Sword should have 250 max durability");
    }
    
    @Test
    @DisplayName("Test sword has correct attack damage")
    public void testAttackDamage() {
        // Verify the sword uses the correct attack damage from component
        var meleeComponent = swordStack.getData(ItemComponentsKeys.MELEE_WEAPON);
        assertNotNull(meleeComponent, "Sword should have melee weapon component");
        assertEquals(3.0f, meleeComponent.getAttackDamageBonus(), 0.01f, 
            "Sword should have 3.0 attack damage bonus");
    }
    
    @Test
    @DisplayName("Test sword has correct attack speed")
    public void testAttackSpeed() {
        // Verify the sword uses the correct attack speed from component
        var meleeComponent = swordStack.getData(ItemComponentsKeys.MELEE_WEAPON);
        assertNotNull(meleeComponent, "Sword should have melee weapon component");
        assertEquals(-2.4f, meleeComponent.getAttackSpeed(), 0.01f, 
            "Sword should have -2.4 attack speed");
    }
    
    @Test
    @DisplayName("Test special effect when attacking")
    public void testSpecialAttackEffect() {
        // This test would require mocking entities and the attack context
        // In a real test implementation, you would:
        // 1. Create mock target entity
        // 2. Call sword.hurtEnemy() with appropriate parameters
        // 3. Verify the target gets the expected effect applied
        
        // For demonstration purposes:
        assertTrue(true, "Special attack effect test - actual implementation needed");
    }
    
    @Test
    @DisplayName("Test sword takes damage when used")
    public void testDamageWhenUsed() {
        // This test verifies that the sword takes damage when used
        // In a real test implementation with mocks:
        
        // For demonstration purposes:
        int initialDamage = 0;
        // Use the sword...
        int finalDamage = 0;
        
        // assertEquals(initialDamage + 1, finalDamage, "Sword should take 1 damage when used");
        assertTrue(true, "Damage when used test - actual implementation needed");
    }
}`:`package com.example.mod.block;

import static org.junit.jupiter.api.Assertions.*;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.DisplayName;

import net.minecraft.world.level.block.state.BlockState;
import net.minecraft.world.level.material.MapColor;
import net.minecraft.core.BlockPos;
import net.minecraft.world.level.Level;
import net.minecraft.world.entity.player.Player;
import net.minecraft.world.entity.LivingEntity;
import net.minecraft.server.level.ServerLevel;
import net.minecraft.world.level.block.state.properties.BlockStateProperties;
import net.minecraft.core.Direction;

import com.example.mod.init.ModBlocks;

/**
 * Test suite for CustomBlock class
 * Generated by Claude AI
 */
@DisplayName("CustomBlock Tests")
public class CustomBlockTest {
    private CustomBlock block;
    private BlockState blockState;
    private BlockPos pos;
    private ServerLevel mockLevel;
    private Player mockPlayer;
    
    @BeforeEach
    public void setup() {
        // Create a new CustomBlock instance for each test
        block = new CustomBlock();
        blockState = block.defaultBlockState();
        pos = new BlockPos(0, 0, 0);
        
        // Initialize mocks for testing
        // Note: In a real test, you would use a mocking framework like Mockito
        mockLevel = null; // Mock ServerLevel
        mockPlayer = null; // Mock Player
    }
    
    @Test
    @DisplayName("Test block has correct map color")
    public void testMapColor() {
        assertEquals(MapColor.STONE, blockState.getMapColor(mockLevel, pos),
            "Block should have stone map color");
    }
    
    @Test
    @DisplayName("Test block has correct strength")
    public void testStrength() {
        float destroySpeed = blockState.getDestroySpeed(mockLevel, pos);
        assertEquals(3.0f, destroySpeed, 0.01f, 
            "Block should have correct destroy speed/hardness");
    }
    
    @Test
    @DisplayName("Test block requires correct tool")
    public void testRequiresTool() {
        assertTrue(blockState.requiresCorrectToolForDrops(),
            "Block should require correct tool for drops");
    }
    
    @Test
    @DisplayName("Test block state properties")
    public void testBlockStateProperties() {
        // Check if the block has the expected properties
        assertTrue(blockState.hasProperty(BlockStateProperties.FACING),
            "Block should have FACING property");
            
        // Test that it can be set to different directions
        BlockState northState = blockState.setValue(BlockStateProperties.FACING, Direction.NORTH);
        assertEquals(Direction.NORTH, northState.getValue(BlockStateProperties.FACING),
            "Block should support NORTH direction");
    }
    
    @Test
    @DisplayName("Test block interaction behavior")
    public void testInteractionBehavior() {
        // This test would verify the custom behavior when a player interacts with the block
        // In a real test implementation with mocks:
        
        // For demonstration purposes:
        assertTrue(true, "Interaction test - actual implementation needed");
    }
    
    @Test
    @DisplayName("Test block drops")
    public void testBlockDrops() {
        // This test would verify the items dropped when the block is broken
        // Requires mocking of LootContext and other components
        
        // For demonstration purposes:
        assertTrue(true, "Block drops test - actual implementation needed");
    }
}`),c(!1);const Re={id:`test-${Date.now()}`,name:`${B} Tests`,type:"unit",status:"pending",filePath:`src/test/java/com/example/mod/${B.toLowerCase()}/${B}Test.java`},Ee={id:`suite-${Date.now()}`,name:`${B} Test Suite`,description:`Auto-generated tests for ${B}`,testCases:[Re],status:"pending"};i(it=>[...it,Ee]),e({title:"Tests Generated",description:`Test code has been generated for ${B}.`})},2500)},Z=()=>{u(!0),setTimeout(()=>{const ce=t.map(Re=>{if(Re.status==="pending"){const Ee=Math.random()>.3;return{...Re,status:Ee?"passed":"failed",lastRun:new Date().toISOString(),coverage:Math.floor(Math.random()*30)+70,testCases:Re.testCases.map(it=>{if(it.status==="pending"){const Ge=Ee||Math.random()>.3;return{...it,status:Ge?"passed":"failed",duration:Math.floor(Math.random()*200)+20,errorMessage:Ge?void 0:"java.lang.AssertionError: Test failed with random error"}}return it})}}return Re});if(i(ce),s){const Re=ce.find(Ee=>Ee.id===s.id);Re&&o(Re)}u(!1),e({title:"Tests Completed",description:"All tests have been executed."})},3e3)},V=ce=>{u(!0),setTimeout(()=>{const Re=t.map(Ee=>{if(Ee.id===ce.id){const it=Math.random()>.3;return{...Ee,status:it?"passed":"failed",lastRun:new Date().toISOString(),coverage:Math.floor(Math.random()*30)+70,testCases:Ee.testCases.map(Ge=>({...Ge,status:it||Math.random()>.3?"passed":"failed",duration:Math.floor(Math.random()*200)+20,errorMessage:Ge.status==="passed"?void 0:"java.lang.AssertionError: Test failed with random error"}))}}return Ee});if(i(Re),s&&s.id===ce.id){const Ee=Re.find(it=>it.id===ce.id);Ee&&o(Ee)}u(!1),e({title:"Suite Tests Completed",description:`Tests for "${ce.name}" have been executed.`})},2e3)},le=ce=>{switch(ce){case"passed":return g.jsx($ae,{className:"h-4 w-4 text-green-500"});case"failed":return g.jsx(Dg,{className:"h-4 w-4 text-red-500"});case"pending":return g.jsx(Ix,{className:"h-4 w-4 text-yellow-500"});case"skipped":return g.jsx(ySe,{className:"h-4 w-4 text-blue-500"});default:return g.jsx(Ix,{className:"h-4 w-4 text-gray-500"})}},Fe=ce=>{switch(ce){case"passed":return"bg-green-900/20 text-green-400 border-green-900/50";case"failed":return"bg-red-900/20 text-red-400 border-red-900/50";case"pending":return"bg-yellow-900/20 text-yellow-400 border-yellow-900/50";case"skipped":return"bg-blue-900/20 text-blue-400 border-blue-900/50";default:return"bg-gray-900/20 text-gray-400 border-gray-700"}},ke=ce=>ce?ce<1e3?`${ce}ms`:`${(ce/1e3).toFixed(2)}s`:"N/A",De=ce=>ce?new Date(ce).toLocaleString():"Never";return g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsxs("div",{className:"bg-gray-800/30 px-4 py-3 border-b border-gray-700 flex justify-between items-center",children:[g.jsx("h2",{className:"text-lg font-medium text-white",children:"Automated Testing"}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>E(!0),children:[g.jsx(XL,{className:"h-4 w-4 mr-1"}),"Generate Tests"]}),g.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>f(!0),children:[g.jsx(ty,{className:"h-4 w-4 mr-1"}),"New Test"]}),g.jsx(Se,{size:"sm",onClick:Z,disabled:d,children:d?g.jsxs(g.Fragment,{children:[g.jsx(Qi,{className:"h-4 w-4 mr-1 animate-spin"}),"Running..."]}):g.jsxs(g.Fragment,{children:[g.jsx(ey,{className:"h-4 w-4 mr-1"}),"Run All Tests"]})})]})]}),g.jsx("div",{className:"flex-grow flex overflow-hidden",children:g.jsxs(hf,{value:C,onValueChange:S,className:"flex flex-col h-full w-full",children:[g.jsx("div",{className:"bg-gray-800/30 px-4 pt-2",children:g.jsxs(ku,{className:"bg-gray-800/50",children:[g.jsx(Tn,{value:"suites",children:"Test Suites"}),g.jsx(Tn,{value:"history",children:"Test History"}),g.jsx(Tn,{value:"coverage",children:"Coverage"}),g.jsx(Tn,{value:"settings",children:"Settings"})]})}),g.jsxs(Rn,{value:"suites",className:"flex-grow flex overflow-hidden p-0",children:[g.jsx("div",{className:"w-1/3 border-r border-gray-700 overflow-auto",children:t.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[g.jsx(r9,{className:"h-10 w-10 text-gray-500 mb-2"}),g.jsx("p",{className:"text-gray-400 mb-4",children:"No test suites found"}),g.jsxs(Se,{size:"sm",onClick:()=>f(!0),children:[g.jsx(ty,{className:"h-4 w-4 mr-1"}),"Create First Test"]})]}):g.jsx("div",{className:"divide-y divide-gray-700",children:t.map(ce=>g.jsxs("div",{className:"flex flex-col",children:[g.jsxs("div",{className:`p-3 cursor-pointer transition-colors ${(s==null?void 0:s.id)===ce.id?"bg-blue-900/30":"hover:bg-gray-800/50"}`,onClick:()=>{M(ce),T(ce.id)},children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center",children:[x[ce.id]?g.jsx(XO,{className:"h-4 w-4 text-gray-400 mr-2"}):g.jsx(zae,{className:"h-4 w-4 text-gray-400 mr-2"}),g.jsxs("div",{className:"flex items-center",children:[le(ce.status),g.jsx("span",{className:"ml-2 text-white font-medium",children:ce.name})]})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${Fe(ce.status)}`,children:ce.status.charAt(0).toUpperCase()+ce.status.slice(1)}),g.jsx(Se,{variant:"ghost",size:"sm",className:"ml-1 h-6 w-6 p-0",onClick:Re=>{Re.stopPropagation(),V(ce)},disabled:d,children:d?g.jsx(Qi,{className:"h-3.5 w-3.5 animate-spin text-gray-400"}):g.jsx(ey,{className:"h-3.5 w-3.5 text-gray-400"})})]})]}),g.jsx("div",{className:"text-xs text-gray-400 mt-1 truncate",children:ce.description})]}),x[ce.id]&&g.jsx("div",{className:"pl-6 pb-2 bg-gray-900/30",children:ce.testCases.map(Re=>g.jsxs("div",{className:`flex items-center py-1.5 px-2 rounded mt-1 mx-2 cursor-pointer ${(r==null?void 0:r.id)===Re.id?"bg-blue-900/30":"hover:bg-gray-800/70"}`,onClick:()=>z(Re),children:[le(Re.status),g.jsx("span",{className:"ml-2 text-sm truncate",children:Re.name})]},Re.id))})]},ce.id))})}),g.jsx("div",{className:"w-2/3 overflow-auto p-4",children:r?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center",children:[le(r.status),g.jsx("h3",{className:"text-xl font-medium text-white ml-2",children:r.name})]}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:r.filePath})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${Fe(r.status)}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)}),r.duration&&g.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:[g.jsx(Ix,{className:"h-3.5 w-3.5 inline mr-1"}),ke(r.duration)]})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Test Type"}),g.jsx("p",{className:"text-white capitalize",children:r.type})]}),g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Status"}),g.jsxs("div",{className:"flex items-center",children:[le(r.status),g.jsx("span",{className:"ml-2 text-white capitalize",children:r.status})]})]})]}),r.errorMessage&&g.jsxs(Bt,{className:"p-4 bg-red-900/20 border-red-900/50",children:[g.jsx("h4",{className:"text-sm font-medium text-red-400 mb-2",children:"Error Message"}),g.jsx("div",{className:"bg-gray-900 rounded-md p-3 overflow-x-auto",children:g.jsx("pre",{className:"text-xs text-red-300 font-mono",children:r.errorMessage})})]}),g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsxs("div",{className:"flex justify-between items-center mb-3",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Test Code"}),g.jsxs(Se,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{e({title:"Opening file",description:`Opening ${r.filePath} in editor.`})},children:[g.jsx(f$,{className:"h-3.5 w-3.5 mr-1"}),"Open File"]})]}),g.jsx("div",{className:"bg-gray-900 rounded-md p-3 overflow-x-auto",children:g.jsx("pre",{className:"text-xs text-blue-300 font-mono",children:r.type==="unit"?`@Test
@DisplayName("${r.name}")
public void ${r.name.toLowerCase().replace(/\s+/g,"_")}() {
    // Arrange
    CustomBlock block = new CustomBlock();
    BlockState state = block.defaultBlockState();
    
    // Act
    boolean result = state.hasProperty(BlockStateProperties.FACING);
    
    // Assert
    assertTrue(result, "Block should have FACING property");
}`:`@Test
@DisplayName("${r.name}")
public void ${r.name.toLowerCase().replace(/\s+/g,"_")}() {
    // Arrange
    ServerLevel level = createTestLevel();
    BlockPos pos = new BlockPos(0, 0, 0);
    Player player = createTestPlayer(level);
    
    // Act
    level.setBlock(pos, ModBlocks.CUSTOM_BLOCK.get().defaultBlockState(), 3);
    
    // Interact with the block
    InteractionResult result = ModBlocks.CUSTOM_BLOCK.get().use(
        level.getBlockState(pos), level, pos, player, 
        InteractionHand.MAIN_HAND, BlockHitResult.miss(Vec3.ZERO, Direction.UP, pos)
    );
    
    // Assert
    assertEquals(InteractionResult.SUCCESS, result, "Block interaction should succeed");
}`})})]})]}):s?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center",children:[le(s.status),g.jsx("h3",{className:"text-xl font-medium text-white ml-2",children:s.name})]}),g.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s.description})]}),g.jsx("div",{children:g.jsx(Se,{onClick:()=>V(s),disabled:d,children:d?g.jsxs(g.Fragment,{children:[g.jsx(Qi,{className:"h-4 w-4 mr-1 animate-spin"}),"Running..."]}):g.jsxs(g.Fragment,{children:[g.jsx(ey,{className:"h-4 w-4 mr-1"}),"Run Suite"]})})})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Status"}),g.jsxs("div",{className:"flex items-center",children:[le(s.status),g.jsx("span",{className:`ml-2 text-white capitalize ${s.status==="failed"?"text-red-400":s.status==="passed"?"text-green-400":""}`,children:s.status})]})]}),g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Last Run"}),g.jsx("p",{className:"text-white",children:De(s.lastRun)})]}),g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Code Coverage"}),s.coverage?g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:`h-full ${s.coverage>=80?"bg-green-500":s.coverage>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${s.coverage}%`}})}),g.jsxs("span",{className:"text-white",children:[s.coverage,"%"]})]}):g.jsx("p",{className:"text-gray-400",children:"Not measured"})]})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Test Cases"}),g.jsx(Bt,{className:"bg-gray-800/30 border-gray-700 overflow-hidden",children:g.jsx("div",{className:"divide-y divide-gray-700",children:s.testCases.map(ce=>g.jsxs("div",{className:"p-3 cursor-pointer hover:bg-gray-800/70",onClick:()=>z(ce),children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center",children:[le(ce.status),g.jsx("span",{className:"ml-2 text-white",children:ce.name})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${Fe(ce.status)}`,children:ce.status.charAt(0).toUpperCase()+ce.status.slice(1)}),ce.duration&&g.jsx("span",{className:"ml-2 text-sm text-gray-400",children:ke(ce.duration)})]})]}),g.jsx("div",{className:"text-xs text-gray-400 mt-1",children:ce.filePath})]},ce.id))})})]})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[g.jsx(r9,{className:"h-12 w-12 text-gray-500 mb-3"}),g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:"No Test Selected"}),g.jsx("p",{className:"text-gray-400 max-w-md mb-4",children:"Select a test suite or test case from the list to view details, or create a new test."}),g.jsxs(Se,{onClick:()=>f(!0),children:[g.jsx(ty,{className:"h-4 w-4 mr-1"}),"Create New Test"]})]})})]}),g.jsx(Rn,{value:"history",className:"flex-grow p-4 overflow-auto",children:g.jsxs("div",{className:"mb-4",children:[g.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Test Run History"}),g.jsx(Bt,{className:"bg-gray-800/30 border-gray-700 overflow-hidden",children:g.jsxs("div",{className:"divide-y divide-gray-700",children:[g.jsxs("div",{className:"p-3 flex items-center justify-between bg-gray-800",children:[g.jsx("div",{className:"flex-1 font-medium text-gray-300",children:"Run Time"}),g.jsx("div",{className:"flex-1 font-medium text-gray-300",children:"Suite"}),g.jsx("div",{className:"flex-1 font-medium text-gray-300",children:"Status"}),g.jsx("div",{className:"flex-1 font-medium text-gray-300",children:"Duration"}),g.jsx("div",{className:"flex-1 font-medium text-gray-300",children:"Coverage"})]}),t.filter(ce=>ce.lastRun).sort((ce,Re)=>new Date(Re.lastRun).getTime()-new Date(ce.lastRun).getTime()).map(ce=>g.jsx("div",{className:"p-3 hover:bg-gray-800/50",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"flex-1 text-white",children:De(ce.lastRun)}),g.jsx("div",{className:"flex-1 text-white",children:ce.name}),g.jsx("div",{className:"flex-1",children:g.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${Fe(ce.status)}`,children:ce.status.charAt(0).toUpperCase()+ce.status.slice(1)})}),g.jsxs("div",{className:"flex-1 text-white",children:[ce.testCases.reduce((Re,Ee)=>Re+(Ee.duration||0),0),"ms"]}),g.jsx("div",{className:"flex-1 text-white",children:ce.coverage?`${ce.coverage}%`:"N/A"})]})},`${ce.id}-run`)),t.filter(ce=>ce.lastRun).length===0&&g.jsx("div",{className:"p-6 text-center text-gray-400",children:"No test runs recorded yet. Run your tests to see history."})]})})]})}),g.jsx(Rn,{value:"coverage",className:"flex-grow p-4 overflow-auto",children:g.jsxs("div",{className:"mb-4",children:[g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:"Code Coverage"}),g.jsx("p",{className:"text-gray-400 mb-4",children:"Coverage report for your mod's code"}),g.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Overall Coverage"}),g.jsxs("div",{className:"flex items-end",children:[g.jsx("span",{className:"text-3xl font-bold text-white",children:"78%"}),g.jsx("span",{className:"text-sm text-green-400 ml-2 mb-1",children:"+3%"})]})]}),g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Lines"}),g.jsxs("div",{className:"flex items-end",children:[g.jsx("span",{className:"text-3xl font-bold text-white",children:"82%"}),g.jsx("span",{className:"text-sm text-green-400 ml-2 mb-1",children:"+5%"})]})]}),g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Branches"}),g.jsxs("div",{className:"flex items-end",children:[g.jsx("span",{className:"text-3xl font-bold text-white",children:"65%"}),g.jsx("span",{className:"text-sm text-yellow-400 ml-2 mb-1",children:"+1%"})]})]}),g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Functions"}),g.jsxs("div",{className:"flex items-end",children:[g.jsx("span",{className:"text-3xl font-bold text-white",children:"74%"}),g.jsx("span",{className:"text-sm text-green-400 ml-2 mb-1",children:"+2%"})]})]})]}),g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Coverage by Package"}),g.jsx(Bt,{className:"bg-gray-800/30 border-gray-700 overflow-hidden",children:g.jsxs("div",{className:"divide-y divide-gray-700",children:[g.jsxs("div",{className:"p-3 flex items-center justify-between bg-gray-800",children:[g.jsx("div",{className:"flex-[2] font-medium text-gray-300",children:"Package"}),g.jsx("div",{className:"flex-1 font-medium text-gray-300",children:"Line %"}),g.jsx("div",{className:"flex-1 font-medium text-gray-300",children:"Branch %"}),g.jsx("div",{className:"flex-1 font-medium text-gray-300",children:"Function %"}),g.jsx("div",{className:"flex-1 font-medium text-gray-300",children:"Files"})]}),g.jsx("div",{className:"p-3 hover:bg-gray-800/50",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"flex-[2] text-white",children:"com.example.mod.block"}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:"h-full bg-green-500",style:{width:"92%"}})}),g.jsx("span",{className:"text-white",children:"92%"})]})}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:"h-full bg-yellow-500",style:{width:"76%"}})}),g.jsx("span",{className:"text-white",children:"76%"})]})}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:"h-full bg-green-500",style:{width:"85%"}})}),g.jsx("span",{className:"text-white",children:"85%"})]})}),g.jsx("div",{className:"flex-1 text-white",children:"5"})]})}),g.jsx("div",{className:"p-3 hover:bg-gray-800/50",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"flex-[2] text-white",children:"com.example.mod.item"}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:"h-full bg-green-500",style:{width:"88%"}})}),g.jsx("span",{className:"text-white",children:"88%"})]})}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:"h-full bg-yellow-500",style:{width:"71%"}})}),g.jsx("span",{className:"text-white",children:"71%"})]})}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:"h-full bg-green-500",style:{width:"80%"}})}),g.jsx("span",{className:"text-white",children:"80%"})]})}),g.jsx("div",{className:"flex-1 text-white",children:"4"})]})}),g.jsx("div",{className:"p-3 hover:bg-gray-800/50",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"flex-[2] text-white",children:"com.example.mod.entity"}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:"h-full bg-yellow-500",style:{width:"67%"}})}),g.jsx("span",{className:"text-white",children:"67%"})]})}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:"h-full bg-red-500",style:{width:"43%"}})}),g.jsx("span",{className:"text-white",children:"43%"})]})}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:"h-full bg-yellow-500",style:{width:"62%"}})}),g.jsx("span",{className:"text-white",children:"62%"})]})}),g.jsx("div",{className:"flex-1 text-white",children:"3"})]})}),g.jsx("div",{className:"p-3 hover:bg-gray-800/50",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"flex-[2] text-white",children:"com.example.mod.init"}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:"h-full bg-green-500",style:{width:"95%"}})}),g.jsx("span",{className:"text-white",children:"95%"})]})}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:"h-full bg-green-500",style:{width:"93%"}})}),g.jsx("span",{className:"text-white",children:"93%"})]})}),g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-2 w-24 bg-gray-700 rounded-full overflow-hidden mr-2",children:g.jsx("div",{className:"h-full bg-green-500",style:{width:"98%"}})}),g.jsx("span",{className:"text-white",children:"98%"})]})}),g.jsx("div",{className:"flex-1 text-white",children:"4"})]})})]})})]})}),g.jsx(Rn,{value:"settings",className:"flex-grow p-4 overflow-auto",children:g.jsxs("div",{className:"mb-4",children:[g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:"Test Settings"}),g.jsx("p",{className:"text-gray-400 mb-4",children:"Configure test execution and reporting"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Test Framework"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx(Xi,{htmlFor:"test-framework",className:"text-sm text-gray-400 mb-1 block",children:"Framework"}),g.jsxs(Nr,{defaultValue:"junit5",children:[g.jsx(Go,{className:"bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Select framework"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"junit5",children:"JUnit 5"}),g.jsx(Nt,{value:"junit4",children:"JUnit 4"}),g.jsx(Nt,{value:"testng",children:"TestNG"})]})]})]}),g.jsxs("div",{children:[g.jsx(Xi,{htmlFor:"test-method",className:"text-sm text-gray-400 mb-1 block",children:"Test Method"}),g.jsxs(Nr,{defaultValue:"integration",children:[g.jsx(Go,{className:"bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Select method"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"unit",children:"Unit Tests"}),g.jsx(Nt,{value:"integration",children:"Integration Tests"}),g.jsx(Nt,{value:"both",children:"Both"})]})]})]})]})]}),g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Coverage Settings"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx(Xi,{htmlFor:"coverage-tool",className:"text-sm text-gray-400 mb-1 block",children:"Coverage Tool"}),g.jsxs(Nr,{defaultValue:"jacoco",children:[g.jsx(Go,{className:"bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Select tool"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"jacoco",children:"JaCoCo"}),g.jsx(Nt,{value:"cobertura",children:"Cobertura"}),g.jsx(Nt,{value:"none",children:"None"})]})]})]}),g.jsxs("div",{children:[g.jsx(Xi,{htmlFor:"coverage-threshold",className:"text-sm text-gray-400 mb-1 block",children:"Minimum Coverage"}),g.jsxs(Nr,{defaultValue:"70",children:[g.jsx(Go,{className:"bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Select threshold"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"50",children:"50%"}),g.jsx(Nt,{value:"70",children:"70%"}),g.jsx(Nt,{value:"80",children:"80%"}),g.jsx(Nt,{value:"90",children:"90%"})]})]})]})]})]}),g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Build Integration"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx(Xi,{htmlFor:"build-integration",className:"text-sm text-gray-400 mb-1 block",children:"Run Tests on Build"}),g.jsxs(Nr,{defaultValue:"always",children:[g.jsx(Go,{className:"bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Select when"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"always",children:"Always"}),g.jsx(Nt,{value:"changes",children:"Only on Changes"}),g.jsx(Nt,{value:"never",children:"Never"})]})]})]}),g.jsxs("div",{children:[g.jsx(Xi,{htmlFor:"fail-build",className:"text-sm text-gray-400 mb-1 block",children:"Fail Build on Test Failure"}),g.jsxs(Nr,{defaultValue:"true",children:[g.jsx(Go,{className:"bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Select option"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"true",children:"Yes"}),g.jsx(Nt,{value:"false",children:"No"})]})]})]})]})]}),g.jsx("div",{className:"flex justify-end pt-2",children:g.jsxs(Se,{onClick:()=>{e({title:"Settings Saved",description:"Test settings have been updated."})},children:[g.jsx(p$,{className:"h-4 w-4 mr-1"}),"Save Settings"]})})]})]})})]})}),g.jsx(cf,{open:h,onOpenChange:f,children:g.jsxs(yu,{className:"bg-gray-900 border-gray-700 text-white",children:[g.jsxs(Cu,{children:[g.jsx(Su,{children:"Create New Test"}),g.jsx(xu,{className:"text-gray-400",children:"Add a new test suite or test case to your project."})]}),g.jsxs("div",{className:"space-y-4 pt-2",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"test-name",children:"Test Name"}),g.jsx(va,{id:"test-name",value:m,onChange:ce=>p(ce.target.value),placeholder:"E.g., CustomBlock Properties Test",className:"bg-gray-800 border-gray-700"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"test-type",children:"Test Type"}),g.jsxs(Nr,{value:b,onValueChange:v,children:[g.jsx(Go,{className:"bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Select test type"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"unit",children:"Unit Test"}),g.jsx(Nt,{value:"integration",children:"Integration Test"}),g.jsx(Nt,{value:"performance",children:"Performance Test"})]})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"test-description",children:"Description (Optional)"}),g.jsx(zv,{id:"test-description",value:w,onChange:ce=>y(ce.target.value),placeholder:"Describe what this test is checking...",className:"bg-gray-800 border-gray-700 min-h-[80px]"})]})]}),g.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[g.jsx(Se,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),g.jsx(Se,{onClick:ee,children:"Create Test"})]})]})}),g.jsx(cf,{open:N,onOpenChange:E,children:g.jsxs(yu,{className:"bg-gray-900 border-gray-700 text-white max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[g.jsxs(Cu,{children:[g.jsx(Su,{children:"Generate Tests with Claude AI"}),g.jsx(xu,{className:"text-gray-400",children:"Automatically generate test cases for your NeoForge 1.21.5 mod components."})]}),g.jsxs("div",{className:"flex flex-col flex-grow overflow-hidden",children:[g.jsxs("div",{className:"space-y-4 pt-2",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{htmlFor:"generate-target",children:"Class to Test"}),g.jsxs(Nr,{value:B,onValueChange:A,children:[g.jsx(Go,{className:"bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Select a class to test"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"CustomBlock",children:"CustomBlock"}),g.jsx(Nt,{value:"CustomBlockWithEntity",children:"CustomBlockWithEntity"}),g.jsx(Nt,{value:"CustomItem",children:"CustomItem"}),g.jsx(Nt,{value:"CustomSword",children:"CustomSword"}),g.jsx(Nt,{value:"CustomEntity",children:"CustomEntity"})]})]})]}),g.jsx("div",{className:"flex items-center justify-between",children:g.jsx(Se,{onClick:q,disabled:!B||l,className:"w-full",children:l?g.jsxs(g.Fragment,{children:[g.jsx(Qi,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating tests..."]}):g.jsxs(g.Fragment,{children:[g.jsx(hSe,{className:"h-4 w-4 mr-2"}),"Generate Tests"]})})})]}),g.jsx("div",{className:"flex-grow overflow-auto mt-4",children:O?g.jsxs("div",{className:"space-y-2",children:[g.jsx(Xi,{className:"text-sm text-gray-400",children:"Generated Test Code"}),g.jsx("div",{className:"bg-gray-800/50 rounded-md p-4 overflow-auto h-[400px]",children:g.jsx("pre",{className:"text-xs text-blue-300 font-mono",children:O})})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center h-[400px] bg-gray-800/20 rounded-md p-6 text-center border border-dashed border-gray-700",children:[g.jsx(XL,{className:"h-10 w-10 text-gray-500 mb-3"}),g.jsx("h3",{className:"text-white font-medium mb-2",children:"No Test Code Generated Yet"}),g.jsx("p",{className:"text-gray-400 max-w-md",children:'Select a class and click "Generate Tests" to create comprehensive unit tests for your NeoForge 1.21.5 mod components.'})]})})]}),g.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-700 mt-4",children:[g.jsx(Se,{variant:"outline",onClick:()=>E(!1),children:"Close"}),g.jsx(Se,{onClick:()=>{E(!1),e({title:"Test Code Applied",description:`Test code for ${B} has been saved.`})},disabled:!O,children:"Apply & Save"})]})]})})]})}function trt({open:n,onOpenChange:e,editor:t,file:i,projectId:s}){const{toast:o}=Aa(),[r,a]=L.useState("auto"),[l,c]=L.useState(!1),[d,u]=L.useState(null),[h,f]=L.useState(null),[m,p]=L.useState(!1),[b,v]=L.useState([]),[w,y]=L.useState("split"),C={auto:[{id:"inheritance-to-components",name:"SwordItem Inheritance to Components",description:"Replace SwordItem inheritance with NeoForge 1.21.5 component system",category:"modernization",difficulty:"moderate",codeSmell:"Inheritance incompatible with NeoForge 1.21.5",applicablePatterns:["Component Pattern","Composition over Inheritance"]},{id:"optimize-entity-registration",name:"Optimize Entity Registration",description:"Update entity registration to use NeoForge's component registry",category:"modernization",difficulty:"moderate",codeSmell:"Outdated entity registration pattern",applicablePatterns:["Registry Pattern","Builder Pattern"]},{id:"extract-item-properties",name:"Extract Item Properties",description:"Extract repeated item properties to a utility method",category:"clean-code",difficulty:"easy",codeSmell:"Duplicated code",applicablePatterns:["Extract Method","DRY Principle"]}],performance:[{id:"lazy-initialization",name:"Lazy Initialization",description:"Defer object creation until it's needed",category:"performance",difficulty:"easy",codeSmell:"Eager initialization",applicablePatterns:["Lazy Loading","Initialization on Demand"]},{id:"object-pooling",name:"Object Pooling",description:"Reuse frequently created objects instead of continuously creating new ones",category:"performance",difficulty:"complex",codeSmell:"Frequent object creation and disposal",applicablePatterns:["Object Pool","Resource Acquisition Is Initialization"]}],clean_code:[{id:"extract-method",name:"Extract Method",description:"Extract long methods into smaller, focused ones",category:"clean-code",difficulty:"easy",codeSmell:"Long method",applicablePatterns:["Extract Method","Single Responsibility Principle"]},{id:"replace-conditionals",name:"Replace Conditionals with Polymorphism",description:"Replace complex conditional logic with polymorphic objects",category:"clean-code",difficulty:"complex",codeSmell:"Complex conditional logic",applicablePatterns:["Strategy Pattern","State Pattern"]}],modernization:[{id:"deferred-to-component-registry",name:"DeferredRegister to ComponentRegistry",description:"Update from DeferredRegister to NeoForge 1.21.5 ComponentRegistry",category:"modernization",difficulty:"moderate",codeSmell:"Outdated registry pattern",applicablePatterns:["Registry Pattern","Factory Method"]},{id:"data-component-integration",name:"Integrate DataComponents",description:"Add DataComponent support to existing classes",category:"modernization",difficulty:"complex",codeSmell:"Lack of component-based architecture",applicablePatterns:["Component Pattern","Composition over Inheritance"]}]},S=()=>{if(!t||!i){o({title:"No File Selected",description:"Please open a file to analyze for refactoring.",variant:"destructive"});return}c(!0);const A=t.getValue();setTimeout(()=>{let O=[];(A.includes("extends SwordItem")||i.name.toLowerCase().includes("sword"))&&O.push(C.auto[0]),(A.includes("EntityType")||i.name.toLowerCase().includes("entity"))&&O.push(C.auto[1]),(A.match(/new Item\.Properties\(\)/g)||[]).length>1&&O.push(C.auto[2]),(A.includes("DeferredRegister")||i.name.toLowerCase().includes("registry"))&&O.push(C.modernization[0]),O.length===0&&(A.length>500&&O.push(C.clean_code[0]),O.push(C.performance[0])),v(r==="auto"?O:C[r]||[]),c(!1),O.length===0&&r==="auto"&&o({title:"No Refactoring Opportunities",description:"No clear refactoring opportunities were detected in this file."})},1500)},x=A=>{a(A),u(null),f(null),v(C[A]||[])},k=A=>{u(A),N(A)},N=A=>{if(!t)return;const O=t.getValue();let W={originalCode:"",refactoredCode:"",explanation:"",improvements:[]};A.id==="inheritance-to-components"?W={originalCode:`public class CustomSword extends SwordItem {
    public CustomSword() {
        super(Tiers.IRON, 3, -2.4F, new Item.Properties());
    }
    
    @Override
    public InteractionResultHolder<ItemStack> use(Level level, Player player, InteractionHand hand) {
        // Custom use behavior
        player.getCooldowns().addCooldown(this, 20);
        return InteractionResultHolder.success(player.getItemInHand(hand));
    }
}`,refactoredCode:`public class CustomSword extends Item {
    public CustomSword() {
        super(new Item.Properties());
    }
    
    // Factory method for registration with components
    public static CustomSword create() {
        return new CustomSword()
            // Add durability component
            .setData(ItemComponentsKeys.DURABILITY, 
                new Item.DurabilityComponent(Tiers.IRON.getUses()))
            // Add melee weapon component
            .setData(ItemComponentsKeys.MELEE_WEAPON, 
                new Item.MeleeWeaponComponent(3.0f, Tiers.IRON.getAttackDamageBonus() + 3, -2.4f));
    }
    
    @Override
    public InteractionResultHolder<ItemStack> use(Level level, Player player, InteractionHand hand) {
        // Custom use behavior
        player.getCooldowns().addCooldown(this, 20);
        return InteractionResultHolder.success(player.getItemInHand(hand));
    }
}

// Registration in registry class
public static void register(ComponentRegistry registry) {
    registry.register(registration -> {
        registration.register(ResourceKey.createRegistryKey(
            new ResourceLocation("minecraft", "item")),
            new ResourceLocation(MOD_ID, "custom_sword"),
            CustomSword::create);
    });
}`,explanation:"This refactoring converts a SwordItem subclass to use NeoForge 1.21.5's component system. Instead of inheriting from SwordItem, the class now extends the base Item class and uses two components: a DurabilityComponent for the item's durability and a MeleeWeaponComponent for attack damage and speed. A static factory method is added to create and configure the item during registration.",improvements:["Compatible with NeoForge 1.21.5's component system","More flexible - can add more components without changing inheritance","Decouples sword behavior from the item class","Makes registration cleaner and more explicit"],warnings:["Requires updating all registration code to use the component registry","May need to update code that checks for SwordItem instances"]}:A.id==="deferred-to-component-registry"?W={originalCode:`public class ModItems {
    public static final DeferredRegister<Item> ITEMS = DeferredRegister.create(ForgeRegistries.ITEMS, MOD_ID);
    
    public static final RegistryObject<Item> CUSTOM_ITEM = ITEMS.register("custom_item", 
        () -> new Item(new Item.Properties()));
        
    public static final RegistryObject<Item> CUSTOM_SWORD = ITEMS.register("custom_sword", 
        () -> new SwordItem(Tiers.IRON, 3, -2.4F, new Item.Properties()));
    
    public static void initialize(IEventBus eventBus) {
        ITEMS.register(eventBus);
    }
}`,refactoredCode:`public class ModItems {
    // Define resource key for items registry
    private static final ResourceKey<Registry<Item>> ITEMS = ResourceKey.createRegistryKey(
        new ResourceLocation("minecraft", "item"));
    
    // Registry references
    public static final DeferredHolder<Item, Item> CUSTOM_ITEM = DeferredHolder.create(ITEMS, 
        new ResourceLocation(MOD_ID, "custom_item"));
    public static final DeferredHolder<Item, SwordItem> CUSTOM_SWORD = DeferredHolder.create(ITEMS, 
        new ResourceLocation(MOD_ID, "custom_sword"));
    
    // Register items using component registry
    public static void register(ComponentRegistry registry) {
        registry.register(registration -> {
            // Register custom item
            registration.register(ITEMS, 
                new ResourceLocation(MOD_ID, "custom_item"),
                () -> new Item(new Item.Properties()));
                
            // Register custom sword with components
            registration.register(ITEMS, 
                new ResourceLocation(MOD_ID, "custom_sword"),
                () -> new Item(new Item.Properties())
                    .setData(ItemComponentsKeys.DURABILITY, 
                        new Item.DurabilityComponent(Tiers.IRON.getUses()))
                    .setData(ItemComponentsKeys.MELEE_WEAPON, 
                        new Item.MeleeWeaponComponent(3.0f, Tiers.IRON.getAttackDamageBonus() + 3, -2.4f)));
        });
    }
    
    // Initialize method for mod class
    public static void initialize() {
        // No event bus registration needed
    }
}`,explanation:"This refactoring updates item registration from the DeferredRegister system to NeoForge 1.21.5's ComponentRegistry. It replaces RegistryObject with DeferredHolder and restructures the registration process to use the component-based approach. The SwordItem has been converted to use components instead of inheritance.",improvements:["Updates to NeoForge 1.21.5's registry system","Implements component-based item configuration","Removes dependency on event bus registration","Makes references more type-safe with DeferredHolder"],warnings:["Requires changes to mod initialization code","References to items need to use get() method in the same way","SwordItem is no longer a separate class, just components on a basic Item"]}:A.id==="extract-method"?W={originalCode:`public BlockState getStateForPlacement(BlockPlaceContext context) {
    Level level = context.getLevel();
    BlockPos pos = context.getClickedPos();
    Direction facingDirection = context.getHorizontalDirection().getOpposite();
    
    // Check if the block can receive power
    boolean powered = level.hasNeighborSignal(pos);
    
    // Check if the block should be waterlogged
    boolean waterlogged = level.getFluidState(pos).getType() == Fluids.WATER;
    
    // Get the appropriate output direction based on facing
    Direction outputDirection;
    if (facingDirection == Direction.NORTH) {
        outputDirection = Direction.SOUTH;
    } else if (facingDirection == Direction.SOUTH) {
        outputDirection = Direction.NORTH;
    } else if (facingDirection == Direction.EAST) {
        outputDirection = Direction.WEST;
    } else {
        outputDirection = Direction.EAST;
    }
    
    // Apply block state properties
    return this.defaultBlockState()
        .setValue(FACING, facingDirection)
        .setValue(OUTPUT_DIRECTION, outputDirection)
        .setValue(POWERED, powered)
        .setValue(WATERLOGGED, waterlogged);
}`,refactoredCode:`public BlockState getStateForPlacement(BlockPlaceContext context) {
    Level level = context.getLevel();
    BlockPos pos = context.getClickedPos();
    Direction facingDirection = context.getHorizontalDirection().getOpposite();
    
    boolean powered = isPowered(level, pos);
    boolean waterlogged = isWaterlogged(level, pos);
    Direction outputDirection = getOutputDirection(facingDirection);
    
    // Apply block state properties
    return this.defaultBlockState()
        .setValue(FACING, facingDirection)
        .setValue(OUTPUT_DIRECTION, outputDirection)
        .setValue(POWERED, powered)
        .setValue(WATERLOGGED, waterlogged);
}

/**
 * Determines if the block position is receiving a redstone signal
 */
private boolean isPowered(Level level, BlockPos pos) {
    return level.hasNeighborSignal(pos);
}

/**
 * Determines if the block position should be waterlogged
 */
private boolean isWaterlogged(Level level, BlockPos pos) {
    return level.getFluidState(pos).getType() == Fluids.WATER;
}

/**
 * Calculates the output direction based on the facing direction
 */
private Direction getOutputDirection(Direction facingDirection) {
    return switch(facingDirection) {
        case NORTH -> Direction.SOUTH;
        case SOUTH -> Direction.NORTH;
        case EAST -> Direction.WEST;
        case WEST -> Direction.EAST;
        default -> Direction.NORTH; // Fallback for up/down
    };
}`,explanation:"This refactoring extracts three distinct pieces of logic into separate methods: checking for power, checking for waterlogging, and calculating the output direction. Each method has a single responsibility, making the code more modular and easier to understand. The main method now focuses on coordinating these operations rather than implementing all the details.",improvements:["Improves readability by giving meaningful names to operations","Follows the Single Responsibility Principle","Makes the code more maintainable and testable","Uses Java's switch expressions for cleaner direction mapping","Adds documentation to clarify the purpose of each method"]}:A.id==="lazy-initialization"?W={originalCode:`public class ResourceManager {
    private final Map<String, Texture> textureCache;
    private final Map<String, Model> modelCache;
    private final Map<String, Sound> soundCache;
    
    public ResourceManager() {
        // Initialize all caches even if they might not be used
        this.textureCache = loadAllTextures();
        this.modelCache = loadAllModels();
        this.soundCache = loadAllSounds();
        System.out.println("Initialized all resource caches");
    }
    
    private Map<String, Texture> loadAllTextures() {
        System.out.println("Loading textures...");
        // Expensive operation to load all textures
        Map<String, Texture> textures = new HashMap<>();
        // ... load many textures
        return textures;
    }
    
    private Map<String, Model> loadAllModels() {
        System.out.println("Loading models...");
        // Expensive operation to load all models
        Map<String, Model> models = new HashMap<>();
        // ... load many models
        return models;
    }
    
    private Map<String, Sound> loadAllSounds() {
        System.out.println("Loading sounds...");
        // Expensive operation to load all sounds
        Map<String, Sound> sounds = new HashMap<>();
        // ... load many sounds
        return sounds;
    }
    
    public Texture getTexture(String name) {
        return textureCache.get(name);
    }
    
    public Model getModel(String name) {
        return modelCache.get(name);
    }
    
    public Sound getSound(String name) {
        return soundCache.get(name);
    }
}`,refactoredCode:`public class ResourceManager {
    // Use atomics for thread-safe lazy initialization
    private final AtomicReference<Map<String, Texture>> textureCache = new AtomicReference<>();
    private final AtomicReference<Map<String, Model>> modelCache = new AtomicReference<>();
    private final AtomicReference<Map<String, Sound>> soundCache = new AtomicReference<>();
    
    // No expensive initialization in constructor
    public ResourceManager() {
        System.out.println("Resource manager created (caches not initialized)");
    }
    
    private Map<String, Texture> loadAllTextures() {
        System.out.println("Loading textures...");
        // Expensive operation to load all textures
        Map<String, Texture> textures = new HashMap<>();
        // ... load many textures
        return textures;
    }
    
    private Map<String, Model> loadAllModels() {
        System.out.println("Loading models...");
        // Expensive operation to load all models
        Map<String, Model> models = new HashMap<>();
        // ... load many models
        return models;
    }
    
    private Map<String, Sound> loadAllSounds() {
        System.out.println("Loading sounds...");
        // Expensive operation to load all sounds
        Map<String, Sound> sounds = new HashMap<>();
        // ... load many sounds
        return sounds;
    }
    
    public Texture getTexture(String name) {
        // Initialize texture cache if not already initialized
        if (textureCache.get() == null) {
            textureCache.compareAndSet(null, loadAllTextures());
        }
        return textureCache.get().get(name);
    }
    
    public Model getModel(String name) {
        // Initialize model cache if not already initialized
        if (modelCache.get() == null) {
            modelCache.compareAndSet(null, loadAllModels());
        }
        return modelCache.get().get(name);
    }
    
    public Sound getSound(String name) {
        // Initialize sound cache if not already initialized
        if (soundCache.get() == null) {
            soundCache.compareAndSet(null, loadAllSounds());
        }
        return soundCache.get().get(name);
    }
    
    // Optional: Method to pre-load all resources if needed
    public void preloadAllResources() {
        getTexture(""); // Trigger texture loading
        getModel("");   // Trigger model loading
        getSound("");   // Trigger sound loading
        System.out.println("All resource caches initialized");
    }
}`,explanation:"This refactoring implements lazy initialization for resource caches. Instead of loading all resources during construction, each cache is loaded only when it's first needed. This pattern is implemented using AtomicReference for thread safety, ensuring that each cache is initialized exactly once even in a multi-threaded environment.",improvements:["Reduces startup time by deferring expensive operations","Only loads resources that are actually used","Improves memory usage if some caches are never accessed","Maintains thread safety with atomic operations","Adds optional preloading method for cases where eagerness is desired"]}:W={originalCode:O.substring(0,Math.min(1e3,O.length)),refactoredCode:"// Refactored code would be generated here based on the selected option",explanation:"The selected refactoring would transform the code according to the principles of "+A.name+".",improvements:["Improved code organization and readability","Better compliance with modern NeoForge practices","Enhanced maintainability and extensibility","Potentially improved performance"]},f(W)},E=()=>{!t||!h||(p(!0),setTimeout(()=>{t.setValue(h.refactoredCode),p(!1),e(!1),o({title:"Refactoring Applied",description:"The code has been successfully refactored."})},1e3))},B=()=>{h&&navigator.clipboard.writeText(h.refactoredCode).then(()=>{o({title:"Copied to Clipboard",description:"The refactored code has been copied to your clipboard."})})};return g.jsx(cf,{open:n,onOpenChange:e,children:g.jsxs(yu,{className:"max-w-5xl bg-gray-900 border-gray-700 text-white",children:[g.jsxs(Cu,{children:[g.jsxs(Su,{className:"text-xl text-white flex items-center",children:[g.jsx(Kae,{className:"h-6 w-6 mr-2 text-purple-400"}),"Smart Refactoring Tools"]}),g.jsx(xu,{className:"text-gray-400",children:"Optimize your code with NeoForge 1.21.5 best practices using Claude-powered refactoring"})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[g.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"text-sm text-gray-400",children:"Refactoring Type"}),g.jsxs(Nr,{value:r,onValueChange:x,children:[g.jsx(Go,{className:"bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Select type"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"auto",children:"Auto-detect Issues"}),g.jsx(Nt,{value:"performance",children:"Performance Optimization"}),g.jsx(Nt,{value:"clean_code",children:"Clean Code Refactoring"}),g.jsx(Nt,{value:"modernization",children:"NeoForge Modernization"})]})]})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("label",{className:"text-sm text-gray-400",children:"Available Refactorings"}),g.jsxs(Se,{variant:"ghost",size:"sm",onClick:S,disabled:l,className:"h-7 px-2",children:[l?g.jsx(Qi,{className:"h-3.5 w-3.5 animate-spin mr-1"}):g.jsx(IR,{className:"h-3.5 w-3.5 mr-1"}),g.jsx("span",{className:"text-xs",children:"Analyze"})]})]}),g.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2",children:l?g.jsx("div",{className:"flex items-center justify-center h-32 bg-gray-800/50 rounded-md border border-gray-700",children:g.jsxs("div",{className:"text-center",children:[g.jsx(Qi,{className:"h-8 w-8 animate-spin text-purple-500 mx-auto mb-2"}),g.jsx("p",{className:"text-sm text-gray-400",children:"Analyzing code..."})]})}):b.length>0?b.map(A=>g.jsxs(Bt,{className:`p-3 cursor-pointer transition-colors border-gray-700 hover:bg-gray-800/50 ${(d==null?void 0:d.id)===A.id?"bg-purple-900/20 border-purple-900/50":"bg-gray-800/30"}`,onClick:()=>k(A),children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsx("h3",{className:"text-sm font-medium text-white",children:A.name}),g.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${A.difficulty==="easy"?"bg-green-900/20 text-green-400":A.difficulty==="moderate"?"bg-yellow-900/20 text-yellow-400":"bg-red-900/20 text-red-400"}`,children:A.difficulty})]}),g.jsx("p",{className:"text-xs text-gray-400",children:A.description})]},A.id)):g.jsx("div",{className:"flex items-center justify-center h-32 bg-gray-800/50 rounded-md border border-gray-700",children:g.jsxs("div",{className:"text-center px-4",children:[g.jsx(Rg,{className:"h-6 w-6 text-gray-500 mx-auto mb-2"}),g.jsx("p",{className:"text-sm text-gray-400",children:'No refactoring options available. Click "Analyze" to detect opportunities.'})]})})})]})]}),g.jsx("div",{className:"lg:col-span-2 border-t lg:border-t-0 lg:border-l border-gray-700 lg:pl-4 pt-4 lg:pt-0",children:d&&h?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:d.name}),g.jsx("p",{className:"text-sm text-gray-400",children:d.description})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Code Changes"}),g.jsxs("div",{className:"flex items-center",children:[g.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>y("split"),className:`h-7 px-2 ${w==="split"?"bg-gray-800":""}`,children:g.jsx("span",{className:"text-xs",children:"Split"})}),g.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>y("unified"),className:`h-7 px-2 ${w==="unified"?"bg-gray-800":""}`,children:g.jsx("span",{className:"text-xs",children:"Unified"})})]})]}),w==="split"?g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsxs("div",{children:[g.jsx("div",{className:"bg-gray-800 px-3 py-1.5 rounded-t-md text-xs text-gray-400 border-t border-l border-r border-gray-700",children:"Original Code"}),g.jsx("div",{className:"bg-gray-950 border border-gray-800 rounded-b-md p-3 overflow-x-auto max-h-[300px] overflow-y-auto",children:g.jsx("pre",{className:"text-xs text-red-300 font-mono whitespace-pre-wrap",children:h.originalCode})})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"bg-gray-800 px-3 py-1.5 rounded-t-md text-xs text-gray-400 border-t border-l border-r border-gray-700 flex items-center",children:[g.jsx(Lh,{className:"h-3.5 w-3.5 mr-1 text-purple-400"}),"Refactored Code"]}),g.jsx("div",{className:"bg-gray-950 border border-gray-800 rounded-b-md p-3 overflow-x-auto max-h-[300px] overflow-y-auto",children:g.jsx("pre",{className:"text-xs text-green-300 font-mono whitespace-pre-wrap",children:h.refactoredCode})})]})]}):g.jsxs(hf,{defaultValue:"before",className:"w-full",children:[g.jsxs(ku,{className:"bg-gray-800/50 grid w-full grid-cols-2",children:[g.jsx(Tn,{value:"before",children:"Original Code"}),g.jsx(Tn,{value:"after",children:"Refactored Code"})]}),g.jsx(Rn,{value:"before",children:g.jsx("div",{className:"bg-gray-950 border border-gray-800 rounded-md p-3 overflow-x-auto max-h-[300px] overflow-y-auto",children:g.jsx("pre",{className:"text-xs text-red-300 font-mono whitespace-pre-wrap",children:h.originalCode})})}),g.jsx(Rn,{value:"after",children:g.jsx("div",{className:"bg-gray-950 border border-gray-800 rounded-md p-3 overflow-x-auto max-h-[300px] overflow-y-auto",children:g.jsx("pre",{className:"text-xs text-green-300 font-mono whitespace-pre-wrap",children:h.refactoredCode})})})]})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Explanation"}),g.jsx("div",{className:"bg-gray-800/30 rounded-md p-3 text-sm text-gray-300",children:h.explanation})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Improvements"}),g.jsx("ul",{className:"space-y-1",children:h.improvements.map((A,O)=>g.jsxs("li",{className:"flex items-start",children:[g.jsx(Gae,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),g.jsx("span",{className:"text-sm text-gray-300",children:A})]},O))})]}),h.warnings&&h.warnings.length>0&&g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Considerations"}),g.jsx("ul",{className:"space-y-1",children:h.warnings.map((A,O)=>g.jsxs("li",{className:"flex items-start",children:[g.jsx(Dg,{className:"h-4 w-4 text-amber-500 mr-2 flex-shrink-0 mt-0.5"}),g.jsx("span",{className:"text-sm text-gray-300",children:A})]},O))})]})]}),g.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[g.jsxs(Se,{variant:"outline",onClick:B,children:[g.jsx(QL,{className:"h-4 w-4 mr-1"}),"Copy Code"]}),g.jsx(Se,{onClick:E,disabled:m,children:m?g.jsxs(g.Fragment,{children:[g.jsx(Qi,{className:"h-4 w-4 mr-1 animate-spin"}),"Applying..."]}):g.jsxs(g.Fragment,{children:[g.jsx(sSe,{className:"h-4 w-4 mr-1"}),"Apply Refactoring"]})})]})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-12 text-center",children:[g.jsx(uSe,{className:"h-12 w-12 text-gray-500 mb-3"}),g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:"Select a Refactoring"}),g.jsx("p",{className:"text-gray-400 max-w-md mb-4",children:'Choose a refactoring option from the left panel to preview the changes. Use the "Analyze" button to detect potential improvements automatically.'}),g.jsx(Se,{onClick:S,disabled:l,children:l?g.jsxs(g.Fragment,{children:[g.jsx(Qi,{className:"h-4 w-4 mr-1 animate-spin"}),"Analyzing..."]}):g.jsxs(g.Fragment,{children:[g.jsx(IR,{className:"h-4 w-4 mr-1"}),"Analyze Code"]})})]})})]})]})})}function irt({open:n,onOpenChange:e,file:t,projectId:i}){const{toast:s}=Aa(),[o,r]=L.useState([]),[a,l]=L.useState(null),[c,d]=L.useState(null),[u,h]=L.useState(""),[f,m]=L.useState("feedback"),[p,b]=L.useState(!1),[v,w]=L.useState(!1),[y,C]=L.useState(!1),[S,x]=L.useState("overview");L.useEffect(()=>{n&&t&&!y&&(b(!0),setTimeout(()=>{const M=[{id:"review-1",fileName:t.name,filePath:t.path,author:"devteam",created:new Date(Date.now()-1728e5).toISOString(),status:"open",comments:[{id:"comment-1",author:"devteam",content:"Started review of this file. Examining NeoForge compatibility.",created:new Date(Date.now()-1728e5).toISOString(),type:"feedback"},{id:"comment-2",author:"claude",content:"I've identified several areas where this code needs to be updated to be compatible with NeoForge 1.21.5's component system.",created:new Date(Date.now()-864e5).toISOString(),type:"feedback",isAi:!0}],score:68,metrics:{quality:72,bestPractices:65,performance:80,security:55},aiSuggestions:[{id:"suggestion-1",title:"Update SwordItem to use Component System",description:"Replace SwordItem inheritance with NeoForge 1.21.5's component system",originalCode:`public class CustomSword extends SwordItem {
    public CustomSword() {
        super(Tiers.IRON, 3, -2.4F, new Item.Properties());
    }
    
    @Override
    public InteractionResultHolder<ItemStack> use(Level level, Player player, InteractionHand hand) {
        player.getCooldowns().addCooldown(this, 20);
        return InteractionResultHolder.success(player.getItemInHand(hand));
    }
}`,suggestedCode:`public class CustomSword extends Item {
    public CustomSword() {
        super(new Item.Properties());
    }
    
    public static CustomSword create() {
        return new CustomSword()
            .setData(ItemComponentsKeys.DURABILITY, 
                new Item.DurabilityComponent(Tiers.IRON.getUses()))
            .setData(ItemComponentsKeys.MELEE_WEAPON, 
                new Item.MeleeWeaponComponent(3.0f, Tiers.IRON.getAttackDamageBonus() + 3, -2.4f));
    }
    
    @Override
    public InteractionResultHolder<ItemStack> use(Level level, Player player, InteractionHand hand) {
        player.getCooldowns().addCooldown(this, 20);
        return InteractionResultHolder.success(player.getItemInHand(hand));
    }
}`,reason:"NeoForge 1.21.5 has moved away from inheritance-based item types to a component-based system. The SwordItem class should not be extended directly. Instead, base Item class should be used with appropriate components attached.",category:"neoforgeUpdate",lineStart:1,lineEnd:9},{id:"suggestion-2",title:"Update Registration Code",description:"Update registration to use ComponentRegistry",originalCode:`public static final DeferredRegister<Item> ITEMS = DeferredRegister.create(ForgeRegistries.ITEMS, MODID);

public static final RegistryObject<Item> CUSTOM_SWORD = ITEMS.register("custom_sword", 
    () -> new CustomSword());

public static void initialize(IEventBus eventBus) {
    ITEMS.register(eventBus);
}`,suggestedCode:`// Define resource key for Items registry
private static final ResourceKey<Registry<Item>> ITEMS = ResourceKey.createRegistryKey(
    new ResourceLocation("minecraft", "item"));

// Reference holder for the item
public static final DeferredHolder<Item, Item> CUSTOM_SWORD = DeferredHolder.create(ITEMS, 
    new ResourceLocation(MODID, "custom_sword"));

// Registration method
public static void register(ComponentRegistry registry) {
    registry.register(registration -> {
        registration.register(ITEMS, 
            new ResourceLocation(MODID, "custom_sword"),
            CustomSword::create);
    });
}`,reason:"NeoForge 1.21.5 replaces the DeferredRegister system with ComponentRegistry. This change also involves using ResourceKey and DeferredHolder instead of RegistryObject.",category:"neoforgeUpdate",lineStart:1,lineEnd:7}]}];r(M),M.length>0&&l(M[0]),b(!1),C(!0)},1e3))},[n,t,y]);const k=()=>{t&&(w(!0),setTimeout(()=>{const M={id:`review-${Date.now()}`,fileName:t.name,filePath:t.path,author:"admin",created:new Date().toISOString(),status:"open",comments:[{id:`comment-${Date.now()}`,author:"admin",content:"Started new code review.",created:new Date().toISOString(),type:"feedback"}],score:0,metrics:{quality:0,bestPractices:0,performance:0,security:0},aiSuggestions:[]};r(z=>[M,...z]),l(M),setTimeout(()=>{const z={...M,comments:[...M.comments,{id:`comment-${Date.now()}`,author:"claude",content:"I've analyzed the code and found some areas for improvement related to NeoForge 1.21.5 compatibility.",created:new Date().toISOString(),type:"feedback",isAi:!0}],score:75,metrics:{quality:70,bestPractices:75,performance:85,security:70},aiSuggestions:[{id:`suggestion-${Date.now()}-1`,title:"Use Component Registry for Registration",description:"Update registration code to use the new ComponentRegistry system",originalCode:`// Assuming this is in your registration class
public static final DeferredRegister<Block> BLOCKS = DeferredRegister.create(ForgeRegistries.BLOCKS, MODID);

public static final RegistryObject<Block> EXAMPLE_BLOCK = BLOCKS.register("example_block",
    () -> new Block(BlockBehaviour.Properties.of().mapColor(MapColor.STONE)));`,suggestedCode:`// Updated registration for NeoForge 1.21.5
private static final ResourceKey<Registry<Block>> BLOCKS = ResourceKey.createRegistryKey(
    new ResourceLocation("minecraft", "block"));

// Reference holder for the block
public static final DeferredHolder<Block, Block> EXAMPLE_BLOCK = DeferredHolder.create(BLOCKS, 
    new ResourceLocation(MODID, "example_block"));

// Registration method
public static void register(ComponentRegistry registry) {
    registry.register(registration -> {
        registration.register(BLOCKS, 
            new ResourceLocation(MODID, "example_block"),
            () -> new Block(BlockBehaviour.Properties.of().mapColor(MapColor.STONE)));
    });
}`,reason:"NeoForge 1.21.5 has replaced the DeferredRegister system with ComponentRegistry for more flexibility and better integration with Minecraft's component system.",category:"neoforgeUpdate"},{id:`suggestion-${Date.now()}-2`,title:"Add Proper Exception Handling",description:"Improve error handling in file operations",originalCode:`public void loadConfig() {
    File configFile = new File(CONFIG_PATH);
    JsonObject config = JsonParser.parseReader(new FileReader(configFile)).getAsJsonObject();
    // Process config...
}`,suggestedCode:`public void loadConfig() {
    File configFile = new File(CONFIG_PATH);
    try (FileReader reader = new FileReader(configFile)) {
        JsonObject config = JsonParser.parseReader(reader).getAsJsonObject();
        // Process config...
    } catch (FileNotFoundException e) {
        LOGGER.error("Config file not found: {}", CONFIG_PATH, e);
        // Create default config or handle gracefully
    } catch (JsonParseException e) {
        LOGGER.error("Invalid config format: {}", CONFIG_PATH, e);
        // Handle invalid config
    } catch (IOException e) {
        LOGGER.error("Error reading config: {}", CONFIG_PATH, e);
    }
}`,reason:"The original code lacks proper exception handling for file operations, which could lead to crashes if the file is missing or improperly formatted.",category:"bestPractice"}]};r(ee=>ee.map(q=>q.id===M.id?z:q)),l(z),w(!1)},3e3)},1e3))},N=()=>{if(!a||!u.trim())return;const M={id:`comment-${Date.now()}`,author:"admin",content:u,created:new Date().toISOString(),type:f},z={...a,comments:[...a.comments,M]};r(ee=>ee.map(q=>q.id===a.id?z:q)),l(z),h(""),s({title:"Comment Added",description:"Your comment has been added to the review."})},E=M=>{var z;if(t){if(s({title:"Suggestion Applied",description:`The suggestion "${M.title}" has been applied to your code.`}),a){const ee=(z=a.aiSuggestions)==null?void 0:z.map(Z=>Z.id===M.id?{...Z,applied:!0}:Z),q={...a,aiSuggestions:ee,comments:[...a.comments,{id:`comment-${Date.now()}`,author:"admin",content:`Applied suggestion: ${M.title}`,created:new Date().toISOString(),type:"feedback"}]};r(Z=>Z.map(V=>V.id===a.id?q:V)),l(q)}e(!1)}},B=M=>{navigator.clipboard.writeText(M).then(()=>{s({title:"Copied to Clipboard",description:"The code suggestion has been copied to your clipboard."})})},A=()=>{if(!a)return;const M={...a,status:"resolved",comments:[...a.comments,{id:`comment-${Date.now()}`,author:"admin",content:"Review completed and marked as resolved.",created:new Date().toISOString(),type:"feedback"}]};r(z=>z.map(ee=>ee.id===a.id?M:ee)),l(M),s({title:"Review Resolved",description:"The code review has been marked as resolved."})},O=M=>new Date(M).toLocaleString(),W=(M,z=!1)=>{if(z)return g.jsx(Lh,{className:"h-4 w-4 text-purple-400"});switch(M){case"feedback":return g.jsx(dT,{className:"h-4 w-4 text-blue-400"});case"suggestion":return g.jsx(Gae,{className:"h-4 w-4 text-green-400"});case"issue":return g.jsx(Dg,{className:"h-4 w-4 text-red-400"});case"question":return g.jsx(W_,{className:"h-4 w-4 text-amber-400"});default:return g.jsx(dT,{className:"h-4 w-4 text-gray-400"})}},T=M=>{switch(M){case"performance":return g.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-yellow-900/20 text-yellow-400 border border-yellow-900/50",children:"Performance"});case"style":return g.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-purple-900/20 text-purple-400 border border-purple-900/50",children:"Style"});case"bestPractice":return g.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-900/20 text-blue-400 border border-blue-900/50",children:"Best Practice"});case"security":return g.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-red-900/20 text-red-400 border border-red-900/50",children:"Security"});case"neoforgeUpdate":return g.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-900/20 text-green-400 border border-green-900/50",children:"NeoForge 1.21.5"});default:return g.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-800 text-gray-400",children:"Other"})}};return g.jsx(cf,{open:n,onOpenChange:e,children:g.jsxs(yu,{className:"max-w-5xl bg-gray-900 border-gray-700 text-white max-h-[80vh] overflow-hidden flex flex-col",children:[g.jsxs(Cu,{children:[g.jsxs(Su,{className:"text-xl text-white flex items-center",children:[g.jsx(Tg,{className:"h-6 w-6 mr-2 text-red-400"}),"Collaborative Code Review"]}),g.jsx(xu,{className:"text-gray-400",children:"Review and improve your code with Claude AI-powered suggestions and team feedback"})]}),g.jsx("div",{className:"flex-grow overflow-hidden flex flex-col",children:p?g.jsx("div",{className:"flex-grow flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx(Qi,{className:"h-8 w-8 animate-spin text-blue-500 mx-auto mb-2"}),g.jsx("p",{className:"text-gray-400",children:"Loading reviews..."})]})}):t?g.jsxs("div",{className:"flex-grow flex",children:[g.jsxs("div",{className:"w-1/3 border-r border-gray-700 overflow-auto pr-2",children:[g.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-400",children:"Code Reviews"}),g.jsxs(Se,{variant:"ghost",size:"sm",onClick:k,disabled:v,className:"h-7 px-2",children:[v?g.jsx(Qi,{className:"h-3.5 w-3.5 animate-spin mr-1"}):g.jsx(ty,{className:"h-3.5 w-3.5 mr-1"}),g.jsx("span",{className:"text-xs",children:"New Review"})]})]}),o.length>0?g.jsx("div",{className:"space-y-2",children:o.map(M=>g.jsxs(Bt,{className:`p-3 cursor-pointer transition-colors border-gray-700 ${(a==null?void 0:a.id)===M.id?"bg-red-900/20 border-red-900/50":"bg-gray-800/30 hover:bg-gray-800/50"}`,onClick:()=>l(M),children:[g.jsxs("div",{className:"flex justify-between items-start mb-1",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx(Ex,{className:"h-4 w-4 text-blue-400 mr-1.5"}),g.jsx("h4",{className:"font-medium text-white truncate",children:M.fileName})]}),M.status==="open"?g.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-blue-900/20 text-blue-400",children:"Open"}):M.status==="resolved"?g.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-green-900/20 text-green-400",children:"Resolved"}):g.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-red-900/20 text-red-400",children:"Rejected"})]}),g.jsxs("div",{className:"flex items-center text-xs text-gray-400 mb-2",children:[g.jsx(SSe,{className:"h-3 w-3 mr-1"}),g.jsx("span",{children:M.author}),g.jsx("span",{className:"mx-1",children:"•"}),g.jsx(Ix,{className:"h-3 w-3 mr-1"}),g.jsx("span",{children:new Date(M.created).toLocaleDateString()})]}),M.score!==void 0&&g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("span",{className:"text-xs text-gray-400",children:"Quality Score:"}),g.jsxs("span",{className:`text-xs font-medium ${M.score>=80?"text-green-400":M.score>=60?"text-yellow-400":"text-red-400"}`,children:[M.score,"/100"]})]}),g.jsx("div",{className:"h-1.5 w-full bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full ${M.score>=80?"bg-green-500":M.score>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${M.score}%`}})})]})]},M.id))}):g.jsxs("div",{className:"flex flex-col items-center justify-center h-32 bg-gray-800/30 rounded-md border border-gray-700 text-center p-4",children:[g.jsx(Tg,{className:"h-6 w-6 text-gray-500 mb-2"}),g.jsx("p",{className:"text-sm text-gray-400",children:"No reviews yet"}),g.jsxs(Se,{variant:"outline",size:"sm",onClick:k,disabled:v,className:"mt-2",children:[v?g.jsx(Qi,{className:"h-4 w-4 animate-spin mr-1"}):g.jsx(ty,{className:"h-4 w-4 mr-1"}),"Start Review"]})]})]}),g.jsx("div",{className:"w-2/3 overflow-auto pl-4",children:a?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium text-white",children:a.fileName}),g.jsx("p",{className:"text-sm text-gray-400",children:a.filePath})]}),a.status==="open"&&g.jsxs(Se,{onClick:A,size:"sm",children:[g.jsx($ae,{className:"h-4 w-4 mr-1"}),"Resolve Review"]})]}),g.jsxs(hf,{value:S,onValueChange:x,className:"w-full",children:[g.jsxs(ku,{className:"bg-gray-800/50 w-full",children:[g.jsx(Tn,{value:"overview",children:"Overview"}),g.jsxs(Tn,{value:"suggestions",children:["AI Suggestions",a.aiSuggestions&&a.aiSuggestions.length>0&&g.jsx("span",{className:"ml-1.5 bg-blue-900/60 text-blue-300 rounded-full px-1.5 py-0.5 text-[10px]",children:a.aiSuggestions.length})]}),g.jsxs(Tn,{value:"comments",children:["Comments",g.jsx("span",{className:"ml-1.5 bg-gray-800 text-gray-300 rounded-full px-1.5 py-0.5 text-[10px]",children:a.comments.length})]})]}),g.jsxs(Rn,{value:"overview",className:"pt-4",children:[a.metrics&&g.jsxs("div",{className:"mb-6",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Code Quality Metrics"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs(Bt,{className:"p-3 bg-gray-800/30 border-gray-700",children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("span",{className:"text-sm text-gray-400",children:"Overall Quality"}),g.jsxs("span",{className:`text-sm font-medium ${a.score>=80?"text-green-400":a.score>=60?"text-yellow-400":"text-red-400"}`,children:[a.score,"/100"]})]}),g.jsx("div",{className:"h-2 w-full bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full ${a.score>=80?"bg-green-500":a.score>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${a.score}%`}})})]}),g.jsxs(Bt,{className:"p-3 bg-gray-800/30 border-gray-700",children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("span",{className:"text-sm text-gray-400",children:"NeoForge Best Practices"}),g.jsxs("span",{className:`text-sm font-medium ${a.metrics.bestPractices>=80?"text-green-400":a.metrics.bestPractices>=60?"text-yellow-400":"text-red-400"}`,children:[a.metrics.bestPractices,"/100"]})]}),g.jsx("div",{className:"h-2 w-full bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full ${a.metrics.bestPractices>=80?"bg-green-500":a.metrics.bestPractices>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${a.metrics.bestPractices}%`}})})]}),g.jsxs(Bt,{className:"p-3 bg-gray-800/30 border-gray-700",children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("span",{className:"text-sm text-gray-400",children:"Performance"}),g.jsxs("span",{className:`text-sm font-medium ${a.metrics.performance>=80?"text-green-400":a.metrics.performance>=60?"text-yellow-400":"text-red-400"}`,children:[a.metrics.performance,"/100"]})]}),g.jsx("div",{className:"h-2 w-full bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full ${a.metrics.performance>=80?"bg-green-500":a.metrics.performance>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${a.metrics.performance}%`}})})]}),g.jsxs(Bt,{className:"p-3 bg-gray-800/30 border-gray-700",children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("span",{className:"text-sm text-gray-400",children:"Security"}),g.jsxs("span",{className:`text-sm font-medium ${a.metrics.security>=80?"text-green-400":a.metrics.security>=60?"text-yellow-400":"text-red-400"}`,children:[a.metrics.security,"/100"]})]}),g.jsx("div",{className:"h-2 w-full bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full ${a.metrics.security>=80?"bg-green-500":a.metrics.security>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${a.metrics.security}%`}})})]})]})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Recent Activity"}),g.jsxs("div",{className:"space-y-3",children:[[...a.comments].reverse().slice(0,3).map(M=>g.jsxs("div",{className:"bg-gray-800/30 rounded-md p-3 border border-gray-700",children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsxs("div",{className:"flex items-center",children:[W(M.type,M.isAi),g.jsx("span",{className:`text-sm font-medium ml-1.5 ${M.isAi?"text-purple-400":"text-white"}`,children:M.isAi?"Claude AI":M.author})]}),g.jsx("span",{className:"text-xs text-gray-500",children:O(M.created)})]}),g.jsx("p",{className:"text-sm text-gray-300 mt-1",children:M.content})]},M.id)),a.comments.length>3&&g.jsxs(Se,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>x("comments"),children:["View All Comments (",a.comments.length,")"]})]})]}),a.aiSuggestions&&a.aiSuggestions.length>0&&g.jsxs("div",{className:"mt-4",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"AI Suggestions"}),g.jsxs("div",{className:"space-y-3",children:[a.aiSuggestions.slice(0,2).map(M=>g.jsx(Bt,{className:"p-3 bg-gray-800/30 border-gray-700 cursor-pointer hover:bg-gray-800/50",onClick:()=>{d(M),x("suggestions")},children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{className:"flex items-start",children:[g.jsx(Lh,{className:"h-4 w-4 text-purple-400 mt-0.5 mr-2 flex-shrink-0"}),g.jsxs("div",{children:[g.jsx("h5",{className:"font-medium text-white",children:M.title}),g.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:M.description})]})]}),g.jsx("div",{children:T(M.category)})]})},M.id)),a.aiSuggestions.length>2&&g.jsxs(Se,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>x("suggestions"),children:["View All Suggestions (",a.aiSuggestions.length,")"]})]})]})]}),g.jsx(Rn,{value:"suggestions",className:"pt-4",children:a.aiSuggestions&&a.aiSuggestions.length>0?g.jsx("div",{className:"space-y-4",children:c?g.jsxs("div",{className:"bg-gray-800/30 rounded-md p-4 border border-gray-700",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx(Lh,{className:"h-4 w-4 text-purple-400 mr-2"}),g.jsx("h4",{className:"font-medium text-white",children:c.title})]}),g.jsx("p",{className:"text-sm text-gray-400 mt-1 ml-6",children:c.description})]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>d(null),className:"h-7 px-2",children:[g.jsx(rSe,{className:"h-3.5 w-3.5 mr-1"}),g.jsx("span",{className:"text-xs",children:"Close"})]}),g.jsxs(Se,{size:"sm",onClick:()=>E(c),className:"h-7 px-2",children:[g.jsx(zn,{className:"h-3.5 w-3.5 mr-1"}),g.jsx("span",{className:"text-xs",children:"Apply"})]})]})]}),g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("h5",{className:"text-sm font-medium text-gray-300",children:"Original Code"}),g.jsxs(Se,{variant:"ghost",size:"sm",onClick:()=>B(c.originalCode),className:"h-6 px-2",children:[g.jsx(QL,{className:"h-3 w-3 mr-1"}),g.jsx("span",{className:"text-[10px]",children:"Copy"})]})]}),g.jsx("div",{className:"bg-gray-900 rounded-md p-3 overflow-x-auto mb-4",children:g.jsx("pre",{className:"text-xs text-red-300 font-mono whitespace-pre-wrap",children:c.originalCode})}),g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("h5",{className:"text-sm font-medium text-gray-300",children:"Suggested Code"}),g.jsxs(Se,{variant:"ghost",size:"sm",onClick:()=>B(c.suggestedCode),className:"h-6 px-2",children:[g.jsx(QL,{className:"h-3 w-3 mr-1"}),g.jsx("span",{className:"text-[10px]",children:"Copy"})]})]}),g.jsx("div",{className:"bg-gray-900 rounded-md p-3 overflow-x-auto mb-4",children:g.jsx("pre",{className:"text-xs text-green-300 font-mono whitespace-pre-wrap",children:c.suggestedCode})}),g.jsxs("div",{className:"bg-purple-900/10 rounded-md p-3 border border-purple-900/30",children:[g.jsx("h5",{className:"text-sm font-medium text-purple-400 mb-1",children:"Explanation"}),g.jsx("p",{className:"text-sm text-gray-300",children:c.reason})]}),g.jsx("div",{className:"flex justify-end mt-4",children:g.jsxs(Se,{onClick:()=>E(c),children:[g.jsx(zn,{className:"h-4 w-4 mr-1"}),"Apply This Suggestion"]})})]}):g.jsx("div",{className:"space-y-3",children:a.aiSuggestions.map(M=>g.jsx(Bt,{className:"p-3 bg-gray-800/30 border-gray-700 hover:bg-gray-800/50 cursor-pointer",onClick:()=>d(M),children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{className:"flex items-start",children:[g.jsx(Lh,{className:"h-4 w-4 text-purple-400 mt-0.5 mr-2 flex-shrink-0"}),g.jsxs("div",{children:[g.jsx("h5",{className:"font-medium text-white",children:M.title}),g.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:M.description}),g.jsx("div",{className:"mt-2",children:T(M.category)})]})]}),g.jsxs(Se,{variant:"ghost",size:"sm",onClick:z=>{z.stopPropagation(),E(M)},className:"h-7",children:[g.jsx(zn,{className:"h-4 w-4 mr-1"}),"Apply"]})]})},M.id))})}):g.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-center",children:[g.jsx(Lh,{className:"h-8 w-8 text-gray-500 mb-2"}),g.jsx("h4",{className:"text-white font-medium mb-1",children:"No AI Suggestions"}),g.jsx("p",{className:"text-gray-400 max-w-md",children:"Claude hasn't generated any code suggestions for this file yet."}),g.jsxs(Se,{variant:"outline",size:"sm",className:"mt-3",onClick:()=>{w(!0),setTimeout(()=>{if(a){const M={id:`suggestion-${Date.now()}`,title:"Optimize Resource Loading",description:"Improve performance by using lazy initialization for resources",originalCode:`private void loadResources() {
    this.textures = loadAllTextures();
    this.models = loadAllModels();
    this.sounds = loadAllSounds();
}`,suggestedCode:`private Map<String, Texture> textures;
private Map<String, Model> models;
private Map<String, Sound> sounds;

private Map<String, Texture> getTextures() {
    if (textures == null) {
        textures = loadAllTextures();
    }
    return textures;
}

private Map<String, Model> getModels() {
    if (models == null) {
        models = loadAllModels();
    }
    return models;
}

private Map<String, Sound> getSounds() {
    if (sounds == null) {
        sounds = loadAllSounds();
    }
    return sounds;
}`,reason:"The original code eagerly loads all resources, which can cause unnecessary memory usage and startup delay. This optimization uses lazy initialization to load resources only when they're actually needed.",category:"performance"},z={...a,aiSuggestions:[...a.aiSuggestions||[],M],comments:[...a.comments,{id:`comment-${Date.now()}`,author:"claude",content:"I've analyzed the code and generated a new optimization suggestion for resource loading.",created:new Date().toISOString(),type:"feedback",isAi:!0}]};r(ee=>ee.map(q=>q.id===a.id?z:q)),l(z),d(M)}w(!1)},2e3)},children:[v?g.jsx(Qi,{className:"h-4 w-4 animate-spin mr-1"}):g.jsx(fC,{className:"h-4 w-4 mr-1"}),"Generate Suggestions"]})]})}),g.jsx(Rn,{value:"comments",className:"pt-4",children:g.jsxs("div",{className:"space-y-4",children:[g.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2",children:a.comments.length>0?a.comments.map(M=>g.jsxs("div",{className:`p-3 rounded-md border ${M.isAi?"bg-purple-900/10 border-purple-900/30":"bg-gray-800/30 border-gray-700"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsxs("div",{className:"flex items-center",children:[W(M.type,M.isAi),g.jsx("span",{className:`text-sm font-medium ml-1.5 ${M.isAi?"text-purple-400":"text-white"}`,children:M.isAi?"Claude AI":M.author})]}),g.jsx("span",{className:"text-xs text-gray-500",children:O(M.created)})]}),g.jsx("p",{className:"text-sm text-gray-300 mt-1",children:M.content})]},M.id)):g.jsx("div",{className:"text-center text-gray-400 py-4",children:"No comments yet"})}),a.status==="open"&&g.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[g.jsx(Xi,{htmlFor:"comment-type",className:"text-sm text-gray-400 mb-1.5 block",children:"Comment Type"}),g.jsxs(Nr,{value:f,onValueChange:m,className:"mb-3",children:[g.jsx(Go,{className:"bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Select comment type"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"feedback",children:"General Feedback"}),g.jsx(Nt,{value:"suggestion",children:"Improvement Suggestion"}),g.jsx(Nt,{value:"issue",children:"Issue Report"}),g.jsx(Nt,{value:"question",children:"Question"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(zv,{placeholder:"Add your comment...",value:u,onChange:M=>h(M.target.value),className:"min-h-[100px] bg-gray-800 border-gray-700"}),g.jsx("div",{className:"flex justify-end",children:g.jsxs(Se,{onClick:N,disabled:!u.trim(),children:[g.jsx(dT,{className:"h-4 w-4 mr-1"}),"Add Comment"]})})]})]})]})})]})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:[g.jsx(Tg,{className:"h-10 w-10 text-gray-500 mb-3"}),g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:"No Review Selected"}),g.jsx("p",{className:"text-gray-400 max-w-md mb-4",children:"Select a review from the list or create a new code review to get started."}),g.jsxs(Se,{onClick:k,disabled:v,children:[v?g.jsx(Qi,{className:"h-4 w-4 animate-spin mr-1"}):g.jsx(ty,{className:"h-4 w-4 mr-1"}),"Start New Review"]})]})})]}):g.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-center p-6",children:[g.jsx(Rg,{className:"h-10 w-10 text-amber-500 mb-3"}),g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:"No File Selected"}),g.jsx("p",{className:"text-gray-400 max-w-md",children:"Please open a file to review. Code reviews are associated with specific files in your project."})]})})]})})}var dwe=["PageUp","PageDown"],uwe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],hwe={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Y1="Slider",[uU,nrt,srt]=cI(Y1),[fwe,vdt]=sc(Y1,[srt]),[ort,a5]=fwe(Y1),gwe=L.forwardRef((n,e)=>{const{name:t,min:i=0,max:s=100,step:o=1,orientation:r="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:d,onValueChange:u=()=>{},onValueCommit:h=()=>{},inverted:f=!1,form:m,...p}=n,b=L.useRef(new Set),v=L.useRef(0),y=r==="horizontal"?rrt:art,[C=[],S]=af({prop:d,defaultProp:c,onChange:A=>{var W;(W=[...b.current][v.current])==null||W.focus(),u(A)}}),x=L.useRef(C);function k(A){const O=hrt(C,A);B(A,O)}function N(A){B(A,v.current)}function E(){const A=x.current[v.current];C[v.current]!==A&&h(C)}function B(A,O,{commit:W}={commit:!1}){const T=prt(o),M=_rt(Math.round((A-i)/o)*o+i,T),z=JN(M,[i,s]);S((ee=[])=>{const q=drt(ee,z,O);if(mrt(q,l*o)){v.current=q.indexOf(z);const Z=String(q)!==String(ee);return Z&&W&&h(q),Z?q:ee}else return ee})}return g.jsx(ort,{scope:n.__scopeSlider,name:t,disabled:a,min:i,max:s,valueIndexToChangeRef:v,thumbs:b.current,values:C,orientation:r,form:m,children:g.jsx(uU.Provider,{scope:n.__scopeSlider,children:g.jsx(uU.Slot,{scope:n.__scopeSlider,children:g.jsx(y,{"aria-disabled":a,"data-disabled":a?"":void 0,...p,ref:e,onPointerDown:$e(p.onPointerDown,()=>{a||(x.current=C)}),min:i,max:s,inverted:f,onSlideStart:a?void 0:k,onSlideMove:a?void 0:N,onSlideEnd:a?void 0:E,onHomeKeyDown:()=>!a&&B(i,0,{commit:!0}),onEndKeyDown:()=>!a&&B(s,C.length-1,{commit:!0}),onStepKeyDown:({event:A,direction:O})=>{if(!a){const M=dwe.includes(A.key)||A.shiftKey&&uwe.includes(A.key)?10:1,z=v.current,ee=C[z],q=o*M*O;B(ee+q,z,{commit:!0})}}})})})})});gwe.displayName=Y1;var[mwe,pwe]=fwe(Y1,{startEdge:"left",endEdge:"right",size:"width",direction:1}),rrt=L.forwardRef((n,e)=>{const{min:t,max:i,dir:s,inverted:o,onSlideStart:r,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...d}=n,[u,h]=L.useState(null),f=oi(e,y=>h(y)),m=L.useRef(void 0),p=_1(s),b=p==="ltr",v=b&&!o||!b&&o;function w(y){const C=m.current||u.getBoundingClientRect(),S=[0,C.width],k=ZZ(S,v?[t,i]:[i,t]);return m.current=C,k(y-C.left)}return g.jsx(mwe,{scope:n.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:g.jsx(_we,{dir:p,"data-orientation":"horizontal",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:y=>{const C=w(y.clientX);r==null||r(C)},onSlideMove:y=>{const C=w(y.clientX);a==null||a(C)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:y=>{const S=hwe[v?"from-left":"from-right"].includes(y.key);c==null||c({event:y,direction:S?-1:1})}})})}),art=L.forwardRef((n,e)=>{const{min:t,max:i,inverted:s,onSlideStart:o,onSlideMove:r,onSlideEnd:a,onStepKeyDown:l,...c}=n,d=L.useRef(null),u=oi(e,d),h=L.useRef(void 0),f=!s;function m(p){const b=h.current||d.current.getBoundingClientRect(),v=[0,b.height],y=ZZ(v,f?[i,t]:[t,i]);return h.current=b,y(p-b.top)}return g.jsx(mwe,{scope:n.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:g.jsx(_we,{"data-orientation":"vertical",...c,ref:u,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const b=m(p.clientY);o==null||o(b)},onSlideMove:p=>{const b=m(p.clientY);r==null||r(b)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:p=>{const v=hwe[f?"from-bottom":"from-top"].includes(p.key);l==null||l({event:p,direction:v?-1:1})}})})}),_we=L.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:i,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:r,onEndKeyDown:a,onStepKeyDown:l,...c}=n,d=a5(Y1,t);return g.jsx(Et.span,{...c,ref:e,onKeyDown:$e(n.onKeyDown,u=>{u.key==="Home"?(r(u),u.preventDefault()):u.key==="End"?(a(u),u.preventDefault()):dwe.concat(uwe).includes(u.key)&&(l(u),u.preventDefault())}),onPointerDown:$e(n.onPointerDown,u=>{const h=u.target;h.setPointerCapture(u.pointerId),u.preventDefault(),d.thumbs.has(h)?h.focus():i(u)}),onPointerMove:$e(n.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&s(u)}),onPointerUp:$e(n.onPointerUp,u=>{const h=u.target;h.hasPointerCapture(u.pointerId)&&(h.releasePointerCapture(u.pointerId),o(u))})})}),bwe="SliderTrack",vwe=L.forwardRef((n,e)=>{const{__scopeSlider:t,...i}=n,s=a5(bwe,t);return g.jsx(Et.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...i,ref:e})});vwe.displayName=bwe;var hU="SliderRange",wwe=L.forwardRef((n,e)=>{const{__scopeSlider:t,...i}=n,s=a5(hU,t),o=pwe(hU,t),r=L.useRef(null),a=oi(e,r),l=s.values.length,c=s.values.map(h=>Cwe(h,s.min,s.max)),d=l>1?Math.min(...c):0,u=100-Math.max(...c);return g.jsx(Et.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...i,ref:a,style:{...n.style,[o.startEdge]:d+"%",[o.endEdge]:u+"%"}})});wwe.displayName=hU;var fU="SliderThumb",ywe=L.forwardRef((n,e)=>{const t=nrt(n.__scopeSlider),[i,s]=L.useState(null),o=oi(e,a=>s(a)),r=L.useMemo(()=>i?t().findIndex(a=>a.ref.current===i):-1,[t,i]);return g.jsx(lrt,{...n,ref:o,index:r})}),lrt=L.forwardRef((n,e)=>{const{__scopeSlider:t,index:i,name:s,...o}=n,r=a5(fU,t),a=pwe(fU,t),[l,c]=L.useState(null),d=oi(e,w=>c(w)),u=l?r.form||!!l.closest("form"):!0,h=Bce(l),f=r.values[i],m=f===void 0?0:Cwe(f,r.min,r.max),p=urt(i,r.values.length),b=h==null?void 0:h[a.size],v=b?frt(b,m,a.direction):0;return L.useEffect(()=>{if(l)return r.thumbs.add(l),()=>{r.thumbs.delete(l)}},[l,r.thumbs]),g.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${m}% + ${v}px)`},children:[g.jsx(uU.ItemSlot,{scope:n.__scopeSlider,children:g.jsx(Et.span,{role:"slider","aria-label":n["aria-label"]||p,"aria-valuemin":r.min,"aria-valuenow":f,"aria-valuemax":r.max,"aria-orientation":r.orientation,"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,tabIndex:r.disabled?void 0:0,...o,ref:d,style:f===void 0?{display:"none"}:n.style,onFocus:$e(n.onFocus,()=>{r.valueIndexToChangeRef.current=i})})}),u&&g.jsx(crt,{name:s??(r.name?r.name+(r.values.length>1?"[]":""):void 0),form:r.form,value:f},i)]})});ywe.displayName=fU;var crt=n=>{const{value:e,...t}=n,i=L.useRef(null),s=p0e(e);return L.useEffect(()=>{const o=i.current,r=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(r,"value").set;if(s!==e&&l){const c=new Event("input",{bubbles:!0});l.call(o,e),o.dispatchEvent(c)}},[s,e]),g.jsx("input",{style:{display:"none"},...t,ref:i,defaultValue:e})};function drt(n=[],e,t){const i=[...n];return i[t]=e,i.sort((s,o)=>s-o)}function Cwe(n,e,t){const o=100/(t-e)*(n-e);return JN(o,[0,100])}function urt(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function hrt(n,e){if(n.length===1)return 0;const t=n.map(s=>Math.abs(s-e)),i=Math.min(...t);return t.indexOf(i)}function frt(n,e,t){const i=n/2,o=ZZ([0,50],[0,i]);return(i-o(e)*t)*t}function grt(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function mrt(n,e){if(e>0){const t=grt(n);return Math.min(...t)>=e}return!0}function ZZ(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(n[1]-n[0]);return e[0]+i*(t-n[0])}}function prt(n){return(String(n).split(".")[1]||"").length}function _rt(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var Swe=gwe,brt=vwe,vrt=wwe,wrt=ywe;const gU=L.forwardRef(({className:n,...e},t)=>g.jsxs(Swe,{ref:t,className:Yt("relative flex w-full touch-none select-none items-center",n),...e,children:[g.jsx(brt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:g.jsx(vrt,{className:"absolute h-full bg-primary"})}),g.jsx(wrt,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));gU.displayName=Swe.displayName;function yrt({open:n,onOpenChange:e,projectId:t}){const{toast:i}=Aa(),[s,o]=L.useState(!0),[r,a]=L.useState(!1),[l,c]=L.useState(!1),[d,u]=L.useState("overview"),[h,f]=L.useState([]),[m,p]=L.useState([]),[b,v]=L.useState([]),[w,y]=L.useState(null),[C,S]=L.useState("stopped"),[x,k]=L.useState("all"),[N,E]=L.useState(""),[B,A]=L.useState(1),[O,W]=L.useState(50);L.useEffect(()=>{n&&(o(!0),setTimeout(()=>{const J=[{name:"FPS",value:42,unit:"fps",status:"good",threshold:{warning:30,critical:15},history:[35,40,38,42,45,41,42,44,43,42]},{name:"TPS",value:18.5,unit:"tps",status:"warning",threshold:{warning:19,critical:15},history:[20,19.8,19.5,19,18.7,18.5,18.6,18.5,18.4,18.5]},{name:"RAM Usage",value:2.8,unit:"GB",status:"good",threshold:{warning:3.5,critical:4},history:[2.2,2.3,2.5,2.6,2.7,2.8,2.8,2.8,2.8,2.8]},{name:"Chunk Loading",value:15,unit:"ms",status:"excellent",threshold:{warning:50,critical:100},history:[18,17,16,15,14,15,15,14,15,15]},{name:"Entity Tick Time",value:12,unit:"ms",status:"excellent",threshold:{warning:20,critical:40},history:[10,11,12,12,13,12,12,11,12,12]},{name:"Block Entity Tick",value:8,unit:"ms",status:"excellent",threshold:{warning:15,critical:30},history:[7,7,8,8,8,9,8,8,8,8]}],Le=[{id:"log-1",timestamp:new Date(Date.now()-6e4).toISOString(),level:"INFO",message:"Loaded 64 entity textures",source:"TextureManager"},{id:"log-2",timestamp:new Date(Date.now()-55e3).toISOString(),level:"INFO",message:"Registered 12 custom blocks",source:"CustomMod"},{id:"log-3",timestamp:new Date(Date.now()-5e4).toISOString(),level:"WARN",message:"CustomSword.properties may not be compatible with component system",source:"NeoForge"},{id:"log-4",timestamp:new Date(Date.now()-45e3).toISOString(),level:"ERROR",message:"Failed to load custom model for 'custom:special_sword'",source:"ModelManager",stackTrace:`java.lang.NullPointerException: Cannot invoke "net.minecraft.client.resources.model.ModelResourceLocation.toString()" because the return value of "net.minecraft.client.resources.model.ModelResourceLocation.getVariant()" is null
	at net.minecraft.client.resources.model.ModelBakery.loadModel(ModelBakery.java:738)
	at com.example.custommod.client.ModelRegistry.registerSpecialModel(ModelRegistry.java:42)`},{id:"log-5",timestamp:new Date(Date.now()-4e4).toISOString(),level:"INFO",message:"World loaded in 2.3 seconds",source:"WorldLoader"},{id:"log-6",timestamp:new Date(Date.now()-35e3).toISOString(),level:"DEBUG",message:"Rendering 326 entities in view distance",source:"EntityRenderer"},{id:"log-7",timestamp:new Date(Date.now()-3e4).toISOString(),level:"WARN",message:"TPS dropping below 19, 247 entities in loaded chunks",source:"ServerTickHandler"},{id:"log-8",timestamp:new Date(Date.now()-25e3).toISOString(),level:"INFO",message:"Player 'testuser' joined the game",source:"ServerGamePacketListenerImpl"}],ve=[{id:"issue-1",title:"TPS drop with increased entity count",description:"Server TPS drops below 19 when more than 200 entities are loaded in chunks.",status:"active",severity:"medium",category:"performance",impact:"Server performance degradation affecting all players, potentially causing lag and gameplay disruption.",recommendation:"Optimize entity tick methods to reduce processing time. Consider implementing entity culling or sleeping mechanism for distant entities.",affectedCode:`@Override
public void tick() {
    super.tick();
    
    // Inefficient code that runs every tick regardless of entity distance
    for (BlockPos pos : surroundingBlocks) {
        level.getBlockState(pos); // Expensive operation done too frequently
    }
    
    // More processing...
}`},{id:"issue-2",title:"Memory leak in custom block entity renderer",description:"The custom block entity renderer is creating new instances of temporary objects on every frame without proper disposal.",status:"active",severity:"high",category:"memory",impact:"Gradual increase in memory usage leading to potential out-of-memory errors during extended gameplay sessions.",recommendation:"Use object pooling or reuse existing instances instead of creating new objects every frame. Move object creation out of the render loop.",affectedCode:`@Override
public void render(CustomBlockEntity blockEntity, float partialTicks, PoseStack poseStack, 
                 MultiBufferSource bufferSource, int combinedLight, int combinedOverlay) {
    // New model created every frame - memory leak
    Model model = new Model(modelData);
    
    // New temporary transformation matrices created every frame
    Matrix4f transformation = new Matrix4f();
    transformation.setIdentity();
    
    // Render with new resources each frame
    renderModel(model, transformation, bufferSource);
}`},{id:"issue-3",title:"Incompatible SwordItem inheritance",description:"The mod uses inheritance from SwordItem which is incompatible with NeoForge 1.21.5's component-based system.",status:"active",severity:"high",category:"logic",impact:"Mod will not function correctly on NeoForge 1.21.5, causing runtime errors or missing functionality.",recommendation:"Refactor to use the component-based approach. Replace SwordItem inheritance with Item and appropriate components.",affectedCode:`// Current implementation - incompatible with NeoForge 1.21.5
public class CustomSword extends SwordItem {
    public CustomSword() {
        super(Tiers.IRON, 3, -2.4F, new Item.Properties());
    }
    
    // Methods...
}`},{id:"issue-4",title:"Excessive render calls for custom particles",description:"Custom particle system is making redundant render calls for particles outside the view frustum.",status:"resolved",severity:"medium",category:"rendering",impact:"Wasted GPU resources and reduced framerate, especially in scenes with many particles.",recommendation:"Implement frustum culling for particles and batch similar particles together to reduce draw calls.",affectedCode:`// Fixed code, previously was rendering all particles without culling
for (CustomParticle particle : particles) {
    // Only render particles that are visible
    if (frustum.isVisible(particle.getBoundingBox())) {
        renderer.render(particle);
    }
}`}];f(J),p(Le),v(ve),o(!1)},1500))},[n]);const T=m.filter(J=>{const Le=x==="all"||J.level===x,ve=N===""||J.message.toLowerCase().includes(N.toLowerCase())||J.source.toLowerCase().includes(N.toLowerCase());return Le&&ve}),M=()=>{S("running"),a(!0),i({title:"Simulation Started",description:"Now monitoring performance and collecting debug data."});const J=setInterval(()=>{if(C!=="running"){clearInterval(J);return}if(f(Le=>Le.map(ve=>{const nt=(Math.random()*.2-.1)*ve.value;let St=Math.max(0,ve.value+nt);ve.name==="TPS"&&O>200&&(St=Math.max(10,20-(O-200)/50));let zi="excellent";ve.threshold&&(ve.name==="FPS"||ve.name==="TPS"?St<ve.threshold.critical?zi="critical":St<ve.threshold.warning?zi="warning":St>ve.threshold.warning*1.5?zi="excellent":zi="good":St>ve.threshold.critical?zi="critical":St>ve.threshold.warning?zi="warning":St<ve.threshold.warning*.5?zi="excellent":zi="good");const hs=[...ve.history||[],St].slice(-10);return{...ve,value:Number(St.toFixed(1)),status:zi,history:hs}})),Math.random()>.7){const Le={id:`log-${Date.now()}`,timestamp:new Date().toISOString(),level:["INFO","WARN","DEBUG","ERROR"][Math.floor(Math.random()*4)],message:le(),source:Fe()};p(ve=>[Le,...ve])}},2e3/B);return()=>clearInterval(J)},z=()=>{S("paused"),a(!1),i({title:"Simulation Paused",description:"Performance monitoring paused. Data collection stopped."})},ee=()=>{S("stopped"),a(!1),i({title:"Simulation Stopped",description:"Debug session ended. All collected data preserved."})},q=()=>{c(!0),setTimeout(()=>{const J=h.find(nt=>nt.name==="TPS"),Le=h.find(nt=>nt.name==="RAM Usage"),ve=[];(J&&J.status==="warning"||(J==null?void 0:J.status)==="critical")&&ve.push({id:`issue-${Date.now()}-1`,title:"Critical TPS drop detected",description:`Server TPS has dropped to ${J.value} TPS, which is below the acceptable threshold of 19 TPS.`,status:"active",severity:"high",category:"performance",impact:"Server lag affecting all players, potentially causing gameplay disruption and desynchronization issues.",recommendation:"Reduce the number of entities or optimize entity processing. Consider implementing lazy chunk loading or using more efficient data structures for world storage."}),Le&&Le.value>3.5&&ve.push({id:`issue-${Date.now()}-2`,title:"High memory usage",description:`RAM usage has reached ${Le.value} GB, which is approaching the warning threshold.`,status:"active",severity:"medium",category:"memory",impact:"Potential memory pressure that could lead to garbage collection pauses or out-of-memory errors during extended gameplay.",recommendation:"Profile memory usage to identify leaks or inefficient object allocation. Consider implementing object pooling for frequently created and destroyed objects."}),ve.length>0?(v(nt=>[...ve,...nt]),i({title:"New Issues Detected",description:`Found ${ve.length} new potential issues in your mod.`,variant:"destructive"})):i({title:"Analysis Complete",description:"No new issues detected in the current performance data."}),c(!1)},3e3)},Z=J=>{const Le=b.map(ve=>ve.id===J.id?{...ve,status:"resolved"}:ve);v(Le),y(J.id===(w==null?void 0:w.id)?{...J,status:"resolved"}:w),i({title:"Issue Resolved",description:`"${J.title}" has been marked as resolved.`})},V=J=>{const Le=b.map(ve=>ve.id===J.id?{...ve,status:"ignored"}:ve);v(Le),y(J.id===(w==null?void 0:w.id)?{...J,status:"ignored"}:w),i({title:"Issue Ignored",description:`"${J.title}" has been marked as ignored.`})},le=()=>{const J=["Loaded 32 chunks in 150ms","Player moved to dimension minecraft:the_nether","Spawned 5 zombies in chunk [12, 8]","Resource pack reload complete","Saved world data","Unloaded 16 distant chunks","Processed 24 block updates","Updated lighting for region [-2, 3]","Entity count: "+O,"Processing mod interactions","CustomSword.use() called by player","Checking recipe compatibility"];return J[Math.floor(Math.random()*J.length)]},Fe=()=>{const J=["ChunkManager","EntityProcessor","WorldGen","CustomMod","PlayerController","ServerTickHandler","ResourceManager","BlockUpdater"];return J[Math.floor(Math.random()*J.length)]},ke=J=>new Date(J).toLocaleTimeString(),De=J=>{switch(J){case"excellent":return"text-green-400";case"good":return"text-blue-400";case"warning":return"text-yellow-400";case"critical":return"text-red-400";default:return"text-gray-400"}},ce=J=>{switch(J){case"low":return"text-blue-400";case"medium":return"text-yellow-400";case"high":return"text-orange-400";case"critical":return"text-red-400";default:return"text-gray-400"}},Re=J=>{switch(J){case"active":return g.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-red-900/20 text-red-400 border border-red-900/50",children:"Active"});case"resolved":return g.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-900/20 text-green-400 border border-green-900/50",children:"Resolved"});case"ignored":return g.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-800 text-gray-400 border border-gray-700",children:"Ignored"});default:return null}},Ee=J=>{switch(J){case"INFO":return g.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-blue-900/20 text-blue-400 border border-blue-900/50",children:"INFO"});case"WARN":return g.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-yellow-900/20 text-yellow-400 border border-yellow-900/50",children:"WARN"});case"ERROR":return g.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-red-900/20 text-red-400 border border-red-900/50",children:"ERROR"});case"DEBUG":return g.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-purple-900/20 text-purple-400 border border-purple-900/50",children:"DEBUG"});default:return null}},it=J=>{switch(J){case"performance":return g.jsx(iSe,{className:"h-4 w-4 text-yellow-400"});case"memory":return g.jsx(cSe,{className:"h-4 w-4 text-blue-400"});case"rendering":return g.jsx(nSe,{className:"h-4 w-4 text-purple-400"});case"networking":return g.jsx(Y1e,{className:"h-4 w-4 text-green-400"});case"logic":return g.jsx(fSe,{className:"h-4 w-4 text-red-400"});default:return g.jsx(tSe,{className:"h-4 w-4 text-gray-400"})}},Ge=J=>{if(!J||J.length===0)return null;const Le=Math.max(...J)*1.1,ve=40;return g.jsx("div",{className:"h-10 w-full mt-1",children:g.jsx("svg",{width:"100%",height:ve,className:"overflow-visible",children:J.map((nt,St)=>{const zi=St/(J.length-1)*100,hs=ve-nt/Le*ve;return g.jsxs(oh.Fragment,{children:[St>0&&J[St-1]!==void 0&&g.jsx("line",{x1:(St-1)/(J.length-1)*100+"%",y1:ve-J[St-1]/Le*ve,x2:zi+"%",y2:hs,stroke:"#4b5563",strokeWidth:"1.5"}),g.jsx("circle",{cx:zi+"%",cy:hs,r:"2",fill:"#9ca3af"})]},St)})})})};return g.jsx(cf,{open:n,onOpenChange:e,modal:!1,children:g.jsxs(yu,{className:"max-w-5xl bg-gray-900 border-gray-700 text-white max-h-[90vh] overflow-hidden flex flex-col",children:[g.jsxs(Cu,{children:[g.jsxs(Su,{className:"text-xl text-white flex items-center",children:[g.jsx(p$,{className:"h-6 w-6 mr-2 text-green-400"}),"Minecraft-Specific Debugging"]}),g.jsx(xu,{className:"text-gray-400",children:"Analyze in-game behavior, performance, and compatibility"})]}),g.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col",children:[g.jsxs("div",{className:"bg-gray-800/30 p-3 rounded-md border border-gray-700 mb-4",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${C==="running"?"bg-green-500 animate-pulse":C==="paused"?"bg-yellow-500":"bg-red-500"}`}),g.jsx("span",{className:"text-sm font-medium text-white",children:C==="running"?"Game Running":C==="paused"?"Game Paused":"Game Stopped"})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[C==="stopped"?g.jsxs(Se,{size:"sm",onClick:M,children:[g.jsx(ey,{className:"h-4 w-4 mr-1"}),"Start Game"]}):g.jsxs(g.Fragment,{children:[C==="running"?g.jsxs(Se,{variant:"outline",size:"sm",onClick:z,children:[g.jsx(bSe,{className:"h-4 w-4 mr-1"}),"Pause"]}):g.jsxs(Se,{variant:"outline",size:"sm",onClick:M,children:[g.jsx(ey,{className:"h-4 w-4 mr-1"}),"Resume"]}),g.jsxs(Se,{variant:"destructive",size:"sm",onClick:ee,children:[g.jsx(g1,{className:"h-4 w-4 mr-1"}),"Stop"]})]}),g.jsxs(Se,{variant:l?"default":"outline",size:"sm",onClick:q,disabled:l,className:l?"bg-purple-600 hover:bg-purple-700":"",children:[l?g.jsx(Qi,{className:"h-4 w-4 mr-1 animate-spin"}):g.jsx(IR,{className:"h-4 w-4 mr-1"}),"Analyze"]})]})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-3",children:[g.jsxs("div",{children:[g.jsx(Xi,{htmlFor:"sim-speed",className:"text-xs text-gray-400 mb-1 block",children:"Simulation Speed"}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:"text-xs text-gray-400 mr-2",children:"1x"}),g.jsx(gU,{id:"sim-speed",value:[B],onValueChange:J=>A(J[0]),min:.5,max:3,step:.5,className:"flex-grow"}),g.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"3x"})]})]}),g.jsxs("div",{children:[g.jsx(Xi,{htmlFor:"entity-count",className:"text-xs text-gray-400 mb-1 block",children:"Entity Count"}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:"text-xs text-gray-400 mr-2",children:"50"}),g.jsx(gU,{id:"entity-count",value:[O],onValueChange:J=>W(J[0]),min:50,max:500,step:50,className:"flex-grow"}),g.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"500"})]})]}),g.jsx("div",{className:"flex items-end justify-end",children:g.jsxs("span",{className:`text-sm font-medium ${O>300?"text-red-400":O>200?"text-yellow-400":"text-green-400"}`,children:[O," entities"]})})]})]}),s?g.jsx("div",{className:"flex-grow flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx(Qi,{className:"h-8 w-8 animate-spin text-green-500 mx-auto mb-2"}),g.jsx("p",{className:"text-gray-400",children:"Loading debug data..."})]})}):g.jsxs(hf,{value:d,onValueChange:u,className:"flex-grow flex flex-col overflow-hidden",children:[g.jsxs(ku,{className:"bg-gray-800/50",children:[g.jsx(Tn,{value:"overview",children:"Overview"}),g.jsx(Tn,{value:"performance",children:"Performance"}),g.jsx(Tn,{value:"logs",children:"Logs"}),g.jsxs(Tn,{value:"issues",children:["Issues",g.jsx("span",{className:`ml-1.5 rounded-full px-1.5 py-0.5 text-[10px] ${b.filter(J=>J.status==="active").length>0?"bg-red-900/60 text-red-300":"bg-gray-800 text-gray-300"}`,children:b.filter(J=>J.status==="active").length})]})]}),g.jsxs("div",{className:"flex-grow overflow-auto",children:[g.jsx(Rn,{value:"overview",className:"p-4",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Key Performance Metrics"}),g.jsx("div",{className:"grid grid-cols-2 gap-4",children:h.slice(0,4).map(J=>g.jsxs(Bt,{className:"p-3 bg-gray-800/30 border-gray-700",children:[g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsx("span",{className:"text-sm text-gray-400",children:J.name}),g.jsxs("span",{className:`text-sm font-medium ${De(J.status)}`,children:[J.value," ",J.unit]})]}),Ge(J.history)]},J.name))})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Active Issues"}),g.jsxs("div",{className:"space-y-3",children:[b.filter(J=>J.status==="active").length>0?b.filter(J=>J.status==="active").slice(0,3).map(J=>g.jsx(Bt,{className:"p-3 bg-gray-800/30 border-gray-700 hover:bg-gray-800/50 cursor-pointer",onClick:()=>{y(J),u("issues")},children:g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{className:"flex items-start",children:[g.jsx(Dg,{className:`h-4 w-4 mt-0.5 mr-2 flex-shrink-0 ${ce(J.severity)}`}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-medium text-white",children:J.title}),g.jsx("p",{className:"text-sm text-gray-400 mt-0.5 line-clamp-1",children:J.description})]})]}),g.jsx("div",{children:it(J.category)})]})},J.id)):g.jsxs("div",{className:"flex flex-col items-center justify-center h-32 bg-gray-800/20 rounded-md border border-gray-700 text-center",children:[g.jsx(LX,{className:"h-8 w-8 text-green-500 mb-2"}),g.jsx("p",{className:"text-white font-medium",children:"No active issues"}),g.jsx("p",{className:"text-sm text-gray-400",children:"All detected issues have been resolved"})]}),b.filter(J=>J.status==="active").length>3&&g.jsxs(Se,{variant:"ghost",className:"w-full",onClick:()=>u("issues"),children:["View All Issues (",b.filter(J=>J.status==="active").length,")"]})]})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Recent Logs"}),g.jsxs(Bt,{className:"bg-gray-800/30 border-gray-700 overflow-hidden",children:[g.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:g.jsx("div",{className:"divide-y divide-gray-700",children:m.slice(0,8).map(J=>g.jsxs("div",{className:"p-2.5 flex items-start",children:[g.jsx("div",{className:"mr-3 mt-0.5",children:Ee(J.level)}),g.jsxs("div",{className:"flex-grow",children:[g.jsx("p",{className:"text-sm text-gray-300",children:J.message}),g.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[g.jsx("span",{className:"mr-2",children:J.source}),g.jsx("span",{children:ke(J.timestamp)})]})]})]},J.id))})}),g.jsx("div",{className:"p-2 border-t border-gray-700 bg-gray-800/50",children:g.jsx(Se,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>u("logs"),children:"View All Logs"})})]})]})]})}),g.jsxs(Rn,{value:"performance",className:"p-4",children:[g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:h.map(J=>g.jsxs(Bt,{className:"p-4 bg-gray-800/30 border-gray-700",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("h4",{className:"font-medium text-white",children:J.name}),g.jsx("span",{className:`text-sm font-medium ${De(J.status)}`,children:J.status.charAt(0).toUpperCase()+J.status.slice(1)})]}),g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-2xl font-bold text-white",children:J.value}),g.jsx("span",{className:"text-gray-400 ml-1",children:J.unit})]}),J.threshold&&g.jsxs("div",{className:"text-xs text-gray-400",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 mr-1"}),g.jsxs("span",{children:["Warning: ",J.threshold.warning," ",J.unit]})]}),g.jsxs("div",{className:"flex items-center mt-0.5",children:[g.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 mr-1"}),g.jsxs("span",{children:["Critical: ",J.threshold.critical," ",J.unit]})]})]})]}),g.jsx("div",{className:"h-[100px]",children:J.history&&J.history.length>0&&g.jsxs("svg",{width:"100%",height:"100%",className:"overflow-visible",children:[[0,.25,.5,.75,1].map((Le,ve)=>{const nt=100-Le*100;return g.jsx("line",{x1:"0",y1:`${nt}%`,x2:"100%",y2:`${nt}%`,stroke:"#374151",strokeWidth:"1",strokeDasharray:"4 4"},ve)}),J.history&&J.history.length>0&&g.jsx("polyline",{points:J.history.map((Le,ve)=>{const nt=Math.max(...J.history)*1.1,St=ve/(J.history.length-1)*100,zi=100-Le/nt*100;return`${St},${zi}`}).join(" "),fill:"none",stroke:J.status==="excellent"?"#10b981":J.status==="good"?"#3b82f6":J.status==="warning"?"#f59e0b":"#ef4444",strokeWidth:"2"}),J.history&&J.history.length>0&&J.history.map((Le,ve)=>{const nt=Math.max(...J.history)*1.1,St=ve/(J.history.length-1)*100,zi=100-Le/nt*100;return g.jsx("circle",{cx:`${St}%`,cy:`${zi}%`,r:"3",fill:J.status==="excellent"?"#10b981":J.status==="good"?"#3b82f6":J.status==="warning"?"#f59e0b":"#ef4444"},ve)})]})}),g.jsxs("div",{className:"mt-2 text-xs text-gray-400 flex justify-between",children:[g.jsx("span",{children:"10 seconds ago"}),g.jsx("span",{children:"Now"})]})]},J.name))}),g.jsx("div",{className:"bg-blue-900/10 border border-blue-900/30 rounded-md p-4",children:g.jsxs("div",{className:"flex items-start",children:[g.jsx(g$,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-medium text-blue-400 mb-1",children:"Performance Insights"}),g.jsx("p",{className:"text-sm text-gray-300",children:O>300?"Server is experiencing significant performance issues due to high entity count. Consider implementing entity culling or reducing the number of entities.":O>200?"TPS is dropping below optimal levels. This may be related to the number of entities currently loaded.":"Overall performance is good. The game is running efficiently with the current configuration."}),O>200&&g.jsxs("div",{className:"mt-2",children:[g.jsx("h5",{className:"text-sm font-medium text-blue-400 mb-1",children:"Recommendations:"}),g.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[g.jsx("li",{children:"Implement entity sleeping for distant entities"}),g.jsx("li",{children:"Optimize entity AI routines to reduce processing time"}),g.jsx("li",{children:"Consider batching similar operations to improve performance"})]})]})]})]})})]}),g.jsxs(Rn,{value:"logs",className:"pt-4",children:[g.jsxs("div",{className:"px-4 pb-2 flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs(Nr,{value:x,onValueChange:k,children:[g.jsx(Go,{className:"w-[120px] bg-gray-800 border-gray-700",children:g.jsx(Ir,{placeholder:"Filter"})}),g.jsxs(Zo,{className:"bg-gray-800 border-gray-700",children:[g.jsx(Nt,{value:"all",children:"All Levels"}),g.jsx(Nt,{value:"INFO",children:"Info"}),g.jsx(Nt,{value:"WARN",children:"Warning"}),g.jsx(Nt,{value:"ERROR",children:"Error"}),g.jsx(Nt,{value:"DEBUG",children:"Debug"})]})]}),g.jsxs("div",{className:"relative w-56",children:[g.jsx(va,{placeholder:"Search logs...",value:N,onChange:J=>E(J.target.value),className:"pl-8 bg-gray-800 border-gray-700"}),g.jsx(m$,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400"})]})]}),g.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>{k("all"),E("")},disabled:x==="all"&&N==="",children:[g.jsx(fC,{className:"h-4 w-4 mr-1"}),"Reset"]})]}),g.jsx("div",{className:"px-4 mt-2",children:g.jsx(Bt,{className:"bg-gray-800/30 border-gray-700 overflow-hidden",children:g.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:g.jsx("div",{className:"divide-y divide-gray-700",children:T.length>0?T.map(J=>g.jsx("div",{className:"p-3 hover:bg-gray-800/50",children:g.jsxs("div",{className:"flex items-start",children:[g.jsx("div",{className:"mr-3 mt-0.5",children:Ee(J.level)}),g.jsxs("div",{className:"flex-grow",children:[g.jsx("p",{className:"text-sm text-gray-300",children:J.message}),J.stackTrace&&g.jsx("div",{className:"mt-2 bg-gray-900 rounded-md p-2 overflow-x-auto",children:g.jsx("pre",{className:"text-xs text-red-300 font-mono whitespace-pre-wrap",children:J.stackTrace})}),g.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[g.jsx("span",{className:"mr-2",children:J.source}),g.jsx(Ix,{className:"h-3 w-3 mr-1"}),g.jsx("span",{children:ke(J.timestamp)})]})]})]})},J.id)):g.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[g.jsx(oSe,{className:"h-8 w-8 text-gray-500 mb-2"}),g.jsx("p",{className:"text-gray-400",children:"No logs match your filters"})]})})})})})]}),g.jsxs(Rn,{value:"issues",className:"flex md:flex-row flex-col h-full overflow-hidden",children:[g.jsxs("div",{className:"w-full md:w-2/5 md:border-r border-gray-700 overflow-auto p-4",children:[g.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Detected Issues"}),g.jsxs(Se,{variant:"ghost",size:"sm",onClick:q,disabled:l,className:"h-7 px-2",children:[l?g.jsx(Qi,{className:"h-3.5 w-3.5 animate-spin mr-1"}):g.jsx(fC,{className:"h-3.5 w-3.5 mr-1"}),g.jsx("span",{className:"text-xs",children:"Analyze"})]})]}),g.jsxs("div",{className:"space-y-2",children:[b.map(J=>g.jsxs(Bt,{className:`p-3 cursor-pointer transition-colors border-gray-700 hover:bg-gray-800/50 ${(w==null?void 0:w.id)===J.id?"bg-blue-900/20 border-blue-900/50":"bg-gray-800/30"}`,onClick:()=>y(J),children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{className:"flex items-start",children:[g.jsx(Dg,{className:`h-4 w-4 mt-0.5 mr-2 flex-shrink-0 ${ce(J.severity)}`}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-medium text-white",children:J.title}),g.jsx("p",{className:"text-sm text-gray-400 mt-0.5 line-clamp-1",children:J.description})]})]}),g.jsx("div",{children:Re(J.status)})]}),g.jsxs("div",{className:"flex items-center mt-2 pl-6",children:[g.jsxs("div",{className:"flex items-center text-xs text-gray-500 mr-3",children:[g.jsx("span",{className:`mr-1 font-medium ${ce(J.severity)}`,children:J.severity.charAt(0).toUpperCase()+J.severity.slice(1)}),"severity"]}),g.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[it(J.category),g.jsx("span",{className:"ml-1",children:J.category.charAt(0).toUpperCase()+J.category.slice(1)})]})]})]},J.id)),b.length===0&&g.jsxs("div",{className:"flex flex-col items-center justify-center h-32 bg-gray-800/20 rounded-md border border-gray-700 text-center p-4",children:[g.jsx(LX,{className:"h-8 w-8 text-green-500 mb-2"}),g.jsx("p",{className:"text-white font-medium",children:"No issues detected"}),g.jsx("p",{className:"text-sm text-gray-400",children:"Your mod seems to be running smoothly"})]})]})]}),g.jsx("div",{className:"w-full md:w-3/5 p-4 overflow-auto",children:w?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex justify-between items-start mb-1",children:[g.jsx("h3",{className:"text-lg font-medium text-white",children:w.title}),Re(w.status)]}),g.jsx("p",{className:"text-gray-300",children:w.description})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs(Bt,{className:"p-3 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Severity"}),g.jsxs("div",{className:"flex items-center",children:[g.jsx(Dg,{className:`h-5 w-5 mr-2 ${ce(w.severity)}`}),g.jsx("span",{className:`font-medium ${ce(w.severity)}`,children:w.severity.charAt(0).toUpperCase()+w.severity.slice(1)})]})]}),g.jsxs(Bt,{className:"p-3 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Category"}),g.jsxs("div",{className:"flex items-center",children:[it(w.category),g.jsx("span",{className:"ml-2 capitalize",children:w.category})]})]})]}),g.jsxs(Bt,{className:"p-3 bg-gray-800/30 border-gray-700",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Impact"}),g.jsx("p",{className:"text-sm text-gray-300",children:w.impact})]}),g.jsxs(Bt,{className:"p-3 bg-green-900/10 border-green-900/30",children:[g.jsx("h4",{className:"text-sm font-medium text-green-400 mb-2",children:"Recommendation"}),g.jsx("p",{className:"text-sm text-gray-300",children:w.recommendation})]}),w.affectedCode&&g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Affected Code"}),g.jsx("div",{className:"bg-gray-900 rounded-md p-3 overflow-x-auto",children:g.jsx("pre",{className:"text-xs text-red-300 font-mono whitespace-pre-wrap",children:w.affectedCode})})]}),w.status==="active"&&g.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[g.jsx(Se,{variant:"outline",onClick:()=>V(w),children:"Ignore Issue"}),g.jsxs(Se,{onClick:()=>Z(w),children:[g.jsx(zn,{className:"h-4 w-4 mr-1"}),"Mark as Resolved"]})]})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[g.jsx(Dg,{className:"h-12 w-12 text-gray-500 mb-3"}),g.jsx("h3",{className:"text-lg font-medium text-white mb-1",children:"No Issue Selected"}),g.jsx("p",{className:"text-gray-400 max-w-md",children:"Select an issue from the list to view details and recommendations."})]})})]})]})]})]})]})})}function Crt(){const{id:n}=gle(),e=parseInt(n),[,t]=JO(),{user:i}=e4(),{toast:s}=Aa(),o=L.useRef(null),r=L.useRef(null),[a,l]=L.useState("code-editor"),[c,d]=L.useState(null),[u,h]=L.useState(!1),[f,m]=L.useState(null),[p,b]=L.useState(!1),[v,w]=L.useState(!1),[y,C]=L.useState([]),{data:S,isLoading:x,error:k}=TR({queryKey:[`/api/projects/${e}`],queryFn:ek({on401:"throw"}),enabled:!!i&&!!e}),{data:N=[],isLoading:E,error:B}=TR({queryKey:[`/api/projects/${e}/files`],queryFn:ek({on401:"throw"}),enabled:!!i&&!!e}),A=Dx({mutationFn:async M=>await(await sy("PUT",`/api/files/${M.id}`,{content:M.content})).json(),onSuccess:()=>{oy.invalidateQueries({queryKey:[`/api/projects/${e}/files`]}),h(!1),s({title:"File saved",description:"Your changes have been saved successfully."})},onError:M=>{s({title:"Failed to save file",description:M.message,variant:"destructive"})}});L.useEffect(()=>{Xve();const M=z=>{if(u)return z.preventDefault(),z.returnValue="",""};return window.addEventListener("beforeunload",M),()=>{var z;window.removeEventListener("beforeunload",M),(z=o.current)==null||z.dispose()}},[u]),L.useEffect(()=>{if(N.length>0){c||d(N[0]);const M=N.map(z=>({name:z.name,path:z.path,type:"file",content:z.content}));C(M)}},[N,c]),L.useEffect(()=>{if(c&&document.getElementById("monaco-editor-container")){o.current&&o.current.dispose();const M={value:c.content,language:O(c.name),theme:"minecraft-dark",minimap:{enabled:!0},scrollBeyondLastLine:!1,automaticLayout:!0,fontSize:14,lineNumbers:"on",formatOnPaste:!0,formatOnType:!0};r.current=Yve,o.current=KC.create(document.getElementById("monaco-editor-container"),M),o.current.onDidChangeModelContent(()=>{h(!0)}),o.current.addCommand(KG.CtrlCmd|$G.KeyS,()=>{W()})}},[c]);const O=M=>{var ee;const z=(ee=M.split(".").pop())==null?void 0:ee.toLowerCase();if(!z)return"text";switch(z){case"java":return"java";case"json":return"json";case"xml":return"xml";case"properties":return"properties";case"txt":return"text";case"md":return"markdown";case"gradle":return"groovy";case"toml":return"toml";default:return"text"}},W=()=>{if(!c||!o.current)return;const M=o.current.getValue();A.mutate({id:c.id,content:M})},T=M=>{u?window.confirm("You have unsaved changes. Do you want to discard them?")&&(d(M),h(!1)):d(M)};return x||E?g.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-r from-gray-900 to-gray-800",children:[g.jsx(Qi,{className:"h-12 w-12 animate-spin text-primary mb-4"}),g.jsx("h2",{className:"text-xl font-medium text-white",children:"Loading project..."})]}):k||B?g.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-r from-gray-900 to-gray-800",children:g.jsxs("div",{className:"max-w-md w-full bg-red-900/20 p-8 rounded-lg border border-red-700 text-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-red-300 mb-4",children:"Error Loading Project"}),g.jsx("p",{className:"text-gray-300 mb-8",children:"There was a problem loading the project. Please try again later."}),g.jsxs(Se,{variant:"outline",onClick:()=>t("/"),className:"mr-2",children:[g.jsx(xX,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),g.jsxs(Se,{onClick:()=>window.location.reload(),children:[g.jsx(fC,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}):g.jsxs("div",{className:"min-h-screen bg-gradient-to-r from-gray-900 to-gray-800 flex flex-col",children:[g.jsx("header",{className:"bg-gray-800/80 border-b border-gray-700 py-3 px-4",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs(Se,{variant:"ghost",size:"sm",onClick:()=>t("/"),className:"text-gray-300 hover:text-white",children:[g.jsx(xX,{className:"h-4 w-4 mr-1 md:mr-2"}),g.jsx("span",{className:"hidden md:inline",children:"Back"})]}),g.jsx("h1",{className:"text-lg md:text-xl font-bold text-white truncate",children:S==null?void 0:S.name})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs("span",{className:"hidden md:inline-block text-sm text-gray-400 mr-2",children:[S==null?void 0:S.minecraftVersion," • ",S==null?void 0:S.modVersion]}),g.jsxs(Se,{size:"sm",variant:"outline",onClick:W,disabled:!u||A.isPending,className:u?"text-amber-400 border-amber-400/50":"",children:[A.isPending?g.jsx(Qi,{className:"h-4 w-4 animate-spin"}):g.jsx(vSe,{className:"h-4 w-4"}),g.jsx("span",{className:"hidden md:inline-block ml-1",children:"Save"})]}),g.jsxs(Se,{size:"sm",variant:"default",className:"h-8 px-2 md:px-3",children:[g.jsx(ey,{className:"h-4 w-4"}),g.jsx("span",{className:"hidden md:inline-block ml-1",children:"Run"})]}),g.jsx(Se,{size:"sm",variant:"ghost",className:"md:hidden",onClick:()=>b(M=>!M),children:g.jsx(Ex,{className:"h-4 w-4"})})]})]})}),p&&g.jsxs("div",{className:"md:hidden bg-gray-900/70 border-b border-gray-700 p-3",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("h2",{className:"text-sm font-medium text-gray-300",children:"Project Files"}),g.jsx(Se,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>b(!1),children:g.jsx(g1,{className:"h-4 w-4"})})]}),g.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:N.map(M=>g.jsxs("div",{className:`px-2 py-1.5 rounded text-sm cursor-pointer flex items-center ${(c==null?void 0:c.id)===M.id?"bg-blue-900/30 text-blue-300":"hover:bg-gray-800 text-gray-300 hover:text-white"}`,onClick:()=>{T(M),b(!1)},children:[g.jsx(Ex,{className:"h-4 w-4 mr-2 flex-shrink-0"}),g.jsx("span",{className:"truncate",children:M.name})]},M.id))})]}),g.jsx($st,{projectId:e,projectName:(S==null?void 0:S.name)||"Project",files:N,currentFile:c||void 0,onApplySuggestion:M=>{if(console.log("Applying suggestion:",M),o.current&&M.code){const z=o.current.getPosition();z&&(o.current.executeEdits("",[{range:new LF(z.lineNumber,z.column,z.lineNumber,z.column),text:M.code}]),h(!0))}}}),g.jsx("div",{className:"flex-grow flex flex-col relative",children:g.jsxs("div",{className:"flex-grow flex flex-col",children:[g.jsxs(hf,{value:a,onValueChange:l,className:"flex-grow flex flex-col",children:[g.jsx("div",{className:"bg-gray-800/30 px-4 pt-2 overflow-x-auto",children:g.jsxs(ku,{className:"bg-gray-800/50",children:[g.jsxs(Tn,{value:"code-editor",className:"data-[state=active]:bg-gray-900",children:[g.jsx(XL,{className:"h-4 w-4 mr-0 md:mr-2"}),g.jsx("span",{className:"hidden md:inline",children:"Code Editor"})]}),g.jsxs(Tn,{value:"architecture",className:"data-[state=active]:bg-gray-900",children:[g.jsx(a9,{className:"h-4 w-4 mr-0 md:mr-2"}),g.jsx("span",{className:"hidden md:inline",children:"Architecture"})]}),g.jsxs(Tn,{value:"testing",className:"data-[state=active]:bg-gray-900",children:[g.jsx(r9,{className:"h-4 w-4 mr-0 md:mr-2"}),g.jsx("span",{className:"hidden md:inline",children:"Testing"})]}),g.jsxs(Tn,{value:"migration",className:"data-[state=active]:bg-gray-900",children:[g.jsx(Tg,{className:"h-4 w-4 mr-0 md:mr-2"}),g.jsx("span",{className:"hidden md:inline",children:"Migration"})]})]})}),g.jsx(Rn,{value:"code-editor",className:"flex-grow pt-0 mt-0",children:g.jsx("div",{className:"h-full flex flex-col",children:c?g.jsx(Zst,{initialContent:c.content,language:O(c.name),fileId:c.path,fileName:c.name,onSave:M=>{A.mutate({id:c.id,content:M})},onFileSelect:M=>{const z=N.find(ee=>ee.path===M.path);z&&T(z)},projectStructure:y}):g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsxs("div",{className:"text-center",children:[g.jsx(Ex,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),g.jsx("p",{className:"text-gray-400 mb-3",children:"No file selected"}),g.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>w(!0),children:[g.jsx(cT,{className:"h-4 w-4 mr-2"}),"Open File Explorer"]})]})})})}),g.jsx(Rn,{value:"architecture",className:"flex-grow pt-0 mt-0",children:g.jsx(Jot,{projectId:e})}),g.jsx(Rn,{value:"testing",className:"flex-grow pt-0 mt-0",children:g.jsx(ert,{projectId:e})}),g.jsx(Rn,{value:"migration",className:"flex-grow pt-0 mt-0",children:g.jsx(tot,{projectId:e})})]}),g.jsxs("div",{className:"h-[25vh] border-t border-gray-700 bg-gray-900/50 overflow-hidden flex flex-col",children:[g.jsxs("div",{className:"bg-gray-800/30 px-3 py-2 border-b border-gray-700 flex justify-between items-center",children:[g.jsxs("h3",{className:"text-sm font-medium text-gray-300 flex items-center",children:[g.jsx(qae,{className:"h-4 w-4 mr-2 text-gray-400"}),"Console Output"]}),g.jsxs("div",{className:"flex space-x-1",children:[g.jsx(Se,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:g.jsx(fC,{className:"h-3.5 w-3.5"})}),g.jsx(Se,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:g.jsx(Kae,{className:"h-3.5 w-3.5"})})]})]}),g.jsx("div",{className:"flex-grow p-2 overflow-auto",children:g.jsx("pre",{className:"text-xs text-green-300 font-mono",children:`> NeoForge 1.21.5 initialized
> Loading mod assets...
> Registering blocks: 3 custom blocks registered
> Registering items: 7 custom items registered
> Entity registration complete
> Mod initialization complete
> Ready for development`})})]})]})}),f==="code-completion"&&g.jsx(Xst,{open:!0,onOpenChange:()=>m(null),editor:o.current,file:c}),f==="educational-code"&&g.jsx(Tot,{open:!0,onOpenChange:()=>m(null),editor:o.current,file:c,projectId:e}),f==="refactoring"&&g.jsx(trt,{open:!0,onOpenChange:()=>m(null),editor:o.current,file:c,projectId:e}),f==="minecraft-debugging"&&g.jsx(yrt,{open:!0,onOpenChange:()=>m(null),projectId:e}),f==="code-review"&&g.jsx(irt,{open:!0,onOpenChange:()=>m(null),file:c,projectId:e})]})}function Srt(){return g.jsxs(Fxe,{children:[g.jsx(UX,{path:"/",component:pDe}),g.jsx(UX,{path:"/projects/:id",component:Crt}),g.jsx(c9,{path:"/auth",component:CDe}),g.jsx(c9,{component:SDe})]})}function xrt(){const{theme:n}=lxe();return g.jsx(Ele,{client:oy,children:g.jsx(gLe,{children:g.jsx(mLe,{children:g.jsxs("div",{className:`${n} min-h-screen transition-colors duration-500 relative`,children:[g.jsx(Wc,{opacity:.08}),g.jsx(axe,{}),g.jsx(Srt,{})]})})})})}const Lrt=document.getElementById("root"),krt=pae(Lrt);krt.render(g.jsx(L.StrictMode,{children:g.jsx(Ele,{client:oy,children:g.jsx(lwe,{children:g.jsx(xrt,{})})})}));export{qI as m,v_e as t};
